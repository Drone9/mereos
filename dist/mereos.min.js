/*!
 * Mereos - v1.1.6
 * Copyright (c) DT Education
 * Licensed under the MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Mereos=t():e.Mereos=t()}(self,(()=>(()=>{var e={4202:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ASSET_URL:()=>r,BASE_URL:()=>i,CONTENT_TYPE:()=>o,LockDownOptions:()=>l,SOCKET_URL:()=>a,SYSTEM_REQUIREMENT_STEP:()=>h,aiEventsFeatures:()=>g,defaultTheme:()=>d,examPreparationSteps:()=>f,initialSessionData:()=>s,languages:()=>_,preChecksSteps:()=>c,prevalidationSteps:()=>m,recordingEvents:()=>u,systemDiagnosticSteps:()=>p});var r="https://mereos-corder.s3.eu-west-3.amazonaws.com/library_icons",i="https://corder-api.mereos.eu",a="wss://mobile-socket.mereos.eu/websocket/",o=Object.freeze({JSON:"application/json",FORM_DATA:"multipart/form-data"}),s={aiEvents:[],browserEvents:[],start_time:null,submission_time:null,duration_taken:0,identity_card:null,identity_photo:null,school:null,assessment:null,candidate:null,user_video_name:[],user_audio_name:[],screen_sharing_video_name:[],roomscan_recordings:[],sessionId:null,collected_details:null,video_codec:null,video_extension:null,archive_id:null,attempt_id:null,sessionStatus:"Initiated",mobileRoomId:null,mobileRecordings:[],mobileAudios:[],mobileRoomSessionId:null,twilioToken:null,incident_level:null,converationId:null,candidate_assessment:null,location:null,downloadSpeed:null,uploadSpeed:null,CPUSpeed:null,RAMSpeed:null,room_id:null,quizStartTime:0},c={examPreparation:!1,identityConfirmation:!1,diagnosticStep:!1,requirementStep:!1,preValidation:!1,userPhoto:!1,identityCardPhoto:!1,audioDetection:!1,roomScanningVideo:!1,screenSharing:!1,examIndication:!1,examPrechecks:!1,mobileConnection:!1},u=["record_screen","record_audio","record_video","mobile_proctoring"],l=["detect_unfocus","disable_downloading","disable_printing","force_full_screen","detect_resizing_of_window","disable_right_click","disable_keyboard_shortcuts","block_browser_screenshot","disable_clipboard"],d={language:"en",theming:"#FF961B"},p=["verify_desktop","record_video","record_audio","verify_connection","track_location","record_room","record_audio"],h=["verify_cpu","verify_ram","verify_upload_speed","verify_download_speed"],f=["record_video","record_audio","record_screen"],m=["record_video","record_audio","verify_id","record_room"],g=["object_detection","multiple_people_detection","person_missing"],_=[{name:"English",value:"english",src:"".concat(r,"/flag-of-uk.svg"),alt:"",keyword:"en"},{name:"Spanish",value:"spanish",src:"".concat(r,"/flag-of-spain.svg"),alt:"",keyword:"es"},{name:"German",value:"german",src:"".concat(r,"/flag-of-germany.svg"),alt:"",keyword:"de"},{name:"French",value:"french",src:"".concat(r,"/flag-of-france.svg"),alt:"",keyword:"fr"},{name:"Portuguese (Brazil)",value:"portuguese_brazil",src:"".concat(r,"/flag-of-brazil.svg"),alt:"",keyword:"pt"},{name:"Italian",value:"italian",src:"".concat(r,"/flag-of-italy.svg"),alt:"",keyword:"it"},{name:"Dutch",value:"dutch",src:"".concat(r,"/netherlands.svg"),alt:"",keyword:"nl"},{name:"Welsh",value:"welsh",src:"".concat(r,"/flag-of-whales.png"),alt:"",keyword:"cy"}]},2380:function(e,t,n){!function(e,t,n){"use strict";const r={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class i{constructor(e,t){this.modelPath=t||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(e)}/model.json`}getPrefix(e){return"lite_mobilenet_v2"===e?`ssd${e}`:`ssd_${e}`}async load(){this.model=await t.loadGraphModel(this.modelPath);const e=n.zeros([1,300,300,3],"int32"),r=await this.model.executeAsync(e);await Promise.all(r.map((e=>e.data()))),r.map((e=>e.dispose())),e.dispose()}async infer(e,t,r){const i=n.tidy((()=>(e instanceof n.Tensor||(e=n.browser.fromPixels(e)),n.expandDims(e)))),a=i.shape[1],o=i.shape[2],s=await this.model.executeAsync(i),c=s[0].dataSync(),u=s[1].dataSync();i.dispose(),n.dispose(s);const[l,d]=this.calculateMaxScores(c,s[0].shape[1],s[0].shape[2]),p=n.getBackend();"webgl"===n.getBackend()&&n.setBackend("cpu");const h=n.tidy((()=>{const e=n.tensor2d(u,[s[1].shape[1],s[1].shape[3]]);return n.image.nonMaxSuppression(e,l,t,r,r)})),f=h.dataSync();return h.dispose(),p!==n.getBackend()&&n.setBackend(p),this.buildDetectedObjects(o,a,u,l,f,d)}buildDetectedObjects(e,t,n,i,a,o){const s=a.length,c=[];for(let u=0;u<s;u++){const s=[];for(let e=0;e<4;e++)s[e]=n[4*a[u]+e];const l=s[0]*t,d=s[1]*e,p=s[2]*t,h=s[3]*e;s[0]=d,s[1]=l,s[2]=h-d,s[3]=p-l,c.push({bbox:s,class:r[o[a[u]]+1].displayName,score:i[a[u]]})}return c}calculateMaxScores(e,t,n){const r=[],i=[];for(let a=0;a<t;a++){let t=Number.MIN_VALUE,o=-1;for(let r=0;r<n;r++)e[a*n+r]>t&&(t=e[a*n+r],o=r);r[a]=t,i[a]=o}return[r,i]}async detect(e,t=20,n=.5){return this.infer(e,t,n)}dispose(){null!=this.model&&this.model.dispose()}}e.ObjectDetection=i,e.load=async function(e={}){if(null==n)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const t=e.base||"lite_mobilenet_v2",r=e.modelUrl;if(-1===["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(t))throw new Error(`ObjectDetection constructed with invalid base model ${t}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const a=new i(t,r);return await a.load(),a},e.version="2.2.3",Object.defineProperty(e,"__esModule",{value:!0})}(t,n(9692),n(8496))},9692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GraphModel:()=>He,deregisterOp:()=>N,loadGraphModel:()=>Ye,loadGraphModelSync:()=>Ke,registerOp:()=>E,version_converter:()=>Xe});var r={};n.r(r),n.d(r,{json:()=>z});var i={};n.r(i),n.d(i,{json:()=>$});var a={};n.r(a),n.d(a,{json:()=>j});var o={};n.r(o),n.d(o,{json:()=>B});var s={};n.r(s),n.d(s,{json:()=>V});var c={};n.r(c),n.d(c,{json:()=>U});var u={};n.r(u),n.d(u,{json:()=>G});var l={};n.r(l),n.d(l,{json:()=>q});var d={};n.r(d),n.d(d,{json:()=>W});var p={};n.r(p),n.d(p,{json:()=>H});var h={};n.r(h),n.d(h,{json:()=>Y});var f={};n.r(f),n.d(f,{json:()=>K});var m={};n.r(m),n.d(m,{json:()=>X});var g={};n.r(g),n.d(g,{json:()=>Q});var _={};n.r(_),n.d(_,{json:()=>J});var v={};n.r(v),n.d(v,{json:()=>Z});var y={};n.r(y),n.d(y,{json:()=>ee});var b={};n.r(b),n.d(b,{json:()=>te});var w={};n.r(w),n.d(w,{json:()=>ne});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:()=>ye.BTT,abs:()=>ye.tnl,acos:()=>ye.HQu,acosh:()=>ye.FqL,add:()=>ye.WQq,addN:()=>ye.QiD,all:()=>ye.Q7R,any:()=>ye.bzn,argMax:()=>ye.FLi,argMin:()=>ye.XRg,asin:()=>ye.qRo,asinh:()=>ye.yHs,atan:()=>ye.rYl,atan2:()=>ye.FPz,atanh:()=>ye.rfv,avgPool:()=>ye.$jT,avgPool3d:()=>ye.sub,basicLSTMCell:()=>ye.lZX,batchNorm:()=>ye.$v7,batchNorm2d:()=>ye.BFc,batchNorm3d:()=>ye.kSi,batchNorm4d:()=>ye.T5N,batchToSpaceND:()=>ye.GTe,bincount:()=>ye.HbZ,bitwiseAnd:()=>ye.vjT,booleanMaskAsync:()=>ye.ftb,broadcastArgs:()=>ye.ROE,broadcastTo:()=>ye.hOW,buffer:()=>ye.ra8,cast:()=>ye.wgE,ceil:()=>ye.mkO,clipByValue:()=>ye.zQh,clone:()=>ye.o8B,complex:()=>ye.faB,concat:()=>ye.xWs,concat1d:()=>ye.I1m,concat2d:()=>ye.RPU,concat3d:()=>ye.O5O,concat4d:()=>ye.P1l,conv1d:()=>ye.kA9,conv2d:()=>ye.Xtf,conv2dTranspose:()=>ye.wX9,conv3d:()=>ye.IPL,conv3dTranspose:()=>ye.jIJ,cos:()=>ye.gnS,cosh:()=>ye.yIG,cosineWindow:()=>ye._jP,cumprod:()=>ye.Lp0,cumsum:()=>ye.rCv,denseBincount:()=>ye.aOp,depthToSpace:()=>ye.Rj8,depthwiseConv2d:()=>ye.Gl3,diag:()=>ye.smy,dilation2d:()=>ye.X7t,div:()=>ye.y4m,divNoNan:()=>ye.ek5,dot:()=>ye.Omf,dropout:()=>ye.EZY,einsum:()=>ye._3C,elu:()=>ye.Pqc,enclosingPowerOfTwo:()=>ye.FJY,ensureShape:()=>ye.QP2,equal:()=>ye.LCg,erf:()=>ye.Y12,euclideanNorm:()=>ye.p4S,exp:()=>ye.oNF,expandDims:()=>ye.UG6,expm1:()=>ye.IYd,eye:()=>ye.y5U,fft:()=>ye.hVP,fill:()=>ye.GSj,floor:()=>ye.RIf,floorDiv:()=>ye.wh_,fused:()=>ye.cZk,gather:()=>ye.kgh,gatherND:()=>ye.SY9,greater:()=>ye.rhj,greaterEqual:()=>ye.DQN,ifft:()=>ye.KGM,imag:()=>ye.ngS,image:()=>ye.Slp,inTopKAsync:()=>ye.U4u,irfft:()=>ye.ggX,isFinite:()=>ye.MIs,isInf:()=>ye.EN4,isNaN:()=>ye.yrW,leakyRelu:()=>ye.H8d,less:()=>ye.M7h,lessEqual:()=>ye.InN,linalg:()=>ye.mPL,linspace:()=>ye.mT8,localResponseNormalization:()=>ye.Kgs,log:()=>ye.Rm2,log1p:()=>ye.Kko,logSigmoid:()=>ye.nqI,logSoftmax:()=>ye.HPB,logSumExp:()=>ye.VZ,logicalAnd:()=>ye.n76,logicalNot:()=>ye.NSZ,logicalOr:()=>ye.ztW,logicalXor:()=>ye.rxB,losses:()=>ye.YYh,lowerBound:()=>ye.yzS,matMul:()=>ye.NoW,max:()=>ye.T9B,maxPool:()=>ye.jgi,maxPool3d:()=>ye.NYV,maxPoolWithArgmax:()=>ye.RO,maximum:()=>ye.PhQ,mean:()=>ye.i2o,meshgrid:()=>ye.OYQ,min:()=>ye.jkA,minimum:()=>ye.BpO,mirrorPad:()=>ye.FFZ,mod:()=>ye.ziu,moments:()=>ye.Clk,movingAverage:()=>ye.CRk,mul:()=>ye.lKK,multiRNNCell:()=>ye.YDF,multinomial:()=>ye.OjQ,neg:()=>ye.HZy,norm:()=>ye.xbf,notEqual:()=>ye.Ec,oneHot:()=>ye.Mw0,ones:()=>ye.SaS,onesLike:()=>ye.P61,op:()=>ye.op,outerProduct:()=>ye.X4o,pad:()=>ye.eVF,pad1d:()=>ye.BZs,pad2d:()=>ye.grY,pad3d:()=>ye.XHu,pad4d:()=>ye.WLX,pool:()=>ye.dzn,pow:()=>ye.n7C,prelu:()=>ye.NsG,print:()=>ye.yyV,prod:()=>ye._eU,raggedGather:()=>ye.whe,raggedRange:()=>ye.iyU,raggedTensorToTensor:()=>ye.Q0_,rand:()=>ye._9M,randomGamma:()=>ye.pR9,randomNormal:()=>ye.FE$,randomStandardNormal:()=>ye.m0H,randomUniform:()=>ye.YeY,randomUniformInt:()=>ye.HYA,range:()=>ye.y17,real:()=>ye.xav,reciprocal:()=>ye.VOZ,relu:()=>ye.VVh,relu6:()=>ye.j__,reshape:()=>ye.tQQ,reverse:()=>ye.BEg,reverse1d:()=>ye.QD2,reverse2d:()=>ye.LMr,reverse3d:()=>ye.I2l,reverse4d:()=>ye.JYU,rfft:()=>ye.z8$,round:()=>ye.LIG,rsqrt:()=>ye.Z$r,scalar:()=>ye.d_2,scatterND:()=>ye.NFr,searchSorted:()=>ye.sZg,selu:()=>ye.WfX,separableConv2d:()=>ye.wdz,setdiff1dAsync:()=>ye.F12,sigmoid:()=>ye.ry7,sign:()=>ye._SZ,signal:()=>ye.vPA,sin:()=>ye.F8e,sinh:()=>ye.L0l,slice:()=>ye.dik,slice1d:()=>ye.Q$M,slice2d:()=>ye.zAd,slice3d:()=>ye.wck,slice4d:()=>ye.R0O,softmax:()=>ye.Vs9,softplus:()=>ye.lw0,spaceToBatchND:()=>ye.eDJ,sparse:()=>ye.lMo,sparseToDense:()=>ye.Zhr,spectral:()=>ye.lOn,split:()=>ye.lDo,sqrt:()=>ye.RZD,square:()=>ye.EwI,squaredDifference:()=>ye.Pbu,squeeze:()=>ye.r2V,stack:()=>ye.t$z,step:()=>ye.PMw,stridedSlice:()=>ye.Ym9,string:()=>ye.YjP,sub:()=>ye.jbE,sum:()=>ye.czq,tan:()=>ye.Mlm,tanh:()=>ye.ymU,tensor:()=>ye.OEK,tensor1d:()=>ye.tGX,tensor2d:()=>ye.KtR,tensor3d:()=>ye.$_$,tensor4d:()=>ye.g9W,tensor5d:()=>ye.Lpo,tensor6d:()=>ye.yxw,tensorScatterUpdate:()=>ye.NNh,tile:()=>ye.Vsq,topk:()=>ye.rfw,transpose:()=>ye.mgz,truncatedNormal:()=>ye.efE,unique:()=>ye.AmM,unsortedSegmentSum:()=>ye.zAU,unstack:()=>ye.K$i,upperBound:()=>ye.rni,variable:()=>ye.bvq,where:()=>ye._M9,whereAsync:()=>ye.YJN,zeros:()=>ye.Ul9,zerosLike:()=>ye.POl});var x=n(8496);var S,T;(0,x.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(S||(S={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(T||(T={}));const C={};function E(e,t){const n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};C[e]=n}function I(e){return C[e]}function N(e){delete C[e]}function A(e,t,n,r,i){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,o=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===a.type)return O(t.inputNames[s],n,r,i);if("tensors"===a.type){const a=t.inputs.slice(e,o);return t.inputNames.slice(e,o).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=a[t])||void 0===n?void 0:n.op)})).map((e=>O(e,n,r,i)))}const c=O(t.inputNames[s],n,r,i),u=c.dataSync();return"number"===a.type?u[0]:x.util.toNestedArray(c.shape,u)}const o=t.attrParams[e];return o&&o.value}function O(e,t,n,r){const[i,a]=L(e,n);if(null!=r){const e=r.getHashTableHandleByName(i);if(null!=e)return e}const o=n.currentContextIds.find((e=>!!t[D(i,e)]));return void 0!==o?t[D(i,o)][a]:void 0}function R(e,t,n){return t[D(e,n.currentContextId)]}function P(e,t){const[n,r,i]=L(e,t);return[D(n,t&&t.currentContextId),r,i]}function D(e,t){return t?`${e}-${t}`:e}function L(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let i;if(1===r.length)i=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;i=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,i),i}function M(e,t,n){let r=A("pad",e,t,n);if("explicit"===r){r=A("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)i[e][0]=r[2*e],i[e][1]=r[2*e+1];return i}return r}function F(e){return e.kept?e:(0,x.clone)(e)}const z=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],$=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],B=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],V=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],U=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],G=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],q=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],W=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],H=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Y=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],K=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],X=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Q=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],J=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Z=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ee=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],te=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ne=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class re{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b,w].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],i=[],a=[],o=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?i.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let s=[];const c=[];let u={},l={};null!=t&&(u=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));const d=Object.keys(o);d.forEach((e=>{const t=o[e];t.inputNames.forEach(((e,n)=>{const[r,,i]=P(e),a=o[r];if(null!=a.outputs){const e=a.outputs.indexOf(i);if(-1!==e){const i=`${r}:${e}`;t.inputNames[n]=i}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(l).length?d.forEach((e=>{const t=o[e];0===t.children.length&&c.push(t)})):Object.keys(l).forEach((e=>{const[t]=P(e),n=o[t];null!=n&&(n.signatureKey=l[e],c.push(n))})),Object.keys(u).length>0?Object.keys(u).forEach((e=>{const[t]=P(e),n=o[t];n&&(n.signatureKey=u[e],s.push(n))})):s=r;let p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:o,inputs:s,outputs:c,weights:i,placeholders:r,signature:t,functions:p};return a.length>0&&(h.initNodes=a),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=I(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let i;switch(n.type){case"string":i=ae(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ae(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=me(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=me(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=se(e.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=se(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=fe(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=oe(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=oe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=_e(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=_e(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=he(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=he(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=ge(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ge(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=le(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=le(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=de(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=de(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=ue(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ue(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:i,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const i=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=P(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:ce(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[i,,a]=P(e),o=r[i];if(null!=o.outputs){const e=o.outputs.indexOf(a);if(-1!==e){const r=`${i}:${e}`;t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)}))}));const o=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=P(o[e.name]),i=r[t];null!=i&&(i.defaultOutput=n,a.push(i))}));const s=this.mapArgsToSignature(e);return{nodes:r,inputs:i,outputs:a,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function ie(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=(0,x.env)().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function ae(e,t,n,r=!1){const i=e[t];return null!=i?ie(i.s,r):n}function oe(e,t,n){const r=e[t];return r?r.b:n}function se(e,t,n){const r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function ce(e){switch("string"==typeof e&&(e=S[e]),e){case S.DT_FLOAT:case S.DT_HALF:return"float32";case S.DT_INT32:case S.DT_INT64:case S.DT_INT8:case S.DT_UINT8:return"int32";case S.DT_BOOL:return"bool";case S.DT_DOUBLE:return"float32";case S.DT_STRING:return"string";case S.DT_COMPLEX64:case S.DT_COMPLEX128:return"complex64";default:return null}}function ue(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function le(e,t,n){const r=e[t];return r&&r.type?ce(r.type):n}function de(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>ce(e))):n}function pe(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function he(e,t,n){const r=e[t];return r&&r.shape?pe(r.shape):n}function fe(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function me(e,t,n,r=!1){const i=e[t];return i&&i.list&&i.list.s?i.list.s.map((e=>ie(e,r))):n}function ge(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>pe(e))):n}function _e(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class ve{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return O(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return O(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return se(this.node.rawAttrs,e,t);if(null!=n.s)return ae(this.node.rawAttrs,e,t);if(null!=n.b)return oe(this.node.rawAttrs,e,t);if(null!=n.shape)return he(this.node.rawAttrs,e,t);if(null!=n.type)return le(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return fe(this.node.rawAttrs,e,t);if(null!=n.list.s)return me(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ge(this.node.rawAttrs,e,t);if(null!=n.list.b)return _e(this.node.rawAttrs,e,t);if(null!=n.list.type)return de(this.node.rawAttrs,e,t)}return t}}var ye=n(6284);function be(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){x.util.assert(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const i=e[r],a=t[r];x.util.assert(i<0||a<0||i===a,(()=>n+` Shapes ${e} and ${t} must match`))}}}function we(e){return"number"!=typeof e&&!e.some((e=>e<0))}function ke(e,t,n){let r=xe(e,n);const i=!we(r);if(i&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&t.forEach((e=>{r=xe(e.shape,r)})),!we(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function xe(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const i=e[r],a=t[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:a}return n}class Se{constructor(e,t,n,r,i,a,o){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=(0,x.scalar)(0),(0,x.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),be(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,(0,x.keep)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return(0,x.tensor)([],[0].concat(this.elementShape));const n=this.readMany(e);return be(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,x.stack)(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return(0,x.tensor)([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return be(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),(0,x.concat)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,(0,x.unstack)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:t.size/n,a=[];(0,x.tidy)((()=>{t=(0,x.reshape)(t,[1,n,i]);for(let n=0;n<e.length;++n){const o=[0,0===n?0:r[n-1],0],s=[1,e[n],i];a[n]=(0,x.reshape)((0,x.slice)(t,o,s),this.elementShape)}return a}));const o=[];for(let t=0;t<e.length;t++)o[t]=t;this.writeMany(o,a)}}class Te{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);be(t,e.shape,"TensorList shape mismatch: "),(0,x.keep)(e)})),this.idTensor=(0,x.scalar)(0),this.maxNumElements=r,(0,x.keep)(this.idTensor)}copy(){return new Te([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);be(e,this.elementShape,"TensorList shape mismatch: ");const r=ke(this.elementShape,this.tensors,e);return(0,x.tidy)((()=>{const e=this.tensors.map((e=>(0,x.reshape)(e,r)));return(0,x.stack)(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=ke(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,be(r.shape,e,"TensorList shape mismatch: "),(0,x.reshape)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(be(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,x.keep)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Te([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);be(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=ke(this.elementShape,this.tensors,t);return(0,x.reshape)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);be(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,x.keep)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);be(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=ke(this.elementShape,this.tensors,n);return 0===e.length?(0,x.tensor)([],[0].concat(r)):(0,x.tidy)((()=>{const t=e.map((e=>(0,x.reshape)(this.tensors[e],r)));return(0,x.stack)(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);be(this.elementShape,t,"TensorList shape mismatch: ");const n=ke(this.elementShape,this.tensors,t);return 0===this.size()?(0,x.tensor)([],[0].concat(n)):(0,x.tidy)((()=>{const e=this.tensors.map((e=>(0,x.reshape)(e,n)));return(0,x.concat)(e,0)}))}}const Ce=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=A("thenBranch",e,t,n),i=A("elseBranch",e,t,n),a=A("cond",e,t,n),o=A("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=A("body",e,t,n),i=A("cond",e,t,n),a=A("args",e,t,n),o=await n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map((e=>e.id));let c=await o[0].data();o.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let u=a;for(;c[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":return[F(A("pred",e,t,n))];case"Switch":{const r=A("pred",e,t,n);let i=A("data",e,t,n);return i.kept||(i=F(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==O(e,t,n)));if(r){return[F(O(r,t,n))]}return}case"Enter":{const r=A("frameName",e,t,n),i=A("tensor",e,t,n);return n.enterFrame(r),[F(i)]}case"Exit":{const r=A("tensor",e,t,n);return n.exitFrame(),[F(r)]}case"NextIteration":{const r=A("tensor",e,t,n);return n.nextIteration(),[F(r)]}case"TensorArrayV3":{const r=A("size",e,t,n),i=A("dtype",e,t,n),a=A("elementShape",e,t,n),o=A("dynamicSize",e,t,n),s=A("clearAfterRead",e,t,n),c=A("identicalElementShapes",e,t,n),u=A("name",e,t,n),l=new Se(u,i,r,a,c,o,s);return n.addTensorArray(l),[l.idTensor,(0,x.scalar)(1)]}case"TensorArrayWriteV3":{const r=A("tensorArrayId",e,t,n),i=A("index",e,t,n),a=A("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(i,a),[o.idTensor]}case"TensorArrayReadV3":{const r=A("tensorArrayId",e,t,n),i=A("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=A("tensorArrayId",e,t,n),i=A("indices",e,t,n),a=A("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,a)]}case"TensorArrayScatterV3":{const r=A("tensorArrayId",e,t,n),i=A("indices",e,t,n),a=A("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(i,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),a=A("dtype",e,t,n);return[i.concat(a)]}case"TensorArraySplitV3":{const r=A("tensorArrayId",e,t,n),i=A("tensor",e,t,n),a=A("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(a,i),[o.idTensor]}case"TensorArraySizeV3":{const r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return[(0,x.scalar)(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=A("tensorListId",e,t,n),i=A("index",e,t,n),a=A("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(i,a),[o.idTensor]}case"TensorListGetItem":{const r=A("tensorListId",e,t,n),i=A("index",e,t,n),a=A("elementShape",e,t,n),o=A("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=A("indices",e,t,n),i=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const i=Math.max(...t);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new Te([],n,e.dtype,r),o=(0,x.unstack)(e,0);return t.forEach(((e,t)=>{a.setItem(e,o[t])})),a}(A("tensor",e,t,n),r,A("elementShape",e,t,n),A("numElements",e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=A("elementShape",e,t,n),i=A("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const o=A(a,e,t,n),s=function(e,t,n,r){return new Te([],e,t,r)}(r,i,0,"TensorListReserve"===e.op?-1:o);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=A("tensorListId",e,t,n),i=A("indices",e,t,n),a=A("elementShape",e,t,n),o=A("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,o,a)]}case"TensorListStack":{const r=A("tensorListId",e,t,n),i=A("elementShape",e,t,n),a=A("elementDType",e,t,n),o=A("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,a,o)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);be(e.shape.slice(1),t,"TensorList shape mismatch: ");const i=(0,x.unstack)(e);return new Te(i,t,r)}(A("tensor",e,t,n),A("elementShape",e,t,n),A("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=A("tensorListId",e,t,n),i=n.getTensorList(r.id),a=A("dtype",e,t,n),o=A("elementShape",e,t,n);return[i.concat(a,o)]}case"TensorListPushBack":{const r=A("tensorListId",e,t,n),i=A("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=A("tensorListId",e,t,n),i=A("elementShape",e,t,n),a=A("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,a)]}case"TensorListSplit":{const r=A("tensor",e,t,n),i=A("elementShape",e,t,n),a=function(e,t,n){let r=0;const i=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const a=xe(e.shape.slice(1),n),o=0===r?0:e.size/r,s=(0,x.tidy)((()=>{const n=[];e=(0,x.reshape)(e,[1,r,o]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:i[r-1],0],c=[1,t[r],o];n[r]=(0,x.reshape)((0,x.slice)(e,s,c),a)}return e.dispose(),n})),c=new Te([],n,e.dtype,t.length);for(let e=0;e<s.length;e++)c.setItem(e,s[e]);return c}(r,A("lengths",e,t,n),i);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=A("tensorListId",e,t,n),i=n.getTensorList(r.id);return[(0,x.scalar)(i.size(),"int32")]}case"TensorListResize":{const r=A("tensorListId",e,t,n),i=A("size",e,t,n),a=n.getTensorList(r.id).resize(i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function Ee(e,t,n){const[r,i]=A("fusedOps",e,t,n),a="biasadd"===r,o=!a,s="prelu"===i,c="fusedbatchnorm"===r,u=A("numArgs",e,t,n);if(a){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=A("strides",e,t,n),d=M(e,t,n),p=A("dataFormat",e,t,n).toUpperCase(),h=A("dilations",e,t,n);let[f,m]=A("args",e,t,n);o&&(m=f,f=void 0);return{stride:l,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:i,leakyreluAlpha:A("leakyreluAlpha",e,t,n)}}function Ie(e,t,n){return{boxes:A("boxes",e,t,n),scores:A("scores",e,t,n),maxOutputSize:A("maxOutputSize",e,t,n),iouThreshold:A("iouThreshold",e,t,n),scoreThreshold:A("scoreThreshold",e,t,n),softNmsSigma:A("softNmsSigma",e,t,n)}}var Ne=n(4964);class Ae{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,x.scalar)(0),this.tensorMap=new Map,(0,x.keep)(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ne.d(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),(0,x.tidy)((()=>{const e=(0,x.unstack)(t),r=n.length,i=e.length;x.util.assert(r===i,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${i} elements.`));for(let t=0;t<r;t++){const r=n[t],i=e[t];(0,x.keep)(i),this.tensorMap.set(r,i)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return(0,x.tidy)((()=>{const e=[];for(let r=0;r<n.length;r++){const i=n[r],a=this.findWithDefault(i,t);e.push(a)}return(0,x.stack)(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function Oe(e,t,n,r,i=x.tidy){const a=((e,t,n)=>{switch(e.category){case"arithmetic":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(A("a",e,t,n),A("b",e,t,n))];case"AddN":return[r.addN(A("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(A("a",e,t,n),A("b",e,t,n))];case"Mul":return[r.mul(A("a",e,t,n),A("b",e,t,n))];case"RealDiv":case"Div":return[r.div(A("a",e,t,n),A("b",e,t,n))];case"DivNoNan":return[r.divNoNan(A("a",e,t,n),A("b",e,t,n))];case"FloorDiv":return[r.floorDiv(A("a",e,t,n),A("b",e,t,n))];case"Sub":return[r.sub(A("a",e,t,n),A("b",e,t,n))];case"Minimum":return[r.minimum(A("a",e,t,n),A("b",e,t,n))];case"Maximum":return[r.maximum(A("a",e,t,n),A("b",e,t,n))];case"Pow":return[r.pow(A("a",e,t,n),A("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(A("a",e,t,n),A("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(A("x",e,t,n))];case"Acos":return[r.acos(A("x",e,t,n))];case"Acosh":return[r.acosh(A("x",e,t,n))];case"Asin":return[r.asin(A("x",e,t,n))];case"Asinh":return[r.asinh(A("x",e,t,n))];case"Atan":return[r.atan(A("x",e,t,n))];case"Atan2":return[r.atan2(A("x",e,t,n),A("y",e,t,n))];case"Atanh":return[r.atanh(A("x",e,t,n))];case"Ceil":return[r.ceil(A("x",e,t,n))];case"Complex":return[r.complex(A("real",e,t,n),A("imag",e,t,n))];case"Cos":return[r.cos(A("x",e,t,n))];case"Cosh":return[r.cosh(A("x",e,t,n))];case"Elu":return[r.elu(A("x",e,t,n))];case"Erf":return[r.erf(A("x",e,t,n))];case"Exp":return[r.exp(A("x",e,t,n))];case"Expm1":return[r.expm1(A("x",e,t,n))];case"Floor":return[r.floor(A("x",e,t,n))];case"Log":return[r.log(A("x",e,t,n))];case"Log1p":return[r.log1p(A("x",e,t,n))];case"Imag":return[r.imag(A("x",e,t,n))];case"Neg":return[r.neg(A("x",e,t,n))];case"Reciprocal":return[r.reciprocal(A("x",e,t,n))];case"Real":return[r.real(A("x",e,t,n))];case"Relu":return[r.relu(A("x",e,t,n))];case"Round":return[r.round(A("x",e,t,n))];case"Selu":return[r.selu(A("x",e,t,n))];case"Sigmoid":return[r.sigmoid(A("x",e,t,n))];case"Sin":return[r.sin(A("x",e,t,n))];case"Sign":return[r.sign(A("x",e,t,n))];case"Sinh":return[r.sinh(A("x",e,t,n))];case"Softplus":return[r.softplus(A("x",e,t,n))];case"Sqrt":return[r.sqrt(A("x",e,t,n))];case"Square":return[r.square(A("x",e,t,n))];case"Tanh":return[r.tanh(A("x",e,t,n))];case"Tan":return[r.tan(A("x",e,t,n))];case"ClipByValue":return[r.clipByValue(A("x",e,t,n),A("clipValueMin",e,t,n),A("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(A("x",e,t,n))];case"Rsqrt":return[r.rsqrt(O(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(A("x",e,t,n),A("alpha",e,t,n))];case"Prelu":return[r.prelu(A("x",e,t,n),A("alpha",e,t,n))];case"IsNan":return[r.isNaN(O(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(O(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(O(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return Ce(e,t,n);case"convolution":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Conv1D":{const i=A("stride",e,t,n),a=A("pad",e,t,n),o=A("dataFormat",e,t,n).toUpperCase(),s=A("dilation",e,t,n);return[r.conv1d(A("x",e,t,n),A("filter",e,t,n),i,a,o,s)]}case"Conv2D":{const i=A("strides",e,t,n),a=M(e,t,n),o=A("dataFormat",e,t,n).toUpperCase(),s=A("dilations",e,t,n);return[r.conv2d(A("x",e,t,n),A("filter",e,t,n),[i[1],i[2]],a,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=Ee(e,t,n);return[r.fused.conv2d({x:A("x",e,t,n),filter:A("filter",e,t,n),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=Ee(e,t,n);return[r.fused.depthwiseConv2d({x:A("x",e,t,n),filter:A("filter",e,t,n),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=A("outputShape",e,t,n),a=A("strides",e,t,n),o=M(e,t,n);return[r.conv2dTranspose(A("x",e,t,n),A("filter",e,t,n),i,[a[1],a[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=A("strides",e,t,n),a=M(e,t,n),o=A("dilations",e,t,n),s=A("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(A("input",e,t,n),A("filter",e,t,n),[i[1],i[2]],a,s,[o[1],o[2]])]}case"Conv3D":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("dataFormat",e,t,n).toUpperCase(),s=A("dilations",e,t,n);return[r.conv3d(A("x",e,t,n),A("filter",e,t,n),[i[1],i[2],i[3]],a,o,[s[1],s[2],s[3]])]}case"AvgPool":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("kernelSize",e,t,n);return[r.avgPool(A("x",e,t,n),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPool":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("kernelSize",e,t,n);return[r.maxPool(A("x",e,t,n),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("kernelSize",e,t,n),s=A("includeBatchInIndex",e,t,n),{result:c,indexes:u}=r.maxPoolWithArgmax(A("x",e,t,n),[o[1],o[2]],[i[1],i[2]],a,s);return[c,u]}case"AvgPool3D":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("kernelSize",e,t,n);return[r.avgPool3d(A("x",e,t,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("kernelSize",e,t,n);return[r.maxPool3d(A("x",e,t,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{const i=A("strides",e,t,n),a=A("pad",e,t,n),o=A("dilations",e,t,n),s=i[1],c=i[2],u=o[1],l=o[2];return[r.dilation2d(A("x",e,t,n),A("filter",e,t,n),[s,c],a,[u,l],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Fill":{const i=A("shape",e,t,n),a=A("dtype",e,t,n),o=A("value",e,t,n);return[r.fill(i,o,a)]}case"LinSpace":{const i=A("start",e,t,n),a=A("stop",e,t,n),o=A("num",e,t,n);return[r.linspace(i,a,o)]}case"Multinomial":{const i=A("logits",e,t,n),a=A("numSamples",e,t,n),o=A("seed",e,t,n);return[r.multinomial(i,a,o)]}case"OneHot":{const i=A("indices",e,t,n),a=A("depth",e,t,n),o=A("onValue",e,t,n),s=A("offValue",e,t,n),c=A("dtype",e,t,n);return[r.oneHot(i,a,o,s,c)]}case"Ones":return[r.ones(A("shape",e,t,n),A("dtype",e,t,n))];case"OnesLike":return[r.onesLike(A("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(A("shape",e,t,n),A("dtype",e,t,n),A("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(A("shape",e,t,n),A("minval",e,t,n),A("maxval",e,t,n),A("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(A("shape",e,t,n),A("minval",e,t,n),A("maxval",e,t,n),A("seed",e,t,n))];case"Range":{const i=A("start",e,t,n),a=A("stop",e,t,n),o=A("step",e,t,n);return[r.range(i,a,o,A("dtype",e,t,n))]}case"TruncatedNormal":{const i=A("shape",e,t,n),a=A("mean",e,t,n),o=A("stdDev",e,t,n),s=A("seed",e,t,n);return[r.truncatedNormal(i,a,o,A("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(A("shape",e,t,n),A("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n,r,i=k)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=Ie(e,t,n),l=await i.image.nonMaxSuppressionWithScoreAsync(r,a,o,s,c,u);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:c}=Ie(e,t,n),u=A("padToMaxOutputSize",e,t,n),l=await i.image.nonMaxSuppressionPaddedAsync(r,a,o,s,c,u);return[l.selectedIndices,l.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:c}=Ie(e,t,n);return[await i.image.nonMaxSuppressionAsync(r,a,o,s,c)]}case"Where":{const r=i.cast(A("condition",e,t,n),"bool"),a=[await i.whereAsync(r)];return r.dispose(),a}case"ListDiff":return i.setdiff1dAsync(A("x",e,t,n),A("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"LowerBound":{const i=A("sortedSequence",e,t,n),a=A("values",e,t,n);return[r.lowerBound(i,a)]}case"TopKV2":{const i=A("x",e,t,n),a=A("k",e,t,n),o=A("sorted",e,t,n),s=r.topk(i,a,o);return[s.values,s.indices]}case"UpperBound":{const i=A("sortedSequence",e,t,n),a=A("values",e,t,n);return[r.upperBound(i,a)]}case"Unique":{const i=A("x",e,t,n),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{const i=A("x",e,t,n),a=A("axis",e,t,n),o=r.unique(i,a);return[o.values,o.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"ResizeBilinear":{const i=A("images",e,t,n),a=A("size",e,t,n),o=A("alignCorners",e,t,n),s=A("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[a[0],a[1]],o,s)]}case"ResizeNearestNeighbor":{const i=A("images",e,t,n),a=A("size",e,t,n),o=A("alignCorners",e,t,n),s=A("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],o,s)]}case"CropAndResize":{const i=A("image",e,t,n),a=A("boxes",e,t,n),o=A("boxInd",e,t,n),s=A("cropSize",e,t,n),c=A("method",e,t,n),u=A("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,a,o,s,c,u)]}case"ImageProjectiveTransformV3":{const i=A("images",e,t,n),a=A("transforms",e,t,n),o=A("outputShape",e,t,n),s=A("fillValue",e,t,n),c=A("interpolation",e,t,n),u=A("fillMode",e,t,n);return[r.image.transform(i,a,c.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const i=A("default",e,t,n);return[O(e.name,t,n)||i];case"Placeholder":return[O(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[F(A("x",e,t,n))];case"IdentityN":return A("x",e,t,n).map((e=>F(e)));case"Shape":return[r.tensor1d(A("x",e,t,n).shape,"int32")];case"ShapeN":return A("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(A("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(A("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=A("x",e,t,n),o=A("data",e,t,n),s=A("message",e,t,n),c=A("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<o.length;e++)console.log(Array.prototype.slice.call(o[e].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Equal":return[r.equal(A("a",e,t,n),A("b",e,t,n))];case"NotEqual":return[r.notEqual(A("a",e,t,n),A("b",e,t,n))];case"Greater":return[r.greater(A("a",e,t,n),A("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(A("a",e,t,n),A("b",e,t,n))];case"Less":return[r.less(A("a",e,t,n),A("b",e,t,n))];case"LessEqual":return[r.lessEqual(A("a",e,t,n),A("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(A("a",e,t,n),A("b",e,t,n))];case"LogicalNot":return[r.logicalNot(A("a",e,t,n))];case"LogicalOr":return[r.logicalOr(A("a",e,t,n),A("b",e,t,n))];case"Select":case"SelectV2":return[r.where(A("condition",e,t,n),A("a",e,t,n),A("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(A("a",e,t,n),A("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(A("a",e,t,n),A("b",e,t,n),A("transposeA",e,t,n),A("transposeB",e,t,n))];case"Einsum":return[r.einsum(A("equation",e,t,n),...A("tensors",e,t,n))];case"Transpose":return[r.transpose(A("x",e,t,n),A("perm",e,t,n))];case"_FusedMatMul":const[i,a]=A("fusedOps",e,t,n),o="biasadd"===i,s="prelu"===a,c=A("numArgs",e,t,n),u=A("leakyreluAlpha",e,t,n);if(o){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,d]=A("args",e,t,n);return[r.fused.matMul({a:A("a",e,t,n),b:A("b",e,t,n),transposeA:A("transposeA",e,t,n),transposeB:A("transposeB",e,t,n),bias:l,activation:a,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(A("a",e,t,n),A("numLower",e,t,n),A("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(A("x",e,t,n),A("axis",e,t,n),A("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(A("x",e,t,n),A("mean",e,t,n),A("variance",e,t,n),A("offset",e,t,n),A("scale",e,t,n),A("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(A("x",e,t,n),A("radius",e,t,n),A("bias",e,t,n),A("alpha",e,t,n),A("beta",e,t,n))];case"Softmax":return[r.softmax(A("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"ragged":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(A("paramsNestedSplits",e,t,n),A("paramsDenseValues",e,t,n),A("indices",e,t,n),A("outputRaggedRank",e,t,n));return i.concat(a)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(A("starts",e,t,n),A("limits",e,t,n),A("splits",e,t,n));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(A("shape",e,t,n),A("values",e,t,n),A("defaultValue",e,t,n),A("rowPartitionTensors",e,t,n),A("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Max":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.max(A("x",e,t,n),i,a)]}case"Mean":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.mean(A("x",e,t,n),i,a)]}case"Min":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.min(A("x",e,t,n),i,a)]}case"Sum":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.sum(A("x",e,t,n),i,a)]}case"All":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.all(A("x",e,t,n),i,a)]}case"Any":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.any(A("x",e,t,n),i,a)]}case"ArgMax":{const i=A("axis",e,t,n);return[r.argMax(A("x",e,t,n),i)]}case"ArgMin":{const i=A("axis",e,t,n);return[r.argMin(A("x",e,t,n),i)]}case"Prod":{const i=A("axis",e,t,n),a=A("keepDims",e,t,n);return[r.prod(A("x",e,t,n),i,a)]}case"Cumprod":{const i=A("axis",e,t,n),a=A("exclusive",e,t,n),o=A("reverse",e,t,n);return[r.cumprod(A("x",e,t,n),i,a,o)]}case"Cumsum":{const i=A("axis",e,t,n),a=A("exclusive",e,t,n),o=A("reverse",e,t,n);return[r.cumsum(A("x",e,t,n),i,a,o)]}case"Bincount":const i=A("x",e,t,n),a=A("weights",e,t,n),o=A("size",e,t,n);return[r.bincount(i,a,o)];case"DenseBincount":{const i=A("x",e,t,n),a=A("weights",e,t,n),o=A("size",e,t,n),s=A("binaryOutput",e,t,n);return[r.denseBincount(i,a,o,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"ConcatV2":case"Concat":{const i=A("n",e,t,n),a=A("axis",e,t,n);let o=A("tensors",e,t,n);return o=o.slice(0,i),[r.concat(o,a)]}case"Gather":{const i=A("x",e,t,n),a=A("indices",e,t,n);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{const i=A("axis",e,t,n),a=A("batchDims",e,t,n),o=A("x",e,t,n),s=A("indices",e,t,n);return[r.gather(o,r.cast(s,"int32"),i,a)]}case"Reverse":{const i=A("dims",e,t,n),a=[];for(let e=0;e<i.length;e++)i[e]&&a.push(e);const o=A("x",e,t,n);return[r.reverse(o,a)]}case"ReverseV2":{const i=A("axis",e,t,n),a=A("x",e,t,n);return[r.reverse(a,i)]}case"Slice":{const i=A("begin",e,t,n),a=A("size",e,t,n);return[r.slice(A("x",e,t,n),i,a)]}case"StridedSlice":{const i=A("begin",e,t,n),a=A("end",e,t,n),o=A("strides",e,t,n),s=A("beginMask",e,t,n),c=A("endMask",e,t,n),u=A("ellipsisMask",e,t,n),l=A("newAxisMask",e,t,n),d=A("shrinkAxisMask",e,t,n),p=A("x",e,t,n);return[r.stridedSlice(p,i,a,o,s,c,u,l,d)]}case"Pack":return(0,x.tidy)((()=>{const i=A("axis",e,t,n),a=A("tensors",e,t,n),o=a[0].shape,s=r.squeeze(a[0]).shape,c=a.map((e=>{const t=x.util.arraysEqual(e.shape,o);if(!t&&!x.util.arraysEqual(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(c,i)]}));case"Unpack":{const i=A("axis",e,t,n),a=A("tensor",e,t,n);return r.unstack(a,i)}case"Tile":{const i=A("reps",e,t,n);return[r.tile(A("x",e,t,n),i)]}case"Split":case"SplitV":{const i=A("axis",e,t,n),a=A("numOrSizeSplits",e,t,n),o=A("x",e,t,n);return r.split(o,a,i)}case"ScatterNd":{const i=A("indices",e,t,n),a=A("values",e,t,n),o=A("shape",e,t,n);return[r.scatterND(i,a,o)]}case"GatherNd":{const i=A("x",e,t,n),a=A("indices",e,t,n);return[r.gatherND(i,a)]}case"SparseToDense":{const i=A("sparseIndices",e,t,n),a=A("outputShape",e,t,n),o=A("sparseValues",e,t,n),s=A("defaultValue",e,t,n);return[r.sparseToDense(i,o,a,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}case"TensorScatterUpdate":{const i=A("indices",e,t,n),a=A("values",e,t,n),o=A("tensor",e,t,n);return[r.tensorScatterUpdate(o,i,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:a,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(A("indices",e,t,n),A("values",e,t,n),A("denseShape",e,t,n),A("defaultValue",e,t,n));return[i,a,o,s]}case"SparseReshape":{const{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(A("inputIndices",e,t,n),A("inputShape",e,t,n),A("newShape",e,t,n));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(A("data",e,t,n),A("indices",e,t,n),A("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(A("data",e,t,n),A("indices",e,t,n),A("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"FFT":return[r.fft(A("x",e,t,n))];case"IFFT":return[r.ifft(A("x",e,t,n))];case"RFFT":return[r.rfft(A("x",e,t,n))];case"IRFFT":return[r.irfft(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(A("input",e,t,n),A("pattern",e,t,n),A("rewrite",e,t,n),A("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(A("data",e,t,n),A("dataSplits",e,t,n),A("separator",e,t,n),A("nGramWidths",e,t,n),A("leftPad",e,t,n),A("rightPad",e,t,n),A("padWidth",e,t,n),A("preserveShortSequences",e,t,n));return[i,a]}case"StringSplit":{const{indices:i,values:a,shape:o}=r.string.stringSplit(A("input",e,t,n),A("delimiter",e,t,n),A("skipEmpty",e,t,n));return[i,a,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(A("input",e,t,n),A("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Cast":return[r.cast(A("x",e,t,n),A("dtype",e,t,n))];case"ExpandDims":{const i=A("axis",e,t,n);return[r.expandDims(A("x",e,t,n),i)]}case"Squeeze":{const i=A("axis",e,t,n);return[r.squeeze(A("x",e,t,n),i)]}case"Reshape":return[r.reshape(A("x",e,t,n),A("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(A("x",e,t,n),A("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(A("x",e,t,n),A("padding",e,t,n),A("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(A("x",e,t,n),A("padding",e,t,n),A("constantValue",e,t,n))];case"SpaceToBatchND":{const i=A("blockShape",e,t,n),a=A("paddings",e,t,n);return[r.spaceToBatchND(A("x",e,t,n),i,a)]}case"BatchToSpaceND":{const i=A("blockShape",e,t,n),a=A("crops",e,t,n);return[r.batchToSpaceND(A("x",e,t,n),i,a)]}case"DepthToSpace":{const i=A("blockSize",e,t,n),a=A("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(A("x",e,t,n),i,a)]}case"BroadcastTo":return[r.broadcastTo(A("x",e,t,n),A("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(A("s0",e,t,n),A("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(e.name);if(null!=i)return[i];{const i=A("keyDType",e,t,n),a=A("valueDType",e,t,n),o=new Ae(i,a);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=A("tableHandle",e,t,n,r),a=A("keys",e,t,n),o=A("values",e,t,n),s=r.getHashTableById(i.id);return[await s.import(a,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=A("tableHandle",e,t,n,r),a=A("keys",e,t,n),o=A("defaultValue",e,t,n),s=r.getHashTableById(i.id);return[await s.find(a,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=A("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const a=I(e.op);if(a&&a.customExecutor)return a.customExecutor(new ve(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return x.util.isPromise(a)?a.then((e=>[].concat(e))):[].concat(a)}class Re{constructor(e={},t={},n={},r={},i){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Pe(e,t,n,r){const i=new Set,a=[];let o=null,s=null;const c=new Set,u=new Set(Object.keys(e).map((e=>L(e)[0])));r=r||[];const l=new Set(r.map((e=>L(e.name)[0]))),d=[...t];for(;d.length>0;){const e=d.pop();($e(e)||je(e)||Be(e))&&null==o&&(o=e,s=o.children.map((e=>e.name)).filter((e=>i.has(e)))),i.add(e.name),null==n[e.name]&&(u.has(e.name)||l.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),d.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:i,missingInputs:a,dynamicNode:o,syncInputs:s}}function De(e,t){const{usedNodes:n,inputs:r}=t,i=Object.keys(r).map((e=>L(e)[0])).map((t=>e.nodes[t])),a=e.initNodes||[],o=e=>n.has("string"==typeof e?e:e.name);function s(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const c=s([...i,...e.weights,...a]).filter(o),u=s([...c,...Object.values(e.nodes)]).filter(o),l=new Map(u.map((e=>[e.name,e]))),d={};for(const e of u){d[e.name]=d[e.name]||0;for(const t of e.children)o(t)||(d[t.name]=Number.POSITIVE_INFINITY),d[t.name]=(d[t.name]||0)+1}const p=Object.entries(d).filter((([,e])=>0===e)).map((([e])=>e)),h=[...p];for(;p.length>0;){const e=p.pop(),t=l.get(e);for(const e of t.children.filter(o))0==--d[e.name]&&(h.push(e.name),p.push(e.name))}const f=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),i=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const e of t.children)n.has(e.name)&&!i.has(e.name)&&(i.add(e.name),r.push(e.name))}const a=e.filter((e=>i.has(e.name)));return a}(h.map((e=>l.get(e))),c);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),i=e=>r.has("string"==typeof e?e:e.name),a=new Set(e.map((e=>e.name))),o=e=>a.has("string"==typeof e?e:e.name);for(const t of e){for(const e of t.children.filter(o)){if(!n.has(e.name))throw new Le(`Child ${e.name} of node ${t.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new Le(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!i(t))for(const e of t.inputs){if(!n.has(e.name))throw new Le(`Input ${e.name} of node ${t.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new Le(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(f,c),f}class Le extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}const Me=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Fe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),ze=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function $e(e){return Me.has(e.op)}function je(e){return Fe.has(e.op)}function Be(e){return ze.has(e.op)}class Ve{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new Ve(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=Pe(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:a}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=t.map((e=>e.name)),i=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}const o=De(this.graph,n),s=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>$e(e)?n:t)),i=e=>{const n=r[t.get(e.name)];return null==n?-1:n},a=e.map(((e,t)=>e.children.map(i).reduce(((e,t)=>Math.max(e,t)),r[t]))),o=new Map;for(let t=0;t<e.length;++t){const r=a[t];if(r===n)continue;const i=e[t],s=e[r];o.has(s.name)||o.set(s.name,[]),o.get(s.name).push(i)}return o}(o);return{orderedNodes:o,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return(0,x.keep)(t),t}cloneTensorList(e){if(!e)return null;return e.map((e=>this.cloneAndKeepTensor(e)))}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,this.cloneTensorList(t)])))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[L(e)[0]])),i=t.map((e=>L(e)[0])),a=new Set(i);let o=i.map((e=>this.graph.nodes[e]));0===o.length&&(o=this._outputs);const s=this.getCompilationKey(r,o);let c=this.compiledMap.get(s);null==c&&(c=this.compile(e,o),this.compiledMap.set(s,c));try{this.keepIntermediateTensors=(0,x.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const u={},l={};return(0,x.tidy)((()=>{const n=new Re(this.weightMap,u,l,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[i,a]=L(t,n),o=[];o[a]=e[t],r[i]=o,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(o))}));const i=this.getFrozenTensorIds(r),{orderedNodes:o,nodeLiveUntilMap:s}=c;for(const e of o){if(r[e.name])continue;const t=Oe(e,r,n,this._resourceManager);if(x.util.isPromise(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,i,a,s.get(e.name))}return null==this.parent&&n.dispose(i),t.map((e=>O(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,i,a,o){if(!$e(t)&&!a.has(e)){for(const r of n[e])null!=r&&(o[r.id]=(o[r.id]||0)+t.children.length);for(const e of t.inputs){if($e(e))continue;const t=R(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||i.has(e.id))continue;const t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,i,a){function o(e){return $e(e)||i.has(e.name)}if(!$e(e)&&null!=a)for(const e of a){if(o(e))continue;const i=R(e.name,t,n);for(const e of i)!e||e.kept||r.has(e.id)||e.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},i={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=(0,x.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const a=new Re(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,a,t,n),s=t.map((e=>O(e,o,a))),c=s.map((e=>e.id)),u=Object.keys(e).map((t=>e[t].id)),l=new Set([...c,...u,...this.weightIds]);return Object.values(o).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||l.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(l),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const i=Object.keys(e),a=i.map((e=>this.graph.nodes[L(e)[0]])),o=n.map((e=>L(e)[0])),s=new Set(o);let c=o.map((e=>this.graph.nodes[e]));0===c.length&&(c=this._outputs);const{usedNodes:u,missingInputs:l,dynamicNode:d,syncInputs:p}=Pe(e,c,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),f=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=L(t),i=[];i[r]=e[t],f[n]=i}));const m={},g=this.getFrozenTensorIds(f),_={};for(;h.length>0;){const e=this.processStack(a,h,t,f,_,g,s,m,u);await Promise.all(e)}null!=d||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=c.filter((e=>!$e(e)&&!O(e.name,f,t))).map((e=>e.name));if(v.length>0){let e="";throw null!=d&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${l}]. ${e}`)}return f}processStack(e,t,n,r,i,a,o,s,c){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let l="";if("Enter"===e.node.op&&A("isConstant",e.node,r,n)&&([l]=P(e.node.name,n)),null==r[e.node.name]){const d=Oe(e.node,r,n,this._resourceManager);l||([l]=P(e.node.name,n));const p=n.currentContext;x.util.isPromise(d)?u.push(d.then((u=>(r[l]=u,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(u)),n.currentContext=p,this.checkTensorForDisposal(l,e.node,r,n,a,o,s),this.processChildNodes(e.node,t,n,r,i,c),u)))):(r[l]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(d)),this.checkTensorForDisposal(l,e.node,r,n,a,o,s),this.processChildNodes(e.node,t,n,r,i,c))}else this.processChildNodes(e.node,t,n,r,i,c)}return u}processChildNodes(e,t,n,r,i,a){e.children.forEach((e=>{const[o]=P(e.name,n);!i[o]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!O(e,r,n)))&&(i[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!O(e,r,n)))&&(i[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=L(t),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const e=i.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));x.util.assert(t,(()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}i.attrParams.dtype&&i.attrParams.dtype.value&&x.util.assert(n.dtype===i.attrParams.dtype.value,(()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){var t,n;const r={};for(const i in e){const a=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[i];null!=a?r[a.name]=e[i]:r[i]=e[i]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=L(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=L(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class Ue{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}var Ge=n(2314);const qe="?tfjs-format=file",We="model.json";class He{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=x.io){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new Ue}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return x.util.isPromise(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await(0,Ge.s5)(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new Ve(re.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=re.Instance.transformGraph(e.modelInitializer);this.initializer=new Ve(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof x.Tensor?[e]:e,n={};return t.forEach(((e,t)=>n[this.structuredOutputKeys[t]]=e)),n}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof x.Tensor||Array.isArray(e))){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce(((t,n)=>{var i,a,o;const s=null===(o=null===(a=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===a?void 0:a[n])||void 0===o?void 0:o.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&(0,x.dispose)(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Ye(e,t={},n=x.io){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){e.endsWith("/")||(e+="/");return`${e}${We}${qe}`}(e));const r=new He(e,t,n);return await r.load(),r}function Ke(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){const[n,r]=e;if(!n)throw new Error("modelJSON must be the first element of the array");if(!(r&&r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");const i=x.io.getWeightSpecs(n.weightsManifest),a=x.io.getModelArtifactsForJSONSync(n,i,r);t=x.io.fromMemorySync(a)}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=x.io.fromMemorySync(e)}const n=new He(t);return n.load(),n}const Xe="4.20.0"},3595:(e,t,n)=>{"use strict";n.d(t,{GJ:()=>r,uI:()=>i});class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class i{refCount(e){return a("refCount")}incRef(e){return a("incRef")}timerAvailable(){return!0}time(e){return a("time")}read(e){return a("read")}readSync(e){return a("readSync")}readToGPU(e,t){return a("readToGPU")}numDataIds(){return a("numDataIds")}disposeData(e,t){return a("disposeData")}write(e,t,n){return a("write")}move(e,t,n,r,i){return a("move")}createTensorFromGPUData(e,t,n){return a("createTensorFromGPUData")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return a("dispose")}}function a(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},2982:(e,t,n)=>{"use strict";function r(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function a(e,t,n,r,i){return c(e,t,n,r,i,0)}function o(e,t,n,r,i,a){return c(e,t,n,r,i,0,!1,a,!0)}function s(e,t,n,r,i,a){return c(e,t,n,r,i,a,!0)}function c(e,t,n,i,a,o,s=!1,c=!1,p=!1){const h=[];for(let e=0;e<t.length;e++)t[e]>a&&h.push({score:t[e],boxIndex:e,suppressBeginIndex:0});h.sort(d);const f=o>0?-.5/o:0,m=[],g=[];for(;m.length<n&&h.length>0;){const t=h.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<a)break;let c=!1;for(let n=m.length-1;n>=s;--n){const r=u(e,o,m[n]);if(r>=i){c=!0;break}if(t.score=t.score*l(i,f,r),t.score<=a)break}t.suppressBeginIndex=m.length,c||(t.score===n?(m.push(o),g.push(t.score)):t.score>a&&r(h,t,d))}const _=m.length,v=n-_;c&&v>0&&(m.push(...new Array(v).fill(0)),g.push(...new Array(v).fill(0)));const y={selectedIndices:m};return s&&(y.selectedScores=g),p&&(y.validOutputs=_),y}function u(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(s-a)*(c-o),f=(d-u)*(p-l);if(h<=0||f<=0)return 0;const m=Math.max(a,u),g=Math.max(o,l),_=Math.min(s,d),v=Math.min(c,p),y=Math.max(_-m,0)*Math.max(v-g,0);return y/(h+f-y)}function l(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,{c7:()=>a,ZS:()=>o,ut:()=>s})},6945:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var r=n(5826);function i(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const i=(0,r.r)(e,"int32"),a=(0,r.r)([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const r=i.indexToLoc(n[t]),o=t*e.length;a.values.set(r,o)}return a.toTensor()}},2215:(e,t,n)=>{"use strict";n.d(t,{T2:()=>b,Ye:()=>y});var r=n(3595),i=n(5168),a=n(3529),o=n(6295),s=n(6244),c=n(5883),u=n(6937),l=n(1109);class d{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new h)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let o;const s=u.now();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:u.now()-s})}if((0,i._K)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{p(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])}))}))}}function p(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class h{logKernelProfile(e,t,n,r,i,a){const o="number"==typeof r?l.av(`${r}ms`,9):r.error,s=l.av(e,25),c=t.rank,u=t.size,d=l.av(t.shape.toString(),14);let p="";for(const e in i){const n=i[e];if(null!=n){const r=n.shape||t.shape,i=r.length;p+=`${e}: ${i}D ${i>0?r:""} `}}console.log(`%c${s}\t%c${o}\t%c${c}D ${d}\t%c${u}\t%c${p}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var f=n(5225),m=n(2067);function g(e){return null!=e.kernelName}class _{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class v{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(c.i(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new d(this.backendInstance),!0}setupRegisteredKernels(){(0,s.Op)(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){(0,s.Op)(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof r.uI||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,c.i(`Initialization of backend ${e} failed`),c.i(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return c.i(`Initialization of backend ${e} failed`),c.i(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return v.nextTensorId++}nextVariableId(){return v.nextVariableId++}clone(e){const t=b.runKernel(o.lzr,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return b.runKernel(o.KXH,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=(0,s._5)(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach((e=>{i+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;let o,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const u=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){const{kernelName:t,inputs:i,attrs:a}=e;null==this.backendName&&this.backend;const u=(0,s._5)(t,this.backendName);l.vA(null!=u,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),o=()=>{const e=this.backend.numDataIds();c=u.kernelFunc({inputs:i,attrs:a,backend:this.backend});const o=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,o);const s=o.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,i,s);n=this.saveTensorsForBackwardMode(e)}return s}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};o=()=>{const e=this.backend.numDataIds();c=this.tidy((()=>t(this.backend,i)));const n=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,n),n}}const{inputs:d,attrs:p}=e,h=g(e)?null:e.backwardsFunc;let f;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(u,d,(()=>o())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs):t=o()})),r&&this.addTapeNode(u,d,t,h,n,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map((e=>null!=d[e]?d[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=(0,s.vQ)(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let a;r.saveAllInputs?(l.vA(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const o=n.filter(((e,t)=>i[t]));return a.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&l.Kg(e[0])&&(i=e.map((e=>u.encodeString(e))));const a=r.write(i,t,n),o=new f.qY(t,n,a,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){const e=this.state.tensorInfo.get(a),t=(0,l.SL)(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){const i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,a=new f.qY(r,i,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new f.rT(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*l.jv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof f.rT||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*l.jv(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},c=(0,s.vQ)(e);null!=c&&(r=c.gradFunc),null!=r&&(o.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=l.Ty(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,m.getTensorsInContainer)(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(l.vA(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));l.vA(i instanceof f.qY,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},i={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const a=e[n],o=a.inputs;for(const e in o){const n=o[e];let s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){a.outputs.forEach((e=>r[e.id]=!0)),s=!0,i[a.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const o={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(a[n.outputs[e].id]){for(const e in r)a[r[e].id]=!0,o[n.id]=!0;break}}const s=[];for(let t=0;t<e.length;t++){const n=e[t];if(i[n.id]&&o[n.id]){const e={};for(const t in n.inputs){const i=n.inputs[t];r[i.id]&&(e[t]=i)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[i.id]=null==n?function(e){const t=(0,l.FZ)((0,l.Ze)(e),"float32");return b.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const a=t[i],o=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const t in a.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const i=n((()=>s[t]()));if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);const o=a.inputs[t];if(!l.r1(i.shape,o.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${o.shape}'`);if(null==e[o.id])e[o.id]=i;else{const t=e[o.id];e[o.id]=r(t,i),t.dispose()}}}}(e,a,(e=>this.tidy(e)),w);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(e){return l.vA(l.Tn(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;l.vA(t.every((e=>e instanceof f.qY)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};t.forEach(((e,t)=>{r[t]=e}));return this.runKernelFunc({forwardFunc:(r,i)=>(n=e(...t,i),l.vA(n.value instanceof f.qY,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),l.vA(l.Tn(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const i=n.gradFunc(e,r),a=Array.isArray(i)?i:[i];l.vA(a.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),l.vA(a.every((e=>e instanceof f.qY)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const o={};return a.forEach(((e,t)=>{o[t]=()=>e})),o},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=(0,u.now)(),n=await this.backend.time(e);return n.wallMs=(0,u.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function y(){const e=(0,a.L)();if(null==e._tfengine){const t=new i.OH(e);e._tfengine=new v(t)}return(0,i.tj)(e._tfengine.ENV),(0,f.qP)((()=>e._tfengine)),e._tfengine}v.nextTensorId=0,v.nextVariableId=0;const b=y();function w(e,t){const n={a:e,b:t};return b.runKernel(o.OMN,n)}},5168:(e,t,n)=>{"use strict";n.d(t,{Km:()=>c,OH:()=>a,_K:()=>s,tj:()=>u});var r=n(1109);const i="tfjsflags";class a{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=o,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(s().getBool("IS_TEST")||s().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];s().getBool("IS_TEST")||s().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if((0,r.yL)(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(i in e){e[i].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}}function o(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function s(){return c}let c=null;function u(e){c=e}},3529:(e,t,n)=>{"use strict";let r;function i(){if(null==r){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function a(e,t){const n=function(){const e=i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}n.d(t,{L:()=>i,m:()=>a})},7534:(e,t,n)=>{"use strict";n.d(t,{AS:()=>g,DZ:()=>m,Gc:()=>b,Hi:()=>p,Hs:()=>C,IS:()=>u,ME:()=>f,Ok:()=>E,Sm:()=>s,W4:()=>S,aC:()=>_,fL:()=>l,gJ:()=>T,gY:()=>c,go:()=>x,jh:()=>y,jz:()=>w,kB:()=>v,m1:()=>h,rE:()=>k,rm:()=>d});var r=n(2215),i=n(5168),a=n(5225),o=n(2067);function s(){(0,i._K)().set("PROD",!0)}function c(){(0,i._K)().set("DEBUG",!0)}function u(){(0,i._K)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,i._K)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r.T2.disposeVariables()}function p(){return r.T2}function h(){return r.T2.memory()}function f(e){return r.T2.profile(e)}function m(e,t){return r.T2.tidy(e,t)}function g(e){(0,o.getTensorsInContainer)(e).forEach((e=>e.dispose()))}function _(e){return r.T2.keep(e)}function v(e){return r.T2.time(e)}function y(e){return r.T2.setBackend(e)}function b(){return r.T2.ready()}function w(){return r.T2.backendName}function k(e){r.T2.removeBackend(e)}function x(e){return r.T2.findBackend(e)}function S(e){return r.T2.findBackendFactory(e)}function T(e,t,n=1){return r.T2.registerBackend(e,t,n)}function C(){return r.T2.backend}function E(e,t){(0,i._K)().setPlatform(e,t)}(0,a.B4)(l)},3376:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>s,_X:()=>p,jY:()=>u,mu:()=>l,ok:()=>c,y7:()=>d});var r=n(2215),i=n(5225),a=n(9031),o=n(1109);function s(e){return o.vA(o.Tn(e),(()=>"The f passed in grad(f) must be a function")),(t,n)=>{const i=(0,a.YT)(t,"x","tf.grad","string_or_numeric"),s=null!=n?(0,a.YT)(n,"dy","tf.grad"):null;return r.T2.tidy((()=>{const{value:t,grads:n}=r.T2.gradients((()=>e(i)),[i],s);return null!=s&&o.O3(t.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(n),n[0]}))}}function c(e){return o.vA(o.Tn(e),(()=>"The f passed in grads(f) must be a function")),(t,n)=>{o.vA(Array.isArray(t),(()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"));const i=(0,a.j1)(t,"args","tf.grads","string_or_numeric"),s=null!=n?(0,a.YT)(n,"dy","tf.grads"):null;return r.T2.tidy((()=>{const{value:t,grads:n}=r.T2.gradients((()=>e(...i)),i,s);return null!=s&&o.O3(t.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(n),n}))}}function u(e){return o.vA(o.Tn(e),(()=>"The f passed in valueAndGrad(f) must be a function")),(t,n)=>{o.vA(t instanceof i.qY,(()=>"The x passed in valueAndGrad(f)(x) must be a tensor")),o.vA(null==n||n instanceof i.qY,(()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"));const{grads:a,value:s}=r.T2.gradients((()=>e(t)),[t],n);return h(a),{grad:a[0],value:s}}}function l(e){return o.vA(o.Tn(e),(()=>"The f passed in valueAndGrads(f) must be a function")),(t,n)=>{o.vA(Array.isArray(t)&&t.every((e=>e instanceof i.qY)),(()=>"The args passed in valueAndGrads(f)(args) must be array of tensors")),o.vA(null==n||n instanceof i.qY,(()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"));const a=r.T2.gradients((()=>e(...t)),t,n);return null!=n&&o.O3(a.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(a.grads),a}}function d(e,t){o.vA(o.Tn(e),(()=>"The f passed in variableGrads(f) must be a function")),o.vA(null==t||Array.isArray(t)&&t.every((e=>e instanceof i.rT)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in r.T2.registeredVariables)t.push(r.T2.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,s=t.length;t=t.filter((e=>e.trainable)),o.vA(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`));const{value:c,grads:u}=r.T2.gradients(e,t,null,!0);o.vA(u.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),o.vA(0===c.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${c.rank} tensor`));const l={};return t.forEach(((e,t)=>{null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((e=>l[e.name]=null)),{value:c,grads:l}}function p(e){return r.T2.customGrad(e)}function h(e){if(e.filter((e=>null==e)).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},8496:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Abs:()=>_t.ljI,Acos:()=>_t.Vvy,Acosh:()=>_t.PH8,AdadeltaOptimizer:()=>Ae,AdagradOptimizer:()=>Re,AdamOptimizer:()=>Le,AdamaxOptimizer:()=>ze,Add:()=>_t.OMN,AddN:()=>_t.EkD,All:()=>_t.u8Z,Any:()=>_t.FSt,ArgMax:()=>_t.Jp_,ArgMin:()=>_t.p_m,Asin:()=>_t.QKF,Asinh:()=>_t.epO,Atan:()=>_t.TyE,Atan2:()=>_t.lxb,Atanh:()=>_t.zP9,AvgPool:()=>_t.ho8,AvgPool3D:()=>_t.cS,AvgPool3DGrad:()=>_t.wwC,AvgPoolGrad:()=>_t.VCH,BatchMatMul:()=>_t.jAQ,BatchToSpaceND:()=>_t.Ik2,Bincount:()=>_t.N4F,BitwiseAnd:()=>_t.HNs,BroadcastArgs:()=>_t.vj7,BroadcastTo:()=>_t.LB5,Cast:()=>_t.KXH,Ceil:()=>_t.QDP,ClipByValue:()=>_t.vaV,Complex:()=>_t.pr3,ComplexAbs:()=>_t.$zE,Concat:()=>_t.$dB,Conv2D:()=>_t.p2J,Conv2DBackpropFilter:()=>_t.rFm,Conv2DBackpropInput:()=>_t.jfg,Conv3D:()=>_t.A1h,Conv3DBackpropFilterV2:()=>_t.iGz,Conv3DBackpropInputV2:()=>_t.gC7,Cos:()=>_t.Mn0,Cosh:()=>_t.MnK,CropAndResize:()=>_t.MRQ,Cumprod:()=>_t.jj_,Cumsum:()=>_t.nY8,DataStorage:()=>hr.GJ,DenseBincount:()=>_t.wNW,DepthToSpace:()=>_t.TMz,DepthwiseConv2dNative:()=>_t.tGH,DepthwiseConv2dNativeBackpropFilter:()=>_t.X$8,DepthwiseConv2dNativeBackpropInput:()=>_t.nVu,Diag:()=>_t.ORI,Dilation2D:()=>_t.jxD,Dilation2DBackpropFilter:()=>_t.pk0,Dilation2DBackpropInput:()=>_t.bP9,Draw:()=>_t.XmO,ENV:()=>v.Km,Einsum:()=>_t.Qgm,Elu:()=>_t.Pah,EluGrad:()=>_t.rsH,Environment:()=>v.OH,Equal:()=>_t.BRl,Erf:()=>_t._s9,Exp:()=>_t.ox3,ExpandDims:()=>_t.ybN,Expm1:()=>_t.ybj,FFT:()=>_t.rGP,Fill:()=>_t.SQl,FlipLeftRight:()=>_t.BxF,Floor:()=>_t.ZgB,FloorDiv:()=>_t.ElG,FromPixels:()=>_t.awo,FusedBatchNorm:()=>_t.i5R,FusedConv2D:()=>_t.aAr,FusedDepthwiseConv2D:()=>_t.T7M,GatherNd:()=>_t.O4G,GatherV2:()=>_t.mxL,Greater:()=>_t.XhZ,GreaterEqual:()=>_t.lLS,IFFT:()=>_t.OAQ,Identity:()=>_t.lzr,Imag:()=>_t.dv8,IsFinite:()=>_t.gIW,IsInf:()=>_t.E3$,IsNan:()=>_t.iPs,KernelBackend:()=>hr.uI,LRN:()=>_t.jM4,LRNGrad:()=>_t.ToN,LeakyRelu:()=>_t.X0$,Less:()=>_t.mIA,LessEqual:()=>_t.CwD,LinSpace:()=>_t.mnI,Log:()=>_t.tG8,Log1p:()=>_t.Cg$,LogSoftmax:()=>_t.zfU,LogicalAnd:()=>_t.RUm,LogicalNot:()=>_t.nZd,LogicalOr:()=>_t.LXA,LogicalXor:()=>_t.RW8,LowerBound:()=>_t.yPW,MatrixBandPart:()=>_t.WRv,Max:()=>_t.VAI,MaxPool:()=>_t.t3d,MaxPool3D:()=>_t.ySp,MaxPool3DGrad:()=>_t.cHb,MaxPoolGrad:()=>_t.RXX,MaxPoolWithArgmax:()=>_t.TL8,Maximum:()=>_t.LDN,Mean:()=>_t.g5A,Min:()=>_t.lNG,Minimum:()=>_t.LG0,MirrorPad:()=>_t.x7F,Mod:()=>_t.BLA,MomentumOptimizer:()=>je,Multinomial:()=>_t.WT3,Multiply:()=>_t.xu7,Neg:()=>_t.l0G,NonMaxSuppressionV3:()=>_t.SDM,NonMaxSuppressionV4:()=>_t.Zl4,NonMaxSuppressionV5:()=>_t.e0f,NotEqual:()=>_t.ylV,OP_SCOPE_SUFFIX:()=>Qt.BTT,OneHot:()=>_t.urI,OnesLike:()=>_t.LWX,Optimizer:()=>Ne,OptimizerConstructors:()=>Kt,Pack:()=>_t.mM$,PadV2:()=>_t.ODT,Pool:()=>_t.bCz,Pow:()=>_t.pyJ,Prelu:()=>_t.Ncv,Prod:()=>_t.kdj,RMSPropOptimizer:()=>Be,RaggedGather:()=>_t.oJ2,RaggedRange:()=>_t.CQC,RaggedTensorToTensor:()=>_t.mH5,Range:()=>_t.Q6t,Rank:()=>Xt.rg,Real:()=>_t.LRy,RealDiv:()=>_t.sDr,Reciprocal:()=>_t.huO,Reduction:()=>Jt.i,Relu:()=>_t.fUj,Relu6:()=>_t.P_L,Reshape:()=>_t.R23,ResizeBilinear:()=>_t.hgw,ResizeBilinearGrad:()=>_t.FCQ,ResizeNearestNeighbor:()=>_t.jOE,ResizeNearestNeighborGrad:()=>_t.XQy,Reverse:()=>_t.D7i,RotateWithOffset:()=>_t.BK4,Round:()=>_t.hVg,Rsqrt:()=>_t.TOR,SGDOptimizer:()=>$e,ScatterNd:()=>_t.pJc,SearchSorted:()=>_t.uWl,Select:()=>_t.l6P,Selu:()=>_t.u$b,Sigmoid:()=>_t.vI1,Sign:()=>_t.YVe,Sin:()=>_t.hql,Sinh:()=>_t.J3C,Slice:()=>_t.JiE,Softmax:()=>_t.rFG,Softplus:()=>_t.Fin,SpaceToBatchND:()=>_t.A8B,SparseFillEmptyRows:()=>_t.C8s,SparseReshape:()=>_t.BoJ,SparseSegmentMean:()=>_t.L6G,SparseSegmentSum:()=>_t.DvZ,SparseToDense:()=>_t.jgd,SplitV:()=>_t.Blb,Sqrt:()=>_t.dFH,Square:()=>_t.M6A,SquaredDifference:()=>_t.Ddj,StaticRegexReplace:()=>_t.GZp,Step:()=>_t.pnw,StridedSlice:()=>_t.UcO,StringNGrams:()=>_t.YAb,StringSplit:()=>_t.iW0,StringToHashBucketFast:()=>_t.$jE,Sub:()=>_t.PbM,Sum:()=>_t.WuN,Tan:()=>_t.oFs,Tanh:()=>_t.iuW,Tensor:()=>pe.qY,TensorBuffer:()=>pe.yl,TensorScatterUpdate:()=>_t.X4r,Tile:()=>_t.FAs,TopK:()=>_t.TBb,Transform:()=>_t.dLy,Transpose:()=>_t.wx0,Unique:()=>_t.EwU,Unpack:()=>_t.dXR,UnsortedSegmentSum:()=>_t.pPe,UpperBound:()=>_t.RMm,Variable:()=>pe.rT,ZerosLike:()=>_t.xJ3,_FusedMatMul:()=>_t.Dr,abs:()=>Qt.tnl,acos:()=>Qt.HQu,acosh:()=>Qt.FqL,add:()=>Qt.WQq,addN:()=>Qt.QiD,all:()=>Qt.Q7R,any:()=>Qt.bzn,argMax:()=>Qt.FLi,argMin:()=>Qt.XRg,asin:()=>Qt.qRo,asinh:()=>Qt.yHs,atan:()=>Qt.rYl,atan2:()=>Qt.FPz,atanh:()=>Qt.rfv,avgPool:()=>Qt.$jT,avgPool3d:()=>Qt.sub,backend:()=>fe.Hs,backend_util:()=>d,basicLSTMCell:()=>Qt.lZX,batchNorm:()=>Qt.$v7,batchNorm2d:()=>Qt.BFc,batchNorm3d:()=>Qt.kSi,batchNorm4d:()=>Qt.T5N,batchToSpaceND:()=>Qt.GTe,bincount:()=>Qt.HbZ,bitwiseAnd:()=>Qt.vjT,booleanMaskAsync:()=>Qt.ftb,broadcastArgs:()=>Qt.ROE,broadcastTo:()=>Qt.hOW,broadcast_util:()=>gt,browser:()=>s,buffer:()=>Qt.ra8,cast:()=>Qt.wgE,ceil:()=>Qt.mkO,clipByValue:()=>Qt.zQh,clone:()=>Qt.o8B,complex:()=>Qt.faB,concat:()=>Qt.xWs,concat1d:()=>Qt.I1m,concat2d:()=>Qt.RPU,concat3d:()=>Qt.O5O,concat4d:()=>Qt.P1l,conv1d:()=>Qt.kA9,conv2d:()=>Qt.Xtf,conv2dTranspose:()=>Qt.wX9,conv3d:()=>Qt.IPL,conv3dTranspose:()=>Qt.jIJ,copyRegisteredKernels:()=>vt.Cf,cos:()=>Qt.gnS,cosh:()=>Qt.yIG,cosineWindow:()=>Qt._jP,cumprod:()=>Qt.Lp0,cumsum:()=>Qt.rCv,customGrad:()=>we._X,denseBincount:()=>Qt.aOp,deprecationWarn:()=>fe.fL,depthToSpace:()=>Qt.Rj8,depthwiseConv2d:()=>Qt.Gl3,device_util:()=>r,diag:()=>Qt.smy,dilation2d:()=>Qt.X7t,disableDeprecationWarnings:()=>fe.IS,dispose:()=>fe.AS,disposeVariables:()=>fe.rm,div:()=>Qt.y4m,divNoNan:()=>Qt.ek5,dot:()=>Qt.Omf,dropout:()=>Qt.EZY,einsum:()=>Qt._3C,elu:()=>Qt.Pqc,enableDebugMode:()=>fe.gY,enableProdMode:()=>fe.Sm,enclosingPowerOfTwo:()=>Qt.FJY,engine:()=>fe.Hi,ensureShape:()=>Qt.QP2,env:()=>v._K,equal:()=>Qt.LCg,erf:()=>Qt.Y12,euclideanNorm:()=>Qt.p4S,exp:()=>Qt.oNF,expandDims:()=>Qt.UG6,expm1:()=>Qt.IYd,eye:()=>Qt.y5U,fft:()=>Qt.hVP,fill:()=>Qt.GSj,findBackend:()=>fe.go,findBackendFactory:()=>fe.W4,floor:()=>Qt.RIf,floorDiv:()=>Qt.wh_,fused:()=>Qt.cZk,gather:()=>Qt.kgh,gatherND:()=>Qt.SY9,gather_util:()=>c,getBackend:()=>fe.jz,getGradient:()=>vt.vQ,getKernel:()=>vt._5,getKernelsForBackend:()=>vt.Op,grad:()=>we.Dv,grads:()=>we.ok,greater:()=>Qt.rhj,greaterEqual:()=>Qt.DQN,ifft:()=>Qt.KGM,imag:()=>Qt.ngS,image:()=>Qt.Slp,inTopKAsync:()=>Qt.U4u,io:()=>a,irfft:()=>Qt.ggX,isFinite:()=>Qt.MIs,isInf:()=>Qt.EN4,isNaN:()=>Qt.yrW,keep:()=>fe.aC,kernel_impls:()=>p,leakyRelu:()=>Qt.H8d,less:()=>Qt.M7h,lessEqual:()=>Qt.InN,linalg:()=>Qt.mPL,linspace:()=>Qt.mT8,localResponseNormalization:()=>Qt.Kgs,log:()=>Qt.Rm2,log1p:()=>Qt.Kko,logSigmoid:()=>Qt.nqI,logSoftmax:()=>Qt.HPB,logSumExp:()=>Qt.VZ,logicalAnd:()=>Qt.n76,logicalNot:()=>Qt.NSZ,logicalOr:()=>Qt.ztW,logicalXor:()=>Qt.rxB,losses:()=>Qt.YYh,lowerBound:()=>Qt.yzS,matMul:()=>Qt.NoW,math:()=>o,max:()=>Qt.T9B,maxPool:()=>Qt.jgi,maxPool3d:()=>Qt.NYV,maxPoolWithArgmax:()=>Qt.RO,maximum:()=>Qt.PhQ,mean:()=>Qt.i2o,memory:()=>fe.m1,meshgrid:()=>Qt.OYQ,min:()=>Qt.jkA,minimum:()=>Qt.BpO,mirrorPad:()=>Qt.FFZ,mod:()=>Qt.ziu,moments:()=>Qt.Clk,movingAverage:()=>Qt.CRk,mul:()=>Qt.lKK,multiRNNCell:()=>Qt.YDF,multinomial:()=>Qt.OjQ,neg:()=>Qt.HZy,nextFrame:()=>tn,norm:()=>Qt.xbf,notEqual:()=>Qt.Ec,oneHot:()=>Qt.Mw0,ones:()=>Qt.SaS,onesLike:()=>Qt.P61,op:()=>Qt.op,outerProduct:()=>Qt.X4o,pad:()=>Qt.eVF,pad1d:()=>Qt.BZs,pad2d:()=>Qt.grY,pad3d:()=>Qt.XHu,pad4d:()=>Qt.WLX,pool:()=>Qt.dzn,pow:()=>Qt.n7C,prelu:()=>Qt.NsG,print:()=>Qt.yyV,prod:()=>Qt._eU,profile:()=>fe.ME,raggedGather:()=>Qt.whe,raggedRange:()=>Qt.iyU,raggedTensorToTensor:()=>Qt.Q0_,rand:()=>Qt._9M,randomGamma:()=>Qt.pR9,randomNormal:()=>Qt.FE$,randomStandardNormal:()=>Qt.m0H,randomUniform:()=>Qt.YeY,randomUniformInt:()=>Qt.HYA,range:()=>Qt.y17,ready:()=>fe.Gc,real:()=>Qt.xav,reciprocal:()=>Qt.VOZ,registerBackend:()=>fe.gJ,registerGradient:()=>vt.kr,registerKernel:()=>vt.tA,relu:()=>Qt.VVh,relu6:()=>Qt.j__,removeBackend:()=>fe.rE,reshape:()=>Qt.tQQ,reverse:()=>Qt.BEg,reverse1d:()=>Qt.QD2,reverse2d:()=>Qt.LMr,reverse3d:()=>Qt.I2l,reverse4d:()=>Qt.JYU,rfft:()=>Qt.z8$,round:()=>Qt.LIG,rsqrt:()=>Qt.Z$r,scalar:()=>Qt.d_2,scatterND:()=>Qt.NFr,scatter_util:()=>At,searchSorted:()=>Qt.sZg,selu:()=>Qt.WfX,separableConv2d:()=>Qt.wdz,serialization:()=>i,setBackend:()=>fe.jh,setPlatform:()=>fe.Ok,setdiff1dAsync:()=>Qt.F12,sigmoid:()=>Qt.ry7,sign:()=>Qt._SZ,signal:()=>Qt.vPA,sin:()=>Qt.F8e,sinh:()=>Qt.L0l,slice:()=>Qt.dik,slice1d:()=>Qt.Q$M,slice2d:()=>Qt.zAd,slice3d:()=>Qt.wck,slice4d:()=>Qt.R0O,slice_util:()=>Ot,softmax:()=>Qt.Vs9,softplus:()=>Qt.lw0,spaceToBatchND:()=>Qt.eDJ,sparse:()=>Qt.lMo,sparseToDense:()=>Qt.Zhr,spectral:()=>Qt.lOn,split:()=>Qt.lDo,sqrt:()=>Qt.RZD,square:()=>Qt.EwI,squaredDifference:()=>Qt.Pbu,squeeze:()=>Qt.r2V,stack:()=>Qt.t$z,step:()=>Qt.PMw,stridedSlice:()=>Qt.Ym9,string:()=>Qt.YjP,sub:()=>Qt.jbE,sum:()=>Qt.czq,sumOutType:()=>Xt.ch,tan:()=>Qt.Mlm,tanh:()=>Qt.ymU,tensor:()=>Qt.OEK,tensor1d:()=>Qt.tGX,tensor2d:()=>Qt.KtR,tensor3d:()=>Qt.$_$,tensor4d:()=>Qt.g9W,tensor5d:()=>Qt.Lpo,tensor6d:()=>Qt.yxw,tensorScatterUpdate:()=>Qt.NNh,tensor_util:()=>Rt,test_util:()=>u,tidy:()=>fe.DZ,tile:()=>Qt.Vsq,time:()=>fe.kB,topk:()=>Qt.rfw,train:()=>Zt,transpose:()=>Qt.mgz,truncatedNormal:()=>Qt.efE,unique:()=>Qt.AmM,unregisterGradient:()=>vt.rY,unregisterKernel:()=>vt.iP,unsortedSegmentSum:()=>Qt.zAU,unstack:()=>Qt.K$i,upcastType:()=>Xt.Tu,upperBound:()=>Qt.rni,util:()=>Pt,valueAndGrad:()=>we.jY,valueAndGrads:()=>we.mu,variable:()=>Qt.bvq,variableGrads:()=>we.y7,version_core:()=>Yt,where:()=>Qt._M9,whereAsync:()=>Qt.YJN,zeros:()=>Qt.Ul9,zerosLike:()=>Qt.POl});var r={};n.r(r),n.d(r,{isBrowser:()=>_,isMobile:()=>g,mockIsMobile:()=>m});var i={};n.r(i),n.d(i,{Serializable:()=>Te,SerializationMap:()=>Ce,getRegisteredName:()=>Ie,registerClass:()=>Ee});var a={};n.r(a),n.d(a,{CompositeArrayBuffer:()=>C.D,browserFiles:()=>We,browserHTTPRequest:()=>nt,concatenateArrayBuffers:()=>b.AQ,copyModel:()=>te,decodeWeights:()=>b.CY,decodeWeightsStream:()=>b.s5,encodeWeights:()=>b.aG,fromMemory:()=>ot,fromMemorySync:()=>st,getLoadHandlers:()=>T,getModelArtifactsForJSON:()=>b.Ej,getModelArtifactsForJSONSync:()=>b.Rl,getModelArtifactsInfoForJSON:()=>b.oR,getSaveHandlers:()=>S,getWeightSpecs:()=>b.Xf,http:()=>tt,isHTTPScheme:()=>Ze,listModels:()=>Z,loadWeights:()=>Xe,moveModel:()=>ne,registerLoadRouter:()=>x,registerSaveRouter:()=>k,removeModel:()=>ee,weightsLoaderFactory:()=>Qe,withSaveHandler:()=>ct,withSaveHandlerSync:()=>ut});var o={};n.r(o),n.d(o,{confusionMatrix:()=>mt});var s={};n.r(s),n.d(s,{draw:()=>Et,fromPixels:()=>It,fromPixelsAsync:()=>St,toPixels:()=>Ct});var c={};n.r(c),n.d(c,{prepareAndValidate:()=>Nt});var u={};n.r(u),n.d(u,{TEST_EPSILON_FLOAT16:()=>Lt,createVideoElement:()=>Wt,encodeStrings:()=>qt,expectArrayBuffersEqual:()=>Gt,expectArraysClose:()=>Mt,expectArraysEqual:()=>jt,expectNumbersClose:()=>Bt,expectPromiseToFail:()=>$t,expectValuesInRange:()=>Ut,play:()=>Ht,testEpsilon:()=>Ft});var l={};n.r(l),n.d(l,{collectGatherOpShapeInfo:()=>cr,computeOutShape:()=>sr,segOpComputeOptimalWindowSize:()=>or});var d={};n.r(d),n.d(d,{ERF_A1:()=>xn,ERF_A2:()=>Sn,ERF_A3:()=>Tn,ERF_A4:()=>Cn,ERF_A5:()=>En,ERF_P:()=>kn,PARALLELIZE_THRESHOLD:()=>hn,RowPartitionType:()=>on,SELU_SCALE:()=>wn.X,SELU_SCALEALPHA:()=>wn.j,applyActivation:()=>cn.f2,assertAndGetBroadcastShape:()=>gt.assertAndGetBroadcastShape,assertAxesAreInnerMostDims:()=>nn.WC,assertParamsConsistent:()=>rn,assignToTypedArray:()=>Dn,axesAreInnerMostDims:()=>nn.WH,calculateShapes:()=>At.calculateShapes,checkEinsumDimSizes:()=>Un,checkPadOnDimRoundingMode:()=>sn.s_,combineLocations:()=>nn.aF,combineRaggedTensorToTensorShapes:()=>un,complexWithEvenIndex:()=>On,complexWithOddIndex:()=>Rn,computeConv2DInfo:()=>sn.uf,computeConv3DInfo:()=>sn.p$,computeDefaultPad:()=>sn.G8,computeDilation2DInfo:()=>sn.YQ,computeOptimalWindowSize:()=>fn,computeOutAndReduceShapes:()=>nn.lb,computeOutShape:()=>an,computePool2DInfo:()=>sn.E6,computePool3DInfo:()=>sn.l5,convertConv2DDataFormat:()=>sn.$Q,decodeEinsumEquation:()=>Bn,eitherStridesOrDilationsAreOne:()=>sn.G0,expandShapeToKeepDim:()=>nn.SM,exponent:()=>Mn,exponents:()=>Ln,fromStringArrayToUint8:()=>lr,fromUint8ToStringArray:()=>ur,getAxesPermutation:()=>nn.Em,getBroadcastDims:()=>gt.getBroadcastDims,getComplexWithIndex:()=>Pn,getEinsumComputePath:()=>Gn,getEinsumPermutation:()=>Vn,getFusedBiasGradient:()=>cn.Do,getFusedDyActivation:()=>cn.XB,getImageCenter:()=>mn,getInnerMostAxes:()=>nn.fK,getPermuted:()=>_n,getRaggedRank:()=>dn,getReductionAxes:()=>gt.getReductionAxes,getReshaped:()=>gn,getReshapedPermuted:()=>vn,getRowPartitionTypesHelper:()=>ln,getSliceBeginCoords:()=>yn,getSliceSize:()=>bn,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Yn,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Kn,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Xn,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Zn,getSparseReshapeInputOutputMismatchErrorMessage:()=>tr,getSparseReshapeInputOutputMultipleErrorMessage:()=>er,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Qn,getSparseReshapeNegativeOutputDimErrorMessage:()=>Jn,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>ar,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>nr,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>rr,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>ir,getUndoAxesPermutation:()=>nn.gx,isIdentityPermutation:()=>qn,log:()=>In.R,mergeRealAndImagArrays:()=>Nn,prepareAndValidate:()=>Nt,prepareSplitSize:()=>Hn,segment_util:()=>l,shouldFuse:()=>cn.zE,slice_util:()=>Ot,splitRealAndImagArrays:()=>An,stridesOrDilationsArePositive:()=>sn.qk,tupleValuesAreOne:()=>sn.Dh,upcastType:()=>Xt.Tu,validateDefaultValueShape:()=>pn,validateInput:()=>At.validateInput,validateUpdateShape:()=>At.validateUpdateShape,warn:()=>In.i});var p={};n.r(p),n.d(p,{nonMaxSuppressionV3Impl:()=>dr.c7,nonMaxSuppressionV4Impl:()=>dr.ZS,nonMaxSuppressionV5Impl:()=>dr.ut,whereImpl:()=>pr.Y});var h=n(2215);let f;function m(e){f=e}function g(e){if(void 0!==f)return f;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function _(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var v=n(5168);const y=(0,v._K)();y.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),y.registerFlag("IS_BROWSER",(()=>_())),y.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),y.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),y.registerFlag("IS_SAFARI",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),y.registerFlag("PROD",(()=>!1)),y.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>y.getBool("DEBUG"))),y.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),y.registerFlag("IS_TEST",(()=>!1)),y.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>y.getBool("DEBUG"))),y.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),y.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),y.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));var b=n(2314);class w{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==w.instance&&(w.instance=new w),w.instance}static registerSaveRouter(e){w.getInstance().saveRouters.push(e)}static registerLoadRouter(e){w.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return w.getHandlers(e,"save")}static getLoadHandlers(e,t){return w.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?w.getInstance().loadRouters:w.getInstance().saveRouters).forEach((t=>{const i=t(e,n);null!==i&&r.push(i)})),r}}const k=e=>w.registerSaveRouter(e),x=e=>w.registerLoadRouter(e),S=e=>w.getSaveHandlers(e),T=(e,t)=>w.getLoadHandlers(e,t);var C=n(7035);const E="tensorflowjs",I="models_store",N="model_info_store";function A(){if(!(0,v._K)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function O(e){const t=e.result;t.createObjectStore(I,{keyPath:"modelPath"}),t.createObjectStore(N,{keyPath:"modelPath"})}class R{constructor(e){if(this.indexedDB=A(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(E,1);r.onupgradeneeded=()=>O(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(I,"readonly"),r=t.objectStore(I).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=C.D.join(t.weightData);const r=(0,b.oR)(t),a=i.transaction(N,"readwrite");let o,s,c=a.objectStore(N);try{o=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(e){return n(e)}o.onsuccess=()=>{s=i.transaction(I,"readwrite");const o=s.objectStore(I);let u;try{u=o.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(e){return n(e)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=a.objectStore(N);const t=c.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(u.error)),t.onerror=e=>(i.close(),n(u.error))}},o.onerror=e=>(i.close(),n(o.error)),a.oncomplete=()=>{null==s?i.close():s.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}R.URL_SCHEME="indexeddb://";const P=e=>{return(0,v._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(R.URL_SCHEME)?(t=e.slice(R.URL_SCHEME.length),new R(t)):null;var t};w.registerSaveRouter(P),w.registerLoadRouter(P);class D{constructor(){this.indexedDB=A()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(E,1);n.onupgradeneeded=()=>O(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(N,"readonly"),a=i.objectStore(N).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(R.URL_SCHEME)?t.slice(R.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(E,1);r.onupgradeneeded=()=>O(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(N,"readwrite"),o=a.objectStore(N),s=o.get(e);let c;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=o.delete(e),a=()=>{c=i.transaction(I,"readwrite");const r=c.objectStore(I).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),i.close(),n(s.error))}},s.onerror=e=>(i.close(),n(s.error)),a.oncomplete=()=>{null==c?i.close():c.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)}))}}var L=n(1109);const M="/",F="tensorflowjs_models",z="info",$="model_topology",j="weight_specs",B="weight_data",V="model_metadata";function U(e){return{info:[F,e,z].join(M),topology:[F,e,$].join(M),weightSpecs:[F,e,j].join(M),weightData:[F,e,B].join(M),modelMetadata:[F,e,V].join(M)}}function G(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function q(e){const t=e.split(M);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(M)}class W{constructor(e){if(!(0,v._K)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=U(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=(0,b.oR)(e),i=C.D.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(0,b.l3)(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw G(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=(0,b.jf)(a),t}}W.URL_SCHEME="localstorage://";const H=e=>{return(0,v._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(W.URL_SCHEME)?(t=e.slice(W.URL_SCHEME.length),new W(t)):null;var t};w.registerSaveRouter(H),w.registerLoadRouter(H);class Y{constructor(){(0,L.vA)((0,v._K)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),(0,L.vA)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=F+M,n=M+z;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){e[q(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){var t;const n=U(e=(t=e).startsWith(W.URL_SCHEME)?t.slice(W.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return G(n),r}}const K="://";class X{constructor(){this.managers={}}static getInstance(){return null==X.instance&&(X.instance=new X),X.instance}static registerManager(e,t){(0,L.vA)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(K)&&(e=e.slice(0,e.indexOf(K))),(0,L.vA)(e.length>0,(()=>"scheme must not be an empty string."));const n=X.getInstance();(0,L.vA)(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=X.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(X.getInstance().managers)}}function Q(e){if(-1===e.indexOf(K))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${X.getSchemes().join(",")}`);return{scheme:e.split(K)[0],path:e.split(K)[1]}}async function J(e,t,n=!1){(0,L.vA)(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=w.getLoadHandlers(e);(0,L.vA)(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),(0,L.vA)(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const i=r[0],a=w.getSaveHandlers(t);(0,L.vA)(a.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),(0,L.vA)(a.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const o=a[0],s=Q(e).scheme,c=Q(e).path,u=s===Q(e).scheme,l=await i.load();n&&u&&await X.getManager(s).removeModel(c);const d=await o.save(l);return n&&!u&&await X.getManager(s).removeModel(c),d.modelArtifactsInfo}async function Z(){const e=X.getSchemes(),t={};for(const n of e){const e=await X.getManager(n).listModels();for(const r in e){t[n+K+r]=e[r]}}return t}async function ee(e){const t=Q(e);return X.getManager(t.scheme).removeModel(t.path)}async function te(e,t){return J(e,t,!1)}async function ne(e,t){return J(e,t,!0)}var re=n(3506);class ie{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&(0,v._K)().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return(0,re.Y)(e)}}if((0,v._K)().get("IS_BROWSER")){(0,v._K)().setPlatform("browser",new ie);try{X.registerManager(W.URL_SCHEME,new Y)}catch(e){}try{X.registerManager(R.URL_SCHEME,new D)}catch(e){}}const ae=()=>n(675);let oe;class se{constructor(){this.util=n(1624),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,v._K)().global.fetch?(0,v._K)().global.fetch(e,t):(null==oe&&(oe=ae()),oe(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}(0,v._K)().get("IS_NODE")&&!(0,v._K)().get("IS_BROWSER")&&(0,v._K)().setPlatform("node",new se);var ce=n(5826),ue=n(9339),le=n(2719),de=n(845),pe=n(5225);(0,h.Ye)();const he={buffer:ce.r,cast:ue.w,clone:le.o,print:de.y};(0,pe.Q5)(he);var fe=n(7534),me=n(2377),ge=n(4425),_e=n(7544),ve=n(2654),ye=n(5843),be=n(3107),we=n(3376),ke=n(4964);const xe=new Map,Se=new Map;class Te{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Ce{constructor(){this.classNameMap={}}static getMap(){return null==Ce.instance&&(Ce.instance=new Ce),Ce.instance}static register(e){Ce.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ee(e,t,n){(0,L.vA)(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),(0,L.vA)("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),(0,L.vA)(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),void 0===t&&(t="Custom"),void 0===n&&(n=e.className);const r=t+">"+n;return Ce.register(e),xe.set(r,e),Se.set(e,r),e}function Ie(e){return Se.has(e)?Se.get(e):e.className}class Ne extends Te{minimize(e,t=!1,n){const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:i[e.name]})));this.applyGradients(e)}else this.applyGradients(i);return(0,fe.AS)(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return(0,we.y7)(e,t)}dispose(){null!=this.iterations_&&(0,fe.AS)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,ke.d)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Ne,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class Ae extends Ne{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=h.T2.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=h.T2.registeredVariables[t],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(i)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(i)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const o=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;(0,fe.DZ)((()=>{const e=(0,me.W)((0,_e.l)(o,this.rho),(0,_e.l)((0,ye.E)(a),1-this.rho)),t=(0,_e.l)((0,ge.y)((0,ve.R)((0,me.W)(s,this.epsilon)),(0,ve.R)((0,me.W)(o,this.epsilon))),a),n=(0,me.W)((0,_e.l)(s,this.rho),(0,_e.l)((0,ye.E)(t),1-this.rho));o.assign(e),s.assign(n);const i=(0,me.W)((0,_e.l)(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,fe.AS)(this.accumulatedGrads.map((e=>e.variable))),(0,fe.AS)(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}var Oe=n(2733);class Re extends Ne{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=h.T2.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:(0,fe.DZ)((()=>(0,Oe.G)(r.shape,this.initialAccumulatorValue).variable(e)))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const a=this.accumulatedGrads[n].variable;(0,fe.DZ)((()=>{const e=(0,me.W)(a,(0,ye.E)(i));a.assign(e);const t=(0,me.W)((0,_e.l)((0,ge.y)(i,(0,ve.R)((0,me.W)(e,h.T2.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,fe.AS)(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}var Pe=n(3940),De=n(6964);class Le extends Ne{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,fe.DZ)((()=>{this.accBeta1=(0,ke.d)(t).variable(),this.accBeta2=(0,ke.d)(n).variable()})),null==r&&(this.epsilon=h.T2.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);(0,fe.DZ)((()=>{const n=(0,De.j)(1,this.accBeta1),r=(0,De.j)(1,this.accBeta2);t.forEach(((t,i)=>{const a=h.T2.registeredVariables[t],o=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:(0,fe.DZ)((()=>(0,be.P)(a).variable(o)))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:(0,fe.DZ)((()=>(0,be.P)(a).variable(o)))});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const c=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,l=(0,me.W)((0,_e.l)(c,this.beta1),(0,_e.l)(s,1-this.beta1)),d=(0,me.W)((0,_e.l)(u,this.beta2),(0,_e.l)((0,ye.E)(s),1-this.beta2)),p=(0,ge.y)(l,n),f=(0,ge.y)(d,r);c.assign(l),u.assign(d);const m=(0,me.W)((0,_e.l)((0,ge.y)(p,(0,me.W)((0,ve.R)(f),this.epsilon)),-this.learningRate),a);a.assign(m)})),this.accBeta1.assign((0,_e.l)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,_e.l)(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,fe.AS)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&(0,fe.AS)(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),(0,fe.DZ)((()=>{this.accBeta1.assign((0,Pe.n)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,Pe.n)(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}var Me=n(8598),Fe=n(7184);class ze extends Ne{static get className(){return"Adamax"}constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,fe.DZ)((()=>{this.iteration=(0,ke.d)(0).variable(),this.accBeta1=(0,ke.d)(t).variable()})),null==r&&(this.epsilon=h.T2.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);(0,fe.DZ)((()=>{const n=(0,De.j)(1,this.accBeta1),r=(0,ge.y)(-this.learningRate,(0,me.W)((0,_e.l)(this.iteration,this.decay),1));t.forEach(((t,i)=>{const a=h.T2.registeredVariables[t],o=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:(0,be.P)(a).variable(o)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:(0,be.P)(a).variable(o)});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const c=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,l=(0,me.W)((0,_e.l)(c,this.beta1),(0,_e.l)(s,1-this.beta1)),d=(0,_e.l)(u,this.beta2),p=(0,Me.t)(s),f=(0,Fe.P)(d,p);c.assign(l),u.assign(f);const m=(0,me.W)((0,_e.l)((0,ge.y)(r,n),(0,ge.y)(l,(0,me.W)(f,this.epsilon))),a);a.assign(m)})),this.iteration.assign((0,me.W)(this.iteration,1)),this.accBeta1.assign((0,_e.l)(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,fe.AS)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&(0,fe.AS)(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class $e extends Ne{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=h.T2.registeredVariables[t];(0,fe.DZ)((()=>{const e=(0,me.W)((0,_e.l)(this.c,r),i);i.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,fe.aC)((0,ke.d)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class je extends $e{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=(0,ke.d)(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=h.T2.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(e)))}}const i=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&(0,fe.DZ)((()=>{let e;const t=(0,me.W)((0,_e.l)(this.m,i),a);e=this.useNesterov?(0,me.W)((0,_e.l)(this.c,(0,me.W)(a,(0,_e.l)(t,this.m))),r):(0,me.W)((0,_e.l)(this.c,t),r),i.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,fe.AS)(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class Be extends Ne{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=h.T2.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=h.T2.registeredVariables[t],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(i)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(i)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:(0,fe.DZ)((()=>(0,be.P)(r).variable(i)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const o=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;(0,fe.DZ)((()=>{const e=(0,me.W)((0,_e.l)(o,this.decay),(0,_e.l)((0,ye.E)(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,i=(0,me.W)((0,_e.l)(t,this.decay),(0,_e.l)(a,1-this.decay)),c=(0,ge.y)((0,_e.l)(a,this.learningRate),(0,ve.R)((0,De.j)(e,(0,me.W)((0,ye.E)(i),this.epsilon)))),u=(0,me.W)((0,_e.l)(s,this.momentum),c);o.assign(e),t.assign(i),s.assign(u);const l=(0,De.j)(r,u);r.assign(l)}else{const e=(0,me.W)((0,_e.l)(o,this.decay),(0,_e.l)((0,ye.E)(a),1-this.decay)),t=(0,me.W)((0,_e.l)(s,this.momentum),(0,ge.y)((0,_e.l)(a,this.learningRate),(0,ve.R)((0,me.W)(e,this.epsilon))));o.assign(e),s.assign(t);const n=(0,De.j)(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,fe.AS)(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&(0,fe.AS)(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&(0,fe.AS)(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const Ve=[Ae,Re,Le,ze,je,Be,$e];function Ue(e){return new Promise((e=>setTimeout(e))).then(e)}class Ge{constructor(e){if(!(0,v._K)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Ge.URL_SCHEME)&&(e=e.slice(Ge.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=C.D.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=(0,b.zV)(e,t),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await Ue((()=>a.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Ue((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:(0,b.oR)(e)}}}}Ge.URL_SCHEME="downloads://";class qe{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:i});const a=(0,b.Ej)(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),i=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(i).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const i=new FileReader;i.onload=e=>{const t=e.target.result;n(t)},i.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>(0,b.P8)(e.name))),r={};for(const i of e)i.paths.forEach((e=>{const i=(0,b.P8)(e);if(-1!==t.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(t.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(i)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function We(e){return new qe(e)}function He(e,t,n,r){!function(e){(0,L.vA)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){(0,L.vA)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),(0,L.vA)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),(0,L.vA)(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map((a=>(a.then((a=>{const o=n+ ++i/e.length*(r-n);return t(o),a})),a))))}w.registerSaveRouter((e=>(0,v._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ge.URL_SCHEME)?function(e="model"){return new Ge(e)}(e.slice(Ge.URL_SCHEME.length)):null));var Ye=n(9255);async function Ke(e,t){null==t&&(t={});const n=null==t.fetchFunc?(0,v._K)().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=(null==t.onProgress?await Promise.all(r):await He(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(i):await He(i,t.onProgress,.5,1)}async function Xe(e,t="",n,r){return Qe((e=>Ke(e,{requestInit:r})))(e,t,n)}function Qe(e){return async(t,n="",r)=>{const i=t.map((()=>!1)),a={},o=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,u=Ye.i[c]*L.Ze(e.shape),l=()=>{i[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach(((t,n)=>{t===e.name&&(l(),o[n]=!0)})):l(),s.push(e.name),n+=u}))})),!o.every((e=>e))){const e=r.filter(((e,t)=>!o[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}const c=i.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const l=await e(u),d={};let p=0;return c.forEach((e=>{const n=t[e].paths.length,r=new C.D(l.slice(p,p+n));a[e].forEach((e=>{const t=r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,b.CY)(t,[e.manifestEntry]);for(const e in n)d[e]=n[e]})),p+=n})),d}}class Je{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,L.vA)("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=(0,v._K)().platform.fetch,(0,L.vA)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&(0,L.vA)(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=(0,b.zV)(e,n);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=C.D.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:(0,b.oR)(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return(0,b.Ej)(e,(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=(0,b.Xf)(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?(0,v._K)().platform.fetch:t.fetchFunc;let i,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var o;a<e.length;){if(!i){const n=(await r(e[a],t.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:s,value:c}=await i.read();if(!s)return void n.enqueue(c);a++,i=void 0,null===(o=t.onProgress)||void 0===o||o.call(t,a/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}(t),i=this.weightPathPrefix||n,a=[],o=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):a.push(i+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(e){const t=await this.getWeightUrls(e);return[(0,b.Xf)(e),await Ke(t,this.loadOptions)]}}function Ze(e){return null!=e.match(Je.URL_SCHEME_REGEX)}Je.URL_SCHEME_REGEX=/^https?:\/\//;const et=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>Ze(e))):Ze(e),n)return tt(e,t)}return null};function tt(e,t){return new Je(e,t)}function nt(e,t){return tt(e,t)}w.registerSaveRouter(et),w.registerLoadRouter(et);class rt{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class it{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class at{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function ot(e,t,n,r){return new at(st(...arguments))}function st(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new rt(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rt({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rt({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function ct(e){return new it(e)}function ut(e){return new it(e)}var lt=n(9031),dt=n(7041),pt=n(1046),ht=n(7839),ft=n(3345);const mt=(0,ht.op)({confusionMatrix_:function(e,t,n){const r=(0,lt.YT)(e,"labels","confusionMatrix"),i=(0,lt.YT)(t,"predictions","confusionMatrix");L.vA(null==n||n>0&&Number.isInteger(n),(()=>`If provided, numClasses must be a positive integer, but got ${n}`)),L.vA(1===r.rank,(()=>`Expected the rank of labels to be 1, but got ${r.rank}`)),L.vA(1===i.rank,(()=>`Expected the rank of predictions to be 1, but got ${i.rank}`)),L.vA(r.shape[0]===i.shape[0],(()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`)),L.vA(n>0&&Number.isInteger(n),(()=>`numClasses is required to be a positive integer, but got ${n}`));const a=(0,pt.M)((0,ue.w)(r,"int32"),n),o=(0,pt.M)((0,ue.w)(i,"int32"),n),s=(0,ft.m)(a),c=(0,dt.N)(s,o);return(0,ue.w)(c,"int32")}});var gt=n(7600),_t=n(6295),vt=n(6244),yt=n(9270);let bt,wt=!1;function kt(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,a=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);s=!0}if(null!=(0,vt._5)(_t.awo,h.T2.backendName)){const n={pixels:e},r={numChannels:t};return h.T2.runKernel(_t.awo,n,r)}const[c,u]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];let l,d;if(o)l=e.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)l=e.data;else if(a||i||s){if(null==bt)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");bt=new OffscreenCanvas(1,1).getContext("2d")}else bt=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});bt.canvas.width=c,bt.canvas.height=u,bt.drawImage(e,0,0,c,u),l=bt.getImageData(0,0,c,u).data}if(4===t)d=new Int32Array(l);else{const e=c*u;d=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)d[n*t+e]=l[4*n+e]}const p=[u,c,t];return(0,yt.$)(d,p,"int32")}function xt(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function St(e,t=3){let n=null;if((0,v._K)().getBool("WRAP_TO_IMAGEBITMAP")&&xt(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return kt(n,t)}function Tt(e){if(2!==e.rank&&3!==e.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function Ct(e,t){let n=(0,lt.YT)(e,"img","toPixels");if(!(e instanceof pe.qY)){const e=n;n=(0,ue.w)(e,"int32"),e.dispose()}Tt(n);const[r,i]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2],o=await n.data(),s="float32"===n.dtype?255:1,c=new Uint8ClampedArray(i*r*4);for(let e=0;e<r*i;++e){const t=[0,0,0,255];for(let r=0;r<a;r++){const i=o[e*a+r];if("float32"===n.dtype){if(i<0||i>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if("int32"===n.dtype&&(i<0||i>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);1===a?(t[0]=i*s,t[1]=i*s,t[2]=i*s):t[r]=i*s}const r=4*e;c[r+0]=Math.round(t[0]),c[r+1]=Math.round(t[1]),c[r+2]=Math.round(t[2]),c[r+3]=Math.round(t[3])}if(null!=t){if(!wt){null!=(0,vt._5)(_t.XmO,h.T2.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),wt=!0)}t.width=i,t.height=r;const e=t.getContext("2d"),n=new ImageData(c,i,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}function Et(e,t,n){let r=(0,lt.YT)(e,"img","draw");if(!(e instanceof pe.qY)){const e=r;r=(0,ue.w)(e,"int32"),e.dispose()}Tt(r),function(e){const t=(null==e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}(null==n?void 0:n.imageOptions);const i={image:r},a={canvas:t,options:n};h.T2.runKernel(_t.XmO,i,a)}const It=(0,ht.op)({fromPixels_:kt});function Nt(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===(0,L.Ze)(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,a=i[i.length-1];let o=1;for(let e=0;e<i.length-1;++e)o*=i[e];const s=e.shape,c=i.slice();c.pop();let u=1;for(let e=a;e<n;++e)u*=s[e],c.push(s[e]);const l=[...(0,L.Ur)(e.shape).map((e=>e/u)),1].slice(0,a);return[c,o,u,l]}var At=n(64),Ot=n(1295),Rt=n(2067),Pt=n(6937);const Dt=.001,Lt=.1;function Mt(e,t,n){return null==n&&(n=Ft()),zt(e,t,((e,t)=>Vt(e,t,n)))}function Ft(){return 32===h.T2.backend.floatPrecision()?Dt:Lt}function zt(e,t,n){let r=!0;if(((0,Pt.isTypedArray)(e)||(0,Pt.isTypedArray)(t))&&(r=!1),(0,Pt.isTypedArray)(e)&&(0,Pt.isTypedArray)(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=(0,lt.MZ)(e),r=(0,lt.MZ)(t);if(!(0,L.r1)(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const i=(0,Pt.isTypedArray)(e)?e:(0,Pt.flatten)(e),a=(0,Pt.isTypedArray)(t)?t:(0,Pt.flatten)(t);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.\nActual:   ${i}.\nExpected: ${a}.`);for(let e=0;e<a.length;++e){const t=i[e],r=a[e];if(!n(t,r))throw new Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.\nActual:   ${i}.\nExpected: ${a}.`)}"undefined"!=typeof expect&&expect().nothing()}function $t(e,t){e().then((()=>t.fail()),(()=>t())),"undefined"!=typeof expect&&expect().nothing()}function jt(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return(0,L.Kg)(e)||(0,L.Kg)(e[0])||(0,L.Kg)(t)||(0,L.Kg)(t[0])?zt(e,n,((e,t)=>e==t)):zt(e,t,((e,t)=>Vt(e,t,0)))}function Bt(e,t,n){if(null==n&&(n=Ft()),!Vt(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);"undefined"!=typeof expect&&expect().nothing()}function Vt(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Ut(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Gt(e,t){const n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let e=0;e<r.length;e++)if(n[e]!==r[e])throw new Error(`Expected ArrayBuffer value at ${e} to be ${r[e]} but got ${n[e]} instead`)}function qt(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?qt(n):e[t]=(0,Pt.encodeString)(n)}return e}function Wt(e){const t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((e=>{t.addEventListener("loadeddata",(n=>e(t))),t.load()}))}async function Ht(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise((t=>{e.requestVideoFrameCallback(t)}))}const Yt="4.20.0";class Kt{static sgd(e){return new $e(e)}static momentum(e,t,n=!1){return new je(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new Be(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new Le(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new Ae(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new ze(e,t,n,r,i)}static adagrad(e,t=.1){return new Re(e,t)}}var Xt=n(9452),Qt=n(6284),Jt=n(5302);const Zt=Kt,en="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function tn(){return new Promise((e=>en((()=>e()))))}var nn=n(5596);function rn(e,t){const n=e[0].length;e.forEach(((e,t)=>{L.vA(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),L.vA(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,i)=>{for(let a=0;a<n;a++)L.vA(a===t||e[a]===r[a],(()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`))}))}function an(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var on,sn=n(9397),cn=n(5932);function un(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${a} but shape[${i+e}] = ${s}`)}else r[o]=a}return r}function ln(e){const t={FIRST_DIM_SIZE:on.FIRST_DIM_SIZE,VALUE_ROWIDS:on.VALUE_ROWIDS,ROW_LENGTHS:on.ROW_LENGTHS,ROW_SPLITS:on.ROW_SPLITS,ROW_LIMITS:on.ROW_LIMITS,ROW_STARTS:on.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function dn(e){return 0===e.length?0:e[0]===on.FIRST_DIM_SIZE?e.length-1:e.length}function pn(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(on||(on={}));const hn=30;function fn(e){return e<=hn?e:(0,L.lK)(e,Math.floor(Math.sqrt(e)))}function mn(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function gn(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function _n(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function vn(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?i.push(t[n-1]*e[n]):i.push(e[n]/t[n-1]):i.push(e[n]);return i}function yn(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function bn(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}var wn=n(1838);const kn=.3275911,xn=.254829592,Sn=-.284496736,Tn=1.421413741,Cn=-1.453152027,En=1.061405429;var In=n(5883);function Nn(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function An(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function On(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function Rn(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function Pn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Dn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ln(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function Mn(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const Fn="->",zn=/->/g,$n=",",jn="...";function Bn(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(zn,"").length)/Fn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Fn}").`);const[r,i]=e.split(Fn);(0,L.vA)(-1===r.indexOf(jn),(()=>`The ellipsis notation ("${jn}") is not supported yet.`));const a=r.split($n),o=a.length;if(t!==o)throw new Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let e=0;e<i.length;++e){const t=i[e];if(!a.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===s.indexOf(t)&&t!==$n&&s.push(t)}const c=new Array(a.length);for(let e=0;e<o;++e){if(new Set(a[e].split("")).size!==a[e].length)throw new Error(`Found duplicate axes in input component ${a[e]}. Support for duplicate axes in input is not implemented yet.`);c[e]=[];for(let t=0;t<a[e].length;++t)c[e].push(s.indexOf(a[e][t]))}const u=s.length,l=[];for(let e=i.length;e<u;++e)l.push(e);return{allDims:s,summedDims:l,idDims:c}}function Vn(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function Un(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const i=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=i[n]:(0,L.vA)(r[t[e][n]]===i[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(i)}, but got dimension ${i[n]}`))}}function Gn(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let e=0;e<i;++e)r.push([]);const a=[];for(let e=0;e<n.length;++e){const i=Wn(t,n[e]);for(const t of i)-1===a.indexOf(t)&&(r[e].push(t),a.push(t))}return{path:n,steps:r}}function qn(e){return e.every(((e,t)=>e===t))}function Wn(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Hn(e,t,n=0){let r=[];if("number"==typeof t)(0,L.vA)(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);(0,L.vA)(i<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}(0,L.vA)(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function Yn(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Kn(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function Xn(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function Qn(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function Jn(e,t){return`size ${e} must be non-negative, not ${t}`}function Zn(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function er(e,t){return`Input to reshape is a SparseTensor with ${(0,L.Ze)(e)}\n  dense values, but the requested shape requires a multiple of ${(0,L.Ze)(t)}. inputShape=${e} outputShape= ${t}`}function tr(e,t){return`Input to reshape is a tensor with ${(0,L.Ze)(e)} dense values, but the requested shape has ${(0,L.Ze)(t)}. inputShape=${e} outputShape=${t}`}function nr(){return"segment ids must be >= 0"}function rr(){return"segment ids are not increasing"}function ir(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function ar(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function or(e,t){let n,r=!1;for(e<=hn?(n=e,r=!0):n=(0,L.lK)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,L.lK)(e,n+1);return n}function sr(e,t,n){const r=[],i=e.length;for(let a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}function cr(e,t,n,r){const i=t.shape.length,a=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const o=e.shape[n],s=[];let c=1,u=1,l=1;for(let t=0;t<r;++t)s.push(e.shape[t]),c*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<i;e++)s.push(t.shape[e]);for(let t=n+1;t<a;t++)s.push(e.shape[t]),l*=e.shape[t];return{batchSize:c,sliceSize:l,outerSize:u,dimSize:o,outputShape:s}}function ur(e){try{return e.map((e=>(0,Pt.decodeString)(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function lr(e){return e.map((e=>(0,Pt.encodeString)(e)))}var dr=n(2982),pr=n(6945),hr=n(3595);!function(){for(const e of Ve)Ee(e)}()},7035:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(6937);class i{static join(e){return new i(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>r.isTypedArray(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),i=new Uint8Array(r);let a=0;for(let r=n;r<this.shards.length;r++){const n=this.shards[r],o=e+a-n.start,s=a,c=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,o,c-o);if(i.set(u,s),a+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=t(e[i]);if(0===a)return i;a<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}},2314:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>x,CY:()=>p,Ej:()=>E,P8:()=>S,Rl:()=>C,Xf:()=>N,aG:()=>d,jf:()=>k,l3:()=>w,oR:()=>I,s5:()=>_,zV:()=>T});var r=n(9538),i=n(61),a=n(1109),o=n(9255),s=n(7035),c=n(7534),u=n(5168);const l=4;async function d(e,t){const n=[],r=[],i=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<i.length;++a){const o=i[a],s=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${s.dtype}`);const c={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+l*t.length,r=new Uint8Array(n);let i=0;for(let e=0;e<t.length;e++){const n=t[e],a=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(a,i),i+=l,r.set(n,i),i+=n.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(c.group=t),n.push(c)}return{data:v(await Promise.all(r)),specs:n}}function p(e,t){const n=new s.D(e),r={};let i=0;for(const e of t){const t=h(e,((e,t)=>n.slice(i+e,i+t)));r[e.name]=m(e,n.slice(i,i+t)),i+=t}return r}function h(e,t){const n=(0,a.Ze)(e.shape);let r;if("quantization"in e){const t=e.quantization;r=o.i[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=l+new Uint32Array(t(e,e+l))[0];return e}r=o.i[e.dtype]}return n*r}async function f(e,t){const n=(0,a.Ze)(e.shape);let r;if("quantization"in e){const t=e.quantization;r=o.i[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=l+new Uint32Array(await t(e,e+l))[0];return e}r=o.i[e.dtype]}return n*r}function m(e,t){const n=e.name,s=e.dtype,c=e.shape,u=(0,a.Ze)(c);let d,p=0;if("quantization"in e){const r=e.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r)||!("scale"in r))throw new Error(`Weight ${e.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==r.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==s)throw new Error(`Weight ${e.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${s}.`)}const i=o.i[r.dtype],a="uint8"===r.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===s)if("uint8"===r.dtype||"uint16"===r.dtype){d=new Float32Array(a.length);for(let e=0;e<a.length;e++){const t=a[e];d[e]=t*r.scale+r.min}}else{if("float16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type float32.`);{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;!(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let i=0;i<r.length;i++){const o=r[i],s=e[n[o>>10]+(1023&o)]+t[o>>10];a[i]=s}return new Float32Array(i)}}();d=e(a)}}else{if("int32"!==s)throw new Error(`Unsupported dtype in weight '${n}': ${s}`);if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw new Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);d=new Int32Array(a.length);for(let e=0;e<a.length;e++){const t=a[e];d[e]=Math.round(t*r.scale+r.min)}}p+=u*i}else if("string"===s){const n=(0,a.Ze)(e.shape);d=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(p,p+l))[0];p+=l;const n=new Uint8Array(t.slice(p,p+e));d.push(n),p+=e}}else{const e=o.i[s];if("float32"===s)d=new Float32Array(t);else if("int32"===s)d=new Int32Array(t);else{if("bool"!==s){if("complex64"===s){d=new Float32Array(t);const e=new Float32Array(d.length/2),n=new Float32Array(d.length/2);for(let t=0;t<e.length;t++)e[t]=d[2*t],n[t]=d[2*t+1];const a=(0,i.O)(e,c,"float32"),o=(0,i.O)(n,c,"float32"),s=(0,r.f)(a,o);return a.dispose(),o.dispose(),s}throw new Error(`Unsupported dtype in weight '${n}': ${s}`)}d=new Uint8Array(t)}p+=u*e}return(0,i.O)(d,c,s)}async function g(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:i}=await e.read();if(t&&null==i){const e=n-r.byteLength;throw new Error(`Reader is done but ${e} bytes are still expected`)}const a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function _(e,t){const n={},r=e.getReader();let i=new ArrayBuffer(0);for(const e of t){const t=await f(e,(async(e,t)=>(i=await g(r,i,t),i.slice(e,t))));i=await g(r,i,t);const o=i.slice(0,t);i=i.slice(t);const s=m(e,o);if(n[e.name]=s,"webgpu"===(0,c.jz)()){const e=(0,c.Hs)();"uploadToGPU"in e&&(0,a.Ze)(s.shape)>=(0,u._K)().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(s.dataId)}}return n}function v(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let i=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}const y="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function b(e){return y?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function w(e){if(y)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}function k(e){if(y){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}function x(e){return s.D.join(e)}function S(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function T(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function C(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function E(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),C(e,n,r)}function I(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:b(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:b(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new s.D(e.weightData).byteLength}}function N(e){const t=[];for(const n of e)t.push(...n.weights);return t}},9255:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},6295:(e,t,n)=>{"use strict";n.d(t,{$dB:()=>R,$jE:()=>nn,$zE:()=>O,A1h:()=>M,A8B:()=>Vt,BK4:()=>vn,BLA:()=>Qe,BRl:()=>ae,Blb:()=>Ut,BoJ:()=>Wt,BxF:()=>de,C8s:()=>qt,CQC:()=>ft,Cg$:()=>Ae,CwD:()=>Ee,D7i:()=>Ct,Ddj:()=>Xt,Dr:()=>yn,DvZ:()=>Yt,E3$:()=>xe,EkD:()=>s,ElG:()=>he,EwU:()=>dn,FAs:()=>sn,FCQ:()=>St,FSt:()=>u,Fin:()=>$t,GZp:()=>Jt,HNs:()=>S,Ik2:()=>k,J3C:()=>Mt,JiE:()=>Dt,Jp_:()=>l,KXH:()=>E,L6G:()=>Ht,LB5:()=>T,LDN:()=>Be,LG0:()=>Ke,LRy:()=>_t,LWX:()=>at,LXA:()=>Pe,M6A:()=>Qt,MRQ:()=>U,Mn0:()=>$,MnK:()=>j,N4F:()=>x,Ncv:()=>dt,O4G:()=>ge,OAQ:()=>be,ODT:()=>ct,OMN:()=>o,ORI:()=>K,PH8:()=>a,P_L:()=>Tt,Pah:()=>ne,PbM:()=>rn,Q6t:()=>gt,QDP:()=>I,QKF:()=>p,Qgm:()=>te,R23:()=>bt,RMm:()=>fn,RUm:()=>Oe,RW8:()=>De,RXX:()=>Ue,SDM:()=>nt,SQl:()=>le,T7M:()=>wn,TBb:()=>cn,TL8:()=>We,TMz:()=>q,TOR:()=>It,ToN:()=>ze,TyE:()=>f,UcO:()=>Zt,VAI:()=>je,VCH:()=>v,Vvy:()=>i,WRv:()=>$e,WT3:()=>Je,WuN:()=>Bt,X$8:()=>H,X0$:()=>Te,X4r:()=>At,XQy:()=>kt,XhZ:()=>_e,XmO:()=>Z,YAb:()=>en,YVe:()=>Ft,ZgB:()=>pe,Zl4:()=>rt,_s9:()=>ie,aAr:()=>bn,awo:()=>_n,bCz:()=>ut,bP9:()=>Q,cHb:()=>qe,cS:()=>y,dFH:()=>jt,dLy:()=>un,dXR:()=>pn,dv8:()=>we,e0f:()=>it,epO:()=>h,fUj:()=>yt,g5A:()=>He,gC7:()=>z,gIW:()=>ke,hVg:()=>Et,hgw:()=>xt,ho8:()=>_,hql:()=>Lt,huO:()=>vt,i5R:()=>fe,iGz:()=>F,iPs:()=>Se,iW0:()=>tn,iuW:()=>on,jAQ:()=>w,jM4:()=>Fe,jOE:()=>wt,jfg:()=>L,jgd:()=>Kt,jj_:()=>B,jxD:()=>X,kdj:()=>pt,l0G:()=>et,l6P:()=>Rt,lLS:()=>ve,lNG:()=>Ye,ljI:()=>r,lxb:()=>g,lzr:()=>ye,mH5:()=>mt,mIA:()=>Ce,mM$:()=>st,mnI:()=>Ie,mxL:()=>me,nVu:()=>Y,nY8:()=>V,nZd:()=>Re,oFs:()=>an,oJ2:()=>ht,ox3:()=>oe,p2J:()=>P,pJc:()=>Nt,pPe:()=>hn,p_m:()=>d,pk0:()=>J,pnw:()=>gn,pr3:()=>A,pyJ:()=>lt,rFG:()=>Gt,rFm:()=>D,rGP:()=>ue,rsH:()=>re,sDr:()=>ee,t3d:()=>Ve,tG8:()=>Ne,tGH:()=>W,u$b:()=>Pt,u8Z:()=>c,uWl:()=>Ot,urI:()=>ot,vI1:()=>zt,vaV:()=>N,vj7:()=>C,wNW:()=>G,wwC:()=>b,wx0:()=>ln,x7F:()=>Xe,xJ3:()=>mn,xu7:()=>Ze,yPW:()=>Me,ySp:()=>Ge,ybN:()=>se,ybj:()=>ce,ylV:()=>tt,zP9:()=>m,zfU:()=>Le});const r="Abs",i="Acos",a="Acosh",o="Add",s="AddN",c="All",u="Any",l="ArgMax",d="ArgMin",p="Asin",h="Asinh",f="Atan",m="Atanh",g="Atan2",_="AvgPool",v="AvgPoolGrad",y="AvgPool3D",b="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",x="Bincount",S="BitwiseAnd",T="BroadcastTo",C="BroadcastArgs",E="Cast",I="Ceil",N="ClipByValue",A="Complex",O="ComplexAbs",R="Concat",P="Conv2D",D="Conv2DBackpropFilter",L="Conv2DBackpropInput",M="Conv3D",F="Conv3DBackpropFilterV2",z="Conv3DBackpropInputV2",$="Cos",j="Cosh",B="Cumprod",V="Cumsum",U="CropAndResize",G="DenseBincount",q="DepthToSpace",W="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",Y="DepthwiseConv2dNativeBackpropInput",K="Diag",X="Dilation2D",Q="Dilation2DBackpropInput",J="Dilation2DBackpropFilter",Z="Draw",ee="RealDiv",te="Einsum",ne="Elu",re="EluGrad",ie="Erf",ae="Equal",oe="Exp",se="ExpandDims",ce="Expm1",ue="FFT",le="Fill",de="FlipLeftRight",pe="Floor",he="FloorDiv",fe="FusedBatchNorm",me="GatherV2",ge="GatherNd",_e="Greater",ve="GreaterEqual",ye="Identity",be="IFFT",we="Imag",ke="IsFinite",xe="IsInf",Se="IsNan",Te="LeakyRelu",Ce="Less",Ee="LessEqual",Ie="LinSpace",Ne="Log",Ae="Log1p",Oe="LogicalAnd",Re="LogicalNot",Pe="LogicalOr",De="LogicalXor",Le="LogSoftmax",Me="LowerBound",Fe="LRN",ze="LRNGrad",$e="MatrixBandPart",je="Max",Be="Maximum",Ve="MaxPool",Ue="MaxPoolGrad",Ge="MaxPool3D",qe="MaxPool3DGrad",We="MaxPoolWithArgmax",He="Mean",Ye="Min",Ke="Minimum",Xe="MirrorPad",Qe="Mod",Je="Multinomial",Ze="Multiply",et="Neg",tt="NotEqual",nt="NonMaxSuppressionV3",rt="NonMaxSuppressionV4",it="NonMaxSuppressionV5",at="OnesLike",ot="OneHot",st="Pack",ct="PadV2",ut="Pool",lt="Pow",dt="Prelu",pt="Prod",ht="RaggedGather",ft="RaggedRange",mt="RaggedTensorToTensor",gt="Range",_t="Real",vt="Reciprocal",yt="Relu",bt="Reshape",wt="ResizeNearestNeighbor",kt="ResizeNearestNeighborGrad",xt="ResizeBilinear",St="ResizeBilinearGrad",Tt="Relu6",Ct="Reverse",Et="Round",It="Rsqrt",Nt="ScatterNd",At="TensorScatterUpdate",Ot="SearchSorted",Rt="Select",Pt="Selu",Dt="Slice",Lt="Sin",Mt="Sinh",Ft="Sign",zt="Sigmoid",$t="Softplus",jt="Sqrt",Bt="Sum",Vt="SpaceToBatchND",Ut="SplitV",Gt="Softmax",qt="SparseFillEmptyRows",Wt="SparseReshape",Ht="SparseSegmentMean",Yt="SparseSegmentSum",Kt="SparseToDense",Xt="SquaredDifference",Qt="Square",Jt="StaticRegexReplace",Zt="StridedSlice",en="StringNGrams",tn="StringSplit",nn="StringToHashBucketFast",rn="Sub",an="Tan",on="Tanh",sn="Tile",cn="TopK",un="Transform",ln="Transpose",dn="Unique",pn="Unpack",hn="UnsortedSegmentSum",fn="UpperBound",mn="ZerosLike",gn="Step",_n="FromPixels",vn="RotateWithOffset",yn="_FusedMatMul",bn="FusedConv2D",wn="FusedDepthwiseConv2D"},6244:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>m,Op:()=>l,_5:()=>c,iP:()=>h,kr:()=>p,rY:()=>f,tA:()=>d,vQ:()=>u});var r=n(5168),i=n(3529),a=n(5883);const o=(0,i.m)("kernelRegistry",(()=>new Map)),s=(0,i.m)("gradRegistry",(()=>new Map));function c(e,t){const n=g(e,t);return o.get(n)}function u(e){return s.get(e)}function l(e){const t=o.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===e&&n.push(o)}return n}function d(e){const{kernelName:t,backendName:n}=e,r=g(t,n);o.has(r)&&a.i(`The kernel '${t}' for backend '${n}' is already registered`),o.set(r,e)}function p(e){const{kernelName:t}=e;s.has(t)&&(0,r._K)().getBool("DEBUG")&&a.i(`Overriding the gradient for '${t}'`),s.set(t,e)}function h(e,t){const n=g(e,t);if(!o.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);o.delete(n)}function f(e){if(!s.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);s.delete(e)}function m(e,t){l(e).forEach((e=>{d(Object.assign({},e,{backendName:t}))}))}function g(e,t){return`${t}_${e}`}},5883:(e,t,n)=>{"use strict";n.d(t,{R:()=>a,i:()=>i});var r=n(5168);function i(...e){(0,r._K)().getBool("IS_TEST")||(0,r._K)().getBool("PROD")||console.warn(...e)}function a(...e){(0,r._K)().getBool("IS_TEST")||(0,r._K)().getBool("PROD")||console.log(...e)}},8598:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({abs_:function(e){const t=(0,a.YT)(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r.T2.runKernel(i.$zE,e)}{const e={x:t};return r.T2.runKernel(i.ljI,e)}}})},458:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({acos_:function(e){const t={x:(0,a.YT)(e,"x","acos")};return r.T2.runKernel(i.Vvy,t)}})},24:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({acosh_:function(e){const t={x:(0,a.YT)(e,"x","acosh")};return r.T2.runKernel(i.PH8,t)}})},2377:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({add_:function(e,t){let n=(0,o.YT)(e,"a","add"),s=(0,o.YT)(t,"b","add");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.OMN,c)}})},5609:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({all_:function(e,t=null,n=!1){const o={x:(0,a.YT)(e,"x","all","bool")},s={axis:t,keepDims:n};return r.T2.runKernel(i.u8Z,o,s)}})},408:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({any_:function(e,t=null,n=!1){const o={x:(0,a.YT)(e,"x","any","bool")},s={axis:t,keepDims:n};return r.T2.runKernel(i.FSt,o,s)}})},7923:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({argMax_:function(e,t=0){const n={x:(0,a.YT)(e,"x","argMax")},o={axis:t};return r.T2.runKernel(i.Jp_,n,o)}})},1873:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({argMin_:function(e,t=0){const n={x:(0,a.YT)(e,"x","argMin")},o={axis:t};return r.T2.runKernel(i.p_m,n,o)}})},9715:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({asin_:function(e){const t={x:(0,a.YT)(e,"x","asin")};return r.T2.runKernel(i.QKF,t)}})},2763:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({asinh_:function(e){const t={x:(0,a.YT)(e,"x","asinh")};return r.T2.runKernel(i.epO,t)}})},5754:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({atan_:function(e){const t={x:(0,a.YT)(e,"x","atan")};return r.T2.runKernel(i.TyE,t)}})},3386:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({atan2_:function(e,t){let n=(0,o.YT)(e,"a","atan2"),s=(0,o.YT)(t,"b","atan2");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.lxb,c)}})},9800:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({atanh_:function(e){const t={x:(0,a.YT)(e,"x","atanh")};return r.T2.runKernel(i.zP9,t)}})},107:(e,t,n)=>{"use strict";n.d(t,{$:()=>d});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(9339),c=n(9397),u=n(7839),l=n(5556);const d=(0,u.op)({avgPool_:function(e,t,n,u,d){const p=(0,a.YT)(e,"x","avgPool","float32");o.vA(c.G0(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let h=p,f=!1;3===p.rank&&(f=!0,h=(0,l.t)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.vA(4===h.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${h.rank}.`)),c.s_("avgPool",u,d);const m={x:h},g={filterSize:t,strides:n,pad:u,dimRoundingMode:d};let _=r.T2.runKernel(i.ho8,m,g);return _=(0,s.w)(_,p.dtype),f?(0,l.t)(_,[_.shape[1],_.shape[2],_.shape[3]]):_}})},5596:(e,t,n)=>{"use strict";n.d(t,{Em:()=>u,SM:()=>s,WC:()=>c,WH:()=>i,aF:()=>a,fK:()=>d,gx:()=>l,lb:()=>o});var r=n(1109);function i(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function a(e,t,n){const r=e.length+t.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[a++]):i.push(t[o++]);return i}function o(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((t=>e[t]))]}function s(e,t){return a(e,t.map((e=>1)),t)}function c(e,t,n){r.vA(i(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function u(e,t){if(i(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function l(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function d(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},7478:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({batchToSpaceND_:function(e,t,n){const s=(0,a.YT)(e,"x","batchToSpaceND"),c=t.reduce(((e,t)=>e*t));o.vA(s.rank>=1+t.length,(()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`)),o.vA(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),o.vA(s.shape[0]%c==0,(()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${c}`));const u={x:s},l={blockShape:t,crops:n};return r.T2.runKernel(i.Ik2,u,l)}})},6686:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(5556);const c=(0,n(7839).op)({batchNorm_:function(e,t,n,c,u,l){null==l&&(l=.001);const d=(0,a.YT)(e,"x","batchNorm"),p=(0,a.YT)(t,"mean","batchNorm"),h=(0,a.YT)(n,"variance","batchNorm");let f,m;null!=u&&(f=(0,a.YT)(u,"scale","batchNorm")),null!=c&&(m=(0,a.YT)(c,"offset","batchNorm")),o.vA(p.rank===h.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),o.vA(null==m||p.rank===m.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),o.vA(null==f||p.rank===f.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const g={x:function(e){let t;return t=0===e.rank||1===e.rank?(0,s.t)(e,[1,1,1,e.size]):2===e.rank?(0,s.t)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,s.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(d),scale:f,offset:m,mean:p,variance:h},_={varianceEpsilon:l},v=r.T2.runKernel(i.i5R,g,_);return(0,s.t)(v,d.shape)}})},4789:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(2719),c=n(7839),u=n(5556);const l=(0,c.op)({broadcastTo_:function(e,t){let n=(0,a.YT)(e,"broadcastTo","x");const c=n.shape;if((0,o.SA)(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=(0,u.t)(n,e)}const l=n.shape,d=Array.from(t);for(let e=t.length-1;e>=0;e--)if(l[e]===t[e])d[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${t}].`);if(0===d.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return(0,s.o)(n);const p={x:n},h={reps:d};return r.T2.runKernel(i.FAs,p,h)}})},7600:(e,t,n)=>{"use strict";function r(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=e[a]||1;(t[t.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function i(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],a=t.length-r-1,o=t[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function a(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let a=e[e.length-i-1];null==a&&(a=1);let o=t[t.length-i-1];if(null==o&&(o=1),1===a)r[n-i-1]=o;else if(1===o)r[n-i-1]=a;else{if(a!==o){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-i-1]=a}}return r}n.r(t),n.d(t,{assertAndGetBroadcastShape:()=>a,getBroadcastDims:()=>r,getReductionAxes:()=>i})},5826:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(5225),i=n(1109);function a(e,t="float32",n){return t=t||"float32",i.SA(e),new r.yl(e,t,n)}},9339:(e,t,n)=>{"use strict";n.d(t,{w:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({cast_:function(e,t){const n=(0,a.YT)(e,"x","cast");if(!o.xn(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const s={x:n},c={dtype:t};return r.T2.runKernel(i.KXH,s,c)}})},2653:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({ceil_:function(e){const t={x:(0,a.YT)(e,"x","ceil","float32")};return r.T2.runKernel(i.QDP,t)}})},8421:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(2733);const c=(0,n(7839).op)({clipByValue_:function(e,t,n){const c=(0,a.YT)(e,"x","clipByValue");if(o.vA(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return(0,s.G)(c.shape,t,c.dtype);const u={x:c},l={clipValueMin:t,clipValueMax:n};return r.T2.runKernel(i.vaV,u,l)}})},2719:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({clone_:function(e){const t={x:(0,a.YT)(e,"x","clone","string_or_numeric")};return r.T2.runKernel(i.lzr,t)}})},9538:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({complex_:function(e,t){const n=(0,a.YT)(e,"real","complex"),s=(0,a.YT)(t,"imag","complex");o.O3(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const c={real:n,imag:s};return r.T2.runKernel(i.pr3,c)}})},1448:(e,t,n)=>{"use strict";n.d(t,{x:()=>c});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(2719);const c=(0,n(7839).op)({concat_:function(e,t=0){(0,o.vA)(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=(0,a.j1)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return(0,s.o)(n[0]);const c=n,u={axis:t};return r.T2.runKernel(i.$dB,c,u)}})},1279:(e,t,n)=>{"use strict";n.d(t,{k:()=>u});var r=n(9031),i=n(1109),a=n(2736),o=n(9397),s=n(7839),c=n(5556);const u=(0,s.op)({conv1d_:function(e,t,n,s,u="NWC",l=1,d){const p=(0,r.YT)(e,"x","conv1d"),h=(0,r.YT)(t,"filter","conv1d");let f=p,m=!1;2===p.rank&&(m=!0,f=(0,c.t)(p,[1,p.shape[0],p.shape[1]])),i.vA(3===f.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`)),i.vA(3===h.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${h.rank}.`)),o.s_("conv1d",s,d),i.vA(f.shape[2]===h.shape[1],(()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${h.shape[1]}.`)),i.vA(o.G0(n,l),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${l}'`)),i.vA(o.qk(l),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),i.vA(o.qk(n),(()=>"Error in conv1D: Stride should be larger than 0.")),i.vA("NWC"===u,(()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`));const g=(0,c.t)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),_=(0,c.t)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),v=[1,n],y=[1,l],b=(0,a.X)(_,g,v,s,"NHWC",y,d);return m?(0,c.t)(b,[b.shape[2],b.shape[3]]):(0,c.t)(b,[b.shape[0],b.shape[2],b.shape[3]])}})},2736:(e,t,n)=>{"use strict";n.d(t,{X:()=>l});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(9397),c=n(7839),u=n(5556);const l=(0,c.op)({conv2d_:function(e,t,n,c,l="NHWC",d=[1,1],p){const h=(0,a.YT)(e,"x","conv2d","float32"),f=(0,a.YT)(t,"filter","conv2d","float32");let m=h,g=!1;3===h.rank&&(g=!0,m=(0,u.t)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.vA(4===m.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`)),o.vA(4===f.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${f.rank}.`)),s.s_("conv2d",c,p);const _="NHWC"===l?m.shape[3]:m.shape[1];o.vA(_===f.shape[2],(()=>`Error in conv2d: depth of input (${_}) must match input depth for filter ${f.shape[2]}.`)),o.vA(s.G0(n,d),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`)),o.vA(s.qk(d),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),o.vA(s.qk(n),(()=>"Error in conv2D: Strides should be larger than 0."));const v={x:m,filter:f},y={strides:n,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p},b=r.T2.runKernel(i.p2J,v,y);return g?(0,u.t)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},9018:(e,t,n)=>{"use strict";n.d(t,{H:()=>u});var r=n(2215),i=n(6295),a=n(1109),o=n(9397),s=n(7839),c=n(5556);const u=(0,s.op)({conv2DBackpropFilter_:function(e,t,n,s,u,l="NHWC",d){let p=e;3===e.rank&&(p=(0,c.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h=t;3===h.rank&&(h=(0,c.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),a.vA(4===p.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${p.shape}.`)),a.vA(4===h.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${h.shape}.`)),a.vA(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const f="NHWC"===l?p.shape[3]:p.shape[1],m="NHWC"===l?h.shape[3]:h.shape[1];a.vA(f===n[2],(()=>`Error in conv2dDerFilter: depth of input ${f}) must match input depth in filter (${n[2]}.`)),a.vA(m===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${n[3]}).`)),o.s_("conv2dDerFilter",u,d);const g={x:p,dy:h},_={strides:s,pad:u,dataFormat:l,dimRoundingMode:d,filterShape:n};return r.T2.runKernel(i.rFm,g,_)}})},9833:(e,t,n)=>{"use strict";n.d(t,{v:()=>u});var r=n(2215),i=n(6295),a=n(1109),o=n(9397),s=n(7839),c=n(5556);const u=(0,s.op)({conv2DBackpropInput_:function(e,t,n,s,u,l="NHWC",d){a.vA(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let p=e,h=t,f=!1;3===t.rank&&(f=!0,h=(0,c.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),p=[1,e[0],e[1],e[2]]),a.vA(4===p.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${p.length}.`)),a.vA(4===h.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${h.rank}`)),a.vA(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const m="NHWC"===l?p[3]:p[1],g="NHWC"===l?h.shape[3]:h.shape[1];a.vA(m===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${n.shape[2]}.`)),a.vA(g===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${n.shape[3]}.`)),o.s_("conv2dDerInput",u,d);const _={dy:h,filter:n},v={strides:s,pad:u,dataFormat:l,dimRoundingMode:d,inputShape:p},y=r.T2.runKernel(i.jfg,_,v);return f?(0,c.t)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}})},6224:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9031),i=n(9833);const a=(0,n(7839).op)({conv2dTranspose_:function(e,t,n,a,o,s){const c=(0,r.YT)(e,"x","conv2dTranspose"),u=(0,r.YT)(t,"filter","conv2dTranspose");return(0,i.v)(n,c,u,a,o,"NHWC",s)}})},4633:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r=n(2215),i=n(6295),a=n(1109),o=n(7839),s=n(5556);const c=(0,o.op)({conv3DBackpropInput_:function(e,t,n,o,c){a.vA(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let u=e,l=t,d=!1;4===t.rank&&(d=!0,l=(0,s.t)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),u=[1,e[0],e[1],e[2],e[3]]);const p=u[4],h=l.shape[4];a.vA(5===u.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${u.length}.`)),a.vA(5===l.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${l.rank}`)),a.vA(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),a.vA(p===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${p}) must match input depth for filter ${n.shape[3]}.`)),a.vA(h===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[4]}.`));const f={dy:l,filter:n},m={pad:c,strides:o,inputShape:u},g=r.T2.runKernel(i.gC7,f,m);return d?(0,s.t)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},9397:(e,t,n)=>{"use strict";n.d(t,{$Q:()=>_,Dh:()=>f,E6:()=>a,G0:()=>m,G8:()=>u,YQ:()=>i,l5:()=>o,p$:()=>c,qk:()=>g,s_:()=>v,uf:()=>s});var r=n(1109);function i(e,t,n,r,i="NHWC",a){return s(e,[...t,e[3]],n,a,r,null,null,_(i))}function a(e,t,n,r,i,a,o="channelsLast"){const[c,u]=l(t);let d;if("channelsLast"===o)d=[c,u,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);d=[c,u,e[1],e[1]]}return s(e,d,n,r,i,a,!1,o)}function o(e,t,n,r,i,a,o="NDHWC"){const[s,u,l]=d(t);let p,h;if("NDHWC"===o)h="channelsLast",p=[s,u,l,e[4],e[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);h="channelsFirst",p=[s,u,l,e[1],e[1]]}return c(e,p,n,r,i,!1,h,a)}function s(e,t,n,r,i,a,o=!1,s="channelsLast"){let[c,d,f,m]=[-1,-1,-1,-1];if("channelsLast"===s)[c,d,f,m]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[c,m,d,f]=e}const[g,_,,v]=t,[y,b]=l(n),[w,k]=l(r),x=p(g,w),S=p(_,k),{padInfo:T,outHeight:C,outWidth:E}=function(e,t,n,r,i,a,o,s,c){let l,d,p;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=u(e,t,n));const a=e[0],o=e[1],s=h((a-t+2*r)/n+1,i),c=h((o-t+2*r)/n+1,i);return[s,c]}([t,n],a,r,e,s);d=i[0],p=i[1]}else if("same"===e){d=Math.ceil(t/r),p=Math.ceil(n/i);const e=Math.max(0,(d-1)*r+a-t),s=Math.max(0,(p-1)*i+o-n),c=Math.floor(e/2),u=e-c,h=Math.floor(s/2);l={top:c,bottom:u,left:h,right:s-h,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-a+1)/r),p=Math.ceil((n-o+1)/i);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const u="channelsLast"===c?e[1][0]:e[2][0],f="channelsLast"===c?e[1][1]:e[2][1],m="channelsLast"===c?e[2][0]:e[3][0],g="channelsLast"===c?e[2][1]:e[3][1];l={top:u,bottom:f,left:m,right:g,type:0===u&&0===f&&0===m&&0===g?"VALID":"EXPLICIT"},d=h((t-a+u+f)/r+1,s),p=h((n-o+m+g)/i+1,s)}}return{padInfo:l,outHeight:d,outWidth:p}}(i,d,f,y,b,x,S,a,s),I=o?v*m:v;let N;return"channelsFirst"===s?N=[c,I,C,E]:"channelsLast"===s&&(N=[c,C,E,I]),{batchSize:c,dataFormat:s,inHeight:d,inWidth:f,inChannels:m,outHeight:C,outWidth:E,outChannels:I,padInfo:T,strideHeight:y,strideWidth:b,filterHeight:g,filterWidth:_,effectiveFilterHeight:x,effectiveFilterWidth:S,dilationHeight:w,dilationWidth:k,inShape:e,outShape:N,filterShape:t}}function c(e,t,n,r,i,a=!1,o="channelsLast",s){let[c,l,f,m,g]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[c,l,f,m,g]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[c,g,l,f,m]=e}const[_,v,y,,b]=t,[w,k,x]=d(n),[S,T,C]=d(r),E=p(_,S),I=p(v,T),N=p(y,C),{padInfo:A,outDepth:O,outHeight:R,outWidth:P}=function(e,t,n,r,i,a,o,s,c,l,d){let p,f,m,g;"valid"===e&&(e=0);if("number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const _=function(e,t,n,r,i,a){null==i&&(i=u(e,t[0],r[0]));const o=[0,0,0,n];for(let n=0;n<3;n++)e[n]+2*i>=t[n]&&(o[n]=h((e[n]-t[n]+2*i)/r[n]+1,a));return o}([t,n,r,1],[s,c,l],1,[i,a,o],e,d);f=_[0],m=_[1],g=_[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{f=Math.ceil(t/i),m=Math.ceil(n/a),g=Math.ceil(r/o);const e=(f-1)*i+s-t,u=(m-1)*a+c-n,d=(g-1)*o+l-r,h=Math.floor(e/2),_=e-h,v=Math.floor(u/2),y=u-v,b=Math.floor(d/2);p={top:v,bottom:y,left:b,right:d-b,front:h,back:_,type:"SAME"}}}return{padInfo:p,outDepth:f,outHeight:m,outWidth:g}}(i,l,f,m,w,k,x,E,I,N,s),D=a?b*g:b;let L;return"channelsFirst"===o?L=[c,D,O,R,P]:"channelsLast"===o&&(L=[c,O,R,P,D]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:f,inWidth:m,inChannels:g,outDepth:O,outHeight:R,outWidth:P,outChannels:D,padInfo:A,strideDepth:w,strideHeight:k,strideWidth:x,filterDepth:_,filterHeight:v,filterWidth:y,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:N,dilationDepth:S,dilationHeight:T,dilationWidth:C,inShape:e,outShape:L,filterShape:t}}function u(e,t,n,r=1){const i=p(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function l(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"==typeof e?[e,e,e]:e}function p(e,t){return t<=1?e:e+(e-1)*(t-1)}function h(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function f(e){const[t,n,r]=l(e);return 1===t&&1===n&&1===r}function m(e,t){return f(e)||f(t)}function g(e){return l(e).every((e=>e>0))}function _(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function v(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)r.vA(r.E6(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{r.vA(r.E6(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}},8093:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({cos_:function(e){const t={x:(0,a.YT)(e,"x","cos","float32")};return r.T2.runKernel(i.Mn0,t)}})},6505:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({cosh_:function(e){const t={x:(0,a.YT)(e,"x","cosh","float32")};return r.T2.runKernel(i.MnK,t)}})},8424:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({cumprod_:function(e,t=0,n=!1,o=!1){const s={x:(0,a.YT)(e,"x","cumprod")},c={axis:t,exclusive:n,reverse:o};return r.T2.runKernel(i.jj_,s,c)}})},5362:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({cumsum_:function(e,t=0,n=!1,o=!1){const s={x:(0,a.YT)(e,"x","cumsum")},c={axis:t,exclusive:n,reverse:o};return r.T2.runKernel(i.nY8,s,c)}})},3846:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({depthToSpace_:function(e,t,n="NHWC"){const s=(0,a.YT)(e,"x","depthToSpace","float32"),c="NHWC"===n?s.shape[1]:s.shape[2],u="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];o.vA(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),o.vA(c*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${c} and ${t}  for depthToSpace with input shape\n    ${s.shape}`)),o.vA(u*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${t} for depthToSpace with input shape\n        ${s.shape}`)),o.vA(l%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${l} for depthToSpace with input shape ${s.shape}`));const d={x:s},p={blockSize:t,dataFormat:n};return r.T2.runKernel(i.TMz,d,p)}})},5510:(e,t,n)=>{"use strict";n.d(t,{G:()=>l});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(9397),c=n(7839),u=n(5556);const l=(0,c.op)({depthwiseConv2d_:function(e,t,n,c,l="NHWC",d=[1,1],p){const h=(0,a.YT)(e,"x","depthwiseConv2d","float32"),f=(0,a.YT)(t,"filter","depthwiseConv2d","float32");let m=h,g=!1;3===h.rank&&(g=!0,m=(0,u.t)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.vA(4===m.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`)),o.vA(4===f.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`));const _="NHWC"===l?m.shape[3]:m.shape[1];o.vA(_===f.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${_}) must match the inChannels dimension in filter ${f.shape[2]}.`)),s.s_("depthwiseConv2d",c,p);const v={x:m,filter:f},y={strides:n,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p},b=r.T2.runKernel(i.tGH,v,y);return g?(0,u.t)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},6952:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(2215),i=n(6295),a=n(7839),o=n(5556);const s=(0,a.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,s,c=[1,1],u){let l=e;3===e.rank&&(l=(0,o.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let d=t;3===d.rank&&(d=(0,o.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const p={x:l,dy:d},h={strides:a,pad:s,dimRoundingMode:u,dilations:c,filterShape:n};return r.T2.runKernel(i.X$8,p,h)}})},5524:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var r=n(2215),i=n(6295),a=n(7839),o=n(5556);const s=(0,a.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,s,c=[1,1],u){let l=t,d=!1;3===t.rank&&(d=!0,l=(0,o.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const p={dy:l,filter:n},h={strides:a,pad:s,dimRoundingMode:u,dilations:c,inputShape:e},f=r.T2.runKernel(i.nVu,p,h);return d?(0,o.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},5608:(e,t,n)=>{"use strict";n.d(t,{X:()=>u});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(7839),c=n(5556);const u=(0,s.op)({dilation2d_:function(e,t,n,s,u=[1,1],l="NHWC"){const d=(0,a.YT)(e,"x","dilation2d"),p=(0,a.YT)(t,"filter","dilation2d");o.vA(3===d.rank||4===d.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${d.rank}.`)),o.vA(3===p.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${p.rank}.`)),o.vA("NHWC"===l,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${l}`));let h=d,f=!1;3===d.rank&&(h=(0,c.t)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),f=!0),o.vA(h.shape[3]===p.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${h.shape[3]} vs ${p.shape[2]}`));const m={x:h,filter:p},g={strides:n,pad:s,dilations:u},_=r.T2.runKernel(i.jxD,m,g);return f?(0,c.t)(_,[_.shape[1],_.shape[2],_.shape[3]]):_}})},4425:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(1021);const c=(0,n(7839).op)({div_:function(e,t){let n=(0,o.YT)(e,"a","div"),c=(0,o.YT)(t,"b","div");if([n,c]=(0,a.makeTypesMatch)(n,c),"int32"===n.dtype&&"int32"===c.dtype)return(0,s.w)(n,c);const u={a:n,b:c};return r.T2.runKernel(i.sDr,u,{})}})},9541:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var r=n(2067),i=n(9031),a=n(4425),o=n(1042),s=n(7839),c=n(7133),u=n(3107);const l=(0,s.op)({divNoNan_:function(e,t){let n=(0,i.YT)(e,"a","div"),s=(0,i.YT)(t,"b","div");[n,s]=(0,r.makeTypesMatch)(n,s);const l=(0,a.y)(n,s),d=(0,u.P)(l),p=(0,o.L)(s,d);return(0,c._)(p,d,l)}})},7241:(e,t,n)=>{"use strict";n.d(t,{O:()=>c});var r=n(9031),i=n(1109),a=n(7041),o=n(7839),s=n(5556);const c=(0,o.op)({dot_:function(e,t){const n=(0,r.YT)(e,"t1","dot"),o=(0,r.YT)(t,"t2","dot");i.vA(!(1!==n.rank&&2!==n.rank||1!==o.rank&&2!==o.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`));const c=1===n.rank?n.size:n.shape[1],u=1===o.rank?o.size:o.shape[0];if(i.vA(c===u,(()=>`Error in dot: inner dimensions of inputs must match, but got ${c} and ${u}.`)),1===n.rank&&1===o.rank){const e=(0,s.t)(n,[1,-1]),t=(0,s.t)(o,[-1,1]),r=(0,a.N)(e,t);return(0,s.t)(r,[])}if(1===n.rank&&2===o.rank){const e=(0,s.t)(n,[1,-1]),t=(0,s.t)(o,[o.shape[0],o.shape[1]]),r=(0,a.N)(e,t);return(0,s.t)(r,[r.size])}if(2===n.rank&&1===o.rank){const e=(0,s.t)(o,[-1,1]),t=(0,a.N)(n,e);return(0,s.t)(t,[t.size])}{const e=(0,s.t)(o,[o.shape[0],o.shape[1]]);return(0,a.N)(n,e)}}})},3790:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({elu_:function(e){const t={x:(0,a.YT)(e,"x","elu","float32")};return r.T2.runKernel(i.Pah,t)}})},1042:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({equal_:function(e,t){let n=(0,o.YT)(e,"a","equal","string_or_numeric"),c=(0,o.YT)(t,"b","equal","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.BRl,u)}})},9037:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(9339);const c=(0,n(7839).op)({erf_:function(e){let t=(0,a.YT)(e,"x","erf");o.vA("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=(0,s.w)(t,"float32"));const n={x:t};return r.T2.runKernel(i._s9,n)}})},1419:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var r=n(1978);const i=(0,n(7839).op)({euclideanNorm_:function(e,t=null,n=!1){return(0,r.x)(e,"euclidean",t,n)}})},5117:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({exp_:function(e){const t={x:(0,a.YT)(e,"x","exp")};return r.T2.runKernel(i.ox3,t)}})},5160:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({expandDims_:function(e,t=0){const n=(0,a.YT)(e,"x","expandDims","string_or_numeric");o.vA(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const s={input:n},c={dim:t};return r.T2.runKernel(i.ybN,s,c)}})},1675:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({expm1_:function(e){const t={x:(0,a.YT)(e,"x","expm1")};return r.T2.runKernel(i.ybj,t)}})},2733:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var r=n(2215),i=n(6295),a=n(1109);function o(e,t,n){(0,a.SA)(e);const o={shape:e,value:t,dtype:n=n||(0,a.X$)(t)};return r.T2.runKernel(i.SQl,{},o)}},7412:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({floor_:function(e){const t={x:(0,a.YT)(e,"x","floor","float32")};return r.T2.runKernel(i.ZgB,t)}})},1021:(e,t,n)=>{"use strict";n.d(t,{w:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({floorDiv_:function(e,t){let n=(0,o.YT)(e,"a","floorDiv"),s=(0,o.YT)(t,"b","floorDiv");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.ElG,c)}})},5932:(e,t,n)=>{"use strict";n.d(t,{Do:()=>m,XB:()=>f,f2:()=>g,zE:()=>_});var r=n(7600),i=n(3790),a=n(2869),o=n(7544),s=n(1212),c=n(8662),u=n(8757),l=n(5556),d=n(8453),p=n(794),h=n(4857);function f(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,o.l)(e,(0,p.P)(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function m(e,t){let n=t;const i=r.getReductionAxes(e.shape,t.shape);return i.length>0&&(n=(0,h.c)(n,i)),(0,l.t)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,c.V)(e);if("elu"===t)return(0,i.P)(e);if("relu6"===t)return(0,u.j)(e);if("prelu"===t)return(0,s.N)(e,n);if("leakyrelu"===t)return(0,a.H)(e,r);if("sigmoid"===t)return(0,d.r)(e);throw new Error(`Unknown fused activation ${t}.`)}const _=(e,t)=>!(e>0)||"linear"===t},7047:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({gather_:function(e,t,n=0,o=0){const s={x:(0,a.YT)(e,"x","gather"),indices:(0,a.YT)(t,"indices","gather","int32")},c={axis:n,batchDims:o};return r.T2.runKernel(i.mxL,s,c)}})},7724:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({greater_:function(e,t){let n=(0,o.YT)(e,"a","greater","string_or_numeric"),c=(0,o.YT)(t,"b","greater","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.XhZ,u)}})},1031:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({greaterEqual_:function(e,t){let n=(0,o.YT)(e,"a","greaterEqual","string_or_numeric"),c=(0,o.YT)(t,"b","greaterEqual","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.lLS,u)}})},1374:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({imag_:function(e){const t={input:(0,a.YT)(e,"input","imag")};return r.T2.runKernel(i.dv8,t)}})},4081:(e,t,n)=>{"use strict";n.d(t,{v:()=>u});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(7839),c=n(5556);const u=(0,s.op)({resizeBilinear_:function(e,t,n=!1,s=!1){const u=(0,a.YT)(e,"images","resizeBilinear");o.vA(3===u.rank||4===u.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${u.rank}.`)),o.vA(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),o.vA(!1===s||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let l=u,d=!1;3===u.rank&&(d=!0,l=(0,c.t)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[]=t,p={images:l},h={alignCorners:n,halfPixelCenters:s,size:t},f=r.T2.runKernel(i.hgw,p,h);return d?(0,c.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},6052:(e,t,n)=>{"use strict";n.d(t,{b:()=>u});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(7839),c=n(5556);const u=(0,s.op)({resizeNearestNeighbor_:function(e,t,n=!1,s=!1){const u=(0,a.YT)(e,"images","resizeNearestNeighbor");o.vA(3===u.rank||4===u.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${u.rank}.`)),o.vA(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),o.vA("float32"===u.dtype||"int32"===u.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),o.vA(!1===s||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let l=u,d=!1;3===u.rank&&(d=!0,l=(0,c.t)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[]=t,p={images:l},h={alignCorners:n,halfPixelCenters:s,size:t},f=r.T2.runKernel(i.jOE,p,h);return d?(0,c.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},1580:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({isFinite_:function(e){const t={x:(0,a.YT)(e,"x","isFinite")};return r.T2.runKernel(i.gIW,t)}})},112:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({isInf_:function(e){const t={x:(0,a.YT)(e,"x","isInf")};return r.T2.runKernel(i.E3$,t)}})},6094:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({isNaN_:function(e){const t={x:(0,a.YT)(e,"x","isNaN")};return r.T2.runKernel(i.iPs,t)}})},2869:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({leakyRelu_:function(e,t=.2){const n={x:(0,a.YT)(e,"x","leakyRelu")},o={alpha:t};return r.T2.runKernel(i.X0$,n,o)}})},9553:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({less_:function(e,t){let n=(0,o.YT)(e,"a","less","string_or_numeric"),c=(0,o.YT)(t,"b","less","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.mIA,u)}})},3274:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({lessEqual_:function(e,t){let n=(0,o.YT)(e,"a","lessEqual","string_or_numeric"),c=(0,o.YT)(t,"b","lessEqual","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.CwD,u)}})},7361:(e,t,n)=>{"use strict";n.d(t,{K:()=>u});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(7839),c=n(5556);const u=(0,s.op)({localResponseNormalization_:function(e,t=5,n=1,s=1,u=.5){const l=(0,a.YT)(e,"x","localResponseNormalization");o.vA(4===l.rank||3===l.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`)),o.vA(o.E6(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let d=l,p=!1;3===l.rank&&(p=!0,d=(0,c.t)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const h={x:d},f={depthRadius:t,bias:n,alpha:s,beta:u},m=r.T2.runKernel(i.jM4,h,f);return p?(0,c.t)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},3800:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({log_:function(e){const t={x:(0,a.YT)(e,"x","log","float32")};return r.T2.runKernel(i.tG8,t)}})},7589:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({log1p_:function(e){const t={x:(0,a.YT)(e,"x","log1p")};return r.T2.runKernel(i.Cg$,t)}})},6843:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var r=n(3376),i=n(9031),a=n(7544),o=n(168),s=n(7839),c=n(8453),u=n(4224);const l=(0,s.op)({logSigmoid_:function(e){const t=(0,i.YT)(e,"x","logSigmoid");return(0,r._X)((e=>({value:(0,o.H)((0,u.l)((0,o.H)(e))),gradFunc:t=>(0,a.l)(t,(0,c.r)((0,o.H)(e)))})))(t)}})},8045:(e,t,n)=>{"use strict";n.d(t,{H:()=>h});var r=n(3376),i=n(9031),a=n(9339),o=n(5117),s=n(3800),c=n(3232),u=n(7544),l=n(7839),d=n(6964),p=n(4857);const h=(0,l.op)({logSoftmax_:function(e,t=-1){const n=(0,i.YT)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return(0,r._X)(((e,n)=>{const r=(0,c.T)(e,t,!0),i=(0,d.j)(e,r),l=(0,d.j)((0,a.w)(i,"float32"),(0,s.R)((0,p.c)((0,o.o)(i),t,!0)));n([l]);return{value:l,gradFunc:(e,n)=>{const[r]=n,i=(0,o.o)(r);return(0,d.j)(e,(0,u.l)((0,p.c)(e,t,!0),i))}}}))(n)}})},4460:(e,t,n)=>{"use strict";n.d(t,{V:()=>f});var r=n(9031),i=n(1109),a=n(2377),o=n(5596),s=n(5117),c=n(3800),u=n(3232),l=n(7839),d=n(5556),p=n(6964),h=n(4857);const f=(0,l.op)({logSumExp_:function(e,t=null,n=!1){const l=(0,r.YT)(e,"x","logSumExp"),f=(0,i.Y6)(t,l.shape),m=(0,u.T)(l,f,!0),g=(0,p.j)(l,m),_=(0,s.o)(g),v=(0,h.c)(_,f),y=(0,c.R)(v),b=(0,a.W)((0,d.t)(m,y.shape),y);if(n){const e=(0,o.SM)(b.shape,f);return(0,d.t)(b,e)}return b}})},1303:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(7600);const s=(0,n(7839).op)({logicalAnd_:function(e,t){const n=(0,a.YT)(e,"a","logicalAnd","bool"),s=(0,a.YT)(t,"b","logicalAnd","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);const c={a:n,b:s};return r.T2.runKernel(i.RUm,c)}})},5895:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({logicalNot_:function(e){const t={x:(0,a.YT)(e,"x","logicalNot","bool")};return r.T2.runKernel(i.nZd,t)}})},7777:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(7600);const s=(0,n(7839).op)({logicalOr_:function(e,t){const n=(0,a.YT)(e,"a","logicalOr","bool"),s=(0,a.YT)(t,"b","logicalOr","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);const c={a:n,b:s};return r.T2.runKernel(i.LXA,c)}})},8025:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(9031),i=n(7600),a=n(1303),o=n(5895),s=n(7777);const c=(0,n(7839).op)({logicalXor_:function(e,t){const n=(0,r.YT)(e,"a","logicalXor","bool"),c=(0,r.YT)(t,"b","logicalXor","bool");return(0,i.assertAndGetBroadcastShape)(n.shape,c.shape),(0,a.n)((0,s.z)(e,t),(0,o.N)((0,a.n)(e,t)))}})},5302:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},7041:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({matMul_:function(e,t,n=!1,s=!1){let c=(0,o.YT)(e,"a","matMul"),u=(0,o.YT)(t,"b","matMul");[c,u]=(0,a.makeTypesMatch)(c,u);const l={a:c,b:u},d={transposeA:n,transposeB:s};return r.T2.runKernel(i.jAQ,l,d)}})},3232:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({max_:function(e,t=null,n=!1){const o={x:(0,a.YT)(e,"x","max")},s={reductionIndices:t,keepDims:n};return r.T2.runKernel(i.VAI,o,s)}})},7165:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var r=n(2215),i=n(6295),a=n(9031),o=n(1109),s=n(9397),c=n(7839),u=n(5556);const l=(0,c.op)({maxPool_:function(e,t,n,c,l){const d=(0,a.YT)(e,"x","maxPool");let p=d,h=!1;3===d.rank&&(h=!0,p=(0,u.t)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.vA(4===p.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${p.rank}.`)),o.vA(s.G0(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),s.s_("maxPool",c,l);const f={x:p},m={filterSize:t,strides:n,pad:c,dimRoundingMode:l},g=r.T2.runKernel(i.t3d,f,m);return h?(0,u.t)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},7184:(e,t,n)=>{"use strict";n.d(t,{P:()=>u});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600),c=n(9339);const u=(0,n(7839).op)({maximum_:function(e,t){let n=(0,o.YT)(e,"a","maximum"),u=(0,o.YT)(t,"b","maximum");[n,u]=(0,a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=(0,c.w)(n,"int32"),u=(0,c.w)(u,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);const l={a:n,b:u};return r.T2.runKernel(i.LDN,l)}})},2865:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({mean_:function(e,t=null,n=!1){const o={x:(0,a.YT)(e,"x","mean")},s={axis:t,keepDims:n};return r.T2.runKernel(i.g5A,o,s)}})},6926:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({min_:function(e,t=null,n=!1){const o={x:(0,a.YT)(e,"x","min")},s={axis:t,keepDims:n};return r.T2.runKernel(i.lNG,o,s)}})},4278:(e,t,n)=>{"use strict";n.d(t,{B:()=>u});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600),c=n(9339);const u=(0,n(7839).op)({minimum_:function(e,t){let n=(0,o.YT)(e,"a","minimum"),u=(0,o.YT)(t,"b","minimum");[n,u]=(0,a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=(0,c.w)(n,"int32"),u=(0,c.w)(u,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);const l={a:n,b:u};return r.T2.runKernel(i.LG0,l)}})},7237:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({mirrorPad_:function(e,t,n){o.vA("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const s=(0,a.YT)(e,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.vA(t.length===s.rank,(()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`));const c="reflect"===n?1:0;for(let e=0;e<s.rank;e++)o.vA(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),o.vA(t[e][0]>=0&&t[e][0]<=s.shape[e]-c&&t[e][1]>=0&&t[e][1]<=s.shape[e]-c,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${s.shape[e]-c} or less than 0 for input of shape ${s.shape}`));const u={paddings:t,mode:n},l={x:s};return r.T2.runKernel(i.x7F,l,u)}})},5130:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({mod_:function(e,t){let n=(0,o.YT)(e,"a","mod"),s=(0,o.YT)(t,"b","mod");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.BLA,c)}})},7544:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({mul_:function(e,t){let n=(0,o.YT)(e,"a","mul"),s=(0,o.YT)(t,"b","mul");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.xu7,c)}})},168:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({neg_:function(e){const t={x:(0,a.YT)(e,"x","neg")};return r.T2.runKernel(i.l0G,t)}})},1978:(e,t,n)=>{"use strict";n.d(t,{x:()=>_});var r=n(9031),i=n(1109),a=n(8598),o=n(5596),s=n(3232),c=n(6926),u=n(7839),l=n(3940),d=n(5556),p=n(4964),h=n(2654),f=n(5843),m=n(4857);function g(e,t,n=null){if(0===e.rank)return(0,a.t)(e);if(1!==e.rank&&null===n)return g((0,d.t)(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,m.c)((0,a.t)(e),n);if(t===1/0)return(0,s.T)((0,a.t)(e),n);if(t===-1/0)return(0,c.j)((0,a.t)(e),n);if("euclidean"===t||2===t)return(0,h.R)((0,m.c)((0,l.n)((0,a.t)(e),(0,p.d)(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return(0,s.T)((0,m.c)((0,a.t)(e),n[0]),n[1]-1);if(t===1/0)return(0,s.T)((0,m.c)((0,a.t)(e),n[1]),n[0]);if(t===-1/0)return(0,c.j)((0,m.c)((0,a.t)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,h.R)((0,m.c)((0,f.E)(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const _=(0,u.op)({norm_:function(e,t="euclidean",n=null,a=!1){const s=g(e=(0,r.YT)(e,"x","norm"),t,n);let c=s.shape;if(a){const t=(0,i.Y6)(n,e.shape);c=o.SM(s.shape,t)}return(0,d.t)(s,c)}})},5712:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({notEqual_:function(e,t){let n=(0,o.YT)(e,"a","notEqual","string_or_numeric"),c=(0,o.YT)(t,"b","notEqual","string_or_numeric");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.ylV,u)}})},1046:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({oneHot_:function(e,t,n=1,o=0,s="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const c={indices:(0,a.YT)(e,"indices","oneHot","int32")},u={dtype:s,depth:t,onValue:n,offValue:o};return r.T2.runKernel(i.urI,c,u)}})},169:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});var r=n(2215),i=n(1109),a=n(9538),o=n(8845);function s(e,t="float32"){if((0,i.SA)(e),"complex64"===t){const t=s(e,"float32"),n=(0,o.U)(e,"float32");return(0,a.f)(t,n)}const n=(0,i.FZ)((0,i.Ze)(e),t);return r.T2.makeTensor(n,e,t)}},2975:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({onesLike_:function(e){const t={x:(0,a.YT)(e,"x","onesLike")};return r.T2.runKernel(i.LWX,t)}})},7839:(e,t,n)=>{"use strict";n.d(t,{B:()=>a,op:()=>o});var r=n(2215),i=n(1109);const a="__op";function o(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=a;const s=(...e)=>{r.T2.startScope(n);try{const t=o(...e);return(0,i.yL)(t)&&console.error("Cannot return a Promise inside of tidy."),r.T2.endScope(t),t}catch(e){throw r.T2.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},6284:(e,t,n)=>{"use strict";n.d(t,{BTT:()=>p.B,tnl:()=>i.t,HQu:()=>a.H,FqL:()=>o.F,WQq:()=>s.W,QiD:()=>h,Q7R:()=>f.Q,bzn:()=>m.b,FLi:()=>g.F,XRg:()=>_.X,qRo:()=>v.q,yHs:()=>y.y,rYl:()=>b.r,FPz:()=>w.F,rfv:()=>k.r,$jT:()=>x.$,sub:()=>E,lZX:()=>D,$v7:()=>M.$,BFc:()=>F,kSi:()=>z,T5N:()=>$,GTe:()=>L.G,HbZ:()=>j,vjT:()=>B,ftb:()=>nr,ROE:()=>V,hOW:()=>U.h,ra8:()=>G.r,wgE:()=>S.w,mkO:()=>q.m,zQh:()=>W.z,o8B:()=>H.o,faB:()=>Y.f,xWs:()=>I.x,I1m:()=>K,RPU:()=>X,O5O:()=>Q,P1l:()=>J,kA9:()=>Z.k,Xtf:()=>ee.X,wX9:()=>te.w,IPL:()=>ne,jIJ:()=>ie,gnS:()=>ae.g,yIG:()=>oe.y,_jP:()=>pr,Lp0:()=>se.L,rCv:()=>ce.r,aOp:()=>ue,Rj8:()=>le.R,Gl3:()=>de.G,smy:()=>pe,X7t:()=>he.X,y4m:()=>fe.y,ek5:()=>me.e,Omf:()=>ge.O,EZY:()=>lr,_3C:()=>_e,Pqc:()=>ve.P,FJY:()=>dr,QP2:()=>ye,LCg:()=>be.L,Y12:()=>we.Y,p4S:()=>ke.p,oNF:()=>xe.o,UG6:()=>Se.U,IYd:()=>Te.I,y5U:()=>Ee,hVP:()=>wn.h,GSj:()=>Ie.G,RIf:()=>Ne.R,wh_:()=>Ae.w,cZk:()=>r,kgh:()=>Oe.k,SY9:()=>ur,rhj:()=>Re.r,DQN:()=>Pe.D,KGM:()=>kn.K,ngS:()=>De.n,Slp:()=>gi,U4u:()=>hr,ggX:()=>xn.g,MIs:()=>Le.M,EN4:()=>Me.E,yrW:()=>Fe.y,H8d:()=>ze.H,M7h:()=>$e.M,InN:()=>je.I,mPL:()=>_i,mT8:()=>Be,Kgs:()=>Ve.K,Rm2:()=>Ue.R,Kko:()=>Ge.K,nqI:()=>qe.n,HPB:()=>We.H,VZ:()=>He.V,n76:()=>Ye.n,NSZ:()=>Ke.N,ztW:()=>Xe.z,rxB:()=>Qe.r,YYh:()=>vi,yzS:()=>et,NoW:()=>N.N,T9B:()=>tt.T,jgi:()=>nt.j,NYV:()=>rt,RO:()=>it,PhQ:()=>at.P,i2o:()=>ot.i,OYQ:()=>ut,jkA:()=>lt.j,BpO:()=>dt.B,FFZ:()=>pt.F,ziu:()=>ht.z,Clk:()=>_t,CRk:()=>or,lKK:()=>A.l,YDF:()=>vt,OjQ:()=>yt,HZy:()=>bt.H,xbf:()=>ir.x,Ec:()=>wt.E,Mw0:()=>kt.M,SaS:()=>st.S,P61:()=>xt.P,op:()=>p.op,X4o:()=>St,eVF:()=>Tt.e,BZs:()=>Ct,grY:()=>Et,XHu:()=>It,WLX:()=>Nt,dzn:()=>At.d,n7C:()=>Ot.n,NsG:()=>Rt.N,yyV:()=>Pt.y,_eU:()=>Dt._,whe:()=>Lt,iyU:()=>Mt,Q0_:()=>Ft,_9M:()=>zt,pR9:()=>Ut,FE$:()=>Gt,m0H:()=>qt,YeY:()=>Wt,HYA:()=>Ht,y17:()=>Yt,xav:()=>Kt.x,VOZ:()=>Xt.V,VVh:()=>Qt.V,j__:()=>Jt.j,tQQ:()=>C.t,BEg:()=>Zt.B,QD2:()=>en,LMr:()=>tn,I2l:()=>nn,JYU:()=>rn,z8$:()=>Sn.z,LIG:()=>an.L,Z$r:()=>on.Z,d_2:()=>sn.d,NFr:()=>sr,sZg:()=>Ze,WfX:()=>cn.W,wdz:()=>un.w,F12:()=>ln,ry7:()=>O.r,_SZ:()=>dn._,vPA:()=>mi,F8e:()=>pn.F,L0l:()=>hn.L,dik:()=>R.d,Q$M:()=>fn,zAd:()=>mn,wck:()=>gn,R0O:()=>_n,Vs9:()=>vn.V,lw0:()=>yn.l,eDJ:()=>bn.e,lMo:()=>yi,Zhr:()=>cr,lOn:()=>fi,lDo:()=>Tn.l,RZD:()=>Cn.R,EwI:()=>mt.E,Pbu:()=>En.P,r2V:()=>In.r,t$z:()=>Nn.t,PMw:()=>An.P,Ym9:()=>On.Y,YjP:()=>bi,jbE:()=>gt.j,czq:()=>Rn.c,Mlm:()=>Pn.M,ymU:()=>P.y,OEK:()=>Dn.O,tGX:()=>Mn,KtR:()=>Fn,$_$:()=>zn.$,g9W:()=>$n,Lpo:()=>jn,yxw:()=>Bn,NNh:()=>Un,Vsq:()=>Ce.V,rfw:()=>Gn.r,mgz:()=>rr.m,efE:()=>qn,AmM:()=>Wn.A,zAU:()=>Hn.z,K$i:()=>Yn.K,rni:()=>Kn,bvq:()=>Xn,_M9:()=>Qn._,YJN:()=>Zn,Ul9:()=>er.U,POl:()=>tr.P});var r={};n.r(r),n.d(r,{conv2d:()=>yr,depthwiseConv2d:()=>kr,matMul:()=>xr});var i=n(8598),a=n(458),o=n(24),s=n(2377),c=n(2215),u=n(6295),l=n(9031),d=n(1109),p=n(7839);const h=(0,p.op)({addN_:function(e){d.vA(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),d.vA(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>(0,l.YT)(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!d.r1(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return c.T2.runKernel(u.EkD,r)}});var f=n(5609),m=n(408),g=n(7923),_=n(1873),v=n(9715),y=n(2763),b=n(5754),w=n(3386),k=n(9800),x=n(107),S=n(9339),T=n(9397),C=n(5556);const E=(0,p.op)({avgPool3d_:function(e,t,n,r,i,a="NDHWC"){const o=(0,l.YT)(e,"x","avgPool3d","float32");let s=o,p=!1;4===o.rank&&(p=!0,s=(0,C.t)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),d.vA(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),d.vA("NDHWC"===a,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),d.vA("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),(0,T.s_)("avgPool3d",r,i);const h={x:s},f={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let m=c.T2.runKernel(u.cS,h,f);return m=(0,S.w)(m,s.dtype),p?(0,C.t)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var I=n(1448),N=n(7041),A=n(7544),O=n(8453),R=n(5048),P=n(5949);const D=(0,p.op)({basicLSTMCell_:function(e,t,n,r,i,a){const o=(0,l.YT)(e,"forgetBias","basicLSTMCell"),c=(0,l.YT)(t,"lstmKernel","basicLSTMCell"),u=(0,l.YT)(n,"lstmBias","basicLSTMCell"),d=(0,l.YT)(r,"data","basicLSTMCell"),p=(0,l.YT)(i,"c","basicLSTMCell"),h=(0,l.YT)(a,"h","basicLSTMCell"),f=(0,I.x)([d,h],1),m=(0,N.N)(f,c),g=(0,s.W)(m,u),_=g.shape[0],v=g.shape[1]/4,y=[_,v],b=(0,R.d)(g,[0,0],y),w=(0,R.d)(g,[0,v],y),k=(0,R.d)(g,[0,2*v],y),x=(0,R.d)(g,[0,3*v],y),S=(0,s.W)((0,A.l)((0,O.r)(b),(0,P.y)(w)),(0,A.l)(p,(0,O.r)((0,s.W)(o,k))));return[S,(0,A.l)((0,P.y)(S),(0,O.r)(x))]}});var L=n(7478),M=n(6686);const F=(0,p.op)({batchNorm2d_:function(e,t,n,r,i,a){const o=(0,l.YT)(e,"x","batchNorm"),s=(0,l.YT)(t,"mean","batchNorm"),c=(0,l.YT)(n,"variance","batchNorm");let u,p;return null!=i&&(u=(0,l.YT)(i,"scale","batchNorm")),null!=r&&(p=(0,l.YT)(r,"offset","batchNorm")),d.vA(2===o.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`)),d.vA(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),d.vA(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`)),null!=u&&d.vA(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=p&&d.vA(2===p.rank||1===p.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${p.rank}.`)),(0,M.$)(o,s,c,p,u,a)}});const z=(0,p.op)({batchNorm3d_:function(e,t,n,r,i,a){const o=(0,l.YT)(e,"x","batchNorm"),s=(0,l.YT)(t,"mean","batchNorm"),c=(0,l.YT)(n,"variance","batchNorm");let u,p;return null!=i&&(u=(0,l.YT)(i,"scale","batchNorm")),null!=r&&(p=(0,l.YT)(r,"offset","batchNorm")),d.vA(3===o.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`)),d.vA(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),d.vA(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`)),null!=u&&d.vA(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=p&&d.vA(3===p.rank||1===p.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${p.rank}.`)),(0,M.$)(o,s,c,p,u,a)}});const $=(0,p.op)({batchNorm4d_:function(e,t,n,r,i,a){const o=(0,l.YT)(e,"x","batchNorm"),s=(0,l.YT)(t,"mean","batchNorm"),c=(0,l.YT)(n,"variance","batchNorm");let u,p;return null!=i&&(u=(0,l.YT)(i,"scale","batchNorm")),null!=r&&(p=(0,l.YT)(r,"offset","batchNorm")),d.vA(4===o.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`)),d.vA(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),d.vA(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`)),null!=u&&d.vA(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=p&&d.vA(4===p.rank||1===p.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${p.rank}.`)),(0,M.$)(o,s,c,p,u,a)}});const j=(0,p.op)({bincount_:function(e,t,n){const r=(0,l.YT)(e,"x","bincount"),i=(0,l.YT)(t,"weights","bincount");d.vA("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),d.vA(n>=0,(()=>`size must be non-negative, but got ${n}.`)),d.vA(i.size===r.size||0===i.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`));const a={x:r,weights:i},o={size:n};return c.T2.runKernel(u.N4F,a,o)}});const B=(0,p.op)({bitwiseAnd_:function(e,t){const n=(0,l.YT)(e,"x","bitwiseAnd"),r=(0,l.YT)(t,"y","bitwiseAnd");if(!(0,d.r1)(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const i={a:n,b:r};return c.T2.runKernel(u.HNs,i)}});const V=(0,p.op)({broadcastArgs_:function(e,t){const n=(0,l.YT)(e,"s0","broadcastArgs","int32"),r=(0,l.YT)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:n,s1:r};return c.T2.runKernel(u.vj7,i)}});var U=n(4789),G=n(5826),q=n(2653),W=n(8421),H=n(2719),Y=n(9538);const K=(0,p.op)({concat1d_:function(e){return(0,I.x)(e,0)}});const X=(0,p.op)({concat2d_:function(e,t){return(0,I.x)(e,t)}});const Q=(0,p.op)({concat3d_:function(e,t){return(0,I.x)(e,t)}});const J=(0,p.op)({concat4d_:function(e,t){return(0,I.x)(e,t)}});var Z=n(1279),ee=n(2736),te=n(6224);const ne=(0,p.op)({conv3d_:function(e,t,n,r,i="NDHWC",a=[1,1,1]){const o=(0,l.YT)(e,"x","conv3d"),s=(0,l.YT)(t,"filter","conv3d");let p=o,h=!1;4===o.rank&&(h=!0,p=(0,C.t)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),d.vA(5===p.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${p.rank}.`)),d.vA(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),d.vA(p.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${p.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),d.vA((0,T.G0)(n,a),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),d.vA("NDHWC"===i,(()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`)),d.vA((0,T.qk)(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),d.vA((0,T.qk)(n),(()=>"Error in conv3D: Strides should be larger than 0."));const f={x:p,filter:s},m={strides:n,pad:r,dataFormat:i,dilations:a},g=c.T2.runKernel(u.A1h,f,m);return h?(0,C.t)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var re=n(4633);const ie=(0,p.op)({conv3dTranspose_:function(e,t,n,r,i){const a=(0,l.YT)(e,"x","conv3dTranspose"),o=(0,l.YT)(t,"filter","conv3dTranspose");return(0,re.c)(n,a,o,r,i)}});var ae=n(8093),oe=n(6505),se=n(8424),ce=n(5362);const ue=(0,p.op)({denseBincount_:function(e,t,n,r=!1){const i=(0,l.YT)(e,"x","denseBincount"),a=(0,l.YT)(t,"weights","denseBincount");d.vA("int32"===i.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`)),d.vA(i.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`)),d.vA(n>=0,(()=>`size must be non-negative, but got ${n}.`)),d.vA(a.size===i.size||0===a.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`));const o={x:i,weights:a},s={size:n,binaryOutput:r};return c.T2.runKernel(u.wNW,o,s)}});var le=n(3846),de=n(5510);const pe=(0,p.op)({diag_:function(e){const t={x:(0,l.YT)(e,"x","diag")};return c.T2.runKernel(u.ORI,t)}});var he=n(5608),fe=n(4425),me=n(9541),ge=n(7241);const _e=(0,p.op)({einsum_:function(e,...t){const n=t.map(((e,t)=>(0,l.YT)(e,`tensors${t}`,"einsum"))),r={equation:e};return c.T2.runKernel(u.Qgm,n,r)}});var ve=n(3790);const ye=(0,p.op)({ensureShape_:function(e,t){const n=(0,l.YT)(e,"x","ensureShape","string_or_numeric");if(!(0,d.e_)(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}});var be=n(1042),we=n(9037),ke=n(1419),xe=n(5117),Se=n(5160),Te=n(1675),Ce=n(9884);const Ee=(0,p.op)({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const i=(0,G.r)([e,t],r),a=e<=t?e:t;for(let e=0;e<a;++e)i.set(1,e,e);const o=(0,C.t)(i.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return(0,Ce.V)((0,Se.U)(o,0),[n[0],1,1]);if(2===n.length)return(0,Ce.V)((0,Se.U)((0,Se.U)(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,Ce.V)((0,Se.U)((0,Se.U)((0,Se.U)(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var Ie=n(2733),Ne=n(7412),Ae=n(1021),Oe=n(7047),Re=n(7724),Pe=n(1031),De=n(1374),Le=n(1580),Me=n(112),Fe=n(6094),ze=n(2869),$e=n(9553),je=n(3274);function Be(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return c.T2.runKernel(u.mnI,{},r)}var Ve=n(7361),Ue=n(3800),Ge=n(7589),qe=n(6843),We=n(8045),He=n(4460),Ye=n(1303),Ke=n(5895),Xe=n(7777),Qe=n(8025);const Je=2147483648;const Ze=(0,p.op)({searchSorted_:function(e,t,n="left"){const r=(0,l.YT)(e,"sortedSequence","searchSorted"),i=(0,l.YT)(t,"values","searchSorted"),a=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],s=(0,C.t)(r,[-1,a]),p=(0,C.t)(i,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==p.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,d.Ze)(p.shape)>=Je)throw new Error("values tensor size must less than 2147483648");if(s.shape[1]>=Je)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${s.shape[1]}`);const h={sortedSequence:s,values:p},f={side:n};return c.T2.runKernel(u.uWl,h,f)}});function et(e,t){return Ze(e,t,"left")}var tt=n(3232),nt=n(7165);const rt=(0,p.op)({maxPool3d_:function(e,t=[1,1,1],n,r,i,a="NDHWC"){const o=(0,l.YT)(e,"x","maxPool3d");let s=o,p=!1;4===o.rank&&(p=!0,s=(0,C.t)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),d.vA(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),d.vA("NDHWC"===a,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`)),(0,T.s_)("maxPool3d",r,i);const h={x:s},f={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},m=c.T2.runKernel(u.ySp,h,f);return p?(0,C.t)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});const it=(0,p.op)({maxPoolWithArgmax_:function(e,t,n,r,i=!1){const a={x:(0,l.YT)(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},s=c.T2.runKernel(u.TL8,a,o);return{result:s[0],indexes:s[1]}}});var at=n(7184),ot=n(2865),st=n(169),ct=n(5225);function ut(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=(0,l.YT)(e,"x","meshgrid",e instanceof ct.qY?e.dtype:"float32");if(void 0===t)return[r];let i=(0,l.YT)(t,"y","meshgrid",t instanceof ct.qY?t.dtype:"float32");const a=(0,d.Ze)(r.shape),o=(0,d.Ze)(i.shape);return"xy"===n?(r=(0,C.t)(r,[1,-1]),i=(0,C.t)(i,[-1,1]),[(0,N.N)((0,st.S)([o,1],r.dtype),r),(0,N.N)(i,(0,st.S)([1,a],i.dtype))]):(r=(0,C.t)(r,[-1,1]),i=(0,C.t)(i,[1,-1]),[(0,N.N)(r,(0,st.S)([1,o],r.dtype)),(0,N.N)((0,st.S)([a,1],i.dtype),i)])}var lt=n(6926),dt=n(4278),pt=n(7237),ht=n(5130),ft=n(5596),mt=n(5843),gt=n(6964);const _t=(0,p.op)({moments_:function(e,t=null,n=!1){e=(0,l.YT)(e,"x","moments");const r=(0,d.Y6)(t,e.shape),i=(0,ot.i)(e,r,n);let a=i.shape;n||(a=(0,ft.SM)(i.shape,r));const o=(0,mt.E)((0,gt.j)((0,S.w)(e,"float32"),(0,C.t)(i,a)));return{mean:i,variance:(0,ot.i)(o,r,n)}}});const vt=(0,p.op)({multiRNNCell_:function(e,t,n,r){const i=(0,l.YT)(t,"data","multiRNNCell"),a=(0,l.j1)(n,"c","multiRNNCell"),o=(0,l.j1)(r,"h","multiRNNCell");let s=i;const c=[];for(let t=0;t<e.length;t++){const n=e[t](s,a[t],o[t]);c.push(n[0]),c.push(n[1]),s=n[1]}const u=[],d=[];for(let e=0;e<c.length;e+=2)u.push(c[e]),d.push(c[e+1]);return[u,d]}});const yt=(0,p.op)({multinomial_:function(e,t,n,r=!1){const i=(0,l.YT)(e,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:1===o?(0,C.t)(i,[1,-1]):i},d={numSamples:t,seed:n,normalized:r},p=c.T2.runKernel(u.WT3,s,d);return 1===o?(0,C.t)(p,[p.size]):p}});var bt=n(168),wt=n(5712),kt=n(1046),xt=n(2975);const St=(0,p.op)({outerProduct_:function(e,t){const n=(0,l.YT)(e,"v1","outerProduct"),r=(0,l.YT)(t,"v2","outerProduct");d.vA(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const i=(0,C.t)(n,[-1,1]),a=(0,C.t)(r,[1,-1]);return(0,N.N)(i,a)}});var Tt=n(3019);const Ct=(0,p.op)({pad1d_:function(e,t,n=0){return(0,d.vA)(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),(0,Tt.e)(e,[t],n)}});const Et=(0,p.op)({pad2d_:function(e,t,n=0){return(0,d.vA)(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),(0,Tt.e)(e,t,n)}});const It=(0,p.op)({pad3d_:function(e,t,n=0){return(0,d.vA)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),(0,Tt.e)(e,t,n)}});const Nt=(0,p.op)({pad4d_:function(e,t,n=0){return(0,d.vA)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),(0,Tt.e)(e,t,n)}});var At=n(706),Ot=n(3940),Rt=n(1212),Pt=n(845),Dt=n(9677);const Lt=(0,p.op)({raggedGather_:function(e,t,n,r){const i={paramsNestedSplits:e.map(((e,t)=>(0,l.YT)(e,`tensors${t}`,"raggedGather","int32"))),paramsDenseValues:(0,l.YT)(t,"paramsDenseValues","raggedGather"),indices:(0,l.YT)(n,"indices","raggedGather","int32")},a={outputRaggedRank:r},o=c.T2.runKernel(u.oJ2,i,a);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});const Mt=(0,p.op)({raggedRange_:function(e,t,n){const r=(0,l.YT)(e,"starts","raggedRange"),i={starts:r,limits:(0,l.YT)(t,"limits","raggedRange",r.dtype),deltas:(0,l.YT)(n,"deltas","raggedRange",r.dtype)},a=c.T2.runKernel(u.CQC,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}});const Ft=(0,p.op)({raggedTensorToTensor_:function(e,t,n,r,i){const a=(0,l.YT)(e,"shape","raggedTensorToTensor","int32"),o=(0,l.YT)(t,"values","raggedTensorToTensor"),s={shape:a,values:o,defaultValue:(0,l.YT)(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map(((e,t)=>(0,l.YT)(e,`tensors${t}`,"raggedTensorToTensor","int32")))},d={rowPartitionTypes:i};return c.T2.runKernel(u.mH5,s,d)}});const zt=(0,p.op)({rand_:function(e,t,n){(0,d.SA)(e);const r=(0,d.Ze)(e);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);i=new Uint8Array(r)}for(let e=0;e<r;e++)i[e]=t();return c.T2.makeTensor(i,e,n)}});var $t=n(1445);class jt{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=i||Math.random();this.random=$t.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,a;do{r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i}while(a>=1||0===a);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*i*o,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Bt{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const i=r||Math.random();this.randu=$t.alea(i.toString()),this.randn=new jt(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,i,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<t||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class Vt{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=$t.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Ut=(0,p.op)({randomGamma_:function(e,t,n=1,r="float32",i){if((0,d.SA)(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const a=new Bt(t,n,r,i),o=(0,G.r)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}});const Gt=(0,p.op)({randomNormal_:function(e,t=0,n=1,r,i){if((0,d.SA)(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const a=new jt(t,n,r,!1,i),o=(0,G.r)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}});const qt=(0,p.op)({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error(`Unsupported data type ${t}`);return Gt(e,0,1,t,n)}});const Wt=(0,p.op)({randomUniform_:function(e,t=0,n=1,r="float32",i){(0,d.SA)(e);const a=(0,G.r)(e,r),o=new Vt(t,n,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=o.nextValue();return a.toTensor()}});const Ht=(0,p.op)({randomUniformInt_:function(e,t,n,r){return Wt(e,t,n,"int32",r)}});function Yt(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return c.T2.runKernel(u.Q6t,{},i)}var Kt=n(5388),Xt=n(6900),Qt=n(8662),Jt=n(8757),Zt=n(3788);const en=(0,p.op)({reverse1d_:function(e){const t=(0,l.YT)(e,"x","reverse");return d.vA(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),(0,Zt.B)(t,0)}});const tn=(0,p.op)({reverse2d_:function(e,t){const n=(0,l.YT)(e,"x","reverse");return d.vA(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),(0,Zt.B)(n,t)}});const nn=(0,p.op)({reverse3d_:function(e,t){const n=(0,l.YT)(e,"x","reverse");return d.vA(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),(0,Zt.B)(n,t)}});const rn=(0,p.op)({reverse4d_:function(e,t){const n=(0,l.YT)(e,"x","reverse");return d.vA(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),(0,Zt.B)(n,t)}});var an=n(314),on=n(8822),sn=n(4964),cn=n(3411),un=n(5707);const ln=async function(e,t){const n=(0,l.YT)(e,"x","setdiff1d"),r=(0,l.YT)(t,"y","setdiff1d");d.vA(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),d.vA(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),d.vA(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const i=await n.data(),a=await r.data(),o=new Set(a);let s=0;for(let e=0;e<i.length;e++)o.has(i[e])||s++;const c=new ct.yl([s],n.dtype),u=new ct.yl([s],"int32");for(let e=0,t=0;e<i.length;e++)o.has(i[e])||(c.values[t]=i[e],u.values[t]=e,t++);return[c.toTensor(),u.toTensor()]};var dn=n(1753),pn=n(1996),hn=n(9710);const fn=(0,p.op)({slice1d_:function(e,t,n){const r=(0,l.YT)(e,"x","slice1d");return d.vA(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),(0,R.d)(r,[t],[n])}});const mn=(0,p.op)({slice2d_:function(e,t,n){const r=(0,l.YT)(e,"x","slice2d");return d.vA(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),(0,R.d)(r,t,n)}});const gn=(0,p.op)({slice3d_:function(e,t,n){const r=(0,l.YT)(e,"x","slice3d");return d.vA(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),(0,R.d)(r,t,n)}});const _n=(0,p.op)({slice4d_:function(e,t,n){const r=(0,l.YT)(e,"x","slice4d");return d.vA(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),(0,R.d)(r,t,n)}});var vn=n(6412),yn=n(4224),bn=n(2802),wn=n(51),kn=n(7906),xn=n(5900),Sn=n(1121),Tn=n(5274),Cn=n(2654),En=n(2922),In=n(8610),Nn=n(1686),An=n(794),On=n(9128),Rn=n(4857),Pn=n(1129),Dn=n(61),Ln=n(6265);function Mn(e,t){(0,d.HO)(e);const n=(0,l.MZ)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,Ln.Q)(e,null,n,t)}function Fn(e,t,n){if((0,d.HO)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=(0,l.MZ)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,Ln.Q)(e,t,r,n)}var zn=n(9270);function $n(e,t,n){if((0,d.HO)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=(0,l.MZ)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,Ln.Q)(e,t,r,n)}function jn(e,t,n){if((0,d.HO)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=(0,l.MZ)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,Ln.Q)(e,t,r,n)}function Bn(e,t,n){if((0,d.HO)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=(0,l.MZ)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,Ln.Q)(e,t,r,n)}var Vn=n(64);const Un=(0,p.op)({tensorScatterUpdate_:function(e,t,n){const r=(0,l.YT)(e,"tensor","tensorScatterupdate"),i=(0,l.YT)(t,"indices","tensorScatterupdate","int32"),a=(0,l.YT)(n,"updates","tensorScatterupdate");if(Vn.validateInput(a,i,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const o={tensor:r,indices:i,updates:a};return c.T2.runKernel(u.X4r,o,{})}});var Gn=n(744);const qn=(0,p.op)({truncatedNormal_:function(e,t=0,n=1,r,i){if((0,d.SA)(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new jt(t,n,r,!0,i),o=(0,G.r)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}});var Wn=n(5935),Hn=n(6732),Yn=n(835);function Kn(e,t){return Ze(e,t,"right")}function Xn(e,t=!0,n,r){return c.T2.makeVariable(e,t,n,r)}var Qn=n(7133),Jn=n(6945);const Zn=async function(e){const t=(0,l.YT)(e,"condition","whereAsync","bool"),n=await t.data(),r=(0,Jn.Y)(t.shape,n);return e!==t&&t.dispose(),r};var er=n(8845),tr=n(3107);const nr=async function(e,t,n){const r=(0,l.YT)(e,"tensor","boolMask"),i=(0,l.YT)(t,"mask","boolMask","bool"),a=null==n?0:n,o=i.rank,s=r.shape;d.vA(o>0,(()=>"mask cannot be scalar")),d.O3(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let e=a;e<a+o;e++)c*=s[e];const u=s.slice(0,a).concat([c],s.slice(a+o)),p=(0,C.t)(r,u),h=(0,C.t)(i,[-1]),f=await Zn(h),m=(0,In.r)(f,[1]),g=(0,Oe.k)(p,m,a);return e!==r&&r.dispose(),t!==i&&i.dispose(),m.dispose(),p.dispose(),h.dispose(),f.dispose(),g};var rr=n(3345),ir=n(1978),ar=n(2067);const or=(0,p.op)({movingAverage_:function(e,t,n,r,i=!0){const a=(0,l.YT)(e,"v","movingAverage"),o=(0,l.YT)(t,"x","movingAverage"),c=(0,l.YT)(n,"decay","movingAverage");(0,ar.assertTypesMatch)(a,o),d.vA(d.r1(a.shape,o.shape),(()=>"Shape mismatch in v and x"));const u=(0,sn.d)(1),p=(0,gt.j)(u,c);let h=(0,A.l)((0,gt.j)(o,a),p);if(i){d.vA(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=(0,l.YT)(r,"step","movingAverage");h=(0,fe.y)(h,(0,gt.j)(u,(0,Ot.n)(c,e)))}return(0,s.W)(a,h)}});const sr=(0,p.op)({scatterND_:function(e,t,n){(0,d.SA)(n);const r=(0,l.YT)(e,"indices","scatterND","int32"),i=(0,l.YT)(t,"updates","scatterND");Vn.validateInput(i,r,n);const a={indices:r,updates:i},o={shape:n};return c.T2.runKernel(u.pJc,a,o)}});const cr=(0,p.op)({sparseToDense_:function(e,t,n,r=0){(0,d.SA)(n);const i=(0,l.YT)(e,"sparseIndices","sparseToDense","int32"),a=(0,l.YT)(t,"sparseValues","sparseToDense","string_or_numeric"),o=(0,l.YT)(r,"defaultValue","sparseToDense",a.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const o=t.size;if(0!==t.rank&&(1!==t.rank||o!==i))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o);const s={sparseIndices:i,sparseValues:a,defaultValue:o},p={outputShape:n};return c.T2.runKernel(u.jgd,s,p)}});const ur=(0,p.op)({gatherND_:function(e,t){const n=(0,l.YT)(t,"indices","gatherND","int32"),r={params:(0,l.YT)(e,"x","gatherND","string_or_numeric"),indices:n};return c.T2.runKernel(u.O4G,r)}});const lr=(0,p.op)({dropout_:function(e,t,n,r){const i=(0,l.YT)(e,"x","dropout");if(d.vA("float32"===i.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`)),d.vA(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof ct.qY?i.clone():i;const a=function(e,t){if(null==t)return e.shape.slice();if(d.r1(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),o=1-t,c=(0,fe.y)((0,Ne.R)((0,s.W)(Wt(a,0,1,"float32",r),o)),o);return(0,A.l)(i,c)}});function dr(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function pr(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let a=0;a<e;++a){const o=2*Math.PI*a/(e+r-1);i[a]=t-n*Math.cos(o)}return Mn(i,"float32")}const hr=async function(e,t,n=1){const r=(0,l.YT)(e,"predictions","inTopK"),i=(0,l.YT)(t,"targets","inTopK");(0,d.vA)(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),(0,d.vA)(r.rank-1===i.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`)),(0,d.O3)(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];(0,d.vA)(n>0&&n<=a,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`));const o=await r.data(),s=await i.data(),[c,u]=[o.length/a,a],p=(0,d.ce)("bool",c);for(let e=0;e<c;e++){const t=e*u,r=o.subarray(t,t+u),i=[];for(let e=0;e<r.length;e++)i.push({value:r[e],index:e});i.sort(((e,t)=>t.value-e.value)),p[e]=0;for(let t=0;t<n;t++)if(i[t].index===s[e]){p[e]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),(0,Dn.O)(p,i.shape,"bool")};var fr=n(3376),mr=n(7600),gr=n(9018),_r=n(9833),vr=n(5932);const yr=(0,p.op)({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:p,activation:h="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(h=h||"linear",!1===(0,vr.zE)(c.T2.state.gradientDepth,h)){d.vA("NHWC"===i,(()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let c=(0,ee.X)(e,t,n,r,i,a,o);return null!=p&&(c=(0,s.W)(c,p)),(0,vr.f2)(c,h,f,m)}const g=(0,l.YT)(e,"x","conv2d","float32"),_=(0,l.YT)(t,"filter","conv2d","float32");let v=g,y=!1;3===g.rank&&(y=!0,v=(0,C.t)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),d.vA(4===v.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${v.rank}.`)),d.vA(4===_.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${_.rank}.`)),T.s_("fused conv2d",r,o);const b="NHWC"===i?v.shape[3]:v.shape[1];d.vA(_.shape[2]===b,(()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${_.shape[2]}.`)),d.vA(T.G0(n,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`));const w=T.uf(v.shape,_.shape,n,a,r,o);let k,x;if(null!=p&&(k=(0,l.YT)(p,"bias","fused conv2d"),[k]=(0,ar.makeTypesMatch)(k,g),"NHWC"===i?mr.assertAndGetBroadcastShape(w.outShape,k.shape):(d.vA(k.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${k.shape.length}.`)),d.vA(0===k.shape.length||k.shape[0]===w.outChannels||1===k.shape[0],(()=>`Error in fused conv2d: bias shape (${k.shape}) is not compatible with the number of output channels (${w.outChannels})`)))),null!=f){const e=f.shape;if(d.vA(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)d.vA(1===e[0]||e[0]===w.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${w.outChannels}).`));else if(3===e.length)try{mr.assertAndGetBroadcastShape(e,w.outShape)}catch(t){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${w.outShape}).`;throw Error(n)}x=(0,l.YT)(f,"prelu weights","fused conv2d")}const S=(e,t)=>{d.vA("NHWC"===i,(()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`));const[o,s,c,u]=t,l=(0,vr.XB)(e,c,h);d.vA(T.Dh(a),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const p=[(0,_r.v)(s.shape,l,o,n,r),(0,gr.H)(s,l,o.shape,n,r)];if(null!=u){const e=(0,vr.Do)(u,l);p.push(e)}return p},E={x:v,filter:_,bias:k,preluActivationWeights:x},I={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:h,leakyreluAlpha:m};if(null==p){const e=(0,fr._X)(((e,t,n)=>{let r=c.T2.runKernel(u.aAr,E,I);return n([t,e,r]),y&&(r=(0,C.t)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return e(v,_)}{const e=(0,fr._X)(((e,t,n,r)=>{let i=c.T2.runKernel(u.aAr,E,I);return r([t,e,i,n]),y&&(i=(0,C.t)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:S}}));return e(v,_,k)}}});var br=n(6952),wr=n(5524);const kr=(0,p.op)({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:p,activation:h="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(!1===(0,vr.zE)(c.T2.state.gradientDepth,h)){let c=(0,de.G)(e,t,n,r,i,a,o);return null!=p&&(c=(0,s.W)(c,p)),(0,vr.f2)(c,h,f,m)}const g=(0,l.YT)(e,"x","depthwiseConv2d","float32"),_=(0,l.YT)(t,"filter","depthwiseConv2d","float32");let v=g,y=!1;3===g.rank&&(y=!0,v=(0,C.t)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),d.vA(4===v.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${v.rank}.`)),d.vA(4===_.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${_.rank}.`)),d.vA(v.shape[3]===_.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${v.shape[3]}) must match the inChannels dimension in filter ${_.shape[2]}.`)),null==a&&(a=[1,1]),d.vA(T.G0(n,a),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),T.s_("fused depthwiseConv2d",r,o);const b=T.uf(v.shape,_.shape,n,a,r,o,!0);let w,k;null!=p&&(w=(0,l.YT)(p,"bias","fused conv2d"),[w]=(0,ar.makeTypesMatch)(w,g),mr.assertAndGetBroadcastShape(b.outShape,w.shape)),null!=f&&(k=(0,l.YT)(f,"prelu weights","fused depthwiseConv2d"));const x=(e,t)=>{d.vA(T.Dh(a),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`));const[i,s,c,u]=t,l=(0,vr.XB)(e,c,h),p=(0,wr.l)(s.shape,l,i,n,r,a,o),f=(0,br.x)(s,l,i.shape,n,r,a,o);if(null!=u){return[p,f,(0,vr.Do)(w,l)]}return[p,f]},S={x:v,filter:_,bias:w,preluActivationWeights:k},E={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:h,leakyreluAlpha:m};if(null==p){const e=(0,fr._X)(((e,t,n)=>{let r=c.T2.runKernel(u.T7M,S,E);return n([t,e,r]),y&&(r=(0,C.t)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(v,_)}{const e=(0,fr._X)(((e,t,n,r)=>{let i=c.T2.runKernel(u.T7M,S,E);return r([t,e,i,n]),y&&(i=(0,C.t)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}}));return e(v,_,w)}}});const xr=(0,p.op)({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:p=.2}){if(!1===(0,vr.zE)(c.T2.state.gradientDepth,a)){let c=(0,N.N)(e,t,n,r);return null!=i&&(c=(0,s.W)(c,i)),(0,vr.f2)(c,a,o,p)}let h=(0,l.YT)(e,"a","fused matMul"),f=(0,l.YT)(t,"b","fused matMul");[h,f]=(0,ar.makeTypesMatch)(h,f);const m=n?h.shape[h.rank-2]:h.shape[h.rank-1],g=r?f.shape[f.rank-1]:f.shape[f.rank-2],_=n?h.shape[h.rank-1]:h.shape[h.rank-2],v=r?f.shape[f.rank-2]:f.shape[f.rank-1],y=h.shape.slice(0,-2),b=f.shape.slice(0,-2),w=d.Ze(y),k=d.Ze(b);d.vA(m===g,(()=>`Error in fused matMul: inner shapes (${m}) and (${g}) of Tensors with shapes ${h.shape} and ${f.shape} and transposeA=${n} and transposeB=${r} must match.`));const x=mr.assertAndGetBroadcastShape(h.shape.slice(0,-2),f.shape.slice(0,-2)).concat([_,v]),S=n?(0,C.t)(h,[w,m,_]):(0,C.t)(h,[w,_,m]),T=r?(0,C.t)(f,[k,v,g]):(0,C.t)(f,[k,g,v]);let E,I;null!=i&&(E=(0,l.YT)(i,"bias","fused matMul"),[E]=(0,ar.makeTypesMatch)(E,h),mr.assertAndGetBroadcastShape(x,E.shape)),null!=o&&(I=(0,l.YT)(o,"prelu weights","fused matMul"));const A=(e,t)=>{const[o,s,c,u]=t,l=(0,vr.XB)((0,C.t)(e,c.shape),c,a);let d,p;if(n||r?!n&&r?(d=(0,N.N)(l,s,!1,!1),p=(0,N.N)(l,o,!0,!1)):n&&!r?(d=(0,N.N)(s,l,!1,!0),p=(0,N.N)(o,l,!1,!1)):(d=(0,N.N)(s,l,!0,!0),p=(0,N.N)(l,o,!0,!0)):(d=(0,N.N)(l,s,!1,!0),p=(0,N.N)(o,l,!0,!1)),null!=i){return[d,p,(0,vr.Do)(u,l)]}return[d,p]},O={a:S,b:T,bias:E,preluActivationWeights:I},R={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:p};if(null==i){const e=(0,fr._X)(((e,t,n)=>{const r=c.T2.runKernel(u.Dr,O,R);return n([e,t,r]),{value:(0,C.t)(r,x),gradFunc:A}}));return e(S,T)}{const e=(0,fr._X)(((e,t,n,r)=>{const i=c.T2.runKernel(u.Dr,O,R);return r([e,t,i,n]),{value:(0,C.t)(i,x),gradFunc:A}}));return e(S,T,E)}}});const Sr=(0,p.op)({hammingWindow_:function(e){return pr(e,.54,.46)}});const Tr=(0,p.op)({hannWindow_:function(e){return pr(e,.5,.5)}});const Cr=(0,p.op)({frame_:function(e,t,n,r=!1,i=0){let a=0;const o=[];for(;a+t<=e.size;)o.push((0,R.d)(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,s=(0,I.x)([(0,R.d)(e,a,t-r),(0,Ie.G)([r],i)]);o.push(s),a+=n}return 0===o.length?Fn([],[0,t]):(0,C.t)((0,I.x)(o),[o.length,t])}});const Er=(0,p.op)({stft_:function(e,t,n,r,i=Tr){null==r&&(r=dr(t));const a=Cr(e,t,n),o=(0,A.l)(a,i(t));return(0,Sn.z)(o,r)}});const Ir=(0,p.op)({cropAndResize_:function(e,t,n,r,i="bilinear",a=0){const o=(0,l.YT)(e,"image","cropAndResize"),s=(0,l.YT)(t,"boxes","cropAndResize","float32"),p=(0,l.YT)(n,"boxInd","cropAndResize","int32"),h=s.shape[0];d.vA(4===o.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`)),d.vA(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${h},4] but had shape ${s.shape}.`)),d.vA(1===p.rank&&p.shape[0]===h,(()=>`Error in cropAndResize: boxInd must be have size [${h}] but had shape ${s.shape}.`)),d.vA(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),d.vA(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),d.vA("bilinear"===i||"nearest"===i,(()=>`method must be bilinear or nearest, but was ${i}`));const f={image:o,boxes:s,boxInd:p},m={method:i,extrapolationValue:a,cropSize:r};return c.T2.runKernel(u.MRQ,f,m)}});const Nr=(0,p.op)({flipLeftRight_:function(e){const t=(0,l.YT)(e,"image","flipLeftRight","float32");d.vA(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return c.T2.runKernel(u.BxF,n,{})}});const Ar=(0,p.op)({grayscaleToRGB_:function(e){const t=(0,l.YT)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];d.vA(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),d.vA(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,(0,Ce.V)(t,i)}});const Or=(0,p.op)({rgbToGrayscale_:function(e){const t=(0,l.YT)(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];d.vA(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),d.vA(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const i=t.dtype,a=(0,S.w)(t,"float32"),o=Mn([.2989,.587,.114]);let s;switch(t.rank){case 2:s=_e("ij,j->i",a,o);break;case 3:s=_e("ijk,k->ij",a,o);break;case 4:s=_e("ijkl,l->ijk",a,o);break;case 5:s=_e("ijklm,m->ijkl",a,o);break;case 6:s=_e("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=(0,Se.U)(s,-1),(0,S.w)(s,i)}});const Rr=(0,p.op)({rotateWithOffset_:function(e,t,n=0,r=.5){const i=(0,l.YT)(e,"image","rotateWithOffset","float32");d.vA(4===i.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`));const a={image:i},o={radians:t,fillValue:n,center:r};return c.T2.runKernel(u.BK4,a,o)}});function Pr(e,t,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);const o=e.shape[0];return n=Math.min(n,o),d.vA(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),d.vA(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),d.vA(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),d.vA(1===t.rank,(()=>"scores must be a 1D tensor")),d.vA(t.shape[0]===o,(()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`)),d.vA(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}const Dr=(0,p.op)({nonMaxSuppression_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=(0,l.YT)(e,"boxes","nonMaxSuppression","float32"),o=(0,l.YT)(t,"scores","nonMaxSuppression","float32"),s=Pr(a,o,n,r,i),d={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:i=s.scoreThreshold};return c.T2.runKernel(u.SDM,{boxes:a,scores:o},d)}});var Lr=n(2982);const Mr=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=(0,l.YT)(e,"boxes","nonMaxSuppressionAsync"),o=(0,l.YT)(t,"scores","nonMaxSuppressionAsync"),s=Pr(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const c=await Promise.all([a.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:p}=(0,Lr.c7)(u,d,n,r,i);return a!==e&&a.dispose(),o!==t&&o.dispose(),Mn(p,"int32")};const Fr=(0,p.op)({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=(0,l.YT)(e,"boxes","nonMaxSuppression"),s=(0,l.YT)(t,"scores","nonMaxSuppression"),d=Pr(o,s,n,r,i,a),p={boxes:o,scores:s},h={maxOutputSize:n=d.maxOutputSize,iouThreshold:r=d.iouThreshold,scoreThreshold:i=d.scoreThreshold,softNmsSigma:a=d.softNmsSigma},f=c.T2.runKernel(u.e0f,p,h);return{selectedIndices:f[0],selectedScores:f[1]}}});const zr=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=(0,l.YT)(e,"boxes","nonMaxSuppressionAsync"),s=(0,l.YT)(t,"scores","nonMaxSuppressionAsync"),c=Pr(o,s,n,r,i,a);n=c.maxOutputSize,r=c.iouThreshold,i=c.scoreThreshold,a=c.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),d=u[0],p=u[1],{selectedIndices:h,selectedScores:f}=(0,Lr.ut)(d,p,n,r,i,a);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:Mn(h,"int32"),selectedScores:Mn(f)}};const $r=(0,p.op)({nonMaxSuppressionPadded_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=(0,l.YT)(e,"boxes","nonMaxSuppression"),s=(0,l.YT)(t,"scores","nonMaxSuppression"),d=Pr(o,s,n,r,i,null),p={boxes:o,scores:s},h={maxOutputSize:d.maxOutputSize,iouThreshold:d.iouThreshold,scoreThreshold:d.scoreThreshold,padToMaxOutputSize:a},f=c.T2.runKernel(u.Zl4,p,h);return{selectedIndices:f[0],validOutputs:f[1]}}});const jr=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=(0,l.YT)(e,"boxes","nonMaxSuppressionAsync"),s=(0,l.YT)(t,"scores","nonMaxSuppressionAsync"),c=Pr(o,s,n,r,i,null),u=c.maxOutputSize,d=c.iouThreshold,p=c.scoreThreshold,[h,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:m,validOutputs:g}=(0,Lr.ZS)(h,f,u,d,p,a);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:Mn(m,"int32"),validOutputs:(0,sn.d)(g,"int32")}};var Br=n(4081),Vr=n(6052);const Ur=(0,p.op)({threshold_:function(e,t="binary",n=!1,r=.5){const i=(0,l.YT)(e,"image","threshold"),a=i.shape[0]*i.shape[1];let o,c,u,p,h=(0,A.l)(Mn([r]),255);if(d.vA(3===i.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`)),d.vA(3===i.shape[2]||1===i.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`)),d.vA("int32"===i.dtype||"float32"===i.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`)),d.vA("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===i.shape[2]){[o,c,u]=(0,Tn.l)(i,[1,1,1],-1);const e=(0,A.l)(o,.2989),t=(0,A.l)(c,.587),n=(0,A.l)(u,.114);p=(0,s.W)((0,s.W)(e,t),n)}else p=e;if("otsu"===t){h=function(e,t){let n,r,i,a,o,c,u=Mn([-1]),l=Mn([0]),d=Mn([0]);for(let p=0;p<e.size-1;p++){n=(0,R.d)(e,0,p+1),r=(0,R.d)(e,p+1),o=(0,fe.y)((0,Rn.c)(n),t),c=(0,fe.y)((0,Rn.c)(r),t);const h=(0,Rn.c)((0,A.l)(n,Yt(0,n.size)));i=(0,fe.y)(h,(0,Rn.c)(n));const f=(0,Ie.G)(r.shape,n.size),m=(0,s.W)(Yt(0,r.size),f),g=(0,A.l)(r,m);a=(0,fe.y)((0,Rn.c)(g),(0,Rn.c)(r));const _=(0,gt.j)(i,a),v=(0,gt.j)(i,a),y=(0,A.l)(o,c);d=(0,A.l)((0,A.l)(y,_),v);const b=(0,Re.r)(d,l);l=(0,Qn._)(b,d,l),u=(0,Qn._)(b,Mn([p]),u)}return u}(j((0,S.w)((0,an.L)(p),"int32"),(0,Dn.O)([]),256),a)}const f=n?(0,je.I)(p,h):(0,Re.r)(p,h);return(0,S.w)((0,A.l)(f,255),"int32")}});const Gr=(0,p.op)({transform_:function(e,t,n="nearest",r="constant",i=0,a){const o=(0,l.YT)(e,"image","transform","float32"),s=(0,l.YT)(t,"transforms","transform","float32");d.vA(4===o.rank,(()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`)),d.vA(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),d.vA(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const p={image:o,transforms:s},h={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return c.T2.runKernel(u.dLy,p,h)}});const qr=(0,p.op)({bandPart_:function(e,t,n){const r=(0,l.YT)(e,"a","bandPart");(0,d.vA)(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const i=r.shape,[a,o]=r.shape.slice(-2);let s,c;"number"==typeof t?((0,d.vA)(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),(0,d.vA)(t<=a,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`)),s=(0,l.YT)(t<0?a:t,"numLower","bandPart")):((0,d.vA)("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=(0,Qn._)((0,$e.M)(t,0),a,(0,dt.B)(t,a))),"number"==typeof n?((0,d.vA)(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),(0,d.vA)(n<=o,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`)),c=(0,l.YT)(n<0?o:n,"numUpper","bandPart")):((0,d.vA)("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),c=(0,Qn._)((0,$e.M)(n,0),o,(0,dt.B)(n,o)));const u=(0,C.t)(Yt(0,a,1,"int32"),[-1,1]),p=Yt(0,o,1,"int32"),h=(0,gt.j)(u,p),f=(0,Ye.n)((0,je.I)(h,s),(0,Pe.D)(h,(0,bt.H)(c))),m=(0,er.U)([a,o],r.dtype);return(0,C.t)((0,Nn.t)((0,Yn.K)((0,C.t)(r,[-1,a,o])).map((e=>(0,Qn._)(f,e,m)))),i)}});const Wr=(0,p.op)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,(0,d.vA)(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)(0,d.vA)(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=(0,Tn.l)(e,e.shape[0],0).map((e=>(0,In.r)(e,[0])));(0,d.vA)(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(c.T2.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=(0,A.l)((0,Rn.c)((0,A.l)(n[r],e)),n[r]);e=(0,gt.j)(e,t)}return(0,fe.y)(e,(0,ir.x)(e,"euclidean"))})));return t?(0,Nn.t)(n,0):n}});var Hr=n(7534);function Yr(e,t=!1){return c.T2.tidy((()=>{(0,d.vA)(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let i=Ee(n),a=(0,H.o)(e);const o=Fn([[1]],[1,1]);let s=(0,H.o)(o);const u=n>=r?r:n;for(let e=0;e<u;++e){const t=a,u=s,l=i;[s,a,i]=c.T2.tidy((()=>{const t=(0,R.d)(a,[e,e],[n-e,1]),c=(0,ir.x)(t),u=(0,R.d)(a,[e,e],[1,1]),l=(0,Qn._)((0,Re.r)(u,0),Fn([[-1]]),Fn([[1]])),d=(0,gt.j)(u,(0,A.l)(l,c)),p=(0,fe.y)(t,d);s=1===p.shape[0]?(0,H.o)(o):(0,I.x)([o,(0,R.d)(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const h=(0,bt.H)((0,fe.y)((0,N.N)(l,d),c)),f=(0,R.d)(a,[e,0],[n-e,r]),m=(0,A.l)(h,s),g=(0,rr.m)(s);if(0===e)a=(0,gt.j)(f,(0,N.N)(m,(0,N.N)(g,f)));else{const t=(0,gt.j)(f,(0,N.N)(m,(0,N.N)(g,f)));a=(0,I.x)([(0,R.d)(a,[0,0],[e,r]),t],0)}const _=(0,rr.m)(m),v=(0,R.d)(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=(0,gt.j)(v,(0,N.N)((0,N.N)(v,s),_));else{const t=(0,gt.j)(v,(0,N.N)((0,N.N)(v,s),_));i=(0,I.x)([(0,R.d)(i,[0,0],[n,e]),t],1)}return[s,a,i]})),(0,Hr.AS)([t,u,l])}return!t&&n>r&&(i=(0,R.d)(i,[0,0],[n,r]),a=(0,R.d)(a,[0,0],[r,r])),[i,a]}))}const Kr=(0,p.op)({qr_:function(e,t=!1){if((0,d.vA)(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Yr(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=(0,Yn.K)((0,C.t)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];r.forEach((e=>{const[n,r]=Yr(e,t);i.push(n),a.push(r)}));return[(0,C.t)((0,Nn.t)(i,0),e.shape),(0,C.t)((0,Nn.t)(a,0),e.shape)]}}});var Xr=n(5302);const Qr=(0,p.op)({computeWeightedLoss_:function(e,t,n=Xr.i.SUM_BY_NONZERO_WEIGHTS){const r=(0,l.YT)(e,"losses","computeWeightedLoss");let i=null;null!=t&&(i=(0,l.YT)(t,"weights","computeWeightedLoss"));const a=null==i?r:(0,A.l)(r,i);if(n===Xr.i.NONE)return a;if(n===Xr.i.SUM)return(0,Rn.c)(a);if(n===Xr.i.MEAN){if(null==i)return(0,ot.i)(a);{const e=r.size/i.size,t=(0,fe.y)((0,Rn.c)(a),(0,Rn.c)(i));return e>1?(0,fe.y)(t,(0,sn.d)(e)):t}}if(n===Xr.i.SUM_BY_NONZERO_WEIGHTS){if(null==i)return(0,fe.y)((0,Rn.c)(a),(0,sn.d)(r.size));{const e=(0,A.l)(i,(0,st.S)(r.shape)),t=(0,S.w)((0,Rn.c)((0,wt.E)(e,(0,sn.d)(0))),"float32");return(0,fe.y)((0,Rn.c)(a),t)}}throw Error(`Unknown reduction: ${n}`)}});const Jr=(0,p.op)({absoluteDifference_:function(e,t,n,r=Xr.i.SUM_BY_NONZERO_WEIGHTS){const a=(0,l.YT)(e,"labels","absoluteDifference"),o=(0,l.YT)(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=(0,l.YT)(n,"weights","absoluteDifference")),(0,d.O3)(a.shape,o.shape,"Error in absoluteDifference: ");const c=(0,i.t)((0,gt.j)(a,o));return Qr(c,s,r)}});const Zr=(0,p.op)({cosineDistance_:function(e,t,n,r,i=Xr.i.SUM_BY_NONZERO_WEIGHTS){const a=(0,l.YT)(e,"labels","cosineDistance"),o=(0,l.YT)(t,"predictions","cosineDistance");let s=null;null!=r&&(s=(0,l.YT)(r,"weights","cosineDistance")),(0,d.O3)(a.shape,o.shape,"Error in cosineDistance: ");const c=(0,sn.d)(1),u=(0,gt.j)(c,(0,Rn.c)((0,A.l)(a,o),n,!0));return Qr(u,s,i)}});const ei=(0,p.op)({hingeLoss_:function(e,t,n,r=Xr.i.SUM_BY_NONZERO_WEIGHTS){let i=(0,l.YT)(e,"labels","hingeLoss");const a=(0,l.YT)(t,"predictions","hingeLoss");let o=null;null!=n&&(o=(0,l.YT)(n,"weights","hingeLoss")),(0,d.O3)(i.shape,a.shape,"Error in hingeLoss: ");const s=(0,sn.d)(1);i=(0,gt.j)((0,A.l)((0,sn.d)(2),i),s);const c=(0,Qt.V)((0,gt.j)(s,(0,A.l)(i,a)));return Qr(c,o,r)}});const ti=(0,p.op)({huberLoss_:function(e,t,n,r=1,a=Xr.i.SUM_BY_NONZERO_WEIGHTS){const o=(0,l.YT)(e,"labels","huberLoss"),c=(0,l.YT)(t,"predictions","huberLoss");let u=null;null!=n&&(u=(0,l.YT)(n,"weights","huberLoss")),(0,d.O3)(o.shape,c.shape,"Error in huberLoss: ");const p=(0,sn.d)(r),h=(0,i.t)((0,gt.j)(c,o)),f=(0,dt.B)(h,p),m=(0,gt.j)(h,f),g=(0,s.W)((0,A.l)((0,sn.d)(.5),(0,mt.E)(f)),(0,A.l)(p,m));return Qr(g,u,a)}});const ni=(0,p.op)({logLoss_:function(e,t,n,r=1e-7,i=Xr.i.SUM_BY_NONZERO_WEIGHTS){const a=(0,l.YT)(e,"labels","logLoss"),o=(0,l.YT)(t,"predictions","logLoss");let c=null;null!=n&&(c=(0,l.YT)(n,"weights","logLoss")),(0,d.O3)(a.shape,o.shape,"Error in logLoss: ");const u=(0,sn.d)(1),p=(0,sn.d)(r),h=(0,bt.H)((0,A.l)(a,(0,Ue.R)((0,s.W)(o,p)))),f=(0,A.l)((0,gt.j)(u,a),(0,Ue.R)((0,s.W)((0,gt.j)(u,o),p))),m=(0,gt.j)(h,f);return Qr(m,c,i)}});const ri=(0,p.op)({meanSquaredError_:function(e,t,n,r=Xr.i.SUM_BY_NONZERO_WEIGHTS){const i=(0,l.YT)(e,"labels","meanSquaredError"),a=(0,l.YT)(t,"predictions","meanSquaredError");let o=null;null!=n&&(o=(0,l.YT)(n,"weights","meanSquaredError")),(0,d.O3)(i.shape,a.shape,"Error in meanSquaredError: ");const s=(0,En.P)(i,a);return Qr(s,o,r)}});const ii=(0,p.op)({sigmoidCrossEntropy_:function(e,t,n,r=0,a=Xr.i.SUM_BY_NONZERO_WEIGHTS){let o=(0,l.YT)(e,"multiClassLabels","sigmoidCrossEntropy");const c=(0,l.YT)(t,"logits","sigmoidCrossEntropy");let u=null;if(null!=n&&(u=(0,l.YT)(n,"weights","sigmoidCrossEntropy")),(0,d.O3)(o.shape,c.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=(0,sn.d)(r),t=(0,sn.d)(1),n=(0,sn.d)(.5);o=(0,s.W)((0,A.l)(o,(0,gt.j)(t,e)),(0,A.l)(n,e))}const p=function(e,t){const n=(0,l.YT)(e,"labels","sigmoidCrossEntropyWithLogits"),r=(0,l.YT)(t,"logits","sigmoidCrossEntropyWithLogits");(0,d.O3)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=(0,Qt.V)(r),o=(0,A.l)(r,n),c=(0,Ge.K)((0,xe.o)((0,bt.H)((0,i.t)(r))));return(0,s.W)((0,gt.j)(a,o),c)}(o,c);return Qr(p,u,a)}});const ai=(0,p.op)({softmaxCrossEntropy_:function(e,t,n,r=0,i=Xr.i.SUM_BY_NONZERO_WEIGHTS){let a=(0,l.YT)(e,"onehotLabels","softmaxCrossEntropy");const o=(0,l.YT)(t,"logits","softmaxCrossEntropy");let c=null;if(null!=n&&(c=(0,l.YT)(n,"weights","softmaxCrossEntropy")),(0,d.O3)(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const e=(0,sn.d)(r),t=(0,sn.d)(1),n=(0,sn.d)(a.shape[1]);a=(0,s.W)((0,A.l)(a,(0,gt.j)(t,e)),(0,fe.y)(e,n))}const u=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=(0,fr._X)(((e,t,r)=>{const i=(0,He.V)(t,[n],!0),a=(0,gt.j)((0,S.w)(t,"float32"),i);r([e,a]);const o=(0,bt.H)((0,A.l)(a,e));return{value:(0,Rn.c)(o,[n]),gradFunc:(e,t)=>{const[r,i]=t,a=(0,ft.SM)(e.shape,[n]);return[(0,A.l)((0,C.t)(e,a),(0,gt.j)((0,S.w)(r,"float32"),(0,xe.o)(i))),(0,A.l)((0,C.t)(e,a),(0,gt.j)((0,xe.o)(i),(0,S.w)(r,"float32")))]}}}));return r(e,t)}(a,o);return Qr(u,c,i)}});const oi=(0,p.op)({sparseFillEmptyRows_:function(e,t,n,r){const i=(0,l.YT)(e,"indices","sparseFillEmptyRows","int32"),a=(0,l.YT)(t,"values","sparseFillEmptyRows"),o=(0,l.YT)(n,"denseShape","sparseFillEmptyRows","int32"),s=(0,l.YT)(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==i.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==s.rank)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const d={indices:i,values:a,denseShape:o,defaultValue:s},p=c.T2.runKernel(u.C8s,d);return{outputIndices:p[0],outputValues:p[1],emptyRowIndicator:p[2],reverseIndexMap:p[3]}}});const si=(0,p.op)({sparseReshape_:function(e,t,n){const r=(0,l.YT)(e,"inputIndices","sparseReshape","int32"),i=(0,l.YT)(t,"inputShape","sparseReshape","int32"),a=(0,l.YT)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==i.rank)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const o={inputIndices:r,inputShape:i,newShape:a},s=c.T2.runKernel(u.BoJ,o);return{outputIndices:s[0],outputShape:s[1]}}});const ci=(0,p.op)({sparseSegmentMean_:function(e,t,n){const r=(0,l.YT)(e,"data","sparseSegmentMean"),i=(0,l.YT)(t,"indices","sparseSegmentMean","int32"),a=(0,l.YT)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return c.T2.runKernel(u.L6G,o)}});const ui=(0,p.op)({sparseSegmentSum_:function(e,t,n){const r=(0,l.YT)(e,"data","sparseSegmentSum"),i=(0,l.YT)(t,"indices","sparseSegmentSum","int32"),a=(0,l.YT)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return c.T2.runKernel(u.DvZ,o)}});const li=(0,p.op)({stringNGrams_:function(e,t,n,r,i,a,o,s){const d=(0,l.YT)(e,"data","stringNGrams","string");if("string"!==d.dtype)throw new Error("Data must be of datatype string");if(1!==d.shape.length)throw new Error(`Data must be a vector, saw: ${d.shape}`);const p=(0,l.YT)(t,"dataSplits","stringNGrams");if("int32"!==p.dtype)throw new Error("Data splits must be of datatype int32");const h={separator:n,nGramWidths:r,leftPad:i,rightPad:a,padWidth:o,preserveShortSequences:s},f={data:d,dataSplits:p},m=c.T2.runKernel(u.YAb,f,h);return{nGrams:m[0],nGramsSplits:m[1]}}});const di=(0,p.op)({stringSplit_:function(e,t,n=!0){const r=(0,l.YT)(e,"input","stringSplit","string"),i=(0,l.YT)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==i.rank)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const a={skipEmpty:n},o={input:r,delimiter:i},s=c.T2.runKernel(u.iW0,o,a);return{indices:s[0],values:s[1],shape:s[2]}}});const pi=(0,p.op)({stringToHashBucketFast_:function(e,t){const n=(0,l.YT)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return c.T2.runKernel(u.$jE,i,r)}});const hi=(0,p.op)({staticRegexReplace_:function(e,t,n,r=!0){const i=(0,l.YT)(e,"input","staticRegexReplace","string"),a={pattern:t,rewrite:n,replaceGlobal:r};return c.T2.runKernel(u.GZp,{x:i},a)}}),fi={fft:wn.h,ifft:kn.K,rfft:Sn.z,irfft:xn.g},mi={hammingWindow:Sr,hannWindow:Tr,frame:Cr,stft:Er},gi={flipLeftRight:Nr,grayscaleToRGB:Ar,resizeNearestNeighbor:Vr.b,resizeBilinear:Br.v,rgbToGrayscale:Or,rotateWithOffset:Rr,cropAndResize:Ir,nonMaxSuppression:Dr,nonMaxSuppressionAsync:Mr,nonMaxSuppressionWithScore:Fr,nonMaxSuppressionWithScoreAsync:zr,nonMaxSuppressionPadded:$r,nonMaxSuppressionPaddedAsync:jr,threshold:Ur,transform:Gr},_i={bandPart:qr,gramSchmidt:Wr,qr:Kr},vi={absoluteDifference:Jr,computeWeightedLoss:Qr,cosineDistance:Zr,hingeLoss:ei,huberLoss:ti,logLoss:ni,meanSquaredError:ri,sigmoidCrossEntropy:ii,softmaxCrossEntropy:ai},yi={sparseFillEmptyRows:oi,sparseReshape:si,sparseSegmentMean:ci,sparseSegmentSum:ui},bi={stringNGrams:li,stringSplit:di,stringToHashBucketFast:pi,staticRegexReplace:hi}},3019:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({pad_:function(e,t,n=0){const o=(0,a.YT)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:t,constantValue:n},c={x:o};return r.T2.runKernel(i.ODT,c,s)}})},706:(e,t,n)=>{"use strict";n.d(t,{d:()=>p});var r=n(9031),i=n(1109),a=n(107),o=n(7478),s=n(9397),c=n(7165),u=n(7839),l=n(5556),d=n(2802);const p=(0,u.op)({pool_:function(e,t,n,u,p,h,f){null==p&&(p=[1,1]),null==h&&(h=1),0===u&&(u="valid");const m=(0,r.YT)(e,"x","maxPool");let g=m,_=!1;3===m.rank&&(_=!0,g=(0,l.t)(m,[1,m.shape[0],m.shape[1],m.shape[2]])),i.vA(s.G0(h,p),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${h} and dilations '${p}'`));const v=s.E6(g.shape,t,h,p,u),y=[v.dilationHeight,v.dilationWidth];let b;b="same"===u?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),i=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-i[t]));return r.map(((e,t)=>[i[t],a[t]]))}([v.filterHeight,v.filterWidth],y):[[0,0],[0,0]];const w=1===y[0]&&1===y[1],[k,x]=function(e,t,n){const r=n.map((e=>e[0])),i=n.map((e=>e[1])),a=e.concat(r,i),o=t.map(((e,t)=>(e-a[t]%e)%e)),s=i.map(((e,t)=>e+o[t])),c=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,o[t]]));return[c,u]}([v.inHeight,v.inWidth],y,b),S=w?u:"valid",T=w?g:(0,d.e)(g,y,k),C=("avg"===n?()=>(0,a.$)(T,t,h,S,f):()=>(0,c.j)(T,t,h,S,f))(),E=w?C:(0,o.G)(C,y,x);return _?(0,l.t)(E,[E.shape[1],E.shape[2],E.shape[3]]):E}})},3940:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({pow_:function(e,t){let n=(0,o.YT)(e,"base","pow"),s=(0,o.YT)(t,"exp","pow");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.pyJ,c)}})},1212:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({prelu_:function(e,t){const n={x:(0,a.YT)(e,"x","prelu"),alpha:(0,a.YT)(t,"alpha","prelu")};return r.T2.runKernel(i.Ncv,n)}})},845:(e,t,n)=>{"use strict";function r(e,t=!1){console.log(e.toString(t))}n.d(t,{y:()=>r})},9677:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(9339);const s=(0,n(7839).op)({prod_:function(e,t=null,n=!1){let s=(0,a.YT)(e,"x","prod");"bool"===s.dtype&&(s=(0,o.w)(s,"int32"));const c={x:s},u={axis:t,keepDims:n};return r.T2.runKernel(i.kdj,c,u)}})},5388:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({real_:function(e){const t={input:(0,a.YT)(e,"input","real")};return r.T2.runKernel(i.LRy,t)}})},6900:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({reciprocal_:function(e){const t={x:(0,a.YT)(e,"x","reciprocal")};return r.T2.runKernel(i.huO,t)}})},8662:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({relu_:function(e){const t={x:(0,a.YT)(e,"x","relu")};return r.T2.runKernel(i.fUj,t)}})},8757:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({relu6_:function(e){const t={x:(0,a.YT)(e,"x","relu6")};return r.T2.runKernel(i.P_L,t)}})},5556:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({reshape_:function(e,t){const n={x:(0,a.YT)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.T2.runKernel(i.R23,n,o)}})},3788:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({reverse_:function(e,t){const n={x:(0,a.YT)(e,"x","reverse")},o={dims:t};return r.T2.runKernel(i.D7i,n,o)}})},314:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({round_:function(e){const t={x:(0,a.YT)(e,"x","round")};return r.T2.runKernel(i.hVg,t)}})},8822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({rsqrt_:function(e){const t={x:(0,a.YT)(e,"x","rsqrt","float32")};return r.T2.runKernel(i.TOR,t)}})},4964:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(6937),i=n(6265);function a(e,t){if(((0,r.isTypedArray)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.isTypedArray)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,i.Q)(e,[],[],t)}},64:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calculateShapes:()=>o,validateInput:()=>a,validateUpdateShape:()=>i});var r=n(1109);function i(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(let e=0;e<i;++e)if(n.shape[e]!==t.shape[e])throw new Error(a+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-i;++t)if(n.shape[t+i]!==e[t+r])throw new Error(a+` updates.shape[${t+i}] (${n.shape[t+i]}) != shape[${t+i}] (${e[t+i]})`)}function a(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}i(n,t,e)}function o(e,t,n){const i=t.shape.length,a=i>1?t.shape[i-1]:1,o=n.length;let s=1;for(let e=a;e<o;++e)s*=n[e];const c=a<1?1:a;return{sliceRank:a,numUpdates:(0,r.Ze)(t.shape)/c,sliceSize:s,strides:[...(0,r.Ur)(n.slice(0,a)),1],outputSize:(0,r.Ze)(n)}}},3411:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({selu_:function(e){const t={x:(0,a.YT)(e,"x","selu")};return r.T2.runKernel(i.u$b,t)}})},1838:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,j:()=>r});const r=1.7580993408473768,i=1.0507009873554805},5707:(e,t,n)=>{"use strict";n.d(t,{w:()=>u});var r=n(9031),i=n(1109),a=n(2736),o=n(5510),s=n(7839),c=n(5556);const u=(0,s.op)({separableConv2d_:function(e,t,n,s,u,l=[1,1],d="NHWC"){const p=(0,r.YT)(e,"x","separableConv2d"),h=(0,r.YT)(t,"depthwiseFilter","separableConv2d"),f=(0,r.YT)(n,"pointwiseFilter","separableConv2d");let m=p,g=!1;if(3===p.rank&&(g=!0,m=(0,c.t)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");i.vA(4===m.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`)),i.vA(4===h.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${h.rank}.`)),i.vA(4===f.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${h.rank}.`)),i.vA(1===f.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${f.shape[0]}.`)),i.vA(1===f.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${f.shape[1]}.`));const _=h.shape[2],v=h.shape[3];i.vA(f.shape[2]===_*v,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${_*v}, but got ${f.shape[2]}.`));const y=(0,o.G)(m,h,s,u,d,l),b=(0,a.X)(y,f,1,"valid",d);return g?(0,c.t)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},8453:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({sigmoid_:function(e){const t={x:(0,a.YT)(e,"x","sigmoid","float32")};return r.T2.runKernel(i.vI1,t)}})},1753:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({sign_:function(e){const t={x:(0,a.YT)(e,"x","sign")};return r.T2.runKernel(i.YVe,t)}})},1996:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({sin_:function(e){const t={x:(0,a.YT)(e,"x","sin","float32")};return r.T2.runKernel(i.hql,t)}})},9710:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({sinh_:function(e){const t={x:(0,a.YT)(e,"x","sinh")};return r.T2.runKernel(i.J3C,t)}})},5048:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({slice_:function(e,t,n){const o=(0,a.YT)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");const s={x:o},c={begin:t,size:n};return r.T2.runKernel(i.JiE,s,c)}})},1295:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assertParamsValid:()=>o,computeFlatOffset:()=>y,computeOutShape:()=>c,getNormalizedAxes:()=>p,isSliceContinous:()=>v,maskToAxes:()=>s,parseSliceParams:()=>b,sliceInfo:()=>w,startForAxis:()=>g,startIndicesWithElidedDims:()=>h,stopForAxis:()=>_,stopIndicesWithElidedDims:()=>f,stridesForAxis:()=>m,stridesWithElidedDims:()=>u});var r=n(1109);const i=-2,a=-1;function o(e,t,n){const i=e.shape.length;r.vA(i===t.length,(()=>`Error in slice${i}D: Length of begin ${t} must match the rank of the array (${i}).`)),r.vA(i===n.length,(()=>`Error in slice${i}D: Length of size ${n} must match the rank of the array (${i}).`));for(let a=0;a<i;++a)r.vA(t[a]+n[a]<=e.shape[a],(()=>`Error in slice${i}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`))}function s(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function c(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function u(e,t,n,r){const i=[...e];for(let e=i.length;e<r.length;e++)i.push(1);for(let e=0;e<n;e++)0===e?i[t]=1:(i.splice(t,0,1),i.pop());return i}function l(e,t,n){return n<=e?n:n-(t-1)}function d(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function p(e,t,n,r,i,a,o,s,c){const l=e.length;let d=new Array(l),p=new Array(l),v=new Array(l);if(t.length&&n>0){const c=t[0],l=n+1;d=h(o,c,l,r,e),p=f(s,c,l,i,e),v=u(a,c,l,e)}else for(let t=0;t<l;t++)d[t]=g(o,r,a,e,t,c),p[t]=_(s,i,a,e,t,c),v[t]=m(a,t,c);return{begin:d,end:p,strides:v}}function h(e,t,n,r,i){const a=[...i],o=d(n,t);for(let i=0;i<a.length;i++)if(o.indexOf(i)>-1)a[i]=0;else{const o=l(t,n,i);let s=r[o];e&1<<o&&(s=0),a[i]=s}return a}function f(e,t,n,i,a){const o=[...a],s=d(n,t);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=Number.MAX_SAFE_INTEGER;else{const a=l(t,n,r);let s=i[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[r]=s}for(let e=0;e<o.length;e++){const t=a[e];o[e]<0&&(o[e]+=t),o[e]=r.qE(0,o[e],a[e])}return o}function m(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function g(e,t,n,i,a,o){let s=t[a];const c=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=c>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=i[a];return s<0&&(s+=u),s=r.qE(0,s,u-1),s}function _(e,t,n,i,a,o){let s=t[a];const c=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=c>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=i[a];return s<0&&(s+=u),s=c>0?r.qE(0,s,u):r.qE(-1,s,u-1),s}function v(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function y(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function b(e,t,n){let i;const a=e.shape.length;let o;return i="number"==typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),i.forEach((e=>{r.vA(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(a).fill(-1):"number"==typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(r.vA(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-i[n]))),[i,o]}function w(e,t,n,r,o,s,c,u,l){let d;if(null==r?(d=new Array(t.length),d.fill(1)):d=r,null!=c&&c&c-1)throw new Error("Multiple ellipses in slice is not allowed.");let p=!1;const h={dims:d.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:d.slice(),beginMask:o,endMask:s,ellipsisMask:c,newAxisMask:u,shrinkAxisMask:l};for(let e=0;e<h.dims;e++)p&&1<<e&u&&h.numAddAxisAfterEllipsis++,1<<e&c&&(p=!0);p||(h.ellipsisMask|=1<<h.dims,h.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(i),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(a),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,f);let m=!0,g=!0,_=!0;const v=[],y=[];for(let t=0;t<e.length;++t){if(0===f.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(f.shrinkAxisMask&1<<t),r=e[t];if(-1===r){v.push(n?1:-1);continue}const i=[f.beginMask&1<<t,f.endMask&1<<t],a=[f.strides[t]>0?0:-1,f.strides[t]>0?r:r-1];if(n&&f.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");_=_&&1===f.strides[t];const o=!!(f.beginMask&1<<t&&f.endMask&1<<t);if(f.beginValid&&f.endValid){if(n){const e=f.begin[t]<0?r+f.begin[t]:f.begin[t];if(f.begin[t]=e,f.end[t]=f.begin[t]+1,e<0||e>=r)throw Error(`slice index ${f.begin[t]} of dimension ${t} out of bounds.`)}else f.begin[t]=k(f.begin[t],0,f.strides[t],r,i,a),f.end[t]=k(f.end[t],1,f.strides[t],r,i,a);const e=1===f.strides[t]&&0===f.begin[t]&&f.end[t]===r;m=m&&e,g=g&&(0===t&&1===f.strides[t]||e)}else m=m&&1===f.strides[t]&&o,g=g&&(0===t&&1===f.strides[t]||o);let s,c=!1;if(f.beginValid&&f.endValid?(s=f.end[t]-f.begin[t],c=!0):n?(s=1,c=!0):o&&r>=0&&(s=f.strides[t]<0?-r:r,c=!0),c){let e;e=0===s||s<0!=f.strides[t]<0?0:Math.trunc(s/f.strides[t])+(s%f.strides[t]!=0?1:0),v.push(e)}else v.push(-1)}for(let e=0;e<f.finalShapeGatherIndices.length;++e){const t=f.finalShapeGatherIndices[e];t>=0?y.push(v[t]):t===i&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>f.finalShapeGatherIndices[t]!==i)),finalShape:y,isIdentity:m,sliceDim0:g,isSimpleSlice:_,begin:f.begin,end:f.end,strides:f.strides}}function k(e,t,n,r,i,a){if(i[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}},6412:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({softmax_:function(e,t=-1){const n=(0,a.YT)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const o={logits:n},s={dim:t};return r.T2.runKernel(i.rFG,o,s)}})},4224:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({softplus_:function(e){const t={x:(0,a.YT)(e,"x","softplus")};return r.T2.runKernel(i.Fin,t)}})},2802:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({spaceToBatchND_:function(e,t,n){const s=(0,a.YT)(e,"x","spaceToBatchND");o.vA(s.rank>=1+t.length,(()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`)),o.vA(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),o.vA(s.shape.reduce(((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e),!0),(()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const c={x:s},u={blockShape:t,paddings:n};return r.T2.runKernel(i.A8B,c,u)}})},51:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(2215),i=n(6295),a=n(1109);const o=(0,n(7839).op)({fft_:function(e){(0,a.vA)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.T2.runKernel(i.rGP,t)}})},7906:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var r=n(2215),i=n(6295),a=n(1109);const o=(0,n(7839).op)({ifft_:function(e){(0,a.vA)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.T2.runKernel(i.OAQ,t)}})},5900:(e,t,n)=>{"use strict";n.d(t,{g:()=>f});var r=n(9538),i=n(1448),a=n(1374),o=n(7544),s=n(7839),c=n(5388),u=n(5556),l=n(3788),d=n(4964),p=n(5048),h=n(7906);const f=(0,s.op)({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const r=(0,u.t)(e,[n,t]);s=(0,h.K)(r)}else{const f=[n,2*(t-1)],m=(0,u.t)((0,c.x)(e),[n,t]),g=(0,u.t)((0,a.n)(e),[n,t]),_=(0,l.B)((0,p.d)(m,[0,1],[n,t-2]),1),v=(0,o.l)((0,l.B)((0,p.d)(g,[0,1],[n,t-2]),1),(0,d.d)(-1)),y=(0,i.x)([m,_],1),b=(0,i.x)([g,v],1),w=(0,u.t)((0,r.f)(y,b),[f[0],f[1]]);s=(0,h.K)(w)}if(s=(0,c.x)(s),3===e.rank&&0!==e.shape[0]){const t=s,n=e.shape[0];s=(0,u.t)(s,[n,s.shape[0]/n,s.shape[1]]),t.dispose()}return s}})},1121:(e,t,n)=>{"use strict";n.d(t,{z:()=>m});var r=n(1109),i=n(9538),a=n(1448),o=n(1374),s=n(7839),c=n(5388),u=n(5556),l=n(5048),d=n(5274),p=n(8845),h=n(3107),f=n(51);const m=(0,s.op)({rfft_:function(e,t){(0,r.vA)("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const s=e.size/n;let m;if(null!=t&&t<n){const r=e.shape.map((e=>0)),i=e.shape.map((e=>e));i[e.shape.length-1]=t,m=(0,l.d)(e,r,i),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,m=(0,a.x)([e,(0,p.U)(r)],e.shape.length-1),n=t}else m=e;const g=(0,h.P)(m),_=(0,u.t)((0,i.f)(m,g),[s,n]),v=(0,f.h)(_),y=Math.floor(n/2)+1,b=(0,c.x)(v),w=(0,o.n)(v),k=(0,d.l)(b,[y,n-y],b.shape.length-1),x=(0,d.l)(w,[y,n-y],w.shape.length-1),S=m.shape.slice();return S[m.shape.length-1]=y,(0,u.t)((0,i.f)(k[0],x[0]),S)}})},5274:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({split_:function(e,t,n=0){const o={x:(0,a.YT)(e,"x","split")},s={numOrSizeSplits:t,axis:n};return r.T2.runKernel(i.Blb,o,s)}})},2654:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({sqrt_:function(e){const t={x:(0,a.YT)(e,"x","sqrt","float32")};return r.T2.runKernel(i.dFH,t)}})},5843:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(2215),i=n(9031);const a=(0,n(7839).op)({square_:function(e){const t=(0,i.YT)(e,"x","square");return r.T2.runKernel("Square",{x:t},{})}})},2922:(e,t,n)=>{"use strict";n.d(t,{P:()=>c});var r=n(2215),i=n(6295),a=n(2067),o=n(9031),s=n(7600);const c=(0,n(7839).op)({squaredDifference_:function(e,t){let n=(0,o.YT)(e,"a","squaredDifference"),c=(0,o.YT)(t,"b","squaredDifference");[n,c]=(0,a.makeTypesMatch)(n,c),(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);const u={a:n,b:c};return r.T2.runKernel(i.Ddj,u,{})}})},8610:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(9031),i=n(1109),a=n(7839),o=n(5556);const s=(0,a.op)({squeeze_:function(e,t){const n=(0,r.YT)(e,"x","squeeze","string_or_numeric");return(0,o.t)(n,(0,i.gx)(n.shape,t).newShape)}})},1686:(e,t,n)=>{"use strict";n.d(t,{t:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({stack_:function(e,t=0){const n=(0,a.j1)(e,"tensors","stack","string_or_numeric");o.vA(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&o.vA(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const s=n,c={axis:t};return r.T2.runKernel(i.mM$,s,c)}})},794:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({step_:function(e,t=0){const n={x:(0,a.YT)(e,"x","step")},o={alpha:t};return r.T2.runKernel(i.pnw,n,o)}})},9128:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({stridedSlice_:function(e,t,n,o,s=0,c=0,u=0,l=0,d=0){const p={x:(0,a.YT)(e,"x","stridedSlice","string_or_numeric")},h={begin:t,end:n,strides:o,beginMask:s,endMask:c,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:d};return r.T2.runKernel(i.UcO,p,h)}})},6964:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var r=n(2215),i=n(6295),a=n(2067),o=n(9031);const s=(0,n(7839).op)({sub_:function(e,t){let n=(0,o.YT)(e,"a","sub"),s=(0,o.YT)(t,"b","sub");[n,s]=(0,a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.T2.runKernel(i.PbM,c)}})},4857:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(9339);const s=(0,n(7839).op)({sum_:function(e,t=null,n=!1){let s=(0,a.YT)(e,"x","sum");"bool"===s.dtype&&(s=(0,o.w)(s,"int32"));const c={x:s},u={axis:t,keepDims:n};return r.T2.runKernel(i.WuN,c,u)}})},1129:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({tan_:function(e){const t={x:(0,a.YT)(e,"x","tan","float32")};return r.T2.runKernel(i.oFs,t)}})},5949:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({tanh_:function(e){const t={x:(0,a.YT)(e,"x","tanh","float32")};return r.T2.runKernel(i.iuW,t)}})},61:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var r=n(9031),i=n(6265);function a(e,t,n){const a=(0,r.MZ)(e,n);return(0,i.Q)(e,t,a,n)}},9270:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(9031),i=n(1109),a=n(6265);function o(e,t,n){if((0,i.HO)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const o=(0,r.MZ)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,a.Q)(e,t,o,n)}},6265:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(2215),i=n(9452),a=n(1109),o=n(6937);function s(e,t,n,s){if(null==s)s=(0,a.X$)(e);else if("complex64"===s)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if((0,i.Nw)(e)||(0,i.Oj)(e)){if("float32"!==s&&"int32"!==s)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return r.T2.backend.createTensorFromGPUData(e,t||n,s)}if(!(0,o.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.SA)(t);const e=(0,a.Ze)(t),r=(0,a.Ze)(n);(0,a.vA)(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],i=e!==n.length-1||r!==(0,a.Ze)(t.slice(e));(0,a.vA)(n[e]===t[e]||!i,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return(0,o.isTypedArray)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==s?(0,o.toTypedArray)(e,s):(0,o.flatten)(e,[],!0),r.T2.makeTensor(e,t,s)}},9884:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({tile_:function(e,t){const n=(0,a.YT)(e,"x","tile","string_or_numeric");o.vA(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const s={x:n},c={reps:t};return r.T2.runKernel(i.FAs,s,c)}})},744:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({topk_:function(e,t=1,n=!0){const o=(0,a.YT)(e,"x","topk");if(0===o.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=o.shape[o.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);const c={x:o},u={k:t,sorted:n},[l,d]=r.T2.runKernel(i.TBb,c,u);return{values:l,indices:d}}})},3345:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var r=n(2215),i=n(7534),a=n(6295),o=n(9031),s=n(1109),c=n(9538),u=n(1374),l=n(168),d=n(7839),p=n(5388);const h=(0,d.op)({transpose_:function(e,t,n){const d=(0,o.YT)(e,"x","transpose");if(null==t&&(t=d.shape.map(((e,t)=>t)).reverse()),s.vA(d.rank===t.length,(()=>`Error in transpose: rank of input ${d.rank} must match length of perm ${t}.`)),t.forEach((e=>{s.vA(e>=0&&e<d.rank,(()=>"All entries in 'perm' must be between 0 and "+(d.rank-1)+` but got ${t}`))})),d.rank<=1)return d.clone();const h={x:d},f={perm:t};return"complex64"===d.dtype?(0,i.DZ)((()=>{let e=(0,p.x)(d),t=(0,u.n)(d);return e=r.T2.runKernel(a.wx0,{x:e},f),t=r.T2.runKernel(a.wx0,{x:t},f),n&&(t=(0,l.H)(t)),(0,c.f)(e,t)})):r.T2.runKernel(a.wx0,h,f)}})},5935:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({unique_:function(e,t=0){const n=(0,a.YT)(e,"x","unique","string_or_numeric");(0,o.vA)(n.rank>0,(()=>"The input tensor must be at least 1D"));const s={x:n},c={axis:t},[u,l]=r.T2.runKernel(i.EwU,s,c);return{values:u,indices:l}}})},6732:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({unsortedSegmentSum_:function(e,t,n){const s=(0,a.YT)(e,"x","unsortedSegmentSum"),c=(0,a.YT)(t,"segmentIds","unsortedSegmentSum","int32");(0,o.vA)((0,o.E6)(n),(()=>"numSegments must be of dtype int"));const u={x:s,segmentIds:c},l={numSegments:n};return r.T2.runKernel(i.pPe,u,l)}})},835:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var r=n(2215),i=n(6295),a=n(9031),o=n(1109);const s=(0,n(7839).op)({unstack_:function(e,t=0){const n=(0,a.YT)(e,"x","unstack","string_or_numeric");o.vA(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const s={value:n},c={axis:t};return r.T2.runKernel(i.dXR,s,c)}})},7133:(e,t,n)=>{"use strict";n.d(t,{_:()=>c});var r=n(2215),i=n(6295),a=n(9031),o=n(4789),s=n(7600);const c=(0,n(7839).op)({where_:function(e,t,n){const c=(0,a.YT)(t,"a","where"),u=(0,a.YT)(n,"b","where"),l=(0,a.YT)(e,"condition","where","bool"),d=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(l.shape,c.shape),u.shape),p={condition:(0,o.h)(l,d),t:(0,o.h)(c,d),e:(0,o.h)(u,d)};return r.T2.runKernel(i.l6P,p)}})},8845:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(2215),i=n(1109),a=n(9538);function o(e,t="float32"){if((0,i.SA)(e),"complex64"===t){const t=o(e,"float32"),n=o(e,"float32");return(0,a.f)(t,n)}const n=(0,i.Ty)((0,i.Ze)(e),t);return r.T2.makeTensor(n,e,t)}},3107:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(2215),i=n(6295),a=n(9031);const o=(0,n(7839).op)({zerosLike_:function(e){const t={x:(0,a.YT)(e,"x","zerosLike")};return r.T2.runKernel(i.xJ3,t)}})},3506:(e,t,n)=>{"use strict";function r(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}n.d(t,{Y:()=>r})},5225:(e,t,n)=>{"use strict";n.d(t,{qY:()=>v,yl:()=>d,rT:()=>b,tp:()=>y,B4:()=>_,Q5:()=>g,qP:()=>m});var r=n(3529),i=n(1109);function a(e,t,n,r){const a=(0,i.Ur)(t),s=function(e,t,n,r){const a=(0,i.Ze)(t),s=r[r.length-1],c=new Array(s).fill(0),l=t.length,d="complex64"===n?u(e):e;if(l>1)for(let e=0;e<a/s;e++){const t=e*s;for(let e=0;e<s;e++)c[e]=Math.max(c[e],o(d[t+e],0,n).length)}return c}(e,t,n,a),l=t.length,d=c(e,t,n,a,s),p=["Tensor"];return r&&(p.push(`  dtype: ${n}`),p.push(`  rank: ${l}`),p.push(`  shape: [${t}]`),p.push("  values:")),p.push(d.map((e=>"    "+e)).join("\n")),p.join("\n")}function o(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:(0,i.Kg)(e)?`'${e}'`:"bool"===n?s(e):parseFloat(e.toFixed(7)).toString(),(0,i.av)(r,t)}function s(e){return 0===e?"false":"true"}function c(e,t,n,r,i,a=!0){const l="complex64"===n?2:1,d=t[0],p=t.length;if(0===p){if("complex64"===n){return[o(u(e)[0],0,n)]}return"bool"===n?[s(e[0])]:[e[0].toString()]}if(1===p){if(d>20){const t=3*l;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((d-3)*l,d*l));return"complex64"===n&&(r=u(r),a=u(a)),["["+r.map(((e,t)=>o(e,i[t],n))).join(", ")+", ..., "+a.map(((e,t)=>o(e,i[d-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?u(e):Array.from(e)).map(((e,t)=>o(e,i[t],n))).join(", ")+"]"]}const h=t.slice(1),f=r.slice(1),m=r[0]*l,g=[];if(d>20){for(let t=0;t<3;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,i,!1))}g.push("...");for(let t=d-3;t<d;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,i,t===d-1))}}else for(let t=0;t<d;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,i,t===d-1))}const _=2===p?",":"";g[0]="["+(d>0?g[0]+_:"");for(let e=1;e<g.length-1;e++)g[e]=" "+g[e]+_;let v=",\n";for(let e=2;e<p;e++)v+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(a?"":v),g}function u(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var l=n(6937);class d{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=i.Ze(e),null!=n){const e=n.length;i.vA(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||i.Ab(t,this.size),this.strides=(0,i.Ur)(e)}set(e,...t){0===t.length&&(t=[0]),i.vA(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,h=null,f=null;function m(e){p=e}function g(e){h=e}function _(e){f=e}class v{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=i.Ze(e),this.strides=(0,i.Ur)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return h.buffer(this.shape,this.dtype,e)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return(0,i.yw)(this.shape,e,"complex64"===this.dtype)}arraySync(){return(0,i.yw)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=p().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),p().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=p().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await p().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return h.print(this,e)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(e=!1){return a(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),h.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),p().makeVariable(this,e,t,n)}}function y(){return(0,r.m)("Tensor",(()=>v))}Object.defineProperty(v,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),y();class b extends v{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!i.r1(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=e.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(b,Symbol.hasInstance,{value:e=>e instanceof v&&null!=e.assign&&e.assign instanceof Function})},2067:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assertTypesMatch:()=>s,getTensorsInContainer:()=>u,isTensorInList:()=>c,makeTypesMatch:()=>o});var r=n(5225),i=n(9452),a=n(1109);function o(e,t){if(e.dtype===t.dtype)return[e,t];const n=(0,i.Tu)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,a.vA)(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}function c(e,t){return t.some((t=>t.id===e.id))}function u(e){const t=[];return l(e,t,new Set),t}function l(e,t,n){if(null==e)return;if(e instanceof r.qY)return void t.push(e);if(i=e,!Array.isArray(i)&&"object"!=typeof i)return;var i;const a=e;for(const e in a){const r=a[e];n.has(r)||(n.add(r),l(r,t,n))}}},9031:(e,t,n)=>{"use strict";n.d(t,{MZ:()=>u,YT:()=>p,j1:()=>h});var r=n(2215),i=n(5168),a=n(5225),o=n(9452),s=n(6937),c=n(1109);function u(e,t){let n=e;if((0,s.isTypedArray)(e))return"string"===t?[]:[e.length];if((0,o.Oj)(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if((0,o.Nw)(e))return[e.buffer.size/(null==t?4:(0,c.jv)(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||(0,s.isTypedArray)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,i._K)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&l(e,r,[]),r}function l(e,t,n){if(n=n||[],!Array.isArray(e)&&!(0,s.isTypedArray)(e))return void(0,c.vA)(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));(0,c.vA)(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),(0,c.vA)(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)l(e[t],r,n.concat(t))}function d(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function p(e,t,n,i="numeric"){if(e instanceof(0,a.tp)())return d(i,e.dtype,t,n),e;let o=(0,c.X$)(e);if("string"!==o&&["bool","int32","float32"].indexOf(i)>=0&&(o=i),d(i,o,t,n),null==e||!(0,s.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const l=u(e,o);(0,s.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const p="string"!==o?(0,s.toTypedArray)(e,o):(0,s.flatten)(e,[],!0);return r.T2.makeTensor(p,l,o)}function h(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,i)=>p(e,`${t}[${i}]`,n,r)))}},9452:(e,t,n)=>{"use strict";var r,i,a,o,s;n.d(t,{Nw:()=>p,Oj:()=>d,Tu:()=>u,ch:()=>l,rg:()=>r}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));const c={float32:o,int32:i,bool:a,complex64:s};function u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return c[e][t]}function l(e){return u(e,"int32")}function d(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function p(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}},6937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arraysEqual:()=>a.r1,arraysEqualWithNull:()=>a.e_,assert:()=>a.vA,assertNonNegativeIntegerDimensions:()=>a.SA,assertNonNull:()=>a.HO,assertShapesMatch:()=>a.O3,bytesFromStringArray:()=>a.SL,bytesPerElement:()=>a.jv,checkConversionForErrors:()=>a.nd,clamp:()=>a.qE,computeStrides:()=>a.Ur,convertBackendValuesAndArrayBuffer:()=>a.o2,createScalarValue:()=>b,createShuffledIndices:()=>a.P8,decodeString:()=>T,distSquared:()=>a.oO,encodeString:()=>S,fetch:()=>x,fingerPrint64:()=>y,flatten:()=>E,getArrayFromDType:()=>a.Ab,getTypedArrayFromDType:()=>a.ce,hasEncodingLoss:()=>a.BE,hexToLong:()=>c,indexToLoc:()=>a._k,inferDtype:()=>a.X$,inferFromImplicitShape:()=>a.XT,isBoolean:()=>a.Lm,isFunction:()=>a.Tn,isInt:()=>a.E6,isNumber:()=>a.Et,isPromise:()=>a.yL,isScalarShape:()=>a.Sf,isString:()=>a.Kg,isTypedArray:()=>C,isValidDtype:()=>a.xn,locToIndex:()=>a.sX,makeOnesTypedArray:()=>a.FZ,makeZerosNestedTypedArray:()=>a.c7,makeZerosTypedArray:()=>a.Ty,nearestDivisor:()=>a.lK,nearestLargerEven:()=>a.eV,now:()=>k,parseAxisParam:()=>a.Y6,randUniform:()=>a.so,repeatedTry:()=>a._q,rightPad:()=>a.av,shuffle:()=>a.k4,shuffleCombo:()=>a.a0,sizeFromShape:()=>a.Ze,sizeToSquarishShape:()=>a.gS,squeezeShape:()=>a.gx,sum:()=>a.cz,swap:()=>a.wg,tanh:()=>a.ym,toNestedArray:()=>a.yw,toTypedArray:()=>w});var r=n(5168),i=n(3506),a=n(1109),o=n(9416);const s=n.n(o)()||o;function c(e){return s.fromString(e,!0,16)}const u=c("c3a5c85c97cb3127"),l=c("b492b66fbe98f273"),d=c("9ae16a3b2f90404f");function p(e){return e.xor(e.shru(47))}function h(e,t,n){const r=e.slice(t,t+n);return s.fromBytes(Array.from(r),!0,!0)}function f(e,t){return h(e,t,8)}function m(e,t){return h(e,t,4)}function g(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function _(e,t,n=c("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function v(e,t,n,r){return function(e,t,n,r,i,a){i=i.add(e),a=g(a.add(i).add(r),21);const o=i;return i=(i=i.add(t)).add(n),a=a.add(g(i,44)),[i.add(r),a.add(o)]}(f(e,t),f(e,t+8),f(e,t+16),f(e,t+24),n,r)}function y(e,t=e.length){const n=s.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=d.add(2*t),r=f(e,0).add(d),i=f(e,t-8);return _(g(i,37).mul(n).add(r),g(r,25).add(i).mul(n),n)}if(t>=4){const n=d.add(2*t);return _(m(e,0).shl(3).add(t),m(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return p(d.mul(n).xor(u.mul(r))).mul(d)}return d}(e,t):function(e,t=e.length){const n=d.add(2*t),r=f(e,0).mul(l),i=f(e,8),a=f(e,t-8).mul(n),o=f(e,t-16).mul(d);return _(g(r.add(i),43).add(g(a,30)).add(o),r.add(g(i.add(d),18)).add(a),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=d.add(2*t),r=f(e,0).mul(d),i=f(e,8),a=f(e,t-8).mul(n),o=f(e,t-16).mul(d),s=g(r.add(i),43).add(g(a,30)).add(o),c=_(s,r.add(g(i.add(d),18)).add(a),n),u=f(e,16).mul(n),l=f(e,24),p=s.add(f(e,t-32)).mul(n),h=c.add(f(e,t-24)).mul(n);return _(g(u.add(l),43).add(g(p,30)).add(h),u.add(g(l.add(r),18)).add(p),n)}(e,t);let r=n,i=n.mul(l).add(113),a=p(i.mul(d).add(113)).mul(d),o=[s.UZERO,s.UZERO],c=[s.UZERO,s.UZERO];r=r.mul(d).add(f(e,0));let h=0;const y=64*(t-1>>6),b=y+(t-1&63)-63;do{r=g(r.add(i).add(o[0]).add(f(e,h+8)),37).mul(l),i=g(i.add(o[1]).add(f(e,h+48)),42).mul(l),r=r.xor(c[1]),i=i.add(o[0]).add(f(e,h+40)),a=g(a.add(c[0]),33).mul(l),o=v(e,h,o[1].mul(l),r.add(c[0])),c=v(e,h+32,a.add(c[1]),i.add(f(e,h+16))),[a,r]=[r,a],h+=64}while(h!==y);const w=l.add(a.and(255).shl(1));return h=b,c[0]=c[0].add(t-1&63),o[0]=o[0].add(c[0]),c[0]=c[0].add(o[0]),r=g(r.add(i).add(o[0]).add(f(e,h+8)),37).mul(w),i=g(i.add(o[1]).add(f(e,h+48)),42).mul(w),r=r.xor(c[1].mul(9)),i=i.add(o[0].mul(9).add(f(e,h+40))),a=g(a.add(c[0]),33).mul(w),o=v(e,h,o[1].mul(w),r.add(c[0])),c=v(e,h+32,a.add(c[1]),i.add(f(e,h+16))),[a,r]=[r,a],_(_(o[0],c[0],w).add(p(i).mul(u)).add(a),_(o[1],c[1],w).add(r),w)}function b(e,t){return"string"===t?S(e):w([e],t)}function w(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=E(e)),(0,r._K)().getBool("DEBUG")&&a.nd(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function k(){return(0,r._K)().platform.now()}function x(e,t){return(0,r._K)().platform.fetch(e,t)}function S(e,t="utf-8"){return t=t||"utf-8",(0,r._K)().platform.encode(e,t)}function T(e,t="utf-8"){return t=t||"utf-8",(0,r._K)().platform.decode(e,t)}function C(e){return null!=(0,r._K)().platform.isTypedArray?(0,r._K)().platform.isTypedArray(e):(0,i.Y)(e)}function E(e,t=[],n=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||a.yL(e)||null==e||C(e)&&n)t.push(e);else if(Array.isArray(e)||C(e))for(let r=0;r<e.length;++r)E(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)E(e[i],t,n)}return t}},1109:(e,t,n)=>{"use strict";function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,s(e,t,n)}function i(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,s(e,n,r),s(t,n,r)}function a(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2==0?e:e+1}function s(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function c(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function u(e,t){const n=Math.random();return t*n+(1-n)*e}function l(e,t){let n=0;for(let r=0;r<e.length;r++){const i=Number(e[r])-Number(t[r]);n+=i*i}return n}function d(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n=""){d(_(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function h(e){d(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function f(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function m(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function _(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function v(e){return e%1==0}function y(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function b(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function x(e,t=e=>0,n,r){return new Promise(((i,a)=>{let o=0;const s=()=>{if(e())return void i();o++;const c=t(o);null!=n&&o>=n?a():null!=r?r(s,c):setTimeout(s,c)};s()}))}function S(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function T(e,t){const n=t.length;return d((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),d(e.every((e=>v(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function C(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||i?null:T(t,e).sort();let o=0;for(let t=0;t<e.length;++t){if(null!=a){if(a[o]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==a[o]||a[o]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),a[o]<=t&&o++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function E(e,t){return I(e,t)}function I(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function N(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function A(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function O(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function R(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function P(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function D(e){return"string"==typeof e||e instanceof String}function L(e){return"boolean"==typeof e}function M(e){return"number"==typeof e}function F(e){return Array.isArray(e)?F(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":M(e)?"float32":D(e)?"string":L(e)?"bool":"float32"}function z(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function j(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function B(e,t,n,r=!1){const i=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)i[t]=n[e+t]}else{const a=t[0],o=t.slice(1),s=o.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)i[t]=B(e+t*s,o,n,r)}return i}function V(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return B(0,e,t,n)}function U(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function G(e,t){const n=q(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function q(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function W(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return V(e,new Float32Array(n));if("int32"===t)return V(e,new Int32Array(n));if("bool"===t)return V(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function H(e){e.forEach((t=>{d(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function Y(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function K(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function X(e){return e&&e.then&&"function"==typeof e.then}n.d(t,{Ab:()=>I,BE:()=>O,E6:()=>v,Et:()=>M,FZ:()=>G,HO:()=>h,Kg:()=>D,Lm:()=>L,O3:()=>p,P8:()=>w,SA:()=>H,SL:()=>P,Sf:()=>m,Tn:()=>z,Ty:()=>q,Ur:()=>j,X$:()=>F,XT:()=>S,Y6:()=>T,Ze:()=>f,_k:()=>K,_q:()=>x,a0:()=>i,av:()=>k,c7:()=>W,ce:()=>E,cz:()=>c,eV:()=>o,e_:()=>g,gS:()=>b,gx:()=>C,jv:()=>R,k4:()=>r,lK:()=>$,nd:()=>N,o2:()=>U,oO:()=>l,qE:()=>a,r1:()=>_,sX:()=>Y,so:()=>u,vA:()=>d,wg:()=>s,xn:()=>A,yL:()=>X,ym:()=>y,yw:()=>V})},6502:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={},a={};a[n]=0;var o,s,c,u,l,d,p,h=t.PriorityQueue.make();for(h.push(n,0);!h.empty();)for(c in s=(o=h.pop()).value,u=o.cost,l=e[s]||{})l.hasOwnProperty(c)&&(d=u+l[c],p=a[c],(void 0===a[c]||p>d)&&(a[c]=d,h.push(c,d),i[c]=s));if(void 0!==r&&void 0===a[r]){var f=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,i={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},29:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,a,o,u;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,o;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},6691:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,n)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},h.apply(this,arguments)}function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var m=function(e){return!(!e||!e.Window)&&e instanceof e.Window},g=void 0,_=void 0;function v(e){g=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),_=e}function y(e){return m(e)?e:(e.ownerDocument||e).defaultView||_.window}"undefined"!=typeof window&&window&&v(window);var b=function(e){return!!e&&"object"===r(e)},w=function(e){return"function"==typeof e},k={window:function(e){return e===_||m(e)},docFrag:function(e){return b(e)&&11===e.nodeType},object:b,func:w,number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==r(e))return!1;var t=y(e)||_;return/object|function/.test("undefined"==typeof Element?"undefined":r(Element))?e instanceof Element||e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return b(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return b(e)&&void 0!==e.length&&w(e.splice)}};function x(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function S(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var i="x"===r?"y":"x";t.page[i]=n.coords.start.page[i],t.client[i]=n.coords.start.client[i],t.delta[i]=0}}}var T={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.draggable=T.draggable,t.map.drag=T,t.methodDict.drag="draggable",r.actions.drag=T.defaults},listeners:{"interactions:before-action-move":x,"interactions:action-resume":x,"interactions:action-move":S,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.buttons,i=n.options.drag;if(i&&i.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||r&n.options.drag.mouseButtons))return e.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(e){return k.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):k.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:x,move:S,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(e){return 0===e.search("drag")}},C=T,E={init:function(e){var t=e;E.document=t.document,E.DocumentFragment=t.DocumentFragment||I,E.SVGElement=t.SVGElement||I,E.SVGSVGElement=t.SVGSVGElement||I,E.SVGElementInstance=t.SVGElementInstance||I,E.Element=t.Element||I,E.HTMLElement=t.HTMLElement||E.Element,E.Event=t.Event,E.Touch=t.Touch||I,E.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function I(){}var N=E,A={init:function(e){var t=N.Element,n=e.navigator||{};A.supportsTouch="ontouchstart"in e||k.func(e.DocumentTouch)&&N.document instanceof e.DocumentTouch,A.supportsPointerEvent=!1!==n.pointerEnabled&&!!N.PointerEvent,A.isIOS=/iP(hone|od|ad)/.test(n.platform),A.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),A.isIe9=/MSIE 9/.test(n.userAgent),A.isOperaMobile="Opera"===n.appName&&A.supportsTouch&&/Presto/.test(n.userAgent),A.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",A.pEventTypes=A.supportsPointerEvent?N.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,A.wheelEvent=N.document&&"onmousewheel"in N.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},O=A;function R(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function P(e,t){for(;k.element(e);){if(L(e,t))return e;e=D(e)}return null}function D(e){var t=e.parentNode;if(k.docFrag(t)){for(;(t=t.host)&&k.docFrag(t););return t}return t}function L(e,t){return _!==g&&(t=t.replace(/\/deep\//g," ")),e[O.prefixedMatchesSelector](t)}var M=function(e){return e.parentNode||e.host};function F(e,t){for(var n,r=[],i=e;(n=M(i))&&i!==t&&n!==i.ownerDocument;)r.unshift(i),i=n;return r}function z(e,t,n){for(;k.element(e);){if(L(e,t))return!0;if((e=D(e))===n)return L(e,t)}return!1}function $(e){return e.correspondingUseElement||e}function j(e){var t=e instanceof N.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function B(e){var t,n=j(e);if(!O.isIOS7&&n){var r={x:(t=(t=y(e))||_).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop};n.left+=r.x,n.right+=r.x,n.top+=r.y,n.bottom+=r.y}return n}function V(e){for(var t=[];e;)t.push(e),e=D(e);return t}function U(e){return!!k.string(e)&&(N.document.querySelector(e),!0)}function G(e,t){for(var n in t)e[n]=t[n];return e}function q(e,t,n){return"parent"===e?D(n):"self"===e?t.getRect(n):P(n,e)}function W(e,t,n,r){var i=e;return k.string(i)?i=q(i,t,n):k.func(i)&&(i=i.apply(void 0,r)),k.element(i)&&(i=B(i)),i}function H(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}}function Y(e){return!e||"x"in e&&"y"in e||((e=G({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e}function K(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top}function X(e,t,n){var r=n&&e.options[n];return H(W(r&&r.origin||e.options.origin,e,t,[e&&t]))||{x:0,y:0}}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!0},r=arguments.length>3?arguments[3]:void 0;if(r=r||{},k.string(e)&&-1!==e.search(" ")&&(e=J(e)),k.array(e))return e.forEach((function(e){return Q(e,t,n,r)})),r;if(k.object(e)&&(t=e,e=""),k.func(t)&&n(e))r[e]=r[e]||[],r[e].push(t);else if(k.array(t))for(var i=0,a=t;i<a.length;i++){var o=a[i];Q(e,o,n,r)}else if(k.object(t))for(var s in t)Q(J(s).map((function(t){return"".concat(e).concat(t)})),t[s],n,r);return r}function J(e){return e.trim().split(/ +/)}var Z=function(e,t){return Math.sqrt(e*e+t*t)},ee=["webkit","moz"];function te(e,t){e.__set||(e.__set={});var n=function(n){if(ee.some((function(e){return 0===n.indexOf(e)})))return 1;"function"!=typeof e[n]&&"__set"!==n&&Object.defineProperty(e,n,{get:function(){return n in e.__set?e.__set[n]:e.__set[n]=t[n]},set:function(t){e.__set[n]=t},configurable:!0})};for(var r in t)n(r);return e}function ne(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function re(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0}function ie(e){return e instanceof N.Event||e instanceof N.Touch}function ae(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function oe(e,t){return t=t||{x:0,y:0},O.isOperaMobile&&ie(e)?(ae("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):ae("page",e,t),t}function se(e){return k.number(e.pointerId)?e.pointerId:e.identifier}function ce(e,t,n){var r=t.length>1?le(t):t[0];oe(r,e.page),function(e,t){t=t||{},O.isOperaMobile&&ie(e)?ae("screen",e,t):ae("client",e,t)}(r,e.client),e.timeStamp=n}function ue(e){var t=[];return k.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function le(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var r=e[n];for(var i in t)t[i]+=r[i]}for(var a in t)t[a]/=e.length;return t}function de(e){if(!e.length)return null;var t=ue(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),i=Math.max(t[0].pageX,t[1].pageX),a=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,right:i,bottom:a,width:i-n,height:a-r}}function pe(e,t){var n=t+"X",r=t+"Y",i=ue(e),a=i[0][n]-i[1][n],o=i[0][r]-i[1][r];return Z(a,o)}function he(e,t){var n=t+"X",r=t+"Y",i=ue(e),a=i[1][n]-i[0][n],o=i[1][r]-i[0][r];return 180*Math.atan2(o,a)/Math.PI}function fe(e){return k.string(e.pointerType)?e.pointerType:k.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof N.Touch?"touch":"mouse"}function me(e){var t=k.func(e.composedPath)?e.composedPath():e.path;return[$(t?t[0]:e.target),$(e.currentTarget)]}var ge=function(){function e(t){i(this,e),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=t}return o(e,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),e}();Object.defineProperty(ge.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var _e=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}return e},ve=function(e){return _e([],e)},ye=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1},be=function(e,t){return e[ye(e,t)]},we=function(e){c(n,e);var t=p(n);function n(e,r,a){var o;i(this,n),(o=t.call(this,r._interaction)).dropzone=void 0,o.dragEvent=void 0,o.relatedTarget=void 0,o.draggable=void 0,o.propagationStopped=!1,o.immediatePropagationStopped=!1;var s="dragleave"===a?e.prev:e.cur,c=s.element,u=s.dropzone;return o.type=a,o.target=c,o.currentTarget=c,o.dropzone=u,o.dragEvent=r,o.relatedTarget=r.target,o.draggable=r.interactable,o.timeStamp=r.timeStamp,o}return o(n,[{key:"reject",value:function(){var e=this,t=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&t.cur.dropzone===this.dropzone&&t.cur.element===this.target)if(t.prev.dropzone=this.dropzone,t.prev.element=this.target,t.rejected=!0,t.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=t.activeDrops,i=ye(r,(function(t){var n=t.dropzone,r=t.element;return n===e.dropzone&&r===e.target}));t.activeDrops.splice(i,1);var a=new n(t,this.dragEvent,"dropdeactivate");a.dropzone=this.dropzone,a.target=this.target,this.dropzone.fire(a)}else this.dropzone.fire(new n(t,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),n}(ge);function ke(e,t){for(var n=0,r=e.slice();n<r.length;n++){var i=r[n],a=i.dropzone,o=i.element;t.dropzone=a,t.target=o,a.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function xe(e,t){for(var n=function(e,t){for(var n=[],r=0,i=e.interactables.list;r<i.length;r++){var a=i[r];if(a.options.drop.enabled){var o=a.options.drop.accept;if(!(k.element(o)&&o!==t||k.string(o)&&!L(t,o)||k.func(o)&&!o({dropzone:a,draggableElement:t})))for(var s=0,c=a.getAllElements();s<c.length;s++){var u=c[s];u!==t&&n.push({dropzone:a,element:u,rect:a.getRect(u)})}}}return n}(e,t),r=0;r<n.length;r++){var i=n[r];i.rect=i.dropzone.getRect(i.element)}return n}function Se(e,t,n){for(var r=e.dropState,i=e.interactable,a=e.element,o=[],s=0,c=r.activeDrops;s<c.length;s++){var u=c[s],l=u.dropzone,d=u.element,p=u.rect,h=l.dropCheck(t,n,i,a,d,p);o.push(h?d:null)}var f=function(e){for(var t,n,r,i=[],a=0;a<e.length;a++){var o=e[a],s=e[t];if(o&&a!==t)if(s){var c=M(o),u=M(s);if(c!==o.ownerDocument)if(u!==o.ownerDocument)if(c!==u){i=i.length?i:F(s);var l=void 0;if(s instanceof N.HTMLElement&&o instanceof N.SVGElement&&!(o instanceof N.SVGSVGElement)){if(o===u)continue;l=o.ownerSVGElement}else l=o;for(var d=F(l,s.ownerDocument),p=0;d[p]&&d[p]===i[p];)p++;var h=[d[p-1],d[p],i[p]];if(h[0])for(var f=h[0].lastChild;f;){if(f===h[1]){t=a,i=d;break}if(f===h[2])break;f=f.previousSibling}}else r=s,(parseInt(y(n=o).getComputedStyle(n).zIndex,10)||0)>=(parseInt(y(r).getComputedStyle(r).zIndex,10)||0)&&(t=a);else t=a}else t=a}return t}(o);return r.activeDrops[f]||null}function Te(e,t,n){var r=e.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new we(r,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new we(r,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(i.leave=new we(r,n,"dragleave"),n.dragLeave=i.leave.target=r.prev.element,n.prevDropzone=i.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(i.enter=new we(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(i.drop=new we(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(i.move=new we(r,n,"dropmove"),n.dropzone=r.cur.dropzone)),i}function Ce(e,t){var n=e.dropState,r=n.activeDrops,i=n.cur,a=n.prev;t.leave&&a.dropzone.fire(t.leave),t.enter&&i.dropzone.fire(t.enter),t.move&&i.dropzone.fire(t.move),t.drop&&i.dropzone.fire(t.drop),t.deactivate&&ke(r,t.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function Ee(e,t){var n=e.interaction,r=e.iEvent,i=e.event;if("dragmove"===r.type||"dragend"===r.type){var a=n.dropState;t.dynamicDrop&&(a.activeDrops=xe(t,n.element));var o=r,s=Se(n,o,i);a.rejected=a.rejected&&!!s&&s.dropzone===a.cur.dropzone&&s.element===a.cur.element,a.cur.dropzone=s&&s.dropzone,a.cur.element=s&&s.element,a.events=Te(n,0,o)}}var Ie={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,r=e.Interactable,i=e.defaults;e.usePlugin(C),r.prototype.dropzone=function(e){return function(e,t){if(k.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=Q(t.listeners),r=Object.keys(n).reduce((function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e}),{}),i=e.options.drop.listeners;i&&e.off(i),e.on(r),e.options.drop.listeners=r}return k.func(t.ondrop)&&e.on("drop",t.ondrop),k.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),k.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),k.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),k.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),k.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:k.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return k.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},r.prototype.dropCheck=function(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s=!1;if(!(o=o||e.getRect(a)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,s,e,a,r,i);var c=e.options.drop.overlap;if("pointer"===c){var u=X(r,i,"drag"),l=oe(t);l.x+=u.x,l.y+=u.y;var d=l.x>o.left&&l.x<o.right,p=l.y>o.top&&l.y<o.bottom;s=d&&p}var h=r.getRect(i);if(h&&"center"===c){var f=h.left+h.width/2,m=h.top+h.height/2;s=f>=o.left&&f<=o.right&&m>=o.top&&m<=o.bottom}return h&&k.number(c)&&(s=Math.max(0,Math.min(o.right,h.right)-Math.max(o.left,h.left))*Math.max(0,Math.min(o.bottom,h.bottom)-Math.max(o.top,h.top))/(h.width*h.height)>=c),e.options.drop.checker&&(s=e.options.drop.checker(t,n,s,e,a,r,i)),s}(this,e,t,n,r,i,a)},n.dynamicDrop=function(t){return k.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},G(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,i.actions.drop=Ie.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,r=(e.event,e.iEvent);if("drag"===n.prepared.name){var i=n.dropState;i.activeDrops=[],i.events={},i.activeDrops=xe(t,n.element),i.events=Te(n,0,r),i.events.activate&&(ke(i.activeDrops,i.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":Ee,"interactions:after-action-move":function(e,t){var n=e.interaction,r=e.iEvent;if("drag"===n.prepared.name){var i=n.dropState;Ce(n,i.events),t.fire("actions/drop:move",{interaction:n,dragEvent:r}),i.events={}}},"interactions:action-end":function(e,t){if("drag"===e.interaction.prepared.name){var n=e.interaction,r=e.iEvent;Ee(e,t),Ce(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:r})}},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:xe,getDrop:Se,getDropEvents:Te,fireDropEvents:Ce,filterEventType:function(e){return 0===e.search("drag")||0===e.search("drop")},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Ne=Ie;function Ae(e){var t=e.interaction,n=e.iEvent,r=e.phase;if("gesture"===t.prepared.name){var i=t.pointers.map((function(e){return e.pointer})),a="start"===r,o="end"===r,s=t.interactable.options.deltaSource;if(n.touches=[i[0],i[1]],a)n.distance=pe(i,s),n.box=de(i),n.scale=1,n.ds=0,n.angle=he(i,s),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(o||t.pointers.length<2){var c=t.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=pe(i,s),n.box=de(i),n.scale=n.distance/t.gesture.startDistance,n.angle=he(i,s),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,k.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}var Oe={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,r=e.defaults;n.prototype.gesturable=function(e){return k.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):k.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=Oe,t.methodDict.gesture="gesturable",r.actions.gesture=Oe.defaults},listeners:{"interactions:action-start":Ae,"interactions:action-move":Ae,"interactions:action-end":Ae,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(e){return 0===e.search("gesture")}},Re=Oe;function Pe(e,t,n,r,i,a,o){if(!t)return!1;if(!0===t){var s=k.number(a.width)?a.width:a.right-a.left,c=k.number(a.height)?a.height:a.bottom-a.top;if(o=Math.min(o,Math.abs(("left"===e||"right"===e?s:c)/2)),s<0&&("left"===e?e="right":"right"===e&&(e="left")),c<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e){var u=s>=0?a.left:a.right;return n.x<u+o}if("top"===e){var l=c>=0?a.top:a.bottom;return n.y<l+o}if("right"===e)return n.x>(s>=0?a.right:a.left)-o;if("bottom"===e)return n.y>(c>=0?a.bottom:a.top)-o}return!!k.element(r)&&(k.element(t)?t===r:z(r,t,i))}function De(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=t;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}var Le,Me,Fe={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,r=e.Interactable,i=e.defaults;Fe.cursors=function(e){return e.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Fe.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(t){return function(e,t,n){return k.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),k.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),k.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:k.bool(t.square)&&(e.options.resize.square=t.square),e):k.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,t,e)},t.map.resize=Fe,t.methodDict.resize="resizable",i.actions.resize=Fe.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t,i=n.rect;n._rects={start:G({},i),corrected:G({},i),previous:G({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(e),De(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t,i=n.interactable.options.resize.invert,a="reposition"===i||"negate"===i,o=n.rect,s=n._rects,c=s.start,u=s.corrected,l=s.delta,d=s.previous;if(G(d,u),a){if(G(u,o),"reposition"===i){if(u.top>u.bottom){var p=u.top;u.top=u.bottom,u.bottom=p}if(u.left>u.right){var h=u.left;u.left=u.right,u.right=h}}}else u.top=Math.min(o.top,c.bottom),u.bottom=Math.max(o.bottom,c.top),u.left=Math.min(o.left,c.right),u.right=Math.max(o.right,c.left);for(var f in u.width=u.right-u.left,u.height=u.bottom-u.top,u)l[f]=u[f]-d[f];r.edges=n.prepared.edges,r.rect=u,r.deltaRect=l}}(e),De(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=t;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,r=e.element,i=e.rect,a=e.buttons;if(i){var o=G({},t.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||a&s.mouseButtons)){if(k.object(s.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var u in c)c[u]=Pe(u,s.edges[u],o,t._latestPointer.eventTarget,r,i,s.margin||Fe.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(e.action={name:"resize",edges:c})}else{var l="y"!==s.axis&&o.x>i.right-Fe.defaultMargin,d="x"!==s.axis&&o.y>i.bottom-Fe.defaultMargin;(l||d)&&(e.action={name:"resize",axes:(l?"x":"")+(d?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,r=e.name,i=Fe.cursors,a=null;if(n)a=i[r+n];else if(t){for(var o="",s=0,c=["top","bottom","left","right"];s<c.length;s++){var u=c[s];t[u]&&(o+=u)}a=i[o]}return a},filterEventType:function(e){return 0===e.search("resize")},defaultMargin:null},ze=Fe,$e={id:"actions",install:function(e){e.usePlugin(Re),e.usePlugin(ze),e.usePlugin(C),e.usePlugin(Ne)}},je=0,Be={request:function(e){return Le(e)},cancel:function(e){return Me(e)},init:function(e){if(Le=e.requestAnimationFrame,Me=e.cancelAnimationFrame,!Le)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var r=t[n];Le=e["".concat(r,"RequestAnimationFrame")],Me=e["".concat(r,"CancelAnimationFrame")]||e["".concat(r,"CancelRequestAnimationFrame")]}Le=Le&&Le.bind(e),Me=Me&&Me.bind(e),Le||(Le=function(t){var n=Date.now(),r=Math.max(0,16-(n-je)),i=e.setTimeout((function(){t(n+r)}),r);return je=n+r,i},Me=function(e){return clearTimeout(e)})}},Ve={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){Ve.isScrolling=!0,Be.cancel(Ve.i),e.autoScroll=Ve,Ve.interaction=e,Ve.prevTime=Ve.now(),Ve.i=Be.request(Ve.scroll)},stop:function(){Ve.isScrolling=!1,Ve.interaction&&(Ve.interaction.autoScroll=null),Be.cancel(Ve.i)},scroll:function(){var e=Ve.interaction,t=e.interactable,n=e.element,r=e.prepared.name,i=t.options[r].autoScroll,a=Ue(i.container,t,n),o=Ve.now(),s=(o-Ve.prevTime)/1e3,c=i.speed*s;if(c>=1){var u={x:Ve.x*c,y:Ve.y*c};if(u.x||u.y){var l=Ge(a);k.window(a)?a.scrollBy(u.x,u.y):a&&(a.scrollLeft+=u.x,a.scrollTop+=u.y);var d=Ge(a),p={x:d.x-l.x,y:d.y-l.y};(p.x||p.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:p,interaction:e,container:a})}Ve.prevTime=o}Ve.isScrolling&&(Be.cancel(Ve.i),Ve.i=Be.request(Ve.scroll))},check:function(e,t){var n;return null==(n=e.options[t].autoScroll)?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&Ve.check(t.interactable,t.prepared.name))if(t.simulation)Ve.x=Ve.y=0;else{var r,i,a,o,s=t.interactable,c=t.element,u=t.prepared.name,l=s.options[u].autoScroll,d=Ue(l.container,s,c);if(k.window(d))o=n.clientX<Ve.margin,r=n.clientY<Ve.margin,i=n.clientX>d.innerWidth-Ve.margin,a=n.clientY>d.innerHeight-Ve.margin;else{var p=j(d);o=n.clientX<p.left+Ve.margin,r=n.clientY<p.top+Ve.margin,i=n.clientX>p.right-Ve.margin,a=n.clientY>p.bottom-Ve.margin}Ve.x=i?1:o?-1:0,Ve.y=a?1:r?-1:0,Ve.isScrolling||(Ve.margin=l.margin,Ve.speed=l.speed,Ve.start(t))}}};function Ue(e,t,n){return(k.string(e)?q(e,t,n):e)||y(n)}function Ge(e){return k.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var qe={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=Ve,Ve.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=Ve.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,Ve.stop(),Ve.interaction&&(Ve.interaction=null)},"interactions:stop":Ve.stop,"interactions:action-move":function(e){return Ve.onInteractionMove(e)}}},We=qe;function He(e,t){var n=!1;return function(){return n||(_.console.warn(t),n=!0),e.apply(this,arguments)}}function Ye(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e}function Ke(e){return k.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function Xe(e){return k.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}var Qe={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(t,n,r,i){var a=function(e,t,n,r,i){var a=e.getRect(r),o={action:null,interactable:e,interaction:n,element:r,rect:a,buttons:t.buttons||{0:1,1:4,3:8,4:16}[t.button]};return i.fire("auto-start:check",o),o.action}(this,n,r,i,e);return this.options.actionChecker?this.options.actionChecker(t,n,a,this,i,r):a},t.prototype.ignoreFrom=He((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=He((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Xe,t.prototype.styleCursor=Ke}};function Je(e,t,n,r,i){return t.testIgnoreAllow(t.options[e.name],n,r)&&t.options[e.name].enabled&&nt(t,n,e,i)?e:null}function Ze(e,t,n,r,i,a,o){for(var s=0,c=r.length;s<c;s++){var u=r[s],l=i[s],d=u.getAction(t,n,e,l);if(d){var p=Je(d,u,l,a,o);if(p)return{action:p,interactable:u,element:l}}}return{action:null,interactable:null,element:null}}function et(e,t,n,r,i){var a=[],o=[],s=r;function c(e){a.push(e),o.push(s)}for(;k.element(s);){a=[],o=[],i.interactables.forEachMatch(s,c);var u=Ze(e,t,n,a,o,r,i);if(u.action&&!u.interactable.options[u.action.name].manualStart)return u;s=D(s)}return{action:null,interactable:null,element:null}}function tt(e,t,n){var r=t.action,i=t.interactable,a=t.element;r=r||{name:null},e.interactable=i,e.element=a,Ye(e.prepared,r),e.rect=i&&r.name?i.getRect(a):null,at(e,n),n.fire("autoStart:prepared",{interaction:e})}function nt(e,t,n,r){var i=e.options,a=i[n.name].max,o=i[n.name].maxPerElement,s=r.autoStart.maxInteractions,c=0,u=0,l=0;if(!(a&&o&&s))return!1;for(var d=0,p=r.interactions.list;d<p.length;d++){var h=p[d],f=h.prepared.name;if(h.interacting()){if(++c>=s)return!1;if(h.interactable===e){if((u+=f===n.name?1:0)>=a)return!1;if(h.element===t&&(l++,f===n.name&&l>=o))return!1}}}return s>0}function rt(e,t){return k.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function it(e,t,n){var r=n.autoStart.cursorElement;r&&r!==e&&(r.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function at(e,t){var n=e.interactable,r=e.element,i=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var a="";if(i.name){var o=n.options[i.name].cursorChecker;a=k.func(o)?o(i,n,r,e._interacting):t.actions.map[i.name].getCursor(i)}it(e.element,a||"",t)}else t.autoStart.cursorElement&&it(t.autoStart.cursorElement,"",t)}var ot={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(Qe),n.base.actionChecker=null,n.base.styleCursor=!0,G(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return rt(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:nt,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget;n.interacting()||tt(n,et(n,r,i,a,t),t)},"interactions:move":function(e,t){!function(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||tt(n,et(n,r,i,a,t),t)}(e,t),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var r=n.interactable,i=n.prepared.name;i&&r&&(r.options[i].manualStart||!nt(r,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,r,n.element),at(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,r=n.interactable;r&&r.options.styleCursor&&it(n.element,"",t)}},maxInteractions:rt,withinInteractionLimit:nt,validateAction:Je},st=ot,ct={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,r=e.eventTarget,i=e.dx,a=e.dy;if("drag"===n.prepared.name){var o=Math.abs(i),s=Math.abs(a),c=n.interactable.options.drag,u=c.startAxis,l=o>s?"x":o<s?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?l[0]:c.lockAxis,"xy"!==l&&"xy"!==u&&u!==l){n.prepared.name=null;for(var d=r,p=function(e){if(e!==n.interactable){var i=n.interactable.options.drag;if(!i.manualStart&&e.testIgnoreAllow(i,d,r)){var a=e.getAction(n.downPointer,n.downEvent,n,d);if(a&&"drag"===a.name&&function(e,t){if(!t)return!1;var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}(l,e)&&st.validateAction(a,e,d,r,t))return e}}};k.element(d);){var h=t.interactables.forEachMatch(d,p);if(h){n.prepared.name="drag",n.interactable=h,n.element=d;break}d=D(d)}}}}}};function ut(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}var lt={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(st),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=ut(t);n>0&&(t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.interactable,t.element)}),n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;ut(t)>0&&(t.prepared.name=null)}},getHoldDuration:ut},dt=lt,pt={id:"auto-start",install:function(e){e.usePlugin(st),e.usePlugin(dt),e.usePlugin(ct)}},ht=function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):k.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault};function ft(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}var mt={id:"core/interactablePreventDefault",install:function(e){var t=e.Interactable;t.prototype.preventDefault=ht,t.prototype.checkAndPreventDefault=function(t){return function(e,t,n){var r=e.options.preventDefault;if("never"!==r)if("always"!==r){if(t.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var i=y(n.target).document,a=t.getDocOptions(i);if(!a||!a.events||!1!==a.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||k.element(n.target)&&L(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,e,t)},e.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var n=0,r=e.interactions.list;n<r.length;n++){var i=r[n];if(i.element&&(i.element===t.target||R(i.element,t.target)))return void i.interactable.checkAndPreventDefault(t)}}})},listeners:["down","move","up","cancel"].reduce((function(e,t){return e["interactions:".concat(t)]=ft,e}),{})};function gt(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1}function _t(e){var t={};for(var n in e){var r=e[n];k.plainObject(r)?t[n]=_t(r):k.array(r)?t[n]=ve(r):t[n]=r}return t}var vt=function(){function e(t){i(this,e),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=t,this.result=yt(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return o(e,[{key:"start",value:function(e,t){var n,r,i=e.phase,a=this.interaction,o=function(e){var t=e.interactable.options[e.prepared.name],n=t.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(e){var n=t[e];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(e){return!!e}))}(a);this.prepareStates(o),this.startEdges=G({},a.edges),this.edges=G({},this.startEdges),this.startOffset=(r=t,(n=a.rect)?{left:r.x-n.left,top:r.y-n.top,right:n.right-r.x,bottom:n.bottom-r.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var s=this.fillArg({phase:i,pageCoords:t,preEnd:!1});return this.result=yt(),this.startAll(s),this.result=this.setAll(s)}},{key:"fillArg",value:function(e){var t=this.interaction;return e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect||(e.rect=t.rect),e.edges||(e.edges=this.startEdges),e.startOffset=this.startOffset,e}},{key:"startAll",value:function(e){for(var t=0,n=this.states;t<n.length;t++){var r=n[t];r.methods.start&&(e.state=r,r.methods.start(e))}}},{key:"setAll",value:function(e){var t=e.phase,n=e.preEnd,r=e.skipModifiers,i=e.rect,a=e.edges;e.coords=G({},e.pageCoords),e.rect=G({},i),e.edges=G({},a);for(var o=r?this.states.slice(r):this.states,s=yt(e.coords,e.rect),c=0;c<o.length;c++){var u,l=o[c],d=l.options,p=G({},e.coords),h=null;null!=(u=l.methods)&&u.set&&this.shouldDo(d,n,t)&&(e.state=l,h=l.methods.set(e),K(e.edges,e.rect,{x:e.coords.x-p.x,y:e.coords.y-p.y})),s.eventProps.push(h)}G(this.edges,e.edges),s.delta.x=e.coords.x-e.pageCoords.x,s.delta.y=e.coords.y-e.pageCoords.y,s.rectDelta.left=e.rect.left-i.left,s.rectDelta.right=e.rect.right-i.right,s.rectDelta.top=e.rect.top-i.top,s.rectDelta.bottom=e.rect.bottom-i.bottom;var f=this.result.coords,m=this.result.rect;if(f&&m){var g=s.rect.left!==m.left||s.rect.right!==m.right||s.rect.top!==m.top||s.rect.bottom!==m.bottom;s.changed=g||f.x!==s.coords.x||f.y!==s.coords.y}return s}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,r=t.coords.cur,i=t.coords.start,a=this.result,o=this.startDelta,s=a.delta;"start"===n&&G(this.startDelta,a.delta);for(var c=0,u=[[i,o],[r,s]];c<u.length;c++){var l=u[c],d=l[0],p=l[1];d.page.x+=p.x,d.page.y+=p.y,d.client.x+=p.x,d.client.y+=p.y}var h=this.result.rectDelta,f=e.rect||t.rect;f.left+=h.left,f.right+=h.right,f.top+=h.top,f.bottom+=h.bottom,f.width=f.right-f.left,f.height=f.bottom-f.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,r=e.preEnd,i=e.skipModifiers,a=this.setAll(this.fillArg({preEnd:r,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page}));if(this.result=a,!a.changed&&(!i||i<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var o=t.coords.cur.page,s={x:e.modifiedCoords.x-o.x,y:e.modifiedCoords.y-o.y};a.coords.x+=s.x,a.coords.y+=s.y,a.delta.x+=s.x,a.delta.y+=s.y}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,r=this.states;if(r&&r.length){for(var i=!1,a=0;a<r.length;a++){var o=r[a];e.state=o;var s=o.options,c=o.methods,u=c.beforeEnd&&c.beforeEnd(e);if(u)return this.endResult=u,!1;i=i||!i&&this.shouldDo(s,!0,e.phase,!0)}i&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=G({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var r=0,i=this.states;r<i.length;r++){var a=i[r];n.state=a,a.methods.stop&&a.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.options,i=n.methods,a=n.name;this.states.push({options:r,methods:i,index:t,name:a})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,r=t.rect,i=t.modification;if(i.result){for(var a=i.startDelta,o=i.result,s=o.delta,c=o.rectDelta,u=0,l=[[n.start,a],[n.cur,s]];u<l.length;u++){var d=l[u],p=d[0],h=d[1];p.page.x-=h.x,p.page.y-=h.y,p.client.x-=h.x,p.client.y-=h.y}r.left-=c.left,r.right-=c.right,r.top-=c.top,r.bottom-=c.bottom}}},{key:"shouldDo",value:function(e,t,n,r){return!(!e||!1===e.enabled||r&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.startEdges=e.startEdges,this.edges=e.edges,this.states=e.states.map((function(e){return _t(e)})),this.result=yt(G({},e.result.coords),G({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}]),e}();function yt(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function bt(e,t){var n=e.defaults,r={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},i=function(e){var i=e||{};for(var a in i.enabled=!1!==i.enabled,n)a in i||(i[a]=n[a]);var o={options:i,methods:r,name:t,enable:function(){return i.enabled=!0,o},disable:function(){return i.enabled=!1,o}};return o};return t&&"string"==typeof t&&(i._defaults=n,i._methods=r),i}function wt(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}var kt={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new vt(t)},"interactions:before-action-start":function(e){var t=e.interaction,n=e.interaction.modification;n.start(e,t.coords.start.page),t.edges=n.edges,n.applyToInteraction(e)},"interactions:before-action-move":function(e){var t=e.interaction,n=t.modification,r=n.setAndApply(e);return t.edges=n.edges,r},"interactions:before-action-end":function(e){var t=e.interaction,n=t.modification,r=n.beforeEnd(e);return t.edges=n.startEdges,r},"interactions:action-start":wt,"interactions:action-move":wt,"interactions:action-end":wt,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}},xt=kt,St={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Tt=function(e){c(n,e);var t=p(n);function n(e,r,a,o,s,c,u){var l;i(this,n),(l=t.call(this,e)).relatedTarget=null,l.screenX=void 0,l.screenY=void 0,l.button=void 0,l.buttons=void 0,l.ctrlKey=void 0,l.shiftKey=void 0,l.altKey=void 0,l.metaKey=void 0,l.page=void 0,l.client=void 0,l.delta=void 0,l.rect=void 0,l.x0=void 0,l.y0=void 0,l.t0=void 0,l.dt=void 0,l.duration=void 0,l.clientX0=void 0,l.clientY0=void 0,l.velocity=void 0,l.speed=void 0,l.swipe=void 0,l.axes=void 0,l.preEnd=void 0,s=s||e.element;var p=e.interactable,h=(p&&p.options||St).deltaSource,f=X(p,s,a),m="start"===o,g="end"===o,_=m?d(l):e.prevEvent,v=m?e.coords.start:g?{page:_.page,client:_.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return l.page=G({},v.page),l.client=G({},v.client),l.rect=G({},e.rect),l.timeStamp=v.timeStamp,g||(l.page.x-=f.x,l.page.y-=f.y,l.client.x-=f.x,l.client.y-=f.y),l.ctrlKey=r.ctrlKey,l.altKey=r.altKey,l.shiftKey=r.shiftKey,l.metaKey=r.metaKey,l.button=r.button,l.buttons=r.buttons,l.target=s,l.currentTarget=s,l.preEnd=c,l.type=u||a+(o||""),l.interactable=p,l.t0=m?e.pointers[e.pointers.length-1].downTime:_.t0,l.x0=e.coords.start.page.x-f.x,l.y0=e.coords.start.page.y-f.y,l.clientX0=e.coords.start.client.x-f.x,l.clientY0=e.coords.start.client.y-f.y,l.delta=m||g?{x:0,y:0}:{x:l[h].x-_[h].x,y:l[h].y-_[h].y},l.dt=e.coords.delta.timeStamp,l.duration=l.timeStamp-l.t0,l.velocity=G({},e.coords.velocity[h]),l.speed=Z(l.velocity.x,l.velocity.y),l.swipe=g||"inertiastart"===o?l.getSwipe():null,l}return o(n,[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||this.timeStamp-e.prevEvent.timeStamp>150)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,r=202.5<=t&&t<337.5;return{up:r,down:!r&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),n}(ge);Object.defineProperties(Tt.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var Ct=o((function e(t,n,r,a,o){i(this,e),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=n,this.event=r,this.downTime=a,this.downTarget=o})),Et=function(e){return e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy="",e}({}),It=function(e){return e.start="",e.move="",e.end="",e.stop="",e.interacting="",e}({}),Nt=0,At=function(){function e(t){var n=this,r=t.pointerType,a=t.scopeFire;i(this,e),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=He((function(e){this.move(e)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Nt++,this._scopeFire=a,this.pointerType=r;var o=this;this._proxy={};var s=function(e){Object.defineProperty(n._proxy,e,{get:function(){return o[e]}})};for(var c in Et)s(c);var u=function(e){Object.defineProperty(n._proxy,e,{value:function(){return o[e].apply(o,arguments)}})};for(var l in It)u(l);this._scopeFire("interactions:new",{interaction:this})}return o(e,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(e,t,n){var r=this.updatePointer(e,t,n,!0),i=this.pointers[r];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:r,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&(Ye(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?G({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var r,i,a=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Z(r,i)>this.pointerMoveTolerance);var o,s,c,u=this.getPointerIndex(e),l={pointer:e,pointerIndex:u,pointerInfo:this.pointers[u],event:t,type:"move",eventTarget:n,dx:r,dy:i,duplicate:a,interaction:this};a||(o=this.coords.velocity,s=this.coords.delta,c=Math.max(s.timeStamp/1e3,.001),o.page.x=s.page.x/c,o.page.y=s.page.y/c,o.client.x=s.client.x/c,o.client.y=s.client.y/c,o.timeStamp=c),this._scopeFire("interactions:move",l),a||this.simulation||(this.interacting()&&(l.type=null,this.move(l)),this.pointerWasMoved&&ne(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||re(this.coords.delta),(e=G({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,r){var i=this.getPointerIndex(e);-1===i&&(i=this.updatePointer(e,t,n,!1));var a=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(a),{pointer:e,pointerIndex:i,pointerInfo:this.pointers[i],event:t,eventTarget:n,type:a,curEventTarget:r,interaction:this}),this.simulation||this.end(t),this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),this._ending=!1,!0===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=se(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:ye(this.pointers,(function(e){return e.id===t}))}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,r){var i,a,o,s=se(e),c=this.getPointerIndex(e),u=this.pointers[c];return r=!1!==r&&(r||/(down|start)$/i.test(t.type)),u?u.pointer=e:(u=new Ct(s,e,t,null,null),c=this.pointers.length,this.pointers.push(u)),ce(this.coords.cur,this.pointers.map((function(e){return e.pointer})),this._now()),i=this.coords.delta,a=this.coords.prev,o=this.coords.cur,i.page.x=o.page.x-a.page.x,i.page.y=o.page.y-a.page.y,i.client.x=o.client.x-a.client.x,i.client.y=o.client.y-a.client.y,i.timeStamp=o.timeStamp-a.timeStamp,r&&(this.pointerIsDown=!0,u.downTime=this.coords.cur.timeStamp,u.downTarget=n,te(this.downPointer,e),this.interacting()||(ne(this.coords.start,this.coords.cur),ne(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:r,pointerInfo:u,pointerIndex:c,interaction:this}),c}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,r){return new Tt(this,e,this.prepared.name,t,this.element,n,r)}},{key:"_fireEvent",value:function(e){var t;null==(t=this.interactable)||t.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,r=e.preEnd,i=e.type,a=this.rect;if(a&&"move"===n&&(K(this.edges,a,this.coords.delta[this.interactable.options.deltaSource]),a.width=a.right-a.left,a.height=a.bottom-a.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var o=e.iEvent=this._createPreparedEvent(t,n,r,i);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=o),this._fireEvent(o),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}]),e}();function Ot(e){Rt(e.interaction)}function Rt(e){if(!function(e){return!(!e.offset.pending.x&&!e.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Dt(e.coords.cur,t),Dt(e.coords.delta,t),K(e.edges,e.rect,t),t.x=0,t.y=0,!0}function Pt(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Dt(e,t){var n=e.page,r=e.client,i=t.x,a=t.y;n.x+=i,n.y+=a,r.x+=i,r.y+=a}It.offsetBy="";var Lt={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=Pt},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return function(e){e.pointerIsDown&&(Dt(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}(e.interaction)},"interactions:before-action-start":Ot,"interactions:before-action-move":Ot,"interactions:before-action-end":function(e){var t=e.interaction;if(Rt(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}},Mt=Lt,Ft=function(){function e(t){i(this,e),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=t}return o(e,[{key:"start",value:function(e){var t=this.interaction,n=zt(t);if(!n||!n.enabled)return!1;var r=t.coords.velocity.client,i=Z(r.x,r.y),a=this.modification||(this.modification=new vt(t));if(a.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg=a.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-t.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(a.result=a.setAll(this.modifierArg),!a.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=zt(this.interaction),r=n.resistance,i=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(t.x-i)/r,y:(t.y-i)/r},this.te=i,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var a=this.modification,o=this.modifierArg;o.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},a.result=a.setAll(o),a.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+a.result.delta.x,y:this.targetOffset.y+a.result.delta.y}),this.onNextFrame((function(){return e.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return e.smoothEndTick()}))}},{key:"onNextFrame",value:function(e){var t=this;this.timeout=Be.request((function(){t.active&&e()}))}},{key:"inertiaTick",value:function(){var e,t,n,r,i,a,o,s=this,c=this.interaction,u=zt(c).resistance,l=(c._now()-this.t0)/1e3;if(l<this.te){var d,p=1-(Math.exp(-u*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(e=0,t=0,n=this.targetOffset.x,r=this.targetOffset.y,i=this.modifiedOffset.x,a=this.modifiedOffset.y,d={x:jt(o=p,e,n,i),y:jt(o,t,r,a)}):d={x:this.targetOffset.x*p,y:this.targetOffset.y*p};var h={x:d.x-this.currentOffset.x,y:d.y-this.currentOffset.y};this.currentOffset.x+=h.x,this.currentOffset.y+=h.y,c.offsetBy(h),c.move(),this.onNextFrame((function(){return s.inertiaTick()}))}else c.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,r=zt(t).smoothEndDuration;if(n<r){var i={x:Bt(n,0,this.targetOffset.x,r),y:Bt(n,0,this.targetOffset.y,r)},a={x:i.x-this.currentOffset.x,y:i.y-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,t.offsetBy(a),t.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return e.smoothEndTick()}))}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,r=e.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(t,n,r,!0),i._doPhase({interaction:i,event:n,phase:"resume"}),ne(i.coords.prev,i.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Be.cancel(this.timeout)}}]),e}();function zt(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}var $t={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Mt),e.usePlugin(xt),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Ft(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,r=t.inertia;if(r.active)for(var i=n;k.element(i);){if(i===t.element){r.resume(e);break}i=D(i)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":wt,"interactions:action-inertiastart":wt,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};function jt(e,t,n,r){var i=1-e;return i*i*t+2*i*e*n+e*e*r}function Bt(e,t,n,r){return-n*(e/=r)*(e-2)+t}var Vt=$t;function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e.immediatePropagationStopped)break;r(e)}}var Gt=function(){function e(t){i(this,e),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=G({},t||{})}return o(e,[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&Ut(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&Ut(e,t)}},{key:"on",value:function(e,t){var n=Q(e,t);for(e in n)this.types[e]=_e(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=Q(e,t);for(e in n){var r=this.types[e];if(r&&r.length)for(var i=0,a=n[e];i<a.length;i++){var o=a[i],s=r.indexOf(o);-1!==s&&r.splice(s,1)}}}},{key:"getRect",value:function(e){return null}}]),e}(),qt=function(){function e(t){i(this,e),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=t,te(this,t)}return o(e,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),e}();function Wt(e){return k.object(e)?{capture:!!e.capture,passive:!!e.passive}:{capture:!!e,passive:!1}}function Ht(e,t){return e===t||("boolean"==typeof e?!!t.capture===e&&0==!!t.passive:!!e.capture==!!t.capture&&!!e.passive==!!t.passive)}var Yt={id:"events",install:function(e){var t,n=[],r={},i=[],a={add:o,remove:s,addDelegate:function(e,t,n,a,s){var l=Wt(s);if(!r[n]){r[n]=[];for(var d=0;d<i.length;d++){var p=i[d];o(p,n,c),o(p,n,u,!0)}}var h=r[n],f=be(h,(function(n){return n.selector===e&&n.context===t}));f||(f={selector:e,context:t,listeners:[]},h.push(f)),f.listeners.push({func:a,options:l})},removeDelegate:function(e,t,n,i,a){var o,l=Wt(a),d=r[n],p=!1;if(d)for(o=d.length-1;o>=0;o--){var h=d[o];if(h.selector===e&&h.context===t){for(var f=h.listeners,m=f.length-1;m>=0;m--){var g=f[m];if(g.func===i&&Ht(g.options,l)){f.splice(m,1),f.length||(d.splice(o,1),s(t,n,c),s(t,n,u,!0)),p=!0;break}}if(p)break}}},delegateListener:c,delegateUseCapture:u,delegatedEvents:r,documents:i,targets:n,supportsOptions:!1,supportsPassive:!1};function o(e,t,r,i){if(e.addEventListener){var o=Wt(i),s=be(n,(function(t){return t.eventTarget===e}));s||(s={eventTarget:e,events:{}},n.push(s)),s.events[t]||(s.events[t]=[]),be(s.events[t],(function(e){return e.func===r&&Ht(e.options,o)}))||(e.addEventListener(t,r,a.supportsOptions?o:o.capture),s.events[t].push({func:r,options:o}))}}function s(e,t,r,i){if(e.addEventListener&&e.removeEventListener){var o=ye(n,(function(t){return t.eventTarget===e})),c=n[o];if(c&&c.events)if("all"!==t){var u=!1,l=c.events[t];if(l){if("all"===r){for(var d=l.length-1;d>=0;d--){var p=l[d];s(e,t,p.func,p.options)}return}for(var h=Wt(i),f=0;f<l.length;f++){var m=l[f];if(m.func===r&&Ht(m.options,h)){e.removeEventListener(t,r,a.supportsOptions?h:h.capture),l.splice(f,1),0===l.length&&(delete c.events[t],u=!0);break}}}u&&!Object.keys(c.events).length&&n.splice(o,1)}else for(t in c.events)c.events.hasOwnProperty(t)&&s(e,t,"all")}}function c(e,t){for(var n=Wt(t),i=new qt(e),a=r[e.type],o=me(e)[0],s=o;k.element(s);){for(var c=0;c<a.length;c++){var u=a[c],l=u.selector,d=u.context;if(L(s,l)&&R(d,o)&&R(d,s)){var p=u.listeners;i.currentTarget=s;for(var h=0;h<p.length;h++){var f=p[h];Ht(f.options,n)&&f.func(i)}}}s=D(s)}}function u(e){return c(e,!0)}return null==(t=e.document)||t.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),e.events=a,a}},Kt={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0,n=Kt.methodOrder;t<n.length;t++){var r=n[t],i=Kt[r](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,r=e.eventTarget,i=e.scope;if(!/down|start/i.test(n))return null;for(var a=0,o=i.interactions.list;a<o.length;a++){var s=o[a],c=r;if(s.simulation&&s.simulation.allowResume&&s.pointerType===t)for(;c;){if(c===s.element)return s;c=D(c)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,r=e.pointerType,i=e.eventType,a=e.scope;if("mouse"!==r&&"pen"!==r)return null;for(var o=0,s=a.interactions.list;o<s.length;o++){var c=s[o];if(c.pointerType===r){if(c.simulation&&!Xt(c,n))continue;if(c.interacting())return c;t||(t=c)}}if(t)return t;for(var u=0,l=a.interactions.list;u<l.length;u++){var d=l[u];if(!(d.pointerType!==r||/down/i.test(i)&&d.simulation))return d}return null},hasPointer:function(e){for(var t=e.pointerId,n=0,r=e.scope.interactions.list;n<r.length;n++){var i=r[n];if(Xt(i,t))return i}return null},idle:function(e){for(var t=e.pointerType,n=0,r=e.scope.interactions.list;n<r.length;n++){var i=r[n];if(1===i.pointers.length){var a=i.interactable;if(a&&(!a.options.gesture||!a.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&t===i.pointerType)return i}return null}};function Xt(e,t){return e.pointers.some((function(e){return e.id===t}))}var Qt=Kt,Jt=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Zt(e,t){return function(n){var r=t.interactions.list,i=fe(n),a=me(n),o=a[0],s=a[1],c=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var u=0,l=n.changedTouches;u<l.length;u++){var d=l[u],p={pointer:d,pointerId:se(d),pointerType:i,eventType:n.type,eventTarget:o,curEventTarget:s,scope:t},h=en(p);c.push([p.pointer,p.eventTarget,p.curEventTarget,h])}}else{var f=!1;if(!O.supportsPointerEvent&&/mouse/.test(n.type)){for(var m=0;m<r.length&&!f;m++)f="mouse"!==r[m].pointerType&&r[m].pointerIsDown;f=f||t.now()-t.prevTouchTime<500||0===n.timeStamp}if(!f){var g={pointer:n,pointerId:se(n),pointerType:i,eventType:n.type,curEventTarget:s,eventTarget:o,scope:t},_=en(g);c.push([g.pointer,g.eventTarget,g.curEventTarget,_])}}for(var v=0;v<c.length;v++){var y=c[v],b=y[0],w=y[1],k=y[2];y[3][e](b,n,w,k)}}}function en(e){var t=e.pointerType,n=e.scope,r={interaction:Qt.search(e),searchDetails:e};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:t})}function tn(e,t){var n=e.doc,r=e.scope,i=e.options,a=r.interactions.docEvents,o=r.events,s=o[t];for(var c in r.browser.isIOS&&!i.events&&(i.events={passive:!1}),o.delegatedEvents)s(n,c,o.delegateListener),s(n,c,o.delegateUseCapture,!0);for(var u=i&&i.events,l=0;l<a.length;l++){var d=a[l];s(n,d.type,d.listener,u)}}var nn={id:"core/interactions",install:function(e){for(var t={},n=0;n<Jt.length;n++){var r=Jt[n];t[r]=Zt(r,e)}var a,s=O.pEventTypes;function u(){for(var t=0,n=e.interactions.list;t<n.length;t++){var r=n[t];if(r.pointerIsDown&&"touch"===r.pointerType&&!r._interacting)for(var i=function(){var t=o[a];e.documents.some((function(e){return R(e.doc,t.downTarget)}))||r.removePointer(t.pointer,t.event)},a=0,o=r.pointers;a<o.length;a++)i()}}(a=N.PointerEvent?[{type:s.down,listener:u},{type:s.down,listener:t.pointerDown},{type:s.move,listener:t.pointerMove},{type:s.up,listener:t.pointerUp},{type:s.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:u},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var n=0,r=e.interactions.list;n<r.length;n++)r[n].documentBlur(t)}}),e.prevTouchTime=0,e.Interaction=function(t){c(r,t);var n=p(r);function r(){return i(this,r),n.apply(this,arguments)}return o(r,[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(t){e.interactions.pointerMoveTolerance=t}},{key:"_now",value:function(){return e.now()}}]),r}(At),e.interactions={list:[],new:function(t){t.scopeFire=function(t,n){return e.fire(t,n)};var n=new e.Interaction(t);return e.interactions.list.push(n),n},listeners:t,docEvents:a,pointerMoveTolerance:1},e.usePlugin(mt)},listeners:{"scope:add-document":function(e){return tn(e,"add")},"scope:remove-document":function(e){return tn(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,r=t.interactions.list.length-1;r>=0;r--){var i=t.interactions.list[r];i.interactable===n&&(i.stop(),t.fire("interactions:destroy",{interaction:i}),i.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(r,1))}}},onDocSignal:tn,doOnInteractions:Zt,methodNames:Jt},rn=nn,an=function(e){return e[e.On=0]="On",e[e.Off=1]="Off",e}(an||{}),on=function(){function e(t,n,r,a){i(this,e),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Gt,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=n.actions,this.target=t,this._context=n.context||r,this._win=y(U(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=a,this.set(n)}return o(e,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(e,t){return k.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),k.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),k.func(t.onend)&&this.on("".concat(e,"end"),t.onend),k.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){var r,i=this,a=null==(r=this._actions.map[e])?void 0:r.filterEventType,o=function(e){return(null==a||a(e))&&gt(e,i._actions)};(k.array(t)||k.object(t))&&this._onOff(an.Off,e,t,void 0,o),(k.array(n)||k.object(n))&&this._onOff(an.On,e,n,void 0,o)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var r in t){var i=r,a=this.options[e],o=t[i];"listeners"===i&&this.updatePerActionListeners(e,a.listeners,o),k.array(o)?a[i]=ve(o):k.plainObject(o)?(a[i]=G(a[i]||{},_t(o)),k.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(a[i].enabled=!1!==o.enabled)):k.bool(o)&&k.object(n.perAction[i])?a[i].enabled=o:a[i]=o}}},{key:"getRect",value:function(e){return e=e||(k.element(this.target)?this.target:null),k.string(this.target)&&(e=e||this._context.querySelector(this.target)),B(e)}},{key:"rectChecker",value:function(e){var t=this;return k.func(e)?(this.getRect=function(n){var r=G({},e.apply(t,n));return"width"in r||(r.width=r.right-r.left,r.height=r.bottom-r.top),r},this):null===e?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if(U(t)||k.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var e=this.target;return k.string(e)?Array.from(this._context.querySelectorAll(e)):k.func(e)&&e.getAllElements?e.getAllElements():k.element(e)?[e]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||R(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!k.element(n)&&(k.string(e)?z(n,e,t):!!k.element(e)&&R(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!k.element(n))&&(k.string(e)?z(n,e,t):!!k.element(e)&&R(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,r,i){k.object(t)&&!k.array(t)&&(r=n,n=null);var a=Q(t,n,i);for(var o in a){"wheel"===o&&(o=O.wheelEvent);for(var s=0,c=a[o];s<c.length;s++){var u=c[s];gt(o,this._actions)?this.events[e===an.On?"on":"off"](o,u):k.string(this.target)?this._scopeEvents[e===an.On?"addDelegate":"removeDelegate"](this.target,this._context,o,u,r):this._scopeEvents[e===an.On?"add":"remove"](this.target,o,u,r)}}return this}},{key:"on",value:function(e,t,n){return this._onOff(an.On,e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff(an.Off,e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in k.object(e)||(e={}),this.options=_t(t.base),this._actions.methodDict){var r=n,i=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,G(G({},t.perAction),t.actions[r])),this[i](e[r])}for(var a in e)"getRect"!==a?k.func(this[a])&&this[a](e[a]):this.rectChecker(e.getRect);return this}},{key:"unset",value:function(){if(k.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;n>=0;n--){var r=t[n],i=r.selector,a=r.context,o=r.listeners;i===this.target&&a===this._context&&t.splice(n,1);for(var s=o.length-1;s>=0;s--)this._scopeEvents.removeDelegate(this.target,this._context,e,o[s][0],o[s][1])}else this._scopeEvents.remove(this.target,"all")}}]),e}(),sn=function(){function e(t){var n=this;i(this,e),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=t,t.addListeners({"interactable:unset":function(e){var t=e.interactable,r=t.target,i=k.string(r)?n.selectorMap[r]:r[n.scope.id],a=ye(i,(function(e){return e===t}));i.splice(a,1)}})}return o(e,[{key:"new",value:function(e,t){t=G(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events);return this.scope.addDocument(n._doc),this.list.push(n),k.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(n)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"getExisting",value:function(e,t){var n=t&&t.context||this.scope.document,r=k.string(e),i=r?this.selectorMap[e]:e[this.scope.id];if(i)return be(i,(function(t){return t._context===n&&(r||t.inContext(e))}))}},{key:"forEachMatch",value:function(e,t){for(var n=0,r=this.list;n<r.length;n++){var i=r[n],a=void 0;if((k.string(i.target)?k.element(e)&&L(e,i.target):e===i.target)&&i.inContext(e)&&(a=t(i)),void 0!==a)return a}}}]),e}(),cn=function(){function e(){var t=this;i(this,e),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=O,this.defaults=_t(St),this.Eventable=Gt,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(e){var t=function t(n,r){var i=e.interactables.getExisting(n,r);return i||((i=e.interactables.new(n,r)).events.global=t.globalEvents),i};return t.getPointerAverage=le,t.getTouchBBox=de,t.getTouchDistance=pe,t.getTouchAngle=he,t.getElementRect=B,t.getElementClientRect=j,t.matchesSelector=L,t.closest=P,t.globalEvents={},t.version="1.10.27",t.scope=e,t.use=function(e,t){return this.scope.usePlugin(e,t),this},t.isSet=function(e,t){return!!this.scope.interactables.get(e,t&&t.context)},t.on=He((function(e,t,n){if(k.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),k.array(e)){for(var r=0,i=e;r<i.length;r++){var a=i[r];this.on(a,t,n)}return this}if(k.object(e)){for(var o in e)this.on(o,e[o],t);return this}return gt(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this}),"The interact.on() method is being deprecated"),t.off=He((function(e,t,n){if(k.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),k.array(e)){for(var r=0,i=e;r<i.length;r++){var a=i[r];this.off(a,t,n)}return this}if(k.object(e)){for(var o in e)this.off(o,e[o],t);return this}var s;return gt(e,this.scope.actions)?e in this.globalEvents&&-1!==(s=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(s,1):this.scope.events.remove(this.scope.document,e,t,n),this}),"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return O.supportsTouch},t.supportsPointerEvent=function(){return O.supportsPointerEvent},t.stop=function(){for(var e=0,t=this.scope.interactions.list;e<t.length;e++)t[e].stop();return this},t.pointerMoveTolerance=function(e){return k.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(e,t){this.scope.addDocument(e,t)},t.removeDocument=function(e){this.scope.removeDocument(e)},t}(this),this.InteractEvent=Tt,this.Interactable=void 0,this.interactables=new sn(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(e){return t.removeDocument(e.target)};var n=this;this.Interactable=function(e){c(r,e);var t=p(r);function r(){return i(this,r),t.apply(this,arguments)}return o(r,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(e){return h(u(r.prototype),"set",this).call(this,e),n.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){h(u(r.prototype),"unset",this).call(this);var e=n.interactables.list.indexOf(this);e<0||(n.interactables.list.splice(e,1),n.fire("interactable:unset",{interactable:this}))}}]),r}(on)}return o(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0,r=this.listenerMaps;n<r.length;n++){var i=r[n].map[e];if(i&&!1===i(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:function(e,t){return e.isInitialized=!0,k.window(t)&&v(t),N.init(t),O.init(t),Be.init(t),e.window=t,e.document=t.document,e.usePlugin(rn),e.usePlugin(Yt),e}(this,e)}},{key:"pluginIsInstalled",value:function(e){var t=e.id;return t?!!this._plugins.map[t]:-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,r=this.listenerMaps.length,i=e.before.reduce((function(e,t){return e[t]=!0,e[un(t)]=!0,e}),{});n<r;n++){var a=this.listenerMaps[n].id;if(a&&(i[a]||i[un(a)]))break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,t){if(-1!==this.getDocIndex(e))return!1;var n=y(e);t=t?G({},t):{},this.documents.push({doc:e,options:t}),this.events.documents.push(e),e!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:t})}},{key:"removeDocument",value:function(e){var t=this.getDocIndex(e),n=y(e),r=this.documents[t].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(t,1),this.events.documents.splice(t,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function un(e){return e&&e.replace(/\/.*$/,"")}var ln=new cn,dn=ln.interactStatic,pn="undefined"!=typeof globalThis?globalThis:window;ln.init(pn);var hn=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(t){var n=t[0],r=t[1];return n in e||r in e})),n=function(n,r){for(var i=e.range,a=e.limits,o=void 0===a?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:a,s=e.offset,c=void 0===s?{x:0,y:0}:s,u={range:i,grid:e,x:null,y:null},l=0;l<t.length;l++){var d=t[l],p=d[0],h=d[1],f=Math.round((n-c.x)/e[p]),m=Math.round((r-c.y)/e[h]);u[p]=Math.max(o.left,Math.min(o.right,f*e[p]+c.x)),u[h]=Math.max(o.top,Math.min(o.bottom,m*e[h]+c.y))}return u};return n.grid=e,n.coordFields=t,n}}),fn={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=G(t.snappers||{},hn),t.createSnapGrid=t.snappers.grid}},mn=fn,gn={start:function(e){var t=e.state,r=e.rect,i=e.edges,a=e.pageCoords,o=t.options,s=o.ratio,c=o.enabled,u=t.options,l=u.equalDelta,d=u.modifiers;"preserve"===s&&(s=r.width/r.height),t.startCoords=G({},a),t.startRect=G({},r),t.ratio=s,t.equalDelta=l;var p=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta){var h=(p.left?1:-1)*(p.top?1:-1);t.edgeSign={x:h,y:h}}else t.edgeSign={x:p.left?-1:1,y:p.top?-1:1};if(!1!==c&&G(i,p),null!=d&&d.length){var f=new vt(e.interaction);f.copyFrom(e.interaction.modification),f.prepareStates(d),t.subModification=f,f.startAll(n({},e))}},set:function(e){var t=e.state,r=e.rect,i=e.coords,a=t.linkedEdges,o=G({},i),s=t.equalDelta?_n:vn;if(G(e.edges,a),s(t,t.xIsPrimaryAxis,i,r),!t.subModification)return null;var c=G({},r);K(a,c,{x:i.x-o.x,y:i.y-o.y});var u=t.subModification.setAll(n(n({},e),{},{rect:c,edges:a,pageCoords:i,prevCoords:i,prevRect:c})),l=u.delta;return u.changed&&(s(t,Math.abs(l.x)>Math.abs(l.y),u.coords,u.rect),G(i,u.coords)),u.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function _n(e,t,n){var r=e.startCoords,i=e.edgeSign;t?n.y=r.y+(n.x-r.x)*i.y:n.x=r.x+(n.y-r.y)*i.x}function vn(e,t,n,r){var i=e.startRect,a=e.startCoords,o=e.ratio,s=e.edgeSign;if(t){var c=r.width/o;n.y=a.y+(c-i.height)*s.y}else{var u=r.height*o;n.x=a.x+(u-i.width)*s.x}}var yn=bt(gn,"aspectRatio"),bn=function(){};bn._defaults={};var wn=bn;function kn(e,t,n){return k.func(e)?W(e,t.interactable,t.element,[n.x,n.y,t]):W(e,t.interactable,t.element)}var xn={start:function(e){var t=e.rect,n=e.startOffset,r=e.state,i=e.interaction,a=e.pageCoords,o=r.options,s=o.elementRect,c=G({left:0,top:0,right:0,bottom:0},o.offset||{});if(t&&s){var u=kn(o.restriction,i,a);if(u){var l=u.right-u.left-t.width,d=u.bottom-u.top-t.height;l<0&&(c.left+=l,c.right+=l),d<0&&(c.top+=d,c.bottom+=d)}c.left+=n.left-t.width*s.left,c.top+=n.top-t.height*s.top,c.right+=n.right-t.width*(1-s.right),c.bottom+=n.bottom-t.height*(1-s.bottom)}r.offset=c},set:function(e){var t=e.coords,n=e.interaction,r=e.state,i=r.options,a=r.offset,o=kn(i.restriction,n,t);if(o){var s=function(e){return!e||"left"in e&&"top"in e||((e=G({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e}(o);t.x=Math.max(Math.min(s.right-a.right,t.x),s.left+a.left),t.y=Math.max(Math.min(s.bottom-a.bottom,t.y),s.top+a.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Sn=bt(xn,"restrict"),Tn={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Cn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function En(e,t){for(var n=0,r=["top","left","bottom","right"];n<r.length;n++){var i=r[n];i in e||(e[i]=t[i])}return e}var In={noInner:Tn,noOuter:Cn,start:function(e){var t,n=e.interaction,r=e.startOffset,i=e.state,a=i.options;a&&(t=H(kn(a.offset,n,n.coords.start.page))),t=t||{x:0,y:0},i.offset={top:t.y+r.top,left:t.x+r.left,bottom:t.y-r.bottom,right:t.x-r.right}},set:function(e){var t=e.coords,n=e.edges,r=e.interaction,i=e.state,a=i.offset,o=i.options;if(n){var s=G({},t),c=kn(o.inner,r,s)||{},u=kn(o.outer,r,s)||{};En(c,Tn),En(u,Cn),n.top?t.y=Math.min(Math.max(u.top+a.top,s.y),c.top+a.top):n.bottom&&(t.y=Math.max(Math.min(u.bottom+a.bottom,s.y),c.bottom+a.bottom)),n.left?t.x=Math.min(Math.max(u.left+a.left,s.x),c.left+a.left):n.right&&(t.x=Math.max(Math.min(u.right+a.right,s.x),c.right+a.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Nn=bt(In,"restrictEdges"),An=G({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},xn.defaults),On=bt({start:xn.start,set:xn.set,defaults:An},"restrictRect"),Rn={width:-1/0,height:-1/0},Pn={width:1/0,height:1/0},Dn=bt({start:function(e){return In.start(e)},set:function(e){var t=e.interaction,n=e.state,r=e.rect,i=e.edges,a=n.options;if(i){var o=Y(kn(a.min,t,e.coords))||Rn,s=Y(kn(a.max,t,e.coords))||Pn;n.options={endOnly:a.endOnly,inner:G({},In.noInner),outer:G({},In.noOuter)},i.top?(n.options.inner.top=r.bottom-o.height,n.options.outer.top=r.bottom-s.height):i.bottom&&(n.options.inner.bottom=r.top+o.height,n.options.outer.bottom=r.top+s.height),i.left?(n.options.inner.left=r.right-o.width,n.options.outer.left=r.right-s.width):i.right&&(n.options.inner.right=r.left+o.width,n.options.outer.right=r.left+s.width),In.set(e),n.options=a}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Ln={start:function(e){var t,n=e.interaction,r=e.interactable,i=e.element,a=e.rect,o=e.state,s=e.startOffset,c=o.options,u=c.offsetWithOrigin?function(e){var t=e.interaction.element;return H(W(e.state.options.origin,null,null,[t]))||X(e.interactable,t,e.interaction.prepared.name)}(e):{x:0,y:0};if("startCoords"===c.offset)t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var l=W(c.offset,r,i,[n]);(t=H(l)||{x:0,y:0}).x+=u.x,t.y+=u.y}var d=c.relativePoints;o.offsets=a&&d&&d.length?d.map((function(e,n){return{index:n,relativePoint:e,x:s.left-a.width*e.x+t.x,y:s.top-a.height*e.y+t.y}})):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,r=e.state,i=r.options,a=r.offsets,o=X(t.interactable,t.element,t.prepared.name),s=G({},n),c=[];i.offsetWithOrigin||(s.x-=o.x,s.y-=o.y);for(var u=0,l=a;u<l.length;u++)for(var d=l[u],p=s.x-d.x,h=s.y-d.y,f=0,m=i.targets.length;f<m;f++){var g=i.targets[f],_=void 0;(_=k.func(g)?g(p,h,t._proxy,d,f):g)&&c.push({x:(k.number(_.x)?_.x:p)+d.x,y:(k.number(_.y)?_.y:h)+d.y,range:k.number(_.range)?_.range:i.range,source:g,index:f,offset:d})}for(var v={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},y=0;y<c.length;y++){var b=c[y],w=b.range,x=b.x-s.x,S=b.y-s.y,T=Z(x,S),C=T<=w;w===1/0&&v.inRange&&v.range!==1/0&&(C=!1),v.target&&!(C?v.inRange&&w!==1/0?T/w<v.distance/v.range:w===1/0&&v.range!==1/0||T<v.distance:!v.inRange&&T<v.distance)||(v.target=b,v.distance=T,v.range=w,v.inRange=C,v.delta.x=x,v.delta.y=S)}return v.inRange&&(n.x=v.target.x,n.y=v.target.y),r.closest=v,v},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Mn=bt(Ln,"snap"),Fn={start:function(e){var t=e.state,n=e.edges,r=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Ln.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t=e.interaction,n=e.state,r=e.coords,i=n.options,a=n.offsets,o={x:r.x-a[0].x,y:r.y-a[0].y};n.options=G({},i),n.options.targets=[];for(var s=0,c=i.targets||[];s<c.length;s++){var u=c[s],l=void 0;if(l=k.func(u)?u(o.x,o.y,t):u){for(var d=0,p=n.targetFields;d<p.length;d++){var h=p[d],f=h[0],m=h[1];if(f in l||m in l){l.x=l[f],l.y=l[m];break}}n.options.targets.push(l)}}var g=Ln.set(e);return n.options=i,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},zn=bt(Fn,"snapSize"),$n={aspectRatio:yn,restrictEdges:Nn,restrict:Sn,restrictRect:On,restrictSize:Dn,snapEdges:bt({start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],Fn.start(e)):null},set:Fn.set,defaults:G(_t(Fn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Mn,snapSize:zn,spring:wn,avoid:wn,transform:wn,rubberband:wn},jn={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(xt),e.usePlugin(mn),t.modifiers=$n,$n){var r=$n[n],i=r._defaults,a=r._methods;i._methods=a,e.defaults.perAction[n]=i}}},Bn=jn,Vn=function(e){c(n,e);var t=p(n);function n(e,r,a,o,s,c){var u;if(i(this,n),te(d(u=t.call(this,s)),a),a!==r&&te(d(u),r),u.timeStamp=c,u.originalEvent=a,u.type=e,u.pointerId=se(r),u.pointerType=fe(r),u.target=o,u.currentTarget=null,"tap"===e){var l=s.getPointerIndex(r);u.dt=u.timeStamp-s.pointers[l].downTime;var p=u.timeStamp-s.tapTime;u.double=!!s.prevTap&&"doubletap"!==s.prevTap.type&&s.prevTap.target===u.target&&p<500}else"doubletap"===e&&(u.dt=r.timeStamp-s.tapTime,u.double=!0);return u}return o(n,[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),n}(ge),Un={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Un,e.defaults.actions.pointerEvents=Un.defaults,G(e.actions.phaselessTypes,Un.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Wn(e),Gn({interaction:n,pointer:r,event:i,eventTarget:a,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget,o=e.pointerIndex,s=n.pointers[o].hold,c=V(a),u={interaction:n,pointer:r,event:i,eventTarget:a,type:"hold",targets:[],path:c,node:null},l=0;l<c.length;l++){var d=c[l];u.node=d,t.fire("pointerEvents:collect-targets",u)}if(u.targets.length){for(var p=1/0,h=0,f=u.targets;h<f.length;h++){var m=f[h].eventable.options.holdDuration;m<p&&(p=m)}s.duration=p,s.timeout=setTimeout((function(){Gn({interaction:n,eventTarget:a,pointer:r,event:i,type:"hold"},t)}),p)}}(e,t),Gn(e,t)},"interactions:up":function(e,t){Wn(e),Gn(e,t),function(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget;n.pointerWasMoved||Gn({interaction:n,eventTarget:a,pointer:r,event:i,type:"tap"},t)}(e,t)},"interactions:cancel":function(e,t){Wn(e),Gn(e,t)}},PointerEvent:Vn,fire:Gn,collectEventTargets:qn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Gn(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget,o=e.type,s=e.targets,c=void 0===s?qn(e,t):s,u=new Vn(o,r,i,a,n,t.now());t.fire("pointerEvents:new",{pointerEvent:u});for(var l={interaction:n,pointer:r,event:i,eventTarget:a,targets:c,type:o,pointerEvent:u},d=0;d<c.length;d++){var p=c[d];for(var h in p.props||{})u[h]=p.props[h];var f=X(p.eventable,p.node);if(u._subtractOrigin(f),u.eventable=p.eventable,u.currentTarget=p.node,p.eventable.fire(u),u._addOrigin(f),u.immediatePropagationStopped||u.propagationStopped&&d+1<c.length&&c[d+1].node!==u.currentTarget)break}if(t.fire("pointerEvents:fired",l),"tap"===o){var m=u.double?Gn({interaction:n,pointer:r,event:i,eventTarget:a,type:"doubletap"},t):u;n.prevTap=m,n.tapTime=m.timeStamp}return u}function qn(e,t){var n=e.interaction,r=e.pointer,i=e.event,a=e.eventTarget,o=e.type,s=n.getPointerIndex(r),c=n.pointers[s];if("tap"===o&&(n.pointerWasMoved||!c||c.downTarget!==a))return[];for(var u=V(a),l={interaction:n,pointer:r,event:i,eventTarget:a,type:o,path:u,targets:[],node:null},d=0;d<u.length;d++){var p=u[d];l.node=p,t.fire("pointerEvents:collect-targets",l)}return"hold"===o&&(l.targets=l.targets.filter((function(e){var t,r;return e.eventable.options.holdDuration===(null==(t=n.pointers[s])||null==(r=t.hold)?void 0:r.duration)}))),l.targets}function Wn(e){var t=e.interaction,n=e.pointerIndex,r=t.pointers[n].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var Hn=Object.freeze({__proto__:null,default:Un});function Yn(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}var Kn={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(Un);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(e,t){return e["pointerEvents:".concat(t)]=Yn,e}),{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,r=e.pointerEvent,i=e.eventTarget,a=e.targets;if("hold"===r.type&&a.length){var o=a[0].eventable.options.holdRepeatInterval;o<=0||(n.holdIntervalHandle=setTimeout((function(){t.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:r,event:r},t)}),o))}}})},Xn=Kn,Qn={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=function(e){return G(this.events.options,e),this};var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var r=n.call(this,e,t);return r===this&&(this.events.options[e]=t),r}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,r=e.node,i=e.type,a=e.eventTarget;t.interactables.forEachMatch(r,(function(e){var t=e.events,o=t.options;t.types[i]&&t.types[i].length&&e.testIgnoreAllow(o,r,a)&&n.push({node:r,eventable:t,props:{interactable:e}})}))},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,r=e.options;G(n.events.options,t.pointerEvents.defaults),G(n.events.options,r.pointerEvents||{})}}},Jn=Qn,Zn={id:"pointer-events",install:function(e){e.usePlugin(Hn),e.usePlugin(Xn),e.usePlugin(Jn)}},er=Zn,tr={id:"reflow",install:function(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(e,t,n){for(var r=e.getAllElements(),i=n.window.Promise,a=i?[]:null,o=function(){var o=r[s],c=e.getRect(o);if(!c)return 1;var u,l=be(n.interactions.list,(function(n){return n.interacting()&&n.interactable===e&&n.element===o&&n.prepared.name===t.name}));if(l)l.move(),a&&(u=l._reflowPromise||new i((function(e){l._reflowResolve=e})));else{var d=Y(c),p=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:d.x,y:d.y},client:{x:d.x,y:d.y},timeStamp:n.now()});u=function(e,t,n,r,i){var a=e.interactions.new({pointerType:"reflow"}),o={interaction:a,event:i,pointer:i,eventTarget:n,phase:"reflow"};a.interactable=t,a.element=n,a.prevEvent=i,a.updatePointer(i,i,n,!0),re(a.coords.delta),Ye(a.prepared,r),a._doPhase(o);var s=e.window.Promise,c=s?new s((function(e){a._reflowResolve=e})):void 0;return a._reflowPromise=c,a.start(r,t,n),a._interacting?(a.move(o),a.end(i)):(a.stop(),a._reflowResolve()),a.removePointer(i,i),c}(n,e,o,t,p)}a&&a.push(u)},s=0;s<r.length&&!o();s++);return a&&i.all(a).then((function(){return e}))}(this,t,e)}},listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),function(e,t){e.splice(e.indexOf(t),1)}(t.interactions.list,n))}}},nr=tr;if(dn.use(mt),dn.use(Mt),dn.use(er),dn.use(Vt),dn.use(Bn),dn.use(pt),dn.use($e),dn.use(We),dn.use(nr),dn.default=dn,"object"===r(e)&&e)try{e.exports=dn}catch(t){}return dn.default=dn,dn}()},9416:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},a={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=c(e,(0|e)<0?-1:0,!0),o&&(a[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?_:g;if(t){if(e<0)return _;if(e>=h)return k}else{if(e<=-f)return x;if(e+1>=f)return w}return e<0?s(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var i=s(u(n,8)),a=g,o=0;o<e.length;o+=8){var c=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+c),n);if(c<8){var p=s(u(n,c));a=a.mul(p).add(s(d))}else a=(a=a.mul(i)).add(s(d))}return a.unsigned=t,a}function d(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var p=4294967296,h=p*p,f=h/2,m=o(1<<24),g=o(0);n.ZERO=g;var _=o(0,!0);n.UZERO=_;var v=o(1);n.ONE=v;var y=o(1,!0);n.UONE=y;var b=o(-1);n.NEG_ONE=b;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var k=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var x=c(0,-2147483648,!1);n.MIN_VALUE=x;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(u(e,6),this.unsigned),a=this,o="";;){var c=a.div(i),l=(a.sub(c.mul(i)).toInt()>>>0).toString(e);if((a=c).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return!(1&~this.low)},S.isEven=function(){return!(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(v)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,p=0,h=0,f=0;return h+=(f+=a+(65535&e.low))>>>16,p+=(h+=i+u)>>>16,l+=(p+=n+s)>>>16,l+=t+o,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(x))return e.isOdd()?x:g;if(e.eq(x))return this.isOdd()?x:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,a=this.low>>>16,o=65535&this.low,u=e.high>>>16,l=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,_=0,v=0,y=0;return v+=(y+=o*h)>>>16,_+=(v+=a*h)>>>16,v&=65535,_+=(v+=o*p)>>>16,f+=(_+=i*h)>>>16,_&=65535,f+=(_+=a*p)>>>16,_&=65535,f+=(_+=o*l)>>>16,f+=n*h+i*p+a*l+o*u,c((v&=65535)<<16|(y&=65535),(f&=65535)<<16|(_&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,i,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return y;a=_}else{if(this.eq(x))return e.eq(v)||e.eq(b)?x:e.eq(x)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:b:(i=this.sub(e.mul(n)),a=n.add(i.div(e)));if(e.eq(x))return this.unsigned?_:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:u(2,o-48),p=s(n),h=p.mul(e);h.isNegative()||h.gt(i);)h=(p=s(n-=l,this.unsigned)).mul(e);p.isZero()&&(p=v),a=a.add(p),i=i.sub(h)}return a},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7360:(e,t,n)=>{parcelRequire=function(t,r,i){var a,o="function"==typeof parcelRequire&&parcelRequire;function s(e,i){if(!r[e]){if(!t[e]){var a="function"==typeof parcelRequire&&parcelRequire;if(!i&&a)return a(e,!0);if(o)return o(e,!0);if("string"==typeof e)return n(3648)(e);var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}l.resolve=function(n){return t[e][1][n]||n},l.cache={};var u=r[e]=new s.Module(e);t[e][0].call(u.exports,l,u,u.exports,this)}return r[e].exports;function l(e){return s(l.resolve(e))}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=t,s.cache=r,s.parent=o,s.register=function(e,n){t[e]=[function(e,t){t.exports=n},{}]};for(var c=0;c<i.length;c++)try{s(i[c])}catch(t){a||(a=t)}if(i.length){var u=s(i[i.length-1]);e.exports=u}if(parcelRequire=s,a)throw a;return s}({EgBh:[function(e,t,n){var r={};r.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),r.useArrayBufferView=!r.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),t.exports.binaryFeatures=r;var i=t.exports.BlobBuilder;function a(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),a.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},a.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);r.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},a.prototype.getBuffer=function(){if(this.flush(),r.useBlobBuilder){for(var e=new i,t=0,n=this._parts.length;t<n;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=a},{}],kdPp:[function(e,t,n){var r=e("./bufferbuilder").BufferBuilder,i=e("./bufferbuilder").binaryFeatures,a={unpack:function(e){return new o(e).unpack()},pack:function(e){var t=new s;return t.pack(e),t.getBuffer()}};function o(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function s(){this.bufferBuilder=new r}function c(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.exports=a,o.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},o.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},o.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},o.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},o.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},o.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},o.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},o.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},o.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},o.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},o.prototype.unpack_string=function(e){for(var t,n,r=this.read(e),i=0,a="";i<e;)(t=r[i])<128?(a+=String.fromCharCode(t),i++):(192^t)<32?(n=(192^t)<<6|63&r[i+1],a+=String.fromCharCode(n),i+=2):(n=(15&t)<<12|(63&r[i+1])<<6|63&r[i+2],a+=String.fromCharCode(n),i+=3);return this.index+=e,a},o.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},o.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var r=this.unpack(),i=this.unpack();t[r]=i}return t},o.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(e>>31?-1:1)*(8388607&e|8388608)*Math.pow(2,t-23)},o.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=(e>>20&2047)-1023;return(e>>31?-1:1)*((1048575&e|1048576)*Math.pow(2,n-20)+t*Math.pow(2,n-52))},o.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},s.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},s.prototype.pack=function(e){var t=typeof e;if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"===t)this.bufferBuilder.append(192);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(n==ArrayBuffer)i.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)i.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},s.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,c).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},s.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},s.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),r=e/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),a=Math.pow(2,32),o=t<<31|n+1023<<20|i/a&1048575,s=i%a;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(s)},s.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},s.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},s.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},s.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},s.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.extractVersion=o,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,a),i.apply(this,[e,a])};var a=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t},n.compactObject=function e(t){return s(t)?Object.keys(t).reduce((function(n,r){var i=s(t[r]),a=i?e(t[r]):t[r],o=i&&!Object.keys(a).length;return void 0===a||o?n:Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,a))}),{}):t},n.walkStats=c,n.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&c(e,n,i)}))})),i};var i=!0,a=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?c(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){c(e,e.get(t),n)}))})))}},{}],s6SN:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==a(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===a(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===a(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===a(e.video)){var c=e.video.facingMode;c=c&&("object"===a(c)?c:{ideal:c});var u,l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)&&(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u))return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&u.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),o("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return c(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}))}}}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../utils.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r.log},{"../utils.js":"iSxC"}],VHa8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"!==c(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)r.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var a=new Event("track");a.track=r.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var a=new Event("track");a.track=r,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(e){if("object"===c(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===c(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[n,r,i]=arguments;if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){r(o(a(e)))},n]):new Promise((function(n,r){t.apply(e,[function(e){n(o(a(e)))},r])})).then(r,i)}}},n.shimSenderReceiverGetStats=function(e){if("object"===c(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,i=arguments[0];return this.getSenders().forEach((function(e){e.track===i&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===i&&(n?r=!0:n=e),e.track===i})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=u,n.shimAddTrackRemoveTrack=function(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return u(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var o=new e.MediaStream([t]);this._streams[n.id]=o,this._reverseStreams[o.id]=n,this.addStream(o)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,n=(t=arguments[0]).sdp,Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})),a.apply(this,arguments)):a.apply(this,arguments);var e,t,n};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))},n.fixNegotiationNeeded=function(e,t){r.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils.js")),i=e("./getusermedia"),a=e("./getdisplaymedia");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof t;return i&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},{"../utils":"iSxC"}],YHvh:[function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var a=n[i],o=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){var s=r.parseRtpMap(o),c=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),a&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var a=r.matchPrefix(e,"a=rtcp-mux");return t.mux=a.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var a=r.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var o=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),a+="a=mid:"+e.mid+"\r\n",e.direction?a+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";a+="a="+o,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=r)},{}],NJ2u:[function(e,t,n){"use strict";var r=e("sdp");function i(e,t,n,i,a){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":a||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";o+="a="+c,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o}function a(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var a=r(e.parameters.apt,n),o=r(t.parameters.apt,i);return a&&o&&a.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(r){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(r.name.toLowerCase()===o.name.toLowerCase()&&r.clockRate===o.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&o.parameters.apt&&!i(r,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(r.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var a=new Event("track");a.track=n,a.receiver=r,a.transceiver={receiver:r},a.streams=i,e.setTimeout((function(){t._dispatchEvent("track",a)}))}var l=function(n){var i=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=a[e].bind(a)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var i=this,a=this.transceivers[n].iceGatherer;if(!a.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),a.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),s.component=1,s.ufrag=a.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);o.candidate=Object.assign(o.candidate,r.parseCandidate(u)),o.candidate.candidate=u,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var d=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",o),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){a.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,i){var o=a(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},l.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=i.transceivers[t],c=o.iceGatherer,u=o.iceTransport,l=o.dtlsTransport,d=o.localCapabilities,p=o.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||o.rejected)){var h=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);s&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(o.mid,t),"new"===u.state&&u.start(c,h,s?"controlling":"controlled"),"new"===l.state&&l.start(f));var m=a(d,p);i._transceive(o,m.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!o("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var p=[],h=r.splitSections(i.sdp),f=h.shift(),m=r.matchPrefix(f,"a=ice-lite").length>0,g=r.matchPrefix(f,"a=group:BUNDLE ").length>0;l.usingBundle=g;var _=r.matchPrefix(f,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,h.forEach((function(o,c){var u=r.splitLines(o),h=r.getKind(o),_=r.isRejected(o)&&0===r.matchPrefix(o,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],y=r.getDirection(o,f),b=r.parseMsid(o),w=r.getMid(o)||r.generateIdentifier();if(_||"application"===h&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))l.transceivers[c]={mid:w,kind:h,protocol:v,rejected:!0};else{var k,x,S,T,C,E,I,N,A;!_&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(h,!0));var O,R,P=r.parseRtpParameters(o);_||(O=r.getIceParameters(o,f),(R=r.getDtlsParameters(o,f)).role="client"),I=r.parseRtpEncodingParameters(o);var D=r.parseRtcpParameters(o),L=r.matchPrefix(o,"a=end-of-candidates",f).length>0,M=r.matchPrefix(o,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!_&&g&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||_)"answer"!==i.type||_||(x=(k=l.transceivers[c]).iceGatherer,S=k.iceTransport,T=k.dtlsTransport,C=k.rtpReceiver,E=k.sendEncodingParameters,N=k.localCapabilities,l.transceivers[c].recvEncodingParameters=I,l.transceivers[c].remoteCapabilities=P,l.transceivers[c].rtcpParameters=D,M.length&&"new"===S.state&&(!m&&!L||g&&0!==c?M.forEach((function(e){s(k.iceTransport,e)})):S.setRemoteCandidates(M)),g&&0!==c||("new"===S.state&&S.start(x,O,"controlling"),"new"===T.state&&T.start(R)),!a(k.localCapabilities,k.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&k.sendEncodingParameters[0].rtx&&delete k.sendEncodingParameters[0].rtx,l._transceive(k,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!C||"sendrecv"!==y&&"sendonly"!==y?delete k.rtpReceiver:(A=C.track,b?(d[b.stream]||(d[b.stream]=new e.MediaStream),n(A,d[b.stream]),p.push([A,C,d[b.stream]])):(d.default||(d.default=new e.MediaStream),n(A,d.default),p.push([A,C,d.default]))));else{(k=l.transceivers[c]||l._createTransceiver(h)).mid=w,k.iceGatherer||(k.iceGatherer=l._createIceGatherer(c,g)),M.length&&"new"===k.iceTransport.state&&(!L||g&&0!==c?M.forEach((function(e){s(k.iceTransport,e)})):k.iceTransport.setRemoteCandidates(M)),N=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(N.codecs=N.codecs.filter((function(e){return"rtx"!==e.name}))),E=k.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,z=!1;"sendrecv"===y||"sendonly"===y?(z=!k.rtpReceiver,C=k.rtpReceiver||new e.RTCRtpReceiver(k.dtlsTransport,h),z&&(A=C.track,b&&"-"===b.stream||(b?(d[b.stream]||(d[b.stream]=new e.MediaStream,Object.defineProperty(d[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(A,"id",{get:function(){return b.track}}),F=d[b.stream]):(d.default||(d.default=new e.MediaStream),F=d.default)),F&&(n(A,F),k.associatedRemoteMediaStreams.push(F)),p.push([A,C,F]))):k.rtpReceiver&&k.rtpReceiver.track&&(k.associatedRemoteMediaStreams.forEach((function(t){var n,r,i=t.getTracks().find((function(e){return e.id===k.rtpReceiver.track.id}));i&&(n=i,(r=t).removeTrack(n),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))})),k.associatedRemoteMediaStreams=[]),k.localCapabilities=N,k.remoteCapabilities=P,k.rtpReceiver=C,k.rtcpParameters=D,k.sendEncodingParameters=E,k.recvEncodingParameters=I,l._transceive(l.transceivers[c],!1,z)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}p.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),p.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var a=n.transceivers.filter((function(e){return"audio"===e.kind})).length,o=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(a=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(o=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--a<0&&(e.wantReceive=!1):"video"===e.kind&&--o<0&&(e.wantReceive=!1)}));a>0||o>0;)a>0&&(n._createTransceiver("audio"),a--),o>0&&(n._createTransceiver("video"),o--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,a){var o=i.track,s=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(a,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=i.sendEncodingParameters||[{ssrc:1001*(2*a+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=u,i.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=a(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,a){if(!n._remoteDescription)return a(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){o=u;break}var l=n.transceivers[o];if(!l)return a(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===o||o>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,d))return a(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(d.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var h=0;h<n.transceivers.length&&(n.transceivers[h].rejected||(n.transceivers[h].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[h]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));h++);i()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){e[n].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[n]),t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},{sdp:"YHvh"}],YdKx:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],P3bV:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],XRic:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimPeerConnection=function(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var o=(0,a.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,i.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new o(e)},e.RTCPeerConnection.prototype=o.prototype},n.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils")),i=e("./filtericeservers"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("rtcpeerconnection-shim")),o=e("./getusermedia"),s=e("./getdisplaymedia");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e,t){var n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===a(e)&&"object"===a(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===a(e)&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC"}],UuGU:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],Fzdr:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimOnTrack=function(e){"object"===s(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e,t){if("object"===s(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,i,a]=arguments;return r.apply(this,[e||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,a)}}},n.shimSenderGetStats=function(e){if("object"===s(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===s(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var{sender:i}=r,a=i.getParameters();"encodings"in a&&(1!==a.encodings.length||0!==Object.keys(a.encodings[0]).length)||(a.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(a).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}},n.shimGetParameters=function(e){if("object"===s(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},n.shimCreateOffer=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../utils")),i=e("./getusermedia"),a=e("./getdisplaymedia");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimLocalStreamsAPI=function(e){if("object"===a(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===a(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],a=0;a<e.iceServers.length;a++){var o=e.iceServers[a];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,i.push(o)):i.push(e.iceServers[a])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},n.shimTrackEventTransceiver=function(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}},n.shimAudioContext=function(e){"object"!==a(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}},{"../utils":"iSxC"}],GOQK:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimRTCIceCandidate=function(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===o(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=r.default.parseCandidate(e.candidate),a=Object.assign(n,i);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var i,a=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),o=(u=a,l=65536,"firefox"===t.browser&&(l=t.version<57?-1===u?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),l),s=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var a=r.default.matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?i=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],a);i=0===o&&0===s?Number.POSITIVE_INFINITY:0===o||0===s?Math.max(o,s):Math.min(o,s);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}var u,l;return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeExtmapAllowMixed=function(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}},n.shimAddIceCandidateNullOrEmpty=function(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("sdp")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./utils"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=r.log,u=r.detectBrowser(e),l={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=i,c.shimAddIceCandidateNullOrEmpty(e,u),i.shimGetUserMedia(e,u),i.shimMediaStream(e,u),i.shimPeerConnection(e,u),i.shimOnTrack(e,u),i.shimAddTrackRemoveTrack(e,u),i.shimGetSendersWithDtmf(e,u),i.shimGetStats(e,u),i.shimSenderReceiverGetStats(e,u),i.fixNegotiationNeeded(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=o,c.shimAddIceCandidateNullOrEmpty(e,u),o.shimGetUserMedia(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimRemoveStream(e,u),o.shimSenderGetStats(e,u),o.shimReceiverGetStats(e,u),o.shimRTCDataChannel(e,u),o.shimAddTransceiver(e,u),o.shimGetParameters(e,u),o.shimCreateOffer(e,u),o.shimCreateAnswer(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"edge":if(!a||!a.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),l;n("adapter.js shimming edge."),l.browserShim=a,a.shimGetUserMedia(e,u),a.shimGetDisplayMedia(e,u),a.shimPeerConnection(e,u),a.shimReplaceTrack(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=s,c.shimAddIceCandidateNullOrEmpty(e,u),s.shimRTCIceServerUrls(e,u),s.shimCreateOfferLegacy(e,u),s.shimCallbacksAPI(e,u),s.shimLocalStreamsAPI(e,u),s.shimRemoteStreamsAPI(e,u),s.shimTrackEventTransceiver(e,u),s.shimGetUserMedia(e,u),s.shimAudioContext(e,u),c.shimRTCIceCandidate(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return l};var r=l(e("./utils")),i=l(e("./chrome/chrome_shim")),a=l(e("./edge/edge_shim")),o=l(e("./firefox/firefox_shim")),s=l(e("./safari/safari_shim")),c=l(e("./common_shim"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});n.default=r},{"./adapter_factory.js":"KtlG"}],sXtV:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.webRTCAdapter=void 0;var i=r(e("webrtc-adapter"));n.webRTCAdapter=i.default},{"webrtc-adapter":"tI1X"}],I31f:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Supports=void 0;var r=e("./adapter");n.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,t=this.getBrowser(),n=r.webRTCAdapter.browserDetails.version||0;if("chrome"===t&&n<72)return!1;if("firefox"===t&&n>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var i=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch(e){}finally{e&&e.close()}return i},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}())},{"./adapter":"sXtV"}],BHXf:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.util=void 0;var o=a(e("peerjs-js-binarypack")),s=e("./supports"),c={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};n.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=c,this.browser=s.Supports.getBrowser(),this.browserVersion=s.Supports.getVersion(),this.supports=function(){var e,t={browser:s.Supports.isBrowserSupported(),webRTC:s.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(c),t.audioVideo=!0;var n=void 0;try{n=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!s.Supports.isIOS}catch(e){}}catch(e){}finally{n&&n.close()}}catch(e){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,i=Math.ceil(r/n.util.chunkedMTU),a=0,o=0;o<r;){var s=Math.min(r,o+n.util.chunkedMTU),c=e.slice(o,s),u={__peerData:this._dataCount,n:a,data:c,total:i};t.push(u),o=s,a++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var n=new FileReader;return n.onload=function(e){e.target&&t(e.target.result)},n.readAsArrayBuffer(e),n},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,a),!0;case 6:return l.fn.call(l.context,t,n,r,a,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return c(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||c(this,a);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:c(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,void 0!==t&&(t.exports=u)},{}],WOs9:[function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0;var a;!function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(a=n.LogLevel||(n.LogLevel={}));var o=function(){function e(){this._logLevel=a.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=a.All&&this._print.apply(this,i([a.All],r(e)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=a.Warnings&&this._print.apply(this,i([a.Warnings],r(e)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=a.Errors&&this._print.apply(this,i([a.Errors],r(e)))},e.prototype.setLogFunction=function(e){this._print=e},e.prototype._print=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=i(["PeerJS: "],r(t));for(var s in o)o[s]instanceof Error&&(o[s]="("+o[s].name+") "+o[s].message);e>=a.All?console.log.apply(console,i([],r(o))):e>=a.Warnings?console.warn.apply(console,i(["WARNING"],r(o))):e>=a.Errors&&console.error.apply(console,i(["ERROR"],r(o)))},e}();n.default=new o},{}],ZRYf:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ServerMessageType=n.SocketEventType=n.SerializationType=n.PeerErrorType=n.PeerEventType=n.ConnectionType=n.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(n.ConnectionEventType||(n.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(n.ConnectionType||(n.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(n.PeerEventType||(n.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n.PeerErrorType||(n.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(n.SerializationType||(n.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(n.SocketEventType||(n.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(n.ServerMessageType||(n.ServerMessageType={}))},{}],wJlv:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=void 0;var c=e("eventemitter3"),u=s(e("./logger")),l=e("./enums"),d=function(e){function t(t,n,r,i,a,o){void 0===o&&(o=5e3);var s=e.call(this)||this;s.pingInterval=o,s._disconnected=!0,s._messagesQueue=[];var c=t?"wss://":"ws://";return s._baseUrl=c+n+":"+r+i+"peerjs?key="+a,s}return r(t,e),t.prototype.start=function(e,t){var n=this;this._id=e;var r=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(r),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),u.default.log("Server message received:",t)}catch(t){return void u.default.log("Invalid server message",e.data)}n.emit(l.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(u.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(l.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),u.default.log("Socket open"),n._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout((function(){e._sendHeartbeat()}),this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:l.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else u.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,t,n=a([],i(this._messagesQueue));this._messagesQueue=[];try{for(var r=o(n),s=r.next();!s.done;s=r.next()){var c=s.value;this.send(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(l.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(c.EventEmitter);n.Socket=d},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Negotiator=void 0;var s=e("./util"),c=o(e("./logger")),u=e("./enums"),l=function(){function e(e){this.connection=e}return e.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===u.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===u.ConnectionType.Data){var n=this.connection,r={ordered:!!e.reliable},i=t.createDataChannel(n.label,r);n.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},e.prototype._startPeerConnection=function(){c.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},e.prototype._setupListeners=function(e){var t=this,n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,a=this.connection.provider;c.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(c.default.log("Received ICE candidates for "+n+":",e.candidate),a.socket.send({type:u.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":c.default.log("iceConnectionState is failed, closing connections to "+n),t.connection.emit(u.ConnectionEventType.Error,new Error("Negotiation of connection to "+n+" failed.")),t.connection.close();break;case"closed":c.default.log("iceConnectionState is closed, closing connections to "+n),t.connection.emit(u.ConnectionEventType.Error,new Error("Connection to "+n+" closed.")),t.connection.close();break;case"disconnected":c.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=s.util.noop}t.connection.emit(u.ConnectionEventType.IceStateChanged,e.iceConnectionState)},c.default.log("Listening for data channel"),e.ondatachannel=function(e){c.default.log("Received data channel");var t=e.channel;a.getConnection(n,r).initialize(t)},c.default.log("Listening for remote stream"),e.ontrack=function(e){c.default.log("Received remote stream");var i=e.streams[0],o=a.getConnection(n,r);if(o.type===u.ConnectionType.Media){var s=o;t._addStreamToMediaConnection(i,s)}}},e.prototype.cleanup=function(){c.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var t="closed"!==e.signalingState,n=!1;if(this.connection.type===u.ConnectionType.Data){var r=this.connection.dataChannel;r&&(n=!!r.readyState&&"closed"!==r.readyState)}(t||n)&&e.close()}},e.prototype._makeOffer=function(){return i(this,void 0,Promise,(function(){var e,t,n,i,o,l,d;return a(this,(function(a){switch(a.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:n=a.sent(),c.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return a.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:s.util.browser},this.connection.type===u.ConnectionType.Data&&(o=this.connection,i=r(r({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),t.socket.send({type:u.ServerMessageType.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=a.sent())&&(t.emitError(u.PeerErrorType.WebRTC,l),c.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return d=a.sent(),t.emitError(u.PeerErrorType.WebRTC,d),c.default.log("Failed to createOffer, ",d),[3,8];case 8:return[2]}}))}))},e.prototype._makeAnswer=function(){return i(this,void 0,Promise,(function(){var e,t,n,r,i;return a(this,(function(a){switch(a.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:n=a.sent(),c.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(n)];case 4:return a.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),t.socket.send({type:u.ServerMessageType.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:s.util.browser},dst:this.connection.peer}),[3,6];case 5:return r=a.sent(),t.emitError(u.PeerErrorType.WebRTC,r),c.default.log("Failed to setLocalDescription, ",r),[3,6];case 6:return[3,8];case 7:return i=a.sent(),t.emitError(u.PeerErrorType.WebRTC,i),c.default.log("Failed to create answer, ",i),[3,8];case 8:return[2]}}))}))},e.prototype.handleSDP=function(e,t){return i(this,void 0,Promise,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:t=new RTCSessionDescription(t),n=this.connection.peerConnection,r=this.connection.provider,c.default.log("Setting remote description",t),i=this,a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.setRemoteDescription(t)];case 2:return a.sent(),c.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,i._makeAnswer()];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:return o=a.sent(),r.emitError(u.PeerErrorType.WebRTC,o),c.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}}))}))},e.prototype.handleCandidate=function(e){return i(this,void 0,Promise,(function(){var t,n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:c.default.log("handleCandidate:",e),t=e.candidate,n=e.sdpMLineIndex,r=e.sdpMid,i=this.connection.peerConnection,o=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.addIceCandidate(new RTCIceCandidate({sdpMid:r,sdpMLineIndex:n,candidate:t}))];case 2:return a.sent(),c.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return s=a.sent(),o.emitError(u.PeerErrorType.WebRTC,s),c.default.log("Failed to handleCandidate, ",s),[3,4];case 4:return[2]}}))}))},e.prototype._addTracksToConnection=function(e,t){if(c.default.log("add tracks from stream "+e.id+" to peer connection"),!t.addTrack)return c.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((function(n){t.addTrack(n,e)}))},e.prototype._addStreamToMediaConnection=function(e,t){c.default.log("add stream "+e.id+" to media connection "+t.connectionId),t.addStream(e)},e}();n.Negotiator=l},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.BaseConnection=void 0;var i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.peer=t,i.provider=n,i.options=r,i._open=!1,i.metadata=r.metadata,i}return r(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(e("eventemitter3").EventEmitter);n.BaseConnection=i},{eventemitter3:"JJlS"}],dbHP:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MediaConnection=void 0;var s=e("./util"),c=o(e("./logger")),u=e("./negotiator"),l=e("./enums"),d=function(e){function t(n,r,i){var a=e.call(this,n,r,i)||this;return a._localStream=a.options._stream,a.connectionId=a.options.connectionId||t.ID_PREFIX+s.util.randomToken(),a._negotiator=new u.Negotiator(a),a._localStream&&a._negotiator.startConnection({_stream:a._localStream,originator:!0}),a}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return l.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(t){c.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,l.ConnectionEventType.Stream,t)},t.prototype.handleMessage=function(e){var t=e.type,n=e.payload;switch(e.type){case l.ServerMessageType.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case l.ServerMessageType.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:c.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},t.prototype.answer=function(e,t){var n,r;if(void 0===t&&(t={}),this._localStream)c.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(i(i({},this.options._payload),{_stream:e}));var o=this.provider._getMessages(this.connectionId);try{for(var s=a(o),u=s.next();!u.done;u=s.next()){var l=u.value;this.handleMessage(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,l.ConnectionEventType.Close))},t.ID_PREFIX="mc_",t}(e("./baseconnection").BaseConnection);n.MediaConnection=d},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.EncodingQueue=void 0;var a=e("eventemitter3"),o=i(e("./logger")),s=function(e){function t(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(e){t._processing=!1,e.target&&t.emit("done",e.target.result),t.doNextTask()},t.fileReader.onerror=function(e){o.default.error("EncodingQueue error:",e),t._processing=!1,t.destroy(),t.emit("error",e)},t}return r(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(a.EventEmitter);n.EncodingQueue=s},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataConnection=void 0;var o=e("./util"),s=a(e("./logger")),c=e("./negotiator"),u=e("./enums"),l=e("./baseconnection"),d=e("./encodingQueue"),p=function(e){function t(n,r,i){var a=e.call(this,n,r,i)||this;return a.stringify=JSON.stringify,a.parse=JSON.parse,a._buffer=[],a._bufferSize=0,a._buffering=!1,a._chunkedData={},a._encodingQueue=new d.EncodingQueue,a.connectionId=a.options.connectionId||t.ID_PREFIX+o.util.randomToken(),a.label=a.options.label||a.connectionId,a.serialization=a.options.serialization||u.SerializationType.Binary,a.reliable=!!a.options.reliable,a._encodingQueue.on("done",(function(e){a._bufferedSend(e)})),a._encodingQueue.on("error",(function(){s.default.error("DC#"+a.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),a.close()})),a._negotiator=new c.Negotiator(a),a._negotiator.startConnection(a.options._payload||{originator:!0}),a}return r(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return u.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;o.util.supports.binaryBlob&&!o.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){s.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(u.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){s.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){s.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},t.prototype._handleDataMessage=function(t){var n=this,r=t.data,i=r.constructor,a=r;if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){if(i===Blob)return void o.util.blobToArrayBuffer(r,(function(e){var t=o.util.unpack(e);n.emit(u.ConnectionEventType.Data,t)}));if(i===ArrayBuffer)a=o.util.unpack(r);else if(i===String){var s=o.util.binaryStringToArrayBuffer(r);a=o.util.unpack(s)}}else this.serialization===u.SerializationType.JSON&&(a=this.parse(r));a.__peerData?this._handleChunk(a):e.prototype.emit.call(this,u.ConnectionEventType.Data,a)},t.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var r=new Blob(n.data);this._handleDataMessage({data:r})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,u.ConnectionEventType.Close))},t.prototype.send=function(t,n){if(this.open)if(this.serialization===u.SerializationType.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){var r=o.util.pack(t);if(!n&&r.size>o.util.chunkedMTU)return void this._sendChunks(r);o.util.supports.binaryBlob?this._bufferedSend(r):this._encodingQueue.enque(r)}else this._bufferedSend(t);else e.prototype.emit.call(this,u.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(e){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout((function(){n._buffering=!1,n._tryBuffer()}),50),!1;try{this.dataChannel.send(e)}catch(e){return s.default.error("DC#:"+this.connectionId+" Error when sending:",e),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(e){var t,n,r=o.util.chunk(e);s.default.log("DC#"+this.connectionId+" Try to send "+r.length+" chunks...");try{for(var a=i(r),c=a.next();!c.done;c=a.next()){var u=c.value;this.send(u,!0)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case u.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case u.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:s.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(l.BaseConnection);n.DataConnection=p},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;var o=e("./util"),s=a(e("./logger")),c=function(){function e(e){this._options=e}return e.prototype._buildUrl=function(e){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+e+"?ts="+(new Date).getTime()+Math.random()},e.prototype.retrieveId=function(){return r(this,void 0,Promise,(function(){var e,t,n,r;return i(this,(function(i){switch(i.label){case 0:e=this._buildUrl("id"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=i.sent()).status)throw new Error("Error. Status:"+t.status);return[2,t.text()];case 3:throw n=i.sent(),s.default.error("Error retrieving ID",n),r="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 4:return[2]}}))}))},e.prototype.listAllPeers=function(){return r(this,void 0,Promise,(function(){var e,t,n,r;return i(this,(function(i){switch(i.label){case 0:e=this._buildUrl("peers"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=i.sent()).status){if(401===t.status)throw"",n=this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n);throw new Error("Error. Status:"+t.status)}return[2,t.json()];case 3:throw r=i.sent(),s.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 4:return[2]}}))}))},e}();n.API=c},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Peer=void 0;var c=e("eventemitter3"),u=e("./util"),l=s(e("./logger")),d=e("./socket"),p=e("./mediaconnection"),h=e("./dataconnection"),f=e("./enums"),m=e("./api"),g=function(e){function t(n,r){var a,o=e.call(this)||this;return o._id=null,o._lastServerId=null,o._destroyed=!1,o._disconnected=!1,o._open=!1,o._connections=new Map,o._lostMessages=new Map,n&&n.constructor==Object?r=n:n&&(a=n.toString()),r=i({debug:0,host:u.util.CLOUD_HOST,port:u.util.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:u.util.randomToken(),config:u.util.defaultConfig},r),o._options=r,"/"===o._options.host&&(o._options.host=window.location.hostname),o._options.path&&("/"!==o._options.path[0]&&(o._options.path="/"+o._options.path),"/"!==o._options.path[o._options.path.length-1]&&(o._options.path+="/")),void 0===o._options.secure&&o._options.host!==u.util.CLOUD_HOST?o._options.secure=u.util.isSecure():o._options.host==u.util.CLOUD_HOST&&(o._options.secure=!0),o._options.logFunction&&l.default.setLogFunction(o._options.logFunction),l.default.logLevel=o._options.debug||0,o._api=new m.API(r),o._socket=o._createServerConnection(),u.util.supports.audioVideo||u.util.supports.data?a&&!u.util.validateId(a)?(o._delayedAbort(f.PeerErrorType.InvalidID,'ID "'+a+'" is invalid'),o):(a?o._initialize(a):o._api.retrieveId().then((function(e){return o._initialize(e)})).catch((function(e){return o._abort(f.PeerErrorType.ServerError,e)})),o):(o._delayedAbort(f.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),o)}return r(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,t,n=Object.create(null);try{for(var r=a(this._connections),i=r.next();!i.done;i=r.next()){var s=o(i.value,2),c=s[0],u=s[1];n[c]=u}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,t=new d.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(f.SocketEventType.Message,(function(t){e._handleMessage(t)})),t.on(f.SocketEventType.Error,(function(t){e._abort(f.PeerErrorType.SocketError,t)})),t.on(f.SocketEventType.Disconnected,(function(){e.disconnected||(e.emitError(f.PeerErrorType.Network,"Lost connection to server."),e.disconnect())})),t.on(f.SocketEventType.Close,(function(){e.disconnected||e._abort(f.PeerErrorType.SocketClosed,"Underlying socket is already closed.")})),t},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var t,n,r=e.type,i=e.payload,o=e.src;switch(r){case f.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(f.PeerEventType.Open,this.id);break;case f.ServerMessageType.Error:this._abort(f.PeerErrorType.ServerError,i.msg);break;case f.ServerMessageType.IdTaken:this._abort(f.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case f.ServerMessageType.InvalidKey:this._abort(f.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case f.ServerMessageType.Leave:l.default.log("Received leave message from "+o),this._cleanupPeer(o),this._connections.delete(o);break;case f.ServerMessageType.Expire:this.emitError(f.PeerErrorType.PeerUnavailable,"Could not connect to peer "+o);break;case f.ServerMessageType.Offer:var s=i.connectionId;if((g=this.getConnection(o,s))&&(g.close(),l.default.warn("Offer received for existing Connection ID:"+s)),i.type===f.ConnectionType.Media)g=new p.MediaConnection(o,this,{connectionId:s,_payload:i,metadata:i.metadata}),this._addConnection(o,g),this.emit(f.PeerEventType.Call,g);else{if(i.type!==f.ConnectionType.Data)return void l.default.warn("Received malformed connection type:"+i.type);g=new h.DataConnection(o,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(o,g),this.emit(f.PeerEventType.Connection,g)}var c=this._getMessages(s);try{for(var u=a(c),d=u.next();!d.done;d=u.next()){var m=d.value;g.handleMessage(m)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}break;default:if(!i)return void l.default.warn("You received a malformed message from "+o+" of type "+r);var g;s=i.connectionId,(g=this.getConnection(o,s))&&g.peerConnection?g.handleMessage(e):s?this._storeMessage(s,e):l.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},t.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},t.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(f.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new h.DataConnection(e,this,t);return this._addConnection(e,n),n},t.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(f.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new p.MediaConnection(e,this,n);return this._addConnection(e,r),r}l.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,t){l.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},t.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,t){var n,r,i=this._connections.get(e);if(!i)return null;try{for(var o=a(i),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.connectionId===t)return c}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},t.prototype._delayedAbort=function(e,t){var n=this;setTimeout((function(){n._abort(e,t)}),0)},t.prototype._abort=function(e,t){l.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,t){var n;l.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(f.PeerEventType.Error,n)},t.prototype.destroy=function(){this.destroyed||(l.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(f.PeerEventType.Close))},t.prototype._cleanup=function(){var e,t;try{for(var n=a(this._connections.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var t,n,r=this._connections.get(e);if(r)try{for(var i=a(r),o=i.next();!o.done;o=i.next())o.value.close()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;l.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(f.PeerEventType.Disconnected,e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)l.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");l.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then((function(t){return e(t)})).catch((function(e){return t._abort(f.PeerErrorType.ServerError,e)}))},t.DEFAULT_KEY="peerjs",t}(c.EventEmitter);n.Peer=g},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.peerjs=void 0;var r=e("./util"),i=e("./peer");n.peerjs={Peer:i.Peer,util:r.util},n.default=i.Peer,window.peerjs=n.peerjs,window.Peer=i.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])},3648:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3648,e.exports=t},1485:(e,t,n)=>{const r=n(2991),i=n(6207),a=n(7717),o=n(42);function s(e,t,n,a,o){const s=[].slice.call(arguments,1),c=s.length,u="function"==typeof s[c-1];if(!u&&!r())throw new Error("Callback required as last argument");if(!u){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=t,t=a=void 0):2!==c||t.getContext||(a=n,n=t,t=void 0),new Promise((function(r,o){try{const o=i.create(n,a);r(e(o,t,a))}catch(e){o(e)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(o=n,n=t,t=a=void 0):3===c&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=n,n=t,t=void 0));try{const r=i.create(n,a);o(null,e(r,t,a))}catch(e){o(e)}}t.create=i.create,t.toCanvas=s.bind(null,a.render),t.toDataURL=s.bind(null,a.renderToDataURL),t.toString=s.bind(null,(function(e,t,n){return o.render(e,n)}))},2991:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6571:(e,t,n)=>{const r=n(7148).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-i;return a.push(6),a.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),i=r.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([r[e],r[t]]);return n}},9399:(e,t,n)=>{const r=n(1317),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=r.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=a},3933:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},3698:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){const i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},212:(e,t,n)=>{const r=n(1317);function i(e){this.mode=r.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},9532:(e,t,n)=>{const r=n(2055),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}}},2055:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},7814:(e,t,n)=>{const r=n(7148).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},5135:(e,t,n)=>{const r=n(7148),i=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let a=n<<10;for(;r.getBCHDigit(a)-i>=0;)a^=1335<<r.getBCHDigit(a)-i;return 21522^(n<<10|a)}},753:(e,t)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},3695:(e,t,n)=>{const r=n(1317),i=n(7148);function a(e){this.mode=r.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=a},1138:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,i=40,a=10;function o(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,i=0,a=0,o=null,s=null;for(let c=0;c<t;c++){i=a=0,o=s=null;for(let u=0;u<t;u++){let t=e.get(c,u);t===o?i++:(i>=5&&(r+=n+(i-5)),o=t,i=1),t=e.get(u,c),t===s?a++:(a>=5&&(r+=n+(a-5)),s=t,a=1)}i>=5&&(r+=n+(i-5)),a>=5&&(r+=n+(a-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let i=0;i<t-1;i++){const t=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,a=0;for(let i=0;i<t;i++){r=a=0;for(let o=0;o<t;o++)r=r<<1&2047|e.get(i,o),o>=10&&(1488===r||93===r)&&n++,a=a<<1&2047|e.get(o,i),o>=10&&(1488===a||93===a)&&n++}return n*i},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*a},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let i=0;i<n;i++)t.isReserved(i,r)||t.xor(i,r,o(e,i,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let i=0,a=1/0;for(let o=0;o<r;o++){n(o),t.applyMask(o,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),r<a&&(a=r,i=o)}return i}},1317:(e,t,n)=>{const r=n(9288),i=n(3326);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},7471:(e,t,n)=>{const r=n(1317);function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},e.exports=i},9203:(e,t,n)=>{const r=n(753);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)n[i+a]^=r.mul(e[i],t[a]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let i=0;i<t.length;i++)n[i]^=r.mul(t[i],e);let i=0;for(;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let i=0;i<e;i++)n=t.mul(n,new Uint8Array([1,r.exp(i)]));return n}},6207:(e,t,n)=>{const r=n(7148),i=n(2055),a=n(3933),o=n(3698),s=n(6571),c=n(7814),u=n(1138),l=n(9532),d=n(4834),p=n(8241),h=n(5135),f=n(1317),m=n(9455);function g(e,t,n){const r=e.size,i=h.getEncodedBits(t,n);let a,o;for(a=0;a<15;a++)o=1==(i>>a&1),a<6?e.set(a,8,o,!0):a<8?e.set(a+1,8,o,!0):e.set(r-15+a,8,o,!0),a<8?e.set(8,r-a-1,o,!0):a<9?e.set(8,15-a-1+1,o,!0):e.set(8,15-a-1,o,!0);e.set(r-8,8,1,!0)}function _(e,t,n){const i=new a;n.forEach((function(t){i.put(t.mode.bit,4),i.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(i)}));const o=8*(r.getSymbolTotalCodewords(e)-l.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);const s=(o-i.getLengthInBits())/8;for(let e=0;e<s;e++)i.put(e%2?17:236,8);return function(e,t,n){const i=r.getSymbolTotalCodewords(t),a=l.getTotalCodewordsCount(t,n),o=i-a,s=l.getBlocksCount(t,n),c=i%s,u=s-c,p=Math.floor(i/s),h=Math.floor(o/s),f=h+1,m=p-h,g=new d(m);let _=0;const v=new Array(s),y=new Array(s);let b=0;const w=new Uint8Array(e.buffer);for(let e=0;e<s;e++){const t=e<u?h:f;v[e]=w.slice(_,_+t),y[e]=g.encode(v[e]),_+=t,b=Math.max(b,t)}const k=new Uint8Array(i);let x,S,T=0;for(x=0;x<b;x++)for(S=0;S<s;S++)x<v[S].length&&(k[T++]=v[S][x]);for(x=0;x<m;x++)for(S=0;S<s;S++)k[T++]=y[S][x];return k}(i,e,t)}function v(e,t,n,i){let a;if(Array.isArray(e))a=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=p.getBestVersionForData(t,n)}a=m.fromString(e,r||40)}}const l=p.getBestVersionForData(a,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<l)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+l+".\n")}else t=l;const d=_(t,n,a),h=r.getSymbolSize(t),f=new o(h);return function(e,t){const n=e.size,r=c.getPositions(t);for(let t=0;t<r.length;t++){const i=r[t][0],a=r[t][1];for(let t=-1;t<=7;t++)if(!(i+t<=-1||n<=i+t))for(let r=-1;r<=7;r++)a+r<=-1||n<=a+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(i+t,a+r,!0,!0):e.set(i+t,a+r,!1,!0))}}(f,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(f),function(e,t){const n=s.getPositions(t);for(let t=0;t<n.length;t++){const r=n[t][0],i=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(r+t,i+n,!0,!0):e.set(r+t,i+n,!1,!0)}}(f,t),g(f,n,0),t>=7&&function(e,t){const n=e.size,r=p.getEncodedBits(t);let i,a,o;for(let t=0;t<18;t++)i=Math.floor(t/3),a=t%3+n-8-3,o=1==(r>>t&1),e.set(i,a,o,!0),e.set(a,i,o,!0)}(f,t),function(e,t){const n=e.size;let r=-1,i=n-1,a=7,o=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(i,s-n)){let r=!1;o<t.length&&(r=1==(t[o]>>>a&1)),e.set(i,s-n,r),a--,-1===a&&(o++,a=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(f,d),isNaN(i)&&(i=u.getBestMask(f,g.bind(null,f,n))),u.applyMask(i,f),g(f,n,i),{modules:f,version:t,errorCorrectionLevel:n,maskPattern:i,segments:a}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,a,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),n=p.from(t.version),a=u.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),v(e,n,o,a)}},4834:(e,t,n)=>{const r=n(9203);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),i=this.degree-n.length;if(i>0){const e=new Uint8Array(this.degree);return e.set(n,i),e}return n},e.exports=i},3326:(e,t)=>{const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+r+"$"),o=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},9455:(e,t,n)=>{const r=n(1317),i=n(7471),a=n(9399),o=n(212),s=n(3695),c=n(3326),u=n(7148),l=n(6502);function d(e){return unescape(encodeURIComponent(e)).length}function p(e,t,n){const r=[];let i;for(;null!==(i=e.exec(n));)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function h(e){const t=p(c.NUMERIC,r.NUMERIC,e),n=p(c.ALPHANUMERIC,r.ALPHANUMERIC,e);let i,a;u.isKanjiModeEnabled()?(i=p(c.BYTE,r.BYTE,e),a=p(c.KANJI,r.KANJI,e)):(i=p(c.BYTE_KANJI,r.BYTE,e),a=[]);return t.concat(n,i,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function f(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return a.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function m(e,t){let n;const c=r.getBestModeForData(e);if(n=r.from(t,c),n!==r.BYTE&&n.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||u.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new a(e);case r.KANJI:return new s(e);case r.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const i=function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:d(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:d(i.data)}])}}return t}(h(e,u.isKanjiModeEnabled())),a=function(e,t){const n={},i={start:{}};let a=["start"];for(let o=0;o<e.length;o++){const s=e[o],c=[];for(let e=0;e<s.length;e++){const u=s[e],l=""+o+e;c.push(l),n[l]={node:u,lastCount:0},i[l]={};for(let e=0;e<a.length;e++){const o=a[e];n[o]&&n[o].node.mode===u.mode?(i[o][l]=f(n[o].lastCount+u.length,u.mode)-f(n[o].lastCount,u.mode),n[o].lastCount+=u.length):(n[o]&&(n[o].lastCount=u.length),i[o][l]=f(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,t))}}a=c}for(let e=0;e<a.length;e++)i[a[e]].end=0;return{map:i,table:n}}(i,n),o=l.find_path(a.map,"start","end"),s=[];for(let e=1;e<o.length-1;e++)s.push(a.table[o[e]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(s))},t.rawSplit=function(e){return t.fromArray(h(e,u.isKanjiModeEnabled()))}},7148:(e,t)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},9288:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},8241:(e,t,n)=>{const r=n(7148),i=n(9532),a=n(2055),o=n(1317),s=n(9288),c=r.getBCHDigit(7973);function u(e,t){return o.getCharCountIndicator(e,t)+4}function l(e,t){let n=0;return e.forEach((function(e){const r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);const a=8*(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===o.MIXED)return a;const c=a-u(n,e);switch(n){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,n){let r;const i=a.from(n,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(l(e,r)<=t.getCapacity(r,n,o.MIXED))return r}(e,i);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-c>=0;)t^=7973<<r.getBCHDigit(t)-c;return e<<12|t}},7717:(e,t,n)=>{const r=n(1904);t.render=function(e,t,n){let i=n,a=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);const o=r.getImageWidth(e.modules.size,i),s=a.getContext("2d"),c=s.createImageData(o,o);return r.qrToImageData(c.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,a,o),s.putImageData(c,0,0),a},t.renderToDataURL=function(e,n,r){let i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const a=t.render(e,n,i),o=i.type||"image/png",s=i.rendererOpts||{};return a.toDataURL(o,s.quality)}},42:(e,t,n)=>{const r=n(1904);function i(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){const o=r.getOptions(t),s=e.modules.size,c=e.modules.data,u=s+2*o.margin,l=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",d="<path "+i(o.color.dark,"stroke")+' d="'+function(e,t,n){let r="",i=0,o=!1,s=0;for(let c=0;c<e.length;c++){const u=Math.floor(c%t),l=Math.floor(c/t);u||o||(o=!0),e[c]?(s++,c>0&&u>0&&e[c-1]||(r+=o?a("M",u+n,.5+l+n):a("m",i,0),i=0,o=!1),u+1<t&&e[c+1]||(r+=a("h",s),s=0)):i++}return r}(c,s,o.margin)+'"/>',p='viewBox="0 0 '+u+" "+u+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+p+' shape-rendering="crispEdges">'+l+d+"</svg>\n";return"function"==typeof n&&n(null,h),h}},1904:(e,t)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const i=n.modules.size,a=n.modules.data,o=t.getScale(i,r),s=Math.floor((i+2*r.margin)*o),c=r.margin*o,u=[r.color.light,r.color.dark];for(let t=0;t<s;t++)for(let n=0;n<s;n++){let l=4*(t*s+n),d=r.color.light;if(t>=c&&n>=c&&t<s-c&&n<s-c){d=u[a[Math.floor((t-c)/o)*i+Math.floor((n-c)/o)]?1:0]}e[l++]=d.r,e[l++]=d.g,e[l++]=d.b,e[l]=d.a}}},1445:(e,t,n)=>{var r=n(4122),i=n(3007),a=n(9545),o=n(5297),s=n(5695),c=n(9391),u=n(4959);u.alea=r,u.xor128=i,u.xorwow=a,u.xorshift7=o,u.xor4096=s,u.tychei=c,e.exports=u},4122:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},9391:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},3007:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},5695:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),i=0,a=-32;a<c;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},5297:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},9545:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},4959:function(e,t,n){var r;!function(i,a,o){var s,c=256,u=o.pow(c,6),l=o.pow(2,52),d=2*l,p=255;function h(e,t,n){var r=[],p=_(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(e)),v(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,v(a)]}}():e,3),r),h=new f(r),y=function(){for(var e=h.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,_(v(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(o.random=e,t):e})(y,p,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<c;)o[i]=i++;for(i=0;i<c;i++)o[i]=o[a=p&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=p&i+1],n=n*c+o[p&(o[i]=o[a=p&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function _(e,t){for(var n,r=e+"",i=0;i<r.length;)t[p&i]=p&(n^=19*t[p&i])+r.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(_(o.random(),a),e.exports){e.exports=h;try{s=n(4540)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},2839:(e,t,n)=>{"use strict";var r=n(2669);e.exports=function(e,t,n,i){var a,o=new Error("Canceled");return new r((function(s,c,u){var l;e((function(e){return u()?r.reject(o):(l=t(e),n(l).then((function(e){if(u())throw o;return a=e()})))})).then((function(e){if(u())throw e.disconnect(),o;s(i(l,e))})).catch((function(e){c(e)}))}),(function(){a&&a.cancel()}))}},6063:(e,t,n)=>{"use strict";var r=n(807).MediaStreamTrack,i=n(7792),a=i.guessBrowser,o=i.guessBrowserVersion,s=i.isCodecSupported,c=n(2839),u=n(3296),l=n(6389),d=n(2042),p=n(1017),h=n(1182),f=h.LocalAudioTrack,m=h.LocalDataTrack,g=h.LocalVideoTrack,_=n(118),v=n(9250),y=n(6755),b=n(7026),w=b.asLocalTrack,k=b.buildLogLevels,x=b.filterObject,S=b.isNonArrayObject,T=n(3427),C=T.DEFAULT_ENVIRONMENT,E=T.DEFAULT_LOG_LEVEL,I=T.DEFAULT_LOGGER_NAME,N=T.DEFAULT_REALM,A=T.DEFAULT_REGION,O=T.WS_SERVER,R=T.SDK_NAME,P=T.SDK_VERSION,D=T.typeErrors,L=n(2669),M=n(4968),F=n(8552),z=n(3670).Pn,$="safari"===a()&&o(),j=0,B=!1,V=!1;if($){var U=$.major,G=$.minor;V=U<12||12===U&&G<1}var q=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),W=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function H(e,t,n){n.forEach((function(n){var r=n.didWarn,i=n.name,a=n.newName,o=n.shouldDelete;i in e&&void 0!==e[i]&&(a&&o&&(e[a]=e[i]),o&&delete e[i],r||["error","off"].includes(t.level)||(t.warn('The ConnectOptions "'+i+'" is '+(a?'deprecated and scheduled for removal. Please use "'+a+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))}))}function Y(e,t,n,r,i,a){var o=e.createLocalParticipantSignaling(n,r);return t.debug("Creating a new LocalParticipant:",o),new i.LocalParticipant(o,a,i)}function K(e,t,n){var r=new v(t,n,e),i=e.log;return i.debug("Creating a new Room:",r),n.on("stateChanged",(function e(t){"disconnected"===t&&(i.info("Disconnected from Room:",r.toString()),n.removeListener("stateChanged",e))})),r}function X(e,t,n,r,i,a){return t.log.debug("Creating a new RoomSignaling"),n.connect(a._signaling,e,r,i,t)}function Q(e,t){var n=e.log;return e.shouldStopLocalTracks=!e.tracks,e.shouldStopLocalTracks?n.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(n.info("Getting LocalTracks"),n.debug("Options:",e)),e.createLocalTracks(e).then((function(r){var i=t(r);return i.catch((function(){e.shouldStopLocalTracks&&(n.info("The automatically acquired LocalTracks will now be stopped"),r.forEach((function(e){e.stop()})))})),i}))}function J(e){var t="string"==typeof e?{codec:e}:e;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}e.exports=function(e,t){if(void 0===t&&(t={}),!S(t))return L.reject(D.INVALID_TYPE("options","object"));var n,i=t.Log||F,a=t.loggerName||I,o=t.logLevel||E,h=k(o),v="[connect #"+ ++j+"]";try{n=new i("default",v,h,a)}catch(ee){return L.reject(ee)}H(t,n,q);var b="auto"===t.preferredVideoCodecs;if(b&&(t.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),t.maxVideoBitrate&&b)return n.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),L.reject(D.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var T={};"string"==typeof(t=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:C,eventListener:null,insights:!0,LocalAudioTrack:f,LocalDataTrack:m,LocalParticipant:l,LocalVideoTrack:g,Log:i,MediaStreamTrack:r,loggerName:a,logLevel:o,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:N,region:A,signaling:y},x(t))).wsServerInsights&&(T.gateway=t.wsServerInsights);var $=new(t.insights?d:p)(e,R,P,t.environment,t.realm,T),U=O(t.environment,t.region),G=new M($,Date.now(),n,t.eventListener);if((t=Object.assign({eventObserver:G,wsServer:U},t)).log=n,V&&!B&&"error"!==n.logLevel&&"off"!==n.logLevel&&(B=!0,n.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof e)return L.reject(D.INVALID_TYPE("token","string"));var Z=Object.assign({},t);if(delete Z.name,"tracks"in t){if(!Array.isArray(t.tracks))return L.reject(D.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map((function(e){return w(e,Z)}))}catch(ee){return L.reject(ee)}}var ee=z(t.bandwidthProfile);if(ee)return L.reject(ee);t.clientTrackSwitchOffControl="disabled",t.contentPreferencesMode="disabled",t.bandwidthProfile&&(t.clientTrackSwitchOffControl="auto",t.contentPreferencesMode="auto",t.bandwidthProfile.video&&(H(t.bandwidthProfile.video,n,W),"maxTracks"in t.bandwidthProfile.video?t.clientTrackSwitchOffControl="disabled":"manual"===t.bandwidthProfile.video.clientTrackSwitchOffControl?t.clientTrackSwitchOffControl="manual":t.clientTrackSwitchOffControl="auto","renderDimensions"in t.bandwidthProfile.video?t.contentPreferencesMode="disabled":"manual"===t.bandwidthProfile.video.contentPreferencesMode?t.contentPreferencesMode="manual":t.contentPreferencesMode="auto"));var te=new(0,t.signaling)(t.wsServer,t);n.info("Connecting to a Room"),n.debug("Options:",t);var ne=new u({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate},b),re={audio:t.preferredAudioCodecs.map(J),video:t.preferredVideoCodecs.map(J)},ie=new _(S(t.networkQuality)?t.networkQuality:{});["audio","video"].forEach((function(e){return re[e].forEach((function(t){var r=t.codec;return s(r,e).then((function(t){return!t&&n.warn("The preferred "+e+' codec "'+r+'" will be ignored as it is not supported by the browser.')}))}))}));var ae=c(Q.bind(null,t),Y.bind(null,te,n,ne,ie,t),X.bind(null,e,t,te,ne,re),K.bind(null,t));return ae.then((function(e){return $.connect(e.sid,e.localParticipant.sid),n.info("Connected to Room:",e.toString()),n.info("Room name:",e.name),n.debug("Room:",e),e.once("disconnected",(function(){return $.disconnect()})),e}),(function(e){$.disconnect(),ae._isCanceled?n.info("Attempt to connect to a Room was canceled"):n.info("Error while connecting to a Room:",e)})),ae}},6163:(e,t,n)=>{"use strict";var r=n(3427),i=r.DEFAULT_LOG_LEVEL,a=r.DEFAULT_LOGGER_NAME;function o(e,t){t=Object.assign({loggerName:a,logLevel:i},t);var n={};n.loggerName=t.loggerName,n.logLevel=t.logLevel,delete t.loggerName,delete t.logLevel;var r=t.createLocalTracks;return delete t.createLocalTracks,n[e]=!(Object.keys(t).length>0)||t,r(n).then((function(e){return e[0]}))}e.exports={audio:function(e){return o("audio",e)},video:function(e){return o("video",e)}}},8198:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalTracks=void 0;var c=n(469),u=n(7026).buildLogLevels,l=n(807),d=l.getUserMedia,p=l.MediaStreamTrack,h=n(1182),f=h.LocalAudioTrack,m=h.LocalDataTrack,g=h.LocalVideoTrack,_=n(8552),v=n(3427),y=v.DEFAULT_LOG_LEVEL,b=v.DEFAULT_LOGGER_NAME,w=v.typeErrors.INVALID_VALUE,k=n(5172),x=0;t.createLocalTracks=function(e){return i(this,void 0,void 0,(function(){var t,n,l,h,v,S,T,C,E,I,N,A,O,R=this;return a(this,(function(P){switch(P.label){case 0:if(n=r({audio:t=!(e&&("audio"in e||"video"in e)),getUserMedia:d,loggerName:b,logLevel:y,LocalAudioTrack:f,LocalDataTrack:m,LocalVideoTrack:g,MediaStreamTrack:p,Log:_,video:t},e),l="[createLocalTracks #"+ ++x+"]",h=u(n.logLevel),v=new n.Log("default",l,h,n.loggerName),delete(S=Object.assign({log:v},n)).name,!1===n.audio&&!1===n.video)return v.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(n.tracks)return v.info("Adding user-provided LocalTracks"),v.debug("LocalTracks:",n.tracks),[2,n.tracks];if((T={audio:"object"==typeof n.audio&&n.audio.name?{name:n.audio.name}:{defaultDeviceCaptureMode:"auto"},video:"object"==typeof n.video&&n.video.name?{name:n.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,T.video.isCreatedByCreateLocalTracks=!0,"object"==typeof n.audio)if("boolean"==typeof n.audio.workaroundWebKitBug1208516&&(T.audio.workaroundWebKitBug1208516=n.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in n.audio&&(C=n.audio.noiseCancellationOptions,delete n.audio.noiseCancellationOptions),"defaultDeviceCaptureMode"in n.audio){if(["auto","manual"].every((function(e){return e!==n.audio.defaultDeviceCaptureMode})))throw w("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);T.audio.defaultDeviceCaptureMode=n.audio.defaultDeviceCaptureMode}else T.audio.defaultDeviceCaptureMode="auto";"object"==typeof n.video&&"boolean"==typeof n.video.workaroundWebKitBug1208516&&(T.video.workaroundWebKitBug1208516=n.video.workaroundWebKitBug1208516),"object"==typeof n.audio&&delete n.audio.name,"object"==typeof n.video&&delete n.video.name,E={audio:n.audio,video:n.video},I="object"==typeof n.audio&&n.audio.workaroundWebKitBug180748,P.label=1;case 1:return P.trys.push([1,4,,5]),[4,I?k(v,n.getUserMedia,E):n.getUserMedia(E)];case 2:return N=P.sent(),A=s(s([],o(N.getAudioTracks())),o(N.getVideoTracks())),v.info("Call to getUserMedia successful; got tracks:",A),[4,Promise.all(A.map((function(e){return i(R,void 0,void 0,(function(){var t,n,i;return a(this,(function(a){switch(a.label){case 0:return"audio"===e.kind&&C?[4,c.applyNoiseCancellation(e,C,v)]:[3,2];case 1:return t=a.sent(),n=t.cleanTrack,i=t.noiseCancellation,[2,new S.LocalAudioTrack(n,r(r(r({},T.audio),S),{noiseCancellation:i}))];case 2:if("audio"===e.kind)return[2,new S.LocalAudioTrack(e,r(r({},T.audio),S))];a.label=3;case 3:return[2,new S.LocalVideoTrack(e,r(r({},T.video),S))]}}))}))})))];case 3:return[2,P.sent()];case 4:throw O=P.sent(),v.warn("Call to getUserMedia failed:",O),O;case 5:return[2]}}))}))}},2861:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(8088),o=n(3843),s=function(e){function t(t){var n=e.call(this,t.label,t.maxPacketLifeTime,t.maxRetransmits,t.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:t}}),t.binaryType="arraybuffer",t.addEventListener("message",(function(e){n.emit("message",e.data)})),t.addEventListener("close",(function(){n.emit("close")})),n}return i(t,e),t.prototype.stop=function(){this._dataChannel.close(),e.prototype.stop.call(this)},t.prototype.toDataTransport=function(){return new o(this._dataChannel)},t}(a);e.exports=s},1629:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(8088),o=n(7026).makeUUID,s=function(e){function t(t,n,r){var i=e.call(this,o(),t,n,r)||this;return Object.defineProperties(i,{_clones:{value:new Set},_dataChannels:{value:new Set}}),i}return i(t,e),t.prototype._addClone=function(e){this._clones.add(e)},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.addDataChannel=function(e){return this._dataChannels.add(e),this},t.prototype.clone=function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",(function(){return e.removeClone(n)})),n},t.prototype.removeDataChannel=function(e){return this._dataChannels.delete(e),this},t.prototype.send=function(e){return this._dataChannels.forEach((function(t){try{t.send(e)}catch(e){}})),this._clones.forEach((function(t){try{t.send(e)}catch(e){}})),this},t.prototype.stop=function(){this._dataChannels.forEach((function(e){return e.close()})),this._clones.forEach((function(e){return e.stop()})),e.prototype.stop.call(this)},t}(a);e.exports=s},8088:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i){var a=e.call(this,t,"data")||this;return Object.defineProperties(a,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:r},ordered:{enumerable:!0,value:i}}),a}return i(t,e),t}(n(8027));e.exports=a},3843:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:t},_messageQueue:{value:[]}}),t.addEventListener("open",(function(){n._messageQueue.splice(0).forEach((function(e){return n._publish(e)}))})),t.addEventListener("message",(function(e){var t=e.data;try{var r=JSON.parse(t);n.emit("message",r)}catch(e){}})),n.publish({type:"ready"}),n}return i(t,e),t.prototype._publish=function(e){var t=JSON.stringify(e);try{this._dataChannel.send(t)}catch(e){}},t.prototype.publish=function(e){var t=this._dataChannel;return"closing"!==t.readyState&&"closed"!==t.readyState&&("connecting"===t.readyState?(this._messageQueue.push(e),!0):(this._publish(e),!0))},t}(n(29).EventEmitter);e.exports=a},3296:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this)||this;return t=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},t),Object.defineProperties(r,{maxAudioBitrate:{value:t.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:t.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),r}return i(t,e),t.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},t.prototype.update=function(e){var t=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e),["maxAudioBitrate","maxVideoBitrate"].reduce((function(n,r){return t[r]!==e[r]&&(t[r]=e[r],n=!0),n}),!1)&&this.emit("changed")},t}(n(29).EventEmitter);e.exports=a},2787:(e,t,n)=>{"use strict";var r=n(29).EventEmitter,i=n(7026).hidePrivateAndCertainPublicPropertiesInClass;e.exports=i(r,["domain"])},6748:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=n(29).EventEmitter,o=function(){function e(){Object.defineProperties(this,{_eventEmitter:{value:new a}})}return e.prototype.dispatchEvent=function(e){return this._eventEmitter.emit(e.type,e)},e.prototype.addEventListener=function(){var e;return(e=this._eventEmitter).addListener.apply(e,i([],r(arguments)))},e.prototype.removeEventListener=function(){var e;return(e=this._eventEmitter).removeListener.apply(e,i([],r(arguments)))},e}();e.exports=o},7825:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(8198),a=n(8354),o={connect:n(6063),createLocalAudioTrack:n(6163).audio,createLocalVideoTrack:n(6163).video,isSupported:n(809)(),version:n(3906).version,Logger:n(5418),LocalAudioTrack:n(1182).LocalAudioTrack,LocalDataTrack:n(1182).LocalDataTrack,LocalVideoTrack:n(1182).LocalVideoTrack};var s=o.isSupported,c=o.version,u=o.Logger,l=o.LocalAudioTrack,d=o.LocalVideoTrack,p=o.LocalDataTrack;e.exports={connect:function(e,t){var n=r({createLocalTracks:i.createLocalTracks},t);return o.connect(e,n)},createLocalAudioTrack:function(e){var t=r({createLocalTracks:i.createLocalTracks},e);return o.createLocalAudioTrack(t)},createLocalVideoTrack:function(e){var t=r({createLocalTracks:i.createLocalTracks},e);return o.createLocalVideoTrack(t)},createLocalTracks:i.createLocalTracks,runPreflight:a.runPreflight,isSupported:s,version:c,Logger:u,LocalAudioTrack:l,LocalVideoTrack:d,LocalDataTrack:p}},6389:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(807).MediaStreamTrack,o=n(7026),s=o.asLocalTrack,c=o.asLocalTrackPublication,u=o.trackClass,l=n(3427),d=l.typeErrors,p=l.trackPriority,h=n(3670).ZS,f=n(1182),m=f.LocalAudioTrack,g=f.LocalDataTrack,_=f.LocalVideoTrack,v=n(532),y=n(1674),b=n(3866),w=function(e){function t(t,n,r){var i=this,o=(r=Object.assign({LocalAudioTrack:m,LocalVideoTrack:_,LocalDataTrack:g,MediaStreamTrack:a,LocalAudioTrackPublication:v,LocalVideoTrackPublication:b,LocalDataTrackPublication:y,shouldStopLocalTracks:!1,tracks:n},r)).shouldStopLocalTracks?new Set(n.filter((function(e){return"data"!==e.kind}))):new Set;return i=e.call(this,t,r)||this,Object.defineProperties(i,{_eventObserver:{value:r.eventObserver},_LocalAudioTrack:{value:r.LocalAudioTrack},_LocalDataTrack:{value:r.LocalDataTrack},_LocalVideoTrack:{value:r.LocalVideoTrack},_MediaStreamTrack:{value:r.MediaStreamTrack},_LocalAudioTrackPublication:{value:r.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:r.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:r.LocalVideoTrackPublication},_tracksToStop:{value:o},signalingRegion:{enumerable:!0,get:function(){return t.signalingRegion}}}),i._handleTrackSignalingEvents(),i}return i(t,e),t.prototype._addTrack=function(t,n,r){var i=e.prototype._addTrack.call(this,t,n);return i&&"disconnected"!==this.state&&this._addLocalTrack(t,r),i},t.prototype._addLocalTrack=function(e,t){var n,r=null===(n=e.noiseCancellation)||void 0===n?void 0:n.vendor;this._signaling.addTrack(e._trackSender,e.name,t,r),this._log.info("Added a new "+u(e,!0)+":",e.id),this._log.debug(u(e,!0)+":",e)},t.prototype._removeTrack=function(t,n){var r=e.prototype._removeTrack.call(this,t,n);return r&&"disconnected"!==this.state&&(this._signaling.removeTrack(t._trackSender),this._log.info("Removed a "+u(t,!0)+":",t.id),this._log.debug(u(t,!0)+":",t)),r},t.prototype._getTrackEvents=function(){return e.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},t.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._handleTrackSignalingEvents=function(){var e=this,t=this._log;if("disconnected"!==this.state){var n=function(n){var r=e._signaling.getPublication(n._trackSender);r&&(r.disable(),t.debug("Disabled the "+u(n,!0)+":",n.id))},r=function(n){var r=e._signaling.getPublication(n._trackSender);r&&(r.enable(),t.debug("Enabled the "+u(n,!0)+":",n.id))},i=function(t){var n=e._signaling.getPublication(t._trackSender);return n&&n.stop(),n},a=function(o){t.debug("Transitioned to state:",o),"disconnected"===o?(t.debug("Removing LocalTrack event listeners"),e._signaling.removeListener("stateChanged",a),e.removeListener("trackDisabled",n),e.removeListener("trackEnabled",r),e.removeListener("trackStopped",i),e._tracks.forEach((function(e){var t=i(e);t&&e._trackSender.removeClone(t._trackTransceiver)})),t.info("LocalParticipant disconnected. Stopping "+e._tracksToStop.size+" automatically-acquired LocalTracks"),e._tracksToStop.forEach((function(e){e.stop()}))):"connected"===o&&(t.info("reconnected"),setTimeout((function(){return e.emit("reconnected")}),0))};this.on("trackDisabled",n),this.on("trackEnabled",r),this.on("trackStopped",i),this._signaling.on("stateChanged",a),this._tracks.forEach((function(n){e._addLocalTrack(n,p.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(n).catch((function(e){t.warn("Failed to get or create LocalTrackPublication for "+n+":",e)}))}))}},t.prototype._getOrCreateLocalTrackPublication=function(e){var t=k(this.tracks,e);if(t)return Promise.resolve(t);var n=this._log,r=this,i=this._signaling.getPublication(e._trackSender);return i?new Promise((function(a,o){i.on("updated",(function s(){var l=i.error;if(l)return i.removeListener("updated",s),n.warn("Failed to publish the "+u(e,!0)+": "+l.message),r._removeTrack(e,e.id),setTimeout((function(){r.emit("trackPublicationFailed",l,e)})),void o(l);if(!r._tracks.has(e.id))return i.removeListener("updated",s),void o(new Error("The "+e+" was unpublished"));if(i.sid){i.removeListener("updated",s);var d={log:n,LocalAudioTrackPublication:r._LocalAudioTrackPublication,LocalDataTrackPublication:r._LocalDataTrackPublication,LocalVideoTrackPublication:r._LocalVideoTrackPublication};t=k(r.tracks,e);var p=function(e){return r.emit("trackWarning",e,t)},h=function(){return r.emit("trackWarningsCleared",t)};t||(t=c(e,i,(function(e){t.removeListener("trackWarning",p),t.removeListener("trackWarningsCleared",h),r.unpublishTrack(e.track)}),d),r._addTrackPublication(t)),t.on("warning",p),t.on("warningsCleared",h);var f=r._signaling.state;"connected"!==f&&"connecting"!==f||(e._processorEventObserver&&e._processorEventObserver.on("event",(function(e){r._eventObserver.emit("event",{name:e.name,payload:e.data,group:"video-processor",level:"info"})})),e.processedTrack&&(e._captureFrames(),e._setSenderMediaStreamTrack(!0))),"connected"===f&&setTimeout((function(){r.emit("trackPublished",t)})),a(t)}}))})):Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"))},t.prototype.publishTrack=function(e,t){var n,r=k(this.tracks,e);if(r)return Promise.resolve(r);t=Object.assign({log:this._log,priority:p.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},t);try{n=s(e,t)}catch(e){return Promise.reject(e)}var i=n.noiseCancellation,a=this._signaling.audioProcessors;i&&!a.includes(i.vendor)&&(this._log.warn(i.vendor+" is not supported in this room. disabling it permanently"),i.disablePermanently());var o=Object.values(p);if(!o.includes(t.priority))return Promise.reject(d.INVALID_VALUE("LocalTrackPublishOptions.priority",o));var c=this._addTrack(n,n.id,t.priority)||this._tracks.get(n.id);return this._getOrCreateLocalTrackPublication(c)},t.prototype.publishTracks=function(e){if(!Array.isArray(e))throw d.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))},t.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},t.prototype.setNetworkQualityConfiguration=function(e){if("object"!=typeof e||null===e)throw d.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach((function(t){if(t in e&&("number"!=typeof e[t]||isNaN(e[t])))throw d.INVALID_TYPE("networkQualityConfiguration."+t,"number")})),this._signaling.setNetworkQualityConfiguration(e),this},t.prototype.setParameters=function(e){if(void 0!==e&&"object"!=typeof e)throw d.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(e){if(this._signaling.getParameters().adaptiveSimulcast&&e.maxVideoBitrate)throw d.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach((function(t){if(void 0!==e[t]&&"number"!=typeof e[t]&&null!==e[t])throw d.INVALID_TYPE("encodingParameters."+t,"number, null or undefined")}))}else null===e&&(e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(e),this},t.prototype.unpublishTrack=function(e){h(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var t=this._tracks.get(e.id);if(!t)return null;if(this._signaling.getPublication(t._trackSender).publishFailed(new Error("The "+t+" was unpublished")),!(t=this._removeTrack(t,t.id)))return null;var n=k(this.tracks,t);return n&&this._removeTrackPublication(n),n},t.prototype.unpublishTracks=function(e){var t=this;if(!Array.isArray(e))throw d.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce((function(e,n){var r=t.unpublishTrack(n);return r?e.concat(r):e}),[])},t}(n(1188));function k(e,t){return Array.from(e.values()).find((function(e){return e.track===t||e.track.mediaStreamTrack===t}))||null}e.exports=w},9985:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.attach=function(){return e.prototype.attach.apply(this,arguments)},t.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},t}(n(2315));e.exports=a},1182:(e,t,n)=>{"use strict";e.exports={LocalAudioTrack:n(8260),LocalVideoTrack:n(5563),LocalDataTrack:n(1094)}},8260:(e,t,n)=>{"use strict";var r=n(802),i=n(1408);function a(e,t){var n=new i(e,t);return Object.setPrototypeOf(n,a.prototype),n}r(a,i),e.exports=a},1094:(e,t,n)=>{"use strict";var r=n(802),i=n(8818);function a(e){var t=new i(e);return Object.setPrototypeOf(t,a.prototype),t}r(a,i),e.exports=a},5563:(e,t,n)=>{"use strict";var r=n(802),i=n(9887);function a(e,t){var n=new i(e,t);return Object.setPrototypeOf(n,a.prototype),n}r(a,i),e.exports=a},74:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2787),o=n(7026),s=o.buildLogLevels,c=o.valueToJSON,u=n(3427).DEFAULT_LOG_LEVEL,l=n(8552),d=0,p=function(e){function t(t,n,r){var i;r=Object.assign({name:t,log:null,logLevel:u},r),i=e.call(this)||this;var a=String(r.name),o=s(r.logLevel),c=r.log?r.log.createLog("media",i):new l("media",i,o,r.loggerName);return Object.defineProperties(i,{_instanceId:{value:++d},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:a}}),i}return i(t,e),t.prototype.toJSON=function(){return c(this)},t}(a);e.exports=p},1408:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(7135).isIOS,o=n(2818),s=n(7792).isIOSChrome,c=n(9985),u=function(e){function t(t,n){var r=this,i=(null==n?void 0:n.noiseCancellation)||null,o=(r=e.call(this,t,n)||this)._log,s=t.label,c=void 0===s?"":s,u=t.getSettings(),l=u.deviceId,d=void 0===l?"":l,p=u.groupId,h=void 0===p?"":p;return Object.defineProperties(r,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:h,label:c},writable:!0},_defaultDeviceCaptureMode:{value:!a()&&r._isCreatedByCreateLocalTracks&&"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.addEventListener&&"function"==typeof navigator.mediaDevices.enumerateDevices?(null==n?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){navigator.mediaDevices.enumerateDevices().then((function(e){var t=e.find((function(e){var t=e.deviceId;return"audioinput"===e.kind&&"default"!==t}));t&&["deviceId","groupId"].some((function(e){return t[e]!==r._currentDefaultDeviceInfo[e]}))&&(o.info("Default device changed, restarting the LocalAudioTrack"),o.debug('Old default device: "'+r._currentDefaultDeviceInfo.deviceId+'" => "'+r._currentDefaultDeviceInfo.label+'"'),o.debug('New default device: "'+t.deviceId+'" => "'+t.label+'"'),r._currentDefaultDeviceInfo=t,r._restartDefaultDevice().catch((function(e){return o.warn("Failed to restart: "+e.message)})))}),(function(e){o.warn("Failed to run enumerateDevices(): "+e.message)}))}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:i,writable:!1}}),o.debug("defaultDeviceCaptureMode:",r._defaultDeviceCaptureMode),r._maybeRestartOnDefaultDeviceChange(),r}return i(t,e),t.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},t.prototype.attach=function(t){return(t=e.prototype.attach.call(this,t)).muted=!0,t},t.prototype._end=function(){return e.prototype._end.apply(this,arguments)},t.prototype._maybeRestartOnDefaultDeviceChange=function(){var e=this,t=this,n=t._constraints,r=t._defaultDeviceCaptureMode,i=t._log,a=(this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack).getSettings().deviceId,o=function(e){return e!==a||"default"===e},s=function e(t){return void 0===t&&(t={}),"string"==typeof t?o(t):Array.isArray(t)?t.every(o):t.exact?e(t.exact):!t.ideal||e(t.ideal)}(n.deviceId);"auto"===r&&s?this._restartOnDefaultDeviceChangeCleanup||(i.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){i.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",e._onDeviceChange),e._restartOnDefaultDeviceChangeCleanup=null}):(i.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},t.prototype._reacquireTrack=function(t){var n=this;return this._log.debug("_reacquireTrack: ",t),this.noiseCancellation?this.noiseCancellation.reacquireTrack((function(){return e.prototype._reacquireTrack.call(n,t)})):e.prototype._reacquireTrack.call(this,t)},t.prototype._restartDefaultDevice=function(){var e=this,t=Object.assign({},this._constraints),n=Object.assign({},t,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(n).then((function(){e._constraints=t,e._maybeRestartOnDefaultDeviceChange()}))},t.prototype._setMediaStreamTrack=function(t){var n=this,r=this._log,i=this.noiseCancellation,a=e.prototype._setMediaStreamTrack.call(this,t);return s()&&i&&(r.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),a=a.then((function(){return o(n._dummyEl)})).then((function(t){return r.debug("Krisp audio is "+(t?"silent, using source audio":"not silent")),t&&i.disablePermanently().then((function(){return e.prototype._setMediaStreamTrack.call(n,i.sourceTrack)}))}))),a},t.prototype.disable=function(){return e.prototype.disable.apply(this,arguments)},t.prototype.enable=function(){return e.prototype.enable.apply(this,arguments)},t.prototype.restart=function(){return e.prototype.restart.apply(this,arguments)},t.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),e.prototype.stop.apply(this,arguments)},t}(n(3970)(c));e.exports=u},532:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(3002));e.exports=a},8818:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(74),o=n(1629),s=function(e){function t(t){var n,r=new(0,(t=Object.assign({DataTrackSender:o,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},t)).DataTrackSender)(t.maxPacketLifeTime,t.maxRetransmits,t.ordered);return n=e.call(this,r.id,"data",t)||this,Object.defineProperties(n,{_trackSender:{value:r},id:{enumerable:!0,value:r.id},maxPacketLifeTime:{enumerable:!0,value:t.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:t.maxRetransmits},ordered:{enumerable:!0,value:t.ordered},reliable:{enumerable:!0,value:null===t.maxPacketLifeTime&&null===t.maxRetransmits}}),n}return i(t,e),t.prototype.send=function(e){this._trackSender.send(e)},t}(a);e.exports=s},1674:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(3002));e.exports=a},3970:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(807).getUserMedia,o=n(7135).isIOS,s=n(7026),c=s.capitalize,u=s.defer,l=s.waitForSometime,d=s.waitForEvent,p=n(3427).typeErrors.ILLEGAL_INVOKE,h=n(2818),f=n(2347),m=n(5495),g=n(1272),_=n(5172),v=n(3881);function y(e){var t=e._log,n=e.kind,r=e._noiseCancellation,i={audio:h,video:f}[n],a=function(){return r?r.sourceTrack:e.mediaStreamTrack},o=e._dummyEl,s=a(),c=null;function p(){var n=e._workaroundWebKitBug1208516Cleanup,r=e.isStopped&&!!n,s=a().muted;return Promise.resolve().then((function(){return"visible"===document.visibilityState&&!c&&(s||r||o.play().then((function(){return i(o)})).then((function(e){return e?t.warn("Silence detected"):t.info("Non-silence detected"),e})).catch((function(e){t.warn("Failed to detect silence:",e)})).finally((function(){e.processedTrack||o.pause()})))}))}function _(){return Promise.race([d(s,"unmute"),l(50)]).then((function(){return p()})).then((function(r){return r&&!c&&(c=u(),e._restart().finally((function(){o=e._dummyEl,b(),s=a(),y(),c.resolve(),c=null})).catch((function(e){t.error("failed to restart track: ",e)}))),(c&&c.promise||Promise.resolve()).finally((function(){return g.resolveDeferred(n)}))})).catch((function(e){t.error("error in maybeRestart: "+e.message)}))}function v(){var t=e._log,n=e.kind;t.info("Muted"),t.debug("LocalMediaTrack:",e),g.startDeferred(n)}function y(){s.addEventListener("ended",_),s.addEventListener("mute",v),s.addEventListener("unmute",_)}function b(){s.removeEventListener("ended",_),s.removeEventListener("mute",v),s.removeEventListener("unmute",_)}var w=function(e){return!!e&&_()};return m.onVisibilityChange(1,w),y(),function(){m.offVisibilityChange(1,w),b()}}e.exports=function(e){return function(e){function t(t,n){var r=this,i=o()&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;n=Object.assign({getUserMedia:a,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:i,gUMSilentTrackWorkaround:_},n);var s=new v(t),c=s.kind;return r=e.call(this,s,n)||this,Object.defineProperties(r,{_constraints:{value:"object"==typeof n[c]?n[c]:{},writable:!0},_getUserMedia:{value:n.getUserMedia},_gUMSilentTrackWorkaround:{value:n.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return r.emit("muted",r)}],["unmuted",function(){return r.emit("unmuted",r)}]])},_workaroundWebKitBug1208516:{value:n.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:n.isCreatedByCreateLocalTracks},_noiseCancellation:{value:n.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return"ended"===s.readyState}}}),r._workaroundWebKitBug1208516&&(r._workaroundWebKitBug1208516Cleanup=y(r)),r._reemitTrackSenderEvents(),r}return i(t,e),t.prototype._end=function(){var t=this;this._didCallEnd||(e.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach((function(e,n){return t._trackSender.removeListener(n,e)})),this.emit("stopped",this))},t.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),e.prototype._initialize.call(this)},t.prototype._reacquireTrack=function(e){var t,n=this,r=n._getUserMedia,i=n._gUMSilentTrackWorkaround,a=n._log,o=n.mediaStreamTrack.kind;a.info("Re-acquiring the MediaStreamTrack"),a.debug("Constraints:",e);var s=Object.assign({audio:!1,video:!1},((t={})[o]=e,t));return(this._workaroundWebKitBug1208516Cleanup?i(a,r,s):r(s)).then((function(e){return e.getTracks()[0]}))},t.prototype._reemitTrackSenderEvents=function(){var e=this;this._eventsToReemitters.forEach((function(t,n){return e._trackSender.on(n,t)})),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},t.prototype._restart=function(e){var t=this,n=this._log;return e=e||this._constraints,this._stop(),this._reacquireTrack(e).catch((function(t){throw n.error("Failed to re-acquire the MediaStreamTrack:",{error:t,constraints:e}),t})).then((function(r){return n.info("Re-acquired the MediaStreamTrack"),n.debug("MediaStreamTrack:",r),t._constraints=Object.assign({},e),t._setMediaStreamTrack(r)}))},t.prototype._setMediaStreamTrack=function(e){var t=this;return e.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then((function(){t._unprocessedTrack=e})):this._trackSender.setMediaStreamTrack(e).catch((function(n){t._log.warn("setMediaStreamTrack failed:",{error:n,mediaStreamTrack:e})}))).then((function(){t._initialize(),t._getAllAttachedElements().forEach((function(e){return t._attach(e)}))}))},t.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},t.prototype.enable=function(e){return(e="boolean"!=typeof e||e)!==this.mediaStreamTrack.enabled&&(this._log.info((e?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=e,this.emit(e?"enabled":"disabled",this)),this},t.prototype.disable=function(){return this.enable(!1)},t.prototype.restart=function(e){var t=this,n=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(p("restart","can only be called on a Local"+c(n)+"Track that is created using createLocalTracks or createLocal"+c(n)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var r=this._restart(e);return this._workaroundWebKitBug1208516&&(r=r.finally((function(){t._workaroundWebKitBug1208516Cleanup=y(t)}))),r},t.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},t}(e)}},3002:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(6276),c=n(3427),u=c.typeErrors,l=c.trackPriority,d=function(e){function t(t,n,r,i){var s=e.call(this,n.name,t.sid,i)||this;return Object.defineProperties(s,{_reemitSignalingEvent:{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.emit.apply(s,o([e&&e.length?"warning":"warningsCleared"],a(e)))}},_reemitTrackEvent:{value:function(){return s.emit(s.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:t},_unpublish:{value:r},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return t.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach((function(e){return n.on(e,s._reemitTrackEvent)})),["warning","warningsCleared"].forEach((function(e){return t.on(e,s._reemitSignalingEvent)})),s}return i(t,e),t.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype.setPriority=function(e){var t=Object.values(l);if(!t.includes(e))throw u.INVALID_VALUE("priority",t);return this._signaling.setPriority(e),this},t.prototype.unpublish=function(){var e=this;return["disabled","enabled"].forEach((function(t){return e.track.removeListener(t,e._reemitTrackEvent)})),["warning","warningsCleared"].forEach((function(t){return e._signaling.removeListener(t,e._reemitSignalingEvent)})),this._unpublish(this),this},t}(s);e.exports=d},9887:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(7135).isIOS,o=n(2347),s=function(e){function t(t,n){var r=this;return n=Object.assign({workaroundSilentLocalVideo:a()&&"undefined"!=typeof document&&"function"==typeof document.createElement},n),r=e.call(this,t,n)||this,Object.defineProperties(r,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?c:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),r._workaroundSilentLocalVideo&&(r._workaroundSilentLocalVideoCleanup=r._workaroundSilentLocalVideo(r,document)),r}return i(t,e),t.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},t.prototype._checkIfCanCaptureFrames=function(){return e.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},t.prototype._end=function(){return e.prototype._end.apply(this,arguments)},t.prototype._setSenderMediaStreamTrack=function(e){var t=this,n=this.mediaStreamTrack,r=e?this.processedTrack:n;return this._trackSender.setMediaStreamTrack(r).catch((function(e){return t._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:e,mediaStreamTrack:r})})).then((function(){t._unprocessedTrack=e?n:null}))},t.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var t=e.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),t):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},t.prototype.removeProcessor=function(){var t=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=e.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then((function(){return t._updateElementsMediaStreamTrack()})),n},t.prototype.disable=function(){var t=e.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),t},t.prototype.enable=function(t){void 0===t&&(t=!0);var n=e.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=t,t&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},t.prototype.restart=function(){var t=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=e.prototype.restart.apply(this,arguments);return this.processor&&n.then((function(){t._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally((function(){t._workaroundSilentLocalVideoCleanup=t._workaroundSilentLocalVideo(t,document)})),n},t.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),e.prototype.stop.apply(this,arguments)},t}(n(3970)(n(7102)));function c(e,t){var n=e._log,r=e._dummyEl,i=e.mediaStreamTrack;function a(){e.isEnabled&&(n.info("Unmuted, checking silence"),r.play().then((function(){return o(r,t)})).then((function(t){if(t)return n.warn("Silence detected, restarting"),e._stop(),e._restart();n.info("Non-silent frames detected, so no need to restart")})).catch((function(e){n.warn("Failed to detect silence and restart:",e)})).finally((function(){!(r=e._dummyEl)||r.paused||e.processedTrack||r.pause(),i.removeEventListener("unmute",a),(i=e.mediaStreamTrack).addEventListener("unmute",a)})))}return i.addEventListener("unmute",a),function(){i.removeEventListener("unmute",a)}}e.exports=s},3866:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return i(t,e),t.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(3002));e.exports=a},2315:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(7135).isIOS,o=n(807).MediaStream,s=n(7026),c=s.waitForEvent,u=s.waitForSometime,l=n(1272),d=function(e){function t(t,n){var r=this;n=Object.assign({playPausedElementsIfNotBackgrounded:a()&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},n),r=e.call(this,t.id,t.kind,n)||this;var i=!1;return n=Object.assign({MediaStream:o},n),Object.defineProperties(r,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return i},set:function(e){i=e}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},isStarted:{enumerable:!0,get:function(){return i}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||t.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),r._initialize(),r}return i(t,e),t.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},t.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",(function t(){e._end(),e.mediaStreamTrack.removeEventListener("ended",t)})),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},t.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},t.prototype.attach=function(e){var t=this;if("string"==typeof e?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var n=this._playPausedElementsIfNotBackgrounded?function(){return function(e,t){var n=e.tagName.toLowerCase();t.warn("Unintentionally paused:",e),Promise.race([c(document,"visibilitychange"),u(1e3)]).then((function(){"visible"===document.visibilityState&&l.whenResolved("audio").then((function(){return t.info("Playing unintentionally paused <"+n+"> element"),t.debug("Element:",e),e.play()})).then((function(){t.info("Successfully played unintentionally paused <"+n+"> element"),t.debug("Element:",e)})).catch((function(r){t.warn("Error while playing unintentionally paused <"+n+"> element:",{error:r,el:e})}))}))}(e,t._log)}:null;this._elShims.set(e,function(e,t){void 0===t&&(t=null);var n=e.pause,r=e.play,i=!1;e.pause=function(){return i=!0,n.call(e)},e.play=function(){return i=!1,r.call(e)};var a=t?function(){i||t()}:null;a&&e.addEventListener("pause",a);return{pausedIntentionally:function(){return i},unShim:function(){e.pause=n,e.play=r,a&&e.removeEventListener("pause",a)}}}(e,n))}return e},t.prototype._attach=function(e,t){void 0===t&&(t=this.processedTrack||this.mediaStreamTrack);var n=e.srcObject;n instanceof this._MediaStream||(n=new this._MediaStream);var r="audio"===t.kind?"getAudioTracks":"getVideoTracks";return n[r]().forEach((function(e){n.removeTrack(e)})),n.addTrack(t),e.srcObject=n,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e},t.prototype._selectElement=function(e){var t=document.querySelector(e);if(!t)throw new Error("Selector matched no element: "+e);return t},t.prototype._updateElementsMediaStreamTrack=function(){var e=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach((function(t){return e._attach(t)}))},t.prototype._createElement=function(){return"undefined"!=typeof document?document.createElement(this.kind):null},t.prototype.detach=function(e){var t;return t="string"==typeof e?[this._selectElement(e)]:e?[e]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",t),this._detachElements(t),e?t[0]:t},t.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},t.prototype._detachElement=function(e){if(!this._attachments.has(e))return e;var t=e.srcObject;(t instanceof this._MediaStream&&t.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e))&&(this._elShims.get(e).unShim(),this._elShims.delete(e));return e},t.prototype._getAllAttachedElements=function(){var e=[];return this._attachments.forEach((function(t){e.push(t)})),e},t}(n(74));e.exports=d},469:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.applyNoiseCancellation=t.NoiseCancellationImpl=void 0;var a=n(4321),o=(n(8552),function(){function e(e,t){this._processor=e,this._sourceTrack=t,this._disabledPermanent=!1}return Object.defineProperty(e.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),e.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},e.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},e.prototype.reacquireTrack=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=this._processor.isEnabled(),this._processor.disconnect(),[4,e()];case 1:return n=i.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return r=i.sent(),t?this._processor.enable():this._processor.disable(),[2,r]}}))}))},e.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},e.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},e}());t.NoiseCancellationImpl=o,t.applyNoiseCancellation=function(e,t,n){return r(this,void 0,void 0,(function(){var r,s,c,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.createNoiseCancellationAudioProcessor(t,n)];case 1:return r=i.sent(),s=r.connect(e),c=new o(r,e),[2,{cleanTrack:s,noiseCancellation:c}];case 2:return u=i.sent(),n.warn("Failed to create noise cancellation. Returning normal audio track: "+u),[2,{cleanTrack:e}];case 3:return[2]}}))}))}},505:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t}(n(84));e.exports=a},9227:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(9985),o=function(e){function t(t,n,r,i,a,o,s){return e.call(this,t,n,r,i,a,o,s)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype._start=function(){e.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},t.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},t}(n(1025)(a));e.exports=o},1126:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(8157));e.exports=a},9743:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(74),c=n(3427),u=c.typeErrors,l=c.trackPriority,d=function(e){function t(t,n,r){var i=e.call(this,n.id,"data",r)||this;return Object.defineProperties(i,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===n.maxPacketLifeTime&&null===n.maxRetransmits},sid:{enumerable:!0,value:t}}),n.on("message",(function(e){i.emit("message",e,i)})),i}return i(t,e),t.prototype.setPriority=function(e){var t=o([null],a(Object.values(l)));if(!t.includes(e))throw u.INVALID_VALUE("priority",t);return this._priority=e,this},t.prototype._setEnabled=function(){},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t}(s);e.exports=d},5517:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(8157));e.exports=a},1025:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(3427),c=s.typeErrors,u=s.trackPriority,l=n(7135).isIOS,d=n(5495);e.exports=function(e){return function(e){function t(t,n,r,i,a,o,s){var c=this;return s=Object.assign({workaroundWebKitBug212780:l()&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},s),c=e.call(this,n,s)||this,Object.defineProperties(c,{_isEnabled:{value:r,writable:!0},_isSwitchedOff:{value:i,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:a},_setRenderHint:{value:function(e){c._log.debug("updating render hint:",e),o(e)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:t},_workaroundWebKitBug212780:{value:s.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),c}return i(t,e),t.prototype.setPriority=function(e){var t=o([null],a(Object.values(u)));if(!t.includes(e))throw c.INVALID_VALUE("priority",t);return this._priority!==e&&(this._priority=e,this._setPriority(e)),this},t.prototype._setEnabled=function(e){this._isEnabled!==e&&(this._isEnabled=e,this.emit(this._isEnabled?"enabled":"disabled",this))},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function(e){var t=e._log,n=e.kind;function r(r){r&&e._attachments.forEach((function(r){var i=e._elShims.get(r);r.paused&&i&&!i.pausedIntentionally()&&(t.info("Playing inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e),r.play().then((function(){t.info("Successfully played inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e)})).catch((function(i){t.warn("Error while playing inadvertently paused <"+n+"> element:",{err:i,el:r,remoteMediaTrack:e})})))}))}return d.onVisibilityChange(2,r),function(){d.offVisibilityChange(2,r)}}(this)),n},t.prototype.detach=function(t){var n=e.prototype.detach.call(this,t);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),n},t}(e)}},8157:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t.name,t.sid,n)||this;Object.defineProperties(r,{_signaling:{value:t},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return t.isEnabled}},kind:{enumerable:!0,value:t.kind},publishPriority:{enumerable:!0,get:function(){return t.priority}},track:{enumerable:!0,get:function(){return this._track}}});var i=t.error,a=t.isEnabled,o=t.isSwitchedOff,s=t.priority;return t.on("updated",(function(){if(i!==t.error)return i=t.error,void r.emit("subscriptionFailed",t.error);a!==t.isEnabled&&(a=t.isEnabled,r.track&&r.track._setEnabled(t.isEnabled),r.emit(t.isEnabled?"trackEnabled":"trackDisabled")),o!==t.isSwitchedOff&&(r._log.debug(r.trackSid+": "+(o?"OFF":"ON")+" => "+(t.isSwitchedOff?"OFF":"ON")),o=t.isSwitchedOff,r.track?(r.track._setSwitchedOff(t.isSwitchedOff),r.emit(o?"trackSwitchedOff":"trackSwitchedOn",r.track)):o&&r._log.warn("Track was not subscribed when switched Off.")),s!==t.priority&&(s=t.priority,r.emit("publishPriorityChanged",s))})),r}return i(t,e),t.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype._subscribed=function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))},t.prototype._unsubscribe=function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}},t}(n(6276));e.exports=a},1364:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=n(1025),s=n(7102),c=n(5495),u=n(6151).NullObserver,l=n(8993),d=o(s),p=function(e){function t(t,n,r,i,a,o,s){var c=this;return s=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},s),s=Object.assign({IntersectionObserver:"undefined"==typeof IntersectionObserver||"auto"!==s.clientTrackSwitchOffControl?u:IntersectionObserver,ResizeObserver:"undefined"==typeof ResizeObserver||"auto"!==s.contentPreferencesMode?u:ResizeObserver},s),c=e.call(this,t,n,r,i,a,o,s)||this,Object.defineProperties(c,{_enableDocumentVisibilityTurnOff:{value:!0===s.enableDocumentVisibilityTurnOff&&"auto"===s.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:s.clientTrackSwitchOffControl},_contentPreferencesMode:{value:s.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new l((function(){c._setRenderHint({enabled:!1})}),50,!1)},_resizeObserver:{value:new s.ResizeObserver((function(e){e.find((function(e){return!c._invisibleElements.has(e.target)}))&&f(c)}))},_intersectionObserver:{value:new s.IntersectionObserver((function(e){var t=!1;e.forEach((function(e){!c._invisibleElements.has(e.target)!==e.isIntersecting&&(e.isIntersecting?(c._log.debug("intersectionObserver detected: Off => On"),c._invisibleElements.delete(e.target)):(c._log.debug("intersectionObserver detected: On => Off"),c._invisibleElements.add(e.target)),t=!0)})),t&&(h(c),f(c))}),{threshold:.25})}}),c}return i(t,e),t.prototype._start=function(t){var n=e.prototype._start.call(this,t);return h(this),n},t.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},t.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},t.prototype.setContentPreferences=function(e){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return e.renderDimensions&&this._setRenderHint({renderDimensions:e.renderDimensions}),this},t.prototype._unObservePip=function(e){var t=this._elToPipCallbacks.get(e);t&&(e.removeEventListener("enterpictureinpicture",t.onEnterPip),e.removeEventListener("leavepictureinpicture",t.onLeavePip),this._elToPipCallbacks.delete(e))},t.prototype._observePip=function(e){var t=this;if(!this._elToPipCallbacks.get(e)){var n=function(n){return t._onEnterPip(n,e)},r=function(n){return t._onLeavePip(n,e)};e.addEventListener("enterpictureinpicture",n),e.addEventListener("leavepictureinpicture",r),this._elToPipCallbacks.set(e,{onEnterPip:n,onLeavePip:r,onResizePip:function(n){return t._onResizePip(n,e)}})}},t.prototype._onEnterPip=function(e,t){this._log.debug("onEnterPip");var n=e.pictureInPictureWindow;this._elToPipWindows.set(t,n);var r=this._elToPipCallbacks.get(t).onResizePip;n.addEventListener("resize",r),h(this)},t.prototype._onLeavePip=function(e,t){this._log.debug("onLeavePip"),this._elToPipWindows.delete(t);var n=this._elToPipCallbacks.get(t).onResizePip;e.pictureInPictureWindow.removeEventListener("resize",n),h(this)},t.prototype._onResizePip=function(){f(this)},t.prototype.attach=function(t){var n=e.prototype.attach.call(this,t);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function(e){function t(){h(e)}return c.onVisibilityChange(1,t),function(){c.offVisibilityChange(1,t)}}(this)),this._observePip(n),n},t.prototype.detach=function(t){var n=this,r=e.prototype.detach.call(this,t);return(Array.isArray(r)?r:[r]).forEach((function(e){n._intersectionObserver.unobserve(e),n._resizeObserver.unobserve(e),n._invisibleElements.delete(e),n._unObservePip(e)})),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),h(this),f(this),r},t.prototype.addProcessor=function(){return e.prototype.addProcessor.apply(this,arguments)},t.prototype.removeProcessor=function(){return e.prototype.removeProcessor.apply(this,arguments)},t.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(t){return e.prototype.setPriority.call(this,t)},t}(d);function h(e){if("auto"===e._clientTrackSwitchOffControl){var t=e._getAllAttachedElements().filter((function(t){return!e._invisibleElements.has(t)}));!0===(e._getAllAttachedElements().filter((function(t){return e._elToPipWindows.has(t)})).length>0||"visible"===document.visibilityState&&t.length>0)?(e._turnOffTimer.clear(),e._setRenderHint({enabled:!0})):e._turnOffTimer.isSet||e._turnOffTimer.start()}}function f(e){if("auto"===e._contentPreferencesMode){var t=e._getAllAttachedElements().filter((function(t){return!e._invisibleElements.has(t)})),n=e._getAllAttachedElements().map((function(t){var n=e._elToPipWindows.get(t);return n?{clientHeight:n.height,clientWidth:n.width}:{clientHeight:0,clientWidth:0}})),r=t.concat(n);if(r.length>0){var i=a(r.sort((function(e,t){return t.clientHeight+t.clientWidth-e.clientHeight-e.clientWidth-1})),1)[0],o={height:i.clientHeight,width:i.clientWidth};e._setRenderHint({renderDimensions:o})}}}e.exports=p},1848:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(n(8157));e.exports=a},3881:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=function(e){function t(t){var n=e.call(this,t.id,t)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return i(t,e),t.prototype._reemitMediaStreamTrackEvents=function(e){void 0===e&&(e=this._track);var t=this._eventsToReemitters,n=this._track;(t.forEach((function(t,n){return e.addEventListener(n,t)})),n!==e)&&(t.forEach((function(e,t){return n.removeEventListener(t,e)})),n.muted!==e.muted&&t.get(e.muted?"mute":"unmute")())},t.prototype.clone=function(){var e=new t(this.track.clone());return this._clones.add(e),e},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.setMediaStreamTrack=function(e){var t=this,n=Array.from(this._clones),r=Array.from(this._senders);return Promise.all(n.map((function(t){return t.setMediaStreamTrack(e.clone())})).concat(r.map((function(n){return t._replaceTrack(n,e)})))).finally((function(){t._reemitMediaStreamTrackEvents(e),t._track=e}))},t.prototype.addSender=function(e,t){return this._senders.add(e),t&&this._senderToPublisherHintCallbacks.set(e,t),this},t.prototype.removeSender=function(e){return this._senders.delete(e),this._senderToPublisherHintCallbacks.delete(e),this},t.prototype.setPublisherHint=function(e){var t=a(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return t?t(e):Promise.resolve("COULD_NOT_APPLY_HINT")},t.prototype._replaceTrack=function(e,t){var n=this;return e.replaceTrack(t).then((function(e){return n.setPublisherHint(null).catch((function(){})),n.emit("replaced"),e}))},t}(n(84));e.exports=o},6276:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2787),o=n(7026),s=o.buildLogLevels,c=o.valueToJSON,u=n(3427).DEFAULT_LOG_LEVEL,l=n(8552),d=0,p=function(e){function t(t,n,r){var i=e.call(this)||this;r=Object.assign({logLevel:u},r);var a=s(r.logLevel);return Object.defineProperties(i,{_instanceId:{value:d++},_log:{value:r.log?r.log.createLog("default",i):new l("default",i,a,r.loggerName)},trackName:{enumerable:!0,value:t},trackSid:{enumerable:!0,value:n}}),i}return i(t,e),t.prototype.toJSON=function(){return c(this)},t.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(a);e.exports=p},84:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,n.kind)||this;return Object.defineProperties(r,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),r}return i(t,e),t.prototype.stop=function(){this.track.stop(),e.prototype.stop.call(this)},t}(n(8027));e.exports=a},6287:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(29).EventEmitter,o=n(3427).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,s=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:t},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",(function(e){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=e,n._stats=[],n._reemitEvent("add",n._getEventData())})),n.on("remove",(function(){var e=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",e)})),n.on("start",(function(){n._reemitEvent("start",n._getEventData())})),n.on("stop",(function(e){n._reemitEvent("stop",Object.assign({message:e},n._getEventData()))})),n.on("stats",(function(){return n._maybeEmitStats()})),n}return i(t,e),t.prototype._getEventData=function(){if(!this._processorInfo)return{};var e=this._processorInfo,t=e.processor,n={captureHeight:e.captureHeight,captureWidth:e.captureWidth,inputFrameRate:e.inputFrameRate,isRemoteVideoTrack:e.isRemoteVideoTrack,inputFrameBufferType:e.inputFrameBufferType,outputFrameBufferContextType:e.outputFrameBufferContextType};return n.name=t._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach((function(e){var r=t["_"+e];void 0!==r&&(n[e]=r)})),Object.keys(n).forEach((function(e){var t=n[e];"boolean"==typeof t&&(n[e]=t?"true":"false")})),n},t.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var e=this._processorInfo.processor._benchmark;if(e){var t=Date.now();if(!(t-this._lastStatsSaveTime<1e3)){var n={outputFrameRate:e.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach((function(t){n[t]=e.getAverageDelay(t)})),this._lastStatsSaveTime=t,this._stats.push(n),!(t-this._lastStatsPublishTime<o)){this._lastStatsPublishTime=t;var r=this._stats.splice(0).reduce((function(e,t,r){return Object.keys(n).forEach((function(n){e[n]||(e[n]=0),e[n]=(e[n]*r+t[n])/(r+1)})),e}),{});Object.keys(r).forEach((function(e){r[e]=parseFloat(r[e].toFixed(2))})),this._reemitEvent("stats",Object.assign({},r,this._getEventData()))}}}}},t.prototype._reemitEvent=function(e,t){this._log.debug("VideoProcessor:"+e,t),this.emit("event",{name:e,data:t})},t}(a);e.exports=s},7102:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2315),o=n(6287),s=n(3427).DEFAULT_FRAME_RATE,c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),r._processorEventObserver=new(n.VideoProcessorEventObserver||o)(r._log),r}return i(t,e),t.prototype._checkIfCanCaptureFrames=function(e){void 0===e&&(e=!1);var t=!0,n="",r=this.mediaStreamTrack;return r.enabled||(t=!1,n="MediaStreamTrack is disabled"),"ended"===r.readyState&&(t=!1,n="MediaStreamTrack is ended"),this.processor||(t=!1,n="VideoProcessor not detected."),this._attachments.size||e||(t=!1,n="VideoTrack is not publishing and there is no attached element."),n&&this._log.debug(n),{canCaptureFrames:t,message:n}},t.prototype._captureFrames=function(){var e=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var t,n=Date.now();this._dummyEl.play().then((function(){var r=function(n){clearTimeout(e._captureTimeoutId);var r=e.mediaStreamTrack.getSettings().frameRate,i=void 0===r?s:r,a=Math.floor(1e3/i)-t;(a<0||"number"!=typeof t)&&(a=0),e._captureTimeoutId=setTimeout(n,a)},i=function(){var a=e._checkIfCanCaptureFrames();if(!a.canCaptureFrames)return e._isCapturing=!1,e._processorEventObserver.emit("stop",a.message),void e._log.debug("Cannot capture frames. Stopping capturing frames.");n=Date.now();var o=e.mediaStreamTrack.getSettings(),s=o.width,c=void 0===s?0:s,u=o.height,l=void 0===u?0:u;e._outputFrame&&e._outputFrame.width!==c&&(e._outputFrame.width=c,e._outputFrame.height=l),e._inputFrame&&(e._inputFrame.width!==c&&(e._inputFrame.width=c,e._inputFrame.height=l),e._inputFrame.getContext("2d").drawImage(e._dummyEl,0,0,c,l));var d=null;try{var p="video"===e._processorOptions.inputFrameBufferType?e._dummyEl:e._inputFrame;d=e.processor.processFrame(p,e._outputFrame)}catch(t){e._log.debug("Exception detected after calling processFrame.",t)}(d instanceof Promise?d:Promise.resolve(d)).then((function(){e._outputFrame&&("function"==typeof e.processedTrack.requestFrame&&e.processedTrack.requestFrame(),e._processorEventObserver.emit("stats"))})).finally((function(){t=Date.now()-n,r(i)}))};r(i)})).catch((function(t){return e._log.error("Video element cannot be played",{error:t,track:e})}))}},t.prototype._initialize=function(){var n=this;e.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){u(n,n._dummyEl)&&(n.dimensions.width=n._dummyEl.videoWidth,n.dimensions.height=n._dummyEl.videoHeight)},this._dummyEl.onresize=function(){u(n,n._dummyEl)&&(n.dimensions.width=n._dummyEl.videoWidth,n.dimensions.height=n._dummyEl.videoHeight,n.isStarted&&(n._log.debug("Dimensions changed:",n.dimensions),n.emit(t.DIMENSIONS_CHANGED,n)))})},t.prototype._restartProcessor=function(){var e=this.processor;if(e){var t=Object.assign({},this._processorOptions);this.removeProcessor(e),this.addProcessor(e,t)}},t.prototype._start=function(n){return this.dimensions.width=n.videoWidth,this.dimensions.height=n.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(t.DIMENSIONS_CHANGED,this),e.prototype._start.call(this,n)},t.prototype.addProcessor=function(e,t){var n=this;if(!e||"function"!=typeof e.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",e),this._unmuteHandler||(this._unmuteHandler=function(){n._log.debug("mediaStreamTrack unmuted"),n.processedTrack.muted&&(n._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),n._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler)),this._processorOptions=t||{};var r=this._processorOptions,i=r.inputFrameBufferType,a=r.outputFrameBufferContextType;if("undefined"==typeof OffscreenCanvas&&"offscreencanvas"===i)throw new Error("OffscreenCanvas is not supported by this browser.");if(i&&"video"!==i&&"canvas"!==i&&"offscreencanvas"!==i)throw new Error("Invalid inputFrameBufferType of "+i);i||(i="undefined"==typeof OffscreenCanvas?"canvas":"offscreencanvas");var o=this.mediaStreamTrack.getSettings(),c=o.width,u=void 0===c?0:c,l=o.height,d=void 0===l?0:l,p=o.frameRate,h=void 0===p?s:p;if("offscreencanvas"===i&&(this._inputFrame=new OffscreenCanvas(u,d)),"canvas"===i&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=d),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=d,a=a||"2d",!this._outputFrame.getContext(a))throw new Error("Cannot get outputFrameBufferContextType: "+a+".");var f="undefined"!=typeof CanvasCaptureMediaStreamTrack&&CanvasCaptureMediaStreamTrack.prototype&&"function"==typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame?0:void 0;return this.processedTrack=this._outputFrame.captureStream(f).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=e,this._processorEventObserver.emit("add",{processor:e,captureHeight:d,captureWidth:u,inputFrameRate:h,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:i,outputFrameBufferContextType:a}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},t.prototype.attach=function(){var t=e.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),t},t.prototype.detach=function(){return e.prototype.detach.apply(this,arguments)},t.prototype.removeProcessor=function(e){if(!e)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(e!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",e),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},t}(a);function u(e,t){return e.dimensions.width!==t.videoWidth||e.dimensions.height!==t.videoHeight}c.DIMENSIONS_CHANGED="dimensionsChanged",e.exports=c},118:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=n(29).EventEmitter,s=n(3427),c=s.DEFAULT_NQ_LEVEL_LOCAL,u=s.DEFAULT_NQ_LEVEL_REMOTE,l=s.MAX_NQ_LEVEL,d=n(7026).inRange,p=function(e){function t(t){var n=e.call(this)||this;return t=Object.assign({local:c,remote:u},t),Object.defineProperties(n,{local:{value:d(t.local,c,l)?t.local:c,writable:!0},remote:{value:d(t.remote,u,l)?t.remote:u,writable:!0}}),n}return i(t,e),t.prototype.update=function(e){var t=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",c,3],["remote",u,3]].forEach((function(n){var r=a(n,3),i=r[0],o=r[1],s=r[2];t[i]="number"==typeof e[i]&&d(e[i],o,s)?e[i]:o}))},t}(o);e.exports=p},4321:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createNoiseCancellationAudioProcessor=void 0;var a=n(8206),o=(n(8552),{krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}}),s=new Map;t.createNoiseCancellationAudioProcessor=function(e,t){return r(this,void 0,void 0,(function(){var n,r,c,u,l,d,p,h,f;return i(this,(function(i){switch(i.label){case 0:if(n=s.get(e.vendor))return[3,6];if(!(r=o[e.vendor]))throw new Error("Unsupported NoiseCancellationOptions.vendor: "+e.vendor);c=r.supportedVersion,u=r.pluginFile,l=e.sdkAssetsPath,d=l+"/"+u,i.label=1;case 1:return i.trys.push([1,5,,6]),t.debug("loading noise cancellation sdk: ",d),[4,a(d)];case 2:return p=i.sent(),t.debug("Loaded noise cancellation sdk:",p),h=p.default,function(e){var t=e.supportedVersion,n=e.plugin,r=e.log;if(!n.getVersion||!n.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=n.getVersion();r.debug("Plugin Version = "+i);var a=t.split(".").map((function(e){return Number(e)})),o=i.split(".").map((function(e){return Number(e)}));if(3!==a.length||3!==o.length)throw new Error("Unsupported Plugin version format: "+t+", "+i);if(a[0]!==o[0])throw new Error("Major version mismatch: [Plugin version "+i+"],  [Supported Version "+t+"]");if(o[1]<a[1])throw new Error("Minor version mismatch: [Plugin version "+i+"] < [Supported Version "+t+"]");var s=new AudioContext,c=n.isSupported(s);if(s.close(),!c)throw new Error("Noise Cancellation plugin is not supported on your browser")}({supportedVersion:c,plugin:h,log:t}),h.isInitialized()?[3,4]:(t.debug("initializing noise cancellation sdk: ",l),[4,h.init({rootDir:l})]);case 3:i.sent(),t.debug("noise cancellation sdk initialized!"),i.label=4;case 4:return n={vendor:e.vendor,isInitialized:function(){return h.isInitialized()},isConnected:function(){return h.isConnected()},isEnabled:function(){return h.isEnabled()},disconnect:function(){return h.disconnect()},enable:function(){return h.enable()},disable:function(){return h.disable()},destroy:function(){return h.destroy()},setLogging:function(e){return h.setLogging(e)},connect:function(e){t.debug("connect: ",e.id),h.isConnected()&&h.disconnect();var n=h.connect(new MediaStream([e]));if(!n)throw new Error("Error connecting with noise cancellation sdk");var r=n.getAudioTracks()[0];if(!r)throw new Error("Error getting clean track from noise cancellation sdk");return h.enable(),r}},s.set(e.vendor,n),[3,6];case 5:throw f=i.sent(),t.error("Error loading noise cancellation sdk:"+d,f),f;case 6:return[2,n]}}))}))}},1188:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(2787),c=n(9227),u=n(1126),l=n(9743),d=n(5517),p=n(1364),h=n(1848),f=n(7026),m=0,g=function(e){function t(t,n){var r=e.call(this)||this,i=function(e){var t=e.map((function(e){return[e.id,e]})),n=t.filter((function(e){return"audio"===e[1].kind})),r=t.filter((function(e){return"video"===e[1].kind})),i=t.filter((function(e){return"data"===e[1].kind}));return{audioTracks:n,dataTracks:i,tracks:t,videoTracks:r}}((n=Object.assign({RemoteAudioTrack:c,RemoteAudioTrackPublication:u,RemoteDataTrack:l,RemoteDataTrackPublication:d,RemoteVideoTrack:p,RemoteVideoTrackPublication:h,tracks:[]},n)).tracks),a=n.log.createLog("default",r),o=new Map(i.audioTracks),s=new Map(i.dataTracks),f=new Map(i.tracks),g=new Map(i.videoTracks);return Object.defineProperties(r,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:o},_dataTracks:{value:s},_instanceId:{value:++m},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:a},_signaling:{value:t},_tracks:{value:f},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:g},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return t.identity}},networkQualityLevel:{enumerable:!0,get:function(){return t.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return t.networkQualityStats}},sid:{enumerable:!0,get:function(){return t.sid}},state:{enumerable:!0,get:function(){return t.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),r._tracks.forEach(_.bind(null,r)),t.on("networkQualityLevelChanged",(function(){return r.emit("networkQualityLevelChanged",r.networkQualityLevel,r.networkQualityStats&&(r.networkQualityStats.audio||r.networkQualityStats.video)?r.networkQualityStats:null)})),function(e,t){var n=e._log;if("disconnected"===e.state)return;t.on("stateChanged",(function r(i){n.debug("Transitioned to state:",i),e.emit(i,e),"disconnected"===i&&(n.debug("Removing Track event reemitters"),t.removeListener("stateChanged",r),e._tracks.forEach((function(t){var n=e._trackEventReemitters.get(t.id);t&&n&&n.forEach((function(e,n){t.removeListener(n,e)}))})),t.tracks.forEach((function(t){var n=e._tracks.get(t.id),r=e._trackEventReemitters.get(t.id);n&&r&&r.forEach((function(e,t){n.removeListener(t,e)}))})),e._trackEventReemitters.clear(),e.tracks.forEach((function(t){e._trackPublicationEventReemitters.get(t.trackSid).forEach((function(e,n){t.removeListener(n,e)}))})),e._trackPublicationEventReemitters.clear())}))}(r,t),a.info("Created a new Participant"+(r.identity?": "+r.identity:"")),r}return i(t,e),t.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},t.prototype._getTrackPublicationEvents=function(){return[]},t.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},t.prototype._addTrack=function(e,t){var n=this._log;return this._tracks.has(t)?null:(this._tracks.set(t,e),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].set(t,e),_(this,e,t),n.info("Added a new "+f.trackClass(e)+":",t),n.debug(f.trackClass(e)+":",e),e)},t.prototype._addTrackPublication=function(e){var t=this._log;return this.tracks.has(e.trackSid)?null:(this.tracks.set(e.trackSid,e),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].set(e.trackSid,e),function(e,t){var n=new Map;if("disconnected"===e.state)return;e._getTrackPublicationEvents().forEach((function(r){var i=a(r,2),s=i[0],c=i[1];n.set(s,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.emit.apply(e,o(o([c],a(n)),[t]))})),t.on(s,n.get(s))})),e._trackPublicationEventReemitters.set(t.trackSid,n)}(this,e),t.info("Added a new "+f.trackPublicationClass(e)+":",e.trackSid),t.debug(f.trackPublicationClass(e)+":",e),e)},t.prototype._handleTrackSignalingEvents=function(){var e=this,t=e._log,n=e._clientTrackSwitchOffControl,r=e._contentPreferencesMode,i=this;if("disconnected"!==this.state){var o=this._RemoteAudioTrack,s=this._RemoteAudioTrackPublication,c=this._RemoteVideoTrack,u=this._RemoteVideoTrackPublication,l=this._RemoteDataTrack,d=this._RemoteDataTrackPublication,p=this._signaling;p.on("trackAdded",h),p.on("trackRemoved",f),p.tracks.forEach(h),p.on("stateChanged",(function e(n){"disconnected"===n?(t.debug("Removing event listeners"),p.removeListener("stateChanged",e),p.removeListener("trackAdded",h),p.removeListener("trackRemoved",f)):"connected"===n&&(t.info("reconnected"),setTimeout((function(){return i.emit("reconnected")}),0))}))}function h(e){var n=new(0,{audio:s,data:d,video:u}[e.kind])(e,{log:t});i._addTrackPublication(n);var r=e.isSubscribed;r&&m(e),i._trackSignalingUpdatedEventCallbacks.set(e.sid,(function(){if(r!==e.isSubscribed){if(r=e.isSubscribed)return void m(e);!function(e){var t=a(Array.from(i._tracks.entries()).find((function(t){return a(t,2)[1].sid===e.sid})),2),n=t[0],r=t[1],o=i.tracks.get(e.sid);r&&i._removeTrack(r,o,n)}(e)}})),e.on("updated",i._trackSignalingUpdatedEventCallbacks.get(e.sid))}function f(e){e.isSubscribed&&e.setTrackTransceiver(null);var t=i._trackSignalingUpdatedEventCallbacks.get(e.sid);t&&(e.removeListener("updated",t),i._trackSignalingUpdatedEventCallbacks.delete(e.sid));var n=i.tracks.get(e.sid);n&&i._removeTrackPublication(n)}function m(e){var a=e.isEnabled,s=e.name,u=e.kind,d=e.sid,h=e.trackTransceiver,f=e.isSwitchedOff,m={audio:o,video:c,data:l}[u],g=i.tracks.get(d);if(m&&u===h.kind){var _={log:t,name:s,clientTrackSwitchOffControl:n,contentPreferencesMode:r},v="data"===u?new m(d,h,_):new m(d,h,a,f,(function(e){return p.updateSubscriberTrackPriority(d,e)}),(function(t){e.isSubscribed&&p.updateTrackRenderHint(d,t)}),_);i._addTrack(v,g,h.id)}}},t.prototype._removeTrack=function(e,t){if(!this._tracks.has(t))return null;this._tracks.delete(t),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].delete(t),(this._trackEventReemitters.get(t)||new Map).forEach((function(t,n){e.removeListener(n,t)}));var n=this._log;return n.info("Removed a "+f.trackClass(e)+":",t),n.debug(f.trackClass(e)+":",e),e},t.prototype._removeTrackPublication=function(e){if(!(e=this.tracks.get(e.trackSid)))return null;this.tracks.delete(e.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].delete(e.trackSid),(this._trackPublicationEventReemitters.get(e.trackSid)||new Map).forEach((function(t,n){e.removeListener(n,t)}));var t=this._log;return t.info("Removed a "+f.trackPublicationClass(e)+":",e.trackSid),t.debug(f.trackPublicationClass(e)+":",e),e},t.prototype.toJSON=function(){return f.valueToJSON(this)},t}(s);function _(e,t,n){var r=new Map;"disconnected"!==e.state&&(e._getTrackEvents().forEach((function(n){var i=n[0],s=n[1];r.set(i,(function(){var t=[s].concat([].slice.call(arguments));return e.emit.apply(e,o([],a(t)))})),t.on(i,r.get(i))})),e._trackEventReemitters.set(n,r))}e.exports=g},4639:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function a(e,t,n,r){var i=[];return e.forEach((function(e){0!==r.length&&!r.includes(e.type)||0!==n.length&&!n.includes(e.kind)||"number"!=typeof e[t]||i.push(e[t])})),i}function o(e){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce((function(t,n){var r=[n.key];n.altKeys&&(r=r.concat(n.altKeys));var i=r.find((function(t){return t in e}));return i&&typeof e[i]===n.type&&(t[n.key]=e[i]),t}),{})}Object.defineProperty(t,"__esModule",{value:!0}),t.getCombinedConnectionStats=void 0,t.getCombinedConnectionStats=function(e){var t=e.publisher,s=e.subscriber;return n(this,void 0,void 0,(function(){var e,n,c,u,l,d,p,h,f,m,g,_,v,y,b;return r(this,(function(r){switch(r.label){case 0:return[4,Promise.all([t,s].map((function(e){return e.getStats()})))];case 1:return e=i.apply(void 0,[r.sent(),2]),n=e[0],c=e[1],u=a(c,"timestamp",["audio"],["inbound-rtp"]),l=u.length>0?u[0]:0,d=a(c,"jitter",["audio"],["inbound-rtp"]).reduce((function(e,t){return Math.max(e,t)}),0),p=a(c,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce((function(e,t){return e+t}),0),h=a(c,"packetsLost",["audio","video"],["inbound-rtp"]).reduce((function(e,t){return e+t}),0),f=a(n,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce((function(e,t){return Math.max(e,t)}),0),m=a(c,"currentRoundTripTime",[],["candidate-pair"]).reduce((function(e,t){return Math.max(e,t)}),0),g=1e3*(m||f),_=a(n,"bytesSent",[],["candidate-pair"]).reduce((function(e,t){return e+t}),0),v=a(c,"bytesReceived",[],["candidate-pair"]).reduce((function(e,t){return e+t}),0),y=function(e){var t=null,n=[];e.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId?t=e.selectedCandidatePairId:"candidate-pair"===e.type&&n.push(e)}));var r=n.find((function(e){return e.selected||t&&e.id===t}));if(!r)return null;var i=r,a=e.get(i.localCandidateId),s=e.get(i.remoteCandidateId);if(!a||!s)return null;return{localCandidate:o(a),remoteCandidate:o(s)}}(c),b=[],c.forEach((function(e){"local-candidate"!==e.type&&"remote-candidate"!==e.type||b.push(o(e))})),[2,{timestamp:l,jitter:d,packets:p,packetsLost:h,roundTripTime:g,bytesSent:_,bytesReceived:v,selectedIceCandidatePairStats:y,iceCandidateStats:b}]}}))}))}},2194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTurnCredentials=void 0;var r=n(6249),i=n(3427).ICE_VERSION,a=n(5760),o=a.createTwilioError,s=a.SignalingConnectionError,c=n(29);t.getTurnCredentials=function(e,t){return new Promise((function(n,a){var u=new c.EventEmitter,l=new r(t,{networkMonitor:null,eventObserver:u,helloBody:{edge:"roaming",preflight:!0,token:e,type:"ice",version:i}}),d=!1;l.once("close",(function(){d||(d=!0,a(new s))})),l.on("message",(function(e){var t=e.code,r=e.message,i=e.ice_servers,s=e.type;"iced"!==s&&"error"!==s||d||(d=!0,"iced"===s?n(i):a(o(t,r)),l.close())}))}))}},3445:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.makeStat=void 0,t.makeStat=function(e){return e&&e.length?{min:Math.min.apply(Math,r([],n(e))),max:Math.max.apply(Math,r([],n(e))),average:e.reduce((function(e,t){return e+t}),0)/e.length}:null}},7660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mosToScore=t.calculateMOS=void 0;var n=94.768;t.calculateMOS=function(e,t,r){var i=e+2*t+10,a=0;switch(!0){case i<160:a=n-i/40;break;case i<1e3:a=n-(i-120)/10}if(!0==r<=a/2.5)a=Math.max(a-2.5*r,6.52);else a=0;return 1+.035*a+7e-6*a*(a-60)*(100-a)},t.mosToScore=function(e){return e?e>4.2?5:e>4?4:e>3.6?3:e>3?2:1:0}},8354:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.runPreflight=t.PreflightTest=void 0;var c=n(3427),u=n(1264),l=n(7660),d=n(4639),p=n(2194),h=n(3445),f=n(4666),m=n(7555),g=n(7026),_=n(3427).WS_SERVER,v=n(8552),y=n(2787),b=n(8745),w=n(4968),k=n(2042),x=n(1886),S=x.createSID,T=x.sessionSID,C=n(5760),E=C.SignalingConnectionTimeoutError,I=C.MediaConnectionError,N="mediaAcquired",A="connected",O="mediaSubscribed",R="mediaStarted",P="dtlsConnected",D="peerConnectionConnected",L="iceConnected";function M(e){return null!=e}var F=0,z=function(e){function t(t,n){var r=e.call(this)||this;r._testTiming=new u.Timer,r._dtlsTiming=new u.Timer,r._iceTiming=new u.Timer,r._peerConnectionTiming=new u.Timer,r._mediaTiming=new u.Timer,r._connectTiming=new u.Timer,r._sentBytesMovingAverage=new b,r._packetLossMovingAverage=new b,r._progressEvents=[],r._receivedBytesMovingAverage=new b;var i=n,a=i.environment,o=void 0===a?"prod":a,s=i.region,l=void 0===s?"gll":s,d=i.duration,p=void 0===d?1e4:d,h=i.wsServer||_(o,l);return r._log=new v("default",r,c.DEFAULT_LOG_LEVEL,c.DEFAULT_LOGGER_NAME),r._testDuration=p,r._instanceId=F++,r._testTiming.start(),r._runPreflightTest(t,o,h),r}return i(t,e),t.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},t.prototype.stop=function(){this._stopped=!0},t.prototype._generatePreflightReport=function(e){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:h.makeStat(null==e?void 0:e.jitter),rtt:h.makeStat(null==e?void 0:e.rtt),packetLoss:h.makeStat(null==e?void 0:e.packetLoss)},selectedIceCandidatePairStats:e?e.selectedIceCandidatePairStats:null,iceCandidateStats:e?e.iceCandidateStats:[],progressEvents:this._progressEvents,mos:h.makeStat(null==e?void 0:e.mos)}},t.prototype._executePreflightStep=function(e,t,n){return o(this,void 0,void 0,(function(){var r,i,a,o;return s(this,(function(s){switch(s.label){case 0:if(this._log.debug("Executing step: ",e),r=this._testDuration+1e4,this._stopped)throw new Error("stopped");i=Promise.resolve().then(t),a=null,o=new Promise((function(t,i){a=setTimeout((function(){i(n||new Error(e+" timeout."))}),r)})),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.race([o,i])];case 2:return[2,s.sent()];case 3:return null!==a&&clearTimeout(a),[7];case 4:return[2]}}))}))},t.prototype._collectNetworkTimings=function(e){var t=this;return new Promise((function(n){var r;e.addEventListener("iceconnectionstatechange",(function(){"checking"===e.iceConnectionState&&t._iceTiming.start(),"connected"===e.iceConnectionState&&(t._iceTiming.stop(),t._updateProgress(L),(!r||r&&"connected"===r.state)&&n())})),e.addEventListener("connectionstatechange",(function(){"connecting"===e.connectionState&&t._peerConnectionTiming.start(),"connected"===e.connectionState&&(t._peerConnectionTiming.stop(),t._updateProgress(D))}));var i=e.getSenders().map((function(e){return e.transport})).find(M);void 0!==i&&(r=i).addEventListener("statechange",(function(){"connecting"===r.state&&t._dtlsTiming.start(),"connected"===r.state&&(t._dtlsTiming.stop(),t._updateProgress(P),"connected"===e.iceConnectionState&&n())}))}))},t.prototype._setupInsights=function(e){var t=e.token,n=e.environment,r=void 0===n?c.DEFAULT_ENVIRONMENT:n,i=e.realm,a=void 0===i?c.DEFAULT_REALM:i,o=new k(t,c.SDK_NAME,c.SDK_VERSION,r,a,{});o.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var s=new w(o,Date.now(),this._log),u=void 0;return{reportToInsights:function(e){var t,n,r=e.report,i=r.stats.jitter||u,a=r.stats.rtt||u,c=r.stats.packetLoss||u,l=r.mos||u,d=new Map;r.iceCandidateStats.forEach((function(e){if(e.candidateType&&e.protocol){var t=d.get(e.candidateType)||[];t.indexOf(e.protocol)<0&&t.push(e.protocol),d.set(e.candidateType,t)}}));var p=JSON.stringify(Object.fromEntries(d)),h={name:"report",group:"preflight",level:r.error?"error":"info",payload:{sessionSID:T,preflightSID:S("PF"),progressEvents:JSON.stringify(r.progressEvents),testTiming:r.testTiming,dtlsTiming:r.networkTiming.dtls,iceTiming:r.networkTiming.ice,peerConnectionTiming:r.networkTiming.peerConnection,connectTiming:r.networkTiming.connect,mediaTiming:r.networkTiming.media,selectedLocalCandidate:null===(t=r.selectedIceCandidatePairStats)||void 0===t?void 0:t.localCandidate,selectedRemoteCandidate:null===(n=r.selectedIceCandidatePairStats)||void 0===n?void 0:n.remoteCandidate,iceCandidateStats:p,jitterStats:i,rttStats:a,packetLossStats:c,mosStats:l,error:r.error}};s.emit("event",h),setTimeout((function(){return o.disconnect()}),2e3)}}},t.prototype._runPreflightTest=function(e,t,n){return o(this,void 0,void 0,(function(){var r,i,c,u,l,d,h,g,_,v,y,b,w=this;return s(this,(function(k){switch(k.label){case 0:r=[],i=[],c=this._setupInsights({token:e,environment:t}).reportToInsights,k.label=1;case 1:return k.trys.push([1,8,9,10]),u=[],[4,this._executePreflightStep("Acquire media",(function(){return[f.syntheticAudio(),m.syntheticVideo({width:640,height:480})]}))];case 2:return r=k.sent(),this._updateProgress(N),this.emit("debug",{localTracks:r}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",(function(){return p.getTurnCredentials(e,n)}),new E)];case 3:return l=k.sent(),this._connectTiming.stop(),this._updateProgress(A),d=new RTCPeerConnection({iceServers:l,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),h=new RTCPeerConnection({iceServers:l,bundlePolicy:"max-bundle"}),i.push(d),i.push(h),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",(function(){return o(w,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(a){switch(a.label){case 0:return d.addEventListener("icecandidate",(function(e){return e.candidate&&h.addIceCandidate(e.candidate)})),h.addEventListener("icecandidate",(function(e){return e.candidate&&d.addIceCandidate(e.candidate)})),r.forEach((function(e){return d.addTrack(e)})),e=new Promise((function(e){var t=[];h.addEventListener("track",(function(n){t.push(n.track),t.length===r.length&&e(t)}))})),[4,d.createOffer()];case 1:return t=a.sent(),n=t,[4,d.setLocalDescription(n)];case 2:return a.sent(),[4,h.setRemoteDescription(n)];case 3:return a.sent(),[4,h.createAnswer()];case 4:return i=a.sent(),[4,h.setLocalDescription(i)];case 5:return a.sent(),[4,d.setRemoteDescription(i)];case 6:return a.sent(),[4,this._collectNetworkTimings(d)];case 7:return a.sent(),[2,e]}}))}))}),new I)];case 4:return g=k.sent(),this.emit("debug",{remoteTracks:g}),g.forEach((function(e){e.addEventListener("ended",(function(){return w._log.warn(e.kind+":ended")})),e.addEventListener("mute",(function(){return w._log.warn(e.kind+":muted")})),e.addEventListener("unmute",(function(){return w._log.warn(e.kind+":unmuted")}))})),this._updateProgress(O),[4,this._executePreflightStep("Wait for tracks to start",(function(){return new Promise((function(e){var t=document.createElement("video");t.autoplay=!0,t.playsInline=!0,t.muted=!0,t.srcObject=new MediaStream(g),u.push(t),w.emit("debugElement",t),t.oncanplay=e}))}),new I)];case 5:return k.sent(),this._mediaTiming.stop(),this._updateProgress(R),[4,this._executePreflightStep("Collect stats for duration",(function(){return w._collectRTCStatsForDuration(w._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},d,h)}))];case 6:return _=k.sent(),[4,this._executePreflightStep("Generate report",(function(){return w._generatePreflightReport(_)}))];case 7:return v=k.sent(),c({report:v}),this.emit("completed",v),[3,10];case 8:return y=k.sent(),b=this._generatePreflightReport(),c({report:a(a({},b),{error:null==y?void 0:y.toString()})}),this.emit("failed",y,b),[3,10];case 9:return i.forEach((function(e){return e.close()})),r.forEach((function(e){return e.stop()})),[7];case 10:return[2]}}))}))},t.prototype._collectRTCStats=function(e,t,n){return o(this,void 0,void 0,(function(){var r,i,a,o,c,u,p,h,f,m,g,_,v,y;return s(this,(function(s){switch(s.label){case 0:return[4,d.getCombinedConnectionStats({publisher:t,subscriber:n})];case 1:return r=s.sent(),i=r.timestamp,a=r.bytesSent,o=r.bytesReceived,c=r.packets,u=r.packetsLost,p=r.roundTripTime,h=r.jitter,f=r.selectedIceCandidatePairStats,m=r.iceCandidateStats,g=e.jitter.length>0,e.jitter.push(h),e.rtt.push(p),this._sentBytesMovingAverage.putSample(a,i),this._receivedBytesMovingAverage.putSample(o,i),this._packetLossMovingAverage.putSample(u,c),g&&(e.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),e.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),_=this._packetLossMovingAverage.get(),v=Math.min(100,100*_),e.packetLoss.push(v),y=l.calculateMOS(p,h,_),e.mos.push(y)),e.selectedIceCandidatePairStats||(e.selectedIceCandidatePairStats=f),0===e.iceCandidateStats.length&&(e.iceCandidateStats=m),[2]}}))}))},t.prototype._collectRTCStatsForDuration=function(e,t,n,r){return o(this,void 0,void 0,(function(){var i,a,o;return s(this,(function(s){switch(s.label){case 0:return i=Date.now(),a=Math.min(1e3,e),[4,g.waitForSometime(a)];case 1:return s.sent(),[4,this._collectRTCStats(t,n,r)];case 2:return s.sent(),(o=e-(Date.now()-i))>0?[4,this._collectRTCStatsForDuration(o,t,n,r)]:[3,4];case 3:t=s.sent(),s.label=4;case 4:return[2,t]}}))}))},t.prototype._updateProgress=function(e){var t=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:t,name:e}),this.emit("progress",e)},t}(y);t.PreflightTest=z,t.runPreflight=function(e,t){return void 0===t&&(t={}),new z(e,t)}},4666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntheticAudio=void 0,t.syntheticAudio=function(){var e=n(873),t={},r=e.getOrCreate(t),i=r.createOscillator(),a=i.connect(r.createMediaStreamDestination());i.start();var o=a.stream.getAudioTracks()[0],s=o.stop;return o.stop=function(){s.call(o),e.release(t)},o}},7555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntheticVideo=void 0,t.syntheticVideo=function(e){var t=void 0===e?{}:e,n=t.width,r=void 0===n?640:n,i=t.height,a=void 0===i?480:i,o=Object.assign(document.createElement("canvas"),{width:r,height:a}),s=o.getContext("2d");s.fillStyle="green",s.fillRect(0,0,o.width,o.height);var c=!1;requestAnimationFrame((function e(){if(!c){var t=Math.round(255*Math.random()),n=Math.round(255*Math.random()),i=Math.round(255*Math.random()),o=Math.round(255*Math.random());s.fillStyle="rgba("+t+", "+n+", "+i+", "+o+")",s.fillRect(Math.random()*r,Math.random()*a,50,50),requestAnimationFrame(e)}}));var u=o.captureStream(30).getTracks()[0],l=u.stop;return u.stop=function(){c=!0,l.call(u)},u}},1264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var n=function(){function e(){this._end=void 0,this.start()}return e.prototype.start=function(){return this._start=Date.now(),this},e.prototype.stop=function(){return this._end=Date.now(),this},e.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},e}();t.Timer=n},8522:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_queuedEvents:{value:new Map}}),t}return i(t,e),t.prototype.dequeue=function(e){var t=this,n=!0;if(!e)return this._queuedEvents.forEach((function(e,t){n=this.dequeue(t)&&n}),this),n;var r=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),r.reduce((function(n,r){return t.emit.apply(t,o([],a([e].concat(r))))&&n}),n)},t.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,o([],a(e))))return!0;var t=e[0];return this._queuedEvents.has(t)||this._queuedEvents.set(t,[]),this._queuedEvents.get(t).push(e.slice(1)),!1},t}(n(29).EventEmitter);e.exports=s},8270:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._handleTrackSignalingEvents(),r.once("disconnected",r._unsubscribeTracks.bind(r)),r}return i(t,e),t.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._addTrack=function(t,n,r){return e.prototype._addTrack.call(this,t,r)?(n._subscribed(t),this.emit("trackSubscribed",t,n),t):null},t.prototype._addTrackPublication=function(t){var n=e.prototype._addTrackPublication.call(this,t);return n?(this.emit("trackPublished",n),n):null},t.prototype._getTrackPublicationEvents=function(){return o(o([],a(e.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},t.prototype._unsubscribeTracks=function(){var e=this;this.tracks.forEach((function(t){if(t.isSubscribed){var n=t.track;t._unsubscribe(),e.emit("trackUnsubscribed",n,t)}}))},t.prototype._removeTrack=function(t,n,r){var i=this._tracks.get(r);return i?(e.prototype._removeTrack.call(this,i,r),n._unsubscribe(),this.emit("trackUnsubscribed",i,n),i):null},t.prototype._removeTrackPublication=function(t){this._signaling.clearTrackHint(t.trackSid);var n=e.prototype._removeTrackPublication.call(this,t);return n?(this.emit("trackUnpublished",n),n):null},t}(n(1188));e.exports=s},9250:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(2787),c=n(8270),u=n(8300),l=n(7026),d=l.flatMap,p=l.valueToJSON,h=0,f=function(e){function t(t,n,r){var i,s,c=e.call(this)||this,u=r.log.createLog("default",c),l=new Map;return Object.defineProperties(c,{_log:{value:u},_clientTrackSwitchOffControl:{value:r.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:r.contentPreferencesMode||"disabled"},_instanceId:{value:++h},_options:{value:r},_participants:{value:l},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:l},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),function(e,t){var n=["trackWarning","trackWarningsCleared"].map((function(n){return{eventName:n,handler:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.emit.apply(e,o([n],a(o(o([],a(r)),[t]))))}}}));n.forEach((function(e){var n=e.eventName,r=e.handler;return t.on(n,r)})),e.once("disconnected",(function(){return n.forEach((function(e){var n=e.eventName,r=e.handler;return t.removeListener(n,r)}))}))}(c,t),i=c,(s=n.recording).on("updated",(function(){var e=s.isEnabled;i._log.info("Recording "+(e?"started":"stopped")),i.emit("recording"+(e?"Started":"Stopped"))})),function(e,t){var n=e._log;n.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(g.bind(null,e)),n.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",g.bind(null,e)),t.on("dominantSpeakerChanged",(function(){return e.emit("dominantSpeakerChanged",e.dominantSpeaker)})),t.on("stateChanged",(function r(i,a){switch(n.info("Transitioned to state:",i),i){case"disconnected":e.participants.forEach((function(e){e._unsubscribeTracks()})),e.emit(i,e,a),e.localParticipant.tracks.forEach((function(e){e.unpublish()})),t.removeListener("stateChanged",r);break;case"reconnecting":setTimeout((function(){return e.emit("reconnecting",a)}),0);break;default:setTimeout((function(){return e.emit("reconnected")}),0)}}))}(c,n),function(e){var t=e.localParticipant._signaling.audioProcessors;e.localParticipant.audioTracks.forEach((function(n){var r=n.track.noiseCancellation;r&&!t.includes(r.vendor)&&(e._log.warn(r.vendor+" is not supported in this room. disabling it permanently"),r.disablePermanently())}))}(c),u.info("Created a new Room:",c.name),u.debug("Initial RemoteParticipants:",Array.from(c._participants.values())),c}return i(t,e),t.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},t.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},t.prototype.getStats=function(){var e=this;return this._signaling.getStats().then((function(t){return Array.from(t).map((function(t){var n=a(t,2),r=n[0],i=n[1];return new u(r,Object.assign({},i,{localAudioTrackStats:m(e,i.localAudioTrackStats),localVideoTrackStats:m(e,i.localVideoTrackStats)}))}))}))},t.prototype.refreshInactiveMedia=function(){var e=this.localParticipant.tracks,t=Array.from(e.values()).filter((function(e){return"data"!==e.track.kind})).map((function(e){return e.track})),n=d(this.participants,(function(e){return Array.from(e.tracks.values())})).filter((function(e){var t=e.track;return t&&"data"!==t.kind})).map((function(e){return e.track})),r=t.concat(n),i=new Event("unmute");t.forEach((function(e){var t=e.isMuted,n=e.mediaStreamTrack;t&&n.dispatchEvent(i)}));var a=new Event("pause");return r.forEach((function(e){var t=e._attachments,n=e._elShims;return t.forEach((function(e){var t=n.get(e);e.paused&&t&&!t.pausedIntentionally()&&e.dispatchEvent(a)}))})),this},t.prototype.toJSON=function(){return p(this)},t}(s);function m(e,t){var n=e.localParticipant._signaling;return t.reduce((function(e,t){var r=n.tracks.get(t.trackId),i=n.getSender(r);return i?[Object.assign({},t,{trackId:i.id})].concat(e):e}),[])}function g(e,t){var n=e._log,r=e._clientTrackSwitchOffControl,i=e._contentPreferencesMode,s=new c(t,{log:n,clientTrackSwitchOffControl:r,contentPreferencesMode:i});n.info("A new RemoteParticipant connected:",s),e._participants.set(s.sid,s),e.emit("participantConnected",s);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map((function(t){var n=a(Array.isArray(t)?t:[t,t],2),r=n[0],i=n[1];function c(){var t=[].slice.call(arguments);t.unshift(i),t.push(s),e.emit.apply(e,o([],a(t)))}return s.on(r,c),[r,c]}));s.once("disconnected",(function(){var t=e.dominantSpeaker;n.info("RemoteParticipant disconnected:",s),e._participants.delete(s.sid),u.forEach((function(e){s.removeListener(e[0],e[1])})),e.emit("participantDisconnected",s),s===t&&e.emit("dominantSpeakerChanged",e.dominantSpeaker)}))}e.exports=f},5586:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(555),o=n(755),s=n(9643),c={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},u=function(e){function t(){return e.call(this,"closed",c)||this}return i(t,e),t.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},t.prototype._connect=function(e,t,n,r,i){e.connect("PA00000000000000000000000000000000","test");var a=Promise.resolve(new o(e,"RM00000000000000000000000000000000",i));return a.cancel=function(){},a},t.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},t.prototype.close=function(){var e=this;return this.bracket("close",(function(t){switch(e.state){case"closed":return e;case"open":return e._close(t);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}}))},t.prototype.connect=function(e,t,n,r,i){var a=this;return this.bracket("connect",(function o(s){switch(a.state){case"closed":return a._open(s).then(o.bind(null,s));case"open":return a.releaseLockCompletely(s),a._connect(e,t,n,r,i);default:throw new Error('Unexpected Signaling state "'+a.state+'"')}}))},t.prototype.createLocalParticipantSignaling=function(){return new a},t.prototype.open=function(){var e=this;return this.bracket("open",(function(t){switch(e.state){case"closed":return e._open(t);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}}))},t}(s);e.exports=u},3348:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),t}return i(t,e),t.prototype.addTrack=function(t,n,r,i){void 0===i&&(i=null);var a=this._createLocalTrackPublicationSignaling(t,n,r,i);return this._trackSendersToPublications.set(t,a),this._publicationsToTrackSenders.set(a,t),e.prototype.addTrack.call(this,a),this},t.prototype.getPublication=function(e){return this._trackSendersToPublications.get(e)||null},t.prototype.getSender=function(e){return this._publicationsToTrackSenders.get(e)||null},t.prototype.removeTrack=function(t){var n=this._trackSendersToPublications.get(t);return n?(this._trackSendersToPublications.delete(t),this._publicationsToTrackSenders.delete(n),e.prototype.removeTrack.call(this,n)&&n.stop(),n):null},t}(n(555));e.exports=a},5458:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r){var i=this,a="data"===(t=t.clone()).kind||t.track.enabled;return(i=e.call(this,n,t.kind,a,r)||this).setTrackTransceiver(t),Object.defineProperties(i,{_updatedPriority:{value:r,writable:!0},id:{enumerable:!0,value:t.id}}),i}return i(t,e),Object.defineProperty(t.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),t.prototype.enable=function(t){return t="boolean"!=typeof t||t,this.trackTransceiver.track.enabled=t,e.prototype.enable.call(this,t)},t.prototype.publishFailed=function(e){return function(e,t){if(null!==e._sid||e._error)return!1;return e._error=t,!0}(this,e)&&this.emit("updated"),this},t.prototype.setPriority=function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this},t.prototype.setSid=function(t){return this._error?this:e.prototype.setSid.call(this,t)},t.prototype.stop=function(){this.trackTransceiver.stop()},t}(n(8581));e.exports=a},555:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(9643),o=n(8551),s={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},c=function(e){function t(){var t=e.call(this,"connecting",s)||this;return Object.defineProperties(t,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),t}return i(t,e),Object.defineProperty(t.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this},t.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},t.prototype.removeTrack=function(e){var t=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),t&&this.emit("trackRemoved",e),t||null},t.prototype.setNetworkQualityLevel=function(e,t){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=t&&(t.audio||t.video)?new o(t):null,this.emit("networkQualityLevelChanged"))},t.prototype.connect=function(e,t){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=e),this._identity||(this._identity=t),this.preempt("connected"),!0)},t.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},t}(a);e.exports=c},1081:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),t}return i(t,e),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t}(n(29).EventEmitter);e.exports=a},541:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this)||this;return r.connect(t,n),r}return i(t,e),t}(n(555));e.exports=a},7445:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i,a,o){var s=e.call(this,n,r,i,a)||this;return Object.defineProperties(s,{_isSwitchedOff:{value:o,writable:!0}}),s.setSid(t),s}return i(t,e),Object.defineProperty(t.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),t.prototype.subscribeFailed=function(e){return this.error||(this._error=e,this.emit("updated")),this},t.prototype.setPriority=function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this},t.prototype.setSwitchedOff=function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this},t}(n(8581));e.exports=a},755:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(1081),o=n(9643),s=n(8993),c=n(7026).buildLogLevels,u=n(3427).DEFAULT_LOG_LEVEL,l=n(8552),d=n(5760),p=d.MediaConnectionError,h=d.MediaDTLSTransportFailedError,f=d.SignalingConnectionDisconnectedError,m=0,g={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},_=function(e){function t(t,n,r,i){var o=this;i=Object.assign({logLevel:u,RecordingSignaling:a,Timeout:s},i);var d=c(i.logLevel);o=e.call(this,"connected",g)||this;var p=i.RecordingSignaling,f=new i.Timeout((function(){o._disconnect(o._reconnectingError)}),i.sessionTimeout,!1);return Object.defineProperties(o,{_instanceId:{value:m++},_log:{value:i.log?i.log.createLog("default",o):new l("default",o,d,i.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:i},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:f},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:t},name:{enumerable:!0,value:r},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new p},sid:{enumerable:!0,value:n}}),o.on("connectionStateChanged",(function(){"failed"!==o.connectionState||["disconnected","failed"].includes(o.iceConnectionState)||o._disconnect(new h)})),o.on("iceConnectionStateChanged",(function(){return v(o)})),o.on("signalingConnectionStateChanged",(function(){return v(o)})),setTimeout((function(){return v(o)})),o}return i(t,e),t.prototype._disconnect=function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),!0)},t.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},t.prototype.connectParticipant=function(e){var t=this;return"disconnected"!==e.state&&(!this.participants.has(e.sid)&&(this.participants.set(e.sid,e),e.on("stateChanged",(function n(r){"disconnected"===r&&(e.removeListener("stateChanged",n),t.participants.delete(e.sid),t.emit("participantDisconnected",e))})),this.emit("participantConnected",e),!0))},t.prototype.disconnect=function(){return this._disconnect()},t.prototype.setDominantSpeaker=function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")},t}(o);function v(e){var t;"disconnected"!==e.state&&"disconnected"!==e.signalingConnectionState?("reconnecting"===e.signalingConnectionState?t=e.signalingConnectionState:"failed"===e.iceConnectionState?(e._mediaConnectionIsReconnecting=!0,t="reconnecting"):"new"===e.iceConnectionState||"checking"===e.iceConnectionState?t=e._mediaConnectionIsReconnecting?"reconnecting":"connected":(e._mediaConnectionIsReconnecting=!1,e._reconnectingError=null,e._sessionTimeout.clear(),t="connected"),t!==e.state&&("reconnecting"===t?(e._reconnectingError="reconnecting"===e.signalingConnectionState?new f:new p,e._sessionTimeout.start(),e.preempt(t,null,[e._reconnectingError])):e.preempt(t))):e._sessionTimeout.clear()}e.exports=_},8581:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r,i){var a=e.call(this)||this,o=null;return Object.defineProperties(a,{_error:{value:null,writable:!0},_isEnabled:{value:r,writable:!0},_priority:{value:i,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return o},set:function(e){null===o&&(o=e)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:t}}),a}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t.prototype.setTrackTransceiver=function(e){return e=e||null,this.trackTransceiver!==e&&(this._trackTransceiver=e,this.emit("updated")),this},t.prototype.setSid=function(e){return null===this.sid&&(this._sid=e,this.emit("updated")),this},t}(n(29).EventEmitter);e.exports=a},9179:(e,t,n)=>{"use strict";var r=n(2669),i=n(3088),a=n(9027),o=n(2782),s=n(5760),c=s.SignalingConnectionDisconnectedError,u=s.SignalingIncomingMessageInvalidError,l=n(7026),d=l.flatMap,p=l.createRoomConnectEventPayload;e.exports=function(e,t,n,s,l,h){h=Object.assign({PeerConnectionManager:i,RoomV2:a,Transport:o},h);var f=l.video[0]&&!0===l.video[0].adaptiveSimulcast,m=h.PeerConnectionManager,g=h.RoomV2,_=h.Transport,v=h.iceServers,y=h.log,b=new m(s,l,h),w=d(n.tracks,(function(e){return[e.trackTransceiver]}));b.setTrackSenders(w);var k,x=new Error("Canceled"),S=new r((function(r,i,a){var o=h.automaticSubscription,s=h.bandwidthProfile,l=h.dominantSpeaker,d=h.environment,m=h.eventObserver,w=h.loggerName,S=h.logLevel,T=h.name,C=h.networkMonitor,E=h.networkQuality,I=h.notifyWarnings,N=h.realm,A=h.sdpSemantics,O=!!s,R=!!s,P=!!s&&("disabled"!==h.clientTrackSwitchOffControl||"disabled"!==h.contentPreferencesMode),D=Object.assign({adaptiveSimulcast:f,automaticSubscription:o,dominantSpeaker:l,environment:d,eventObserver:m,loggerName:w,logLevel:S,networkMonitor:C,networkQuality:E,notifyWarnings:I,iceServers:v,onIced:function(e){return a()?(i(x),Promise.reject(x)):(y.debug("Got ICE servers:",e),h.iceServers=e,b.setConfiguration(h),b.createAndOffer().then((function(){if(a())throw i(x),x;y.debug("createAndOffer() succeeded."),b.dequeue("description")})).catch((function(e){throw y.error("createAndOffer() failed:",e),i(e),e})))},realm:N,renderHints:P,sdpSemantics:A,trackPriority:O,trackSwitchOff:R},s?{bandwidthProfile:s}:{});k=new _(T,e,n,b,t,D);var L=p(h);m.emit("event",L),k.once("connected",(function(e){(y.debug("Transport connected:",e),a())?i(x):e.participant?r(new g(n,e,k,b,h)):i(new u)})),k.once("stateChanged",(function(e,t){"disconnected"===e?(k=null,i(t||new c)):y.debug("Transport state changed:",e)}))}),(function(){k&&(k.disconnect(),k=null)}));return S.catch((function(){k&&(k.disconnect(),k=null),b.close()})),S}},9020:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,"active_speaker",n)||this;return Object.defineProperties(r,{_loudestParticipantSid:{value:null,writable:!0}}),r.on("ready",(function(e){e.on("message",(function(e){if("active_speaker"===e.type)r._setLoudestParticipantSid(e.participant)}))})),r}return i(t,e),Object.defineProperty(t.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),t.prototype._setLoudestParticipantSid=function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))},t}(n(71));e.exports=a},7511:(e,t,n)=>{"use strict";var r=n(4206),i=function(){function e(){Object.defineProperties(this,{_filter:{value:new r({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,t){return e.revision<=t.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return e.prototype.setUfrag=function(e){this._ufrag=e;var t=this._filter.toMap().get(e);return t?t.candidates:[]},e.prototype.update=function(e){e.candidates=e.candidates||[];var t=this._filter.toMap().get(e.ufrag),n=t?t.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]},e}();e.exports=i},1892:(e,t,n)=>{"use strict";var r=n(3427),i=r.ICE_ACTIVITY_CHECK_PERIOD_MS,a=r.ICE_INACTIVITY_THRESHOLD_MS,o=function(){function e(e,t){t=Object.assign({activityCheckPeriodMs:i,inactivityThresholdMs:a},t),Object.defineProperties(this,{_activityCheckPeriodMs:{value:t.activityCheckPeriodMs},_inactivityThresholdMs:{value:t.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:e},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return e.prototype._getActivePairStat=function(e){return Array.from(e.values()).find((function(e){return"candidate-pair"===e.type&&e.nominated}))||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},e.prototype._getIceConnectionStats=function(){var e=this;return this._peerConnection.getStats().then((function(t){return e._getActivePairStat(t)})).catch((function(){return null}))},e.prototype._scheduleInactivityCallback=function(e){var t=this;e&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===t._peerConnection.iceConnectionState&&e()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!e&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},e.prototype.start=function(e){var t=this;this.stop(),this._timer=setInterval((function(){t._getIceConnectionStats().then((function(n){n&&(t._lastActivity&&t._lastActivity.bytesReceived===n.bytesReceived||(t._lastActivity=n,t._scheduleInactivityCallback(null)),n.timestamp-t._lastActivity.timestamp>=t._inactivityThresholdMs&&("disconnected"===t._peerConnection.iceConnectionState?e():null===t._onIceConnectionStateChanged&&t._scheduleInactivityCallback(e)))}))}),this._activityCheckPeriodMs)},e.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},e}();e.exports=o},6755:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(9179),o=n(707),s=function(e){function t(t,n){var r;return n=Object.assign({createCancelableRoomSignalingPromise:a},n),r=e.call(this)||this,Object.defineProperties(r,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:t}}),r}return i(t,e),t.prototype._connect=function(e,t,n,r,i){return i=Object.assign({},this._options,i),this._createCancelableRoomSignalingPromise.bind(null,t,this._wsServer,e,n,r,i)},t.prototype.createLocalParticipantSignaling=function(e,t){return new o(e,t)},t}(n(5586));e.exports=s},707:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(3348),o=n(7111),s=n(3427).DEFAULT_LOG_LEVEL,c=n(8552),u=n(7026),l=u.buildLogLevels,d=u.isDeepEqual,p=function(e){function t(t,n,r){var i;r=Object.assign({logLevel:s,LocalTrackPublicationV2:o},r),i=e.call(this)||this;var a=l(r.logLevel);return Object.defineProperties(i,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:t},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:r.LocalTrackPublicationV2},_log:{value:r.log?r.log.createLog("default",i):new c("default",i,a,r.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),i}return i(t,e),t.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},t.prototype.setSignalingRegion=function(e){this._signalingRegion||(this._signalingRegion=e)},t.prototype.setBandwidthProfile=function(e){d(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())},t.prototype.setAudioProcessors=function(e){this.audioProcessors=e},t.prototype.getParameters=function(){return this._encodingParameters},t.prototype.setParameters=function(e){return this._encodingParameters.update(e),this},t.prototype.update=function(e){return this._publishedRevision>=e.revision||(this._publishedRevision=e.revision,e.tracks.forEach((function(e){var t=this.tracks.get(e.id);t&&t.update(e)}),this)),this},t.prototype.updateMediaStates=function(e){return e&&e.tracks?(Array.from(this.tracks.values()).forEach((function(t){var n=e.tracks[t.sid];n&&t.updateMediaStates(n)})),this):this},t.prototype._createLocalTrackPublicationSignaling=function(e,t,n,r){return new this._LocalTrackPublicationV2(e,t,n,r,{log:this._log})},t.prototype.addTrack=function(t,n,r,i){var a=this;e.prototype.addTrack.call(this,t,n,r,i);var o=this.getPublication(t),s=o.isEnabled,c=o.updatedPriority,u=function(){s===o.isEnabled&&c===o.updatedPriority||(a.didUpdate(),s=o.isEnabled,c=o.updatedPriority)};return o.on("updated",u),this._removeListener(o),this._removeListeners.set(o,(function(){return o.removeListener("updated",u)})),this.didUpdate(),this},t.prototype._removeListener=function(e){var t=this._removeListeners.get(e);t&&t()},t.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map((function(e){return e.getState()}))}},t.prototype.didUpdate=function(){this._revision++,this.emit("updated")},t.prototype.removeTrack=function(t){var n=e.prototype.removeTrack.call(this,t);return n&&(t.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},t.prototype.setNetworkQualityConfiguration=function(e){this.networkQualityConfiguration.update(e)},t.prototype.setPublisherHint=function(e,t){var n=Array.from(this.tracks.values()).find((function(t){return t.sid===e}));return n?n.trackTransceiver.setPublisherHint(t):(this._log.warn("track:"+e+" not found"),Promise.resolve("UNKNOWN_TRACK"))},t}(a);e.exports=p},7111:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(5458),o=n(4062),s=n(5760).createTwilioError,c=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r)||this;return Object.defineProperties(o,{_log:{value:a.log.createLog("default",o)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:i}}),o}return i(t,e),t.prototype.getState=function(){var e={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(e.audio_processor=this._noiseCancellationVendor),e},t.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},t.prototype.update=function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":var t=e.error;this.publishFailed(s(t.code,t.message))}return this},t.prototype.updateMediaStates=function(e){if(!e||!e.recordings||this._mediaStates.recordings===e.recordings)return this;switch(this._mediaStates.recordings=e.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",o.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings)}return this},t}(a);e.exports=c},71:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(29),o=0,s=function(e){function t(t,n,r){var i=e.call(this)||this;return Object.defineProperties(i,{_instanceId:{value:o++},channel:{value:n},_log:{value:r.log.createLog("default",i)},_getReceiver:{value:t},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),i}return i(t,e),Object.defineProperty(t.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},t.prototype.setup=function(e){var t=this;this._teardown(),this._log.info("setting up msp transport for id:",e);var n=this._getReceiver(e).then((function(e){if("data"!==e.kind&&t._log.error("Expected a DataTrackReceiver"),t._receiverPromise===n){try{t._transport=e.toDataTransport(),t.emit("ready",t._transport)}catch(e){t._log.error("Failed to toDataTransport: "+e.message)}e.once("close",(function(){return t._teardown()}))}}));this._receiverPromise=n},t.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},t}(a);e.exports=s},7944:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=n(29),s=n(837),c=function(e){function t(t,n){var r=e.call(this)||this;return Object.defineProperties(r,{_factories:{value:new WeakMap},_manager:{value:t},_signaling:{value:n}}),n.on("updated",(function(){return r.emit("updated")})),r}return i(t,e),Object.defineProperty(t.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.stop();var t=setTimeout((function(){var n,r;e._timeout===t&&(n=e,r=(n._manager._peerConnections?Array.from(n._manager._peerConnections.values()):[]).map((function(e){return e._peerConnection})).filter((function(e){return"closed"!==e.signalingState})).map((function(e){if(n._factories.has(e))return n._factories.get(e);var t=new s(e);return n._factories.set(e,t),t})).map((function(e){return e.next().catch((function(){return null}))})),Promise.all(r).then((function(e){return e.filter((function(e){return e})).map((function(e){return e.summarize()}))}))).then((function(n){if(e._timeout===t){if(n.length){var r=a(n,1)[0];e._signaling.put(r)}e.start()}}))}),200);this._timeout=t},t.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},t}(o);e.exports=c},1590:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(71),o=n(4233),s=n(8993),c=function(e){function t(t,n,r){var i=e.call(this,t,"network_quality",r)||this;return Object.defineProperties(i,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new o},_resendTimer:{value:new s((function(){i._resendTimer.setDelay(1.5*i._resendTimer.delay),i._sendNetworkQualityInputs()}),5e3,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),i.on("ready",(function(e){e.on("message",(function(e){if(i._log.debug("Incoming: ",e),"network_quality"===e.type)i._handleNetworkQualityMessage(e)}))})),i._sendNetworkQualityInputs(),i}return i(t,e),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),t.prototype._handleNetworkQualityMessage=function(e){var t=this,n=!1,r=null,i=e?e.local:null;"number"==typeof i?(r=i,this._levels=null):"object"==typeof i&&i&&(this._levels=i,r="number"==typeof i.level?i.level:Math.min(i.audio.send,i.audio.recv,i.video.send,i.video.recv)),null!==r&&this.level!==r&&(this._level=r,n=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce((function(e,r){return(t._remoteLevels.get(r.sid)||{}).level!==r.level&&(n=!0),e.set(r.sid,r)}),new Map):this._remoteLevels,n&&this.emit("updated"),this._resendTimer.setDelay(5e3),this._resendTimer.isSet&&setTimeout((function(){return t._sendNetworkQualityInputs()}),1e3)},t.prototype._sendNetworkQualityInputs=function(){var e=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then((function(t){e._transport&&e._transport.publish(function(e,t){return Object.assign({type:"network_quality"},e,t)}(t,e._networkQualityReportLevels))})).finally((function(){e._resendTimer.start()}))},t.prototype.put=function(e){this._networkQualityInputs.put(e)},t}(a);e.exports=c},8979:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(1194),c=n(807),u=c.RTCIceCandidate,l=c.RTCPeerConnection,d=c.RTCSessionDescription,p=c.getStats,h=n(7792),f=n(3427),m=f.DEFAULT_ICE_GATHERING_TIMEOUT_MS,g=f.DEFAULT_LOG_LEVEL,_=f.DEFAULT_SESSION_TIMEOUT_SEC,v=f.iceRestartBackoffConfig,y=n(2372),b=y.addOrRewriteNewTrackIds,w=y.addOrRewriteTrackIds,k=y.createCodecMapForMediaSection,x=y.disableRtx,S=y.enableDtxForOpus,T=y.filterLocalCodecs,C=y.getMediaSections,E=y.removeSSRCAttributes,I=y.revertSimulcast,N=y.setCodecPreferences,A=y.setSimulcast,O=n(8993),R=n(5760),P=R.MediaClientLocalDescFailedError,D=R.MediaClientRemoteDescFailedError,L=n(7026),M=L.buildLogLevels,F=L.getPlatform,z=L.isChromeScreenShareTrack,$=L.oncePerTick,j=L.defer,B=n(7511),V=n(1892),U=n(2861),G=n(505),q=n(9643),W=n(8552),H=n(6469),Y=n(2147),K=h.guessBrowser(),X=F(),Q=/android/.test(X),J="chrome"===K,Z="firefox"===K,ee="safari"===K,te=0,ne={open:["closed","updating"],updating:["closed","open"],closed:[]},re=function(e){function t(t,n,r,i){var a=e.call(this,"open",ne)||this,o=se(i=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:z,iceServers:[],logLevel:g,offerOptions:{},revertSimulcast:I,sessionTimeout:1e3*_,setCodecPreferences:N,setSimulcast:A,Backoff:s,IceConnectionMonitor:V,RTCIceCandidate:u,RTCPeerConnection:l,RTCSessionDescription:d,Timeout:O},i)),c=M(i.logLevel),p=i.RTCPeerConnection;!0===i.enableDscp&&(i.chromeSpecificConstraints=i.chromeSpecificConstraints||{},i.chromeSpecificConstraints.optional=i.chromeSpecificConstraints.optional||[],i.chromeSpecificConstraints.optional.push({googDscp:!0}));var h=i.log?i.log.createLog("webrtc",a):new W("webrtc",a,c,i.loggerName),f=new p(o,i.chromeSpecificConstraints);i.dummyAudioMediaStreamTrack&&f.addTrack(i.dummyAudioMediaStreamTrack),Object.defineProperties(a,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:i.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:i.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new i.Timeout((function(){return a._handleIceGatheringTimeout()}),m,!1)},_iceRestartBackoff:{value:new i.Backoff(v)},_instanceId:{value:++te},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:h},_eventObserver:{value:i.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new i.IceConnectionMonitor(f)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:i.offerOptions},_onEncodingParametersChanged:{value:$((function(){a._needsAnswer||le(a)}))},_peerConnection:{value:f},_preferredAudioCodecs:{value:r.audio},_preferredVideoCodecs:{value:r.video},_shouldApplyDtx:{value:r.audio.every((function(e){return"opus"!==e.codec}))||r.audio.some((function(e){var t=e.codec,n=e.dtx;return"opus"===t&&n}))},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new i.Timeout((function(){h.debug("ICE reconnect timed out"),a.close()}),i.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new B},_setCodecPreferences:{value:Z&&Q&&r.video[0]&&"h264"!==r.video[0].codec.toLowerCase()?function(e){return e}:i.setCodecPreferences},_setSimulcast:{value:i.setSimulcast},_revertSimulcast:{value:i.revertSimulcast},_RTCIceCandidate:{value:i.RTCIceCandidate},_RTCPeerConnection:{value:i.RTCPeerConnection},_RTCSessionDescription:{value:i.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:t}}),n.on("changed",a._onEncodingParametersChanged),f.addEventListener("connectionstatechange",a._handleConnectionStateChange.bind(a)),f.addEventListener("datachannel",a._handleDataChannelEvent.bind(a)),f.addEventListener("icecandidate",a._handleIceCandidateEvent.bind(a)),f.addEventListener("iceconnectionstatechange",a._handleIceConnectionStateChange.bind(a)),f.addEventListener("icegatheringstatechange",a._handleIceGatheringStateChange.bind(a)),f.addEventListener("signalingstatechange",a._handleSignalingStateChange.bind(a)),f.addEventListener("track",a._handleTrackEvent.bind(a));var y=a;return a.on("stateChanged",(function e(t){"closed"===t&&(y.removeListener("stateChanged",e),y._dataChannels.forEach((function(e,t){y.removeDataTrackSender(t)})))})),a}return i(t,e),t.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",e),this._preferredVideoCodecs.forEach((function(t){"adaptiveSimulcast"in t&&(t.adaptiveSimulcast=e)}))},Object.defineProperty(t.prototype,"_shouldApplySimulcast",{get:function(){return!(!J&&!ee)&&this._preferredVideoCodecs.some((function(e){return"vp8"===e.codec.toLowerCase()&&e.simulcast&&!1!==e.adaptiveSimulcast}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&C(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var e=this._preferredVideoCodecs.find((function(e){return"adaptiveSimulcast"in e}));return e&&!0===e.adaptiveSimulcast},enumerable:!1,configurable:!0}),t.prototype._maybeUpdateEncodings=function(e,t,n){if(void 0===n&&(n=!1),"video"!==e.kind||"ended"===e.readyState)return!1;var r=e.getSettings(),i=r.height,a=r.width;if("number"!=typeof i||"number"!=typeof a)return!1;var o=h.guessBrowser();return!!("safari"===o||"chrome"===o&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(e,t,n),!0)},t.prototype._updateEncodings=function(e,t,n){if(this._isChromeScreenShareTrack(e)){var r=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];t.forEach((function(e,t){var i=r[t];i?(e.scaleResolutionDownBy=i.scaleResolutionDownBy,n&&delete e.active):(e.active=!1,delete e.scaleResolutionDownBy)}))}else{var i=e.getSettings(),a=i.width*i.height,o=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find((function(e){return a>=e.pixels})),s=Math.min(t.length,o.maxActiveLayers);t.forEach((function(e,t){t<s?(e.scaleResolutionDownBy=1<<s-t-1,n&&(e.active=!0)):(e.active=!1,delete e.scaleResolutionDownBy)}))}this._log.debug("_updateEncodings:",t.map((function(e,t){return"["+t+": "+e.active+", "+(e.scaleResolutionDownBy||0)+"]"})).join(", "))},t.prototype._addIceCandidate=function(e){var t=this;return Promise.resolve().then((function(){return e=new t._RTCIceCandidate(e),t._peerConnection.addIceCandidate(e)})).catch((function(n){t._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+n.message)}))},t.prototype._addIceCandidates=function(e){return Promise.all(e.map(this._addIceCandidate,this)).then((function(){}))},t.prototype._addOrUpdateTransceiver=function(e){var t=this,n=function(e,t){var n={audio:e._preferredAudioCodecs.map((function(e){return e.codec.toLowerCase()})),video:e._preferredVideoCodecs.map((function(e){return e.codec.toLowerCase()}))}[t],r=e._recycledTransceivers[t],i=n.find((function(t){return e._localCodecs.has(t)}));if(!i)return r.shift();var a=r.find((function(t){var n=e._remoteCodecMaps.get(t.mid);return n&&n.has(i)}));a&&r.splice(r.indexOf(a),1);return a}(this,e.kind);if(n&&n.sender){var r=n.sender.track?n.sender.track.id:null;return r&&this._log.warn("Reusing transceiver: "+n.mid+"] "+r+" => "+e.id),this._replaceTrackPromises.set(n,n.sender.replaceTrack(e).then((function(){n.direction="sendrecv"}),(function(){})).finally((function(){t._replaceTrackPromises.delete(n)}))),n}return this._peerConnection.addTransceiver(e)},t.prototype._checkIceBox=function(e){var t=oe(e);if(!t)return Promise.resolve();var n=this._remoteCandidates.setUfrag(t);return this._addIceCandidates(n)},t.prototype._answer=function(e){var t=this;return Promise.resolve().then((function(){return t._negotiationRole||(t._negotiationRole="answerer"),t._setRemoteDescription(e)})).catch((function(){throw new D})).then((function(){return t._peerConnection.createAnswer()})).then((function(n){n=Z?new t._RTCSessionDescription({sdp:x(n.sdp),type:n.type}):Y(n);var r=E(n.sdp,["mslabel","label"]);if(t._shouldApplySimulcast){var i=r;r=t._setSimulcast(i,t._trackIdsToAttributes),r=t._revertSimulcast(r,i,e.sdp)}return r=r.replace(/42e015/g,"42e01f"),t._setLocalDescription({type:n.type,sdp:r})})).then((function(){return t._checkIceBox(e)})).then((function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)})).then((function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription)})).catch((function(e){var n=e instanceof D?e:new P;throw t._publishMediaWarning({message:"Failed to _answer",code:n.code,error:e}),n}))},t.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},t.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},t.prototype._handleDataChannelEvent=function(e){var t=this,n=e.channel,r=new U(n);this._dataTrackReceivers.add(r),n.addEventListener("close",(function(){t._dataTrackReceivers.delete(r)})),this.emit("trackAdded",r)},t.prototype._handleGlare=function(e){var t=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then((function(){return t._trackIdsToAttributes=new Map(t._appliedTrackIdsToAttributes),t._setLocalDescription({type:"rollback"})})).then((function(){return t._needsAnswer=!1,t._answer(e)})).then((function(e){return e?Promise.resolve():t._offer()}))},t.prototype._publishMediaWarning=function(e){var t=e.message,n=e.code,r=e.error,i=e.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:t,code:n,context:JSON.stringify({error:r.message,sdp:i})}})},t.prototype._handleIceCandidateEvent=function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var t={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(t.ice.complete=!0),this._isIceLite&&e.candidate||(t.ice.revision=this._localCandidatesRevision++,this.emit("candidates",t))},t.prototype._handleIceConnectionStateChange=function(){var e=this,t=this._peerConnection.iceConnectionState,n=["connected","completed"].includes(t),r=this._log;r.debug('ICE connection state is "'+t+'"'),n&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==t||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&n&&r.debug("ICE reconnected"):(r.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===t?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start((function(){e._iceConnectionMonitor.stop(),e._shouldRestartIce||e._isRestartingIce||(r.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))}))):["disconnected","completed"].includes(t)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=t,this.emit("iceConnectionStateChanged")},t.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},t.prototype._handleIceGatheringStateChange=function(){var e=this._peerConnection.iceGatheringState,t=this._log;t.debug('ICE gathering state is "'+e+'"');var n=this._iceGatheringTimeout,r=n.delay,i=n.isSet;"gathering"!==e||this._didGenerateLocalCandidates||i||(t.debug("Starting ICE gathering timeout: "+r),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},t.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},t.prototype._handleTrackEvent=function(e){var t=this,n=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new H,this._trackMatcher.update(n);var r=e.track,i=this._trackMatcher.match(e)||r.id,a=new G(i,r);this._mediaTrackReceivers.forEach((function(e){e.track.id===a.track.id&&t._mediaTrackReceivers.delete(e)})),this._mediaTrackReceivers.add(a),r.addEventListener("ended",(function(){return t._mediaTrackReceivers.delete(a)})),this.emit("trackAdded",a)},t.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var t=this._iceReconnectTimeout,n=t.delay;t.isSet||(e.debug("Starting ICE reconnect timeout: "+n),this._iceReconnectTimeout.start()),this.offer().catch((function(t){e.error("offer failed in _initiateIceRestart with: "+t.message)}))}},t.prototype._initiateIceRestartBackoff=function(){var e=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff((function(){return e._initiateIceRestart()})))},t.prototype._maybeReoffer=function(e){var t=this._shouldOffer;if(e&&e.sdp){var n=this._peerConnection.getSenders().filter((function(e){return e.track}));t=["audio","video"].reduce((function(t,r){var i=C(e.sdp,r,"(sendrecv|sendonly)"),a=n.filter(ce.bind(null,r));return t||i.length<a.length}),t);var r=this._dataChannels.size>0,i=C(e.sdp,"application").length>0;t=t||r&&!i}return(t?this._offer():Promise.resolve()).then((function(){return t}))},t.prototype._offer=function(){var e=this,t=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,t.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then((function(){return e._peerConnection.createOffer(t)})).catch((function(t){var n=new P;throw e._publishMediaWarning({message:"Failed to create offer",code:n.code,error:t}),n})).then((function(t){t=Z?new e._RTCSessionDescription({sdp:x(t.sdp),type:t.type}):Y(t);var n=E(t.sdp,["mslabel","label"]);n=e._peerConnection.remoteDescription?T(n,e._peerConnection.remoteDescription.sdp):n;var r=e._setCodecPreferences(n,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:r},r=e._setSimulcast(r,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:r})}))},t.prototype._getMediaTrackSenderId=function(e){var t=Array.from(this._rtpSenders.keys()).find((function(t){return t.track.id===e}));return t?t.id:e},t.prototype._addOrRewriteLocalTrackIds=function(e){var t=this,n=this._peerConnection.getTransceivers().filter((function(e){var t=e.sender;return!e.stopped&&t&&t.track})),r=n.filter((function(e){return e.mid})),i=new Map(r.map((function(e){var n=e.mid,r=e.sender;return[n,t._getMediaTrackSenderId(r.track.id)]}))),a=w(e.sdp,i),o=n.filter((function(e){return!e.mid})),s=new Map(["audio","video"].map((function(e){return[e,o.filter((function(t){return t.sender.track.kind===e})).map((function(e){var n=e.sender;return t._getMediaTrackSenderId(n.track.id)}))]}))),c=b(a,i,s);return new this._RTCSessionDescription({sdp:c,type:e.type})},t.prototype._rollbackAndApplyOffer=function(e){var t=this;return this._setLocalDescription({type:"rollback"}).then((function(){return t._setLocalDescription(e)}))},t.prototype._setLocalDescription=function(e){var t=this;return"rollback"!==e.type&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:S(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch((function(n){t._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".',n);var r=new P,i={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:r.code,error:n};throw e.sdp&&(t._log.warn("The SDP was "+e.sdp),i.sdp=e.sdp),t._publishMediaWarning(i),r})).then((function(){"rollback"!==e.type&&(t._localDescription=t._addOrRewriteLocalTrackIds(e),t._shouldApplyDtx&&(t._localDescription=new t._RTCSessionDescription({sdp:S(t._localDescription.sdp,[]),type:t._localDescription.type})),t._localCandidates=[],"offer"===e.type?t._descriptionRevision++:"answer"===e.type&&(t._lastStableDescriptionRevision=t._descriptionRevision,ue(t)),t._localUfrag=oe(e),t.emit("description",t.getState()))}))},t.prototype._setRemoteDescription=function(e){var t=this;return e.sdp&&(e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?e.sdp=S(e.sdp):e.sdp=S(e.sdp,[]),Z&&(e.sdp=e.sdp.replace(/a=msid:[^ ]+ /g,"a=msid:- ")),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then((function(){if("answer"===e.type&&t._localDescriptionWithoutSimulcast){var n=t._preferredVideoCodecs.find((function(e){return"adaptiveSimulcast"in e})),r=!!n&&!1===n.adaptiveSimulcast,i=t._revertSimulcast(t._localDescription.sdp,t._localDescriptionWithoutSimulcast.sdp,e.sdp,r);if(t._localDescriptionWithoutSimulcast=null,i!==t._localDescription.sdp)return t._rollbackAndApplyOffer({type:t._localDescription.type,sdp:i})}})).then((function(){return t._peerConnection.setRemoteDescription(e)})).then((function(){"answer"===e.type&&(t._isRestartingIce&&(t._log.debug("An ICE restart was in-progress and is now completed"),t._isRestartingIce=!1),ue(t))}),(function(n){throw t._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".',n),e.sdp&&t._log.warn("The SDP was "+e.sdp),n}))},t.prototype._updateDescription=function(e){var t=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then((function(){})))}var n=e.revision;return Promise.resolve().then((function(){return t._setRemoteDescription(e)})).catch((function(n){var r=new D;throw t._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:r.code,error:n,sdp:e.sdp}),r})).then((function(){return t._lastStableDescriptionRevision=n,t._needsAnswer=!1,t._checkIceBox(e)})).then((function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)})).then((function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription).then((function(){}))}))},t.prototype._updateIce=function(e){var t=this._remoteCandidates.update(e);return this._addIceCandidates(t)},t.prototype.addDataTrackSender=function(e){if(!this._dataChannels.has(e))try{var t={ordered:e.ordered};null!==e.maxPacketLifeTime&&(t.maxPacketLifeTime=e.maxPacketLifeTime),null!==e.maxRetransmits&&(t.maxRetransmits=e.maxRetransmits);var n=this._peerConnection.createDataChannel(e.id,t);e.addDataChannel(n),this._dataChannels.set(e,n)}catch(t){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+t.message)}},t.prototype._handleQueuedPublisherHints=function(){var e=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach((function(t,n){var r=t.deferred,i=t.encodings;e._mediaTrackSenderToPublisherHints.delete(n),e._setPublisherHint(n,i).then((function(e){return r.resolve(e)})).catch((function(e){return r.reject(e)}))}))},t.prototype._setPublisherHint=function(e,t){var n=this;if(Z)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(e)&&(this._mediaTrackSenderToPublisherHints.get(e).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(e));var r=this._rtpSenders.get(e);if(!r)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var i=j();return this._mediaTrackSenderToPublisherHints.set(e,{deferred:i,encodings:t}),i.promise}var a=r.getParameters();return null!==t&&t.forEach((function(e){var t=e.enabled,r=e.layer_index;a.encodings.length>r?(n._log.debug("layer:"+r+", active:"+a.encodings[r].active+" => "+t),a.encodings[r].active=t):n._log.warn("invalid layer:"+r+", active:"+t)})),this._maybeUpdateEncodings(r.track,a.encodings,null===t),r.setParameters(a).then((function(){return"OK"})).catch((function(e){return n._log.error("Failed to apply publisher hints:",e),"COULD_NOT_APPLY_HINT"}))},t.prototype.addMediaTrackSender=function(e){var t=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(e)){var n=this._addOrUpdateTransceiver(e.track).sender;e.addSender(n,(function(n){return t._setPublisherHint(e,n)})),this._rtpNewSenders.add(n),this._rtpSenders.set(e,n)}},t.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},t.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},t.prototype.getState=function(){if(!this._localDescription)return null;var e="answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision,t={type:this._localDescription.type,revision:e};return this._localDescription.sdp&&(t.sdp=this._localDescription.sdp),{description:t,id:this.id}},t.prototype.offer=function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",(function(t){return e.transition("updating",t),(e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer()).then((function(){e.tryTransition("open",t)}),(function(n){throw e.tryTransition("open",t),n}))}))},t.prototype.removeDataTrackSender=function(e){var t=this._dataChannels.get(e);t&&(e.removeDataChannel(t),this._dataChannels.delete(e),t.close())},t.prototype.removeMediaTrackSender=function(e){var t=this._rtpSenders.get(e);if(t){if("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(t),e.removeSender(t),this._mediaTrackSenderToPublisherHints.has(e))this._mediaTrackSenderToPublisherHints.get(e).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(e);this._rtpNewSenders.delete(t),this._rtpSenders.delete(e)}},t.prototype.setConfiguration=function(e){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(se(e))},t.prototype.setIceReconnectTimeout=function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},t.prototype.update=function(e){var t=this;return this.bracket("updating",(function(n){if("closed"===t.state)return Promise.resolve();t.transition("updating",n);var r=[];return e.ice&&r.push(t._updateIce(e.ice)),e.description&&r.push(t._updateDescription(e.description)),Promise.all(r).then((function(){t.tryTransition("open",n)}),(function(e){throw t.tryTransition("open",n),e}))}))},t.prototype.getStats=function(){var e=this;return p(this._peerConnection).then((function(t){return function(e,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map((function(t){return ae(e,t)})),remoteVideoTrackStats:t.remoteVideoTrackStats.map((function(t){return ae(e,t)})),localAudioTrackStats:t.localAudioTrackStats.map((function(t){return ie(e,t)})),localVideoTrackStats:t.localVideoTrackStats.map((function(t){return ie(e,t)}))})}(e,t)}))},t}(q);function ie(e,t){var n=e._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:n})}function ae(e,t){var n=o([],a(e._mediaTrackReceivers)).find((function(e){return e.track.id===t.trackId})),r=n?n.id:null;return Object.assign(t,{trackId:r})}function oe(e){if(e.sdp){var t=e.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function se(e){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},e)}function ce(e,t){var n=t.track;return n&&n.kind===e&&"ended"!==n.readyState}function ue(e){!function(e){e._recycledTransceivers.audio=[],e._recycledTransceivers.video=[],e._peerConnection.getTransceivers().forEach((function(t){if(function(e,t){return!e.stopped&&!t._replaceTrackPromises.has(e)&&["inactive","recvonly"].includes(e.direction)}(t,e)){var n=t.receiver.track;e._recycledTransceivers[n.kind].push(t)}}))}(e),function(e){var t=e._peerConnection.localDescription;t&&t.sdp&&C(t.sdp).forEach((function(t){k(t).forEach((function(t,n){return e._localCodecs.add(n)}))}))}(e),function(e){var t=e._peerConnection.remoteDescription;t&&t.sdp&&C(t.sdp).forEach((function(t){var n=t.match(/^a=mid:(.+)$/m);if(n&&n[1]){var r=n[1],i=k(t);e._remoteCodecMaps.set(r,i)}}))}(e),le(e).then((function(){e._handleQueuedPublisherHints()}))}function le(e){var t=e._encodingParameters,n=t.maxAudioBitrate,r=t.maxVideoBitrate,i=new Map([["audio",n],["video",r]]),a=[];return e._peerConnection.getSenders().filter((function(e){return e.track})).forEach((function(t){var n=i.get(t.track.kind),r=t.getParameters();null===n||0===n?function(e){Array.isArray(e.encodings)&&e.encodings.forEach((function(e){return delete e.maxBitrate}))}(r):e._isChromeScreenShareTrack(t.track)?e._log.warn("Not setting maxBitrate for "+t.track.kind+" Track "+t.track.id+" because it appears to be screen share track: "+t.track.label):function(e,t){Z?e.encodings=[{maxBitrate:t}]:e.encodings.forEach((function(e){e.maxBitrate=t}))}(r,n),!Z&&r.encodings.length>0&&("audio"===t.track.kind?r.encodings[0].priority="high":e._isChromeScreenShareTrack(t.track)&&(r.encodings[0].priority="medium"),e._enableDscp&&(r.encodings[0].networkPriority="high"));var o=e._rtpNewSenders.has(t);e._maybeUpdateEncodings(t.track,r.encodings,o),e._rtpNewSenders.delete(t);var s=t.setParameters(r).catch((function(n){e._log.warn("Error while setting encodings parameters for "+t.track.kind+" Track "+t.track.id+": "+(n.message||n.name))}));a.push(s)})),Promise.all(a)}e.exports=re},3088:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(7792).guessBrowser,c=n(8979),u=n(3881),l=n(8522),d=n(7026),p=n(5760).MediaConnectionError,h="firefox"===s(),f=function(e){function t(t,r,i){var a=e.call(this)||this,o=(i=Object.assign({audioContextFactory:h?n(873):null,PeerConnectionV2:c},i)).audioContextFactory?i.audioContextFactory.getOrCreate(a):null,s=o?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(a,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:d.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:o?new u(m(o)):null},_encodingParameters:{value:t},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:r},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),a}return i(t,e),t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._peerConnections.forEach((function(t){return t.setEffectiveAdaptiveSimulcast(e)})),this._preferredCodecs.video.forEach((function(t){"adaptiveSimulcast"in t&&(t.adaptiveSimulcast=e)}))},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._closeAbsentPeerConnections=function(e){var t=new Set(e.map((function(e){return e.id})));return this._peerConnections.forEach((function(e){t.has(e.id)||e._close()})),this},t.prototype._getConfiguration=function(){return this._configurationDeferred.promise},t.prototype._getOrCreate=function(e,t){var n=this,r=this,i=this._peerConnections.get(e);if(!i){var a=this._PeerConnectionV2,o=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},t);try{i=new a(e,this._encodingParameters,this._preferredCodecs,o)}catch(e){throw new p}this._peerConnections.set(i.id,i),i.on("candidates",this.queue.bind(this,"candidates")),i.on("description",this.queue.bind(this,"description")),i.on("trackAdded",this.queue.bind(this,"trackAdded")),i.on("stateChanged",(function e(t){"closed"===t&&(i.removeListener("stateChanged",e),r._dataTrackSenders.forEach((function(e){return i.removeDataTrackSender(e)})),r._mediaTrackSenders.forEach((function(e){return i.removeMediaTrackSender(e)})),r._peerConnections.delete(i.id),r._closedPeerConnectionIds.add(i.id),k(r),w(r))})),i.on("connectionStateChanged",(function(){return k(n)})),i.on("iceConnectionStateChanged",(function(){return w(n)})),this._dataTrackSenders.forEach(i.addDataTrackSender,i),this._mediaTrackSenders.forEach(i.addMediaTrackSender,i),w(this)}return i},t.prototype.close=function(){return this._peerConnections.forEach((function(e){e.close()})),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),w(this),this},t.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then((function(t){var n;do{n=d.makeUUID()}while(e._peerConnections.has(n));return e._getOrCreate(n,t)})).then((function(e){return e.offer()})).then((function(){return e}))},t.prototype.getTrackReceivers=function(){return d.flatMap(this._peerConnections,(function(e){return e.getTrackReceivers()}))},t.prototype.getStates=function(){var e=[];return this._peerConnections.forEach((function(t){var n=t.getState();n&&e.push(n)})),e},t.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=d.defer(),this._peerConnections.forEach((function(t){t.setConfiguration(e)}))),this._configuration=e,this._configurationDeferred.resolve(e),this},t.prototype.setIceReconnectTimeout=function(e){return null===this._sessionTimeout&&(this._peerConnections.forEach((function(t){t.setIceReconnectTimeout(e)})),this._sessionTimeout=e),this},t.prototype.setTrackSenders=function(e){var t=new Set(e.filter((function(e){return"data"===e.kind}))),n=new Set(e.filter((function(e){return e&&("audio"===e.kind||"video"===e.kind)}))),r=function(e,t,n){return{data:g(e,t),media:_(e,n)}}(this,t,n);return this._dataTrackSenders=t,this._mediaTrackSenders=n,function(e,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&e._peerConnections.forEach((function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()}))}(this,r),this},t.prototype.update=function(e,t){var n=this;return void 0===t&&(t=!1),t&&this._closeAbsentPeerConnections(e),this._getConfiguration().then((function(t){return Promise.all(e.map((function(e){return n._closedPeerConnectionIds.has(e.id)?null:n._getOrCreate(e.id,t).update(e)})))})).then((function(){return n}))},t.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map((function(e){return e.getStats().then((function(t){return[e.id,t]}))}))).then((function(e){return new Map(e)}))},t}(l);function m(e){return e.createMediaStreamDestination().stream.getAudioTracks()[0]}function g(e,t){return{add:d.difference(t,e._dataTrackSenders),remove:d.difference(e._dataTrackSenders,t)}}function _(e,t){return{add:d.difference(t,e._mediaTrackSenders),remove:d.difference(e._mediaTrackSenders,t)}}var v,y={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function b(e){return e.length?(v=v||Object.keys(y).reduce((function(e,t){var n;return Object.assign(e,((n={})[y[t]]=t,n))}),{}),e.reduce((function(e,t){return v[Math.max(y[e],y[t])]}))):"new"}function w(e){e._lastIceConnectionState=e.iceConnectionState,e._iceConnectionState=b(o([],a(e._peerConnections.values())).map((function(e){return e.iceConnectionState}))),e.iceConnectionState!==e._lastIceConnectionState&&e.emit("iceConnectionStateChanged")}function k(e){e._lastConnectionState=e.connectionState,e._connectionState=b(o([],a(e._peerConnections.values())).map((function(e){return e.connectionState}))),e.connectionState!==e._lastConnectionState&&e.emit("connectionStateChanged")}e.exports=f},7096:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(71),o=1,s=function(e){function t(t,n){var r=e.call(this,t,"publisher_hints",n)||this;return r.on("ready",(function(e){r._log.debug("publisher_hints transport ready:",e),e.on("message",(function(e){if(r._log.debug("Incoming: ",e),"publisher_hints"===e.type)e.publisher&&e.publisher.hints&&e.publisher.id&&r._processPublisherHints(e.publisher.hints,e.publisher.id);else r._log.warn("Unknown message type: ",e.type)}))})),r}return i(t,e),t.prototype.sendTrackReplaced=function(e){var t=e.trackSid;if(this._transport){var n={type:"client_reset",track:t,id:o++};this._log.debug("Outgoing: ",n),this._transport.publish(n)}},t.prototype.sendHintResponse=function(e){var t=e.id,n=e.hints;if(this._transport){var r={type:"publisher_hints",id:t,hints:n};this._log.debug("Outgoing: ",r),this._transport.publish(r)}},t.prototype._processPublisherHints=function(e,t){try{this.emit("updated",e,t)}catch(e){this._log.error("error processing hints:",e)}},t}(a);e.exports=s},8368:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){var t=e.call(this)||this;return Object.defineProperties(t,{_revision:{value:1,writable:!0}}),t}return i(t,e),t.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.is_recording))},t}(n(1081));e.exports=a},3080:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(541),o=n(806),s=function(e){function t(t,n,r,i,a,s){var c=e.call(this,t.sid,t.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:o},s),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(e,t){return r(e,t)}},updateTrackRenderHint:{value:function(e,t){return i(e,t)}},clearTrackHint:{value:function(e){return a(e)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(t)}return i(t,e),t.prototype._getOrCreateTrack=function(e){var t=this._RemoteTrackPublicationV2,n=this.tracks.get(e.sid);n||(n=new t(e,this._getInitialTrackSwitchOffState(e.sid)),this.addTrack(n));return n},t.prototype.update=function(e){var t=this;if(null!==this.revision&&e.revision<=this.revision)return this;this._revision=e.revision;var n=new Set;switch(e.tracks.forEach((function(e){var r=t._getOrCreateTrack(e);r.update(e),n.add(r)})),this.tracks.forEach((function(e){n.has(e)||t.removeTrack(e)})),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},t}(a);e.exports=s},806:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){return e.call(this,t.sid,t.name,t.kind,t.enabled,t.priority,n)||this}return i(t,e),t.prototype.update=function(e){return this.enable(e.enabled),this.setPriority(e.priority),this},t}(n(7445));e.exports=a},9877:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(71),o=n(8993),s=n(7026).isDeepEqual,c=1,u=function(e){function t(t,n){var r=e.call(this,t,"render_hints",n)||this;return Object.defineProperties(r,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new o((function(){r._sendAllHints(),r._responseTimer.setDelay(2*r._responseTimer.delay)}),2e3,!1)}}),r.on("ready",(function(e){e.on("message",(function(e){if(r._log.debug("Incoming: ",e),"render_hints"===e.type)r._processHintResults(e&&e.subscriber&&e.subscriber.hints||[]);else r._log.warn("Unknown message type: ",e.type)})),r._sendAllHints()})),r}return i(t,e),t.prototype._sendAllHints=function(){var e=this;Array.from(this._trackSidsToRenderHints.keys()).forEach((function(t){var n=e._trackSidsToRenderHints.get(t);n.renderDimensions&&(n.isDimensionDirty=!0),"enabled"in n&&(n.isEnabledDirty=!0)})),this._sendHints()},t.prototype._processHintResults=function(e){var t=this;this._responseTimer.clear(),this._responseTimer.setDelay(2e3),e.forEach((function(e){"OK"!==e.result&&t._log.debug("Server error processing hint:",e)})),this._sendHints()},t.prototype._sendHints=function(){var e=this;if(this._transport&&!this._responseTimer.isSet){var t=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach((function(n){var r=e._trackSidsToRenderHints.get(n);if(r.isEnabledDirty||r.isDimensionDirty){var i={track:n};r.isEnabledDirty&&(i.enabled=r.enabled,r.isEnabledDirty=!1),r.isDimensionDirty&&(i.render_dimensions=r.renderDimensions,r.isDimensionDirty=!1),t.push(i)}})),t.length>0){var n={type:"render_hints",subscriber:{id:c++,hints:t}};this._log.debug("Outgoing: ",n),this._transport.publish(n),this._responseTimer.start()}}},t.prototype.setTrackHint=function(e,t){var n=this._trackSidsToRenderHints.get(e)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in t&&n.enabled!==t.enabled&&(n.enabled=!!t.enabled,n.isEnabledDirty=!0),t.renderDimensions&&!s(t.renderDimensions,n.renderDimensions)&&(n.renderDimensions=t.renderDimensions,n.isDimensionDirty=!0),this._trackSidsToRenderHints.set(e,n),this._sendHints()},t.prototype.clearTrackHint=function(e){this._trackSidsToRenderHints.delete(e)},t}(a);e.exports=u},9027:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=n(9020),s=n(7944),c=n(1590),u=n(8368),l=n(755),d=n(3080),p=n(8300),h=n(2874),f=n(4407),m=n(9877),g=n(7096),_=n(7026),v=_.constants.DEFAULT_SESSION_TIMEOUT_SEC,y=_.createBandwidthProfilePayload,b=_.defer,w=_.difference,k=_.filterObject,x=_.flatMap,S=_.oncePerTick,T=n(8745),C=n(5760).createTwilioError,E=function(e){function t(t,n,r,i,a){var l=this;n.options=Object.assign({session_timeout:v},n.options),a=Object.assign({DominantSpeakerSignaling:o,NetworkQualityMonitor:s,NetworkQualitySignaling:c,RecordingSignaling:u,RemoteParticipantV2:d,TrackPrioritySignaling:h,TrackSwitchOffSignaling:f,bandwidthProfile:null,sessionTimeout:1e3*n.options.session_timeout,statsPublishIntervalMs:1e4},a),t.setBandwidthProfile(a.bandwidthProfile);var _=n.options,y=_.signaling_region,b=_.audio_processors,T=void 0===b?[]:b;t.setSignalingRegion(y),T.includes("krisp")&&T.push("rnnoise"),t.setAudioProcessors(T),i.setIceReconnectTimeout(a.sessionTimeout);var C=function(e){return l._getTrackReceiver(e)},E=(l=e.call(this,t,n.sid,n.name,a)||this)._log;return Object.defineProperties(l,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:a.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:t.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:t.networkQualityConfiguration},_peerConnectionManager:{value:i},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:a.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new a.DominantSpeakerSignaling(C,{log:E})},_networkQualitySignaling:{value:new a.NetworkQualitySignaling(C,t.networkQualityConfiguration,{log:E})},_renderHintsSignaling:{value:new m(C,{log:E})},_publisherHintsSignaling:{value:new g(C,{log:E})},_trackPrioritySignaling:{value:new a.TrackPrioritySignaling(C,{log:E})},_trackSwitchOffSignaling:{value:new a.TrackSwitchOffSignaling(C,{log:E})},_pendingSwitchOffStates:{value:new Map},_transport:{value:r},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),l._initTrackSwitchOffSignaling(),l._initDominantSpeakerSignaling(),l._initNetworkQualityMonitorSignaling(),l._initPublisherHintSignaling(),function(e,t){var n=S((function(){e._publishNewLocalParticipantState()})),r=S((function(){var n=x(t.tracks,(function(e){return e.trackTransceiver}));e._peerConnectionManager.setTrackSenders(n)}));t.on("trackAdded",r),t.on("trackRemoved",r),t.on("updated",n),e.on("stateChanged",(function i(a){"disconnected"===a&&(t.removeListener("trackAdded",r),t.removeListener("trackRemoved",r),t.removeListener("updated",n),e.removeListener("stateChanged",i),t.disconnect())})),e.on("signalingConnectionStateChanged",(function(){var t=e.localParticipant,n=e.signalingConnectionState,r=t.identity,i=t.sid;switch(n){case"connected":t.connect(i,r);break;case"reconnecting":t.reconnecting()}}))}(l,t),function(e,t){t.on("description",(function(t){e._publishPeerConnectionState(t)})),t.dequeue("description"),t.on("candidates",(function(t){e._publishPeerConnectionState(t)})),t.dequeue("candidates"),t.on("trackAdded",e._addTrackReceiver.bind(e)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(e._addTrackReceiver,e),t.on("connectionStateChanged",(function(){e.emit("connectionStateChanged")})),t.on("iceConnectionStateChanged",(function(){e.emit("iceConnectionStateChanged"),"failed"===e.iceConnectionState&&(null!==e.localParticipant.networkQualityLevel&&e.localParticipant.setNetworkQualityLevel(0),e.participants.forEach((function(e){null!==e.networkQualityLevel&&e.setNetworkQualityLevel(0)})))}))}(l,i),function(e,t){t.on("message",e._update.bind(e)),t.on("stateChanged",(function n(r,i){"disconnected"===r&&("disconnected"!==e.state&&e._disconnect(i),t.removeListener("stateChanged",n)),e.emit("signalingConnectionStateChanged")}))}(l,r),function(e,t,n){var r=new Map,i=!1,a=setInterval((function(){e.getStats().then((function(e){i=!i,e.forEach((function(e,n){var a=new p(n,e,!0);t.publishEvent("quality","stats-report","info",{audioTrackStats:a.remoteAudioTrackStats.map((function(t,n){return R(t,e.remoteAudioTrackStats[n],r)})),localAudioTrackStats:a.localAudioTrackStats.map((function(t,n){return O(t,e.localAudioTrackStats[n],r)})),localVideoTrackStats:a.localVideoTrackStats.map((function(t,n){return O(t,e.localVideoTrackStats[n],r)})),peerConnectionId:a.peerConnectionId,videoTrackStats:a.remoteVideoTrackStats.map((function(t,n){return R(t,e.remoteVideoTrackStats[n],r)}))});var o=x(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],(function(e){return a[e].map((function(e){var t=e.ssrc;return e.trackSid+"+"+t}))}));if(w(Array.from(r.keys()),o).forEach((function(e){return r.delete(e)})),i){var s=function(e,t){return e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},k(e||{},null)),e.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},k(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},k(e.remoteCandidate||{},null)),e}(e.activeIceCandidatePair,a.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair","info",s)}}))}),(function(){}))}),n);e.on("stateChanged",(function t(n){"disconnected"===n&&(clearInterval(a),e.removeListener("stateChanged",t))}))}(l,r,a.statsPublishIntervalMs),l._update(n),l._peerConnectionManager.setEffectiveAdaptiveSimulcast(l._publisherHintsSignaling.isSetup),l}return i(t,e),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._deleteTrackReceiverDeferred=function(e){return this._trackReceiverDeferreds.delete(e)},t.prototype._getOrCreateTrackReceiverDeferred=function(e){var t=this._trackReceiverDeferreds.get(e)||b(),n=this._peerConnectionManager.getTrackReceivers().find((function(t){return t.id===e&&"ended"!==t.readyState}));return n?t.resolve(n):this._trackReceiverDeferreds.set(e,t),t},t.prototype._addTrackReceiver=function(e){return this._getOrCreateTrackReceiverDeferred(e.id).resolve(e),this},t.prototype._disconnect=function(t){var n=e.prototype._disconnect.call(this,t);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach((function(e){e.publishFailed(t||new Error("LocalParticipant disconnected"))})),n},t.prototype._getTrackReceiver=function(e){var t=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then((function(n){return t._deleteTrackReceiverDeferred(e),n}))},t.prototype._getInitialTrackSwitchOffState=function(e){var t=this._pendingSwitchOffStates.get(e)||!1;return this._pendingSwitchOffStates.delete(e),t&&this._log.warn("["+e+"] was initially switched off! "),t},t.prototype._getTrackSidsToTrackSignalings=function(){var e=x(this.participants,(function(e){return Array.from(e.tracks)}));return new Map(e)},t.prototype._getOrCreateRemoteParticipant=function(e){var t=this,n=this._RemoteParticipantV2,r=this.participants.get(e.sid),i=this;return r||((r=new n(e,(function(e){return t._getInitialTrackSwitchOffState(e)}),(function(e,n){return t._trackPrioritySignaling.sendTrackPriorityUpdate(e,"subscribe",n)}),(function(e,n){return t._renderHintsSignaling.setTrackHint(e,n)}),(function(e){return t._renderHintsSignaling.clearTrackHint(e)}))).on("stateChanged",(function e(t){"disconnected"===t&&(r.removeListener("stateChanged",e),i.participants.delete(r.sid),i._disconnectedParticipantRevisions.set(r.sid,r.revision))})),this.connectParticipant(r)),r},t.prototype._getState=function(){return{participant:this.localParticipant.getState()}},t.prototype._maybeAddBandwidthProfile=function(e){var t=this.localParticipant,n=t.bandwidthProfile,r=t.bandwidthProfileRevision;return n&&this._lastBandwidthProfileRevision<r?(this._lastBandwidthProfileRevision=r,Object.assign({bandwidth_profile:y(n)},e)):e},t.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},t.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},t.prototype._update=function(e){var t=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach((function(e){e.id?(t._subscriptionFailures.delete(e.sid),t._subscribed.set(e.sid,e.id)):e.error&&!t._subscriptionFailures.has(e.sid)&&t._subscriptionFailures.set(e.sid,e.error)}));var n=new Set(e.subscribed.tracks.filter((function(e){return!!e.id})).map((function(e){return e.sid})));this._subscribed.forEach((function(e,r){n.has(r)||t._subscribed.delete(r)}))}var r,i,a=new Set;return(e.participants||[]).forEach((function(e){if(e.sid!==t.localParticipant.sid){var n=t._disconnectedParticipantRevisions.get(e.sid);if(!(n&&e.revision<=n)){n&&t._disconnectedParticipantRevisions.delete(e.sid);var r=t._getOrCreateRemoteParticipant(e);r.update(e),a.add(r)}}})),"synced"===e.type&&this.participants.forEach((function(e){a.has(e)||e.disconnect()})),i=(r=this)._getTrackSidsToTrackSignalings(),r._subscriptionFailures.forEach((function(e,t){var n=i.get(t);n&&(r._subscriptionFailures.delete(t),n.subscribeFailed(C(e.code,e.message)))})),i.forEach((function(e){var t=r._subscribed.get(e.sid);(!t||e.isSubscribed&&e.trackTransceiver.id!==t)&&e.setTrackTransceiver(null),t&&r._getTrackReceiver(t).then((function(t){return e.setTrackTransceiver(t)}))})),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,"synced"===e.type),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach((function(e){e.sid&&t._published.set(e.id,e.sid)})),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach((function(t){var n=t.channel;!t.isSetup&&e.media_signaling&&e.media_signaling[n]&&e.media_signaling[n].transport&&"data-channel"===e.media_signaling[n].transport.type&&t.setup(e.media_signaling[n].transport.label)})),"warning"===e.type&&e.states&&e.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=e.states.revision,this.localParticipant.updateMediaStates(e.states)),this},t.prototype._initPublisherHintSignaling=function(){var e=this;this._publisherHintsSignaling.on("updated",(function(t,n){Promise.all(t.map((function(t){return e.localParticipant.setPublisherHint(t.track,t.encodings).then((function(e){return{track:t.track,result:e}}))}))).then((function(t){e._publisherHintsSignaling.sendHintResponse({id:n,hints:t})}))}));var t=function(t){"video"===t.kind&&t.trackTransceiver.on("replaced",(function(){e._publisherHintsSignaling.sendTrackReplaced({trackSid:t.sid})}))};Array.from(this.localParticipant.tracks.values()).forEach((function(e){return t(e)})),this.localParticipant.on("trackAdded",(function(e){return t(e)}))},t.prototype._initTrackSwitchOffSignaling=function(){var e=this;this._trackSwitchOffSignaling.on("updated",(function(t,n){try{e._log.debug("received trackSwitch: ",{tracksOn:n,tracksOff:t});var r=new Map;n.forEach((function(e){return r.set(e,!0)})),t.forEach((function(t){r.get(t)&&e._log.warn(t+" is DUPLICATED in both tracksOff and tracksOn list"),r.set(t,!1)})),e.participants.forEach((function(e){e.tracks.forEach((function(e){var t=r.get(e.sid);void 0!==t&&(e.setSwitchedOff(!t),r.delete(e.sid))}))})),r.forEach((function(t,n){return e._pendingSwitchOffStates.set(n,!t)}))}catch(t){e._log.error("error processing track switch off:",t)}}))},t.prototype._initDominantSpeakerSignaling=function(){var e=this;this._dominantSpeakerSignaling.on("updated",(function(){return e.setDominantSpeaker(e._dominantSpeakerSignaling.loudestParticipantSid)}))},t.prototype._initNetworkQualityMonitorSignaling=function(){var e=this;this._networkQualitySignaling.on("ready",(function(){var t=new e._NetworkQualityMonitor(e._peerConnectionManager,e._networkQualitySignaling);e._networkQualityMonitor=t,t.on("updated",(function(){"failed"!==e.iceConnectionState&&(e.localParticipant.setNetworkQualityLevel(t.level,t.levels),e.participants.forEach((function(e){var n=t.remoteLevels.get(e.sid);n&&e.setNetworkQualityLevel(n.level,n)})))})),t.start()})),this._networkQualitySignaling.on("teardown",(function(){return e._teardownNetworkQualityMonitor()}))},t.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},t.prototype.getStats=function(){var e=this;return this._peerConnectionManager.getStats().then((function(t){return new Map(Array.from(t).map((function(t){var n=a(t,2),r=n[0],i=n[1];return[r,Object.assign({},i,{localAudioTrackStats:N(e,i.localAudioTrackStats),localVideoTrackStats:N(e,i.localVideoTrackStats),remoteAudioTrackStats:A(e,i.remoteAudioTrackStats),remoteVideoTrackStats:A(e,i.remoteVideoTrackStats)})]})))}))},t}(l);function I(e,t){return t.reduce((function(t,n){var r=e.get(n.trackId);return r?[Object.assign({},n,{trackSid:r})].concat(t):t}),[])}function N(e,t){return I(e._published,t)}function A(e,t){var n=new Map(Array.from(e._subscribed.entries()).map((function(e){var t=a(e,2),n=t[0];return[t[1],n]})));return I(n,t)}function O(e,t,n){var r=t.framesEncoded,i=t.packetsSent,a=t.totalEncodeTime,o=t.totalPacketSendDelay,s=Object.assign({},e),c=e.trackSid+"+"+e.ssrc,u=n.get(c)||new Map;if("number"==typeof a&&"number"==typeof r){var l=u.get("avgEncodeDelay")||new T;l.putSample(1e3*a,r),s.avgEncodeDelay=Math.round(l.get()),u.set("avgEncodeDelay",l)}if("number"==typeof o&&"number"==typeof i){var d=u.get("avgPacketSendDelay")||new T;d.putSample(1e3*o,i),s.avgPacketSendDelay=Math.round(d.get()),u.set("avgPacketSendDelay",d)}return n.set(c,u),s}function R(e,t,n){var r=t.estimatedPlayoutTimestamp,i=t.framesDecoded,a=t.jitterBufferDelay,o=t.jitterBufferEmittedCount,s=t.totalDecodeTime,c=Object.assign({},e),u=e.trackSid+"+"+e.ssrc,l=n.get(u)||new Map;if("number"==typeof r&&(c.estimatedPlayoutTimestamp=r),"number"==typeof i&&"number"==typeof s){var d=l.get("avgDecodeDelay")||new T;d.putSample(1e3*s,i),c.avgDecodeDelay=Math.round(d.get()),l.set("avgDecodeDelay",d)}if("number"==typeof a&&"number"==typeof o){var p=l.get("avgJitterBufferDelay")||new T;p.putSample(1e3*a,o),c.avgJitterBufferDelay=Math.round(p.get()),l.set("avgJitterBufferDelay",p)}return n.set(u,l),c}e.exports=E},2874:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,"track_priority",n)||this;return Object.defineProperties(r,{_enqueuedPriorityUpdates:{value:new Map}}),r.on("ready",(function(e){Array.from(r._enqueuedPriorityUpdates.keys()).forEach((function(t){e.publish({type:"track_priority",track:t,subscribe:r._enqueuedPriorityUpdates.get(t)})}))})),r}return i(t,e),t.prototype.sendTrackPriorityUpdate=function(e,t,n){if("subscribe"!==t)throw new Error("only subscribe priorities are supported, found: "+t);this._enqueuedPriorityUpdates.set(e,n),this._transport&&this._transport.publish({type:"track_priority",track:e,subscribe:n})},t}(n(71));e.exports=a},4407:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,"track_switch_off",n)||this;return r.on("ready",(function(e){e.on("message",(function(e){if("track_switch_off"===e.type)r._setTrackSwitchOffUpdates(e.off||[],e.on||[])}))})),r}return i(t,e),t.prototype._setTrackSwitchOffUpdates=function(e,t){this.emit("updated",e,t)},t}(n(71));e.exports=a},2782:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(9643),o=n(6249),s=n(1194),c=n(3427).reconnectBackoffConfig,u=n(8993),l=n(3427),d=l.SDK_NAME,p=l.SDK_VERSION,h=l.SDP_FORMAT,f=n(7026),m=f.createBandwidthProfilePayload,g=f.createMediaSignalingPayload,_=f.createMediaWarningsPayload,v=f.createSubscribePayload,y=f.getUserAgent,b=f.isNonArrayObject,w=n(5760),k=w.createTwilioError,x=w.RoomCompletedError,S=w.SignalingConnectionError,T=w.SignalingServerBusyError,C={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},E=function(e){function t(t,n,r,i,a,u){var l;return u=Object.assign({Backoff:s,TwilioConnection:o,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:y()},u),l=e.call(this,"connecting",C)||this,Object.defineProperties(l,{_accessToken:{value:n},_automaticSubscription:{value:u.automaticSubscription},_bandwidthProfile:{value:u.bandwidthProfile},_dominantSpeaker:{value:u.dominantSpeaker},_adaptiveSimulcast:{value:u.adaptiveSimulcast},_eventObserver:{value:u.eventObserver,writable:!1},_renderHints:{value:u.renderHints},_iceServersStatus:{value:Array.isArray(u.iceServers)?"overrode":"acquire"},_localParticipant:{value:r},_name:{value:t},_networkQuality:{value:b(u.networkQuality)||u.networkQuality},_notifyWarnings:{value:u.notifyWarnings},_options:{value:u},_peerConnectionManager:{value:i},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new u.Backoff(c)},_session:{value:null,writable:!0},_trackPriority:{value:u.trackPriority},_trackSwitchOff:{value:u.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:u.userAgent},_wsServer:{value:a}}),function(e){function t(){if("disconnected"!==e.state){e._twilioConnection&&e._twilioConnection.removeListener("message",r);var t=e._iceServersStatus,i=e._options,a=e._wsServer,o=e.state,s=i.TwilioConnection,c=new s(a,Object.assign({helloBody:"connecting"===o&&"acquire"===t?e._createIceMessage():e._createConnectOrSyncOrDisconnectMessage()},i));c.once("close",(function(e){e===s.CloseReason.LOCAL?n():n(new Error(e))})),c.on("message",r),e._twilioConnection=c}}function n(n){if("disconnected"!==e.state)if(n){var r=e._getReconnectTimer();if(r)"connected"===e.state&&e.preempt("syncing"),r.then(t);else{var i=n.message===o.CloseReason.BUSY?new T:new S;e.disconnect(i)}}else e.disconnect()}function r(t){if("disconnected"!==e.state)if("error"!==t.type)switch(e.state){case"connected":switch(t.type){case"connected":case"synced":case"update":case"warning":return void e.emit("message",t);case"disconnected":return void e.disconnect("completed"===t.status?new x:null);default:return}case"connecting":switch(t.type){case"iced":return void e._options.onIced(t.ice_servers).then((function(){e._sendConnectOrSyncOrDisconnectMessage()}));case"connected":return e._setSession(t.session,t.options.session_timeout),e.emit("connected",t),void e.preempt("connected");case"synced":case"update":return void e._updatesReceived.push(t);case"disconnected":return void e.disconnect("completed"===t.status?new x:null);default:return}case"syncing":switch(t.type){case"connected":case"update":return void e._updatesReceived.push(t);case"synced":return e._clearReconnectTimer(),e.emit("message",t),void e.preempt("connected");case"disconnected":return void e.disconnect("completed"===t.status?new x:null);default:return}default:return}else e.disconnect(k(t.code,t.message))}e.on("stateChanged",(function t(n){switch(n){case"connected":var i=e._updatesToSend.splice(0);return i.length&&e.publish(function(e){return e.reduce((function(e,t){return(!e.participant&&t.participant||e.participant&&t.participant&&t.participant.revision>e.participant.revision)&&(e.participant=t.participant),!e.peer_connections&&t.peer_connections?e.peer_connections=I(t.peer_connections):e.peer_connections&&t.peer_connections&&(e.peer_connections=I(e.peer_connections.concat(t.peer_connections))),e}),{})}(i)),void e._updatesReceived.splice(0).forEach((function(t){return e.emit("message",t)}));case"disconnected":return e._twilioConnection.removeListener("message",r),void e.removeListener("stateChanged",t);default:return}}));var i=e._options,a=e._iceServersStatus,s=i.iceServers,c=i.onIced;"overrode"===a?c(s).then(t):t()}(l),l}return i(t,e),t.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var e={connecting:"connect",syncing:"sync"}[this.state],t={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:2};return"connect"===t.type?(t.ice_servers=this._iceServersStatus,t.publisher={name:d,sdk_version:p,user_agent:this._userAgent},this._bandwidthProfile&&(t.bandwidth_profile=m(this._bandwidthProfile)),this._notifyWarnings&&(t.participant.media_warnings=_(this._notifyWarnings)),t.media_signaling=g(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),t.subscribe=v(this._automaticSubscription),t.format=h,t.token=this._accessToken):"sync"===t.type?(t.session=this._session,t.token=this._accessToken):"update"===t.type&&(t.session=this._session),t},t.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},t.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)},t.prototype.disconnect=function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},t.prototype.publish=function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;default:return!1}},t.prototype.publishEvent=function(e,t,n,r){this._eventObserver.emit("event",{group:e,name:t,level:n,payload:r})},t.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},t.prototype._setSession=function(e,t){this._session=e,this._sessionTimeoutMS=1e3*t},t.prototype._getReconnectTimer=function(){var e=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new u((function(){e._sessionTimer&&(e._sessionTimeoutMS=0)}),this._sessionTimeoutMS)),new Promise((function(t){e._reconnectBackoff.backoff(t)})))},t.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},t}(a);function I(e){return Array.from(e.reduce((function(e,t){var n=e.get(t.id)||t;return(!n.description&&t.description||n.description&&t.description&&t.description.revision>n.description.revision)&&(n.description=t.description),(!n.ice&&t.ice||n.ice&&t.ice&&t.ice.revision>n.ice.revision)&&(n.ice=t.ice),e.set(n.id,n),e}),new Map).values())}e.exports=E},9643:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(29).EventEmitter,c=n(7026),u=function(e){function t(t,n){var r,i=e.call(this)||this,a=null,o=t;return n=function(e){var t=new Map;for(var n in e)t.set(n,new Set(e[n]));return t}(n),Object.defineProperties(i,{_lock:{get:function(){return a},set:function(e){a=e}},_reachableStates:{value:(r=n,Array.from(r.keys()).reduce((function(e,t){return e.set(t,d(r,t))}),new Map))},_state:{get:function(){return o},set:function(e){o=e}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==a}},state:{enumerable:!0,get:function(){return o}}}),i.on("stateChanged",(function(e){i._whenDeferreds.forEach((function(t){t.when(e,t.resolve,t.reject)}))})),i}return i(t,e),t.prototype._whenPromise=function(e){var t=this;if("function"!=typeof e)return Promise.reject(new Error("when() executor must be a function"));var n=c.defer();return n.when=e,this._whenDeferreds.add(n),n.promise.then((function(e){return t._whenDeferreds.delete(n),e}),(function(e){throw t._whenDeferreds.delete(n),e}))},t.prototype.bracket=function(e,t){var n,r=this;function i(e){if(r.hasLock(n)&&r.releaseLockCompletely(n),e)throw e}return this.takeLock(e).then((function(e){return t(n=e)})).then((function(e){return i(),e}),i)},t.prototype.hasLock=function(e){return this._lock===e},t.prototype.preempt=function(e,t,n){if(!l(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var r;this.isLocked&&(r=this._lock,this._lock=null);var i=null;t&&(i=this.takeLockSync(t));var a=i?null:this.takeLockSync("preemption");return this.transition(e,i||a,n),r&&r.resolve(),a&&this.releaseLock(a),i},t.prototype.releaseLock=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");0===e.depth?(this._lock=null,e.resolve()):e.depth--},t.prototype.releaseLockCompletely=function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");e.depth=0,this._lock=null,e.resolve()},t.prototype.takeLock=function(e){var t=this;if("object"==typeof e){var n=e;return new Promise((function(e){e(t.takeLockSync(n))}))}var r=e;if(this.isLocked){var i=this.takeLock.bind(this,r);return this._lock.promise.then(i)}return Promise.resolve(this.takeLockSync(r))},t.prototype.takeLockSync=function(e){var t="string"==typeof e?null:e,n=t?t.name:e;if(t&&!this.hasLock(t)||!t&&this.isLocked)throw new Error("Could not take the lock for "+n+" because the lock for "+this._lock.name+" was not released");if(t)return t.depth++,t;var r=function(e){var t=c.defer();return t.name=e,t.depth=0,t}(n);return this._lock=r,r},t.prototype.transition=function(e,t,n){if(n=n||[],this.isLocked){if(!t)throw new Error("You must provide the key in order to transition");if(!this.hasLock(t))throw new Error("Could not transition using the key for "+t.name+" because "+this._lock.name+" has the lock")}else if(t)throw new Error("Key provided for "+t.name+", but the StateMachine was not locked (possibly due to preemption)");if(!l(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,o([],a(["stateChanged",e].concat(n))))},t.prototype.tryTransition=function(e,t,n){try{this.transition(e,t,n)}catch(e){return!1}return!0},t.prototype.when=function(e){var t=this;return this.state===e?Promise.resolve(this):l(this._reachableStates,this.state,e)?this._whenPromise((function(n,r,i){n===e?r(t):l(t._reachableStates,n,e)||i(p(n,e))})):Promise.reject(p(this.state,e))},t}(s);function l(e,t,n){return e.get(t).has(n)}function d(e,t,n){return n=n||new Set,e.get(t).forEach((function(t){n.has(t)||(n.add(t),d(e,t,n).forEach(n.add,n))})),n}function p(e,t){return new Error('"'+t+'" cannot be reached from "'+e+'"')}e.exports=u},2050:e=>{"use strict";e.exports=function(e){return(e=e.filter((function(e){return"number"==typeof e}))).length<1?void 0:e.reduce((function(e,t){return t+e}))/e.length}},5212:e=>{"use strict";var t=function(){function e(e,t,n,r){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:t},rtt:{enumerable:!0,value:r},send:{enumerable:!0,value:e}})}return e.of=function(t,n){var r=(n.timestamp-t.timestamp)/1e3,i=n.bytesSent-t.bytesSent,a=n.bytesReceived-t.bytesReceived;return new e(r>0?i/r*8:0,r>0?a/r*8:0,n.availableOutgoingBitrate,n.currentRoundTripTime)},e}();e.exports=t},928:(e,t,n)=>{"use strict";var r=n(5212),i=function(){function e(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new r(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(e){var t=this.lastStats;if(this.lastStats=e,t){var n=t.id===e.id?r.of(t,e):new r(0,0);this.lastReport=n}return this.lastReport},e}();e.exports=i},8324:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return Object.defineProperties(i,{audioLevel:{value:"number"==typeof n.audioInputLevel?n.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),i}return i(t,e),t}(n(4464));e.exports=a},4464:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return Object.defineProperties(i,{bytesSent:{value:"number"==typeof n.bytesSent?n.bytesSent:r?0:null,enumerable:!0},packetsSent:{value:"number"==typeof n.packetsSent?n.packetsSent:r?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof n.roundTripTime?n.roundTripTime:r?0:null,enumerable:!0}}),i}return i(t,e),t}(n(6567));e.exports=a},3109:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,a=null;"number"==typeof n.frameWidthInput&&"number"==typeof n.frameHeightInput&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var o=null;return"number"==typeof n.frameWidthSent&&"number"==typeof n.frameHeightSent&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(i,{captureDimensions:{value:a,enumerable:!0},dimensions:{value:o,enumerable:!0},captureFrameRate:{value:"number"==typeof n.frameRateInput?n.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateSent?n.frameRateSent:null,enumerable:!0}}),i}return i(t,e),t}(n(4464));e.exports=a},1211:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n(7293));e.exports=a},6478:e=>{"use strict";var t=function(e){var t=e.actual,n=void 0===t?null:t,r=e.available,i=void 0===r?null:r,a=e.level,o=void 0===a?null:a;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:i,enumerable:!0},level:{value:o,enumerable:!0}})};e.exports=t},2611:e=>{"use strict";var t=function(e){var t=e.fractionLost,n=void 0===t?null:t,r=e.level,i=void 0===r?null:r;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:i,enumerable:!0}})};e.exports=t},4107:e=>{"use strict";var t=function(e){var t=e.jitter,n=void 0===t?null:t,r=e.rtt,i=void 0===r?null:r,a=e.level,o=void 0===a?null:a;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:i,enumerable:!0},level:{value:o,enumerable:!0}})};e.exports=t},7293:(e,t,n)=>{"use strict";var r=n(3769),i=n(7039),a=function(e){var t=e.send,n=e.recv,a=e.sendStats,o=void 0===a?null:a,s=e.recvStats,c=void 0===s?null:s;Object.defineProperties(this,{send:{value:t,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:o?new r(o):null,enumerable:!0},recvStats:{value:c?new i(c):null,enumerable:!0}})};e.exports=a},7039:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n(854));e.exports=a},854:(e,t,n)=>{"use strict";var r=n(6478),i=n(2611),a=n(4107),o=function(e){var t=e.bandwidth,n=void 0===t?null:t,o=e.fractionLost,s=void 0===o?null:o,c=e.latency,u=void 0===c?null:c;Object.defineProperties(this,{bandwidth:{value:n?new r(n):null,enumerable:!0},fractionLost:{value:s?new i(s):null,enumerable:!0},latency:{value:u?new a(u):null,enumerable:!0}})};e.exports=o},3769:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n(854));e.exports=a},8551:(e,t,n)=>{"use strict";var r=n(1211),i=n(8776),a=function(e){var t=e.level,n=e.audio,a=e.video;Object.defineProperties(this,{level:{value:t,enumerable:!0},audio:{value:n?new r(n):null,enumerable:!0},video:{value:a?new i(a):null,enumerable:!0}})};e.exports=a},8776:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(n(7293));e.exports=a},5403:(e,t,n)=>{"use strict";var r=n(7634),i=n(122),a=function(){function e(e,t,n){Object.defineProperties(this,{ice:{enumerable:!0,value:e},audio:{enumerable:!0,value:t},video:{enumerable:!0,value:n}})}return e.prototype.summarize=function(){var e=this.audio.send.concat(this.video.send),t=i.summarize(e),n=this.audio.recv.concat(this.video.recv),a=r.summarize(n);return{ice:this.ice,send:t,recv:a,audio:{send:i.summarize(this.audio.send),recv:r.summarize(this.audio.recv)},video:{send:i.summarize(this.video.send),recv:r.summarize(this.video.recv)}}},e}();e.exports=a},837:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=n(7792).guessBrowser,s=n(928),c=n(5403),u=n(2954),l=n(8786),d=function(){function e(e){Object.defineProperties(this,{pc:{enumerable:!0,value:e},ice:{enumerable:!0,value:new s},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return e.prototype.next=function(){var e,t,n,a=this;return("firefox"===o()?(t=(e=this).pc.getTransceivers().filter((function(e){return e.currentDirection&&e.currentDirection.match(/send/)&&e.sender.track})).map((function(e){return e.sender})),n=e.pc.getTransceivers().filter((function(e){return e.currentDirection&&e.currentDirection.match(/recv/)})).map((function(e){return e.receiver})),Promise.all([p(t),p(n),e.pc.getStats()]).then((function(t){var n=r(t,3),i=n[0],a=n[1],o=n[2],s=f(e),c=v(e);i.forEach((function(t,n){return b(e,t,c,n)})),k(s,c);var u=m(e),l=y(e);a.forEach((function(t,n){return w(e,t,l,n)})),k(u,l),x(e.ice,o)}))):function(e){return e.pc.getStats().then((function(t){var n=f(e),r=v(e);b(e,t,r),k(n,r);var i=m(e),a=y(e);w(e,t,a),k(i,a),x(e.ice,t)}))}(this)).then((function(){var e=i([],r(a.audio.send.values())),t=i([],r(a.video.send.values())),n=i([],r(a.audio.recv.values())),o=i([],r(a.video.recv.values())),s=new c(a.ice.lastReport,{send:e.map((function(e){return e.lastReport})).filter((function(e){return e})),recv:n.map((function(e){return e.lastReport})).filter((function(e){return e}))},{send:t.map((function(e){return e.lastReport})).filter((function(e){return e})),recv:o.map((function(e){return e.lastReport})).filter((function(e){return e}))});return a.lastReport=s,s}))},e}();function p(e){return Promise.all(e.map((function(e){var t=e.track.id;return e.getStats().then((function(e){var n,r;try{for(var i=a(e.values()),o=i.next();!o.done;o=i.next()){var s=o.value;"inbound-rtp"===s.type&&(s.id=t+"-"+s.id)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[t,e]}))}))).then((function(e){return new Map(e)}))}function h(e,t,n,r,i){var a=t[r.mediaType];if(!i){var o=n.get(r.trackId);o&&(i=o.trackIdentifier)}if(a&&i){if(a.has(r.id))return a.get(r.id);var s=new e(i,r);a.set(r.id,s)}return null}function f(e){return{audio:e.audio.send,video:e.video.send}}function m(e){return{audio:e.audio.recv,video:e.video.recv}}function g(e,t,n,r){return h(l,f(e),t,n,r)}function _(e,t,n,r){return h(u,m(e),t,n,r)}function v(e){return{audio:new Set(e.audio.send.keys()),video:new Set(e.video.send.keys())}}function y(e){return{audio:new Set(e.audio.recv.keys()),video:new Set(e.video.recv.keys())}}function b(e,t,n,r){var i,s;try{for(var c=a(t.values()),u=c.next();!u.done;u=c.next()){var l=u.value;if("outbound-rtp"===l.type&&!l.isRemote){if("firefox"!==o()&&!l.trackId)continue;var d=n[l.mediaType];d&&d.delete(l.id);var p=g(e,t,l,r);if(p){var h=t.get(l.remoteId);p.next(r||p.trackId,l,h)}}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}}function w(e,t,n,r){var i,o;try{for(var s=a(t.values()),c=s.next();!c.done;c=s.next()){var u=c.value;if("inbound-rtp"===u.type&&!u.isRemote){var l=n[u.mediaType];l&&l.delete(u.id);var d=_(e,t,u,r);d&&d.next(r||d.trackId,u)}}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}function k(e,t){var n=function(n){var r=e[n];t[n].forEach((function(e){return r.delete(e)}))};for(var r in t)n(r)}function x(e,t){var n,r,i,o,s;try{for(var c=a(t.values()),u=c.next();!u.done;u=c.next()){"transport"===(p=u.value).type&&(s=t.get(p.selectedCandidatePairId))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(s)e.next(s);else try{for(var l=a(t.values()),d=l.next();!d.done;d=l.next()){var p;"candidate-pair"!==(p=d.value).type||!p.nominated||"selected"in p&&!p.selected||e.next(p)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}e.exports=d},7634:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2050),o=n(5366),s=n(2214),c=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,t,n,r)||this,u=a>0?i/a:0;return Object.defineProperties(c,{deltaPacketsLost:{enumerable:!0,value:i},deltaPacketsReceived:{enumerable:!0,value:a},fractionLost:{enumerable:!0,value:o},jitter:{enumerable:!0,value:s},phonyFractionLost:{enumerable:!0,value:u}}),c}return i(t,e),t.of=function(e,n,r){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var i=(r.timestamp-n.timestamp)/1e3,a=r.bytesReceived-n.bytesReceived,o=i>0?a/i*8:0,s=Math.max(r.packetsLost-n.packetsLost,0),c=r.packetsReceived-n.packetsReceived,u=r.fractionLost,l=r.jitter;return new t(n.id,e,o,s,c,u,l)},t.summarize=function(e){var t=e.map((function(e){return e.summarize()}));return{bitrate:s(t.map((function(e){return e.bitrate}))),fractionLost:a(t.map((function(e){return e.fractionLost}))),jitter:a(t.map((function(e){return e.jitter})))}},t.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},t}(o);e.exports=c},2954:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(7634),o=function(e){function t(t,n){var r=e.call(this,n.id,t,n)||this;return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return i(t,e),t.prototype.next=function(e,t){var n=this.lastStats;this.lastStats=t,this.trackId=e;var r=a.of(e,n,t);return this.lastReport=r,r},t}(n(2910));e.exports=o},1599:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{audioLevel:{value:"number"==typeof n.audioOutputLevel?n.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),r}return i(t,e),t}(n(1989));e.exports=a},1989:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return Object.defineProperties(r,{bytesReceived:{value:"number"==typeof n.bytesReceived?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof n.packetsReceived?n.packetsReceived:null,enumerable:!0}}),r}return i(t,e),t}(n(6567));e.exports=a},5482:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=null;return"number"==typeof n.frameWidthReceived&&"number"==typeof n.frameHeightReceived&&(i={},Object.defineProperties(i,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(r,{dimensions:{value:i,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateReceived?n.frameRateReceived:null,enumerable:!0}}),r}return i(t,e),t}(n(1989));e.exports=a},5366:e=>{"use strict";var t=function(e,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:e},trackId:{enumerable:!0,value:t},bitrate:{enumerable:!0,value:n}})};e.exports=t},2910:e=>{"use strict";var t=function(e,t,n){Object.defineProperties(this,{id:{enumerable:!0,value:e,writable:!0},trackId:{enumerable:!0,value:t,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})};e.exports=t},122:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2050),o=n(5366),s=n(2214),c=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r)||this;return Object.defineProperties(a,{rtt:{enumerable:!0,value:i}}),a}return i(t,e),t.of=function(e,n,r,i){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var a=(r.timestamp-n.timestamp)/1e3,o=r.bytesSent-n.bytesSent,s=a>0?o/a*8:0,c=i&&"number"==typeof i.roundTripTime?i.roundTripTime/1e3:void 0;return new t(n.id,e,s,c)},t.summarize=function(e){return{bitrate:s(e.map((function(e){return e.bitrate}))),rtt:a(e.map((function(e){return e.rtt})))}},t}(o);e.exports=c},8786:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(2910),o=n(122),s=function(e){function t(t,n){var r=e.call(this,n.id,t,n)||this;return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return i(t,e),t.prototype.next=function(e,t,n){var r=this.lastStats;this.lastStats=t,this.trackId=e;var i=o.of(e,r,t,n);return this.lastReport=i,i},t}(a);e.exports=s},8300:(e,t,n)=>{"use strict";var r=n(8324),i=n(3109),a=n(1599),o=n(5482),s=function(e,t,n){if("string"!=typeof e)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:e,enumerable:!0},localAudioTrackStats:{value:t.localAudioTrackStats.map((function(e){return new r(e.trackId,e,n)})),enumerable:!0},localVideoTrackStats:{value:t.localVideoTrackStats.map((function(e){return new i(e.trackId,e,n)})),enumerable:!0},remoteAudioTrackStats:{value:t.remoteAudioTrackStats.map((function(e){return new a(e.trackId,e)})),enumerable:!0},remoteVideoTrackStats:{value:t.remoteVideoTrackStats.map((function(e){return new o(e.trackId,e)})),enumerable:!0}})};e.exports=s},2214:e=>{"use strict";e.exports=function(e){return e.reduce((function(e,t){return"number"==typeof t?t+e:e}),0)}},6567:e=>{"use strict";var t=function(e,t){if("string"!=typeof e)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:e,enumerable:!0},trackSid:{value:t.trackSid,enumerable:!0},timestamp:{value:t.timestamp,enumerable:!0},ssrc:{value:t.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof t.packetsLost?t.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof t.codecName?t.codecName:null,enumerable:!0}})};e.exports=t},8027:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t,n){var r=e.call(this)||this;return Object.defineProperties(r,{id:{enumerable:!0,value:t},kind:{enumerable:!0,value:n}}),r}return i(t,e),t.prototype.stop=function(){this.emit("stopped")},t}(n(8522));e.exports=a},6249:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(9643),c=n(7026),u=c.buildLogLevels,l=c.makeUUID,d=n(8552),p=n(9136),h=n(8993),f=0,m={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},g={closed:"close",open:"open",waiting:"waiting"},_=3e3,v=3001,y=3002,b=3003,w=3005,k=3006,x=globalThis,S=x.WebSocket?x.WebSocket:n(3104),T={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},C=new Map([[_,T.TIMEOUT],[v,T.TIMEOUT],[y,T.FAILED],[b,T.FAILED],[3004,T.TIMEOUT],[k,T.BUSY],[3007,T.TIMEOUT]]),E=function(e){function t(t,n){var r=e.call(this,"early",m)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:d,WebSocket:S},n);var i=u(n.logLevel),s=new n.Log("default",r,i,n.loggerName),c=n.networkMonitor?new p((function(){var e=c.type,t="Network changed"+(e?" to "+e:"");s.debug(t),r._close({code:3004,reason:t})})):null;Object.defineProperties(r,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++f},_log:{value:s},_messageQueue:{value:[]},_networkMonitor:{value:c},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:t},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var l={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return r.on("stateChanged",(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e in g&&r.emit.apply(r,o([g[e]],a(t)));var i={name:e,group:"signaling",level:l[r.state]};if("closed"===e){var s=a(t,1)[0];i.payload={reason:s},i.level=s===T.LOCAL?"info":"error"}r._eventObserver.emit("event",i)})),r._eventObserver.emit("event",{name:r.state,group:"signaling",level:l[r.state]}),r._connect(),r}return i(t,e),t.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},t.prototype._close=function(e){var t=e.code,n=e.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&t!==w&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var r=this._log;1e3===t?(r.debug("Closed"),this.transition("closed",null,[T.LOCAL])):(r.warn("Closed: "+t+" - "+n),t!==w&&this.transition("closed",null,[C.get(t)||T.REMOTE]));var i=this._ws.readyState,a=this._options.WebSocket;i!==a.CLOSING&&i!==a.CLOSED&&this._ws.close(t,n)}},t.prototype._connect=function(){var e=this,t=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void t.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var n=this._ws;t.debug("Created a new WebSocket:",n),n.addEventListener("close",(function(t){return e._close(t)}));var r=this._options.openTimeout;this._openTimeout=new h((function(){var t="Failed to open in "+r+" ms";e._close({code:3007,reason:t})}),r),n.addEventListener("open",(function(){t.debug("WebSocket opened:",n),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()})),n.addEventListener("message",(function(n){t.debug("Incoming: "+n.data);try{n=JSON.parse(n.data)}catch(t){return void e.emit("error",t)}switch(n.type){case"bad":e._handleBad(n);break;case"busy":e._handleBusy(n);break;case"bye":break;case"msg":e._handleMessage(n);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(n);break;default:e._log.debug("Unknown message type: "+n.type),e.emit("error",new Error("Unknown message type: "+n.type))}}))},t.prototype._handleBad=function(e){var t=e.reason,n=this._log;if(["connecting","open"].includes(this.state)){if("connecting"===this.state)return n.warn("Closing: 3002 - "+t),void this._close({code:y,reason:t});n.debug("Error: "+t),this.emit("error",new Error(t))}else n.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},t.prototype._handleBusy=function(e){var t=this,n=e.cookie,r=e.keepAlive,i=e.retryAfter,a=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var o=i<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+i+" ms";if(i<0)return a.warn("Closing: 3006 - "+o),void this._close({code:k,reason:o});var s=this._options.maxConsecutiveFailedHellos;this._hellosLeft=s,this._cookie=n||null,r?(a.warn(o),this._busyWaitTimeout=new h((function(){return t._startHandshake()}),i)):(a.warn("Closing: 3005 - "+o),this._close({code:w,reason:o}),this._busyWaitTimeout=new h((function(){return t._connect()}),i)),this.transition("waiting",null,[r,i])}else a.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},t.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},t.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var e=this._log,t=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+t);var n="Missed "+t+' "heartbeat" messages';e.warn("Closing: 3001 - "+n),this._close({code:v,reason:n})}},t.prototype._handleMessage=function(e){var t=e.body;"open"===this.state?this.emit("message",t):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},t.prototype._handleWelcome=function(e){var t=this,n=e.negotiatedTimeout,r=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(r.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var i=n*this._options.maxConsecutiveMissedHeartbeats,a=n-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new h((function(){return t._handleHeartbeatTimeout()}),i),this._messageQueue.splice(0).forEach((function(e){return t._send(e)})),this._sendHeartbeatTimeout=new h((function(){return t._sendHeartbeat()}),a),this.transition("open")}else r.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},t.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var e=this._log;if(this._hellosLeft<=0){var t="All handshake attempts failed";return e.warn("Closing: 3000 - "+t),void this._close({code:_,reason:t})}var n=this._options.maxConsecutiveFailedHellos;e.warn("Handshake attempt "+(n-this._hellosLeft)+" failed"),this._startHandshake()}},t.prototype._send=function(e){if(this._ws.readyState===this._options.WebSocket.OPEN){var t=JSON.stringify(e);this._log.debug("Outgoing: "+t);try{this._ws.send(t),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch(e){var n="Failed to send message";this._log.warn("Closing: 3003 - "+n),this._close({code:b,reason:n})}}},t.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},t.prototype._sendHello=function(){var e=this._options,t=e.helloBody,n=e.requestedHeartbeatTimeout,r={id:l(),timeout:n,type:"hello",version:2};this._cookie&&(r.cookie=this._cookie),t&&(r.body=t),this._send(r)},t.prototype._sendOrEnqueue=function(e){var t=this;if("closed"!==this.state){var n="open"===this.state?function(e){return t._send(e)}:function(e){return t._messageQueue.push(e)};n(e)}},t.prototype._startHandshake=function(){var e=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state){this._hellosLeft--,this._sendHello();var t=this._options.welcomeTimeout;this._welcomeTimeout=new h((function(){return e._handleWelcomeTimeout()}),t)}},t.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},t.prototype.sendMessage=function(e){this._sendOrEnqueue({body:e,type:"msg"})},t}(s);E.CloseReason=T,e.exports=E},4233:(e,t,n)=>{"use strict";var r=n(7026).defer,i=function(){function e(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return e.prototype.put=function(e){this._hasValue=!0,this._value=e;var t=this._deferreds.shift();return t&&t.resolve(e),this},e.prototype.take=function(){var e=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var t=r();return this._deferreds.push(t),t.promise.then((function(t){return e._hasValue=!1,t}))},e}();e.exports=i},1194:e=>{var t=function(){function e(e){Object.defineProperties(this,{_min:{value:e.min||100},_max:{value:e.max||1e4},_jitter:{value:e.jitter>0&&e.jitter<=1?e.jitter:0},_factor:{value:e.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var e=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var t=Math.random(),n=Math.floor(t*this._jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this._max)}},_timeoutID:{value:null,writable:!0}})}return e.prototype.backoff=function(e){var t=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout((function(){t._attempts++,e()}),n)},e.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},e}();e.exports=t},7135:function(e){"use strict";var t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function n(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function r(){return n()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function i(){return n()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}e.exports={isAndroid:function(){return/Android/.test(navigator.userAgent)},isIOS:function(){return r()||i()},isIpad:r,isIphone:i,isMobile:function(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function(e){return"chrome"===e&&/Edge/.test(navigator.userAgent)&&("undefined"==typeof chrome||void 0===chrome.runtime)},mobileWebKitBrowser:function(e){return"safari"!==e?null:"brave"in navigator?"brave":["edge","edg"].find((function(e){return navigator.userAgent.toLowerCase().includes(e)}))||null},rebrandedChromeBrowser:function(e){if("chrome"!==e)return null;if("brave"in navigator)return"brave";var n=function(e){for(var t=[],n=[],r=0;r<e.length;r++)if("("===e[r])t.push(r);else if(")"===e[r]&&t.length>0){var i=t.pop();0===t.length&&n.push(e.substring(i,r+1))}return n}(navigator.userAgent).reduce((function(e,t){return e.replace(t,"")}),navigator.userAgent).match(/[^\s]+/g)||[];return t(n.map((function(e){return e.split("/")[0].toLowerCase()}))).slice(2).find((function(e){return!["chrome","mobile","safari"].includes(e)}))||null}}},2669:function(e){"use strict";var t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},n=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},r=function(){function e(e,t){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:t}}),Object.defineProperty(this,"_promise",{value:new Promise((function(t,r){e((function(e){n._isCancelable=!1,t(e)}),(function(e){n._isCancelable=!1,r(e)}),(function(){return n._isCanceled}))}))})}return e.reject=function(t){return new e((function(e,n){n(t)}),(function(){}))},e.resolve=function(t){return new e((function(e){e(t)}),(function(){}))},e.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},e.prototype.catch=function(){var r=[].slice.call(arguments),i=this._promise;return new e((function(e,a){i.catch.apply(i,n([],t(r))).then(e,a)}),this._onCancel)},e.prototype.then=function(){var r=[].slice.call(arguments),i=this._promise;return new e((function(e,a){i.then.apply(i,n([],t(r))).then(e,a)}),this._onCancel)},e.prototype.finally=function(){var r=[].slice.call(arguments),i=this._promise;return new e((function(e,a){i.finally.apply(i,n([],t(r))).then(e,a)}),this._onCancel)},e}();e.exports=r},3427:(e,t,n)=>{"use strict";var r=n(3906);e.exports.SDK_NAME=r.name+".js",e.exports.SDK_VERSION=r.version,e.exports.SDP_FORMAT="unified",e.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},e.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},e.exports.DEFAULT_ENVIRONMENT="prod",e.exports.DEFAULT_REALM="us1",e.exports.DEFAULT_REGION="gll",e.exports.DEFAULT_LOG_LEVEL="warn",e.exports.DEFAULT_LOGGER_NAME="twilio-video",e.exports.WS_SERVER=function(e,t){return t="gll"===t?"global":encodeURIComponent(t),"prod"===e?"wss://"+t+".vss.twilio.com/signaling":"wss://"+t+".vss."+e+".twilio.com/signaling"},e.exports.PUBLISH_MAX_ATTEMPTS=5,e.exports.PUBLISH_BACKOFF_JITTER=10,e.exports.PUBLISH_BACKOFF_MS=20,e.exports.typeErrors={ILLEGAL_INVOKE:function(e,t){return new TypeError("Illegal call to "+e+": "+t)},INVALID_TYPE:function(e,t){return new TypeError(e+" must be "+((["a","e","i","o","u"].includes(t.toLowerCase()[0])?"an":"a")+" ")+t)},INVALID_VALUE:function(e,t){return new RangeError(e+" must be one of "+t.join(", "))},REQUIRED_ARGUMENT:function(e){return new TypeError(e+" must be specified")}},e.exports.DEFAULT_FRAME_RATE=24,e.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,e.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,e.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,e.exports.DEFAULT_NQ_LEVEL_LOCAL=1,e.exports.DEFAULT_NQ_LEVEL_REMOTE=0,e.exports.MAX_NQ_LEVEL=3,e.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,e.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,e.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*e.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},e.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},e.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},e.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},e.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},e.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},e.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},2818:(e,t,n)=>{"use strict";var r=n(5068);e.exports=function(e){var t=n(873),i={},a=t.getOrCreate(i),o=3;return function t(){return o--,r(a,e.srcObject,250).then((function(e){return!!e&&(!(o>0)||t())})).catch((function(){return!0}))}().finally((function(){t.release(i)}))}},2347:e=>{"use strict";var t=null;e.exports=function(e){return t=t||document.createElement("canvas"),new Promise((function(n){var r=3;setTimeout((function i(){return r--,function(e){try{var n=t.getContext("2d");n.drawImage(e,0,0,50,50);var r=n.getImageData(0,0,50,50).data.filter((function(e,t){return(t+1)%4}));return 0===Math.max.apply(Math,r)}catch(e){return console.log("Error checking silence: ",e),!1}}(e)?r>0?setTimeout(i,250):n(!0):n(!1)}),250)}))}},5495:e=>{"use strict";var t=function(){function e(e){var t=this;void 0===e&&(e=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){t._emitVisible("visible"===document.visibilityState)}}});for(var n=0;n<e;n++)this._listeners.push([])}return e.prototype.clear=function(){for(var e=this._listeners.length,t=0;t<e;t++)this._listeners[t]=[]},e.prototype._listenerCount=function(){return this._listeners.reduce((function(e,t){return e+t.length}),0)},e.prototype._emitVisible=function(e){for(var t=this,n=Promise.resolve(),r=function(r){n=n.then((function(){return t._emitVisiblePhase(r,e)}))},i=1;i<=this._listeners.length;i++)r(i);return n},e.prototype._emitVisiblePhase=function(e,t){var n=this._listeners[e-1];return Promise.all(n.map((function(e){var n=e(t);return n instanceof Promise?n:Promise.resolve(n)})))},e.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},e.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},e.prototype.onVisibilityChange=function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);return this._listeners[e-1].push(t),1===this._listenerCount()&&this._start(),this},e.prototype.offVisibilityChange=function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1],r=n.indexOf(t);return-1!==r&&(n.splice(r,1),0===this._listenerCount()&&this._stop()),this},e}();e.exports=new t(2)},8206:e=>{"use strict";e.exports=function(e){var t=e.location,n=e.URL;return[t,n].some((function(e){return!e}))?function(e){return Promise.reject(new Error("Failed to import: "+e+": dynamicImport is not supported"))}:(e.__twilioVideoImportedModules={},function(r){return r in e.__twilioVideoImportedModules?Promise.resolve(e.__twilioVideoImportedModules[r]):new Function("scope","return import('"+new n(r,t)+"').then(m => scope.__twilioVideoImportedModules['"+r+"'] = m);")(e)})}(globalThis)},4968:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(29).EventEmitter,o=["signaling","room","media","quality","video-processor","preflight"],s=["debug","error","info","warning"],c=function(e){function t(t,n,r,i){void 0===i&&(i=null);var a=e.call(this)||this;return a.on("event",(function(e){var a=e.name,c=e.group,u=e.level,l=e.payload;if("string"!=typeof a)throw r.error("Unexpected name: ",a),new Error("Unexpected name: ",a);if(!o.includes(c))throw r.error("Unexpected group: ",c),new Error("Unexpected group: ",c);if(!s.includes(u))throw r.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var d=Date.now(),p=d-n,h=Object.assign({elapsedTime:p,level:u},l||{});t.publish(c,a,h);var f=Object.assign({elapsedTime:p,group:c,level:u,name:a,timestamp:d},l?{payload:l}:{});r[{debug:"debug",error:"error",info:"info",warning:"warn"}[u]]("event",f),i&&"signaling"===c&&i.emit("event",f)})),a}return i(t,e),t}(a);e.exports=c},4206:e=>{"use strict";var t=function(){function e(e){e=Object.assign({getKey:function(e){return e},getValue:function(e){return e},isLessThanOrEqualTo:function(e,t){return e<=t}},e),Object.defineProperties(this,{_getKey:{value:e.getKey},_getValue:{value:e.getValue},_isLessThanOrEqualTo:{value:e.isLessThanOrEqualTo},_map:{value:new Map}})}return e.prototype.toMap=function(){return new Map(this._map)},e.prototype.updateAndFilter=function(e){return e.filter(this.update,this)},e.prototype.update=function(e){var t=this._getKey(e),n=this._getValue(e);return(!this._map.has(t)||!this._isLessThanOrEqualTo(n,this._map.get(t)))&&(this._map.set(t,n),!0)},e}();e.exports=t},7026:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(3427),c=s.typeErrors,u=s.trackPriority,l=n(7792),d=n(1886).sessionSID,p=n(4062);function h(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"Unknown"}function f(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i;try{i=typeof e[r]}catch(e){}"function"===i&&(t[r]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this[n])[r].apply(e,o([],a(t)))})}}function m(e){return"object"==typeof e&&!Array.isArray(e)}function g(e){Object.getOwnPropertyNames(e).forEach((function(t){t.startsWith("_")&&_(e,t)}))}function _(e,t){var n=Object.getOwnPropertyDescriptor(e,t);n.enumerable=!1,Object.defineProperty(e,t,n)}function v(e){return e.map(y)}function y(e){return Array.isArray(e)?v(e):e instanceof Set?v(o([],a(e))):e instanceof Map?o([],a(e.entries())).reduce((function(e,t){var n,r=a(t,2),i=r[0],o=r[1];return Object.assign(((n={})[i]=y(o),n),e)}),{}):e&&"object"==typeof e?(t=e,Object.entries(t).reduce((function(e,t){var n,r=a(t,2),i=r[0],o=r[1];return Object.assign(((n={})[i]=y(o),n),e)}),{})):e;var t}function b(e){return x(e,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:k},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function w(e){return x(e,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function k(e){return x(e,[{prop:u.PRIORITY_HIGH,type:"object",transform:w},{prop:u.PRIORITY_LOW,type:"object",transform:w},{prop:u.PRIORITY_STANDARD,type:"object",transform:w}])}function x(e,t){return t.reduce((function(t,n){var r,i=n.prop,a=n.type,o=n.payloadProp,s=void 0===o?i:o,c=n.transform,u=void 0===c?function(e){return e}:c;return typeof e[i]===a?Object.assign(((r={})[s]=u(e[i]),r),t):t}),{})}t.constants=s,t.createBandwidthProfilePayload=function(e){return x(e,[{prop:"video",type:"object",transform:b}])},t.createMediaSignalingPayload=function(e,t,n,r,i,a){var o={transports:[{type:"data-channel"}]};return Object.assign(e?{active_speaker:o}:{},t?{network_quality:o}:{},a?{render_hints:o}:{},i?{publisher_hints:o}:{},n?{track_priority:o}:{},r?{track_switch_off:o}:{})},t.createMediaWarningsPayload=function(e){var t,n=((t={})[p.recordingMediaLost]="recordings",t);return e.map((function(e){return n[e]})).filter((function(e){return!!e}))},t.createRoomConnectEventPayload=function(e){function t(e){return e?"true":"false"}var n={sessionSID:d,iceServers:(e.iceServers||[]).length,audioTracks:(e.tracks||[]).filter((function(e){return"audio"===e.kind})).length,videoTracks:(e.tracks||[]).filter((function(e){return"video"===e.kind})).length,dataTracks:(e.tracks||[]).filter((function(e){return"data"===e.kind})).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach((function(r){var i=a(r,2),o=i[0],s=i[1];n[s=s||o]=t(!!e[o])})),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach((function(t){var r=a(t,2),i=r[0],o=r[1];o=o||i,"number"==typeof e[i]?n[o]=e[i]:isNaN(Number(e[i]))||(n[o]=Number(e[i]))})),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach((function(t){var r=a(t,2),i=r[0],o=r[1];o=o||i,"string"==typeof e[i]?n[o]=e[i]:"number"==typeof e[i]&&"name"===i&&(n[o]=e[i].toString())})),["preferredAudioCodecs","preferredVideoCodecs"].forEach((function(t){t in e&&(n[t]=JSON.stringify(e[t]))})),"networkQuality"in e&&(n.networkQualityConfiguration={},m(e.networkQuality)?["local","remote"].forEach((function(t){"number"==typeof e.networkQuality[t]&&(n.networkQualityConfiguration[t]=e.networkQuality[t])})):(n.networkQualityConfiguration.remote=0,n.networkQualityConfiguration.local=e.networkQuality?1:0)),e.bandwidthProfile&&e.bandwidthProfile.video){var r=e.bandwidthProfile.video||{};n.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach((function(e){"number"==typeof r[e]||"string"==typeof r[e]?n.bandwidthProfileOptions[e]=r[e]:"boolean"==typeof r[e]?n.bandwidthProfileOptions[e]=t(r[e]):"object"==typeof r[e]&&(n.bandwidthProfileOptions[e]=JSON.stringify(r[e]))}))}return{group:"room",name:"connect",level:"info",payload:n}},t.createSubscribePayload=function(e){return{rules:[{type:e?"include":"exclude",all:!0}],revision:1}},t.asLocalTrack=function(e,t){if(e instanceof t.LocalAudioTrack||e instanceof t.LocalVideoTrack||e instanceof t.LocalDataTrack)return e;if(e instanceof t.MediaStreamTrack)return"audio"===e.kind?new t.LocalAudioTrack(e,t):new t.LocalVideoTrack(e,t);throw c.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},t.asLocalTrackPublication=function(e,t,n,r){return new(0,{audio:r.LocalAudioTrackPublication,video:r.LocalVideoTrackPublication,data:r.LocalDataTrackPublication}[e.kind])(t,e,n,r)},t.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},t.deprecateEvents=function(e,t,n,r){var i=new Set;t.on("newListener",(function a(o){n.has(o)&&!i.has(o)&&(r.deprecated(e+"#"+o+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(n.get(o)?" Use "+e+"#"+n.get(o)+" instead.":"")),i.add(o)),i.size>=n.size&&t.removeListener("newListener",a)}))},t.difference=function(e,t){e=Array.isArray(e)?new Set(e):new Set(e.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n},t.filterObject=function(e,t){return Object.keys(e).reduce((function(n,r){return e[r]!==t&&(n[r]=e[r]),n}),{})},t.flatMap=function(e,t){var n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||function(e){return e},n.reduce((function(e,n){var r=t(n);return e.concat(r)}),[])},t.getPlatform=function(){var e=h(),t=a(e.match(/\(([^)]+)\)/)||[],2)[1];return a((void 0===t?"unknown":t).split(";").map((function(e){return e.trim()})),1)[0].toLowerCase()},t.getUserAgent=h,t.hidePrivateProperties=g,t.hidePrivateAndCertainPublicPropertiesInClass=function(e,t){return function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,o([],a(n)))||this;return g(i),function(e,t){void 0===t&&(t=[]);t.forEach((function(t){e.hasOwnProperty(t)&&_(e,t)}))}(i,t),i}return i(n,e),n}(e)},t.isDeepEqual=function e(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(null===t)return null===n;if(null===n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t){var r=Object.keys(t).sort(),i=Object.keys(n).sort();return!Array.isArray(n)&&e(r,i)&&r.every((function(r){return e(t[r],n[r])}))}return!1},t.isNonArrayObject=m,t.inRange=function(e,t,n){return t<=e&&e<=n},t.makeUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.oncePerTick=function(e){var t=null;function n(){t=null,e()}return function(){t&&clearTimeout(t),t=setTimeout(n)}},t.promiseFromEvents=function(e,t,n,r){return new Promise((function(i,s){function c(){var e=[].slice.call(arguments);r&&t.removeListener(r,u),i.apply(void 0,o([],a(e)))}function u(){var e=[].slice.call(arguments);t.removeListener(n,c),s.apply(void 0,o([],a(e)))}t.once(n,c),r&&t.once(r,u),e()}))},t.getOrNull=function(e,t){return t.split(".").reduce((function(e,t){return e?e[t]:null}),e)},t.defer=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},t.delegateMethods=function(e,t,n){for(var r in e)f(e,t,n,r)},t.proxyProperties=function(e,t,n){Object.getOwnPropertyNames(e).forEach((function(e){!function(e,t,n,r){if(r in t)return;if(r.match(/^on[a-z]+$/))return Object.defineProperty(t,r,{value:null,writable:!0}),void n.addEventListener(r.slice(2),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.dispatchEvent.apply(t,o([],a(e)))}));Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}})}(0,t,n,e)}))},t.legacyPromise=function(e,t,n){return t?e.then((function(e){t(e)}),(function(e){n(e)})):e},t.buildLogLevels=function(e){return"string"==typeof e?{default:e,media:e,signaling:e,webrtc:e}:e},t.trackClass=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,(function(e){return e.toUpperCase()}))+"Track"},t.trackPublicationClass=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,(function(e){return e.toUpperCase()}))+"TrackPublication"},t.valueToJSON=y,t.withJitter=function(e,t){var n=Math.random();return e-t+Math.floor(2*t*n+.5)},t.isChromeScreenShareTrack=function(e){return"chrome"===l.guessBrowser()&&"video"===e.kind&&"displaySurface"in e.getSettings()},t.waitForSometime=function(e){return void 0===e&&(e=10),new Promise((function(t){return setTimeout(t,e)}))},t.waitForEvent=function(e,t){return new Promise((function(n){e.addEventListener(t,(function r(i){e.removeEventListener(t,r),n(i)}))}))}},2042:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},o=n(29).EventEmitter,s=n(7026).getUserAgent,c=globalThis,u=c.WebSocket?c.WebSocket:n(3104),l=n(3427),d=l.hardwareDevicePublisheriPad,p=l.hardwareDevicePublisheriPhone,h=n(7026),f=n(7135),m=function(e){function t(t,n,r,i,a,o){var c=e.call(this)||this;return o=Object.assign({gateway:_(i,a)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:s(),WebSocket:u},o),Object.defineProperties(c,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:h.defer()},_reconnectAttemptsLeft:{value:o.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:o.WebSocket}}),c._readyToConnect.promise.then((function(e){var i=e.roomSid,a=e.participantSid,s=c;c.on("disconnected",(function e(c){if(s._session=null,c&&s._reconnectAttemptsLeft>0)return s.emit("reconnecting"),void function(e,t,n,r,i,a,o){var s=Date.now()-e._connectTimestamp,c=o.reconnectIntervalMs-s;if(c>0)return void setTimeout((function(){g(e,t,n,r,i,a,o)}),c);g(e,t,n,r,i,a,o)}(s,t,n,r,i,a,o);s.removeListener("disconnected",e)})),g(c,t,n,r,i,a,o)})).catch((function(){})),c}return i(t,e),t.prototype.connect=function(e,t){this._readyToConnect.resolve({roomSid:e,participantSid:t})},t.prototype._publish=function(e){e.session=this._session,this._ws.send(JSON.stringify(e))},t.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch(e){}return this.emit("disconnected"),!0},t.prototype.publish=function(e,t,n){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:e,name:t,payload:n,timestamp:Date.now(),type:"event",version:1}),!0)},t}(o);function g(e,t,n,r,i,o,s){e._connectTimestamp=Date.now(),e._reconnectAttemptsLeft--,e._ws=new s.WebSocket(s.gateway);var c=e._ws;c.addEventListener("close",(function(t){1e3!==t.code?e.emit("disconnected",new Error("WebSocket Error "+t.code+": "+t.reason)):e.emit("disconnected")})),c.addEventListener("message",(function(t){!function(e,t,n){switch(t.type){case"connected":e._session=t.session,e._reconnectAttemptsLeft=n.maxReconnectAttempts,e._eventQueue.splice(0).forEach(e._publish,e),e.emit("connected");break;case"error":e._ws.close(),e.emit("disconnected",new Error(t.message))}}(e,JSON.parse(t.data),s)})),c.addEventListener("open",(function(){var e={type:"connect",token:t,version:1};e.publisher={name:n,sdkVersion:r,userAgent:s.userAgent,participantSid:o,roomSid:i},f.isIpad()?e.publisher=a(a({},e.publisher),d):f.isIphone()&&(e.publisher=a(a({},e.publisher),p)),c.send(JSON.stringify(e))}))}function _(e,t){return"prod"===e?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+e+"-"+t+".twilio.com"}e.exports=m},1017:e=>{"use strict";var t=function(){function e(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return e.prototype.connect=function(){},e.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},e.prototype.publish=function(){return this._connected},e}();e.exports=t},1272:(e,t,n)=>{"use strict";var r=n(7026).defer,i=function(){function e(){Object.defineProperties(this,{_audio:{value:r(),writable:!0},_video:{value:r(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return e.prototype.resolveDeferred=function(e){"audio"===e?this._audio.resolve():this._video.resolve()},e.prototype.startDeferred=function(e){"audio"===e?this._audio=r():this._video=r()},e.prototype.whenResolved=function(e){return"audio"===e?this._audio.promise:this._video.promise},e}();e.exports=new i},8552:function(e,t,n){"use strict";var r,i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=n(5418).getLogger,s=n(3427),c=s.DEFAULT_LOG_LEVEL,u=s.DEFAULT_LOGGER_NAME,l=n(3427).typeErrors;var d=function(){function e(t,n,r,i,a){if("string"!=typeof t)throw l.INVALID_TYPE("moduleName","string");if(!n)throw l.REQUIRED_ARGUMENT("component");"object"!=typeof r&&(r={}),a=a||o,g(r),Object.defineProperties(this,{_component:{value:n},_logLevels:{value:r},_warnings:{value:new Set},_loggerName:{get:function(){var e=i&&"string"==typeof i?i:u;return this._logLevelsEqual||(e=e+"-"+t),e}},_logger:{get:function(){var e=a(this._loggerName),n=this._logLevels[t]||c;return n="off"===n?"silent":n,e.setDefaultLevel(n),e}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return e.getLevelByName(r[t]||c)}},name:{get:n.toString.bind(n)}})}return e.getLevelByName=function(t){return isNaN(t)?(m(t=t.toUpperCase()),e[t]):parseInt(t,10)},e.prototype.createLog=function(t,n){var r=this._loggerName;return this._logLevelsEqual||(r=r.substring(0,r.lastIndexOf("-"))),new e(t,n,this._logLevels,r)},e.prototype.setLevels=function(e){return g(e),Object.assign(this._logLevels,e),this},e.prototype.log=function(t,n){var r=e._levels[t];if(!r)throw l.INVALID_VALUE("logLevel",h);r=r.toLowerCase();var o=[(new Date).toISOString(),r,this.name];return(this._logger[r]||function(){}).apply(void 0,a([],i(o.concat(n)))),this},e.prototype.debug=function(){return this.log(e.DEBUG,[].slice.call(arguments))},e.prototype.deprecated=function(e){var t=function(e){if((r=r||new Map).has(e))return r.get(e);var t=new Set;return r.set(e,t),t}(this._component.constructor);return t.has(e)?this:(t.add(e),this.warn(e))},e.prototype.info=function(){return this.log(e.INFO,[].slice.call(arguments))},e.prototype.warn=function(){return this.log(e.WARN,[].slice.call(arguments))},e.prototype.warnOnce=function(e){return this._warnings.has(e)?this:(this._warnings.add(e),this.warn(e))},e.prototype.error=function(){return this.log(e.ERROR,[].slice.call(arguments))},e.prototype.throw=function(t,n){throw t.clone&&(t=t.clone(n)),this.log(e.ERROR,t),t},e}();Object.defineProperties(d,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var p={},h=[],f=d._levels.map((function(e,t){return p[e]=!0,h.push(t),e}));function m(e){if(!(e in p))throw l.INVALID_VALUE("level",f)}function g(e){Object.keys(e).forEach((function(t){m(e[t].toUpperCase())}))}e.exports=d},8745:e=>{"use strict";var t=function(){function e(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return e.prototype.get=function(){var e=this._samples,t=e[1].denominator-e[0].denominator||1/0;return(e[1].numerator-e[0].numerator)/t},e.prototype.putSample=function(e,t){var n=this._samples;n.shift(),n.push({denominator:t,numerator:e})},e}();e.exports=t},9136:e=>{"use strict";var t=function(){function e(e,t){var n=this,r=(t=Object.assign({navigator,window},t)).navigator,i=r.connection||{type:null},a=i.type,o=i.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var t=a!==n.type&&n.isOnline;a=n.type,t&&e()}},_target:{value:i}}:{_events:{value:["online"]},_listener:{value:e},_target:{value:t.window}},s=o._events,c=o._listener,u=o._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof r.onLine||r.onLine}},type:{enumerable:!0,get:function(){return i.type||null}},_listener:c,_events:s,_target:u})}return e.prototype.start=function(){var e=this;this._events.forEach((function(t){e._target.addEventListener(t,e._listener)}))},e.prototype.stop=function(){var e=this;this._events.forEach((function(t){e._target.removeEventListener(t,e._listener)}))},e}();e.exports=t},6151:function(e){"use strict";var t,n=this&&this.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=function(){function e(e){Object.defineProperties(this,{_callback:{value:e}})}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.makeVisible=function(e){var t=this._makeFakeEntry(e,!0);this._callback([t])},e.prototype.makeInvisible=function(e){var t=this._makeFakeEntry(e,!1);this._callback([t])},e.prototype._makeFakeEntry=function(e,t){return{target:e,isIntersecting:t}},e}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(r),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.resize=function(e){var t=this._makeFakeEntry(e,!0);this._callback([t])},t}(r);e.exports={NullIntersectionObserver:i,NullResizeObserver:a,NullObserver:r}},2372:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=n(7026),a=i.difference,o=i.flatMap,s=n(4885),c={0:"PCMU",8:"PCMA"};function u(e){return Array.from(d(e)).reduce((function(e,t){var n=t[0],r=t[1],i=e.get(r)||[];return e.set(r,i.concat(n))}),new Map)}function l(e){return f(e).reduce((function(e,t){var n=h(t);return n?e.set(n,t):e}),new Map)}function d(e){return m(e).reduce((function(t,n){var r=new RegExp("a=rtpmap:"+n+" ([^/]+)"),i=e.match(r),a=i?i[1].toLowerCase():c[n]?c[n].toLowerCase():"";return t.set(n,a)}),new Map)}function p(e,t){var n=new RegExp("^a=fmtp:"+e+" (.+)$","m"),i=t.match(n);return i&&i[1].split(";").reduce((function(e,t){var n=r(t.split("="),2),i=n[0],a=n[1];return e[i]=isNaN(a)?a:parseInt(a,10),e}),{})}function h(e){var t=e.match(/^a=mid:(.+)$/m);return t&&t[1]}function f(e,t,n){return e.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map((function(e){return"m="+e})).filter((function(e){var r=new RegExp("m="+(t||".*"),"gm"),i=new RegExp("a="+(n||".*"),"gm");return r.test(e)&&i.test(e)}))}function m(e){var t=e.split("\r\n")[0].match(/([0-9]+)/g);return t?t.slice(1).map((function(e){return parseInt(e,10)})):[]}function g(e,t){var n=t.split("\r\n"),r=n[0],i=n.slice(1);return[r=r.replace(/([0-9]+\s?)+$/,e.join(" "))].concat(i).join("\r\n")}function _(e,t,n){if(!/^m=(audio|video)/.test(e))return e;var i=h(e),a=i&&t.get(i);if(!a)return e;var s=d(a),c=u(e),l=o(Array.from(s),(function(t){var i=r(t,2),o=i[0],s=i[1];return"rtx"===s||n.includes(s)?[]:function(e,t,n,r,i){var a=n.get(e)||[];if(a.length<=1)return a;var o=p(t,i);if(!o)return a;var s=a.find((function(e){var t=p(e,r);return t&&Object.keys(o).every((function(e){return o[e]===t[e]}))}));return"number"==typeof s?[s]:a}(s,o,c,e,a)})),f=c.get("rtx")||[];l=l.concat(f.filter((function(t){var n=p(t,e);return n&&l.includes(n.apt)})));var _=e.split("\r\n").filter((function(e){var t=e.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),n=t&&t[2];return!t||n&&l.includes(parseInt(n,10))}));return g(m(e).filter((function(e){return l.includes(e)})),_.join("\r\n"))}function v(e,t){var n=f(e);return[e.split("\r\nm=")[0]].concat(n.map((function(e){if(!/^m=(audio|video)/.test(e))return e;var n=h(e);if(!n)return e;var i=t.get(n);if(!i)return e;var a=(e.match(/^a=msid:(.+)$/m)||[])[1];if(!a)return e;var o=r(a.split(" "),2),s=o[0],c=o[1],u=new RegExp("msid:"+s+(c?" "+c:"")+"$","gm");return e.replace(u,"msid:"+s+" "+i)}))).join("\r\n")}function y(e,t){var n=Object.entries(t).map((function(e){var t=r(e,2);return t[0]+"="+t[1]})).join(";");return"a=fmtp:"+e+" "+n}t.addOrRewriteNewTrackIds=function(e,t,n){var i=Array.from(n).reduce((function(n,i){var a=r(i,2),o=a[0],s=a[1];return f(e,o,"send(only|recv)").map(h).filter((function(e){return!t.has(e)})).forEach((function(e,t){return n.set(e,s[t])})),n}),new Map);return v(e,i)},t.addOrRewriteTrackIds=v,t.createCodecMapForMediaSection=u,t.createPtToCodecName=d,t.disableRtx=function(e){var t=f(e);return[e.split("\r\nm=")[0]].concat(t.map((function(e){if(!/^m=video/.test(e))return e;var t=u(e).get("rtx");if(!t)return e;var n=new Set(m(e));t.forEach((function(e){return n.delete(e)}));var r=e.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),i=r&&r[1],a=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(i?[new RegExp("^a=ssrc:"+i+" .+$")]:[]);return e=e.split("\r\n").filter((function(e){return a.every((function(t){return!t.test(e)}))})).join("\r\n"),g(Array.from(n),e)}))).join("\r\n")},t.enableDtxForOpus=function(e,t){var n=f(e),r=e.split("\r\nm=")[0];return t=t||n.filter((function(e){return/^m=audio/.test(e)})).map(h),[r].concat(n.map((function(e){if(!/^m=audio/.test(e))return e;var n=u(e).get("opus");if(!n)return e;var r=p(n,e);if(!r)return e;var i=y(n,r),a=new RegExp(i),o=h(e);t.includes(o)?r.usedtx=1:delete r.usedtx;var s=y(n,r);return e.replace(a,s)}))).join("\r\n")},t.filterLocalCodecs=function(e,t){var n=f(e),r=e.split("\r\nm=")[0],i=l(t);return[r].concat(n.map((function(e){return _(e,i,[])}))).join("\r\n")},t.getMediaSections=f,t.removeSSRCAttributes=function(e,t){return e.split("\r\n").filter((function(e){return!t.find((function(t){return new RegExp("a=ssrc:.*"+t+":","g").test(e)}))})).join("\r\n")},t.revertSimulcast=function(e,t,n,r){void 0===r&&(r=!1);var i=l(n),a=l(t),o=f(e);return[e.split("\r\nm=")[0]].concat(o.map((function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var t=e.match(/^a=mid:(.+)$/m),n=t&&t[1];if(!n)return e;var o=i.get(n),s=d(o),c=m(o),u=c.length&&"vp8"===s.get(c[0]);return r||!u?a.get(n).replace(/\r\n$/,""):e}))).concat("").join("\r\n")},t.setCodecPreferences=function(e,t,n){var r=f(e);return[e.split("\r\nm=")[0]].concat(r.map((function(e){if(!/^m=(audio|video)/.test(e))return e;var r=e.match(/^m=(audio|video)/)[1],i=u(e),s=function(e,t){t=t.map((function(e){return e.codec.toLowerCase()}));var n=o(t,(function(t){return e.get(t)||[]})),r=a(Array.from(e.keys()),t),i=o(r,(function(t){return e.get(t)}));return n.concat(i)}(i,"audio"===r?t:n),c=g(s,e),l=i.get("pcma")||[],d=i.get("pcmu")||[];return("audio"===r?new Set(l.concat(d)):new Set).has(s[0])?c.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):c}))).join("\r\n")},t.setSimulcast=function(e,t){var n=f(e);return[e.split("\r\nm=")[0]].concat(n.map((function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var n=u(e),r=m(e),i=new Set(n.get("vp8")||[]);return r.some((function(e){return i.has(e)}))?s(e,t):e}))).concat("").join("\r\n")}},2147:(e,t,n)=>{"use strict";var r=n(807).RTCSessionDescription,i=n(2372),a=i.createPtToCodecName,o=i.getMediaSections;function s(e){var t=a(e);e=function(e,t){return Array.from(t.keys()).reduce((function(e,n){var r=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(r)||[]).slice("rtx"===t.get(n)?1:0).reduce((function(e,t){var r=new RegExp("\r\n"+t),i=new RegExp("\r\na=fmtp:"+n+" apt=[0-9]+");return e.replace(r,"").replace(i,"")}),e)}),e)}(e,t);var n=function(e){var t=new Map;return e.forEach((function(e,n){var r=t.get(e)||new Set;return t.set(e,r.add(n))})),t}(t),r=n.get("rtx")||new Set,i=new Set,o=function(e,t,n,r){return Array.from(n).reduce((function(n,i){var a=new RegExp("a=fmtp:"+i+" apt=(\\d+)"),o=e.match(a);if(!o)return r.add(i),n;var s=Number.parseInt(o[1]);return t.has(s)?"rtx"===t.get(s)?(r.add(i),n):n.set(i,s):(r.add(i),n)}),new Map)}(e,t,r,i),s=function(e,t){var n=Array.from(e).reduce((function(e,t){var n=t[0],r=t[1],i=e.get(r)||new Set;return e.set(r,i.add(n))}),new Map);return Array.from(n).reduce((function(e,n){var r=n[0],i=Array.from(n[1]);return i.length>1?(i.forEach((function(e){t.add(e)})),e):e.set(r,i[0])}),new Map)}(o,i),u=Array.from(i);return["h264","vp8","vp9"].reduce((function(e,t){var r=n.get(t)||new Set;return Array.from(r).reduce((function(e,t){return s.has(t)?e:e.add(t)}),e)}),new Set).forEach((function(t){if(u.length){var n=u.shift();e=function(e,t,n){return e.endsWith("\r\n")?e+"a=fmtp:"+t+" apt="+n+"\r\n":e+"\r\na=fmtp:"+t+" apt="+n}(e=c(e,n),n,t)}})),u.forEach((function(t){e=function(e,t){var n=new RegExp("a=rtpmap:"+t+".*\r\n","gm");return e.replace(n,"")}(e=c(e,t),t)})),e}function c(e,t){var n=new RegExp("a=fmtp:"+t+".*\r\n","gm");return e.replace(n,"")}e.exports=function(e){var t,n,i={type:e.type};return"rollback"!==e.type&&(i.sdp=(t=e.sdp,n=o(t),[t.split("\r\nm=")[0]].concat(n.map(s)).join("\r\n"))),new r(i)}},4885:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=n(7026),a=i.difference,o=i.flatMap;function s(){return String(Math.floor(4294967295*Math.random()))}var c=function(){function e(e,t,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:t},trackId:{enumerable:!0,value:e}})}return e.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var e=[s(),s()];e.forEach((function(e){this.primarySSRCs.add(e)}),this),this.rtxPairs.size&&e.forEach((function(e){this.rtxPairs.set(s(),e)}),this)}},e.prototype.addSSRC=function(e,t,n){t?this.rtxPairs.set(e,t):this.primarySSRCs.add(e),this.isSimulcastEnabled=this.isSimulcastEnabled||n},e.prototype.toSdpLines=function(e){var t=this,n=e?[]:Array.from(this.rtxPairs.entries()).map((function(e){return e.reverse()})),r=Array.from(this.primarySSRCs.values()),i=n.length?o(n):r,a=o(i,(function(e){return["a=ssrc:"+e+" cname:"+t.cName,"a=ssrc:"+e+" msid:"+t.streamId+" "+t.trackId]})),s=n.map((function(e){return"a=ssrc-group:FID "+e.join(" ")})),c=["a=ssrc-group:SIM "+r.join(" ")];return s.concat(a).concat(c)},e}();function u(e,t){return(e.match(new RegExp(t,"gm"))||[]).map((function(e){return(e.match(new RegExp(t))||[]).slice(1)}))}function l(e){var t=function(e){return new Set(o(u(e,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(e),n=function(e){return new Map(u(e,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map((function(e){return e.reverse()})))}(e),i=function(e){var t=r(o(u(e,"^a=msid:(.+) (.+)$")),2),n=t[0],i=t[1];return o(u(e,"^a=ssrc:(.+) cname:.+$")).map((function(e){return[e,n,i]}))}(e);return i.reduce((function(r,i){var a=i[0],o=i[1],s=i[2],u=r.get(s)||new c(s,o,function(e,t,n){var r="a=ssrc:"+t+" "+n+":(.+)";return e.match(new RegExp(r))[1]}(e,a,"cname")),l=n.get(a)||null;return u.addSSRC(a,l,t.has(a)),r.set(s,u)}),new Map)}e.exports=function(e,t){var n=l(e),r=Array.from(n.keys()),i=Array.from(t.keys()),s=a(r,i),c=a(i,r);o(s,(function(e){return n.get(e)})).forEach((function(e){e.addSimulcastSSRCs(),t.set(e.trackId,e)})),i=Array.from(t.keys());var u=a(i,c),d=o(u,(function(e){return t.get(e)})),p=!e.match(/a=rtpmap:[0-9]+ rtx/),h=o(d,(function(e){return e.toSdpLines(p)})),f=o(new Set(e.split("\r\n").concat(h))),m="a=x-google-flag:conference";return e.match(m)||f.push(m),f.join("\r\n")}},6469:(e,t,n)=>{"use strict";var r=n(2372).getMediaSections,i=function(){function e(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return e.prototype.match=function(e){return this._midsToTrackIds.get(e.transceiver.mid)||null},e.prototype.update=function(e){var t=r(e,"(audio|video)");this._midsToTrackIds=t.reduce((function(e,t){var n=t.match(/^a=mid:(.+)$/m)||[],r=t.match(/^a=msid:.+ (.+)$/m)||[],i=n[1],a=r[1];return i&&a?e.set(i,a):e}),this._midsToTrackIds)},e}();e.exports=i},1886:(e,t)=>{var n="1234567890abcdef";function r(e){for(var t="",r=0;r<32;r++)t+=n.charAt(Math.floor(16*Math.random()));return""+e+t}t.sessionSID=r("SS"),t.createSID=r},809:(e,t,n)=>{"use strict";var r=n(7792),i=r.guessBrowser,a=r.support,o=n(9921).getSdpFormat,s=n(7135),c=s.isAndroid,u=s.isMobile,l=s.isNonChromiumEdge,d=s.rebrandedChromeBrowser,p=s.mobileWebKitBrowser,h=["crios","edg","edge","electron","headlesschrome"],f=["chrome","firefox"],m=["chrome","safari"],g=[];e.exports=function(){var e=i();if(!e)return!1;var t=d(e),n=p(e),r=c()?f:m;return!!e&&a()&&"unified"===o()&&(!t||h.includes(t))&&!l(e)&&(!n||g.includes(n))&&(!u()||r.includes(e))}},8993:e=>{"use strict";var t=function(){function e(e,t,n){void 0===n&&(n=!0),Object.defineProperties(this,{_delay:{value:t,writable:!0},_fn:{value:e},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),e.prototype.setDelay=function(e){this._delay=e},e.prototype.start=function(){var e=this;this.isSet||(this._timeout=setTimeout((function(){var t=e._fn;e.clear(),t()}),this._delay))},e.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},e.prototype.reset=function(){this.clear(),this.start()},e}();e.exports=t},5760:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n(6488),o={};t.createTwilioError=function(e,t){return t="string"==typeof t&&t?t:"Unknown error",o[e="number"==typeof e?e:0]?new o[e]:new a(e,t)};var s=function(e){function t(){var n=e.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenInvalidError=s,Object.defineProperty(o,20101,{value:s});var c=function(e){function t(){var n=e.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenHeaderInvalidError=c,Object.defineProperty(o,20102,{value:c});var u=function(e){function t(){var n=e.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenIssuerInvalidError=u,Object.defineProperty(o,20103,{value:u});var l=function(e){function t(){var n=e.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenExpiredError=l,Object.defineProperty(o,20104,{value:l});var d=function(e){function t(){var n=e.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenNotYetValidError=d,Object.defineProperty(o,20105,{value:d});var p=function(e){function t(){var n=e.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenGrantsInvalidError=p,Object.defineProperty(o,20106,{value:p});var h=function(e){function t(){var n=e.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.AccessTokenSignatureInvalidError=h,Object.defineProperty(o,20107,{value:h});var f=function(e){function t(){var n=e.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingConnectionError=f,Object.defineProperty(o,53e3,{value:f});var m=function(e){function t(){var n=e.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingConnectionDisconnectedError=m,Object.defineProperty(o,53001,{value:m});var g=function(e){function t(){var n=e.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingConnectionTimeoutError=g,Object.defineProperty(o,53002,{value:g});var _=function(e){function t(){var n=e.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingIncomingMessageInvalidError=_,Object.defineProperty(o,53003,{value:_});var v=function(e){function t(){var n=e.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingOutgoingMessageInvalidError=v,Object.defineProperty(o,53004,{value:v});var y=function(e){function t(){var n=e.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.SignalingServerBusyError=y,Object.defineProperty(o,53006,{value:y});var b=function(e){function t(){var n=e.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomNameInvalidError=b,Object.defineProperty(o,53100,{value:b});var w=function(e){function t(){var n=e.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomNameTooLongError=w,Object.defineProperty(o,53101,{value:w});var k=function(e){function t(){var n=e.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomNameCharsInvalidError=k,Object.defineProperty(o,53102,{value:k});var x=function(e){function t(){var n=e.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomCreateFailedError=x,Object.defineProperty(o,53103,{value:x});var S=function(e){function t(){var n=e.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomConnectFailedError=S,Object.defineProperty(o,53104,{value:S});var T=function(e){function t(){var n=e.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomMaxParticipantsExceededError=T,Object.defineProperty(o,53105,{value:T});var C=function(e){function t(){var n=e.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomNotFoundError=C,Object.defineProperty(o,53106,{value:C});var E=function(e){function t(){var n=e.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomMaxParticipantsOutOfRangeError=E,Object.defineProperty(o,53107,{value:E});var I=function(e){function t(){var n=e.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomTypeInvalidError=I,Object.defineProperty(o,53108,{value:I});var N=function(e){function t(){var n=e.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomTimeoutOutOfRangeError=N,Object.defineProperty(o,53109,{value:N});var A=function(e){function t(){var n=e.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomStatusCallbackMethodInvalidError=A,Object.defineProperty(o,53110,{value:A});var O=function(e){function t(){var n=e.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomStatusCallbackInvalidError=O,Object.defineProperty(o,53111,{value:O});var R=function(e){function t(){var n=e.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomStatusInvalidError=R,Object.defineProperty(o,53112,{value:R});var P=function(e){function t(){var n=e.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomRoomExistsError=P,Object.defineProperty(o,53113,{value:P});var D=function(e){function t(){var n=e.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomInvalidParametersError=D,Object.defineProperty(o,53114,{value:D});var L=function(e){function t(){var n=e.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomMediaRegionInvalidError=L,Object.defineProperty(o,53115,{value:L});var M=function(e){function t(){var n=e.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomMediaRegionUnavailableError=M,Object.defineProperty(o,53116,{value:M});var F=function(e){function t(){var n=e.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomSubscriptionOperationNotSupportedError=F,Object.defineProperty(o,53117,{value:F});var z=function(e){function t(){var n=e.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomCompletedError=z,Object.defineProperty(o,53118,{value:z});var $=function(e){function t(){var n=e.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomAudioOnlyFlagNotSupportedError=$,Object.defineProperty(o,53124,{value:$});var j=function(e){function t(){var n=e.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.RoomTrackKindNotSupportedError=j,Object.defineProperty(o,53125,{value:j});var B=function(e){function t(){var n=e.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantIdentityInvalidError=B,Object.defineProperty(o,53200,{value:B});var V=function(e){function t(){var n=e.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantIdentityTooLongError=V,Object.defineProperty(o,53201,{value:V});var U=function(e){function t(){var n=e.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantIdentityCharsInvalidError=U,Object.defineProperty(o,53202,{value:U});var G=function(e){function t(){var n=e.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantMaxTracksExceededError=G,Object.defineProperty(o,53203,{value:G});var q=function(e){function t(){var n=e.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantNotFoundError=q,Object.defineProperty(o,53204,{value:q});var W=function(e){function t(){var n=e.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ParticipantDuplicateIdentityError=W,Object.defineProperty(o,53205,{value:W});var H=function(e){function t(){var n=e.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackInvalidError=H,Object.defineProperty(o,53300,{value:H});var Y=function(e){function t(){var n=e.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackNameInvalidError=Y,Object.defineProperty(o,53301,{value:Y});var K=function(e){function t(){var n=e.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackNameTooLongError=K,Object.defineProperty(o,53302,{value:K});var X=function(e){function t(){var n=e.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackNameCharsInvalidError=X,Object.defineProperty(o,53303,{value:X});var Q=function(e){function t(){var n=e.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackNameIsDuplicatedError=Q,Object.defineProperty(o,53304,{value:Q});var J=function(e){function t(){var n=e.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.TrackServerTrackCapacityReachedError=J,Object.defineProperty(o,53305,{value:J});var Z=function(e){function t(){var n=e.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaClientLocalDescFailedError=Z,Object.defineProperty(o,53400,{value:Z});var ee=function(e){function t(){var n=e.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaServerLocalDescFailedError=ee,Object.defineProperty(o,53401,{value:ee});var te=function(e){function t(){var n=e.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaClientRemoteDescFailedError=te,Object.defineProperty(o,53402,{value:te});var ne=function(e){function t(){var n=e.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaServerRemoteDescFailedError=ne,Object.defineProperty(o,53403,{value:ne});var re=function(e){function t(){var n=e.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaNoSupportedCodecError=re,Object.defineProperty(o,53404,{value:re});var ie=function(e){function t(){var n=e.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaConnectionError=ie,Object.defineProperty(o,53405,{value:ie});var ae=function(e){function t(){var n=e.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.MediaDTLSTransportFailedError=ae,Object.defineProperty(o,53407,{value:ae});var oe=function(e){function t(){var n=e.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ConfigurationAcquireFailedError=oe,Object.defineProperty(o,53500,{value:oe});var se=function(e){function t(){var n=e.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(n,t.prototype),n}return i(t,e),t}(a);t.ConfigurationAcquireTurnFailedError=se,Object.defineProperty(o,53501,{value:se})},6488:function(e){"use strict";var t,n=this&&this.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=function(e){function t(n){var a,o=[].slice.call(arguments,1);a=e.apply(this,i([],r(o)))||this,Object.setPrototypeOf(a,t.prototype);var s=Error.apply(a,o);return s.name="TwilioError",Object.defineProperty(a,"code",{value:n,enumerable:!0}),Object.getOwnPropertyNames(s).forEach((function(e){Object.defineProperty(this,e,{value:s[e],enumerable:!0})}),a),a}return n(t,e),t.prototype.toString=function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e},t}(Error);e.exports=a},4062:e=>{"use strict";e.exports={recordingMediaLost:"recording-media-lost"}},3670:(e,t,n)=>{"use strict";var r=n(7026).isNonArrayObject,i=n(3427),a=i.typeErrors,o=i.clientTrackSwitchOffControl,s=i.videoContentPreferencesMode,c=i.subscriptionMode,u=i.trackPriority,l=i.trackSwitchOffMode;function d(e,t,n){return void 0===n&&(n=[]),void 0===e?null:null!==e&&r(e)?n.reduce((function(n,r){var i=r.prop,o=r.type,s=r.values;if(n||!(i in e))return n;var c=e[i];return o&&typeof c!==o||"number"===o&&isNaN(c)?a.INVALID_TYPE(t+"."+i,o):Array.isArray(s)&&!s.includes(c)?a.INVALID_VALUE(t+"."+i,s):n}),null):a.INVALID_TYPE(t,"object")}t.Pn=function(e){var t=d(e,"options.bandwidthProfile");return!e||t?t:(t=d(e.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(s)},{prop:"dominantSpeakerPriority",values:Object.values(u)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(c)},{prop:"clientTrackSwitchOffControl",values:Object.values(o)},{prop:"trackSwitchOffMode",values:Object.values(l)}]))||(e.video?"maxTracks"in e.video&&"clientTrackSwitchOffControl"in e.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in e.video&&"contentPreferencesMode"in e.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function(e){var t="options.bandwidthProfile.video.renderDimensions",n=d(e,t);return e?n||Object.values(u).reduce((function(n,r){return n||d(e[r],t+"."+r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}),null):n}(e.video.renderDimensions):null)},t.ZS=function(e,t){if(!(e instanceof t.LocalAudioTrack||e instanceof t.LocalDataTrack||e instanceof t.LocalVideoTrack||e instanceof t.MediaStreamTrack))throw a.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},802:e=>{e.exports=function(e,t){if(e&&t)if(e.super_=t,"function"==typeof Object.create)e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},5418:e=>{var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(e,n){for(var r=0;r<i.length;r++){var a=i[r];this[a]=r<e?t:this.methodFactory(a,e,n)}this.log=this.debug}function c(e,t,r){return function(){typeof console!==n&&(s.call(this,t,r),this[e].apply(this,arguments))}}function u(e,i,s){return function(e){return"debug"===e&&(e="log"),typeof console!==n&&("trace"===e&&r?o:void 0!==console[e]?a(console,e):void 0!==console.log?a(console,"log"):t)}(e)||c.apply(this,arguments)}function l(e,t,r){var a,o=this,c="loglevel";function l(){var e;if(typeof window!==n&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===n)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||u,o.getLevel=function(){return a},o.setLevel=function(t,r){if("string"==typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(a=t,!1!==r&&function(e){var t=(i[e]||"silent").toUpperCase();if(typeof window!==n&&c){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),s.call(o,t,e),typeof console===n&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){l()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var d=l();null==d&&(d=null==t?"WARN":t),o.setLevel(d,!1)}var d=new l,p={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new l(e,d.getLevel(),d.methodFactory)),t};var h=typeof window!==n?window.log:void 0;d.noConflict=function(){return typeof window!==n&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return p},d.default=d,e.exports=d},873:e=>{"use strict";var t="undefined"!=typeof AudioContext?AudioContext:"undefined"!=typeof webkitAudioContext?webkitAudioContext:null,n=function(){function e(n){n=Object.assign({AudioContext:t},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return e.prototype.getOrCreate=function(e){if(!this._holders.has(e)&&(this._holders.add(e),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch(e){}return this._audioContext},e.prototype.release=function(e){this._holders.has(e)&&(this._holders.delete(e),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},e}();e.exports=new n},5068:e=>{"use strict";e.exports=function(e,t,n){n="number"==typeof n?n:250;var r=e.createMediaStreamSource(t),i=e.createAnalyser();i.fftSize=2048,r.connect(i);var a=new Uint8Array(i.fftSize),o=!1;return setTimeout((function(){o=!0}),n),function e(){return o?Promise.resolve(!0):(i.getByteTimeDomainData(a),a.some((function(e){return 128!==e&&0!==e}))?Promise.resolve(!1):function(e){return e="number"==typeof e?e:0,new Promise((function(t){return setTimeout(t,e)}))}().then(e))}().then((function(e){return r.disconnect(),e}),(function(e){throw r.disconnect(),e}))}},5172:(e,t,n)=>{"use strict";var r=n(5068);e.exports=function(e,t,i,a,o){a="number"==typeof a?a:3;var s=0,c=n(873),u={},l=c.getOrCreate(u);return function n(){return t(i).then((function(t){return(i.audio?r(l,t,o).catch((function(t){return e.warn("Encountered an error while detecting silence",t),!0})):Promise.resolve(!1)).then((function(r){return r?a<=0?(e.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),t):(e.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++s+"."),t.getTracks().forEach((function(e){return e.stop()})),a--,n()):(e.info("Got a non-silent audio MediaStreamTrack; returning it."),t)}))}))}().then((function(e){return c.release(u),e}),(function(e){throw c.release(u),e}))}},347:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=n(7792),a=i.flatMap,o=i.guessBrowser,s=i.guessBrowserVersion,c=n(9921).getSdpFormat,u=o(),l=s(),d="chrome"===u,p="firefox"===u,h="safari"===u,f=d?l.major:null;function m(e){var t=Array.from(e.values()).find((function(e){var t=e.nominated;return"candidate-pair"===e.type&&t}));if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o=n?a.reduce((function(e,t){var r=t.key,i=t.type;return e[r]=typeof n[r]===i?n[r]:"deleted"!==r&&null,e}),{}):null,s=r?i.reduce((function(e,t){var n=t.key,i=t.type;return e[n]=typeof r[n]===i?r[n]:null,e}),{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(e){return"inprogress"===e?"in-progress":e}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce((function(e,n){var r=n.key,i=n.type,a=n.fixup;return e[r]=typeof t[r]===i?a?a(t[r]):t[r]:null,e}),{localCandidate:o,remoteCandidate:s})}function g(e){var t=Array.from(e.values()).find((function(e){var t=e.nominated;return"candidate-pair"===e.type&&t}));if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=n?a.reduce((function(e,t){var r=t.ffKeys,i=t.key,a=t.type,s=r&&r.find((function(e){return e in n}))||i;return e[i]=typeof n[s]===a?"candidateType"===s&&o[n[s]]||n[s]:"deleted"!==s&&null,e}),{}):null,c=r?i.reduce((function(e,t){var n=t.ffKeys,i=t.key,a=t.type,s=n&&n.find((function(e){return e in r}))||i;return e[i]=typeof r[s]===a?"candidateType"===s&&o[r[s]]||r[s]:null,e}),{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce((function(e,n){var r=n.key,i=n.type;return e[r]=typeof t[r]===i?t[r]:null,e}),{localCandidate:s,remoteCandidate:c})}function _(e,t,n){var r="local"===n?"getSenders":"getReceivers";if(e[r])return e[r]().map((function(e){return e.track})).filter((function(e){return e&&e.kind===t}));var i="audio"===t?"getAudioTracks":"getVideoTracks";return a(e["local"===n?"getLocalStreams":"getRemoteStreams"](),(function(e){return e[i]()}))}function v(e,t,n){return f&&f<67?new Promise((function(n,r){e.getStats((function(e){n([y(e,t)])}),null,r)})):e.getStats(t).then((function(e){return function(e,t){var n=t.simulateExceptionWhileStandardizingStats;if(void 0!==n&&n)throw new Error("Error while gathering stats");var r=null,i=[],a=null,o=null,s=null,c=null,u=null;e.forEach((function(e){switch(e.type){case"inbound-rtp":r=e;break;case"outbound-rtp":i.push(e);break;case"media-source":u=e;break;case"track":s=e;break;case"codec":c=e;break;case"remote-inbound-rtp":a=e;break;case"remote-outbound-rtp":o=e}}));var l=s?s.remoteSource:!u,d=[],p=l?o:a;return(l?[r]:i).forEach((function(e){var t={},n=[e,u,s,c,p&&p.ssrc===e.ssrc?p:null];function r(e){var t=n.find((function(t){return t&&void 0!==t[e]}))||null;return t?t[e]:null}var i=r("ssrc");"number"==typeof i&&(t.ssrc=String(i));var a=r("timestamp");t.timestamp=Math.round(a);var o=r("mimeType");"string"==typeof o&&(o=o.split("/"),t.codecName=o[o.length-1]);var h=r("roundTripTime");"number"==typeof h&&(t.roundTripTime=Math.round(1e3*h));var f=r("jitter");"number"==typeof f&&(t.jitter=Math.round(1e3*f));var m=r("frameWidth");"number"==typeof m&&(l?t.frameWidthReceived=m:(t.frameWidthSent=m,t.frameWidthInput=s?s.frameWidth:u.width));var g=r("frameHeight");"number"==typeof g&&(l?t.frameHeightReceived=g:(t.frameHeightSent=g,t.frameHeightInput=s?s.frameHeight:u.height));var _=r("framesPerSecond");"number"==typeof _&&(t[l?"frameRateReceived":"frameRateSent"]=_);var v=r("bytesReceived");"number"==typeof v&&(t.bytesReceived=v);var y=r("bytesSent");"number"==typeof y&&(t.bytesSent=y);var b=r("packetsLost");"number"==typeof b&&(t.packetsLost=b);var w=r("packetsReceived");"number"==typeof w&&(t.packetsReceived=w);var k=r("packetsSent");"number"==typeof k&&(t.packetsSent=k);var x=r("audioLevel");"number"==typeof x&&(x=Math.round(32767*x),l?t.audioOutputLevel=x:t.audioInputLevel=x);var S=r("totalPacketSendDelay");"number"==typeof S&&(t.totalPacketSendDelay=S);var T=r("totalEncodeTime");"number"==typeof T&&(t.totalEncodeTime=T);var C=r("framesEncoded");"number"==typeof C&&(t.framesEncoded=C);var E=r("estimatedPlayoutTimestamp");"number"==typeof E&&(t.estimatedPlayoutTimestamp=E);var I=r("totalDecodeTime");"number"==typeof I&&(t.totalDecodeTime=I);var N=r("framesDecoded");"number"==typeof N&&(t.framesDecoded=N);var A=r("jitterBufferDelay");"number"==typeof A&&(t.jitterBufferDelay=A);var O=r("jitterBufferEmittedCount");"number"==typeof O&&(t.jitterBufferEmittedCount=O),d.push(t)})),d}(e,n)}))}function y(e,t){var n=e.result().find((function(e){return"ssrc"===e.type&&e.stat("googTrackId")===t.id})),r={};return n&&(r.timestamp=Math.round(Number(n.timestamp)),r=n.names().reduce((function(e,t){switch(t){case"googCodecName":e.codecName=n.stat(t);break;case"googRtt":e.roundTripTime=Number(n.stat(t));break;case"googJitterReceived":e.jitter=Number(n.stat(t));break;case"googFrameWidthInput":e.frameWidthInput=Number(n.stat(t));break;case"googFrameHeightInput":e.frameHeightInput=Number(n.stat(t));break;case"googFrameWidthSent":e.frameWidthSent=Number(n.stat(t));break;case"googFrameHeightSent":e.frameHeightSent=Number(n.stat(t));break;case"googFrameWidthReceived":e.frameWidthReceived=Number(n.stat(t));break;case"googFrameHeightReceived":e.frameHeightReceived=Number(n.stat(t));break;case"googFrameRateInput":e.frameRateInput=Number(n.stat(t));break;case"googFrameRateSent":e.frameRateSent=Number(n.stat(t));break;case"googFrameRateReceived":e.frameRateReceived=Number(n.stat(t));break;case"ssrc":e[t]=n.stat(t);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":e[t]=Number(n.stat(t))}return e}),r)),r}function b(e,t){void 0===e&&(e=new Map);var n=t.isRemote,r=t.simulateExceptionWhileStandardizingStats;if(void 0!==r&&r)throw new Error("Error while gathering stats");var i=null,a=null;e.forEach((function(t){var n=t.isRemote,r=t.remoteId,o=t.type;if(!n)switch(o){case"inbound-rtp":i=t,a=e.get(r);break;case"outbound-rtp":a=t,i=e.get(r)}}));var o=n?i:a,s=n?a:i;function c(e){return o&&void 0!==o[e]?o[e]:s&&void 0!==s[e]?s[e]:null}var u={},l=c("timestamp");u.timestamp=Math.round(l);var d=c("ssrc");"number"==typeof d&&(u.ssrc=String(d));var p=c("bytesSent");"number"==typeof p&&(u.bytesSent=p);var h=c("packetsLost");"number"==typeof h&&(u.packetsLost=h);var f=c("packetsSent");"number"==typeof f&&(u.packetsSent=f);var m=c("roundTripTime");"number"==typeof m&&(u.roundTripTime=Math.round(1e3*m));var g=c("jitter");"number"==typeof g&&(u.jitter=Math.round(1e3*g));var _=c("framerateMean");"number"==typeof _&&(u.frameRateSent=Math.round(_));var v=c("bytesReceived");"number"==typeof v&&(u.bytesReceived=v);var y=c("packetsReceived");"number"==typeof y&&(u.packetsReceived=y);var b=c("framerateMean");"number"==typeof b&&(u.frameRateReceived=Math.round(b));var w=c("totalPacketSendDelay");"number"==typeof w&&(u.totalPacketSendDelay=w);var k=c("totalEncodeTime");"number"==typeof k&&(u.totalEncodeTime=k);var x=c("framesEncoded");"number"==typeof x&&(u.framesEncoded=x);var S=c("estimatedPlayoutTimestamp");"number"==typeof S&&(u.estimatedPlayoutTimestamp=S);var T=c("totalDecodeTime");"number"==typeof T&&(u.totalDecodeTime=T);var C=c("framesDecoded");"number"==typeof C&&(u.framesDecoded=C);var E=c("jitterBufferDelay");"number"==typeof E&&(u.jitterBufferDelay=E);var I=c("jitterBufferEmittedCount");return"number"==typeof I&&(u.jitterBufferEmittedCount=I),u}e.exports=function(e,t){return e&&"function"==typeof e.getStats?function(e,t){var n=_(e,"audio","local"),i=_(e,"video","local"),o=_(e,"audio"),s=_(e,"video"),u={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},l=a([[n,"localAudioTrackStats",!1],[i,"localVideoTrackStats",!1],[o,"remoteAudioTrackStats",!0],[s,"remoteVideoTrackStats",!0]],(function(n){var i=r(n,3),a=i[0],o=i[1],s=i[2];return a.map((function(n){return function(e,t,n){void 0===n&&(n={});if(void 0!==n.testForChrome||d)return v(e,t,n);if(void 0!==n.testForFirefox||p)return function(e,t,n){return e.getStats(t).then((function(e){return[b(e,n)]}))}(e,t,n);if(void 0!==n.testForSafari||h)return void 0!==n.testForSafari||"unified"===c()?v(e,t,n):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" ")));return Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,n,Object.assign({isRemote:s},t)).then((function(e){e.forEach((function(e){e.trackId=n.id,u[o].push(e)}))}))}))}));return Promise.all(l).then((function(){return function(e,t){void 0===t&&(t={});if(void 0!==t.testForChrome||d||void 0!==t.testForSafari||h)return e.getStats().then(m);if(void 0!==t.testForFirefox||p)return e.getStats().then(g);return Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,t)})).then((function(e){return u.activeIceCandidatePair=e,u}))}(e,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},1694:e=>{"use strict";e.exports=function(e){return void 0===e&&(e={audio:!0,video:!0}),"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):Promise.reject(new Error("getUserMedia is not supported"))}},807:(e,t,n)=>{"use strict";var r={};Object.defineProperties(r,{getStats:{enumerable:!0,value:n(347)},getUserMedia:{enumerable:!0,value:n(1694)},MediaStream:{enumerable:!0,value:n(4423)},MediaStreamTrack:{enumerable:!0,value:n(9084)},RTCIceCandidate:{enumerable:!0,value:n(8412)},RTCPeerConnection:{enumerable:!0,value:n(2127)},RTCSessionDescription:{enumerable:!0,value:n(5153)}}),e.exports=r},4423:e=>{"use strict";"function"==typeof MediaStream?e.exports=MediaStream:e.exports=function(){throw new Error("MediaStream is not supported")}},9084:e=>{"use strict";"function"==typeof MediaStreamTrack?e.exports=MediaStreamTrack:e.exports=function(){throw new Error("MediaStreamTrack is not supported")}},8412:e=>{"use strict";"function"==typeof RTCIceCandidate?e.exports=RTCIceCandidate:e.exports=function(){throw new Error("RTCIceCandidate is not supported")}},7897:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(6303),c=n(6748),u=n(1846),l=n(4423),d=n(3901),p=n(9921),h=p.getSdpFormat,f=p.updatePlanBTrackIdsToSSRCs,m=p.updateUnifiedPlanTrackIdsToSSRCs,g=n(7792),_=g.delegateMethods,v=g.interceptEvent,y=g.isIOSChrome,b=g.legacyPromise,w=g.proxyProperties,k="unified"===h(),x=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this)||this,i=Object.assign(t.iceTransportPolicy?{iceTransports:t.iceTransportPolicy}:{},t);v(r,"datachannel"),v(r,"signalingstatechange");var s=h(i.sdpSemantics),c=new RTCPeerConnection(i,n);return Object.defineProperties(r,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new l},_peerConnection:{value:c},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:s},_senders:{value:new Map},_signalingStateLatch:{value:new u},_tracksToSSRCs:{value:new Map,writable:!0}}),c.addEventListener("datachannel",(function(e){I(e.channel),r.dispatchEvent(e)})),c.addEventListener("signalingstatechange",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];"stable"===c.signalingState&&(r._appliedTracksToSSRCs=new Map(r._tracksToSSRCs)),r._pendingLocalOffer||r._pendingRemoteOffer||r.dispatchEvent.apply(r,o([],a(e)))})),c.ontrack=function(){},"function"!=typeof c.addTrack&&c.addStream(r._localStream),w(RTCPeerConnection.prototype,r,c),r}return i(t,e),Object.defineProperty(t.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("function"==typeof this._peerConnection.addTrack)return(t=this._peerConnection).addTrack.apply(t,o([e],a(n)));if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+e.id+", \n        "+e.kind+"]: RTCPeerConnection is closed");var i=this._senders.get(e);if(i&&i.track)throw new Error("Cannot add MediaStreamTrack ['"+e.id+", \n        "+e.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(e),this._peerConnection.addStream(this._localStream),i=new d(e),this._senders.set(e,i),i},t.prototype.removeTrack=function(e){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if("function"==typeof this._peerConnection.addTrack)try{return this._peerConnection.removeTrack(e)}catch(e){}else{var t=e.track;if(!t)return;(e=this._senders.get(t))&&e.track&&(e.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(t),this._peerConnection.addStream(this._localStream))}},t.prototype.getSenders=function(){return"function"==typeof this._peerConnection.addTrack?this._peerConnection.getSenders():Array.from(this._senders.values())},t.prototype.addIceCandidate=function(e){for(var t,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then((function(){return n._peerConnection.addIceCandidate(e)})):this._peerConnection.addIceCandidate(e),r.length>0?b.apply(void 0,o([t],a(r))):t},t.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},t.prototype.createAnswer=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then((function(){return t._signalingStateLatch.lower(),t._peerConnection.createAnswer()})).then((function(e){return t._pendingRemoteOffer=null,t._rolledBackTracksToSSRCs.clear(),new s({type:"answer",sdp:N(t._sdpFormat,t._tracksToSSRCs,e.sdp)})}),(function(e){throw t._pendingRemoteOffer=null,e})):this._peerConnection.createAnswer().then((function(e){return t._rolledBackTracksToSSRCs.clear(),new s({type:"answer",sdp:N(t._sdpFormat,t._tracksToSSRCs,e.sdp)})})),n.length>1?b.apply(void 0,o([e],a(n))):e},t.prototype.createOffer=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=a(t,3),i=r[0],o=r[1],c=r[2]||i||{};if(y()){if(c.offerToReceiveVideo&&!this._audioTransceiver&&(!k||!T(this,"audio"))){delete c.offerToReceiveAudio;try{this._audioTransceiver=k?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(e){return Promise.reject(e)}}if(c.offerToReceiveVideo&&!this._videoTransceiver&&(!k||!T(this,"video"))){delete c.offerToReceiveVideo;try{this._videoTransceiver=k?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(e){return Promise.reject(e)}}}var u=this._peerConnection.createOffer(c).then((function(t){return e._rolledBackTracksToSSRCs.clear(),new s({type:t.type,sdp:N(e._sdpFormat,e._tracksToSSRCs,t.sdp)})}));return t.length>1?b(u,i,o):u},t.prototype.createDataChannel=function(e,t){t=function(e){e=Object.assign({},e),E()&&"maxPacketLifeTime"in e&&(e.maxRetransmitTime=e.maxPacketLifeTime);return e}(t);var n=this._peerConnection.createDataChannel(e,t);return I(n),n},t.prototype.setLocalDescription=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a(e,3),r=n[0],i=n[1],o=n[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var s=S(this,!0,r);return e.length>1?b(s,i,o):s},t.prototype.setRemoteDescription=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a(e,3),r=n[0],i=n[1],o=n[2];this._rolledBackTracksToSSRCs.clear();var s=S(this,!1,r);return e.length>1?b(s,i,o):s},t}(c);function S(e,t,n){var r,i,a=t?e._pendingLocalOffer:e._pendingRemoteOffer,o=t?e._pendingRemoteOffer:e._pendingLocalOffer,s=t?"have-local-offer":"have-remote-offer",c=t?"setLocalDescription":"setRemoteDescription";if(!t&&o&&"answer"===n.type)r=function(e,t){var n=e._pendingLocalOffer;return e._peerConnection.setLocalDescription(n).then((function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)})).then((function(){e._signalingStateLatch.lower()}))}(e,n);else if("offer"===n.type){if(e.signalingState!==s&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));a||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var u=e.signalingState;i=C(n),t?e._pendingLocalOffer=i:e._pendingRemoteOffer=i,r=Promise.resolve(),e.signalingState!==u&&r.then((function(){return e.dispatchEvent(new Event("signalingstatechange"))}))}else"rollback"===n.type&&(e.signalingState!==s?r=Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),(r=Promise.resolve()).then((function(){return e.dispatchEvent(new Event("signalingstatechange"))}))));return r||e._peerConnection[c](C(n))}function T(e,t){return!!e.getTransceivers().find((function(e){var n=e.receiver,r=(void 0===n?{}:n).track;return(void 0===r?{}:r).kind===t}))}function C(e){return e instanceof s&&e._description?e._description:new RTCSessionDescription(e)}function E(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function I(e){return Object.defineProperty(e,"maxRetransmits",{value:65535===e.maxRetransmits?null:e.maxRetransmits}),E()&&Object.defineProperty(e,"maxPacketLifeTime",{value:65535===e.maxRetransmitTime?null:e.maxRetransmitTime}),e}function N(e,t,n){return"unified"===e?m(t,n):f(t,n)}_(RTCPeerConnection.prototype,x.prototype,"_peerConnection"),e.exports=x},1758:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(6748),c=n(4308),u=n(9921).updateUnifiedPlanTrackIdsToSSRCs,l=n(7792),d=l.delegateMethods,p=l.interceptEvent,h=l.legacyPromise,f=l.proxyProperties,m=function(e){function t(t){var n=e.call(this)||this;p(n,"signalingstatechange");var r,i=new RTCPeerConnection(t);return Object.defineProperties(n,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:i},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}}),i.addEventListener("signalingstatechange",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._rollingBack||n.signalingState===r||(r=n.signalingState,n._isClosed?setTimeout((function(){return n.dispatchEvent.apply(n,o([],a(e)))})):n.dispatchEvent.apply(n,o([],a(e))))})),f(RTCPeerConnection.prototype,n,i),n}return i(t,e),Object.defineProperty(t.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localDescription",{get:function(){return v(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),t.prototype.createAnswer=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e=this._peerConnection.createAnswer().then((function(e){return _(t,e),v(e,t._initiallyNegotiatedDtlsRole)})),"function"==typeof n[0]?h.apply(void 0,o([e],a(n))):e},t.prototype.createOffer=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,i=a(t,3),o=i[0],s=i[1],l=i[2]||o||{};"have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState?r=g(this,"have-local-offer"===this.signalingState,(function(){return e.createOffer(l)})):r=this._peerConnection.createOffer(l);return r=r.then((function(t){return new c({type:t.type,sdp:u(e._tracksToSSRCs,t.sdp)})})),t.length>1?h(r,o,s):r},t.prototype.setLocalDescription=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,i=a(t),s=i[0],c=i.slice(1);return s&&"answer"===s.type&&"have-local-offer"===this.signalingState&&(r=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),r?t.length>1?h.apply(void 0,o([r],a(c))):r:(e=this._peerConnection).setLocalDescription.apply(e,o([],a(t)))},t.prototype.setRemoteDescription=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,i=a(t),s=i[0],c=i.slice(1);return s&&"have-remote-offer"===this.signalingState&&("answer"===s.type?r=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===s.type&&(r=g(this,!1,(function(){return e._peerConnection.setRemoteDescription(s)})))),r||(r=this._peerConnection.setRemoteDescription(s)),r=r.then((function(){return _(e,s,!0)})),t.length>1?h.apply(void 0,o([r],a(c))):r},t.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},t}(s);function g(e,t,n){var r=t?"setLocalDescription":"setRemoteDescription";return e._rollingBack=!0,e._peerConnection[r](new c({type:"rollback"})).then(n).then((function(t){return e._rollingBack=!1,t}),(function(t){throw e._rollingBack=!1,t}))}function _(e,t,n){if(!e._initiallyNegotiatedDtlsRole&&"offer"!==t.type){var r=t.sdp.match(/a=setup:([a-z]+)/);if(r){var i=r[1];e._initiallyNegotiatedDtlsRole=n?{active:"passive",passive:"active"}[i]:i}}}function v(e,t){return e&&"answer"===e.type&&t?new c({type:e.type,sdp:e.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+t)}):e}d(RTCPeerConnection.prototype,m.prototype,"_peerConnection"),e.exports=m},2127:(e,t,n)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,n(7792).guessBrowser)()){case"chrome":e.exports=n(7897);break;case"firefox":e.exports=n(1758);break;case"safari":e.exports=n(6491);break;default:e.exports=RTCPeerConnection}else e.exports=function(){throw new Error("RTCPeerConnection is not supported")}},6491:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=n(6748),c=n(1846),u=n(9921),l=u.getSdpFormat,d=u.updatePlanBTrackIdsToSSRCs,p=u.updateUnifiedPlanTrackIdsToSSRCs,h=n(7792),f=h.delegateMethods,m=h.interceptEvent,g=h.proxyProperties,_="unified"===l(),v=_?p:d,y=function(e){function t(t){var n=e.call(this)||this;m(n,"datachannel"),m(n,"iceconnectionstatechange"),m(n,"signalingstatechange"),m(n,"track");var r=new RTCPeerConnection(t);return Object.defineProperties(n,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:r},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new c},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),r.addEventListener("datachannel",(function(e){k(e.channel),n.dispatchEvent(e)})),r.addEventListener("iceconnectionstatechange",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._isClosed||n.dispatchEvent.apply(n,o([],a(e)))})),r.addEventListener("signalingstatechange",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n._isClosed||("stable"===r.signalingState&&(n._appliedTracksToSSRCs=new Map(n._tracksToSSRCs)),n._pendingLocalOffer||n._pendingRemoteOffer||n.dispatchEvent.apply(n,o([],a(e))))})),r.addEventListener("track",(function(e){n._pendingRemoteOffer=null,n.dispatchEvent(e)})),g(RTCPeerConnection.prototype,n,r),n}return i(t,e),Object.defineProperty(t.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),t.prototype.addIceCandidate=function(e){var t=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then((function(){return t._peerConnection.addIceCandidate(e)})):this._peerConnection.addIceCandidate(e)},t.prototype.createOffer=function(e){var t=this;if((e=Object.assign({},e)).offerToReceiveVideo&&!this._audioTransceiver&&(!_||!w(this,"audio"))){delete e.offerToReceiveAudio;try{this._audioTransceiver=_?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(e){return Promise.reject(e)}}if(e.offerToReceiveVideo&&!this._videoTransceiver&&(!_||!w(this,"video"))){delete e.offerToReceiveVideo;try{this._videoTransceiver=_?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(e){return Promise.reject(e)}}return this._peerConnection.createOffer(e).then((function(e){return t._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:e.type,sdp:v(t._tracksToSSRCs,e.sdp)})}))},t.prototype.createAnswer=function(e){var t=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then((function(){return t._signalingStateLatch.lower(),t._peerConnection.createAnswer()})).then((function(e){return t._pendingRemoteOffer=null,t._rolledBackTracksToSSRCs.clear(),_?new RTCSessionDescription({type:e.type,sdp:v(t._tracksToSSRCs,e.sdp)}):e}),(function(e){throw t._pendingRemoteOffer=null,e})):this._peerConnection.createAnswer(e).then((function(e){return t._rolledBackTracksToSSRCs.clear(),_?new RTCSessionDescription({type:e.type,sdp:v(t._tracksToSSRCs,e.sdp)}):e}))},t.prototype.createDataChannel=function(e,t){var n=this._peerConnection.createDataChannel(e,t);return k(n),n},t.prototype.removeTrack=function(e){e.replaceTrack(null),this._peerConnection.removeTrack(e)},t.prototype.setLocalDescription=function(e){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),b(this,!0,e)},t.prototype.setRemoteDescription=function(e){return this._rolledBackTracksToSSRCs.clear(),b(this,!1,e)},t.prototype.close=function(){var e=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout((function(){e.dispatchEvent(new Event("iceconnectionstatechange")),e.dispatchEvent(new Event("signalingstatechange"))})))},t}(s);function b(e,t,n){var r,i=t?e._pendingLocalOffer:e._pendingRemoteOffer,a=t?e._pendingRemoteOffer:e._pendingLocalOffer,o=t?"have-local-offer":"have-remote-offer",s=t?"setLocalDescription":"setRemoteDescription";if(!t&&a&&"answer"===n.type)return function(e,t){var n=e._pendingLocalOffer;return e._peerConnection.setLocalDescription(n).then((function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)})).then((function(){return e._signalingStateLatch.lower()}))}(e,n);if("offer"===n.type){if(e.signalingState!==o&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+"\n        offer in state "+e.signalingState));i||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var c=e.signalingState;return r=n,t?e._pendingLocalOffer=r:e._pendingRemoteOffer=r,e.signalingState!==c?Promise.resolve().then((function(){return e.dispatchEvent(new Event("signalingstatechange"))})):Promise.resolve()}return"rollback"===n.type?e.signalingState!==o?Promise.reject(new Error("Cannot rollback \n        "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),Promise.resolve().then((function(){return e.dispatchEvent(new Event("signalingstatechange"))}))):e._peerConnection[s](n)}function w(e,t){return!!e.getTransceivers().find((function(e){var n=e.receiver,r=(void 0===n?{}:n).track;return(void 0===r?{}:r).kind===t}))}function k(e){return Object.defineProperties(e,{maxPacketLifeTime:{value:65535===e.maxPacketLifeTime?null:e.maxPacketLifeTime},maxRetransmits:{value:65535===e.maxRetransmits?null:e.maxRetransmits}})}f(RTCPeerConnection.prototype,y.prototype,"_peerConnection"),e.exports=y},3901:e=>{"use strict";var t=function(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})};e.exports=t},6303:e=>{"use strict";var t=function(){function e(e){this.descriptionInitDict=e;var t=e&&"rollback"===e.type?null:new RTCSessionDescription(e);Object.defineProperties(this,{_description:{get:function(){return t}}})}return Object.defineProperty(e.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),e}();e.exports=t},4308:e=>{"use strict";e.exports=RTCSessionDescription},5153:(e,t,n)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,n(7792).guessBrowser)()){case"chrome":e.exports=n(6303);break;case"firefox":e.exports=n(4308);break;default:e.exports=RTCSessionDescription}else e.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7792:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function i(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i=!1;try{var a=Object.getOwnPropertyDescriptor(e,r);i=a&&!!a.get}catch(e){}if(!i){var o;try{o=typeof e[r]}catch(e){}"function"===o&&(t[r]=function(){return this[n][r].apply(this[n],arguments)})}}}function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function o(e){return void 0===e&&(e=a()),/Chrome|CriOS/.test(e)?"chrome":/Firefox|FxiOS/.test(e)?"firefox":/Safari|iPhone|iPad|iPod/.test(e)?"safari":null}var s=new Map;t.clearCachedSupportedCodecs=function(){s.clear()},t.defer=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},t.delegateMethods=function(e,t,n){for(var r in e)i(e,t,n,r)},t.difference=function(e,t){e=Array.isArray(e)?new Set(e):new Set(e.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n},t.flatMap=function(e,t){return(e instanceof Map||e instanceof Set?Array.from(e.values()):e).reduce((function(e,n){return e.concat(t(n))}),[])},t.guessBrowser=o,t.guessBrowserVersion=function(e){void 0===e&&(e=a());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[o(e)];if(!t)return null;var r=new RegExp("("+t+")/([^\\s]+)"),i=n(e.match(r)||[],3)[2];if(!i)return null;var s=i.split(".").map(Number);return{major:isNaN(s[0])?null:s[0],minor:isNaN(s[1])?null:s[1]}},t.isCodecSupported=function(e,t){var n=s.get(t);return n?Promise.resolve(n.has(e.toLowerCase())):function(e){if("undefined"!=typeof RTCRtpSender&&"function"==typeof RTCRtpSender.getCapabilities)return Promise.resolve(new Set(RTCRtpSender.getCapabilities(e).codecs.map((function(e){return e.mimeType.split("/")[1].toLowerCase()}))));if("undefined"==typeof RTCPeerConnection||void 0===RTCPeerConnection.prototype||"function"!=typeof RTCPeerConnection.prototype.addTransceiver||"function"!=typeof RTCPeerConnection.prototype.close||"function"!=typeof RTCPeerConnection.prototype.createOffer)return Promise.resolve(new Set);var t=new RTCPeerConnection;return t.addTransceiver(e),t.createOffer().then((function(e){var n=e.sdp;return t.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map((function(e){return e.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()})))}),(function(){return t.close(),new Set}))}(t).then((function(n){return s.set(t,n),n.has(e.toLowerCase())}))},t.isIOSChrome=function(e){return void 0===e&&(e=a()),/Mobi/.test(e)&&"chrome"===o()&&/iPad|iPhone|iPod/.test(e)},t.interceptEvent=function(e,t){var n=null;Object.defineProperty(e,"on"+t,{get:function(){return n},set:function(e){n&&this.removeEventListener(t,n),"function"==typeof e?(n=e,this.addEventListener(t,n)):n=null}})},t.legacyPromise=function(e,t,n){return t?e.then(t,n):e},t.makeUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.proxyProperties=function(e,t,i){Object.getOwnPropertyNames(e).forEach((function(e){!function(e,t,i,a){if(a in t)return;if(a.match(/^on[a-z]+$/))return Object.defineProperty(t,a,{value:null,writable:!0}),void i.addEventListener(a.slice(2),(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.dispatchEvent.apply(t,r([],n(e)))}));Object.defineProperty(t,a,{enumerable:!0,get:function(){return i[a]}})}(0,t,i,e)}))},t.support=function(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},1846:(e,t,n)=>{"use strict";var r=n(7792).defer,i={high:new Set(["low"]),low:new Set(["high"])},a=function(){function e(e){void 0===e&&(e="low");var t=e;Object.defineProperties(this,{_state:{set:function(e){var n=this;if(t!==e){t=e;var r=this._whenDeferreds.get(t);r.forEach((function(e){return e.resolve(n)})),r.clear()}},get:function(){return t}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.lower=function(){return this.transition("low")},e.prototype.raise=function(){return this.transition("high")},e.prototype.transition=function(e){if(!i[this.state].has(e))throw o(this.state,e);return this._state=e,this},e.prototype.when=function(e){if(this.state===e)return Promise.resolve(this);if(!i[this.state].has(e))return Promise.reject(o(this.state,e));var t=r();return this._whenDeferreds.get(e).add(t),t.promise},e}();function o(e,t){return new Error('Cannot transition from "'+e+'" to "'+t+'"')}e.exports=a},9921:(e,t,n)=>{"use strict";var r=n(7792),i=r.flatMap,a=r.guessBrowser,o=null;var s=null;function c(e){return e&&function(){if("boolean"==typeof o)return o;if("undefined"==typeof RTCPeerConnection)return o=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),o=!1}catch(e){o=!0}return o}()?{"plan-b":"planb","unified-plan":"unified"}[e]:function(){if(!s)if("undefined"!=typeof RTCPeerConnection&&"addTransceiver"in RTCPeerConnection.prototype){var e=new RTCPeerConnection;try{e.addTransceiver("audio"),s="unified"}catch(e){s="planb"}e.close()}else s="planb";return s}()}function u(e,t){return(t.match(new RegExp(e,"gm"))||[]).reduce((function(t,n){var r=n.match(new RegExp(e));return r?t.add(r[1]):t}),new Set)}function l(e,t){return u(e,t)}function d(e){return l("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",e)}function p(e){return l("^a=msid:.+ +(.+) *$",e)}function h(e,t){return u("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$",e)}function f(e,t,n){return void 0===t&&(t=".*"),void 0===n&&(n=".*"),e.split("\r\nm=").slice(1).map((function(e){return"m="+e})).filter((function(e){var r=new RegExp("m="+t,"gm"),i=new RegExp("a="+n,"gm");return r.test(e)&&i.test(e)}))}function m(e){return Array.from(u("^a=ssrc:([0-9]+) +.*$",e))}function g(e,t){var n=f(e),r=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),a=n.filter((function(e){return e.match(r)}));return new Set(i(a,m))}function _(e,t,n){return new Map(Array.from(e(n)).map((function(e){return[e,t(n,e)]})))}function v(e){return _(d,h,e)}function y(e){return _(p,g,e)}function b(e,t,n){var r=e(n),i=new Map;r.forEach((function(e,r){if(t.has(r)){var a=Array.from(t.get(r)),o=Array.from(e);a.forEach((function(e,t){var r=o[t];i.set(r,e);var a="^a=ssrc:"+r+" (.*)$",s="a=ssrc:"+e+" $1";n=n.replace(new RegExp(a,"gm"),s)}))}else t.set(r,e)}));var a="^(a=ssrc-group:[^ ]+ +)(.*)$";return(n.match(new RegExp(a,"gm"))||[]).forEach((function(e){var t=e.match(new RegExp(a));if(t){var r=t[1],o=t[2].split(" ").map((function(e){var t=i.get(e);return t||e})).join(" ");n=n.replace(t[0],r+o)}})),n}t.clearChromeCachedSdpFormat=function(){s=null},t.getSdpFormat=function(e){return{chrome:c(e),firefox:"unified",safari:"undefined"!=typeof RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[a()]||null},t.getMediaSections=f,t.getPlanBTrackIds=d,t.getUnifiedPlanTrackIds=p,t.getPlanBSSRCs=h,t.getUnifiedPlanSSRCs=g,t.updatePlanBTrackIdsToSSRCs=function(e,t){return b(v,e,t)},t.updateUnifiedPlanTrackIdsToSSRCs=function(e,t){return b(y,e,t)}},3104:e=>{e.exports=WebSocket},6425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return g.default}});var r=_(n(2755)),i=_(n(3290)),a=_(n(3374)),o=_(n(5392)),s=_(n(3876)),c=_(n(9465)),u=_(n(8334)),l=_(n(7343)),d=_(n(2728)),p=_(n(1473)),h=_(n(3533)),f=_(n(546)),m=_(n(8483)),g=_(n(7305));function _(e){return e&&e.__esModule?e:{default:e}}},2755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},4501:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(c=a)|s>>>32-c,n);var s,c}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function c(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;for(var i=1732584193,u=-271733879,l=-1732584194,d=271733878,p=0;p<e.length;p+=16){var h=i,f=u,m=l,g=d;i=a(i,u,l,d,e[p],7,-680876936),d=a(d,i,u,l,e[p+1],12,-389564586),l=a(l,d,i,u,e[p+2],17,606105819),u=a(u,l,d,i,e[p+3],22,-1044525330),i=a(i,u,l,d,e[p+4],7,-176418897),d=a(d,i,u,l,e[p+5],12,1200080426),l=a(l,d,i,u,e[p+6],17,-1473231341),u=a(u,l,d,i,e[p+7],22,-45705983),i=a(i,u,l,d,e[p+8],7,1770035416),d=a(d,i,u,l,e[p+9],12,-1958414417),l=a(l,d,i,u,e[p+10],17,-42063),u=a(u,l,d,i,e[p+11],22,-1990404162),i=a(i,u,l,d,e[p+12],7,1804603682),d=a(d,i,u,l,e[p+13],12,-40341101),l=a(l,d,i,u,e[p+14],17,-1502002290),i=o(i,u=a(u,l,d,i,e[p+15],22,1236535329),l,d,e[p+1],5,-165796510),d=o(d,i,u,l,e[p+6],9,-1069501632),l=o(l,d,i,u,e[p+11],14,643717713),u=o(u,l,d,i,e[p],20,-373897302),i=o(i,u,l,d,e[p+5],5,-701558691),d=o(d,i,u,l,e[p+10],9,38016083),l=o(l,d,i,u,e[p+15],14,-660478335),u=o(u,l,d,i,e[p+4],20,-405537848),i=o(i,u,l,d,e[p+9],5,568446438),d=o(d,i,u,l,e[p+14],9,-1019803690),l=o(l,d,i,u,e[p+3],14,-187363961),u=o(u,l,d,i,e[p+8],20,1163531501),i=o(i,u,l,d,e[p+13],5,-1444681467),d=o(d,i,u,l,e[p+2],9,-51403784),l=o(l,d,i,u,e[p+7],14,1735328473),i=s(i,u=o(u,l,d,i,e[p+12],20,-1926607734),l,d,e[p+5],4,-378558),d=s(d,i,u,l,e[p+8],11,-2022574463),l=s(l,d,i,u,e[p+11],16,1839030562),u=s(u,l,d,i,e[p+14],23,-35309556),i=s(i,u,l,d,e[p+1],4,-1530992060),d=s(d,i,u,l,e[p+4],11,1272893353),l=s(l,d,i,u,e[p+7],16,-155497632),u=s(u,l,d,i,e[p+10],23,-1094730640),i=s(i,u,l,d,e[p+13],4,681279174),d=s(d,i,u,l,e[p],11,-358537222),l=s(l,d,i,u,e[p+3],16,-722521979),u=s(u,l,d,i,e[p+6],23,76029189),i=s(i,u,l,d,e[p+9],4,-640364487),d=s(d,i,u,l,e[p+12],11,-421815835),l=s(l,d,i,u,e[p+15],16,530742520),i=c(i,u=s(u,l,d,i,e[p+2],23,-995338651),l,d,e[p],6,-198630844),d=c(d,i,u,l,e[p+7],10,1126891415),l=c(l,d,i,u,e[p+14],15,-1416354905),u=c(u,l,d,i,e[p+5],21,-57434055),i=c(i,u,l,d,e[p+12],6,1700485571),d=c(d,i,u,l,e[p+3],10,-1894986606),l=c(l,d,i,u,e[p+10],15,-1051523),u=c(u,l,d,i,e[p+1],21,-2054922799),i=c(i,u,l,d,e[p+8],6,1873313359),d=c(d,i,u,l,e[p+15],10,-30611744),l=c(l,d,i,u,e[p+6],15,-1560198380),u=c(u,l,d,i,e[p+13],21,1309151649),i=c(i,u,l,d,e[p+4],6,-145523070),d=c(d,i,u,l,e[p+11],10,-1120210379),l=c(l,d,i,u,e[p+2],15,718787259),u=c(u,l,d,i,e[p+9],21,-343485551),i=r(i,h),u=r(u,f),l=r(l,m),d=r(d,g)}return[i,u,l,d]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(n(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))}},4726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},3290:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},3374:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8483))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},2310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},5732:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var r=new Uint8Array(16)},8240:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,c=Math.ceil(s/16),u=new Array(c),l=0;l<c;++l){for(var d=new Uint32Array(16),p=0;p<16;++p)d[p]=e[64*l+4*p]<<24|e[64*l+4*p+1]<<16|e[64*l+4*p+2]<<8|e[64*l+4*p+3];u[l]=d}u[c-1][14]=8*(e.length-1)/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<c;++h){for(var f=new Uint32Array(80),m=0;m<16;++m)f[m]=u[h][m];for(var g=16;g<80;++g)f[g]=r(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);for(var _=i[0],v=i[1],y=i[2],b=i[3],w=i[4],k=0;k<80;++k){var x=Math.floor(k/20),S=r(_,5)+n(x,v,y,b)+w+t[x]+f[k]>>>0;w=b,b=y,y=r(v,30)>>>0,v=_,_=S}i[0]=i[0]+_>>>0,i[1]=i[1]+v>>>0,i[2]=i[2]+y>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+w>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}},5392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(8483))&&r.__esModule?r:{default:r};for(var a=[],o=0;o<256;++o)a.push((o+256).toString(16).slice(1));function s(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}t.default=function(e,t=0){var n=s(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n}},3876:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,o=(r=n(5732))&&r.__esModule?r:{default:r},s=n(5392);var c=0,u=0;t.default=function(e,t,n){var r=t&&n||0,l=t||new Array(16),d=(e=e||{}).node,p=e.clockseq;if(e._v6||(d||(d=i),null==p&&(p=a)),null==d||null==p){var h=e.random||(e.rng||o.default)();null==d&&(d=[h[0],h[1],h[2],h[3],h[4],h[5]],i||e._v6||(d[0]|=1,i=d)),null==p&&(p=16383&(h[6]<<8|h[7]),void 0!==a||e._v6||(a=p))}var f=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:u+1,g=f-c+(m-u)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=m,a=p;var _=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;l[r++]=_>>>24&255,l[r++]=_>>>16&255,l[r++]=_>>>8&255,l[r++]=255&_;var v=f/4294967296*1e4&268435455;l[r++]=v>>>8&255,l[r++]=255&v,l[r++]=v>>>24&15|16,l[r++]=v>>>16&255,l[r++]=p>>>8|128,l[r++]=255&p;for(var y=0;y<6;++y)l[r+y]=d[y];return t||(0,s.unsafeStringify)(l)}},9465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,i.default)(e):e);return"string"==typeof e?(0,a.unsafeStringify)(t):t};var r,i=(r=n(3374))&&r.__esModule?r:{default:r},a=n(5392)},8334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6439)),i=a(n(4501));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},6439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,a.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+e.length);if(u.set(r),u.set(e,r.length),(u=n(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,o){s=s||0;for(var l=0;l<16;++l)o[s+l]=u[l];return o}return(0,i.unsafeStringify)(u)}try{r.name=e}catch(e){}return r.DNS=o,r.URL=s,r};var r,i=n(5392),a=(r=n(3374))&&r.__esModule?r:{default:r};var o=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},7343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4726)),i=o(n(5732)),a=n(5392);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,a.unsafeStringify)(o)}},2728:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6439)),i=a(n(8240));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},1473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t,n=0){var o=(0,i.default)(c(c({},e),{},{_v6:!0}),new Uint8Array(16));if(o=(0,a.default)(o),t){for(var s=0;s<16;s++)t[n+s]=o[s];return t}return(0,r.unsafeStringify)(o)};var r=n(5392),i=o(n(3876)),a=o(n(9465));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},3533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){return Uint8Array.of((15&e[3])<<4|e[4]>>4&15,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|15&e[6],e[7],(15&e[1])<<4|(240&e[2])>>4,(15&e[2])<<4|(240&e[3])>>4,16|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,i.default)(e):e);return"string"==typeof e?(0,a.unsafeStringify)(t):t};var r,i=(r=n(3374))&&r.__esModule?r:{default:r},a=n(5392)},546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5732))&&r.__esModule?r:{default:r},a=n(5392);var o=null,s=null,c=0;t.default=function(e,t,n){e=e||{};var r=t&&n||0,u=t||new Uint8Array(16),l=e.random||(e.rng||i.default)(),d=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.seq?e.seq:null,h=s,f=o;return d>c&&void 0===e.msecs&&(c=d,null!==p&&(h=null,f=null)),null!==p&&(p>2147483647&&(p=2147483647),h=p>>>19&4095,f=524287&p),null!==h&&null!==f||(h=(h=127&l[6])<<8|l[7],f=(f=(f=63&l[8])<<8|l[9])<<5|l[10]>>>3),d+1e4>c&&null===p?++f>524287&&(f=0,++h>4095&&(h=0,c++)):c=d,s=h,o=f,u[r++]=c/1099511627776&255,u[r++]=c/4294967296&255,u[r++]=c/16777216&255,u[r++]=c/65536&255,u[r++]=c/256&255,u[r++]=255&c,u[r++]=h>>>4&15|112,u[r++]=255&h,u[r++]=f>>>13&63|128,u[r++]=f>>>5&255,u[r++]=f<<3&255|7&l[10],u[r++]=l[11],u[r++]=l[12],u[r++]=l[13],u[r++]=l[14],u[r++]=l[15],t||(0,a.unsafeStringify)(u)}},8483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2310))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},7305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8483))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},675:()=>{},1624:()=>{},5824:()=>{},2582:()=>{},7689:()=>{},4540:()=>{},3906:e=>{"use strict";e.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.28.1","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"6.4.1","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:unit:quick":"nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov mocha -r ts-node/register","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@19.2.2","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && mkdir -p es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')},5595:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"Penderfyniad 1280x720","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 ac uwch","1_mbps":"1 Mbps","360_video":"Fideo 360°","3_mbps":"3 Mbps","640x480_resolution":"Penderfyniad 640x480","Unpublished":"Heb ei gyhoeddi","__none__":"--Dim--","access_code":"Cod Mynediad","account_manager":"Rheolwr Cyfrif","action":"Gweithred","actions":"Gweithredoedd","add":"Ychwanegu","add_assessment":"Ychwanegu Asesiad","add_candidates":"Ychwanegu Ymgeiswyr","add_description":"Ychwanegu Disgrifiad","add_exam":"Ychwanegu Arholiad","add_file":"Ychwanegu Ffeil","add_question":"Ychwanegu Cwestiwn","add_questions":"Ychwanegu Cwestiynau","add_quiz":"Ychwanegu holiadur","add_solution":"Ychwanegu Ateb","add_url":"YCHWANEGU URL","advance_filter":"Hidlydd Uwch","advanced_filter_search":"Chwilio Hidlydd Uwch","agree_by_clicking":"Trwy glicio ar y botwm rydych yn cytuno â\'r Telerau ac Amodau","ai_anomalies":"Anomaleddau AI","ai_recorder_unknown_violation":"Mae toriad anhysbys wedi’i gofnodi gan AI","all":"Pob","all_questions":"Pob Cwestiwn","allow_access_to_popups":"Caniatáu mynediad i\'r pop-ups canlynol sy\'n ymddangos, fel y dangosir isod:","allow_interruption":"Caniatáu ymyrraeth","allow_question_skip":"Caniatáu Neidio Cwestiwn","and":"a","anomalies":"Anomaleddau","answer":"Ateb","answer_is_mandatory":"Mae ateb pob cwestiwn yn orfodol.","answered":"Atebwyd","apply_a_settings_profile_for_this_exam":"Defnyddio proffil gosodiadau ar gyfer yr arholiad hwn","apply_filter":"Defnyddio Hidlydd","archive":"Archif","are_you_sure_want_to_leave":"Ydych chi\'n siŵr eich bod eisiau gadael?","are_you_sure_you_want_to_delete_this_candidate":"Ydych chi\'n siŵr eich bod am ddileu\'r ymgeisydd hwn?","ask_anything_about_the_extension":"Gallwch ofyn unrhyw beth am yr estyniad. Sut alla i\'ch helpu?","assessment":"Asesiad","assessment_complete":"ASESIAD WEDI\'I GWBLHAU","assessment_completed":"Asesiad wedi\'i gwblhau\'n llwyddiannus","assessment_date_updated_successfully":"Dyddiad yr asesiad wedi\'i ddiweddaru\'n llwyddiannus","assessment_duration_invalid_please_contact_support":"Hyd yr asesiad yn annilys. Cysylltwch â chymorth!","assessment_expired":"Mae\'r asesiad wedi dod i ben.","assessment_id":"Id Asesiad","assessment_indications_read":"Arwyddion Asesiad wedi\'u darllen","assessment_invitation":"Gwahoddiad Asesiad","assessment_link":"Dolen Asesiad","assessment_list":"Rhestr Asesiad","assessment_loaded":"Asesiad wedi\'i lwytho\'n llwyddiannus","assessment_name":"Enw Asesiad","assessment_passed":"Asesiad wedi\'i basio","assessment_preinstructions_read_successfully":"Cyfarwyddiadau cyn-asesiad wedi\'u darllen yn llwyddiannus","assessment_restriction":"Cyfyngiad Asesiad","assessment_saved":"Asesiad wedi\'i gadw\'n llwyddiannus","assessment_sections":"Adrannau Asesiad","assessment_start_in_5":"Asesiad yn dechrau mewn 5","assessment_stat":"Ystadegyn Asesiad","assessment_status_change":"Newid Statws Asesiad","assessment_tool":"Offeryn Asesiad","assessment_window":"Ffenestr Asesiad","assessments":"Asesiadau","assign_panel":"Neilltuo Panel","assign_proctor":"Neilltuo Goruchwyliwr","assignment_name_required":"Mae angen enw asesiad","attach_file":"Atodi Ffeil","attempt":"Ymgais","attend_test_quitely":"Mynychu\'r prawf mewn amgylchedd tawel heb unrhyw dyniadau.","attending":"Yn mynychu","audio_check":"Gwirio Sain","audio_check_completed":"Gwirio Sain wedi\'i gwblhau","audio_check_msg":"Cliciwch ar y botwm \\"Cofnodi\\" a darllenwch y frawddeg isod.","audio_detected_click_next":"Yn y sgrin nesaf, byddwn yn canfod eich sain. Cliciwch ar y botwm NESAF i symud ymlaen ar ôl darllen y cynghorion isod.","audio_level":"Lefel Sain","audio_recordings":"Cofnodion Sain","audio_test_failed":"Prawf sain wedi methu!","audio_test_passed":"Prawf sain wedi\'i basio!","audio_video_recorded":"Mae\'r asesiad hwn yn cael ei oruchwylio. Bydd eich sain a\'ch fideo yn cael eu cofnodi drwy gydol y sesiwn.","automate_the_routine_tasks_employ_your_time_wisely":"Awtomeiddio\'r tasgau arferol, defnyddiwch eich amser yn ddoeth.","available":"Ar gael","back":"Yn ôl","back_to_Instructions":"Yn ôl i Gyfarwyddiadau","back_to_exams":"Yn ôl i Arholiadau","back_to_gradebook":"Yn ôl i Lyfr Graddau","bad":"Drwg","basic_information":"Gwybodaeth Sylfaenol","be_loud_clear":"Ceisiwch siarad yn uchel ac yn glir a chadwch y meicroffon yn agos at eich ceg.","begin_exam_now":"Rwy\'n derbyn, dechrau\'r arholiad nawr","block_browser_screenshot":"Blocio Sgrinlun Porwr","block_screen_recording":"Blocio Cofnodi Sgrin","body":"Corff","bridge_the_talent_and_timezone":"Pontio\'r dalent a\'r parth amser","browse_document":"Pori dogfen","browser_anomalies":"Anomaliaethau Porwr","browser_locked_successfully":"Porwr wedi\'i gloi\'n llwyddiannus","brussels":"Brwsel","bulk_import_items":"Mewnforio Eitemau yn Swmp","calculator":"Cyfrifiannell","camera_mic":"Camera a Meicroffon","camera_recordings":"Cofnodion Camera","cancel":"Canslo","cancellation":"Canslo","candidate":"Ymgeisydd","candidate_details_cannot_updated":"Methu diweddaru manylion yr ymgeisydd","candidate_email":"E-bost Ymgeisydd","candidate_group_id":"ID Grŵp","candidate_id_is_uploaded_successfully":"Llwyddwyd i lwytho ID yr ymgeisydd i fyny","candidate_identity_card":"Cerdyn Adnabod Ymgeisydd","candidate_invite_assessment_section_id":"ID Adran Gwahodd Asesiad Ymgeisydd","candidate_list":"Rhestr Ymgeiswyr","candidate_name":"Enw Ymgeisydd","candidate_photo":"Llun","candidate_photo_captured_successfully":"Llun ymgeisydd wedi’i ddal yn llwyddiannus","candidate_photo_uploaded_successfully":"Llwyddwyd i lwytho llun yr ymgeisydd i fyny","candidate_reinvite_successfully":"Ymgeisydd wedi’i ail-wahodd yn llwyddiannus","candidate_resized_window":"Mae’r ymgeisydd wedi newid maint y ffenestr","candidate_search":"Chwilio Ymgeisydd","candidate_successfully_created":"Ymgeisydd wedi’i greu’n llwyddiannus","candidate_successfully_updated":"Manylion ymgeisydd wedi\'u diweddaru\'n llwyddiannus","candidate_video_is_uploaded_successfully":"Llwyddwyd i lwytho fideo\'r ymgeisydd i fyny","candidates":"Ymgeiswyr","cant_be_modified_assessment_in_open_state":"methu ei addasu os yw\'r asesiad mewn cyflwr agored gan y bydd hyn yn cael effaith feirniadol ar adroddiadau\'r ymgeiswyr","capture":"Dal","capture_id":"Daliwch eich ID cyn i chi ddechrau llenwi\'r ffurflen.","capture_image_of_id_card":"Daliwch lun o\'ch cerdyn adnabod","catastrophic":"Trychinebus","category":"Categori","center_your_face":"Canolbwyntiwch eich wyneb yn y ffrâm a chliciwch y botwm isod.","cg":"CG","change_assessment_status":"Newid Statws Asesiad","change_candidate_invite_status":"Newid Statws Gwahoddiad Ymgeisydd","change_end_time":"Newid amser gorffen","change_invite_status":"Newid Panel Gwahoddiad","change_role":"Newid Rôl","change_roles":"Newid Rôlau","change_start_and_last_date":"Newid Dyddiad Cychwyn a\'r Dyddiad Olaf","change_start_date":"Newid Dyddiad Cychwyn","change_start_time":"Newid amser cychwyn","change_status":"Newid Statws","change_type":"Newid Math","cheating":"Twyllo","check_your_email":"Gwiriwch eich e-bost","chemisty":"Cemeg","choose_answer":"Yn yr adran hon, mae\'n rhaid i chi ddewis yr ateb cywir o\'r dewisiadau a roddir","chromebook_users":"Defnyddwyr Chromebook (Dim ond ar gyfer Proctorio Awtomatig. Nid yw\'n cael ei gefnogi ar gyfer Proctorio Byw)","chromebook_users_min_requirement":"Mae\'r ddyfais Chrome yn rhedeg fersiwn ddiweddaraf Chrome OS.","chromebook_users_recommended_requirement":"Mae\'r ddyfais Chrome yn rhedeg fersiwn ddiweddaraf Chrome OS.","clean_cache":"Glanhau Storfa","clear_filter":"Clirio Hidlydd","click_go":"Drwy glicio ar y botwm \\"MYND\\" rydych yn cytuno â\'r Telerau ac Amodau","click_here":"cliciwch yma","click_here_when_done":"Cliciwch yma pan fyddwch wedi gorffen","click_ok_to_agree":"Drwy glicio \'Nesaf\' rydych yn cytuno â\'r Telerau ac Amodau.","click_start_recording":"CLICIWCH DECHRAU COFNODI A DARLLENWCH Y TESTUN CANLYNOL","click_to_attempt":"Cliciwch ar gwestiwn i geisio","click_to_capture":"Cliciwch yma i ddal","click_to_submit_anwsers":"I gyflwyno\'r adran cliciwch ar y botwm \\"Cyflwyno\'r Holl Atebion\\" yn y sgrin Adolygu. (Ni ellir ail-wneud y cam hwn)","click_to_upload":"Cliciwch yma i uwchlwytho","clicking_here":"clicio yma","close":"Cau","close_open_tabs":"Cau Tabiau Agored","close_window":"Gallwch gau\'r ffenestr nawr.","closed":"Ar gau","code":"Cod","collapse":"Crebachu","column_visibility":"Gwelededd Colofn","comment":"Sylw","comment_suggestion":"Sylw/Awgrym","complete":"Wedi\'i Gwblhau","complete_assessment":"Cwblhau Asesiad","completed":"Wedi\'i Gwblhau","completed_at":"Wedi\'i gwblhau ar","configuration":"Ffurfweddiad","confirm":"Cadarnhau","confirmation_delete_msg":"Ni ellir dadwneud y newid hwn, a ydych yn siŵr eich bod am ddileu\'r rhestr chwarae yn barhaol?","connection":"Cysylltiad","connectivity_ports":"Porthladdoedd Cysylltedd","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Cyswllt","contact_support":"Cysylltu â Chymorth","contact_us":"Cysylltwch â ni","content_manager":"Rheolwr Cynnwys","continue":"Parhau","conversion_ratio":"Cymhareb Trosi","coordinates":"Cydlynniadau","correct":"Cywir","course_id":"ID Cwrs","cpu":"CPU","cpu_error":"Nid yw\'r system hon yn cyfateb i\'r gofynion CPU.","cpu_min_requirement":"mwy na 1.3 GHz llai na 50% Defnydd CPU","cpu_recommended_requirement":"mwy na 2.3 GHz llai na 85% Defnydd CPU","create":"Creu","create_a_panel":"Creu Panel","create_a_playlist":"Creu Rhestr Chwarae","create_account":"Creu eich cyfrif","create_an_account":"Creu cyfrif","create_an_assessment":"Creu Asesiad","create_assessment":"Creu Asesiad","create_candidate":"Creu Ymgeisydd","create_panel":"Creu Panel","create_playlist":"Creu Rhestr Chwarae","create_quiz":"Creu cwis","created_at":"Crëwyd ar","creation_date":"Dyddiad Creu","current_invites_status":"Statws Gwahoddiadau Cyfredol","customize_proctoring_options_below":"Personoleiddiwch eich profiad arholiad trwy ddewis o\'r opsiynau goruchwylio isod.","dashboard":"Dangosfwrdd","date":"Dyddiad","deadline":"Dyddiad Cau","delete":"Dileu","delete_assessment":"Dileu Asesiad","delete_candidate":"Dileu Ymgeisydd","delete_playlist":"Dileu Rhestr Chwarae","description":"Disgrifiad","description_cant_be_empty":"Ni all y disgrifiad fod yn wag.","description_of_the_scam":"Disgrifiad o\'r Twyll","desktop":"Bwrdd Gwaith","desktop_error":"Mae sgrin arall wedi\'i darganfod, i fynd ymlaen ymhellach, sicrhewch eich bod wedi datgysylltu sgrin arall.","detail_view":"Golwg Fanwl","detailed_view":"Golwg Fanwl","detect_resizing_of_window":"Canfod Ailfeintio Ffenestr","detect_unfocus":"Canfod Anffocws","detected_face_successfully":"Wyneb yr ymgeisydd wedi\'i ddarganfod yn llwyddiannus.","detected_for_more_than_10_seconds":"Wedi\'i ganfod am fwy na 10 eiliad!","detecting_audio":"Yn canfod sain","detecting_face":"Gan ganfod wyneb…","detection_time":"Amser canfod","disable":"Analluogi","disable_clipboard":"Analluogi Clipbwrdd","disable_downloading":"Analluogi Lawrlwytho","disable_function_keys":"Analluogi allweddi swyddogaethol","disable_keyboard_shortcuts":"Analluogwch fyrddau bysellfwrdd","disable_new_tabs":"Analluogi tabiau newydd","disable_printing":"Analluogi Argraffu","disable_right_click":"Analluogi Clicio Dde","disable_switch_to_apps":"Analluogi Trosi i Apiau","disable_tempering":"Analluogi Atmod","discard":"Gwrthod","display_help_icons":"Dangos Eiconau Cymorth","display_options":"Dangos Dewisiadau","display_potential_hardware_issues":"Dangos problemau caledwedd posibl","display_suspicious_ids":"Dangos IDau amheus","do_not_lock_your_phone":"Peidiwch â chloi eich ffôn, byddwch yn colli\'r cysylltiad os bydd y sgrin yn cloi.","do_you_really_want_to_delete_the_grade":"Ydych chi wir eisiau dileu\'r gradd?","do_you_want_to_change_assessment_end_date_&_time":"Ydych chi eisiau newid dyddiad a amser diweddas yr asesiad?","done":"Wedi’i wneud","dont_have_a_template":"Nid oes gennych templed?","dont_have_email":"Nid oes gennych e-bost?","dont_have_email_id":"Nid oes gennych ID e-bost?","dont_have_phone_number":"Nid oes gennych rif ffôn?","dont_see_yourself_above":"Nid ydych chi\'n gweld eich hun uwch?","don’t_move_microphone":"Peidiwch â newid safle\'r microffon yn ystod yr asesiad.","download":"Lawrlwytho","download_report":"Lawrlwytho Adroddiad","download_speed":"Cyflymder lawrlwytho","download_speed_error":"Nid yw eich cysylltiad rhyngrwyd yn ddigonol i wneud i\'r estyniad weithio\'n iawn.\\nI ddefnyddio\'r estyniad hwn, sicrhewch fod cyflymder eich cysylltiad rhyngrwyd yn cwrdd â\'r gofynion.","download_speed_insufficient":"Cyflymder lawrlwytho annigonol","download_the_app":"Llwytho i lawr yr ap","draft":"Drafft","drag_&_drop_your_document":"Llusgo a gollwng eich dogfen","drag_n_drop_your_document_or":"Llusgo a gollwng eich dogfen neu ","drop_the_files_here":"Gollwng y ffeiliau yma","dual_screen_detected":"Canfuwyd dau sgrin","duplicate_assessment":"Asesiad Dwbl","duplicate_playlist":"Rhestr Cân Dwbl","duration":"Hyd","duration_taken":"Hyd a gymerwyd","duration_time":"Amser Hyd","during_your_assessment":"Yn ystod eich asesiad","dutch":"Iseldireg","eassy_test":"Prawf Ysgrifenedig","edbs":"EDBS","edit":"Golygu","edit_assessment":"Golygu Asesiad","edit_column":"Golygu Colofn","edit_playlist_settings":"Golygu Gosodiadau Rhestr Chwarae","edit_profile_for_later_use":"Golygu\'r proffil hwn i\'ch cyfrif i\'w ddefnyddio yn nes ymlaen","edit_settings":"Golygu Gosodiadau","edit_template":"Golygu Templed","email":"E-bost","email_id":"ID E-bost","email_or_password_wrong":"Mae eich cyfeiriad e-bost neu\'ch cyfrinair yn anghywir","email_reminder_to_selected_candidate":"Anfonir atgoffa e-bost at yr ymgeisydd(ion) a ddewiswyd","email_templates":"Templedi E-bost","en":"CY","enable":"Galluogi","enable_javascript":"I weld y fideo hwn, galluogwch JavaScript, ac ystyriwch uwchraddio i borwr gwe sy\'n cefnogi hynny","enabled":"Wedi\'i alluogi","end":"Gorffen","end_at":"Gorffen am","end_date_&_time":"Dyddiad a\'r amser gorffen","end_date_greater_start_date":"Dylai\'r dyddiad gorffen fod yn fwy na\'r dyddiad cychwyn","end_section_description":"Mae eich sesiwn wedi dod i ben! Cliciwch Nesaf i fynd i\'r cam nesaf.","end_time":"Amser Gorffen","english":"Saesneg","english_rating":"Sgôr Saesneg","ensure_sharing_your_screen":"Gwnewch yn siŵr eich bod wedi caniatáu rhannu\'ch sgrin.","enter":"Rhoi mewn","enter_access_code":"Rhowch y Cod Mynediad","enter_code":"Rhowch y Cod","enter_code_sent_to_email":"Rhowch y cod dilysu a anfonwyd i\'ch e-bost cofrestredig isod","enter_detail":"RHOWCH EICH MANYLION","enter_email_id":"Rhowch ID E-bost","enter_first_name":"Rhowch enw cyntaf","enter_group_name":"Rhowch enw’r grŵp","enter_surname":"Rhowch gyfenw","enter_your_email":"Rhowch eich e-bost","enter_your_first_name":"Rhowch eich enw cyntaf","enter_your_last_name":"Rhowch eich cyfenw","enter_your_password":"Rhowch eich cyfrinair","enter_your_phone_number":"Rhowch eich rhif ffôn","essay":"Traethawd","europe":"Ewrop","evaluate":"Gwerthuso","evaluate_full_session":"Gwerthuso\'r sesiwn gyfan","evaluate_session":"Gwerthuso Sesiwn","evaluation_completed":"Mae\'ch gwerthusiad wedi\'i gwblhau","evaluation_expired":"Mae\'r gwerthusiad wedi dod i ben.","evaluation_feedback":"Rhowch eich gwerthusiad ar y sesiwn honno. A oedd twyll yn gysylltiedig ai peidio?","evaluator":"Gwerthuswr","event":"Digwyddiad","event_details":"Manylion Digwyddiad","event_name":"Enw Digwyddiad","events":"Digwyddiadau","exam_end":"Diwedd Arholiad","exam_instructions_li_1":"Symudwch eich gwe-gamera am 15-20 eiliad i ddangos eich gweithfan.","exam_instructions_li_2":"Cliciwch y botwm \'nesaf\' dim ond ar ôl i chi weld eich gweithfan.","exam_instructions_text":"Paratowch eich amgylchedd gwaith nawr","exam_prep_msg":"Paratowch fath o ddull adnabod llywodraethol gyda llun.\\nOs oes angen i chi nôl eich cerdyn adnabod neu gymryd egwyl fer, gwnewch hynny nawr.","exam_preparation":"Paratoi Arholiad","exam_preparation_msg":"Bydd y llyfrgell yn cofnodi eich sesiwn arholiad ar gyfer adolygiad posibl.\\nMae\'r wybodaeth hon wedi\'i hamgryptio a dim ond unigolion awdurdodedig gan eich sefydliad sy\'n gallu ei chyrchu. Bydd y cofnodi\'n dechrau ar ôl gwirio eich system a\'ch amgylchedd.","exam_preparation_tnc":"Rwy’n cytuno fy mod yn deall rheolau’r arholiad cyn dechrau’r arholiad gyda’r estyniad.","exam_security_level":"Lefel diogelwch yr arholiad (yn seiliedig ar yr opsiynau a ddewiswyd):","exam_settings_summary":"Crynodeb o Leoliadau’r Arholiad","exam_start":"Cychwyn Arholiad","exam_taker":"Enw’r Ymgeisydd","exam_taker_information":"Gwybodaeth yr Ymgeisydd","exam_was_fair":"Roedd yr arholiad yn deg","exam_was_fraud":"Roedd yr arholiad yn dwyll","example_tutorial":"Dylai eich ffôn recordio o’r ongl wylio hon","exams":"Arholiadau","export":"Allforio","export_pdf_report":"Allforio Adroddiad PDF","extend_date":"Estyn Dyddiad","extend_invite_date":"Estyn Dyddiad Gwahoddiad","extend_last_date":"Estyn Y Dyddiad Olaf","extension":"Estyniad","extent_Date":"Estyn dyddiad","extent_date":"Estyn Dyddiad","external_id":"ID Allanol","face_detected_click_next":"Yn y sgrin nesaf, byddwn yn canfod eich wyneb. Cliciwch ar y botwm NESAF i barhau ar ôl darllen y cynghorion isod.","face_not_detected":"Ni chanfuwyd wyneb. Ceisiwch eto.","face_photo":"Llun wyneb","failed":"Methwyd","fair":"Teg","feedback_added_successfully":"Adborth wedi’i ychwanegu’n llwyddiannus","file_is_being_uploaded":"Mae\'r ffeil yn cael ei llwytho i fyny","file_is_not_being_uploaded":"Nid yw\'r ffeil yn cael ei llwytho i fyny","files_at_once":"ffeil ar unwaith","filter":"Hidlo","final_score":"Sgôr Terfynol","final_section":"Adran Derfynol","final_status":"Statws Terfynol","finish_assessment_description":"Gallwch adael y dudalen hon nawr.","finish_assessment_title":"Gwerthusiad wedi’i gwblhau! Diolch!","first_name":"Enw Cyntaf","flight_checked":"Gwirio Cyn Hedfan yn Llwyddiannus!","for_more_information":" am fwy o wybodaeth.","force_full_screen":"Gorfodi Sgrin Lawn","forgot_your_password":"Wedi anghofio eich cyfrinair?","fox_jumped_over_dog":"Neidiodd llwynog brown cyflym dros gi diog.","fr":"FR","fraud":"Twyll","fraud_report":"Adroddiad Twyll","fraud_status":"Statws Twyll","french":"Ffrangeg","french_rating":"Sgôr Ffrangeg","full_face_visible":"Sefwch y camera fel bod eich wyneb yn llawn yn weladwy yn yr rhagolwg","gaze_away":"Troi Golwg i Ffwrdd","gdpa_controls":"Rheolaethau GPDA","general":"Cyffredinol","geography":"Daearyddiaeth","german":"Almaeneg","get_comfy":"Gwnewch eich hun yn gyfforddus","get_ready":"Paratowch","get_ready_for_identity_validation":"Paratowch ar gyfer dilysiad hunaniaeth.","get_started":"DECHRAU","get_water":"Dewch â dŵr","go":"MYND","go_back":"Ewch yn ôl","good":"Da","good_light":"Sicrhewch fod digon o oleuni da yn yr ystafell","got_it":"Wedi\'i ddeall","grade_book_tour":"Taith Llyfr Graddau","great":"Ardderchog","group_id":"ID Grŵp","group_name":"Enw’r Grŵp","guidelines":"CANLLAWIAU LLWYFAN","hardware_test":"PROFION CALENDR","hardware_test_face_detection":"PROFION CALENDR (Canfod Wyneb)","havent_selected_any_one":"Nid ydych wedi dewis yr un o\'r meysydd hyn.","head_movement":"Symudiad Pen","help":"Cymorth","here_is_some_information_regarding_the_mereos_platform":"Dyma rywfaint o wybodaeth am lwyfan Mereos:","hey_mate_ready_for_test_it_starting_soon":"Hei ffrind, Ydych chi\'n barod ar gyfer y prawf? Bydd yn dechrau cyn bo hir.","hi_im_your_support_manager":"Helo, fi yw eich rheolwr cymorth","hi_there":"Helo yno","hide_grades":"Cuddio Graddau","hide_id":"Cuddio ID","hide_location":"Cuddio Lleoliad","hide_names":"Cuddio Enwau","hide_screen":"Cuddio Sgrin","hide_video":"Cuddio Fideo","high":"Uchel","highly_satisfied":"Hynod fodlon","highly_unsatisfied":"Hynod anfodlon","hiring_manager":"Rheolwr Cyflogi","hold":"Dal","hold_your_photo_id_into_the_frame":"Daliwch eich cerdyn adnabod gyda llun yn y ffrâm a chliciwch y botwm “Tynnu Llun ID” isod.","home_page":"Tudalen Gartref","i_already_have_the_app":"Mae gen i\'r ap eisoes","i_dont_have_the_app":"Nid oes gennyf yr ap","i_downloaded_the_app":"Rwyf wedi lawrlwytho\'r ap","i_have_read_and_accept_the":"Rwyf wedi darllen ac yn derbyn y","icc_msg":"Paratowch fath o ddull adnabod llywodraethol gyda llun.\\nOs oes angen i chi nôl eich cerdyn adnabod neu gymryd egwyl fer, gwnewch hynny nawr.","id":"ID","id_being_verified":"Arhoswch. Mae ID yr ymgeisydd yn cael ei ddilysu.","id_card":"Cerdyn Adnabod","id_not_exists":"Nid yw’r gwahoddiad bellach yn ddilys. Cysylltwch â’r ysgol.","id_not_verified":"Nid yw ID yr ymgeisydd yn ddilys. Ceisiwch eto!","id_number":"Rhif ID","id_photo":"Llun ID","id_successfully_verified":"Mae ID yr ymgeisydd wedi\'i ddilysu’n llwyddiannus.","identity_card_verified_successfully":"Cadarnhawyd y Cerdyn Hunaniaeth yn Llwyddiannus","identity_validation":"Dilysiad Hunaniaeth","ignored":"Anwybyddwyd","import":"Mewnforio","import_and_invite":"Mewnforio a Gwahodd","import_candidates":"Mewnforio Ymgeiswyr","in_order_to_carry_out_your_assessment":"Er mwyn cynnal eich asesiad, mae angen ffôn clyfar arnoch i\'ch ffilmio o ail ongl. I wneud hyn, rhaid i chi osod cymhwysiad Mereos Mobile ar eich ffôn.","in_process":"Mewn Proses","incident_Level":"Lefel Digwyddiad","incident_level":"Lefel Digwyddiad","incident_score":"Sgôr Digwyddiad","incognito_error":"Nid yw\'r estyniad hwn yn cael ei ganiatáu i weithio yn y modd incognito.\\nCaniatáu a diweddaru\'r dudalen.","incognito_mode":"Modd Incognito","incognito_mode_requirement_checking":"Gwirio\'r gofyniad modd incognito","incognito_mode_requirement_checking_msg":"Mae angen i\'r estyniad hwn weithio yn y modd incognito i sicrhau proctoring arholiadau diogel.\\nAm fwy o wybodaeth ","incorrect":"Anghywir","incorrect_end_date_and_time":"Dyddiad & amser gorffen anghywir","indications_li_1":"Mae\'r amserydd wedi\'i leoli ar ben y sgrin.","indications_li_2":"Cliciwch y saeth chwith i fynd yn ôl i\'r cwestiwn blaenorol.","indications_li_3":"Cliciwch « Nesaf » i anwybyddu\'r cwestiwn.","indications_li_4":"Byddwch yn gallu gweld unrhyw gwestiynau a gollwyd ar ddiwedd yr asesiad.","indications_li_5":"I farcio cwestiwn i\'w ddangos yn nes ymlaen, ticiwch y blwch \'marcio cwestiwn\'.","indications_li_6":"Bydd eich sesiwn yn dod i ben pan fyddwch yn clicio \'Cyflwyno Pob Ymateb\'.","indications_title":"Gwybodaeth Platfform","infinite_pdf":"PDF Anfeidrol","initial_system_check_passed":"Gwirio cychwynnol y system wedi’i basio. Mae eich arholiad ar fin dechrau.","initial_system_check_passed_get_ready_for_identity_validation":"Gwirio cychwynnol y system wedi’i basio. Paratowch ar gyfer dilysu hunaniaeth.","instruction":"Cyfarwyddyd","instructions":"Cyfarwyddiadau","internet_connection":"Cysylltiad Rhyngrwyd","internet_connection_not_working":"Nid yw’r cysylltiad rhyngrwyd yn gweithio","internet_download_speed":"Cyflymder Lawrlwytho Rhyngrwyd","internet_speed_is_too_low":"Mae cyflymder y rhyngrwyd yn rhy isel","internet_upload_speed":"Cyflymder Llwytho i Fyny Rhyngrwyd","interview":"Cyfweliad","invalid_email":"E-bost Annilys","invalid_phone_number":"Rhif ffôn annilys","invitation":"Gwahoddiad","invitation_id":"ID Gwahoddiad","invitation_incomplete_contact_support":"Mae\'r gwahoddiad hwn yn anghyflawn. Cysylltwch â chymorth!","invitation_successfully_created":"Crëwyd y gwahoddiad yn llwyddiannus","invitations":"Gwahoddiadau","invite":"Gwahodd","invite_by_groups":"Gwahodd yn ôl grwpiau","invite_name":"Enw\'r Gwahoddiad","invite_people":"Gwahodd Pobl","invite_search":"Chwilio Gwahoddiad","invite_status":"Statws Gwahoddiad","invite_to_assessment":"Gwahodd i Asesiad","invited":"Wedi\'i wahodd","invited_at":"Wedi\'i wahodd am","invited_for_evaluation":"Rydych wedi’ch gwahodd i gael eich gwerthuso","invited_to_assessment_for":"Rydych wedi’ch gwahodd i asesiad ar gyfer","invites":"Gwahoddiadau","ip_address":"Cyfeiriad IP","is_the_camera_feedback_good":"Gwnewch yn siŵr y gallwch osod eich ffôn fel bod eich sgrin, eich dwylo a phen eich pen yn weladwy.","it_looks_suspicious":"Mae\'n edrych yn amheus","italian":"Eidaleg","just_remembered":"Newydd gofio?","keep_mic_close":"Cadwch y meicroffon yn agos at eich ceg a pheidiwch â newid ei safle tan ddiwedd y prawf.","last_name":"Cyfenw","leave_your_comment_here":"Gadewch eich sylw yma","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Fyw","load_full_question":"Llwytho’r fersiwn llawn o\'r cwestiwn.","loading":"Wrthi’n llwytho","location":"Lleoliad","location_enabled":"Lleoliad wedi\'i alluogi","location_error":"Nid oes modd cyrchu’r lleoliad. I ddefnyddio\'r estyniad hwn, sicrhewch fod modd cyrchu\'ch lleoliad.","location_not_working":"Nid yw rhannu lleoliad yn gweithio","lock_down_options":"Opsiynau Cloi i Lawr","log_out":"Allgofnodi","login_failed":"Gwiriwch eich e-bost neu gyfrinair!","login_successfully":"Rydych wedi mewngofnodi\'n llwyddiannus","longer_time_message":"Mae’n cymryd mwy o amser nag arfer. Arhoswch...","look_out_for_the_best_talent_across_the_globe_remotely":"Chwiliwch am y dalent orau ledled y byd - o bell.","low":"Isel","mac_users":"Defnyddwyr Mac","macos_10_13":"macOS 10.13 (Fersiwn Hynaf sy’n Dal i gael ei Chynnal)","macos_10_15":"macOS 10.15","made_changes":"Mae’n edrych fel eich bod wedi gwneud rhai newidiadau.","maps":"Mapiau","mark_for_review":"Marcio ar gyfer Adolygiad","marked":"Wedi\'i farcio","marked_for_review":"Wedi\'i Farcio ar gyfer Adolygiad","master_hiring_manager":"Prif Reolwr Cyflogi","master_recruiter":"Prif Recriwtwr","mathematics":"Mathemateg","maths":"Mathemateg","maximum_section_time":"Uchafswm Amser Adran","maximum_size_of_file":"Maint mwyaf y ffeil yw 50MB csv neu xls. Hyd at 5 ffeil ar unwaith","mb":"MB","med":"Med","mereos_proctoring_portal":"Porth Monitro Mereos","mereos_settings":"Gosodiadau Mereos","mereos_support":"Cymorth Mereos","metro_code":"Cod Metro","microphone":"Meicroffon","microphone_error":"Nid oes modd cyrchu\'r meicroffon. I ddefnyddio\'r estyniad hwn, sicrhewch fod modd cyrchu\'ch meicroffon.","microphone_not_working":"Nid yw\'r meicroffon yn gweithio","minimum":"Lleiafswm","minutes":"munudau","mobile_connection_successfull":"Mae\'r ffôn symudol wedi\'i gysylltu\'n llwyddiannus","mobile_phone_disconnected":"Mae’r ffôn symudol wedi datgysylltu","modified_at":"Wedi\'i addasu am","modify_at":"Addasu Am","month_names":"IonChweMawEbrMaiMehGorAwstMediHydTachRhag","more_actions":"Mwy o Gamau","moved_away_from_page":"Symudodd y defnyddiwr i ffwrdd o’r dudalen arholiad","moved_back_to_page":"Dychwelodd y defnyddiwr i’r dudalen arholiad","multiple_face_detected":"Canfuwyd wynebau lluosog","multiple_people":"Mwy nag un Person","multiple_people_detected":"Canfuwyd mwy nag un person.","multiple_people_detected_for_more_than_10_seconds":"Canfuwyd mwy nag un person am fwy na 10 eiliad","multiple_people_in_the_screen":"Mwy nag un person ar y sgrin","multiple_screens":"Sgriniau lluosog","multiple_screens_detected":"Canfuwyd sgriniau lluosog","my_settings_profiles":"Fy Gosodiadau Proffiliau","name":"Enw","name_of_assessment":"Enw\'r Asesiad","name_of_playlist":"Enw\'r Rhestr Chwarae","navigate_up_and_down":"Llywio i fyny ac i lawr","need_help":"Angen Cymorth?","negative_marks":"Marcau Negyddol","new_notification_from_mereos":"Hysbysiad newydd gan Mereos","new_playlist":"Rhestr Chwarae Newydd","next":"Nesaf","next_step":"Cam Nesaf","no":"Na","no_access_code_use_mereos":"Os nad oes gennych god mynediad ac nad ydych yn y ganolfan brofi, gallwch sefyll yr arholiad gan ddefnyddio Mereos.","no_anomalies":"Dim afreoleidd-dra","no_assessment_found":"Heb ddod o hyd i asesiad","no_candidate_found":"Heb ddod o hyd i ymgeisydd","no_data_found":"Dim Data Wedi\'i Ddarganfod","no_filtered_anomalies":"Dim anomaleddau wedi\'u hidlo","no_invites_found":"Dim Gwahoddiadau Wedi\'u Darganfod","no_microphone_detected":"Heb ganfod meicroffon","no_noise_in_room":"Sicrhewch fod eich ystafell yn oleuedig ac nad oes sŵn cefndir.","no_panel_added_to_the_section":"Dim panel wedi\'i ychwanegu at yr adran","no_person_detected_come_back_to_assessment":"Nid oes unrhyw un wedi\'i ganfod. Dychwelwch i\'r asesiad.","no_person_detected_for_more_than_10_seconds":"Ni chanfuwyd unrhyw berson am fwy na 10 eiliad","no_person_in_the_screen":"Dim person ar y sgrin","no_playlist_found":"Heb ddod o hyd i restr chwarae","no_point_in_running_leave_in_time":"Does dim pwynt rhedeg, rhaid i chi adael mewn pryd","no_rating_available_for_this_section_type":"Dim sgôr ar gael ar gyfer y math hwn o adran","no_record_found":"Heb ddod o hyd i gofnod","no_section_found":"Heb ddod o hyd i adran","no_session_found":"Heb ddod o hyd i sesiwn","normal":"Arferol","not_fraud":"Ddim yn Dwyll","not_invited":"Heb ei Wahodd","not_viewed":"Heb ei weld","nothing_suspicious_was_noticed":"Ni sylwyd ar unrhyw beth amheus","notification":"Hysbysiad","notification-histroy":"Hanes hysbysiadau","notification_not_working":"Nid yw\'r hysbysiadau\'n gweithio","notifications":"Hysbysiadau","notifications_on_your_phone_should_be_turned_off":"Dylai hysbysiadau ar eich ffôn fod wedi\'u diffodd. Gallant ymyrryd â recordiad y ffrwd fideo.","notify_candidate":"Hysbysu’r ymgeisydd","notify_candidates":"Hysbysu\'r ymgeiswyr","number_of_assessment_sections":"Nifer yr Adrannau Asesu","number_of_sections":"Nifer y adrannau","object_detected":"Gwrthrych wedi\'i ganfod","objective":"Amcan","of":"o","okay":"Iawn","on_hold":"Ar Ddalfa","only_one_attempt":"Gallwch fynychu cwestiwn dim ond unwaith. Ni fyddwch yn gallu ei adolygu\'n ddiweddarach.","only_one_screen":"Un sgrin yn unig","open":"Agor","open_the_mereos_mobile_application":"Agorwch y cymhwysiad Mereos Mobile ar eich ffôn a sganio\'r cod QR hwn i gysoni eich ffôn.","opened":"Agored","or":"Neu","other_app_close":"Cau cymwysiadau fel Skype, Google Hangouts, ac ati sydd efallai\'n ymyrryd â\'r prawf.","overall_gpa":"GPA cyffredinol","overall_knowledge_rating":"Graddio gwybodaeth gyffredinol","overall_time_taken":"Cyfanswm yr Amser a Gymerwyd","overview":"Trosolwg","owner":"Perchennog","page_error":"Gwall Tudalen","page_not_found":"Tudalen heb ei darganfod","panel_name":"Enw\'r Panel","password":"Cyfrinair","password_reset_link_sent":"Mae dolen ailosod cyfrinair wedi\'i hanfon i\'ch e-bost.","pause":"Oedi","pc_users":"Defnyddwyr PC","pending":"Yn yr arfaeth","per_page":"Fesul Tudalen","person_missing":"Person Ar Goll","persons_eyes_are_moving":"Mae llygaid y person yn symud","persons_head_is_moving":"Mae pen y person yn symud","phone":"Ffôn","phone_number":"Rhif Ffôn","photo_id":"ID Llun","physics":"Ffiseg","play":"Chwarae","playlist_name":"Enw Rhestr Chwarae","playlists":"Rhestri Chwarae","please_add_assessment_duration":"Ychwanegwch hyd yr asesiad","please_add_atleast_one_item":"Ychwanegwch o leiaf un eitem","please_check_your_mic":"Gwiriwch eich meicroffon cyn dechrau recordio","please_enable_force_submission":"Galluogwch gyflwyno gorfodol","please_scan_this_qr_code":"Sganiwch y cod QR hwn gyda\'ch dyfais ffôn i lawrlwytho\'r cymhwysiad Mereos Mobile.","please_share_entire_screen":"Rhannwch y sgrin gyfan os gwelwch yn dda.","please_take_picture_or":"Tynnwch lun neu os gwelwch yn dda","please_unselect_time_region_from_template":"Dad-ddewiswch y Rhanbarth Amser o\'r templed","please_wait":"Arhoswch...","please_wait_we_processing":"Arhoswch, rydym yn prosesu.","points":"Pwyntiau","poor":"Gwael","pop_up":"POP-UP","portuguese_brazil":"Portiwgaleg (Brasil)","positive_marks":"Marciau Cadarnhaol","post_instructions_text":"Dyma\'r cyfarwyddiadau ar ôl yr asesiad","postinstructions":"Cyfarwyddiadau Ôl","pre_configured_behavior":"Dewiswch osodiad ymddygiad wedi\'i ffurfweddu ymlaen llaw neu addaswch unrhyw osodiadau\'r arholiad.","preinstructions":"Cyfarwyddiadau Rhag","previous_step":"Cam blaenorol","privacy_msg":"Rwy’n cydsynio i brosesu fy nata personol at y dibenion penodol a grybwyllir yn y polisi preifatrwydd.","privacy_policy":"Polisi Preifatrwydd","privacy_policy_msg":"Rwy’n cydsynio i brosesu fy nata personol at y dibenion penodol a grybwyllir yn y polisi preifatrwydd.","processed_anomalies":"Anghysonderau a Broseswyd","processing":"Wrthi’n prosesu","proctor":"Goruchwyliwr","proctored_review_will_end_in":"Bydd yr adolygiad goruchwyliedig yn dod i ben ymhen","proctoring_behavior_settings":"Gosodiadau Ymddygiad Goruchwylio","proctoring_exam_description":"Mae anghysonderau yn cymharu gweithredoedd un ymgeisydd â gweddill yr arholiad yn y dosbarth. Bydd hyn yn amlygu gwahaniaethau ystadegol arwyddocaol ym mynegiant ymgeisydd.","proctoring_exam_metrics":"Metrigau Arholiad Goruchwylio","proctoring_exam_settings":"Gosodiadau Arholiad Goruchwylio","proctoring_frame_description":"Mae difrifoldeb pob metrig yn gosod pwysigrwydd ymddygiad amheus mewn perthynas â\'r ymddygiadau eraill. Caiff y metrigau hyn eu cyfrifo gyda phob delwedd. Mae pob nodwedd yn deillio o bob delwedd, waeth a yw\'r gosodiadau wedi\'u galluogi ai peidio.","proctoring_frame_metrics":"Metrigau Ffrâm Goruchwylio","proctoring_profile_required":"Mae angen Proffil Goruchwylio","profile_id":"ID Proffil","proven_fraud":"Twyll Profi","provider":"Darparwr","published":"Cyhoeddwyd","question":"Cwestiwn","question_1_of_20":"CWESTIWN 1 O 20","question_List":"Rhestr Cwestiynau","question_based_stats":"Ystadegau wedi\'u seilio ar gwestiynau","question_count":"Cyfrif Cwestiynau","question_list":"Rhestr Cwestiynau","question_name":"Enw\'r Cwestiwn","question_not_answered":"Nid ydych wedi ateb X allan o Y cwestiynau.","question_view":"Golwg Cwestiynau","questions":"Cwestiynau","questions_attended":"Cwestiynau a Atebwyd","questions_uploaded_successFully":"Cwestiynau wedi\'u llwytho i fyny yn llwyddiannus","quick_filter":"Hidlydd Cyflym","quiz_name":"Enw Cwis","ram":"RAM","ram_error":"Nid yw\'r system hon yn cwrdd â\'r gofynion RAM.","ram_min_requirement":"4 GB\\nllai na 90% defnydd RAM","ram_recommended_requirement":"16 GB\\nllai na 70% defnydd","rate_experience_by_emotion":"Rhowch sgôr ar eich profiad trwy glicio ar yr eicon emosiwn.","rating":"Sgôr","re_invite":"Ailgwahodd","re_record_audio":"Ail-gofnodi Sain","recapture":"Ail-ddal","recommended":"Argymhellir","record_audio":"Cofnodi Sain","record_not_found":"Dim cofnodion wedi’u darganfod","record_room":"Cofnodi Ystafell","record_screen":"Cofnodi Sgrîn","record_video":"Cofnodi Fideo","record_web_traffic":"Cofnodi Traffig Gwe","recording":"Cofnodi","recording_started_successfully":"Cofnodi wedi dechrau’n llwyddiannus","recording_stopped_successfully":"Mae recordio wedi stopio’n llwyddiannus","recruiter":"Recriwtwr","refresh":"Adnewyddu","register_here":"COFRESTRWCH YMA","registered_successfully":"Wedi\'i gofrestru’n llwyddiannus!","reinvite":"Ailgwahodd","reinvite_people":"Ailgwahodd Pobl","reject":"Gwrthod","rejected":"Gwrthodwyd","rejection":"Gwrthodiad","reloading_closing_add_partial_data":"Ail-lwytho neu gau\'r ffenestr efallai\'n arwain at lawrlwytho partial o\'r ffeil.","remind_candidate":"Atgoffa Ymgeisydd","remind_candidates":"Atgoffa Ymgeiswyr","remind_panel":"Panel Atgoffa","reminder":"Atgoffa","remote_automate_reuse":"Bell. Awtomeiddio. Ail-ddefnyddio.","reports":"Adroddiadau","required_time":"Amser Angenrheidiol","reset":"Ailosod","reset_email_sent":"Anfonir dolen i ailosod eich cyfrinair i\'ch e-bost.","reshare_screen":"Ailddosbarthu sgrîn","reshoot_video":"Aildynnu Fideo","results":"Canlyniadau","resume":"Ailddechrau","resume_doc":"CV","retake":"Ailgymryd","retake_id_photo":"Ailgymryd Llun ID","retake_photo":"Ailgymryd Llun","reuse_the_candidate_data_and_hire_faster":"Ailddefnyddiwch ddata\'r ymgeisydd a chyflogwch yn gyflymach","review_q_later":"I adolygu cwestiwn yn nes ymlaen, cliciwch ar y blwch \\"Mark for Review\\".","roles":"Rolau","room_id":"ID Ystafell","room_scan":"Sganiwch yr ystafell","room_scan_completed":"Sgan ystafell wedi’i gwblhau","room_scanning":"Sganiad Ystafell","roomscan_recordings":"Cofnodion Sganiad Ystafell","row":"Rhes","satisfied":" Boddhaol","save":"Cadw","save_answer":"Ni fydd eich ateb yn cael ei uwchlwytho. Cliciwch ar y botwm NESAF i’w gadw","save_exam_settings":"Cadw Gosodiadau Arholiad","save_information":"Cadw Gwybodaeth","save_n_publish":"Cadw a Chyhoeddi","save_settings_profile":"Cadw Gosodiadau Proffil","saved_successfully":"Wedi\'i gadw\'n llwyddiannus","scan_or_download_the_below_qr_code_to":"Sganio neu lawrlwytho\'r cod QR isod i","scan_your_room":"Sganiwch eich ystafell 360° gan gynnwys eich ardal waith","schedule_invite":"Trefnu gwahoddiad","schedule_live":"Trefnu’n Fyw","scheduled_at":"Cynllunio am","scheduled_invite":"Gwahoddiad wedi\'i gynllunio","scheduled_time":"Amser wedi\'i drefnu","school":"Ysgol","school_name":"Enw\'r Ysgol","science":"Gwyddoniaeth","score":"Sgôr","screen":"Sgrin","screen_record":"Cofnod sgrin","screen_recording_window_shared":"Ffenestr Cofnodi Sgrin wedi\'i Rhannu","screen_recordings":"Cofnodion sgrin","screen_resolution":"Datrysiad Sgrin","screen_shared_successfully":"Rydych wedi rhannu\'r sgrin yn llwyddiannus","screen_sharing_stopped":"Mae rhannu sgrin wedi dod i ben","search":"Chwilio","search_an_exam":"Chwilio arholiad","search_an_exam_taker":"Chwilio am gymryd arholiad","search_by":"Chwilio yn ôl","search_candidate_name_or_location":"Chwilio am ymgeisydd neu leoliad","search_location":"Chwilio am leoliad","search_question":"Chwilio Cwestiwn","search_text":"Chwilio testun","section":"Adran","section1":"Adran 1","section2":"Adran 2","section3":"Adran 3","section4":"Adran 4","section_activity_required":"Mae gweithgaredd yn ofynnol","section_completed_next_to_continue":"Rydych wedi cwblhau\'r adran. Cliciwch Nesaf i barhau.","section_name":"Enw\'r adran","section_status":"Statws yr adran","section_type":"Math o adran","sections":"Adrannau","secure_feature":"Nodwedd ddiogel","security_document":"Dogfen ddiogelwch","see_all_arguments":"Gweld yr holl ddadleuon","see_more":"Gweld mwy","see_support_tags":"Gweld tagiau cymorth","seems_like_a_fraud":"Ymddengys fel twyll","select":"Dewiswch","select_a_chat_room_for_messages":"Dewiswch ystafell sgwrsio ar gyfer negeseuon","select_a_question":"Dewiswch gwestiwn","select_a_saved_setting_profile_or_create_new_one":"Dewiswch broffil gosodiadau wedi\'i gadw neu greu un newydd.","select_and_invite_status":"Dewiswch a gwahodd statws","select_answer_below_from_below":"Dewiswch eich ateb isod:","select_camera":"Dewiswch gamera","select_candidates":"Dewiswch ymgeiswyr","select_complete":"ADRAN WEDI\'I CHWBLHAU","select_evaluator":"Dewiswch werthuswr","select_microphone":"Dewiswch feicroffon","select_on_assessments":"Dewiswch ar asesiadau","select_on_assessments_to_duplicate":"Dewiswch ar asesiadau i\'w dyblygu","select_on_playlist_to_duplicate":"Dewiswch restr chwarae i\'w dyblygu","select_on_status_to_change":"Dewiswch ar statws i\'w newid","select_preferred_camera_and_microphone":"Dewiswch y camera a’r meicroffon sydd orau gennych.","select_proctor":"Dewiswch oruchwyliwr","select_profile":"Dewiswch broffil","select_role":"Dewiswch rôl","selected":"Wedi\'i ddewis","selection":"Dewis","send":"Anfon","send_candidates_reminder":"Anfon atgoffa i ymgeiswyr","send_invitation":"Anfon gwahoddiad","send_invite":"Anfon gwahoddiad","send_reset_password_link":"Anfon dolen ailosod cyfrinair","session":"Sesiwn","session_completed":"Mae’r sesiwn wedi gorffen","session_completed_successfully":"Mae\'r sesiwn wedi\'i chwblhau\'n llwyddiannus","session_duration":"Hyd y sesiwn","session_id":"ID y sesiwn","session_initiated":"Sesiwn wedi’i gychwyn","session_started":"Bydd eich sesiwn yn dechrau nawr.","session_status":"Statws y sesiwn","session_view":"Golwg y sesiwn","sessions":"Sesiynau","set_as_default_profile":"Gosod fel proffil diofyn","setting_up_your_phone_camera":"Gosod eich camera ffôn","settings":"Gosodiadau","setup_section":"Gosod adran","several_sections":"Sawl adran","share_screen_msg":"Cliciwch y botwm \\"Wedi\'i wneud\\" ar ôl i chi ganiatáu rhannu eich sgrin.","share_setting":"Rhannu gosodiad","share_settings":"Rhannu gosodiadau","share_the_assessment":"rhannu\'r asesiad","show_unmatched_attempts":"Dangos ymdrechion heb eu cyfateb","showing_results_for":"Yn dangos canlyniadau ar gyfer","sign_in":"Mewngofnodi","sign_in_with":"Mewngofnodi gyda","sign_out":"Allgofnodi","skills":"Sgiliau","skip":"Hepgor","skip_question_click_next":"Cliciwch ar y botwm \\"Nesaf\\" i hepgor cwestiwn. Gallwch ail-ymweld â\'r cwestiynau a hepgorwyd gan ddefnyddio\'r \\"Gweld Rhestr Cwestiynau\\"","skipped":"Wedi\'i hepgor","skipped_question":"cwestiwn wedi\'i hepgor","solution":"Ateb","some_attribute":"Rhai priodoleddau","some_of_the_candidate_start_assessment":"Mae rhai o\'r ymgeiswyr wedi dechrau\'r asesiad. Ni allwch olygu\'r asesiad","something_went_wrong":"Aeth rhywbeth o\'i le","something_went_wrong_please_contact_support":"Aeth rhywbeth o’i le! Cysylltwch â chymorth.","something_went_wrong_please_try_again_later":"Aeth rhywbeth o\'i le. Ceisiwch eto yn nes ymlaen.","something_went_wrong_please_upload_again":"Aeth rhywbeth o’i le, ceisiwch lwytho eto","sort_by_last_name":"Trefnu yn ôl cyfenw","sound_check":"Gwirio sain","sourcer":"Ffynhonnellwr","spanish":"Sbaeneg","speech_detected":"Lleferydd wedi\'i ganfod","speech_is_detected":"Mae lleferydd wedi\'i ganfod","start":"Dechrau","start_and_end_time":"Amser dechrau a gorffen","start_at":"Dechrau am","start_camera":"Dechrau camera","start_chat":"Dechrau sgwrs","start_date":"Dyddiad dechrau","start_date_&_time":"Dyddiad ac amser dechrau","start_recording":"Dechrau recordio","start_time":"Amser dechrau","start_tour":"Dechrau taith","stats":"Ystadegau","status":"Statws","step_1":"Cam 1","step_2":"Cam 2","step_3":"Cam 3","step_4":"Cam 4","stop_recording":"Atal Recordio","student_id":"ID myfyriwr","student_identify_verification":"Gwirio hunaniaeth myfyriwr","student_information":"Gwybodaeth myfyriwr","studies_at":"Yn astudio yn","subject":"Pwnc","submission_time":"Amser cyflwyno","submit":"Cyflwyno","submit_all":"Cyflwyno\'r cyfan","submit_and_end":"Ydych chi\'n siŵr eich bod am gyflwyno\'r holl atebion a gorffen yr adran?","submit_answers":"CYFLWYNO POB ATEB","summary":"Crynodeb","support_chat":"Sgwrs cymorth","supports_html5_video":"yn cefnogi fideo HTML5.","surname":"Cyfenw","suspecious":"Amheus","suspicious_incidents":"Digwyddiadau amheus","switch_language":"Newid Iaith","synchronisation_mobile":"Cysoni Ffôn Symudol","system_diagnostic":"Diagnosteg System","system_diagnostic_msg":"Dim ond eiliad y bydd y Diagnosteg System yn ei gymryd.","system_diagnostic_passed":"Diagnosteg System wedi llwyddo","system_requirement_checking":"Gwiriad gofynion system","system_requirement_checking_msg":"Byddwn yn gwirio eich system ar gyfer y gofynion lleiaf i ddefnyddio\'r llyfrgell.\\nGallwch ddarllen y rhestr lawn o ofynion trwy ","system_requirements":"Gwirio gofynion y system","system_requirements_for_testing":"Gofynion System ar gyfer Profi","t2":"T2","take_a_photo":"Tynnu llun","take_id_photo":"Tynnu llun ID","take_photo":"Tynnu Llun","take_the_superhero_leap_and_hire_fast_with_instahiring":"Cymerwch y naid archarwr a chyflogwch yn gyflym gyda Instahiring.","take_with_mereos":"Cymerwch gyda Mereos","template_editing":"Golygu Templed","template_id":"ID Templed","terms_and_conditions_read":"Telerau ac Amodau wedi\'u darllen","terms_of_use":"Telerau Defnyddio","test":"Prawf","test_translation":"Prawf Cyfieithu","thankyou":"Diolch!","the_maximum_file_size_is":"Y maint ffeil mwyaf yw","the_questions":"Y Cwestiynau","the_questions_cant_be_modified_if_the_assessment":"Ni ellir addasu\'r cwestiynau os yw\'r asesiad mewn cyflwr agored gan y bydd hyn yn cael effaith feirniadol ar adroddiadau\'r ymgeiswyr","this_invitation_has_expired":"Mae’r gwahoddiad hwn wedi dod i ben","time":"Amser","time_required":"Yr amser sydd ei angen yw","time_taken":"Amser a gymerwyd","time_to_answer":"Bydd gennych X munud i ateb Y cwestiwn(au).","time_zone":"Cylchfa Amser","timer_on_screen":"Mae gennych X munud i ateb Y cwestiwn(au). Cyfeiriwch at y cloc ar y gornel dde uchaf ar y sgrin.","timezone":"Cylchfa Amser","tips":"Awgrymiadau Defnyddiol:","to_end":"I Orffen","to_search_question_use_filter":"I chwilio am gwestiwn penodol, defnyddiwch yr opsiwn chwilio a hidlwyr yn yr adran Adolygu.","to_start":"I Ddechrau","total":"Cyfanswm","total_questions":"Cyfanswm Cwestiynau","total_score":"Sgôr Cyfanswm","try_again":"CEISIWCH ETO","type":"Math","type_your_answer_in_space":"Teipiwch eich ateb yn y gofod a ddarperir ar ochr dde\'r sgrin. Os hoffech atodi ffeil, cliciwch ar y ddolen \\"Atodi Ffeil\\" a chyflwynwch.","un_publish":"Dadgyhoeddi","unauthorized_access":"Mynediad heb awdurdod","unauthorized_object_detected_for_more_than_10_seconds":"Canfuwyd gwrthrych heb awdurdod am fwy na 10 eiliad","unauthorized_object_detected_please_put_it_away":"Canfuwyd gwrthrych heb awdurdod. Rhowch ef i ffwrdd os gwelwch yn dda.","unmarked":"heb ei farcio","unsatisfied":"Anfodlon","unselect":"Dad-ddewis","up_to":"Hyd at","update":"Diweddaru","update_assessment":"Diweddaru Asesiad","update_candidate":"Diweddaru Ymgeisydd","update_candidate_details":"Diweddaru Manylion Ymgeisydd","update_quiz":"Diweddaru cwis","upload":"Llwytho i fyny","upload_candidate_from":"Llwytho ymgeiswyr o","upload_id_image":"Llwytho/tynnu llun o\'ch cerdyn adnabod.","upload_image":"Llwytho delwedd","upload_items":"Llwytho Eitemau","upload_resume":"Llwytho Ailddechrau","upload_speed":"Cyflymder Llwytho i Fyny","upload_speed_error":"Nid yw eich cyflymder llwytho i fyny yn ddigon i ddechrau\'r arholiad hwn.","upload_speed_insufficient":"Cyflymder llwytho i fyny annigonol","upload_your_id_card":"Llwytho delwedd o\'ch cerdyn adnabod","upload_your_identity_document":"uwchlwytho eich dogfen adnabod","uploaded":"Wedi\'i lwytho","url":"URL","url_filtering":"Hidlo URL","use_select_cam_if_not_detected":"Defnyddiwch y gwymplen \\"Dewis Camera\\" i ddewis camera arall, os nad yw eich camera yn cael ei ganfod yn awtomatig.","use_select_microphone_if_not_detected":"Defnyddiwch y gwymplen \\"Dewis Meicroffon\\", os nad yw eich meicroffon yn cael ei ganfod yn awtomatig.","use_washroom":"Defnyddio Ystafell Ymolchi","useful_tips":"Awgrymiadau Defnyddiol:","user":"Defnyddiwr","user_idle":"Defnyddiwr Segur","candidate_interrupted_the_stream":"Mae\'r defnyddiwr wedi torri\'r ffrwd!","username":"Enw Defnyddiwr","users":"Defnyddwyr","verification_code":"Rhowch god dilysu","verification_completed":"Dilysiad wedi\'i gwblhau","verification_completed_msg":"Mae\'r dilysiad wedi\'i gwblhau\'n llwyddiannus ac mae popeth yn barod ar gyfer yr arholiad.\\nDarllenwch a chytunwch â\'r cytundeb arholiad ac yna byddwn yn parhau.","video_codec":"Codec Fideo","video_extension":"Estyniad Fideo","video_recorded":"Efallai y bydd eich fideo yn cael ei recordio yn ystod y sesiwn hon.","video_recording_msg":" Gall fideo gael ei recordio yn ystod y sesiwn hon. Sicrhewch fod yr ystafell yn ddigon goleuedig ac nad oes sŵn cefndir","view_our":"Gweld ein ","view_question_list":"Gweld Rhestr Cwestiynau","view_question_list_button_help":"Bydd botwm \\"Gweld Rhestr Cwestiynau\\" yn eich helpu i lywio trwy\'r rhestr cwestiynau.","view_session":"Gweld Sesiwn","visible_always":"Gweladwy Bob Amser","visible_at_the_end":"Gweladwy ar y Diwedd","wait_loading":"Arhoswch, mae eich asesiad yn llwytho.","wait_video_uploading":"Gall llwytho’r fideo gymryd 10-15 munud yn dibynnu ar eich cyflymder rhyngrwyd. Felly arhoswch nes bod y sgrin nesaf yn ymddangos.","want_to_capture":"Eisiau dal delwedd yn lle? Cliciwch yma.","want_to_upload":"Eisiau llwytho delwedd yn lle? Cliciwch yma.","webcam":"Gwe-gamera","webcam_diagnostics":"Diagnosteg gwe-gamera","webcam_error":"Nid yw\'r gwe-gamera ar gael. Er mwyn defnyddio\'r estyniad hwn, sicrhewch fod y gwe-gamera wedi’i alluogi.","webcam_not_working":"Nid yw\'r gwe-gamera\'n gweithio","webpages_users_access_during_exam":"Tudalennau gwe y gall defnyddwyr eu cyrchu yn ystod yr arholiad","welcome":"CROESO!","welsh":"Cymraeg","whats_new":"Beth sy’n newydd?","whitelist_specific_urls":"Rhestr wen URL penodol","wifi_connection":"Cysylltiad Wi-Fi","window_focus_in":"Ffocws Ffenestr i Mewn","window_focus_out":"Ffocws Ffenestr i Ffwrdd","windows_10":"Windows 10 (ni chefnogir modd Windows 10 S)","windows_8":"Windows 8 (ni chefnogir modd Windows 10 S)","wired_connection":"Cysylltiad â Gwifrau","without_saving":"Parhau heb gadw","workspace_checking":"Gwirio\'r Gofod Gweithio","workspace_checking_msg":"Mae angen inni sicrhau nad oes pobl eraill neu eitemau diangen gerllaw.","write_a_message":"Ysgrifennwch neges...","write_your_comment":"Ysgrifennwch eich sylw","yes":"Ie","you_welcome_here":"Croeso i chi yma!","your_assessment_completed":"Mae eich asesiad wedi\'i gwblhau.","your_face_must_visible_on_screen":"Rhaid i’ch wyneb fod yn gwbl weladwy ar y sgrin.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Mae eich rhyngrwyd yn araf iawn. Gwnewch yn siŵr bod gennych gysylltiad rhyngrwyd sefydlog.","your_session_will_end_when_the_time_is_up":"Bydd eich sesiwn yn dod i ben pan fydd yr amser i fyny neu pan gliciwch \'Cyflwyno ac Ymadael\'.","your_time_is_valuable":"Mae eich amser yn werthfawr","your_warm_pool_may_have_ideal_candidate_to_instahire":"Efallai bod eich cronfa gynnes yn cynnwys yr ymgeisydd delfrydol i’w gyflogi’n syth."}')},9880:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"1280x720 Auflösung","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 und höher","1_mbps":"1 Mbps","360_video":"360°-Video","3_mbps":"3 Mbps","640x480_resolution":"640x480 Auflösung","Unpublished":"Unveröffentlicht","__none__":"--Keine--","access_code":"Zugangscode","account_manager":"Account-Manager","action":"Aktion","actions":"Aktionen","add":"Hinzufügen","add_assessment":"Bewertung hinzufügen","add_candidates":"Kandidaten hinzufügen","add_description":"Beschreibung hinzufügen","add_exam":"Prüfung hinzufügen","add_file":"Datei hinzufügen","add_question":"Frage hinzufügen","add_questions":"Fragen hinzufügen","add_quiz":"Quiz hinzufügen","add_solution":"Lösung hinzufügen","add_url":"URL HINZUFÜGEN","advance_filter":"Erweiterter Filter","advanced_filter_search":"Erweiterte Filtersuche","agree_by_clicking":"Durch Klicken auf die Schaltfläche stimmen Sie den Allgemeinen Geschäftsbedingungen zu","ai_anomalies":"KI-Anomalien","ai_recorder_unknown_violation":"Die KI hat einen unbekannten Verstoß aufgezeichnet","all":"Alle","all_questions":"Alle Fragen","allow_access_to_popups":"Zugriff auf die folgenden Popups zulassen, die angezeigt werden, wie unten gezeigt:","allow_interruption":"Unterbrechung zulassen","allow_question_skip":"Fragen überspringen zulassen","and":"und","anomalies":"Anomalien","answer":"Antwort","answer_is_mandatory":"Die Beantwortung aller Fragen ist obligatorisch.","answered":"Beantwortet","apply_a_settings_profile_for_this_exam":"Ein Einstellungsprofil für diese Prüfung anwenden","apply_filter":"Filter anwenden","archive":"Archiv","are_you_sure_want_to_leave":"Sind Sie sicher, dass Sie gehen möchten?","are_you_sure_you_want_to_delete_this_candidate":"Sind Sie sicher, dass Sie diesen Kandidaten löschen möchten?","ask_anything_about_the_extension":"Sie können mir alles über die Erweiterung fragen. Wie kann ich Ihnen helfen?","assessment":"Bewertung","assessment_complete":"BEWERTUNG ABGESCHLOSSEN","assessment_completed":"Bewertung erfolgreich abgeschlossen","assessment_date_updated_successfully":"Datum der Bewertung erfolgreich aktualisiert","assessment_duration_invalid_please_contact_support":"Bewertungsdauer ist ungültig. Bitte kontaktieren Sie den Support!","assessment_expired":"Die Bewertung ist abgelaufen.","assessment_id":"Bewertungs-ID","assessment_indications_read":"Bewertungsanzeigen gelesen","assessment_invitation":"Bewertungseinladung","assessment_link":"Bewertungslink","assessment_list":"Bewertungsliste","assessment_loaded":"Bewertung erfolgreich geladen","assessment_name":"Bewertungsname","assessment_passed":"Bewertung bestanden","assessment_preinstructions_read_successfully":"Bewertungsvoranweisungen werden gelesen","assessment_restriction":"Bewertungseinschränkung","assessment_saved":"Bewertung wurde erfolgreich gespeichert","assessment_sections":"Bewertungsabschnitte","assessment_start_in_5":"Bewertung beginnt in 5","assessment_stat":"Bewertungsstatus","assessment_status_change":"Bewertungsstatusänderung","assessment_tool":"Bewertungstool","assessment_window":"Bewertungsfenster","assessments":"Bewertungen","assign_panel":"Panel zuweisen","assign_proctor":"Aufseher zuweisen","assignment_name_required":"Bewertungsname ist erforderlich","attach_file":"Datei anhängen","attempt":"Versuch","attend_test_quitely":"Nehmen Sie am Test in einer ruhigen Umgebung ohne Ablenkungen teil.","attending":"Teilnehmen","audio_check":"Audioprüfung","audio_check_completed":"Audioprüfung abgeschlossen","audio_check_msg":"Klicken Sie auf die Schaltfläche \\"Aufzeichnen\\" und lesen Sie den folgenden Satz.","audio_detected_click_next":"Im nächsten Bildschirm erkennen wir Ihr Audio. Klicken Sie auf die Schaltfläche WEITER, um fortzufahren, nachdem Sie die folgenden Tipps gelesen haben.","audio_level":"Audiopegel","audio_recordings":"Audioaufnahmen","audio_test_failed":"Audiotest fehlgeschlagen!","audio_test_passed":"Audiotest bestanden!","audio_video_recorded":"Diese Prüfung wird beaufsichtigt. Ihr Audio und Video werden während der gesamten Sitzung aufgezeichnet.","automate_the_routine_tasks_employ_your_time_wisely":"Automatisieren Sie die Routineaufgaben, nutzen Sie Ihre Zeit sinnvoll.","available":"Verfügbar","back":"Zurück","back_to_Instructions":"Zurück zu Anweisungen","back_to_exams":"Zurück zu Prüfungen","back_to_gradebook":"Zurück zum Notenbuch","bad":"Schlecht","basic_information":"Grundlegende Informationen","be_loud_clear":"Versuchen Sie, laut und deutlich zu sprechen und halten Sie das Mikrofon nah an Ihren Mund.","begin_exam_now":"Ich akzeptiere, beginne jetzt mit der Prüfung","block_browser_screenshot":"Browser-Screenshot blockieren","block_screen_recording":"Bildschirmaufzeichnung blockieren","body":"Text","bridge_the_talent_and_timezone":"Überbrücken Sie Talent und Zeitzone","browse_document":"Dokument durchsuchen","browser_anomalies":"Browseranomalien","browser_locked_successfully":"Browser erfolgreich gesperrt","brussels":"Brüssel","bulk_import_items":"Artikel im Massenimport","calculator":"Rechner","camera_mic":"Kamera & Mikrofon.","camera_recordings":"Kameraaufzeichnungen","cancel":"Abbrechen","cancellation":"Stornierung","candidate":"Kandidat","candidate_details_cannot_updated":"Kandidatendetails können nicht aktualisiert werden","candidate_email":"Kandidaten-E-Mail","candidate_group_id":"Gruppen-ID","candidate_id_is_uploaded_successfully":"Kandidaten-ID wurde erfolgreich hochgeladen","candidate_identity_card":"Kandidatenausweis","candidate_invite_assessment_section_id":"ID des Abschnitts zur Kandidateneinladung zur Beurteilung","candidate_list":"Kandidatenliste","candidate_name":"Kandidatenname","candidate_photo":"Foto","candidate_photo_captured_successfully":"Kandidatenfoto erfolgreich aufgenommen","candidate_photo_uploaded_successfully":"Kandidatenfoto wurde erfolgreich hochgeladen","candidate_reinvite_successfully":"Kandidat wurde erfolgreich erneut eingeladen","candidate_resized_window":"Größe des Kandidatenfensters angepasst","candidate_search":"Kandidatensuche","candidate_successfully_created":"Kandidat wurde erfolgreich erstellt","candidate_successfully_updated":"Kandidatendetails wurden erfolgreich aktualisiert","candidate_video_is_uploaded_successfully":"Kandidatenvideo wurde erfolgreich hochgeladen","candidates":"Kandidaten","cant_be_modified_assessment_in_open_state":"kann nicht geändert werden, wenn die Beurteilung im offenen Status ist, da dies einen kritischen Einfluss auf die Kandidatenberichte hätte","capture":"Erfassen","capture_id":"Erfassen Sie Ihren Ausweis, bevor Sie mit dem Ausfüllen des Formulars beginnen.","capture_image_of_id_card":"Erfassen Sie ein Bild Ihres Ausweises","catastrophic":"Katastrophal","category":"Kategorie","center_your_face":"Zentrieren Sie Ihr Gesicht im Rahmen und klicken Sie auf die Schaltfläche unten.","cg":"CG","change_assessment_status":"Bewertungsstatus ändern","change_candidate_invite_status":"Einladungsstatus des Kandidaten ändern","change_end_time":"Endzeit ändern","change_invite_status":"Einladungsfeld ändern","change_role":"Rolle ändern","change_roles":"Rollen ändern","change_start_and_last_date":"Start- und Enddatum ändern","change_start_date":"Startdatum ändern","change_start_time":"Startzeit ändern","change_status":"Ändern Status","change_type":"Typ ändern","cheating":"Schummeln","check_your_email":"Überprüfen Sie Ihre E-Mails","chemisty":"Chemie","choose_answer":"In diesem Abschnitt müssen Sie die richtige Antwort aus den vorgegebenen Möglichkeiten auswählen","chromebook_users":"Chromebook-Benutzer (Nur für automatisierte Überwachung. Wird für Live Proctoring nicht unterstützt)","chromebook_users_min_requirement":"Auf dem Chrome-Gerät läuft die neueste Version von Chrome OS.","chromebook_users_recommended_requirement":"Auf dem Chrome-Gerät läuft die neueste Version von Chrome OS.","clean_cache":"Cache leeren","clear_filter":"Filter löschen","click_go":"Indem Sie auf die Schaltfläche \\"GO\\" klicken, stimmen Sie den Allgemeinen Geschäftsbedingungen zu","click_here":"hier klicken","click_here_when_done":"Hier klicken, wenn Sie fertig sind","click_ok_to_agree":"Indem Sie auf Weiter klicken, stimmen Sie den Allgemeinen Geschäftsbedingungen zu.","click_start_recording":"KLICKEN SIE AUF AUFNAHME STARTEN UND LESEN SIE DEN FOLGENDEN TEXT","click_to_attempt":"Klicken Sie auf die Frage, um es zu versuchen","click_to_capture":"Klicken Sie hier, um die Aufzeichnung durchzuführen","click_to_submit_anwsers":"Um den Abschnitt zu übermitteln, klicken Sie im Überprüfungsbildschirm auf die Schaltfläche \\"Alle Antworten übermitteln\\". (Dieser Schritt kann nicht wiederholt werden)","click_to_upload":"Klicken Sie hier, um hochzuladen","clicking_here":"hier klicken","close":"Schließen","close_open_tabs":"Offene Tabs schließen","close_window":"Sie können das Fenster jetzt schließen.","closed":"Geschlossen","code":"Code","collapse":"Reduzieren","column_visibility":"Spaltensichtbarkeit","comment":"Kommentar","comment_suggestion":"Kommentar/Vorschlag","complete":"Abgeschlossen","complete_assessment":"Bewertung abschließen","completed":"Abgeschlossen","completed_at":"Abgeschlossen am","configuration":"Konfiguration","confirm":"Bestätigen","confirmation_delete_msg":"Diese Änderung kann nicht rückgängig gemacht werden. Möchten Sie die Änderung wirklich dauerhaft löschen? Playlist?","connection":"Verbindung","connectivity_ports":"Konnektivitätsports","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Kontakt","contact_support":"Support kontaktieren","contact_us":"Kontaktieren Sie uns","content_manager":"Content Manager","continue":"Weiter","conversion_ratio":"Konvertierungsverhältnis","coordinates":"Koordinaten","correct":"Richtig","course_id":"Kurs-ID","cpu":"CPU","cpu_error":"Dieses System erfüllt die CPU-Anforderungen nicht.","cpu_min_requirement":"mehr als 1,3 GHz weniger als 50 % CPU-Auslastung","cpu_recommended_requirement":"mehr als 2,3 GHz weniger als 85 % CPU-Auslastung","create":"Erstellen","create_a_panel":"Panel erstellen","create_a_playlist":"Playlist erstellen","create_account":"Konto erstellen","create_an_account":"Konto erstellen","create_an_assessment":"Bewertung erstellen","create_assessment":"Bewertung erstellen","create_candidate":"Kandidat erstellen","create_panel":"Panel erstellen","create_playlist":"Playlist erstellen","create_quiz":"Ein Quiz erstellen","created_at":"Erstellt am","creation_date":"Erstellungsdatum","current_invites_status":"Aktueller Einladungsstatus","customize_proctoring_options_below":"Passen Sie Ihr Prüfungserlebnis an, indem Sie aus den folgenden Aufsichtsoptionen auswählen.","dashboard":"Dashboard","date":"Datum","deadline":"Frist","delete":"Löschen","delete_assessment":"Bewertung löschen","delete_candidate":"Kandidat löschen","delete_playlist":"Wiedergabeliste löschen","description":"Beschreibung","description_cant_be_empty":"Beschreibung darf nicht leer sein.","description_of_the_scam":"Beschreibung des Betrugs","desktop":"Desktop","desktop_error":"Ein anderer Desktop-Bildschirm wurde erkannt. Um weiter zu verarbeiten, stellen Sie sicher, dass Sie den anderen Bildschirm ausgesteckt haben.","detail_view":"Detailansicht","detailed_view":"Detaillierte Ansicht","detect_resizing_of_window":"Größenänderung des Fensters erkennen","detect_unfocus":"Unfokus erkennen","detected_face_successfully":"Kandidatengesicht wurde erfolgreich erkannt.","detected_for_more_than_10_seconds":"Länger als 10 Sekunden erkannt! ","detecting_audio":"Audio wird erkannt","detecting_face":"Erkennung Gesicht…","detection_time":"Erkennungszeit","disable":"Deaktivieren","disable_clipboard":"Zwischenablage deaktivieren","disable_downloading":"Download deaktivieren","disable_function_keys":"Funktionstasten deaktivieren","disable_keyboard_shortcuts":"Tastenkürzel deaktivieren","disable_new_tabs":"Neue Tabs deaktivieren","disable_printing":"Drucken deaktivieren","disable_right_click":"Rechtsklick deaktivieren","disable_switch_to_apps":"Wechsel zu Apps deaktivieren","disable_tempering":"Temperierung deaktivieren","discard":"Verwerfen","display_help_icons":"Hilfesymbole anzeigen","display_options":"Anzeigeoptionen","display_potential_hardware_issues":"Potenzielle Hardwareprobleme anzeigen","display_suspicious_ids":"Verdächtige IDs anzeigen","do_not_lock_your_phone":"Sperren Sie Ihr Telefon nicht, Sie verlieren Ihre Verbindung, wenn Ihr Bildschirm gesperrt wird.","do_you_really_want_to_delete_the_grade":"Möchten Sie die Note","do_you_want_to_change_assessment_end_date_&_time":"Möchten Sie das Enddatum und die Endzeit der Bewertung ändern?","done":"Fertig","dont_have_a_template":"Sie haben keine Vorlage?","dont_have_email":"Sie haben keine E-Mail?","dont_have_email_id":"Sie haben keine E-Mail-ID?","dont_have_phone_number":"Sie haben keine Telefonnummer?","dont_see_yourself_above":"Sie sehen sich selbst nicht oben?","don’t_move_microphone":"Ändern Sie die Position des Mikrofons während der Bewertung nicht.","download":"Herunterladen","download_report":"Bericht herunterladen","download_speed":"Download-Geschwindigkeit","download_speed_error":"Ihre Internetverbindung reicht nicht aus, damit die Erweiterung ordnungsgemäß funktioniert.\\nUm diese Erweiterung zu verwenden, stellen Sie sicher, dass die Geschwindigkeit Ihrer Internetverbindung den Anforderungen entspricht.","download_speed_insufficient":"Downloadgeschwindigkeit ist unzureichend","download_the_app":"Laden Sie die App herunter","draft":"Entwurf","drag_&_drop_your_document":"Drag & Drop Ihres Dokuments","drag_n_drop_your_document_or":"Drag & Drop Ihres Dokuments oder","drop_the_files_here":"Legen Sie die Dateien hier ab","dual_screen_detected":"Dual-Screen ist erkannt","duplicate_assessment":"Duplikatsbewertung","duplicate_playlist":"Duplikatswiedergabeliste","duration":"Dauer","duration_taken":"Dauer","duration_time":"Dauer","during_your_assessment":"Während Ihrer Beurteilung","dutch":"Niederländisch","eassy_test":"Einfacher Test","edbs":"EDBS","edit":"Bearbeiten","edit_assessment":"Bewertung bearbeiten","edit_column":"Spalte bearbeiten","edit_playlist_settings":"Wiedergabelisteneinstellungen bearbeiten","edit_profile_for_later_use":"Bearbeiten Sie dieses Profil für die spätere Verwendung in Ihrem Konto","edit_settings":"Einstellungen bearbeiten","edit_template":"Vorlage bearbeiten","email":"E-Mail","email_id":"E-Mail-ID","email_or_password_wrong":"Ihre E-Mail-Adresse oder Ihr Passwort ist falsch","email_reminder_to_selected_candidate":"Eine E-Mail-Erinnerung wird an die ausgewählten Kandidaten gesendet","email_templates":"E-Mail-Vorlagen","en":"EN","enable":"Aktivieren","enable_javascript":"Um dieses Video anzusehen, aktivieren Sie bitte JavaScript und erwägen Sie ein Upgrade auf einen Webbrowser, der","enabled":"Aktiviert","end":"Ende","end_at":"Ende um","end_date_&_time":"Enddatum und -zeit","end_date_greater_start_date":"Das Enddatum sollte nach dem Startdatum liegen","end_section_description":"Ihre Sitzung ist beendet! Klicken Sie bitte auf \\"Weiter\\", um zum nächsten Schritt zu gelangen.","end_time":"Endzeit","english":"Englisch","english_rating":"Englische Bewertung","ensure_sharing_your_screen":"Stellen Sie sicher, dass Sie die Freigabe Ihres Bildschirms zugelassen haben.","enter":"Eingeben","enter_access_code":"Zugangscode eingeben","enter_code":"Code eingeben","enter_code_sent_to_email":"Geben Sie den Bestätigungscode ein, der an Ihre registrierte E-Mail-Adresse gesendet wurde","enter_detail":"GEBEN SIE IHRE DETAILS EIN","enter_email_id":"E-Mail-ID eingeben","enter_first_name":"Vornamen eingeben","enter_group_name":"Gruppennamen eingeben","enter_surname":"Nachnamen eingeben","enter_your_email":"Geben Sie Ihre E-Mail-Adresse ein","enter_your_first_name":"Geben Sie Ihren Vornamen ein","enter_your_last_name":"Geben Sie Ihren Nachnamen ein","enter_your_password":"Geben Sie Ihr Passwort ein","enter_your_phone_number":"Geben Sie Ihre Telefonnummer ein","essay":"Aufsatz","europe":"Europa","evaluate":"Bewerten","evaluate_full_session":"Gesamte Sitzung bewerten","evaluate_session":"Sitzung bewerten","evaluation_completed":"Ihre Bewertung ist abgeschlossen","evaluation_expired":"Die Bewertung ist abgelaufen.","evaluation_feedback":"Geben Sie Ihre Bewertung für diese Sitzung ab. Handelt es sich um Betrug oder nicht?","evaluator":"Bewerter","event":"Veranstaltung","event_details":"Veranstaltungsdetails","event_name":"Veranstaltungsname","events":"Veranstaltungen","exam_end":"Prüfungsende","exam_instructions_li_1":"Bewegen Sie Ihre Webcam 15-20 Sekunden lang, um uns Ihren Arbeitsbereich zu zeigen.","exam_instructions_li_2":"Klicken Sie erst auf die Schaltfläche ‚Weiter‘, nachdem Sie Ihren Arbeitsbereich gesehen haben.","exam_instructions_text":"Bereiten Sie jetzt bitte Ihre Arbeitsumgebung vor","exam_prep_msg":"Halten Sie einen amtlichen Lichtbildausweis bereit.\\nWenn Sie Ihren Ausweis abholen oder eine kurze Pause einlegen müssen, tun Sie dies bitte jetzt.","exam_preparation":"Prüfung Vorbereitung","exam_preparation_msg":"Die Bibliothek muss Ihre Prüfungssitzung für eine mögliche Überprüfung aufzeichnen.\\nDiese Informationen sind verschlüsselt und können nur von Personen abgerufen werden, die von Ihrer Institution autorisiert sind. Die Aufzeichnung beginnt nach der Überprüfung Ihres Systems und Ihrer Umgebung.","exam_preparation_tnc":"Ich bestätige, dass ich die Prüfungsregeln verstanden habe, bevor ich mit der Erweiterung mit der Prüfung beginne.","exam_security_level":"Prüfungssicherheitsstufe (basierend auf ausgewählten Optionen):","exam_settings_summary":"Zusammenfassung der Prüfungseinstellungen","exam_start":"Prüfungsbeginn","exam_taker":"Name des Kandidaten","exam_taker_information":"Informationen zum Prüfungsteilnehmer","exam_was_fair":"Prüfung war fair","exam_was_fraud":"Prüfung war Betrug","example_tutorial":"Ihr Telefon sollte aus diesem Betrachtungswinkel aufzeichnen","exams":"Prüfungen","export":"Exportieren","export_pdf_report":"PDF-Bericht exportieren","extend_date":"Datum verlängern","extend_invite_date":"Einladungsdatum verlängern","extend_last_date":"Letztes Datum verlängern","extension":"Verlängerung","extent_Date":"Datum verlängern","extent_date":"Datum verlängern","external_id":"Externe ID","face_detected_click_next":"Im nächsten Bildschirm erkennen wir Ihr Gesicht. Klicken Sie auf die Schaltfläche WEITER, um fortzufahren, nachdem Sie die folgenden Tipps gelesen haben.","face_not_detected":"Das Gesicht wurde nicht erkannt. Versuchen Sie es erneut.","face_photo":"Gesichtsfoto","failed":"Fehlgeschlagen","fair":"Gut","feedback_added_successfully":"Feedback wurde erfolgreich hinzugefügt","file_is_being_uploaded":"Datei wird hochgeladen","file_is_not_being_uploaded":"Datei wird nicht hochgeladen","files_at_once":"Datei auf einmal","filter":"Filter","final_score":"Endergebnis","final_section":"Endabschnitt","final_status":"Endstatus","finish_assessment_description":"Sie können diese Seite jetzt verlassen.","finish_assessment_title":"Bewertung abgeschlossen! Danke!","first_name":"Vorname","flight_checked":"Flugvorbereitung erfolgreich!","for_more_information":"für weitere Informationen.","force_full_screen":"Vollbild erzwingen","forgot_your_password":"Passwort vergessen?","fox_jumped_over_dog":"Ein schneller brauner Fuchs ist über einen faulen Hund gesprungen.","fr":"FR","fraud":"Betrug","fraud_report":"Betrugsmeldung","fraud_status":"Betrugsstatus","french":"Französisch","french_rating":"Französisch Bewertung","full_face_visible":"Positionieren Sie die Kamera so, dass Ihr ganzes Gesicht in der Vorschau sichtbar ist","gaze_away":"Wegschauen","gdpa_controls":"GPDA-Steuerung","general":"Allgemein","geography":"Geografie","german":"Deutsch","get_comfy":"Machen Sie es sich bequem","get_ready":"Machen Sie sich bereit","get_ready_for_identity_validation":"Machen Sie sich bereit für die Identitätsüberprüfung.","get_started":"LOSLEGEN","get_water":"Holen Sie sich Wasser","go":"LOS","go_back":"Zurück","good":"Gut","good_light":"Stellen Sie sicher, dass im Raum ausreichend gutes Licht vorhanden ist","got_it":"Verstanden","grade_book_tour":"Notenbuch-Tour","great":"Großartig","group_id":"Gruppen-ID","group_name":"Gruppe Name","guidelines":"PLATTFORMRICHTLINIEN","hardware_test":"HARDWARETEST","hardware_test_face_detection":"HARDWARETEST (Gesichtserkennung)","havent_selected_any_one":"Sie haben keines dieser Felder ausgewählt.","head_movement":"Kopfbewegung","help":"Hilfe","here_is_some_information_regarding_the_mereos_platform":"Hier sind einige Informationen zur Mereos-Plattform:","hey_mate_ready_for_test_it_starting_soon":"Hey Kumpel, bereit für den Test? Er beginnt bald.","hi_im_your_support_manager":"Hallo, ich bin Ihr Supportmanager","hi_there":"Hallo","hide_grades":"Noten ausblenden","hide_id":"ID ausblenden","hide_location":"Standort ausblenden","hide_names":"Namen ausblenden","hide_screen":"Bildschirm ausblenden","hide_video":"Video ausblenden","high":"Hoch","highly_satisfied":"Sehr zufrieden","highly_unsatisfied":"Sehr unzufrieden","hiring_manager":"Personalleiter","hold":"Halten","hold_your_photo_id_into_the_frame":"Halten Sie Ihren Lichtbildausweis in den Rahmen und klicken Sie unten auf die Schaltfläche \\"Ausweisfoto aufnehmen\\".","home_page":"Homepage","i_already_have_the_app":"Ich habe die App bereits","i_dont_have_the_app":"Ich habe die App nicht","i_downloaded_the_app":"Ich habe die App heruntergeladen","i_have_read_and_accept_the":"Ich habe die Bedingungen gelesen und akzeptiere sie","icc_msg":"Halten Sie einen amtlichen Lichtbildausweis bereit.\\nWenn Sie Ihren Ausweis abholen oder eine kurze Pause einlegen müssen, tun Sie dies bitte jetzt.","id":"Ausweis","id_being_verified":"Warten Sie. Kandidaten-ID wird überprüft.","id_card":"Ausweis","id_not_exists":"Einladung ist nicht mehr gültig. Bitte kontaktieren Sie die Schule","id_not_verified":"Kandidaten-ID ist nicht verifizierbar. Bitte versuchen Sie es erneut!","id_number":"Ausweisnummer","id_photo":"Ausweisfoto","id_successfully_verified":"Kandidaten-ID wurde erfolgreich verifiziert.","identity_card_verified_successfully":"Ausweis erfolgreich verifiziert","identity_validation":"Identitätsüberprüfung","ignored":"Ignoriert","import":"Importieren","import_and_invite":"Importieren und einladen","import_candidates":"Kandidaten importieren","in_order_to_carry_out_your_assessment":"Um Ihre Beurteilung durchzuführen, benötigen Sie ein Smartphone, um sich selbst aus einem zweiten Winkel zu filmen. Dazu müssen Sie die Mereos Mobile-Anwendung auf Ihrem Telefon installieren.","in_process":"In Bearbeitung","incident_Level":"Vorfallstufe","incident_level":"Vorfallstufe","incident_score":"Vorfallpunktzahl","incognito_error":"Diese Erweiterung darf nicht im Inkognito-Modus arbeiten.\\nErlauben Sie es und aktualisieren Sie die Seite.","incognito_mode":"Inkognito-Modus","incognito_mode_requirement_checking":"Inkognito-Modus wird geprüft","incognito_mode_requirement_checking_msg":"Diese Erweiterung muss im Inkognito-Modus funktionieren, um eine sichere Prüfungsaufsicht zu gewährleisten.\\nWeitere Informationen","incorrect":"Falsch","incorrect_end_date_and_time":"Falsches Enddatum und falsche Endzeit","indications_li_1":"Der Timer befindet sich oben auf dem Bildschirm.","indications_li_2":"Klicken Sie auf den linken Pfeil, um zur vorherigen Frage zurückzukehren.","indications_li_3":"Klicken Sie auf «Weiter», um die Frage zu ignorieren.","indications_li_4":"Sie können alle verpassten Fragen am Ende des Bewertung.","indications_li_5":"Um eine Frage zu markieren, die später angezeigt werden soll, aktivieren Sie das Kontrollkästchen \'Frage markieren\'.","indications_li_6":"Ihre Sitzung wird beendet, wenn Sie auf \'Alle Antworten senden\' klicken.","indications_title":"Plattforminformationen","infinite_pdf":"Unendliches PDF","initial_system_check_passed":"Erste Systemprüfung bestanden. Ihre Prüfung beginnt gleich.","initial_system_check_passed_get_ready_for_identity_validation":"Erste Systemprüfung bestanden. Machen Sie sich bereit für die Identitätsüberprüfung.","instruction":"Anweisung","instructions":"Anweisungen","internet_connection":"Internetverbindung","internet_connection_not_working":"Internetverbindung funktioniert nicht","internet_download_speed":"Internet-Downloadgeschwindigkeit","internet_speed_is_too_low":"Internetgeschwindigkeit zu niedrig","internet_upload_speed":"Internet-Uploadgeschwindigkeit","interview":"Interview","invalid_email":"Ungültige E-Mail","invalid_phone_number":"Ungültige Telefonnummer","invitation":"Einladung","invitation_id":"Einladungs-ID","invitation_incomplete_contact_support":"Diese Einladung ist unvollständig. Kontaktieren Sie den Support!","invitation_successfully_created":"Einladung wurde erfolgreich erstellt","invitations":"Einladungen","invite":"Einladen","invite_by_groups":"Einladung nach Gruppen","invite_name":"Einladungsname","invite_people":"Personen einladen","invite_search":"Einladungssuche","invite_status":"Einladungsstatus","invite_to_assessment":"Zur Bewertung einladen","invited":"Eingeladen","invited_at":"Eingeladen um","invited_for_evaluation":"Sie sind zur Bewertung eingeladen","invited_to_assessment_for":"Sie sind zu einer Bewertung eingeladen für","invites":"Einladungen","ip_address":"IP-Adresse","is_the_camera_feedback_good":"Ich bestätige, dass mein Telefon so positioniert ist, dass mein Bildschirm, meine Hände und die Oberseite meines Kopfes sichtbar sind.","it_looks_suspicious":"Es sieht verdächtig aus","italian":"Italienisch","just_remembered":"Gerade erinnert?","keep_mic_close":"Halten Sie das Mikrofon nah an Ihren Mund und ändern Sie die Position nicht, bis der Test abgeschlossen ist.","last_name":"Nachname","leave_your_comment_here":"Hinterlassen Sie hier Ihren Kommentar","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Live","load_full_question":"Vollständige Frage wird geladen anzeigen.","loading":"Wird geladen","location":"Standort","location_enabled":"Standort aktiviert","location_error":"Der Standort ist nicht zugänglich. Um diese Erweiterung zu verwenden, stellen Sie sicher, dass auf Ihren Standort zugegriffen werden kann.","location_not_working":"Standortfreigabe funktioniert nicht","lock_down_options":"Optionen sperren","log_out":"Abmelden","login_failed":"Bitte überprüfen Sie Ihre E-Mail oder Ihr Passwort!","login_successfully":"Sie haben sich erfolgreich angemeldet","longer_time_message":"Es dauert länger als üblich. Bitte warten...","look_out_for_the_best_talent_across_the_globe_remotely":"Halten Sie weltweit Ausschau nach den besten Talenten - aus der Ferne.","low":"Niedrig","mac_users":"Mac-Benutzer","macos_10_13":"macOS 10.13 (älteste noch gepflegte Version)","macos_10_15":"macOS 10.15","made_changes":"Sie scheinen einige Änderungen vorgenommen zu haben.","maps":"Karten","mark_for_review":"Zur Überprüfung markieren","marked":"markiert","marked_for_review":"Zur Überprüfung markiert","master_hiring_manager":"Master Hiring Manager","master_recruiter":"Master Recruiter","mathematics":"Mathematik","maths":"Mathematik","maximum_section_time":"Maximale Abschnittszeit","maximum_size_of_file":"Die maximale Dateigröße beträgt 50 MB csv oder xls. Bis zu 5 Dateien gleichzeitig","mb":"MB","med":"Med","mereos_proctoring_portal":"Mereos Proctoring Portal","mereos_settings":"Mereos-Einstellungen","mereos_support":"Mereos-Support","metro_code":"Metro-Code","microphone":"Mikrofon","microphone_error":"Das Mikrofon ist nicht zugänglich. Um diese Erweiterung zu verwenden, stellen Sie sicher, dass auf Ihr Mikrofon zugegriffen werden kann.","microphone_not_working":"Mikrofon funktioniert nicht","minimum":"Minimum","minutes":"Minuten","mobile_connection_successfull":"Mobile Verbindung erfolgreich hergestellt","mobile_phone_disconnected":"Mobiltelefon ist getrennt","modified_at":"Geändert am","modify_at":"Geändert am","month_names":"JanFebMarAprMayJunJulAugSepOctNovDez","more_actions":"Weitere Aktionen","moved_away_from_page":"Benutzer hat Prüfungsseite verlassen","moved_back_to_page":"Benutzer kehrt zur Prüfungsseite zurück","multiple_face_detected":"Mehrere Gesichter wurden erkannt","multiple_people":"Mehrere Personen","multiple_people_detected":"Es wurden mehrere Personen erkannt.","multiple_people_detected_for_more_than_10_seconds":"Für mehr als 10 Sekunden wurden mehrere Personen erkannt","multiple_people_in_the_screen":"Mehrere Personen auf dem Bildschirm","multiple_screens":"Mehrere Bildschirme","multiple_screens_detected":"Mehrere Bildschirme erkannt","my_settings_profiles":"Meine Einstellungsprofile","name":"Name","name_of_assessment":"Name der Prüfung","name_of_playlist":"Name der Playlist","navigate_up_and_down":"Nach oben und unten navigieren","need_help":"Benötigen Sie Hilfe?","negative_marks":"Negative Punkte","new_notification_from_mereos":"Neue Benachrichtigung von Mereos","new_playlist":"Neue Playlist","next":"Weiter","next_step":"Nächster Schritt","no":"Nein","no_access_code_use_mereos":"Wenn Sie keinen Zugangscode haben und sich nicht im Testzentrum befinden, können Sie die Prüfung mit Mereos ablegen.","no_anomalies":"Keine Anomalien","no_assessment_found":"Keine Prüfung gefunden","no_candidate_found":"Kein Kandidat gefunden","no_data_found":"Keine Daten gefunden","no_filtered_anomalies":"Keine gefilterten Anomalien","no_invites_found":"Keine Einladungen gefunden","no_mircophone_detected":"Kein Mikrofon erkannt","no_noise_in_room":"Stellen Sie sicher, dass Ihr Raum gut beleuchtet ist und es keine Hintergrundgeräusche gibt.","no_panel_added_to_the_section":"Kein Panel zum Abschnitt hinzugefügt","no_person_detected_come_back_to_assessment":"Es wurde keine Person erkannt. Bitte kommen Sie zur Beurteilung zurück.","no_person_detected_for_more_than_10_seconds":"Für mehr als 10 Sekunden wurde keine Person erkannt","no_person_in_the_screen":"Keine Person auf dem Bildschirm","no_playlist_found":"Keine Playlist gefunden","no_point_in_running_leave_in_time":"Es hat keinen Sinn zu rennen, du musst rechtzeitig los","no_rating_available_for_this_section_type":"Keine Bewertungen für diesen Abschnittstyp verfügbar","no_record_found":"Kein Datensatz gefunden","no_section_found":"Kein Abschnitt gefunden","no_session_found":"Keine Sitzung gefunden","normal":"Normal","not_fraud":"Kein Betrug","not_invited":"Nicht eingeladen","not_viewed":"Nicht angesehen","nothing_suspicious_was_noticed":"Es wurde nichts Verdächtiges bemerkt","notification":"Benachrichtigung","notification-histroy":"Benachrichtigung Verlauf","notification_not_working":"Benachrichtigung funktioniert nicht","notifications":"Benachrichtigungen","notifications_on_your_phone_should_be_turned_off":"Benachrichtigungen auf Ihrem Telefon sollten ausgeschaltet sein. Sie können die Aufzeichnung des Videostreams stören.","notify_candidate":"Kandidaten benachrichtigen","notify_candidates":"Kandidaten benachrichtigen","number_of_assessment_sections":"Anzahl der Bewertungsabschnitte","number_of_sections":"Anzahl der Abschnitte","object_detected":"Objekt erkannt","objective":"Ziel","of":"von","okay":"Okay","on_hold":"In Wartestellung","only_one_attempt":"Sie können einer Frage nur einmal beitreten. Sie können es später nicht mehr überprüfen.","only_one_screen":"Nur ein Bildschirm","open":"Öffnen","open_the_mereos_mobile_application":"Öffnen Sie die Mereos Mobile-Anwendung auf Ihrem Telefon und scannen Sie diesen QR-Code, um Ihr Telefon zu synchronisieren.","opened":"Geöffnet","or":"Oder","other_app_close":"Schließen Sie Anwendungen wie Skype, Google Hangouts usw., die den Test unterbrechen könnten.","overall_gpa":"Gesamt-GPA","overall_knowledge_rating":"Gesamt-Wissensbewertung","overall_time_taken":"Gesamtzeitaufwand","overview":"Übersicht","owner":"Eigentümer","page_error":"Seitenfehler","page_not_found":"Seite nicht gefunden","panel_name":"Panelname","password":"Passwort","password_reset_link_sent":"Ein Link zum Zurücksetzen des Passworts wurde an Ihre E-Mail-Adresse gesendet.","pause":"Pause","pc_users":"PC-Benutzer","pending":"Ausstehend","per_page":"Pro Seite","person_missing":"Person fehlt","persons_eyes_are_moving":"Die Augen der Person bewegen sich","persons_head_is_moving":"Der Kopf der Person bewegt sich","phone":"Telefon","phone_number":"Telefonnummer","photo_id":"Foto-ID","physics":"Physik","play":"Wiedergeben","playlist_name":"Name der Wiedergabeliste","playlists":"Wiedergabelisten","please_add_assessment_duration":"Bitte fügen Sie die Bewertungsdauer hinzu","please_add_atleast_one_item":"Bitte fügen Sie mindestens ein Element hinzu","please_check_your_mic":"Bitte überprüfen Sie Ihr Mikrofon, bevor Sie mit der Aufnahme beginnen","please_enable_force_submission\'":"Bitte aktivieren Sie die erzwungene Übermittlung","please_scan_this_qr_code":"Bitte scannen Sie dies QR-Code mit Ihrem Telefongerät, um die Mereos Mobile-Anwendung herunterzuladen.","please_share_entire_screen":"Bitte geben Sie den gesamten Bildschirm frei.","please_take_picture_or":"Bitte mach ein Foto oder","please_unselect_time_region_from_template\'":"Bitte deaktivieren Sie die Zeitregion in der Vorlage","please_wait":"Bitte warten...","please_wait_we_processing":"Bitte warten, wir verarbeiten.","points":"Punkte","poor":"Schlecht","pop_up":"POP-UP","portuguese_brazil":"Portugiesisch (Brasilien)","positive_marks":"Positive Noten","post_instructions_text":"Hier sind die Anweisungen nach der Bewertung","postinstructions":"Anweisungen posten","pre_configured_behavior":"Wählen Sie eine vorkonfigurierte Verhaltenseinstellung oder passen Sie eine der Prüfungseinstellungen an.","preinstructions":"Anweisungen vorab","previous_step":"Vorheriger Schritt","privacy_msg":"Ich stimme der Verarbeitung meiner personenbezogenen Daten für die in der Datenschutzrichtlinie genannten spezifischen Zwecke zu.","privacy_policy":"Datenschutzrichtlinie","privacy_policy_msg":"Ich stimme der Verarbeitung meiner personenbezogenen Daten für die in der Datenschutzrichtlinie genannten spezifischen Zwecke zu.","processed_anomalies":"Verarbeitete Anomalien","processing":"Verarbeitung","proctor":"Aufsicht","proctored_review_will_end_in":"Aufsichtsprüfung endet mit","proctoring_behavior_settings":"Einstellungen für das Aufsichtsverhalten","proctoring_exam_description":"Auffälligkeiten vergleichen die Handlungen eines Prüflings mit den übrigen Prüfungen in der Klasse. Dadurch werden statistisch signifikante Unterschiede im Verhalten eines Prüflings hervorgehoben.","proctoring_exam_metrics":"Metriken für die Aufsichtsprüfung","proctoring_exam_settings":"Einstellungen für die Aufsichtsprüfung","proctoring_frame_description":"Der Schweregrad jeder Metrik legt die Gewichtung verdächtigen Verhaltens im Verhältnis zu den anderen Verhaltensweisen fest. Diese Metriken werden mit jedem Bild berechnet. Jedes Merkmal wird für jedes Bild abgeleitet, unabhängig davon, ob die Einstellungen aktiviert sind oder nicht. Der Schweregrad dieser Metriken kann jederzeit geändert werden, was zu einer Neuberechnung der Verdächtigkeit einer beaufsichtigten Prüfung führt.","proctoring_frame_metrics":"Metriken des Aufsichtsrahmens","proctoring_profile_required":"Aufsichtsprofil ist erforderlich","profile_id":"Profil-ID","proven_fraud":"Nachgewiesener Betrug","provider":"Anbieter","published":"Veröffentlicht","question":"Frage","question_1_of_20":"FRAGE 1 VON 20","question_List":"Fragenliste","question_based_stats":"Fragenbasierte Statistiken","question_count":"Fragenanzahl","question_list":"Fragenliste","question_name":"Fragenname","question_not_answered":"Sie haben X von Y Fragen nicht beantwortet.","question_view":"Fragenansicht","questions":"Fragen","questions_attended":"Frage beantwortet","questions_uploaded_successFully":"Fragen wurden erfolgreich hochgeladen","quick_filter":"Schnellfilter","quiz_name":"Quizname","ram":"RAM","ram_error":"Dieses System erfüllt die RAM-Anforderungen nicht.","ram_min_requirement":"4 GB\\nweniger als 90 % RAM-Nutzung","ram_recommended_requirement":"16 GB\\nweniger als 70 % Nutzung","rate_experience_by_emotion":"Bewerten Sie Ihre Erfahrung, indem Sie auf das Emoticon klicken.","rating":"Bewertung","re_invite":"Erneut einladen","re_record_audio":"Audio erneut aufnehmen","recapture":"Erneut aufnehmen","recommended":"Empfohlen","record_audio":"Audio aufnehmen","record_not_found":"Keine Datensätze gefunden","record_room":"Aufnahmeraum","record_screen":"Bildschirm aufnehmen","record_video":"Video aufnehmen","record_web_traffic":"Web-Traffic aufzeichnen","recording":"Aufzeichnung","recording_started_successfully":"Aufzeichnung erfolgreich gestartet","recording_stopped_successfully":"Aufnahme erfolgreich gestoppt","recruiter":"Recruiter","refresh":"Aktualisieren","register_here":"HIER REGISTRIEREN","registered_successfully":"Erfolgreich registriert!","reinvite":"Erneut einladen","reinvite_people":"Personen erneut einladen","reject":"Ablehnen","rejected":"Abgelehnt","rejection":"Ablehnung","reloading_closing_add_partial_data":"Das Neuladen oder Schließen des Fensters kann zu einem teilweisen Download der Datei führen.","remind_candidate":"Kandidaten erinnern","remind_candidates":"Kandidaten erinnern","remind_panel":"Erinnerungspanel","reminder":"Erinnerung","remote_automate_reuse":"Remote. Automatisieren. Wiederverwenden.","reports":"Berichte","required_time":"Erforderliche Zeit","reset":"Zurücksetzen","reset_email_sent":"Ein Link zum Zurücksetzen Ihres Passworts wird an Ihre E-Mail-Adresse gesendet.","reshare_screen":"Bildschirm erneut teilen","reshoot_video":"Video erneut aufnehmen","results":"Ergebnisse","resume":"Lebenslauf","resume_doc":"Lebenslauf","retake":"Erneut aufnehmen","retake_id_photo":"Passfoto erneut aufnehmen","retake_photo":"Foto erneut aufnehmen","reuse_the_candidate_data_and_hire_faster":"Kandidatendaten erneut verwenden und schneller einstellen","review_q_later":"Um eine Frage später zu überprüfen, aktivieren Sie das Kontrollkästchen \\"Zur Überprüfung markieren\\". Verwenden Sie Filter im Überprüfungsbildschirm, um die markierten Fragen anzuzeigen.","roles":"Rollen","room_id":"Raum-ID","room_scan":"Raumscan","room_scan_completed":"Raumscan abgeschlossen","room_scanning":"Raumscan","roomscan_recordings":"Raumscan-Aufzeichnungen","row":"Zeile","satisfied":"Zufrieden","save":"Speichern","save_answer":"Ihre Antwort wird nicht hochgeladen. Klicken Sie auf die Schaltfläche WEITER, um Ihre Antwort zu speichern","save_exam_settings":"Prüfungseinstellungen speichern","save_information":"Informationen speichern","save_n_publish":"Speichern &amp; Veröffentlichen","save_settings_profile":"Profileinstellungen speichern","saved_successfully":"Erfolgreich gespeichert","scan_or_download_the_below_qr_code_to":"Scannen oder laden Sie den untenstehenden QR-Code herunter, um","scan_your_room":"Scannen Sie Ihren Raum 360°, einschließlich Ihres Arbeitsbereichs","schedule_invite":"Einladung planen","schedule_live":"Live planen","scheduled_at":"Geplant um","scheduled_invite":"Geplante Einladung","scheduled_time":"Geplante Zeit","school":"Schule","school_name":"Name der Schule","science":"Wissenschaft","score":"Punktzahl","screen":"Bildschirm","screen_record":"Bildschirmaufzeichnung","screen_recording_window_shared":"Bildschirmaufzeichnungsfenster freigegeben","screen_recordings":"Bildschirmaufzeichnungen","screen_resolution":"Bildschirmauflösung","screen_shared_successfully":"Sie haben Ihren Bildschirm erfolgreich freigegeben","screen_sharing_stopped":"Bildschirmfreigabe gestoppt","search":"Suchen","search_an_exam":"Prüfung suchen","search_an_exam_taker":"Prüfungsteilnehmer suchen","search_by":"Suchen nach","search_candidate_name_or_location":"Kandidat oder Ort suchen","search_location":"Ort suchen","search_question":"Frage suchen","search_text":"Suchtext","section":"Abschnitt","section1":"Abschnitt 1","section2":"Abschnitt 2","section3":"Abschnitt 3","section4":"Abschnitt 4","section_activity_required":"Aktivität ist erforderlich","section_completed_next_to_continue":"Sie haben den Abschnitt abgeschlossen. Klicken Sie bitte auf Weiter, um fortzufahren.","section_name":"Abschnittsname","section_status":"Abschnittsstatus","section_type":"Abschnittstyp","sections":"Abschnitte","secure_feature":"Sichere Funktion","security_document":"Sicherheitsdokument","see_all_arguments":"Alle Argumente anzeigen","see_more":"Mehr anzeigen","see_support_tags":"Support-Tags anzeigen","seems_like_a_fraud":"Scheint Betrug zu sein","select":"Auswählen","select_a_chat_room_for_messages":"Wählen Sie einen Chatroom für Nachrichten aus","select_a_question":"Wählen Sie eine Frage aus","select_a_saved_setting_profile_or_create_new_one":"Wählen Sie ein gespeichertes Einstellungsprofil aus oder erstellen Sie ein neues.","select_and_invite_status":"Status auswählen und einladen","select_answer_below_from_below":"Wählen Sie Ihre Antwort unten aus:","select_camera":"Kamera auswählen","select_candidates":"Kandidaten auswählen","select_complete":"ABSCHNITT ABGESCHLOSSEN","select_evaluator":"Bewerter auswählen","select_microphone":"Mikrofon auswählen","select_on_assessments":"Bewertungen auswählen","select_on_assessments_to_duplicate":"Bewertungen zum Duplizieren auswählen","select_on_playlist_to_duplicate":"Playlist zum Duplizieren auswählen","select_on_status_to_change":"Zu ändernden Status auswählen","select_preferred_camera_and_microphone":"Wählen Sie die bevorzugte Kamera und das Mikrofon aus.","select_proctor":"Aufsichtsperson auswählen","select_profile":"Profil auswählen","select_role":"Rolle auswählen","selected":"Ausgewählt","selection":"Auswahl","send":"Senden","send_candidates_reminder":"Kandidatenerinnerung senden","send_invitation":"Einladung senden","send_invite":"Einladung senden","send_reset_password_link":"Link zum Zurücksetzen des Passworts senden","session":"Sitzung","session_completed":"Die Sitzung ist abgeschlossen","session_completed_successfully":"Die Sitzung wurde erfolgreich abgeschlossen","session_duration":"Sitzungsdauer","session_id":"Sitzungs-ID","session_initiated":"Sitzung eingeleitet","session_started":"Ihre Sitzung wird jetzt gestartet.","session_status":"Sitzungsstatus","session_view":"Sitzungsansicht","sessions":"Sitzungen","set_as_default_profile":"Als Standardprofil festlegen","setting_up_your_phone_camera":"Einrichten Ihrer Telefonkamera","settings":"Einstellungen","setup_section":"Abschnitt einrichten","several_sections":"Mehrere Abschnitte","share_screen_msg":"Klicken Sie auf die Schaltfläche \\"Fertig\\", nachdem Sie die Freigabe Ihres Bildschirm.","share_setting":"Einstellung teilen","share_settings":"Einstellungen teilen","share_the_assessment":"Bewertung teilen","show_unmatched_attempts":"Nicht übereinstimmende Versuche anzeigen","showing_results_for":"Ergebnisse anzeigen für","sign_in":"Anmelden","sign_in_with":"Anmelden mit","sign_out":"Abmelden","skills":"Fähigkeiten","skip":"Überspringen","skip_question_click_next":"Klicken Sie auf die Schaltfläche \\"Weiter\\", um eine Frage zu überspringen. Sie können die übersprungenen Fragen mithilfe der Funktion \\"Fragenliste anzeigen\\" erneut aufrufen","skipped":"Übersprungen","skipped_question":"Frage übersprungen","solution":"Lösung","some_attribute":"Einige Attribute","some_of_the_candidate_start_assessment":"Einige der Kandidaten beginnen mit der Bewertung. Sie können die Bewertung nicht bearbeiten","something_went_wrong":"Etwas ist schiefgelaufen","something_went_wrong_please_contact_support":"Etwas ist schiefgelaufen! Bitte kontaktieren Sie den Support.","something_went_wrong_please_try_again_later":"Etwas ist schiefgelaufen. Bitte versuchen Sie es später noch einmal.","something_went_wrong_please_upload_again":"Etwas ist schiefgelaufen, bitte laden Sie es erneut hoch","sort_by_last_name":"Nach Nachnamen sortieren","sound_check":"Toncheck","sourcer":"Quelle","spanish":"Spanisch","speech_detected":"Sprache erkannt","speech_is_detected":"Sprache erkannt","start":"Start","start_and_end_time":"Start- und Endzeit","start_at":"Start um","start_camera":"Kamera starten","start_chat":"Chat starten","start_date":"Startdatum","start_date_&_time":"Startdatum und -zeit","start_recording":"Aufnahme starten","start_time":"Startzeit","start_tour":"Tour starten","stats":"Statistiken","status":"Status","step_1":"Schritt 1","step_2":"Schritt 2","step_3":"Schritt 3","step_4":"Schritt 4","stop_recording":"Aufzeichnung beenden","student_id":"Studenten-ID","student_identify_verification":"Studenten-ID-Verifizierung","student_information":"Studenteninformationen","studies_at":"Studieren an","subject":"Fach","submission_time":"Übermittlungszeit","submit":"Übermittlung","submit_all":"Alle übermitteln","submit_and_end":"Möchten Sie wirklich alle Antworten übermitteln und den Abschnitt beenden?","submit_answers":"ALLE ANTWORTEN ÜBERMITTELN","summary":"Zusammenfassung","support_chat":"Support-Chat","supports_html5_video":"unterstützt HTML5-Video.","surname":"Nachname","suspecious":"Verdächtig","suspicious_incidents":"Verdächtige Vorfälle","switch_language":"Sprache wechseln","synchronisation_mobile":"Mobile Sync","system_diagnostic":"Systemdiagnose","system_diagnostic_msg":"Die Systemdiagnose dauert nur einen Moment.","system_diagnostic_passed":"Systemdiagnose bestanden","system_requirement_checking":"Überprüfung der Systemanforderungen","system_requirement_checking_msg":"Wir überprüfen Ihr System auf Mindestanforderungen zur Verwendung der Bibliothek.\\nSie können die vollständige Liste der Anforderungen lesen unter ","system_requirements":"Überprüfung der Systemanforderungen","system_requirements_for_testing":"Systemanforderungen zum Testen","t2":"T2","take_a_photo":"Machen Sie ein Foto","take_id_photo":"Machen Sie ein Passfoto","take_photo":"Foto machen","take_the_superhero_leap_and_hire_fast_with_instahiring":"Werden Sie zum Superhelden und stellen Sie schnell mit Instahiring ein.","take_with_mereos":"Mit Mereos machen","template_editing":"Vorlage bearbeiten","template_id":"Vorlagen-ID","terms_and_conditions_read":"Allgemeine Geschäftsbedingungen lesen","terms_of_use":"Nutzungsbedingungen","test":"Test","test_translation":"Testübersetzung","thankyou":"Danke!","the_maximum_file_size_is":"Die maximale Dateigröße beträgt","the_questions":"Die Fragen","the_questions_cant_be_modified_if_the_assessment":"Die Fragen können nicht geändert werden, wenn die Bewertung im offenen Status ist, da dies einen kritischen Einfluss auf die Kandidatenberichte","this_invitation_has_expired":"Diese Einladung ist abgelaufen","time":"Zeit","time_required":"Die erforderliche Zeit beträgt","time_taken":"Benötigte Zeit","time_to_answer":"Sie haben X Minuten Zeit, um Y Frage(n) zu beantworten.","time_zone":"Zeitzone","timer_on_screen":"Sie haben X Minuten Zeit, um Y Frage(n) zu beantworten. Bitte beachten Sie den Timer oben rechts auf dem Bildschirm.","timezone":"Zeitzone","tips":"Nützliche Tipps:","to_end":"Zum Ende","to_search_question_use_filter":"Um nach einer bestimmten Frage zu suchen, verwenden Sie die Such- und Filteroption im Abschnitt \\"Überprüfung\\".","to_start":"Zum Anfang","total":"Gesamt","total_questions":"Gesamtzahl der Fragen","total_score":"Gesamtpunktzahl","try_again":"NOCHMALS VERSUCHEN","type":"Typ","type_your_answer_in_space":"Geben Sie Ihre Antwort in das dafür vorgesehene Feld auf der rechten Seite des Bildschirms ein. Falls Sie eine Datei anhängen möchten, klicken Sie auf den Link \\"Datei anhängen\\" und senden Sie sie ab.","un_publish":"Veröffentlichung aufheben","unauthorized_access":"Unberechtigter Zugriff","unauthorized_object_detected_for_more_than_10_seconds":"Für mehr als 10 Sekunden wurde ein nicht autorisiertes Objekt erkannt","unauthorized_object_detected_please_put_it_away":"Es wurde ein nicht autorisierter Gegenstand erkannt. Bitte legen Sie ihn weg","unmarked":"unmarkiert","unsatisfied":"Unzufrieden","unselect":"Auswahl aufheben","up_to":"Bis zu","update":"Aktualisieren","update_assessment":"Bewertung aktualisieren","update_candidate":"Kandidat aktualisieren","update_candidate_details":"Kandidatendetails aktualisieren","update_quiz":"Quiz aktualisieren","upload":"Hochladen","upload_candidate_from":"Kandidaten hochladen von","upload_id_image":"Hochladen/Erstellen Sie ein Bild Ihres Personalausweises.","upload_image":"Bild hochladen","upload_items":"Elemente hochladen","upload_resume":"Lebenslauf hochladen","upload_speed":"Upload-Geschwindigkeit","upload_speed_error":"Ihre Upload-Geschwindigkeit reicht nicht aus, um diese Prüfung zu starten.","upload_speed_insufficient":"Uploadgeschwindigkeit ist unzureichend","upload_your_id_card":"Bild Ihres Personalausweises hochladen","upload_your_identity_document":"Lade dein Ausweisdokument hoch","uploaded":"Hochgeladen","url":"URL","url_filtering":"URL-Filterung","use_select_cam_if_not_detected":"Verwenden Sie das Dropdown-Menü \\"Kamera auswählen\\", um eine andere Kamera auszuwählen, falls Ihre Kamera nicht automatisch erkannt wird.","use_select_microphone_if_not_detected":"Verwenden Sie das Dropdown-Menü \\"Mikrofon auswählen\\", falls Ihr Mikrofon nicht automatisch erkannt wird.","use_washroom":"Toilette verwenden","useful_tips":"Nützliche Tipps:","user":"Benutzer","user_idle":"Benutzer inaktiv","candidate_interrupted_the_stream":"Benutzer hat den Stream unterbrochen!","username":"Benutzername","users":"Benutzer","verification_code":"Verifizierungscode eingeben","verification_completed":"Verifizierung abgeschlossen","verification_completed_msg":"Die Verifizierung wurde erfolgreich abgeschlossen und alles ist bereit für die Prüfung.\\nLesen und akzeptieren Sie die Prüfungsvereinbarung und dann machen wir weiter.","video_codec":"Video-Codec","video_extension":"Video-Erweiterung","video_recorded":"Ihr Video kann während dieser Sitzung aufgezeichnet werden.","video_recording_msg":" Während dieser Sitzung kann ein Video aufgezeichnet werden. Stellen Sie sicher, dass der Raum ausreichend beleuchtet ist und keine Hintergrundgeräusche vorhanden sind","view_our":"Unsere anzeigen","view_question_list":"Fragenliste anzeigen","view_question_list_button_help":"Die Schaltfläche \\"Fragenliste anzeigen\\" hilft Ihnen beim Navigieren durch die Fragenliste.","view_session":"Sitzung anzeigen","visible_always":"Immer sichtbar","visible_at_the_end":"Am Ende sichtbar","wait_loading":"Warten Sie, während Ihre Bewertung geladen wird.","wait_video_uploading":"Das Hochladen des Videos kann je nach Internetgeschwindigkeit 10 bis 15 Minuten dauern. Warten Sie daher bitte, bis der nächste Bildschirm angezeigt wird.","want_to_capture":"Möchten Sie stattdessen ein Bild aufnehmen? Klicken Sie hier.","want_to_upload":"Möchten Sie stattdessen ein Bild hochladen? Klicken Sie hier.","webcam":"Webcam","webcam_diagnostics":"Webcam-Diagnose","webcam_error":"Auf die Webcam kann nicht zugegriffen werden. Um diese Erweiterung zu verwenden, stellen Sie sicher, dass auf Ihre Webcam zugegriffen werden kann.","webcam_not_working":"Webcam funktioniert nicht","webpages_users_access_during_exam":"Webseiten, auf die Benutzer während der Prüfung zugreifen können","welcome":"WILLKOMMEN!","welsh":"Walisisch","whats_new":"Was ist neu?","whitelist_specific_urls":"Whitelist-spezifische URLs","wifi_connection":"WLAN-Verbindung","window_focus_in":"Fensterfokus-In","window_focus_out":"Fensterfokus-Out","windows_10":"Windows 10 (10 S-Modus wird nicht unterstützt)","windows_8":"Windows 8 (Windows 10 S-Modus wird nicht unterstützt)","wired_connection":"Kabelverbindung","without_saving":"Fortfahren ohne Speichern","workspace_checking":"Arbeitsbereichsprüfung","workspace_checking_msg":"Wir müssen sicherstellen, dass sich keine anderen Personen oder unnötigen Gegenstände in Ihrer Nähe befinden.","write_a_message":"Schreiben Sie eine Nachricht...","write_your_comment":"Schreiben Sie Ihren Kommentar","yes":"Ja","you_welcome_here":"Hier sind Sie herzlich willkommen!","your_assessment_completed":"Ihre Bewertung ist abgeschlossen.","your_face_must_visible_on_screen":"Ihr Gesicht muss vollständig auf dem Bildschirm sichtbar sein.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Ihr Internet ist sehr langsam. Bitte stellen Sie sicher, dass Sie über eine stabile Internetverbindung verfügen.","your_session_will_end_when_the_time_is_up":"Deine Sitzung endet, wenn die Zeit abgelaufen ist oder wenn du auf \\"Senden und beenden\\" klickst.","your_time_is_valuable":"Ihre Zeit ist wertvoll","your_warm_pool_may_have_ideal_candidate_to_instahire":"Ihr Warm Pool hat möglicherweise einen idealen Kandidaten für Instahire."}')},7740:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"1280x720 resolution","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 and above","1_mbps":"1 Mbps","360_video":"360° video","3_mbps":"3 Mbps","640x480_resolution":"640x480 resolution","Unpublished":"Unpublished","__none__":"--None--","access_code":"Access Code","account_manager":"Account Manager","action":"Action","actions":"Actions","add":"Add","add_assessment":"Add Assessment","add_candidates":"Add Candidates","add_description":"Add Description","add_exam":"Add Exam","add_file":"Add File","add_question":"Add Question","add_questions":"Add Questions","add_quiz":"Add a quiz","add_solution":"Add Solution","add_url":"ADD URL","advance_filter":"Advance Filter","advanced_filter_search":"Advanced filter search","agree_by_clicking":"By clicking on the button you agree to the Terms & Conditions","ai_anomalies":"AI Anomalies","ai_recorder_unknown_violation":"There is an unknown violation recorded by AI","all":"All","all_questions":"All Questions","allow_access_to_popups":"Allow access to the following popups that appears, as show below:","allow_interruption":"Allow interruption","allow_question_skip":"Allow Question Skip","and":"and","anomalies":"Anomalies","answer":"Answer","answer_is_mandatory":"Answering all the questions is mandatory.","answered":"Answered","apply_a_settings_profile_for_this_exam":"Apply a settings profile for this exam","apply_filter":"Apply Filter","archive":"Archive","are_you_sure_want_to_leave":"Are you sure you want to leave?","are_you_sure_you_want_to_delete_this_candidate":"Are you sure you want to delete this candidate?","ask_anything_about_the_extension":"You could ask me anything about the extension. How can I help you?","assessment":"Assessment","assessment_complete":"ASSESSMENT COMPLETE","assessment_completed":"Assessment is completed successfully","assessment_date_updated_successfully":"Date of the assessment is updated successfully","assessment_duration_invalid_please_contact_support":"Assessment duration is invalid. Please contact support!","assessment_expired":"The assessment has expired.","assessment_id":"Assessment Id","assessment_indications_read":"Assessment Indications are read","assessment_invitation":"Assessment Invitation","assessment_link":"Assessment Link","assessment_list":"Assessment List","assessment_loaded":"Assessment is loaded successfully","assessment_name":"Assessment name","assessment_passed":"Assessment Passed","assessment_preinstructions_read_successfully":"Assessment preinstructions are read","assessment_restriction":"Assessment Restriction","assessment_saved":"Assessment is saved successfully","assessment_sections":"Assessment sections","assessment_start_in_5":"Assessment starts in 5","assessment_stat":"Assessment Stat","assessment_status_change":"Assessment Status Change","assessment_tool":"Assessment Tool","assessment_window":"Assessment Window","assessments":"Assessments","assign_panel":"Assign Panel","assign_proctor":"Assign Proctor","assignment_name_required":"Assessment name is required","attach_file":"Attach File","attempt":"Attempt","attend_test_quitely":"Attend the test in a quiet environment without any distractions.","attending":"Attending","audio_check":"Audio check","audio_check_completed":"Audio Check Completed","audio_check_msg":"Click on the \\"Record\\" button and read the sentence below.","audio_detected_click_next":"In the next screen, we will detect your audio. Click on the NEXT button to proceed after reading the tips below.","audio_level":"Audio level","audio_recordings":"Audio recordings","audio_test_failed":"Audio test failed!","audio_test_passed":"Audio test passed!","audio_video_recorded":"This assessment is proctored. Your audio and video will be recorded throughout the session.","automate_the_routine_tasks_employ_your_time_wisely":"Automate the routine tasks, employ your time wisely.","available":"Available","back":"Back","back_to_Instructions":"Back to Instructions","back_to_exams":"Back to Exams","back_to_gradebook":"Back To Gradebook","bad":"Bad","basic_information":"Basic Information","be_loud_clear":"Try speaking loud and clear and keep the microphone close to your mouth.","begin_exam_now":"I accept, begin exam now","block_browser_screenshot":"Block Browser Screenshot","block_screen_recording":"Block Screen Recording","body":"Body","bridge_the_talent_and_timezone":"Bridge the talent and timezone","browse_document":"browse document","browser_anomalies":"Browser Anomalies","browser_locked_successfully":"Browser Locked Successfully","brussels":"Brussels","bulk_import_items":"Bulk Import Items","calculator":"Calculator","camera_mic":"Camera & Mic.","camera_recordings":"Camera recordings","cancel":"Cancel","cancellation":"Cancellation","candidate":"Candidate","candidate_details_cannot_updated":"Candidate details cannot be updated","candidate_email":"Candidate Email","candidate_group_id":"Group Id","candidate_id_is_uploaded_successfully":"Candidate id is uploaded successfully","candidate_identity_card":"Candidate identity card","candidate_invite_assessment_section_id":"Candidate invite assessment section id","candidate_list":"Candidate List","candidate_name":"Candidate Name","candidate_photo":"Photo","candidate_photo_captured_successfully":"Candidate Photo Captured Successfully","candidate_photo_uploaded_successfully":"Candidate photo is uploaded successfully","candidate_reinvite_successfully":"Candidate is re-invited successfully","candidate_resized_window":"Candidate resized window","candidate_search":"Candidate Search","candidate_successfully_created":"Candidate is successfully created","candidate_successfully_updated":"Candidate details are successfully updated","candidate_video_is_uploaded_successfully":"Candidate video is uploaded successfully","candidates":"Candidates","cant_be_modified_assessment_in_open_state":"can\'t be modified if the assessment is in open state as this will have a critical impact on the candidate reports","capture":"Capture","capture_id":"Capture your ID before your start filling the form.","capture_image_of_id_card":"Capture image of your ID card","catastrophic":"Catastrophic","category":"Category","center_your_face":"Center your face into the frame and click the button below.","cg":"CG","change_assessment_status":"Change Assessment Status","change_candidate_invite_status":"Change Candidate Invite Status","change_end_time":"Change end time","change_invite_status":"Change Invite Panel","change_role":"Change Role","change_roles":"Change Roles","change_start_and_last_date":"Change Start And Last Date","change_start_date":"Change Start Date","change_start_time":"Change start time","change_status":"Change Status","change_type":"Change Type","cheating":"Cheating","check_your_email":"Check your email","chemisty":"Chemistry","choose_answer":"In this section, you have to choose the correct answer from the given choices","chromebook_users":"Chromebook Users (Only for Automated Proctoring. Is not Supported for Live Proctoring)","chromebook_users_min_requirement":"Chrome device is running the latest version of Chrome OS.","chromebook_users_recommended_requirement":"Chrome device is running the latest version of Chrome OS.","clean_cache":"Clean Cache","clear_filter":"Clear Filter","click_go":"By clicking on the \\"GO\\" button you agree to the Terms & Conditions","click_here":"click here","click_here_when_done":"Click here when done","click_ok_to_agree":"By clicking next you will agree to the Terms & Conditions.","click_start_recording":"CLICK START RECORDING & READ THE FOLLOWING TEXT","click_to_attempt":"Click on question to attempt","click_to_capture":"Click here to capture","click_to_submit_anwsers":"To submit the section click on the \\"Submit All Answers\\" button in the Review screen. (This step can not be redone)","click_to_upload":"Click here to upload","clicking_here":"clicking here","close":"Close","close_open_tabs":"Close Open Tabs","close_window":"You may close the window now.","closed":"Closed","code":"Code","collapse":"Collapse","column_visibility":"Column Visibility","comment":"Comment","comment_suggestion":"Comment/Suggestion","complete":"Complete","complete_assessment":"Complete Assessment","completed":"Completed","completed_at":"Completed at","configuration":"Configuration","confirm":"Confirm","confirmation_delete_msg":"This change cannot be reverted, are you sure you want to permanently delete the playlist?","connection":"Connection","connectivity_ports":"Connectivity Ports","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contact","contact_support":"Contact Support","contact_us":"contact us","content_manager":"Content Manager","continue":"Continue","conversion_ratio":"Conversion Ratio","coordinates":"Coordinates","correct":"Correct","course_id":"Course Id","cpu":"CPU","cpu_error":"This system doesn\'t match CPU requirments.","cpu_min_requirement":"more than 1.3 GHz less than 50% CPU Usage","cpu_recommended_requirement":"more than 2.3 GHz less than 85% CPU Usage","create":"Create","create_a_panel":"Create a Panel","create_a_playlist":"Create a Playlist","create_account":"Create your account","create_an_account":"Create an account","create_an_assessment":"Create an Assessment","create_assessment":"Create Assessment","create_candidate":"Create Candidate","create_panel":"Create Panel","create_playlist":"Create Playlist","create_quiz":"Create a quiz","created_at":"Created at","creation_date":"Creation Date","current_invites_status":"Current Invites Status","customize_proctoring_options_below":"Customize your exam experience by selecting from proctoring options below.","dashboard":"Dashboard","date":"Date","deadline":"Deadline","delete":"Delete","delete_assessment":"Delete Assessment","delete_candidate":"Delete Candidate","delete_playlist":"Delete Playlist","description":"Description","description_cant_be_empty":"Description can\'t be empty.","description_of_the_scam":"Description of the Scam","desktop":"Desktop","desktop_error":"Another desktop screen is detected, To process further, ensure that you\'ve unplug other screen.","detail_view":"Detail View","detailed_view":"Detailed View","detect_resizing_of_window":"Detect Resizing Of window","detect_unfocus":"Detect unfocus","detected_face_successfully":"Candidate face is detected successfully.","detected_for_more_than_10_seconds":"Detected for more than 10 seconds! ","detecting_audio":"Detecting audio","detecting_face":"Detecting face…","detection_time":"Detection Time","disable":"Disable","disable_clipboard":"Disable Clipboard","disable_downloading":"Disable Downloading","disable_function_keys":"Disable Function Keys","disable_keyboard_shortcuts":"Disable keyboard shortcuts","disable_new_tabs":"Disable New Tabs","disable_printing":"Disable Printing","disable_right_click":"Disable Right Click","disable_switch_to_apps":"Disable Switch To Apps","disable_tempering":"Disable Tempering","discard":"Discard","display_help_icons":"Display Help Icons","display_options":"Display Options","display_potential_hardware_issues":"Display potential hardware issues","display_suspicious_ids":"Display Suspicious IDs","do_not_lock_your_phone":"Do not lock your phone, you will lose your connection if your screen locks.","do_you_really_want_to_delete_the_grade":"Do you really want to delete the grade","do_you_want_to_change_assessment_end_date_&_time":"Do You Want To Change Assessment End Date & Time","done":"Done","dont_have_a_template":"Don\'t have a template?","dont_have_email":"You don\'t have an email?","dont_have_email_id":"Don\'t have an Email ID?","dont_have_phone_number":"You don\'t have a phone number?","dont_see_yourself_above":"Don’t see yourself above?","don’t_move_microphone":"Do not change the position of the microphone during the assessment.","download":"Download","download_report":"Download Report","download_speed":"Download Speed","download_speed_error":"Your internet connection is not enough for the extension properly working.\\nTo use this extension, ensure that your internet connection speed meets the requirements.","download_speed_insufficient":"Download speed is insufficent","download_the_app":"Download the app","draft":"Draft","drag_&_drop_your_document":"Drag & Drop your document","drag_n_drop_your_document_or":"Drag & drop your document or ","drop_the_files_here":"Drop the files here","dual_screen_detected":"Dual screen is detected","duplicate_assessment":"Duplicate Assessment","duplicate_playlist":"Duplicate Playlist","duration":"Duration","duration_taken":"Duration taken","duration_time":"Duration Time","during_your_assessment":"During your assessment","dutch":"Dutch","eassy_test":"Eassy Test","edbs":"EDBS","edit":"Edit","edit_assessment":"Edit Assessment","edit_column":"Edit Column","edit_playlist_settings":"Edit Playlist Settings","edit_profile_for_later_use":"Edit this profile to your account for later use","edit_settings":"Edit Settings","edit_template":"Edit Template","email":"Email","email_id":"Email Id","email_or_password_wrong":"Your email address or password is wrong","email_reminder_to_selected_candidate":"An email reminder will be sent to the selected candidate(s)","email_templates":"Email Templates","en":"EN","enable":"Enable","enable_javascript":"To view this video please enable JavaScript, and consider upgrading to a web browser that","enabled":"Enabled","end":"End","end_at":"End at","end_date_&_time":"End date & time","end_date_greater_start_date":"End date should be greater than start date","end_section_description":"Your session is over! Please click Next to go to the next step.","end_time":"End Time","english":"English","english_rating":"English rating","ensure_sharing_your_screen":"Ensure that you have allowed sharing your screen.","enter":"Enter","enter_access_code":"Enter Access Code","enter_code":"Enter Code","enter_code_sent_to_email":"Enter the verification code sent on your registered email below","enter_detail":"ENTER YOUR DETAILS","enter_email_id":"Enter Email Id","enter_first_name":"Enter First name","enter_group_name":"Enter group name","enter_surname":"Enter Surname","enter_your_email":"Enter your email","enter_your_first_name":"Enter your first name","enter_your_last_name":"Enter your last name","enter_your_password":"Enter your password","enter_your_phone_number":"Enter your phone number","essay":"Essay","europe":"Europe","evaluate":"Evaluate","evaluate_full_session":"Evaluate full session","evaluate_session":"Evaluate Session","evaluation_completed":"Your evaluation is complete","evaluation_expired":"The evaluation has expired.","evaluation_feedback":"Give your evaluation for that session, is that fraud or not?","evaluator":"Evaluator","event":"Event","event_details":"Event Details","event_name":"Event Name","events":"Events","exam_end":"Exam End","exam_instructions_li_1":"Move your webcam for 15-20 seconds to show us your workspace.","exam_instructions_li_2":"Click the \'next\' button only after you see your workspace.","exam_instructions_text":"Now please prepare your working environment","exam_prep_msg":"Have a form of government-issued photo ID ready.\\nIf you need to retrieve your ID or take a quick break, please do so now.","exam_preparation":"Exam Preparation","exam_preparation_msg":"The library will need to record your exam session for potential review.\\nThis information is encrypted and can be accessed only by individuals authorized by your institution. Recording will begin after checking your system and environment.","exam_preparation_tnc":"I agree that I understand the exam rules prior to starting exam with extension.","exam_security_level":"Exam security level (based on selected options):","exam_settings_summary":"Exam Settings Summary","exam_start":"Exam Start","exam_taker":"Candidate Name","exam_taker_information":"Exam taker information","exam_was_fair":"Exam was fair","exam_was_fraud":"Exam was fraud","example_tutorial":"Your phone should record from this viewing angle","exams":"Exams","export":"Export","export_pdf_report":"Export PDF Report","extend_date":"Extend Date","extend_invite_date":"Extend Invite Date","extend_last_date":"Extend Last Date","extension":"Extension","extent_Date":"Extend date","extent_date":"Extend date","external_id":"External Id","face_detected_click_next":"In the next screen, we will detect your face. Click on the NEXT button to proceed after reading the tips below.","face_not_detected":"The face is not detected. Try again.","face_photo":"Face photo","failed":"Failed","fair":"Fair","feedback_added_successfully":"Feedback is added successfully","file_is_being_uploaded":"File is being Uploaded","file_is_not_being_uploaded":"File is not being Uploaded","files_at_once":"file at once","filter":"Filter","final_score":"Final Score","final_section":"Final Section","final_status":"Final Status","finish_assessment_description":"You may now leave this page.","finish_assessment_title":"Evaluation complete! Thank you!","first_name":"First Name","flight_checked":"Pre Flight Check Successful!","for_more_information":" for more information.","force_full_screen":"Force Full Screen","forgot_your_password":"Forgot your password?","fox_jumped_over_dog":"A quick brown fox jumped over a lazy dog.","fr":"FR","fraud":"Fraud","fraud_report":"Fraud Report","fraud_status":"Fraud Status","french":"French","french_rating":"French rating","full_face_visible":"Position the camera such that your full face is visible in the preview","gaze_away":"Gaze Away","gdpa_controls":"GPDA Controls","general":"General","geography":"Geography","german":"German","get_comfy":"Get comfy","get_ready":"Get ready","get_ready_for_identity_validation":"Get ready for identity validation.","get_started":"GET STARTED","get_water":"Get water","go":"GO","go_back":"Go back","good":"Good","good_light":"Ensure there is enough good light in the room","got_it":"Got it","grade_book_tour":"Grade Book Tour","great":"Great","group_id":"Group Id","group_name":"Group name","guidelines":"PLATFORM GUIDELINES","hardware_test":"HARDWARE TEST","hardware_test_face_detection":"HARDWARE TEST (Face Detection)","havent_selected_any_one":"You haven\'t selected any one of these fields.","head_movement":"Head Movement","help":"Help","here_is_some_information_regarding_the_mereos_platform":"Here is some information regarding the Mereos platform:","hey_mate_ready_for_test_it_starting_soon":"Hey mate, Ready for the test? It will be starting soon.","hi_im_your_support_manager":"Hi, I’m your support manager","hi_there":"Hi, there","hide_grades":"Hide Grades","hide_id":"Hide ID","hide_location":"Hide Location","hide_names":"Hide Names","hide_screen":"Hide Screen","hide_video":"Hide Video","high":"High","highly_satisfied":"Highly Satisfied","highly_unsatisfied":"Highly Unsatisfied","hiring_manager":"Hiring Manager","hold":"Hold","hold_your_photo_id_into_the_frame":"Hold your photo ID into the frame and click the “Take ID photo” button below.","home_page":"Home Page","i_already_have_the_app":"I already have the app","i_dont_have_the_app":"I don\'t have the app","i_downloaded_the_app":"I downloaded the app","i_have_read_and_accept_the":"I have read and accept the","icc_msg":"Have a form of government-issued photo ID ready.\\nIf you need to retrieve your ID or take a quick break, please do so now.","id":"ID","id_being_verified":"Hold on. Candidate Id is being verified.","id_card":"Id Card","id_not_exists":"Invitation is no longer valid. Please contact school","id_not_verified":"Candidate Id isn\'t verifiable. Please try again!","id_number":"ID Number","id_photo":"ID Photo","id_successfully_verified":"Candidate Id is successfully verified.","identity_card_verified_successfully":"Identity Card Verified Successfully","identity_validation":"Identity validation","ignored":"Ignored","import":"Import","import_and_invite":"Import and Invite","import_candidates":"Import Candidates","in_order_to_carry_out_your_assessment":"In order to carry out your assessment, you need a smartphone to film yourself from a second angle. To do this, you must install the Mereos Mobile application on your phone.","in_process":"In Process","incident_Level":"Incident Level","incident_level":"Incident Level","incident_score":"Incident Score","incognito_error":"This extension is not allowed to work in incognito mode.\\nAllow it and refresh page.","incognito_mode":"Incognito Mode","incognito_mode_requirement_checking":"Incognito mode checking","incognito_mode_requirement_checking_msg":"This extension needs to work in incognito mode to ensure secure exam protoring.\\nFor more info ","incorrect":"Incorrect","incorrect_end_date_and_time":"Incorrect End date & time","indications_li_1":"The timer is located at the top of the screen.","indications_li_2":"Click the left arrow to return to the previous question.","indications_li_3":"Click « Next » to ignore the question.","indications_li_4":"You will be able to see any missed question at the end of the assessment.","indications_li_5":"To mark a question to be shown later, check the \'mark question\' checkbox.","indications_li_6":"Your session will end when you click \'Submit All Responses\'.","indications_title":"Platform information","infinite_pdf":"Infinite PDF","initial_system_check_passed":"Initial system check passed. Your exam about to begin.","initial_system_check_passed_get_ready_for_identity_validation":"Initial system check passed. Get ready for identity validation.","instruction":"Instruction","instructions":"Instructions","internet_connection":"Internet Connection","internet_connection_not_working":"Internet connection is not working","internet_download_speed":"Internet Download Speed","internet_speed_is_too_low":"Internet speed is too low","internet_upload_speed":"Internet Upload Speed","interview":"Interview","invalid_email":"Invalid Email","invalid_phone_number":"Invalid phone number","invitation":"Invitation","invitation_id":"Invitation ID","invitation_incomplete_contact_support":"This invitation is incomplete. Contact support!","invitation_successfully_created":"Invitation is created successfully","invitations":"Invitations","invite":"Invite","invite_by_groups":"Invite by groups","invite_name":"Invite Name","invite_people":"Invite People","invite_search":"Invite Search","invite_status":"Invite Status","invite_to_assessment":"Invite to Assessment","invited":"Invited","invited_at":"Invited at","invited_for_evaluation":"You are invited to be evaluated","invited_to_assessment_for":"You are invited to an assessment for","invites":"Invites","ip_address":"IP Address","is_the_camera_feedback_good":"Please make sure you can position your phone so that your screen, hands and the top of your head are visible.","it_looks_suspicious":"It looks suspicious","italian":"Italian","just_remembered":"Just remembered?","keep_mic_close":"Keep the microphone close to your mouth & do not change the position till the test is completed.","last_name":"Last Name","leave_your_comment_here":"Leave your comment here","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Live","load_full_question":"Loading the full question view.","loading":"Loading","location":"Location","location_enabled":"Location Enabled","location_error":"The location is inaccessible. To use this extension, ensure that your location is accessed.","location_not_working":"Location sharing is not working","lock_down_options":"Lock Down Options","log_out":"Log out","login_failed":"Please check your email or password!","login_successfully":"You\'re logged in successfully","longer_time_message":"It’s taking longer than usual. Please wait...","look_out_for_the_best_talent_across_the_globe_remotely":"Look out for the best talent across the globe - Remotely.","low":"Low","mac_users":"Mac Users","macos_10_13":"macOS 10.13 (Oldest Still Maintained Version)","macos_10_15":"macOS 10.15","made_changes":"It seems like you have made some changes.","maps":"Maps","mark_for_review":"Mark for Review","marked":"marked","marked_for_review":"Marked for Review","master_hiring_manager":"Master Hiring Manager","master_recruiter":"Master Recruiter","mathematics":"Mathematics","maths":"Maths","maximum_section_time":"Maximum Section Time","maximum_size_of_file":"The maximum file size is 50MB csv or xls. Up to 5 files at once","mb":"MB","med":"Med","mereos_proctoring_portal":"Mereos Proctoring Portal","mereos_settings":"Mereos Settings","mereos_support":"Mereos Support","metro_code":"Metro Code","microphone":"Microphone","microphone_error":"The microphone is inaccessible. To use this extension, ensure that your microphone is accessed.","microphone_not_working":"Microphone is not working","minimum":"Minimum","minutes":"minutes","mobile_connection_successfull":"Mobile connected Successfully","mobile_phone_disconnected":"Mobile phone is disconneted","modified_at":"Modified at","modify_at":"Modify At","month_names":"JanFebMarAprMayJunJulAugSepOctNovDec","more_actions":"More Actions","moved_away_from_page":"User moved away from exam page","moved_back_to_page":"User comes back to exam page","multiple_face_detected":"Multiple faces are detected","multiple_people":"Multiple People","multiple_people_detected":"Multiple people are detected.","multiple_people_detected_for_more_than_10_seconds":"Multiple People detected for more than 10 seconds","multiple_people_in_the_screen":"Multiple people in the screen","multiple_screens":"Multiple screens","multiple_screens_detected":"Multiple screens detected","my_settings_profiles":"My Settings Profiles","name":"Name","name_of_assessment":"Name of assessment","name_of_playlist":"Name of Playlist","navigate_up_and_down":"Navigate up and down","need_help":"Need Help?","negative_marks":"Negative Marks","new_notification_from_mereos":"New notification from mereos","new_playlist":"New Playlist","next":"Next","next_step":"Next Step","no":"No","no_access_code_use_mereos":"If you do not have an access code and are not at the testing center, you can take the exam using Mereos.","no_anomalies":"No anomalies","no_assessment_found":"No Assessment Found","no_candidate_found":"No Candidate Found","no_data_found":"No Data Found","no_filtered_anomalies":"No filtered anomalies","no_invites_found":"No Invitations Found","no_mircophone_detected":"No mircophone detected","no_noise_in_room":"Ensure your room is well-lit and there is no background noise.","no_panel_added_to_the_section":"No panel added to the section","no_person_detected_come_back_to_assessment":"No person is detected. Please come back to assessment.","no_person_detected_for_more_than_10_seconds":"No Person is detected for more than 10 seconds","no_person_in_the_screen":"No person in the screen","no_playlist_found":"No Playlist Found","no_point_in_running_leave_in_time":"There\'s no point in running, you have to leave in time","no_rating_available_for_this_section_type":"No ratings available for this section type","no_record_found":"No Record found","no_section_found":"No Section Found","no_session_found":"No Session Found","normal":"Normal","not_fraud":"Not Fraud","not_invited":"Not Invited","not_viewed":"Not Viewed","nothing_suspicious_was_noticed":"Nothing suspicious was noticed","notification":"Notification","notification-histroy":"Notification Histroy","notification_not_working":"Notification is not working","notifications":"Notifications","notifications_on_your_phone_should_be_turned_off":"Notifications on your phone should be turned off. They can interfere with the recording of the video stream.","notify_candidate":"Notify candidate","notify_candidates":"Notify Candidates","number_of_assessment_sections":"Number of assessment sections","number_of_sections":"Number of sections","object_detected":"Object is detected","objective":"Objective","of":"of","okay":"Okay","on_hold":"On Hold","only_one_attempt":"You can attend a question only once. You will not be able to review it later.","only_one_screen":"Only One Screen","open":"Open","open_the_mereos_mobile_application":"Open the Mereos Mobile application on your phone and scan this QR code to synchronize your phone.","opened":"Opened","or":"Or","other_app_close":"Close applications such as Skype, Google Hangouts, etc which might interrupt the test.","overall_gpa":"Overall GPA","overall_knowledge_rating":"Overall knowledge rating","overall_time_taken":"Overall Time Taken","overview":"Overview","owner":"Owner","page_error":"Page Error","page_not_found":"Page Not Found","panel_name":"Panel Name","password":"Password","password_reset_link_sent":"A password reset link has been sent to your email.","pause":"Pause","pc_users":"PC Users","pending":"Pending","per_page":"Per Page","person_missing":"Person Missing","persons_eyes_are_moving":"Person\'s eyes are moving","persons_head_is_moving":"Person\'s head is moving","phone":"Phone","phone_number":"Phone Number","photo_id":"Photo Id","physics":"Physics","play":"Play","playlist_name":"Playlist Name","playlists":"Playlists","please_add_assessment_duration":"Please add assessment duration","please_add_atleast_one_item":"Please add atleast one item","please_check_your_mic":"Please check your Mic Before Start the recording","please_enable_force_submission\'":"Please enable force submisison","please_scan_this_qr_code":"Please scan this QR code with your phone device to download the Mereos Mobile application.","please_share_entire_screen":"Please share entire screen.","please_take_picture_or":"Please take a picture or","please_unselect_time_region_from_template\'":"Please unselect the Time Region from the template","please_wait":"Please wait...","please_wait_we_processing":"Please wait, we are processing.","points":"Points","poor":"Poor","pop_up":"POP-UP","portuguese_brazil":"Portuguese (Brazil)","positive_marks":"Positive Marks","post_instructions_text":"Here are the post-assessment instructions","postinstructions":"Post Instructions","pre_configured_behavior":"Choose a pre-configured behavior setting or customize any of the exam settings.","preinstructions":"Pre Instructions","previous_step":"Previous step","privacy_msg":"I consent to the processing of my personal data for the specific\\n purposes mentioned in the privacy policy.","privacy_policy":"Privacy Policy","privacy_policy_msg":"I consent to the processing of my personal data for the specific purposes mentioned in the privacy policy.","processed_anomalies":"Processed Anomolies","processing":"Processing","proctor":"Proctor","proctored_review_will_end_in":"Proctored review will end in","proctoring_behavior_settings":"Proctoring Behavior Settings","proctoring_exam_description":"Abnormalties compare one test taker’s actions to the rest of the exams in the class. This will highlight statistically significant differences in a test taker’s behavior.","proctoring_exam_metrics":"Proctoring Exam Metrics","proctoring_exam_settings":"Proctoring Exam Settings","proctoring_frame_description":"The severity of each metric sets the weight of suspicious behavior in relation to the other behaviors. These metrics are calculated with each image. Each characteristic is derived for every image, regardless of the settings is enabled or not. The severity of these metrics can be changed at any time which will result in a re-calculation of the suspiciousness of a proctored exam.","proctoring_frame_metrics":"Proctoring Frame Metrics","proctoring_profile_required":"Proctoring Profile is required","profile_id":"Profile Id","proven_fraud":"Proven Fraud","provider":"Provider","published":"Published","question":"Question","question_1_of_20":"QUESTION 1 OF 20","question_List":"Question List","question_based_stats":"Question based stats","question_count":"Question Count","question_list":"Question List","question_name":"Question Name","question_not_answered":"You have not answered X out of Y questions. ","question_view":"Question View","questions":"Questions","questions_attended":"Question Attended","questions_uploaded_successFully":"Questions are uploaded successFully","quick_filter":"Quick Filter","quiz_name":"Quiz Name","ram":"RAM","ram_error":"This system doesn\'t match RAM requirments.","ram_min_requirement":"4 GB\\nless than 90% Ram Usage","ram_recommended_requirement":"16 GB\\nless than 70% Usage","rate_experience_by_emotion":"Rate your experience by clicking on the emoticon.","rating":"Rating","re_invite":"Reinvite","re_record_audio":"Re-record Audio","recapture":"Recapture","recommended":"Recommended","record_audio":"Record Audio","record_not_found":"No records found","record_room":"Record Room","record_screen":"Record Screen","record_video":"Record video","record_web_traffic":"Record Web Traffic","recording":"Recording","recording_started_successfully":"Recording Started Successfully","recording_stopped_successfully":"Recording is stopped successfully","recruiter":"Recruiter","refresh":"Refresh","register_here":"REGISTER HERE","registered_successfully":"Registered successfully!","reinvite":"Reinvite","reinvite_people":"Reinvite People","reject":"Reject","rejected":"Rejected","rejection":"Rejection","reloading_closing_add_partial_data":"Reloading or closing the window may result in a partial download of the file.","remind_candidate":"Remind Candidate","remind_candidates":"Remind Candidates","remind_panel":"Remind Panel","reminder":"Reminder","remote_automate_reuse":"Remote. Automate. Reuse.","reports":"Reports","required_time":"Required time","reset":"Reset","reset_email_sent":"A link to reset your password will be sent to your email.","reshare_screen":"Reshare screen","reshoot_video":"Reshoot Video","results":"Results","resume":"Resume","resume_doc":"CV","retake":"Retake","retake_id_photo":"Retake ID Photo","retake_photo":"Retake Photo","reuse_the_candidate_data_and_hire_faster":"Reuse the candidate data and hire faster","review_q_later":"To review a question later, click on the \\"Mark for Review\\" checkbox. Use filters in the Review screen to view the marked questions.","roles":"Roles","room_id":"Room ID","room_scan":"Room Scan","room_scan_completed":"Room Scan Completed","room_scanning":"Room Scanning","roomscan_recordings":"Room scan recordings","row":"Row","satisfied":"Satisfied","save":"Save","save_answer":"Your answer will not be uploaded. Click on NEXT button to save your answer","save_exam_settings":"Save Exam Settings","save_information":"Save Information","save_n_publish":"Save &amp; Publish","save_settings_profile":"Save Settings Profile","saved_successfully":"Saved successfully","scan_or_download_the_below_qr_code_to":"Scan or download the below QR Code to","scan_your_room":"Scan your room 360° including your work area","schedule_invite":"Schedule invite","schedule_live":"Schedule Live","scheduled_at":"Scheduled at","scheduled_invite":"Scheduled Invite","scheduled_time":"Scheduled Time","school":"School","school_name":"School Name","science":"Science","score":"Score","screen":"Screen","screen_record":"Screen record","screen_recording_window_shared":"Screen Recording Window is shared","screen_recordings":"Screen recordings","screen_resolution":"Screen Resolution","screen_shared_successfully":"You\'ve successfully shared screen","screen_sharing_stopped":"Screen sharing is stopped","search":"Search","search_an_exam":"Search an exam","search_an_exam_taker":"Search an exam taker","search_by":"Search by","search_candidate_name_or_location":"Search candidate or location","search_location":"Search location","search_question":"Search question","search_text":"Search text","section":"Section","section1":"Section 1","section2":"Section 2","section3":"Section 3","section4":"Section 4","section_activity_required":"Activity is required","section_completed_next_to_continue":"You have completed the section. Please click Next to continue.","section_name":"Section name","section_status":"Section Status","section_type":"Section Type","sections":"Sections","secure_feature":"Secure Feature","security_document":"Security Document","see_all_arguments":"See All Arguments","see_more":"See more","see_support_tags":"See Support Tags","seems_like_a_fraud":"Seems like a fraud","select":"Select","select_a_chat_room_for_messages":"Select a chat room for messages","select_a_question":"Select a Question","select_a_saved_setting_profile_or_create_new_one":"Select a saved setting profile or create new one.","select_and_invite_status":"Select And Invite Status","select_answer_below_from_below":"Select your answer from below:","select_camera":"Select Camera","select_candidates":"Select Candidates","select_complete":"SECTION COMPLETE","select_evaluator":"Select Evaluator","select_microphone":"Select Microphone","select_on_assessments":"Select on assessments","select_on_assessments_to_duplicate":"Select on assessments to duplicate","select_on_playlist_to_duplicate":"Select Playlist for Duplicate","select_on_status_to_change":"Select on status to change","select_preferred_camera_and_microphone":"Select the preferred camera and microphone.","select_proctor":"Select Proctor","select_profile":"Select Profile","select_role":"Select Role","selected":"Selected","selection":"Selection","send":"Send","send_candidates_reminder":"Send Candidate Reminder","send_invitation":"Send Invitation","send_invite":"Send invite","send_reset_password_link":"Send Reset Password Link","session":"Session","session_completed":"Session is completed","session_completed_successfully":"Session is completed successfully","session_duration":"Session Duration","session_id":"Session ID","session_initiated":"Session initiated","session_started":"Your session willl start now.","session_status":"Session status","session_view":"Session View","sessions":"Sessions","set_as_default_profile":"Set as default profile","setting_up_your_phone_camera":"Setting up your phone camera","settings":"Settings","setup_section":"Setup section","several_sections":"Several sections","share_screen_msg":"Click the \\"Done\\" button after you have allowed sharing your screen.","share_setting":"Share Setting","share_settings":"Share Settings","share_the_assessment":"share the assessment","show_unmatched_attempts":"Show unmatched attempts","showing_results_for":"Showing results for","sign_in":"Sign in","sign_in_with":"Sign in with ","sign_out":"Sign out","skills":"Skills","skip":"Skip","skip_question_click_next":"Click on the \\"Next\\" button to skip a question. You can revisit the skipped questions using the \\"View Question List\\"","skipped":"Skipped","skipped_question":"question skipped","solution":"Solution","some_attribute":"Some Attribute","some_of_the_candidate_start_assessment":"Some of the candidate start the assessment You cannot edit the assessment","something_went_wrong":"Something went wrong","something_went_wrong_please_contact_support":"Something went wrong! Please contact Support.","something_went_wrong_please_try_again_later":"Something went wrong. Please try again later.","something_went_wrong_please_upload_again":"Something went wrong please upload again","sort_by_last_name":"Sort by Last Name","sound_check":"Sound check","sourcer":"Sourcer","spanish":"Spanish","speech_detected":"Speech Detected","speech_is_detected":"Speech is detected","start":"Start","start_and_end_time":"Start & end time","start_at":"Start at","start_camera":"Start Camera","start_chat":"Start chat","start_date":"Start Date","start_date_&_time":"Start date & time","start_recording":"Start Recording","start_time":"Start Time","start_tour":"Start Tour","stats":"Stats","status":"Status","step_1":"Step 1","step_2":"Step 2","step_3":"Step 3","step_4":"Step 4","stop_recording":"Stop Recording","student_id":"Student ID","student_identify_verification":"Student Identify verification","student_information":"Student Information","studies_at":"Studies at","subject":"Subject","submission_time":"Submission Time","submit":"Submit","submit_all":"Submit All","submit_and_end":"Are you sure you want to submit all the answers and end the section?","submit_answers":"SUBMIT ALL ANSWERS","summary":"Summary","support_chat":"Support chat","supports_html5_video":"supports HTML5 video.","surname":"Surname","suspecious":"Suspicious","suspicious_incidents":"Suspicious incidents","switch_language":"Switch Language","synchronisation_mobile":"Mobile Sync","system_diagnostic":"System Diagnostic","system_diagnostic_msg":"The System Diagnostic will only take a moment.","system_diagnostic_passed":"System Diagnostic Passed","system_requirement_checking":"System requirement checking","system_requirement_checking_msg":"We will check your system for minimum requirements to use the library.\\nYou can read the full list of requirements by ","system_requirements":"System requirements checking","system_requirements_for_testing":"System Requirements for Testing","t2":"T2","take_a_photo":"Take a photo","take_id_photo":"Take ID Photo","take_photo":"Take Photo","take_the_superhero_leap_and_hire_fast_with_instahiring":"Take the Superhero leap and hire fast with Instahiring.","take_with_mereos":"Take with Mereos","template_editing":"Template Editing","template_id":"Template ID","terms_and_conditions_read":"Terms And Conditions read","terms_of_use":"Terms of Use","test":"Test","test_translation":"Test Translation","thankyou":"Thank you!","the_maximum_file_size_is":"The Maximum file size is","the_questions":"The Questions","the_questions_cant_be_modified_if_the_assessment":"The Questions can\'t be modified if the assessment is in open state as this will have a critical impact on the candidate reports","this_invitation_has_expired":"This invitation has expired","time":"Time","time_required":"Time required is","time_taken":"Time Taken","time_to_answer":"You will have X minutes to answer Y question(s).","time_zone":"Time Zone","timer_on_screen":"You have X minutes to answer Y question(s). Please refer to the timer at the top right on the screen.","timezone":"Timezone","tips":"Useful Tips:","to_end":"To End","to_search_question_use_filter":"To search for a particular question, use the search and filters option in the Review section.","to_start":"To Start","total":"Total","total_questions":"Total Questions","total_score":"Total score","try_again":"TRY AGAIN","type":"Type","type_your_answer_in_space":"Type your answer in the space provided on the right side of the screen. In case you would like to attach a file, click on \\"Attach File\\" link and submit.","un_publish":"Unpublish","unauthorized_access":"Unauthorized access","unauthorized_object_detected_for_more_than_10_seconds":"Unauthorized object detected for more than 10 seconds","unauthorized_object_detected_please_put_it_away":"Unauthorized object is detected. Please put it away","unmarked":"unmarked","unsatisfied":"Unsatisfied","unselect":"Unselect","up_to":"Up to","update":"Update","update_assessment":"Update Assessment","update_candidate":"Update Candidate","update_candidate_details":"Update Candidate Details","update_quiz":"Update quiz","upload":"Upload","upload_candidate_from":"Upload candidates from","upload_id_image":"Upload/capture an image of your id card.","upload_image":"Upload image","upload_items":"Upload Items","upload_resume":"Upload Résumé","upload_speed":"Upload Speed","upload_speed_error":"Your upload speed is not enough to start this exam.","upload_speed_insufficient":"Upload speed is insufficent","upload_your_id_card":"Upload image of your ID card","upload_your_identity_document":"upload your identity document","uploaded":"Uploaded","url":"URL","url_filtering":"Url Filtering","use_select_cam_if_not_detected":"Use the \\"Select Camera\\" dropdown to select another camera, in case your camera is not detected automatically.","use_select_microphone_if_not_detected":"Use the \\"Select Microphone\\" dropdown, in case your microphone is not detected automatically.","use_washroom":"Use Washroom","useful_tips":"Useful Tips:","user":"User","user_idle":"User Idle","candidate_interrupted_the_stream":"Candidate interrupted the stream!","username":"Username","users":"Users","verification_code":"Enter verification code","verification_completed":"Verification completed","verification_completed_msg":"The verification was successfully completed and everything is ready for the exam.\\nRead and agree with the exam agreement and then we will continue.","video_codec":"Video Codec","video_extension":"Video extension","video_recorded":"Your video may be recorded during this session.","video_recording_msg":" Video can be recorded during this session. Make sure that the room is sufficiently lit and there is no background noise","view_our":"View our ","view_question_list":"View Question List","view_question_list_button_help":"\\"View Question list\\" button will help you navigate through the question list.","view_session":"View Session","visible_always":"Visible Always","visible_at_the_end":"Visible At The End","wait_loading":"Wait, while your assessment is loading.","wait_video_uploading":"The video upload may take 10-15 Minutes depending on your internet speed. So please wait until the next screen appears.","want_to_capture":"Want to capture an image instead? Click here.","want_to_upload":"Want to upload an image instead? Click here.","webcam":"Webcam","webcam_diagnostics":"Webcam diagnostics","webcam_error":"The webcam is inaccessible. To use this extension, ensure that your webcam is accessed.","webcam_not_working":"Webcam is not working","webpages_users_access_during_exam":"Webpages that users can access during the exam","welcome":"WELCOME!","welsh":"Welsh","whats_new":"What\'s new?","whitelist_specific_urls":"Whitelist specific URLs","wifi_connection":"Wifi Connection","window_focus_in":"Window Focus-In","window_focus_out":"Window Focus-Out","windows_10":"Windows 10 (10 S mode is not supported)","windows_8":"Windows 8 (Windows 10 S mode is not supported)","wired_connection":"Wired Connection","without_saving":"Continue without saving","workspace_checking":"Workspace checking","workspace_checking_msg":"We need to make sure that there are no other people or unnecessary items near you.","write_a_message":"Write a message...","write_your_comment":"Write your comment","yes":"Yes","you_welcome_here":"You are welcome here!","your_assessment_completed":"Your Assessment is complete.","your_face_must_visible_on_screen":"Your face must be fully visible on the screen.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Your internet is very slow Please make sure you have a stable Internet connection","your_session_will_end_when_the_time_is_up":"Your session will end when the time is up or when you click “Submit and Exit”.","your_time_is_valuable":"Your time is valuable","your_warm_pool_may_have_ideal_candidate_to_instahire":"Your warm pool may have an ideal candidate to Instahire."}')},2115:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"Resolución de 1280x720","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 y superior","1_mbps":"1 Mbps","360_video":"Vídeo 360","3_mbps":"3 Mbps","640x480_resolution":"Resolución de 640x480","Unpublished":"Sin publicar","__none__":"--Ninguno--","access_code":"Código de acceso","account_manager":"Administrador de cuentas","action":"Acción","actions":"Acciones","add":"Añadir","add_assessment":"Añadir evaluación","add_candidates":"Añadir candidatos","add_description":"Añadir descripción","add_exam":"Añadir examen","add_file":"Añadir archivo","add_question":"Añadir pregunta","add_questions":"Añadir preguntas","add_quiz":"Añadir un quiz","add_solution":"Añadir solución","add_url":"AÑADIR URL","advance_filter":"Filtro avanzado","advanced_filter_search":"Filtro de búsqueda avanzado","agree_by_clicking":"Al hacer clic en el botón, acepta los Términos y condiciones","ai_anomalies":"Anomalías de IA","ai_recorder_unknown_violation":"La IA ha registrado una infracción desconocida","all":"Todas","all_questions":"Todas las preguntas","allow_access_to_popups":"Permitir el acceso a las siguientes ventanas emergentes que aparecen, como se muestra a continuación:","allow_interruption":"Permitir interrupción","allow_question_skip":"Permitir omitir preguntas","and":"y","anomalies":"Anomalías","answer":"Responder","answer_is_mandatory":"Es obligatorio responder todas las preguntas","answered":"Respondida","apply_a_settings_profile_for_this_exam":"Aplicar un perfil de configuración para este examen","apply_filter":"Aplicar filtro","archive":"Archivar","are_you_sure_want_to_leave":"¿Está seguro de que desea salir?","are_you_sure_you_want_to_delete_this_candidate":"¿Está seguro de que desea eliminar a este candidato?","ask_anything_about_the_extension":"Puedes preguntarme cualquier cosa sobre la extensión. ¿Cómo puedo ayudarlo?","assessment":"Evaluación","assessment_complete":"EVALUACIÓN COMPLETA","assessment_completed":"La evaluación se completó correctamente","assessment_date_updated_successfully":"La fecha de la evaluación se actualizó correctamente","assessment_duration_invalid_please_contact_support":"La duración de la evaluación no es válida. ¡Por favor, contacta con el servicio de asistencia!","assessment_expired":"La evaluación ha expirado.","assessment_id":"Id. de evaluación","assessment_indications_read":"Se leyeron las indicaciones de la evaluación","assessment_invitation":"Invitación de evaluación","assessment_link":"Enlace de evaluación","assessment_list":"Lista de evaluaciones","assessment_loaded":"La evaluación se cargó correctamente","assessment_name":"Nombre de la evaluación","assessment_passed":"Evaluación aprobada","assessment_preinstructions_read_successfully":"Se leyeron las preinstrucciones de evaluación","assessment_restriction":"Restricción de evaluación","assessment_saved":"La evaluación se guardó correctamente","assessment_sections":"Secciones de evaluación","assessment_start_in_5":"La evaluación comienza en 5","assessment_stat":"Estadística de evaluación","assessment_status_change":"Cambio de estado de evaluación","assessment_tool":"Herramienta de evaluación","assessment_window":"Ventana de evaluación","assessments":"Evaluaciones","assign_panel":"Asignar panel","assign_proctor":"Asignar supervisor","assignment_name_required":"El nombre de la evaluación es obligatorio","attach_file":"Adjuntar archivo","attempt":"Intento","attend_test_quitely":"Asistir a la prueba en un entorno tranquilo y sin distracciones","attending":"Asistiendo","audio_check":"Verificación de audio","audio_check_completed":"Verificación de audio completada","audio_check_msg":"Haga clic en el botón \\"Grabar\\" y lea la oración a continuación","audio_detected_click_next":"En la siguiente pantalla, detectaremos su audio. Haga clic en el botón SIGUIENTE para continuar después de leer los consejos a continuación.","audio_level":"Nivel de audio","audio_recordings":"Grabaciones de audio","audio_test_failed":"¡La prueba de audio falló!","audio_test_passed":"¡La prueba de audio pasó!","audio_video_recorded":"Esta evaluación está supervisada. Tu audio y video serán grabados durante toda la sesión.","automate_the_routine_tasks_employ_your_time_wisely":"Automatiza las tareas rutinarias, emplea tu tiempo sabiamente.","available":"Disponible","back":"Atrás","back_to_Instructions":"Volver a Instrucciones","back_to_exams":"Volver a Exámenes","back_to_gradebook":"Volver al Libro de Calificaciones","bad":"Malo","basic_information":"Información Básica","be_loud_clear":"Intenta hablar alto y claro y mantén el micrófono cerca de tu boca.","begin_exam_now":"Acepto, comienza el examen ahora","block_browser_screenshot":"Bloquear Captura de Pantalla del Navegador","block_screen_recording":"Bloquear Grabación de Pantalla","body":"Cuerpo","bridge_the_talent_and_timezone":"Une el talento y zona horaria","browse_document":"buscar documento","browser_anomalies":"Anomalías del navegador","browser_locked_successfully":"Navegador bloqueado correctamente","brussels":"Bruselas","bulk_import_items":"Importación masiva de elementos","calculator":"Calculadora","camera_mic":"Cámara y micrófono","camera_recordings":"Grabaciones de la cámara","cancel":"Cancelar","cancellation":"Cancelación","candidate":"Candidato","candidate_details_cannot_updated":"Los detalles del candidato no se pueden actualizar","candidate_email":"Correo electrónico del candidato","candidate_group_id":"Id. del grupo","candidate_id_is_uploaded_successfully":"El ID del candidato se cargó correctamente","candidate_identity_card":"Tarjeta de identidad del candidato","candidate_invite_assessment_section_id":"Id. de la sección de evaluación de la invitación del candidato","candidate_list":"Lista de candidatos","candidate_name":"Nombre del candidato","candidate_photo":"Foto","candidate_photo_captured_successfully":"Foto del candidato capturada correctamente","candidate_photo_uploaded_successfully":"La foto del candidato se cargó correctamente","candidate_reinvite_successfully":"El candidato ha sido invitado nuevamente correctamente","candidate_resized_window":"Ventana redimensionada del candidato","candidate_search":"Búsqueda de candidatos","candidate_successfully_created":"El candidato se ha creado correctamente","candidate_successfully_updated":"Los datos del candidato se han actualizado correctamente","candidate_video_is_uploaded_successfully":"El video del candidato se cargó correctamente","candidates":"Candidatos","cant_be_modified_assessment_in_open_state":"No se puede modificar si la evaluación está en estado abierto, ya que esto tendrá un impacto crítico en los informes de los candidatos","capture":"Capturar","capture_id":"Captura tu documento de identidad antes de comenzar a completar el formulario","capture_image_of_id_card":"Captura la imagen de tu documento de identidad","catastrophic":"Catastrófico","category":"Categoría","center_your_face":"Centra tu rostro en el marco y haz clic en el botón de abajo","cg":"CG","change_assessment_status":"Cambiar el estado de la evaluación","change_candidate_invite_status":"Cambiar el estado de la invitación del candidato","change_end_time":"Cambiar la hora de finalización","change_invite_status":"Cambiar el panel de invitación","change_role":"Cambiar rol","change_roles":"Cambiar roles","change_start_and_last_date":"Cambiar fecha de inicio y fecha de finalización","change_start_date":"Cambiar fecha de inicio","change_start_time":"Cambiar hora de inicio","change_status":"Cambiar estado","change_type":"Cambiar tipo","cheating":"Hacer trampa","check_your_email":"Revisar su correo electrónico","chemisty":"Química","choose_answer":"En esta sección, debe elegir la respuesta correcta de las opciones proporcionadas","chromebook_users":"Usuarios de Chromebook (solo para supervisión automatizada). No es compatible con la supervisión en vivo)","chromebook_users_min_requirement":"El dispositivo Chrome está ejecutando la última versión de Chrome OS.","chromebook_users_recommended_requirement":"El dispositivo Chrome está ejecutando la última versión de Chrome OS.","clean_cache":"Limpiar caché","clear_filter":"Borrar filtro","click_go":"Al hacer clic en el botón \\"IR\\", acepta los Términos y condiciones","click_here":"haga clic aquí","click_here_when_done":"Haga clic aquí cuando haya terminado","click_ok_to_agree":"Al hacer clic en Siguiente, acepta los Términos y condiciones","click_start_recording":"HAGA CLIC EN INICIAR GRABACIÓN Y LEA EL SIGUIENTE TEXTO","click_to_attempt":"Haga clic en la pregunta para intentar","click_to_capture":"Haga clic aquí para capturar","click_to_submit_anwsers":"Para enviar la sección, haga clic en el botón \\"Enviar todas las respuestas\\" en la pantalla Revisar. (Este paso no se puede rehacer)","click_to_upload":"Haga clic aquí para cargar","clicking_here":"haciendo clic aquí","close":"Cerrar","close_open_tabs":"Cerrar pestañas abiertas","close_window":"Puede cerrar la ventana ahora","closed":"Cerrado","code":"Código","collapse":"Contraer","column_visibility":"Visibilidad de la columna","comment":"Comentario","comment_suggestion":"Comentario/Sugerencia","complete":"Completado","complete_assessment":"Completar evaluación","completed":"Completado","completed_at":"Completado en","configuration":"Configuración","confirm":"Confirmar","confirmation_delete_msg":"Este cambio no se puede revertir, ¿está seguro de que desea eliminar permanentemente el lista de reproducción?","connection":"Conexión","connectivity_ports":"Puertos de conectividad","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contacto","contact_support":"Contacta con el servicio de asistencia","contact_us":"Contáctanos","content_manager":"Administrador de contenido","continue":"Continuar","conversion_ratio":"Ratio de conversión","coordinates":"Coordenadas","correct":"Correcto","course_id":"Id. del curso","cpu":"CPU","cpu_error":"Este sistema no cumple con los requisitos de CPU.","cpu_min_requirement":"más de 1.3 GHz menos del 50 % de uso de CPU","cpu_recommended_requirement":"más de 2,3 GHz menos del 85 % de uso de CPU","create":"Crear","create_a_panel":"Crear un panel","create_a_playlist":"Crear una lista de reproducción","create_account":"Crea tu cuenta","create_an_account":"Crear una cuenta","create_an_assessment":"Crear una evaluación","create_assessment":"Crear evaluación","create_candidate":"Crear candidato","create_panel":"Crear panel","create_playlist":"Crear lista de reproducción","create_quiz":"Crear un quiz","created_at":"Creado en","creation_date":"Fecha de creación","current_invites_status":"Estado actual de las invitaciones","customize_proctoring_options_below":"Personalice su experiencia de examen seleccionando entre las opciones de supervisión que aparecen a continuación.","dashboard":"Panel de control","date":"Fecha","deadline":"Fecha límite","delete":"Eliminar","delete_assessment":"Eliminar evaluación","delete_candidate":"Eliminar candidato","delete_playlist":"Eliminar lista de reproducción","description":"Descripción","description_cant_be_empty":"La descripción no puede estar vacía","description_of_the_scam":"Descripción de la estafa","desktop":"Escritorio","desktop_error":"Se detectó otra pantalla de escritorio. Para continuar con el proceso, asegúrese de haber desconectado la otra pantalla","detail_view":"Vista detallada","detailed_view":"Vista detallada","detect_resizing_of_window":"Detectar cambio de tamaño de ventana","detect_unfocus":"Detectar desenfocado","detected_face_successfully":"Se detectó correctamente el rostro del candidato","detected_for_more_than_10_seconds":"¡Se detectó durante más de 10 segundos!","detecting_audio":"Detectando audio","detecting_face":"Detectando rostro…","detection_time":"Tiempo de detección","disable":"Deshabilitar","disable_clipboard":"Deshabilitar portapapeles","disable_downloading":"Deshabilitar descarga","disable_function_keys":"Deshabilitar teclas de función","disable_keyboard_shortcuts":"Desactivar los accesos directos del teclado","disable_new_tabs":"Deshabilitar nuevas pestañas","disable_printing":"Deshabilitar impresión","disable_right_click":"Deshabilitar clic derecho","disable_switch_to_apps":"Deshabilitar cambiar a aplicaciones","disable_tempering":"Deshabilitar templado","discard":"Descartar","display_help_icons":"Mostrar iconos de ayuda","display_options":"Mostrar opciones","display_potential_hardware_issues":"Mostrar posibles problemas de hardware","display_suspicious_ids":"Mostrar identificadores sospechosos","do_not_lock_your_phone":"No bloquees tu teléfono, perderás tu conexión si tu pantalla se bloquea.","do_you_really_want_to_delete_the_grade":"¿Realmente quieres eliminar la calificación?","do_you_want_to_change_assessment_end_date_&_time":"¿Quieres cambiar la fecha y hora de finalización de la evaluación?","done":"Hecho","dont_have_a_template":"¿No tienes una plantilla?","dont_have_email":"¿No tienes un correo electrónico?","dont_have_email_id":"¿No tienes una dirección de correo electrónico?","dont_have_phone_number":"¿No tiene un número de teléfono?","dont_see_yourself_above":"¿No te ves arriba?","don’t_move_microphone":"No cambies la posición del micrófono durante la evaluación.","download":"Descargar","download_report":"Descargar informe","download_speed":"Velocidad de descarga","download_speed_error":"Tu conexión a Internet no es suficiente para la extensión funciona correctamente.\\nPara usar esta extensión, asegúrese de que la velocidad de su conexión a Internet cumpla con los requisitos.","download_speed_insufficient":"La velocidad de descarga es insuficiente","download_the_app":"Descarga la aplicación","draft":"Borrador","drag_&_drop_your_document":"Arrastre y suelte su documento","drag_n_drop_your_document_or":"Arrastre y suelte su documento o ","drop_the_files_here":"Suelte los archivos aquí","dual_screen_detected":"Se detectó una pantalla dual","duplicate_assessment":"Evaluación duplicada","duplicate_playlist":"Lista de reproducción duplicada","duration":"Duración","duration_taken":"Duración tomada","duration_time":"Tiempo de duración","during_your_assessment":"Durante tu evaluación","dutch":"Holandés","eassy_test":"Prueba fácil","edbs":"EDBS","edit":"Editar","edit_assessment":"Editar evaluación","edit_column":"Editar columna","edit_playlist_settings":"Editar Configuración de la lista de reproducción","edit_profile_for_later_use":"Edita este perfil en tu cuenta para usarlo más adelante","edit_settings":"Editar configuración","edit_template":"Editar plantilla","email":"Correo electrónico","email_id":"ID de correo electrónico","email_or_password_wrong":"Tu dirección de correo electrónico o contraseña son incorrectas","email_reminder_to_selected_candidate":"Se enviará un recordatorio por correo electrónico a los candidatos seleccionados","email_templates":"Plantillas de correo electrónico","en":"EN","enable":"Habilitar","enable_javascript":"Para ver este video, habilita JavaScript y considera actualizar a un navegador web que lo tenga","enabled":"Habilitado","end":"Finalizar","end_at":"Finalizar a las","end_date_&_time":"Fecha y hora de finalización","end_date_greater_start_date":"La fecha de finalización debe ser posterior a la fecha de inicio","end_section_description":"¡Tu sesión ha terminado! Haga clic en Siguiente para ir al siguiente paso.","end_time":"Hora de finalización","english":"Inglés","english_rating":"Calificación en inglés","ensure_sharing_your_screen":"Asegúrese de haber permitido compartir su pantalla.","enter":"Ingresar","enter_access_code":"Ingrese el código de acceso","enter_code":"Ingrese el código","enter_code_sent_to_email":"Ingrese el código de verificación enviado a su correo electrónico registrado a continuación","enter_detail":"INGRESE SUS DATOS","enter_email_id":"Ingrese el ID de correo electrónico","enter_first_name":"Ingrese el nombre","enter_group_name":"Ingrese el nombre del grupo","enter_surname":"Ingrese el apellido","enter_your_email":"Ingrese su correo electrónico","enter_your_first_name":"Ingrese su nombre","enter_your_last_name":"Ingresa tu apellido","enter_your_password":"Ingresa tu contraseña","enter_your_phone_number":"Ingresa tu número de teléfono","essay":"Ensayo","europe":"Europa","evaluate":"Evaluar","evaluate_full_session":"Evaluar sesión completa","evaluate_session":"Evaluar sesión","evaluation_completed":"Tu evaluación está completa","evaluation_expired":"La evaluación ha expirado","evaluation_feedback":"Da tu evaluación para esa sesión, ¿eso es fraude o no?","evaluator":"Evaluador","event":"Evento","event_details":"Detalles del evento","event_name":"Nombre del evento","events":"Eventos","exam_end":"Fin del examen","exam_instructions_li_1":"Mueve tu cámara web durante 15-20 segundos para mostrarnos tu espacio de trabajo.","exam_instructions_li_2":"Haga clic en el botón \'siguiente\' solo después de ver su espacio de trabajo.","exam_instructions_text":"Ahora prepare su entorno de trabajo","exam_prep_msg":"Tenga a mano una forma de identificación con foto emitida por el gobierno.\\nSi necesita recuperar su identificación o tomar un breve descanso, hágalo ahora.","exam_preparation":"Preparación del examen","exam_preparation_msg":"La biblioteca deberá grabar su sesión de examen para una posible revisión. Esta información está encriptada y solo pueden acceder a ella las personas autorizadas por su institución. La grabación comenzará después de verificar su sistema y entorno.","exam_preparation_tnc":"Acepto que comprendo las reglas del examen antes de comenzar el examen con la extensión.","exam_security_level":"Nivel de seguridad del examen (según las opciones seleccionadas):","exam_settings_summary":"Resumen de la configuración del examen","exam_start":"Inicio del examen","exam_taker":"Nombre del candidato","exam_taker_information":"Información del candidato","exam_was_fair":"El examen fue justo","exam_was_fraud":"El examen fue fraudulento","example_tutorial":"Su teléfono debería grabar desde este ángulo de visión","exams":"Exámenes","export":"Exportar","export_pdf_report":"Exportar informe en PDF","extend_date":"Extender fecha","extend_invite_date":"Extender fecha de invitación","extend_last_date":"Extender última fecha","extension":"Extensión","extent_Date":"Extender fecha","extent_date":"Extender fecha","external_id":"Id. externo","face_detected_click_next":"En la siguiente pantalla, detectaremos su rostro. Haga clic en el botón SIGUIENTE para continuar después de leer los consejos a continuación.","face_not_detected":"No se detecta el rostro. Inténtalo de nuevo.","face_photo":"Foto de la cara","failed":"Error","fair":"Aceptable","feedback_added_successfully":"El comentario se agregó exitosamente","file_is_being_uploaded":"El archivo se está cargando","file_is_not_being_uploaded":"El archivo no se está cargando","files_at_once":"Archivar de una vez","filter":"Filtro","final_score":"Puntuación final","final_section":"Sección final","final_status":"Estado final","finish_assessment_description":"Ahora puede salir de esta página","finish_assessment_title":"¡Evaluación completada! ¡Gracias!","first_name":"Nombre","flight_checked":"¡Control previo al vuelo exitoso!","for_more_information":"para obtener más información.","force_full_screen":"Forzar pantalla completa","forgot_your_password":"¿Olvidaste tu contraseña?","fox_jumped_over_dog":"Un rápido zorro marrón saltó sobre un perro perezoso.","fr":"FR","fraud":"Fraude","fraud_report":"Informe de fraude","fraud_status":"Estado de fraude","french":"Francés","french_rating":"Clasificación en francés","full_face_visible":"Coloca la cámara de forma que tu rostro completo sea visible en la vista previa","gaze_away":"Mirar hacia otro lado","gdpa_controls":"Controles de GPDA","general":"General","geography":"Geografía","german":"Alemán","get_comfy":"Ponte cómodo","get_ready":"Prepárate","get_ready_for_identity_validation":"Prepárate para la validación de identidad","get_started":"COMIENZA","get_water":"Consigue agua","go":"IR","go_back":"Regresa","good":"Bien","good_light":"Asegúrate de que haya suficiente luz en la habitación","got_it":"Entendido","grade_book_tour":"Recorrido del libro de calificaciones","great":"Genial","group_id":"Id. de grupo","group_name":"Nombre de grupo","guidelines":"PAUTAS DE LA PLATAFORMA","hardware_test":"PRUEBA DE HARDWARE","hardware_test_face_detection":"PRUEBA DE HARDWARE (detección de rostro)","havent_selected_any_one":"No ha seleccionado ninguno de estos campos","head_movement":"Movimiento de cabeza","help":"Ayuda","here_is_some_information_regarding_the_mereos_platform":"A continuación, encontrarás información sobre la plataforma Mereos:","hey_mate_ready_for_test_it_starting_soon":"Hola amigo, ¿está listo para la prueba? Comenzará pronto.","hi_im_your_support_manager":"Hola, soy su administrador de soporte","hi_there":"Hola","hide_grades":"Ocultar calificaciones","hide_id":"Ocultar ID","hide_location":"Ocultar ubicación","hide_names":"Ocultar nombres","hide_screen":"Ocultar pantalla","hide_video":"Ocultar video","high":"Alto","highly_satisfied":"Muy satisfecho","highly_unsatisfied":"Muy insatisfecho","hiring_manager":"Gerente de contratación","hold":"Mantener","hold_your_photo_id_into_the_frame":"Mantenga su documento de identidad con foto en el marco y haga clic en el botón \\"Tomar foto de documento de identidad\\" que aparece a continuación.","home_page":"Página de inicio","i_already_have_the_app":"Ya tengo la aplicación","i_dont_have_the_app":"No tengo la aplicación","i_downloaded_the_app":"He descargado la aplicación","i_have_read_and_accept_the":"He leído y acepto los","icc_msg":"Tenga a mano un documento de identidad con foto emitido por el gobierno.\\nSi necesita recuperar su documento de identidad o tomar un breve descanso, hágalo ahora.","id":"Documento de identidad","id_being_verified":"Espera. La identificación del candidato se está verificando.","id_card":"Tarjeta de identificación","id_not_exists":"La invitación ya no es válida. Por favor, contacta a la escuela","id_not_verified":"La identificación del candidato no es verificable. ¡Inténtalo de nuevo!","id_number":"Número de documento de identidad","id_photo":"Foto de documento de identidad","id_successfully_verified":"La identificación del candidato se verificó correctamente.","identity_card_verified_successfully":"Tarjeta de identidad verificada correctamente","identity_validation":"Validación de identidad","ignored":"Ignorado","import":"Importar","import_and_invite":"Importar e invitar","import_candidates":"Importar candidatos","in_order_to_carry_out_your_assessment":"Para realizar tu evaluación, necesitas un teléfono inteligente para filmarte desde un segundo ángulo. Para ello, debes instalar la aplicación Mereos Mobile en tu teléfono.","in_process":"En proceso","incident_Level":"Nivel del incidente","incident_level":"Nivel del incidente","incident_score":"Puntaje del incidente","incognito_error":"Esta extensión no tiene permiso para trabajar en modo incógnito.\\nPermítalo y actualice la página.","incognito_mode":"Modo incógnito","incognito_mode_requirement_checking":"Verificación del modo incógnito","incognito_mode_requirement_checking_msg":"Esta extensión debe trabajar en modo incógnito para garantizar una supervisión segura del examen.\\nPara obtener más información","incorrect":"Incorrecto","incorrect_end_date_and_time":"Fecha y hora de finalización incorrectas","indications_li_1":"El temporizador se encuentra en la parte superior de la pantalla.","indications_li_2":"Haga clic en la flecha izquierda para volver a la pregunta anterior.","indications_li_3":"Haga clic en « Siguiente » para ignorar la pregunta.","indications_li_4":"Podrá ","indications_li_5":"Para marcar una pregunta para que se muestre más tarde, marque la casilla \'marcar pregunta\'","indications_li_6":"Su sesión finalizará cuando haga clic en \'Enviar todas las respuestas\'","indications_title":"Información de la plataforma","infinite_pdf":"PDF infinito","initial_system_check_passed":"Verificación inicial del sistema aprobada. Su examen está a punto de comenzar.","initial_system_check_passed_get_ready_for_identity_validation":"Verificación inicial del sistema aprobada. Prepárese para la validación de identidad.","instruction":"Instrucción","instructions":"Instrucciones","internet_connection":"Conexión a Internet","internet_connection_not_working":"La conexión a Internet no funciona","internet_download_speed":"Velocidad de descarga de Internet","internet_speed_is_too_low":"La velocidad de Internet es demasiado baja","internet_upload_speed":"Velocidad de carga de Internet","interview":"Entrevista","invalid_email":"Correo electrónico no válido","invalid_phone_number":"Número de teléfono no válido","invitation":"Invitación","invitation_id":"ID de invitación","invitation_incomplete_contact_support":"Esta invitación está incompleta. ¡Comuníquese con el servicio de asistencia!","invitation_successfully_created":"La invitación se creó correctamente","invitations":"Invitaciones","invite":"Invitar","invite_by_groups":"Invitar por grupos","invite_name":"Nombre del invitado","invite_people":"Invitar personas","invite_search":"Búsqueda de invitaciones","invite_status":"Estado de la invitación","invite_to_assessment":"Invitar a la evaluación","invited":"Invitado","invited_at":"Invitado a","invited_for_evaluation":"Estás invitado a ser evaluado","invited_to_assessment_for":"Estás invitado a una evaluación para","invites":"Invitaciones","ip_address":"Dirección IP","is_the_camera_feedback_good":"Certifico que mi teléfono está colocado de manera que mi pantalla, mis manos y la parte superior de mi cabeza sean visibles.","it_looks_suspicious":"Parece sospechoso","italian":"Italiano","just_remembered":"¿Acabas de acordarte?","keep_mic_close":"Mantén el micrófono cerca de tu boca y no cambies la posición hasta que finalice la prueba.","last_name":"Apellido","leave_your_comment_here":"Deja tu comentario aquí","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"En vivo","load_full_question":"Cargando la vista completa de la pregunta.","loading":"Cargando","location":"Ubicación","location_enabled":"Ubicación habilitada","location_error":"La ubicación es inaccesible. Para usar esta extensión, asegúrese de que se pueda acceder a su ubicación.","location_not_working":"La función de compartir ubicación no funciona","lock_down_options":"Opciones de bloqueo","log_out":"Cerrar sesión","login_failed":"¡Comprueba tu correo electrónico o contraseña!","login_successfully":"Has iniciado sesión correctamente","longer_time_message":"Está tardando más de lo habitual. Por favor, espera...","look_out_for_the_best_talent_across_the_globe_remotely":"Busca a los mejores talentos de todo el mundo, de forma remota.","low":"Bajo","mac_users":"Usuarios de Mac","macos_10_13":"macOS 10.13 (versión más antigua que aún se mantiene)","macos_10_15":"macOS 10.15","made_changes":"Parece que has realizado algunos cambios.","maps":"Mapas","mark_for_review":"Marcar para revisión","marked":"marcado","marked_for_review":"Marcado para revisión","master_hiring_manager":"Gerente de contratación principal","master_recruiter":"Reclutador principal","mathematics":"Matemáticas","maths":"Matemáticas","maximum_section_time":"Tiempo máximo de sección","maximum_size_of_file":"El tamaño máximo de archivo es 50 MB csv o xls. Hasta 5 archivos a la vez","mb":"MB","med":"Med","mereos_proctoring_portal":"Portal de supervisión de Mereos","mereos_settings":"Configuración de Mereos","mereos_support":"Soporte de Mereos","metro_code":"Código de Metro","microphone":"Micrófono","microphone_error":"El micrófono es inaccesible. Para usar esta extensión, asegúrese de tener acceso a su micrófono.","microphone_not_working":"El micrófono no funciona","minimum":"Mínimo","minutes":"minutos","mobile_connection_successfull":"El móvil se conectó correctamente","mobile_phone_disconnected":"Teléfono móvil desconectado","modified_at":"Modificado a las","modify_at":"Modificar a las","month_names":"EneFebMarAbrMayJunJulAgoSepOctNovDic","more_actions":"Más acciones","moved_away_from_page":"El usuario se ha alejado de la página del examen","moved_back_to_page":"El usuario vuelve a la página del examen","multiple_face_detected":"Se detectaron múltiples caras","multiple_people":"Varias personas","multiple_people_detected":"Se han detectado varias personas.","multiple_people_detected_for_more_than_10_seconds":"Se han detectado varias personas durante más de 10 segundos","multiple_people_in_the_screen":"Varias personas en la pantalla","multiple_screens":"Varias pantallas","multiple_screens_detected":"Se detectaron varias pantallas","my_settings_profiles":"Mis perfiles de configuración","name":"Nombre","name_of_assessment":"Nombre de la evaluación","name_of_playlist":"Nombre de la lista de reproducción","navigate_up_and_down":"Navegar hacia arriba y hacia abajo","need_help":"¿Necesita ayuda?","negative_marks":"Marcas negativas","new_notification_from_mereos":"Nueva notificación de mereos","new_playlist":"Nueva lista de reproducción","next":"Siguiente","next_step":"Próximo paso","no":"No","no_access_code_use_mereos":"Si no tiene un código de acceso y no se encuentra en el centro de evaluación, puede realizar el examen utilizando Mereos.","no_anomalies":"No hay anomalías","no_assessment_found":"No se encontró ninguna evaluación","no_candidate_found":"No se encontró ningún candidato","no_data_found":"No se encontraron datos","no_filtered_anomalies":"No se encontraron anomalías filtradas","no_invites_found":"No se encontraron invitaciones","no_mircophone_detected":"No se detectó ningún micrófono","no_noise_in_room":"Asegúrese de que su sala esté bien iluminada y no haya ruido de fondo.","no_panel_added_to_the_section":"No se agregó ningún panel a la sección","no_person_detected_come_back_to_assessment":"No se ha detectado ninguna persona. Vuelva a la evaluación.","no_person_detected_for_more_than_10_seconds":"No se ha detectado ninguna persona durante más de 10 segundos","no_person_in_the_screen":"No hay ninguna persona en la pantalla","no_playlist_found":"No se encontró ninguna lista de reproducción","no_point_in_running_leave_in_time":"No tiene sentido correr, tienes que irte a tiempo","no_rating_available_for_this_section_type":"No hay calificaciones disponibles para este tipo de sección","no_record_found":"No se encontró ningún registro","no_section_found":"No se encontró ninguna sección","no_session_found":"No se encontró ninguna sesión","normal":"Normal","not_fraud":"No es fraude","not_invited":"No invitado","not_viewed":"No visto","nothing_suspicious_was_noticed":"No se notó nada sospechoso","notification":"Notificación","notification-histroy":"Historial de notificaciones","notification_not_working":"La notificación no funciona","notifications":"Notificaciones","notifications_on_your_phone_should_be_turned_off":"Las notificaciones de tu teléfono deben estar desactivadas. Pueden interferir con la grabación de la transmisión de video.","notify_candidate":"Notificar al candidato","notify_candidates":"Notificar a los candidatos","number_of_assessment_sections":"Número de secciones de evaluación","number_of_sections":"Número de secciones","object_detected":"Se ha detectado un objeto","objective":"Objetivo","of":"de","okay":"Está bien","on_hold":"En espera","only_one_attempt":"Solo puedes responder a una pregunta una vez. No podrás revisarlo más tarde.","only_one_screen":"Solo una pantalla","open":"Abrir","open_the_mereos_mobile_application":"Abre la aplicación Mereos Mobile en tu teléfono y escanea este código QR para sincronizar tu teléfono.","opened":"Abierto","or":"O","other_app_close":"Cierra aplicaciones como Skype, Google Hangouts, etc. que puedan interrumpir la prueba.","overall_gpa":"Promedio general","overall_knowledge_rating":"Calificación general de conocimientos","overall_time_taken":"Tiempo total empleado","overview":"Descripción general","owner":"Propietario","page_error":"Error de página","page_not_found":"Página no encontrada","panel_name":"Nombre del panel","password":"Contraseña","password_reset_link_sent":"Se ha enviado un enlace para restablecer la contraseña a tu correo electrónico.","pause":"Pausar","pc_users":"Usuarios de PC","pending":"Pendiente","per_page":"Por página","person_missing":"Persona faltante","persons_eyes_are_moving":"Los ojos de la persona se están moviendo","persons_head_is_moving":"La cabeza de la persona se está moviendo","phone":"Teléfono","phone_number":"Número de teléfono","photo_id":"Identificación con foto","physics":"Física","play":"Reproducir","playlist_name":"Nombre de la lista de reproducción","playlists":"Listas de reproducción","please_add_assessment_duration":"Agregue la duración de la evaluación","please_add_atleast_one_item":"Agregue al menos un elemento","please_check_your_mic":"Por favor, revisa tu micrófono antes de comenzar la grabación","please_enable_force_submission\'":"Habilite el envío forzado","please_scan_this_qr_code":"Por favor, Escanee este código QR con su dispositivo móvil para descargar la aplicación Mereos Mobile.","please_share_entire_screen":"Comparte la pantalla completa","please_take_picture_or":"Por favor, hazte una foto o","please_unselect_time_region_from_template\'":"Deseleccione la región horaria de la plantilla","please_wait":"Por favor, espera...","please_wait_we_processing":"Por favor espere, estamos procesando","points":"Puntos","poor":"Malo","pop_up":"VENTANA EMERGENTE","portuguese_brazil":"Portugués (Brasil)","positive_marks":"Calificaciones positivas","post_instructions_text":"Aquí están las instrucciones posteriores a la evaluación","postinstructions":"Instrucciones posteriores","pre_configured_behavior":"Elija una configuración de comportamiento preconfigurada o personalice cualquiera de las configuraciones del examen","preinstructions":"Instrucciones previas","previous_step":"Paso anterior","privacy_msg":"Doy mi consentimiento para el procesamiento de mis datos personales para los fines específicos mencionados en la política de privacidad","privacy_policy":"Política de privacidad","privacy_policy_msg":"Doy mi consentimiento para el procesamiento de mis datos personales para los fines específicos mencionados en la política de privacidad","processed_anomalies":"Anomalías procesadas","processing":"Procesando","proctor":"Proctor","proctored_review_will_end_in":"La revisión supervisada finalizará en","proctoring_behavior_settings":"Configuración de la conducta de supervisión","proctoring_exam_description":"Las anomalías comparan las acciones de un examinado con el resto de los exámenes de la clase. Esto resaltará las diferencias estadísticamente significativas en la conducta de un examinado.","proctoring_exam_metrics":"Métricas de la supervisión de exámenes","proctoring_exam_settings":"Configuración de la supervisión de exámenes","proctoring_frame_description":"La gravedad de cada métrica establece el peso de la conducta sospechosa en relación con las demás conductas. Estas métricas se calculan con cada imagen. Cada característica se deriva para cada imagen, independientemente de si la configuración está habilitada o no. La gravedad de estas métricas se puede cambiar en cualquier momento, lo que dará como resultado un nuevo cálculo del grado de sospecha de un examen supervisado.","proctoring_frame_metrics":"Métricas del marco de supervisión","proctoring_profile_required":"Se requiere el perfil de supervisión","profile_id":"Id. del perfil","proven_fraud":"Fraude comprobado","provider":"Proveedor","published":"Publicado","question":"Pregunta","question_1_of_20":"PREGUNTA 1 DE 20","question_List":"Lista de preguntas","question_based_stats":"Estadísticas basadas en preguntas","question_count":"Recuento de preguntas","question_list":"Lista de preguntas","question_name":"Nombre de la pregunta","question_not_answered":"No ha respondido X de Y preguntas.","question_view":"Vista de preguntas","questions":"Preguntas","questions_attended":"Pregunta respondida","questions_uploaded_successFully":"Las preguntas se cargaron correctamente","quick_filter":"Filtro rápido","quiz_name":"Nombre de la prueba","ram":"RAM","ram_error":"Este sistema no cumple con los requisitos de RAM.","ram_min_requirement":"4 GB\\nmenos del 90 % de uso de RAM","ram_recommended_requirement":"16 GB\\nmenos del 70 % de uso","rate_experience_by_emotion":"Califique su experiencia haciendo clic en el emoticón.","rating":"Calificación","re_invite":"Reinvitar","re_record_audio":"Volver a grabar audio","recapture":"Recapturar","recommended":"Recomendado","record_audio":"Grabar audio","record_not_found":"No se encontraron registros","record_room":"Grabar sala","record_screen":"Grabar pantalla","record_video":"Grabar video","record_web_traffic":"Grabar tráfico web","recording":"Grabación","recording_started_successfully":"La grabación se inició correctamente","recording_stopped_successfully":"La grabación se detuvo correctamente","recruiter":"Reclutador","refresh":"Actualizar","register_here":"REGÍSTRATE AQUÍ","registered_successfully":"¡Registrado exitosamente!","reinvite":"Reinvitar","reinvite_people":"Volver a invitar a personas","reject":"Rechazar","rejected":"Rechazado","rejection":"Rechazo","reloading_closing_add_partial_data":"Recargar o cerrar la ventana puede resultar en una descarga parcial del archivo.","remind_candidate":"Recordar a los candidatos","remind_candidates":"Recordar a los candidatos","remind_panel":"Panel de recordatorios","reminder":"Recordatorio","remote_automate_reuse":"Remoto. Automatizar. Reutilizar.","reports":"Informes","required_time":"Tiempo requerido","reset":"Restablecer","reset_email_sent":"Se enviará un enlace para restablecer su contraseña a su correo electrónico.","reshare_screen":"Volver a compartir pantalla","reshoot_video":"Volver a grabar el video","results":"Resultados","resume":"Currículum","resume_doc":"CV","retake":"Retomar","retake_id_photo":"Volver a tomar la foto de identificación","retake_photo":"Retomar foto","reuse_the_candidate_data_and_hire_faster":"Reutilice los datos del candidato y contrate más rápido","review_q_later":"Para revisar una pregunta más tarde, haga clic en la casilla de verificación \\"Marcar para revisión\\". Utilice filtros en la pantalla de Revisión para ver las preguntas marcadas.","roles":"Roles","room_id":"ID de la sala","room_scan":"Escaneo de la sala","room_scan_completed":"Escaneo de la sala completado","room_scanning":"Escaneo de la sala","roomscan_recordings":"Grabaciones del escaneo de la sala","row":"Fila","satisfied":"Satisfecho","save":"Guardar","save_answer":"Su respuesta no se cargará. Haga clic en el botón SIGUIENTE para guardar su respuesta","save_exam_settings":"Guardar configuración del examen","save_information":"Guardar información","save_n_publish":"Guardar y Publicar","save_settings_profile":"Guardar perfil de configuración","saved_successfully":"Guardado correctamente","scan_or_download_the_below_qr_code_to":"Escanea o descarga el código QR a continuación","scan_your_room":"Escanea tu habitación en 360°, incluida tu área de trabajo","schedule_invite":"Programar invitación","schedule_live":"Programar en vivo","scheduled_at":"Programado a las","scheduled_invite":"Invitación programada","scheduled_time":"Hora programada","school":"Escuela","school_name":"Nombre de la escuela","science":"Ciencia","score":"Puntaje","screen":"Pantalla","screen_record":"Grabación de pantalla","screen_recording_window_shared":"Ventana de grabación de pantalla compartida","screen_recordings":"Grabaciones de pantalla","screen_resolution":"Resolución de pantalla","screen_shared_successfully":"Compartió la pantalla correctamente","screen_sharing_stopped":"Se detuvo el uso compartido de pantalla","search":"Buscar","search_an_exam":"Buscar un examen","search_an_exam_taker":"Buscar un examinado","search_by":"Buscar por","search_candidate_name_or_location":"Buscar candidato o ubicación","search_location":"Buscar ubicación","search_question":"Buscar pregunta","search_text":"Buscar texto","section":"Sección","section1":"Sección 1","section2":"Sección 2","section3":"Sección 3","section4":"Sección 4","section_activity_required":"Actividad es obligatorio","section_completed_next_to_continue":"Ha completado la sección. Haga clic en Siguiente para continuar.","section_name":"Nombre de la sección","section_status":"Estado de la sección","section_type":"Tipo de sección","sections":"Secciones","secure_feature":"Función de seguridad","security_document":"Documento de seguridad","see_all_arguments":"Ver todos los argumentos","see_more":"Ver más","see_support_tags":"Ver etiquetas de soporte","seems_like_a_fraud":"Parece un fraude","select":"Seleccionar","select_a_chat_room_for_messages":"Seleccione una sala de chat para mensajes","select_a_question":"Seleccione una pregunta","select_a_saved_setting_profile_or_create_new_one":"Seleccione un perfil de configuración guardado o cree uno nuevo","select_and_invite_status":"Seleccionar e invitar estado","select_answer_below_from_below":"Seleccione su respuesta de las siguientes:","select_camera":"Seleccione la cámara","select_candidates":"Seleccione candidatos","select_complete":"SECCIÓN COMPLETA","select_evaluator":"Seleccione el evaluador","select_microphone":"Seleccione el micrófono","select_on_assessments":"Seleccione las evaluaciones","select_on_assessments_to_duplicate":"Seleccione las evaluaciones que desea duplicar","select_on_playlist_to_duplicate":"Seleccione la lista de reproducción para duplicar","select_on_status_to_change":"Seleccione el estado que desea cambiar","select_preferred_camera_and_microphone":"Seleccione la cámara y el micrófono preferidos.","select_proctor":"Seleccione el supervisor","select_profile":"Seleccione el perfil","select_role":"Seleccione el rol","selected":"Seleccionado","selection":"Selección","send":"Enviar","send_candidates_reminder":"Enviar recordatorio de candidato","send_invitation":"Enviar invitación","send_invite":"Enviar invitación","send_reset_password_link":"Enviar enlace de restablecimiento de contraseña","session":"Sesión","session_completed":"La sesión está completada","session_completed_successfully":"La sesión se completó con éxito","session_duration":"Duración de la sesión","session_id":"ID de sesión","session_initiated":"Sesión iniciada","session_started":"Su sesión comenzará ahora","session_status":"Estado de la sesión","session_view":"Vista de la sesión","sessions":"Sesiones","set_as_default_profile":"Establecer como perfil predeterminado","setting_up_your_phone_camera":"Configura tu teléfono","settings":"Configuración","setup_section":"Sección de configuración","several_sections":"Varias secciones","share_screen_msg":"Haga clic en el botón \\"Listo\\" después de haber permitido compartir su pantalla.","share_setting":"Configuración para compartir","share_settings":"Configuración para compartir","share_the_assessment":"Compartir la evaluación","show_unmatched_attempts":"Mostrar intentos no coincidentes","showing_results_for":"Mostrando resultados para","sign_in":"Iniciar sesión","sign_in_with":"Iniciar sesión con ","sign_out":"Cerrar sesión","skills":"Habilidades","skip":"Omitir","skip_question_click_next":"Haga clic en el botón \\"Siguiente\\" para omitir una pregunta. Puede volver a ver las preguntas omitidas usando \\"Ver lista de preguntas\\"","skipped":"Omitidas","skipped_question":"pregunta omitida","solution":"Solución","some_attribute":"Algún atributo","some_of_the_candidate_start_assessment":"Algunos de los candidatos comienzan la evaluación. No puede editar la evaluación","something_went_wrong":"Algo salió mal","something_went_wrong_please_contact_support":"¡Algo salió mal! Comuníquese con el servicio de asistencia.","something_went_wrong_please_try_again_later":"Algo salió mal. Inténtalo de nuevo más tarde.","something_went_wrong_please_upload_again":"Algo salió mal, por favor, vuelve a cargar","sort_by_last_name":"Ordenar por apellido","sound_check":"Prueba de sonido","sourcer":"Origen","spanish":"Español","speech_detected":"Voz detectada","speech_is_detected":"Voz detectada","start":"Inicio","start_and_end_time":"Hora de inicio y de fin","start_at":"Iniciar a las","start_camera":"Iniciar cámara","start_chat":"Iniciar chat","start_date":"Fecha de inicio","start_date_&_time":"Fecha y hora de inicio","start_recording":"Iniciar grabación","start_time":"Hora de inicio","start_tour":"Iniciar tour","stats":"Estadísticas","status":"Estado","step_1":"Paso 1","step_2":"Paso 2","step_3":"Paso 3","step_4":"Paso 4","stop_recording":"Detener grabación","student_id":"Identificación del estudiante","student_identify_verification":"Verificación de identidad del estudiante","student_information":"Información del estudiante","studies_at":"Estudia en","subject":"Asignatura","submission_time":"Hora de envío","submit":"Enviar","submit_all":"Enviar todo","submit_and_end":"¿Está seguro de que desea enviar todas las respuestas y finalizar la sección?","submit_answers":"ENVIAR TODAS LAS RESPUESTAS","summary":"Resumen","support_chat":"Chat de soporte","supports_html5_video":"Admite video HTML5","surname":"Apellido","suspecious":"Sospechoso","suspicious_incidents":"Incidentes sospechosos","switch_language":"Cambiar idioma","synchronisation_mobile":"Flujo móvil","system_diagnostic":"Diagnóstico del sistema","system_diagnostic_msg":"El diagnóstico del sistema solo tardará un momento","system_diagnostic_passed":"Diagnóstico del sistema aprobado","system_requirement_checking":"Comprobación de los requisitos del sistema","system_requirement_checking_msg":"Comprobaremos los requisitos mínimos de su sistema para usar la biblioteca.\\nPuede leer la lista completa de requisitos en ","system_requirements":"Comprobación de los requisitos del sistema","system_requirements_for_testing":"Requisitos del sistema para la prueba","t2":"T2","take_a_photo":"Tomar una foto","take_id_photo":"Tomar una foto de identificación","take_photo":"Tomar una foto","take_the_superhero_leap_and_hire_fast_with_instahiring":"Da el salto de superhéroe y contrata rápidamente con Instahiring.","take_with_mereos":"Da el salto con Mereos","template_editing":"Edición de plantilla","template_id":"ID de plantilla","terms_and_conditions_read":"Leer términos y condiciones","terms_of_use":"Términos de uso","test":"Prueba","test_translation":"Traducción de prueba","thankyou":"¡Gracias!","the_maximum_file_size_is":"El tamaño máximo del archivo es","the_questions":"Las preguntas","the_questions_cant_be_modified_if_the_assessment":"Las preguntas no se pueden modificar si la evaluación está en estado abierto, ya que esto tendrá un impacto crítico en los informes de los candidatos","this_invitation_has_expired":"Esta invitación ha expirado","time":"Tiempo","time_required":"El tiempo requerido es","time_taken":"Tiempo empleado","time_to_answer":"Tendrás X minutos para responder Y pregunta(s).","time_zone":"Zona horaria","timer_on_screen":"Tienes X minutos para responder Y pregunta(s). Consulta el cronómetro en la parte superior derecha de la pantalla.","timezone":"Zona horaria","tips":"Consejos útiles:","to_end":"Finalizar","to_search_question_use_filter":"Para buscar una pregunta en particular, utiliza la opción de búsqueda y filtros en la sección Revisar.","to_start":"Comenzar","total":"Total","total_questions":"Total de preguntas","total_score":"Puntuación total","try_again":"INTENTA OTRA VEZ","type":"Escribe","type_your_answer_in_space":"Escribe tu respuesta en el espacio provisto en el lado derecho de la pantalla. Si desea adjuntar un archivo, haga clic en el enlace \\"Adjuntar archivo\\" y envíelo.","un_publish":"Anular publicación","unauthorized_access":"Acceso no autorizado","unauthorized_object_detected_for_more_than_10_seconds":"Se ha detectado un objeto no autorizado durante más de 10 segundos","unauthorized_object_detected_please_put_it_away":"Se ha detectado un objeto no autorizado. Guárdelo","unmarked":"desmarcar","unsatisfied":"Insatisfecho","unselect":"Anular selección","up_to":"Hasta","update":"Actualizar","update_assessment":"Actualizar evaluación","update_candidate":"Actualizar candidato","update_candidate_details":"Actualizar detalles del candidato","update_quiz":"Actualizar quiz","upload":"Cargar","upload_candidate_from":"Cargar candidatos de","upload_id_image":"Cargar/capturar una imagen de su documento de identidad.","upload_image":"Cargar imagen","upload_items":"Cargar elementos","upload_resume":"Cargar currículum","upload_speed":"Velocidad de carga","upload_speed_error":"Su velocidad de carga no es suficiente para iniciar este examen.","upload_speed_insufficient":"La velocidad de carga es insuficiente","upload_your_id_card":"Subir imagen de su documento de identidad","upload_your_identity_document":"Carga tu documento de identidad","uploaded":"Subido","url":"URL","url_filtering":"Filtrado de URL","use_select_cam_if_not_detected":"Utilice el menú desplegable \\"Seleccionar cámara\\" para seleccionar otra cámara, en caso de que su cámara no se detecte automáticamente.","use_select_microphone_if_not_detected":"Utilice el menú desplegable \\"Seleccionar micrófono\\", en caso de que su micrófono no se detecte automáticamente.","use_washroom":"Usar baño","useful_tips":"Consejos útiles:","user":"Usuario","user_idle":"Usuario inactivo","candidate_interrupted_the_stream":"El usuario interrumpió la transmisión","username":"Nombre de usuario","users":"Usuarios","verification_code":"Ingrese el código de verificación","verification_completed":"Verificación completada","verification_completed_msg":"La verificación se completó con éxito y todo está listo para el examen. Lea y acepte el acuerdo del examen y luego continuaremos.","video_codec":"Códec de video","video_extension":"Extensión de video","video_recorded":"Su video puede ser grabado durante esta sesión.","video_recording_msg":"Se puede grabar un video durante esta sesión. Asegúrese de que la sala esté lo suficientemente iluminada y no haya ruido de fondo","view_our":"Ver nuestra ","view_question_list":"Ver lista de preguntas","view_question_list_button_help":"El botón \\"Ver lista de preguntas\\" le ayudará a navegar por la lista de preguntas.","view_session":"Ver sesión","visible_always":"Visible siempre","visible_at_the_end":"Visible al final","wait_loading":"Espere mientras se carga su evaluación.","wait_video_uploading":"La carga del video puede demorar entre 10 y 15 minutos según la velocidad de su Internet. Por lo tanto, espere hasta que aparezca la siguiente pantalla.","want_to_capture":"¿Desea capturar una imagen en su lugar? Haga clic aquí.","want_to_upload":"¿Desea cargar una imagen en su lugar? Haga clic aquí.","webcam":"Cámara web","webcam_diagnostics":"Diagnóstico de la cámara web","webcam_error":"La cámara web no es accesible. Para utilizar esta extensión, asegúrese de que su cámara web esté accesible.","webcam_not_working":"La cámara web no funciona","webpages_users_access_during_exam":"Páginas web a las que los usuarios pueden acceder durante el examen","welcome":"¡BIENVENIDO!","welsh":"Galés","whats_new":"¿Qué hay de nuevo?","whitelist_specific_urls":"Incluir URL específicas en la lista blanca","wifi_connection":"Conexión wifi","window_focus_in":"Enfoque de ventana","window_focus_out":"Enfoque de ventana","windows_10":"Windows 10 (no se admite el modo 10 S)","windows_8":"Windows 8 (no se admite el modo Windows 10 S)","wired_connection":"Conexión por cable","without_saving":"Continuar sin guardar","workspace_checking":"Comprobación del espacio de trabajo","workspace_checking_msg":"Necesitamos asegurarnos de que no haya otras personas ni elementos innecesarios cerca de ti","write_a_message":"Escribe un mensaje...","write_your_comment":"Escribe tu comentario","yes":"Sí","you_welcome_here":"¡Eres bienvenido!","your_assessment_completed":"Su evaluación está completa.","your_face_must_visible_on_screen":"Tu cara debe ser completamente visible en la pantalla.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Su conexión a Internet es muy lenta. Asegúrese de tener una conexión a Internet estable","your_session_will_end_when_the_time_is_up":"Tu sesión finalizará cuando se acabe el tiempo o cuando hagas clic en \\"Enviar y salir\\".","your_time_is_valuable":"Su tiempo es valioso","your_warm_pool_may_have_ideal_candidate_to_instahire":"Su grupo de candidatos puede tener un candidato ideal para contratar de forma instantánea."}')},311:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"Résolution 1280x720","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 et plus","1_mbps":"1 Mbps","360_video":"Vidéo 360°","3_mbps":"3 Mbps","640x480_resolution":"Résolution 640x480","Unpublished":"Inédite","__none__":"--Aucun--","access_code":"Code d\'accès","account_manager":"Gestionnaire de compte","action":"Action","actions":"Actions","add":"Ajouter","add_assessment":"Créer un Examen","add_candidates":"Ajouter des candidats","add_description":"Ajouter une description","add_exam":"Créer un Examen","add_file":"Ajouter le fichier","add_question":"Ajouter une question","add_questions":"Ajouter une question","add_quiz":"Créer un Examen","add_solution":"Ajouter une solution","add_url":"AJOUTER UNE URL","advance_filter":"Filtre avancé","advanced_filter_search":"Filtre de recherche avancé","agree_by_clicking":"En cliquant sur le bouton, vous acceptez les Termes & Conditions","ai_anomalies":"Anomalies de l\'IA","ai_recorder_unknown_violation":"Il y a une violation inconnue enregistrée par AI.","all":"Tout","all_questions":"Toutes les questions","allow_access_to_popups":"Veuillez autoriser l\'accès aux éléments ci-dessous pour continuer :","allow_interruption":"Autoriser une pause","allow_question_skip":"Autoriser le saut de question","and":"ainsi que la","anomalies":"Anomalies","answer":"Répondre","answer_is_mandatory":"Il est obligatoire de répondre à toutes les questions.","answered":"Répondue(s)","apply_a_settings_profile_for_this_exam":"Appliquer une configuration existante à cet examen","apply_filter":"Appliquer le filtre","archive":"Archive","are_you_sure_want_to_leave":"Êtes-vous sûr de vouloir quitter?","are_you_sure_you_want_to_delete_this_candidate":"Êtes-vous sûr de vouloir supprimer ce candidat ?","ask_anything_about_the_extension":"Comment puis-je vous aider ?","assessment":"Test","assessment_complete":"ÉVALUATION TERMINÉE","assessment_completed":"Évaluation terminée avec succès","assessment_date_updated_successfully":"La date de l\'évaluation a été mise à jour avec succès","assessment_duration_invalid_please_contact_support":"La durée de l\'évaluation n\'est pas valide. Veuillez contacter l\'assistance !","assessment_expired":"L\'évaluation est expirée.","assessment_id":"ID du test","assessment_indications_read":"Indications d\'évaluation Lire avec succès","assessment_invitation":"Invitation à l\'évaluation","assessment_link":"Test Link","assessment_list":"Liste des évaluations","assessment_loaded":"Évaluation chargée avec succès","assessment_name":"Nom du test","assessment_passed":"Évaluation réussie","assessment_preinstructions_read_successfully":"Pré-instructions d’évaluation lues avec succès","assessment_restriction":"Restriction d\'évaluation","assessment_saved":"Évaluation enregistrée avec succès","assessment_sections":"Sections de test","assessment_start_in_5":"L\'évaluation démarre dans 5","assessment_stat":"Statistiques du test","assessment_status_change":"Changement de statut d\'évaluation","assessment_tool":"Aide aux candidats","assessment_window":"Fenêtre d\'évaluation","assessments":"Tests","assign_panel":"Attribuer un panneau","assign_proctor":"Attribuer un surveillant","assignment_name_required":"Le nom de l’évaluation est requis","attach_file":"Joindre un Fichier","attempt":"Nombre de tentatives","attend_test_quitely":"Passez votre évaluation dans un lieu calme et sans distraction.","attending":"En cours","audio_check":"Diagnostic du Microphone","audio_check_completed":"Vérification audio terminée","audio_check_msg":"Cliquez sur le bouton \\"Enregistrer\\" et lisez la phrase ci-dessous.","audio_detected_click_next":"Lors de la prochaine étape, nous tenterons de détecter votre voix. Après avoir lu les quelques conseils ci-dessous, veuillez cliquer sur le bouton \\"SUIVANT\\".","audio_level":"Piste audio","audio_recordings":"Enregistrement audio","audio_test_failed":"Le test audio a échoué","audio_test_passed":"Test audio réussi !","audio_video_recorded":"Cette évaluation est surveillée. Vos pistes audio et vidéo seront enregistrés tout au long de la session.","automate_the_routine_tasks_employ_your_time_wisely":"Automatisez les tâches quotidiennes, utilisez votre temps à bon escient","available":"Disponibles","back":"Retour","back_to_Instructions":"Retourner aux Instructions","back_to_exams":"Retourner aux examens","back_to_gradebook":"Page précédente","bad":"Mauvaise","basic_information":"Informations générales","be_loud_clear":"Veuillez parler à voix haute, distinctement et garder votre microphone ouvert.","begin_exam_now":"J\'accepte, démarrer l\'examen maintenant","block_browser_screenshot":"Bloquer la capture d\'écran du navigateur","block_screen_recording":"Bloquer l\'enregistrement d\'écran","body":"Corps","bridge_the_talent_and_timezone":"Liez le talent et le fuseau horaire","browse_document":"Parcourez le document","browser_anomalies":"Anomalies du navigateur","browser_locked_successfully":"Navigateur verrouillé avec succès","brussels":"Bruxelles","bulk_import_items":"Articles importés en masse","calculator":"Calculatrice","camera_mic":"Caméra & Micro","camera_recordings":"Enregistrement par caméra","cancel":"Annuler","cancellation":"Annulation","candidate":"Candidat","candidate_details_cannot_updated":"Les informations relatives au candidat ne peuvent être actualisées","candidate_email":"Courriel du candidat","candidate_group_id":"ID du groupe","candidate_id_is_uploaded_successfully":"La pièce d\'identité du candidat a été téléchargée avec succès.","candidate_identity_card":"Carte d\'identité du candidat","candidate_invite_assessment_section_id":"Identifiant de la section d\'évaluation de l\'invitation du candidat","candidate_list":"Liste de candidats","candidate_name":"nom du candidat","candidate_photo":"Photo","candidate_photo_captured_successfully":"Photo du candidat capturée avec succès","candidate_photo_uploaded_successfully":"Merci ! Vous pouvez passer à l’étape suivante.","candidate_reinvite_successfully":"Le candidat est réinvité avec succès","candidate_resized_window":"La fenêtre du candidat a été redimensionnée","candidate_search":"Recherche de candidats","candidate_successfully_created":"Le candidat a été créé avec succès","candidate_successfully_updated":"Les informations relatives au candidat ont été actualisées avec succès","candidate_video_is_uploaded_successfully":"La vidéo du candidat a été téléchargée avec succès","candidates":"Candidats","cant_be_modified_assessment_in_open_state":"ne peut pas être modifié si l\'évaluation est à l\'état ouvert car cela aura un impact critique sur les rapports des candidats","capture":"Photographier","capture_id":"Présentez votre pièce d\'identité avant de remplir le formulaire","capture_image_of_id_card":"Prendre une photo de votre pièce d\'identité","catastrophic":"Catastrophique","category":"Catégorie","center_your_face":"Présentez votre visage face à l’écran et cliquez sur le bouton ci-dessous.","cg":"CG","change_assessment_status":"Modifier le statut d\'évaluation","change_candidate_invite_status":"Modifier le statut de l\'invitation d\'un candidat","change_end_time":"Modifier l\'heure de fin","change_invite_status":"Modifier le panneau d\'invitation","change_role":"Changer de rôle","change_roles":"Changer de rôle","change_start_and_last_date":"Modifier la date de début et la date de fin","change_start_date":"Modifier la date de début","change_start_time":"Modifier l\'heure de début","change_status":"Changer le statut","change_type":"Changer le type","cheating":"Tricherie","check_your_email":"Consultez votre adresse mail","chemisty":"Chimie","choose_answer":"Lors de votre évaluation, vous devrez choisir la bonne réponse parmi différentes propositions (format QCM)","chromebook_users":"Utilisateurs de Chromebook","chromebook_users_min_requirement":"Le navigateur Chrome utilise la dernière version Chrome OS.","chromebook_users_recommended_requirement":"Le navigateur Chrome utilise la dernière version Chrome OS.","clean_cache":"Nettoyer le cache","clear_filter":"Effacer le filtre","click_go":"En cliquant sur le bouton \\"DÉMARRER\\", vous acceptez les Termes & Conditions","click_here":"cliquez ici","click_here_when_done":"Cliquez ici une fois le test terminé","click_ok_to_agree":"En cliquant sur le bouton \\"SUIVANT\\", vous acceptez les Termes & Conditions","click_start_recording":"CLIQUER SUR LE BOUTON \\"ENREGISTRER\\" & LISEZ LA PHRASE SUIVANTE","click_to_attempt":"Cliquez sur la question pour y accéder","click_to_capture":"Cliquez sur l\'icône pour prendre en photo","click_to_submit_anwsers":"Votre session sera terminée lorsque vous cliquerez sur le bouton \\"Soumettre Toutes les Réponses\\".","click_to_upload":"Cliquez sur l\'icône pour télécharger","clicking_here":"cliquant ici","close":"Fermer","close_open_tabs":"Fermer les onglets ouverts","close_window":"Vous pouvez maintenant fermer cette fenêtre.","closed":"Fermer","code":"Code","collapse":"Fermer","column_visibility":"Visibilité de la colonne","comment":"Commentaire","comment_suggestion":"Commentaires/Suggestions","complete":"Complète","complete_assessment":"Évaluation complète","completed":"Terminé","completed_at":"Réalisé à","configuration":"Configuration","confirm":"Confirmer","confirmation_delete_msg":"Cette modification est irréversible. Êtes-vous sûr de vouloir supprimer définitivement la playlist ?","connection":"Connexion","connectivity_ports":"Ports de Connexion","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contact","contact_support":"Contactez le support","contact_us":"contactez-nous","content_manager":"Gestionnaire de contenu","continue":"Continuer","conversion_ratio":"Ratio de conversion","coordinates":"Coordonnées","correct":"Correcte","course_id":"ID du cours","cpu":"Processeur","cpu_error":"Ce système ne correspond pas aux prérequis exigés par l\'extension Mereos.","cpu_min_requirement":"plus que 1.3 GHz, moins de 50% d\'utilisation du CPU","cpu_recommended_requirement":"plus que 2.3 GHz, moins de 85% d’utilisation du CPU","create":"Créer","create_a_panel":"Créer un panneau","create_a_playlist":"Créer une liste de lecture","create_account":"Connexion","create_an_account":"Commencer","create_an_assessment":"Créer un test","create_assessment":"Créer un Examen","create_candidate":"Créer un candidat","create_panel":"Créer un panneau","create_playlist":"Créer une playlist","create_quiz":"Créer un Examen","created_at":"Créé à","creation_date":"Date de création","current_invites_status":"État actuel des invitations","customize_proctoring_options_below":"Personnalisez votre session d\'examen en choisissant parmi les options de surveillance ci-dessous.","dashboard":"Tableau de bord","date":"Date","deadline":"Date limite","delete":"Supprimer","delete_assessment":"Supprimer l\'évaluation","delete_candidate":"Supprimer le candidat","delete_playlist":"Supprimer la liste de lecture","description":"Description","description_cant_be_empty":"Description ne peut être vide.","description_of_the_scam":"Description de l\'arnaque","desktop":"Écran","desktop_error":"Un second écran a été détecté. Pour continuer, veuillez débrancher ce second écran.","detail_view":"Vue détaillée","detailed_view":"Vue détaillée","detect_resizing_of_window":"Détecter le redimensionnement de la fenêtre","detect_unfocus":"Détecter le flou","detected_face_successfully":"Le visage du candidat a été détecté avec succès.","detected_for_more_than_10_seconds":"Visage non détecté depuis plus de 10 secondes !","detecting_audio":"Détection vocale","detecting_face":"Détection faciale…","detection_time":"Temps de détection","disable":"Désactiver","disable_clipboard":"Désactiver le Presse-papiers","disable_downloading":"Désactiver le téléchargement","disable_function_keys":"Désactiver les touches de fonction","disable_keyboard_shortcuts":"Désactiver les raccourcis clavier","disable_new_tabs":"Désactiver les nouveaux onglets","disable_printing":"Désactiver l\'impression","disable_right_click":"Désactiver le clic droit","disable_switch_to_apps":"Désactiver le passage aux applications","disable_tempering":"Désactiver la trempe","discard":"Abandonner","display_help_icons":"Afficher l\'icône d\'Aide","display_options":"Options d’affichage","display_potential_hardware_issues":"Afficher les problèmes de connexion éventuels","display_suspicious_ids":"Afficher les pièces d\'identité suspectes","do_not_lock_your_phone":"Ne verrouillez pas votre téléphone, vous perdriez votre connexion si votre écran se verrouille.","do_you_really_want_to_delete_the_grade":"Voulez-vous vraiment supprimer la note","do_you_want_to_change_assessment_end_date_&_time":"Souhaitez-vous modifier la date et l’heure de fin de l’évaluation ?","done":"Terminé","dont_have_a_template":"Pas de modèle ?","dont_have_email":"Vous n\'avez pas d\'email ?","dont_have_email_id":"Vous n\'avez pas d\'adresse mail ?","dont_have_phone_number":"Vous n\'avez pas de numéro de téléphone ?","dont_see_yourself_above":"Vous ne vous voyez pas ci-dessus ?","don’t_move_microphone":"Veuillez ne pas changer la position du microphone jusqu\'à la fin de votre évaluation.","download":"Télécharger","download_report":"Télécharger le rapport","download_speed":"Vitesse de téléchargement","download_speed_error":"Votre connexion Internet n’est pas assez élevée pour démarrer l’examen.\\nPour utiliser cette extension, assurez-vous d’avoir une connexion Internet correspondante au minimum requis.","download_speed_insufficient":"La vitesse de téléchargement est insuffisante","download_the_app":"Télécharger l’application","draft":"Brouillon","drag_&_drop_your_document":"Glissez-déposez votre document","drag_n_drop_your_document_or":"Glisser & déposer vos documents ou ","drop_the_files_here":"Déposez les fichiers ici","dual_screen_detected":"Le double écran est détecté","duplicate_assessment":"Dupliquer le test","duplicate_playlist":"Liste de lecture en double","duration":"Durée","duration_taken":"Durée prise","duration_time":"Durée","during_your_assessment":"Pendant votre évaluation","dutch":"Néerlandais","eassy_test":"Test de rédaction","edbs":"EDBS","edit":"Modifier","edit_assessment":"Modifier l\'évaluation","edit_column":"Editer la colonne","edit_playlist_settings":"Modifier les paramètres de la liste de lecture","edit_profile_for_later_use":"Modifier cette configuration pour un usage ultérieur","edit_settings":"Modifier les paramètres","edit_template":"Editer","email":"Email","email_id":"Adresse mail","email_or_password_wrong":"L\'adresse mail saisie ou le mot de passe est incorrect","email_reminder_to_selected_candidate":"Un email de rappel sera envoyé au(x) candidat(s) sélectionné(s)","email_templates":"Modèles d\'e-mails","en":"EN","enable":"Consulter","enable_javascript":"Pour visionner cette vidéo, veuillez autoriser JavaScript et utiliser un navigateur qui","enabled":"Activé","end":"Fin","end_at":"Termine à","end_date_&_time":"Date & heure de fin","end_date_greater_start_date":"La date de fin doit être supérieure à la date de début","end_section_description":"Cette section est terminée. Cliquez sur le bouton Suivant pour passer à l\'étape suivante.","end_time":"Fin","english":"Anglais","english_rating":"Évaluation en anglais","ensure_sharing_your_screen":"Assurez-vous d\'avoir autorisé le partage d\'écran.","enter":"Entrer","enter_access_code":"Entrez le code d\'accès","enter_code":"Saisir le code","enter_code_sent_to_email":"Veuillez entrer le code de vérification reçu par mail dans l\'espace ci-dessous ","enter_detail":"FORMULAIRE ET/OU PIÈCE D\'IDENTITÉ","enter_email_id":"Saisissez l\'adresse mail","enter_first_name":"Saisissez le prénom","enter_group_name":"Saisissez le nom du groupe","enter_surname":"Saisissez le nom","enter_your_email":"Saisissez votre email","enter_your_first_name":"Entrez votre prénom","enter_your_last_name":"Entrez votre nom de famille","enter_your_password":"Saisissez votre mot de passe","enter_your_phone_number":"Entrez votre numéro de téléphone","essay":"Essai","europe":"L\'Europe","evaluate":"Évaluer","evaluate_full_session":"Évaluer la session dans son intégralité","evaluate_session":"Évaluer la session","evaluation_completed":"Votre évaluation est terminée","evaluation_expired":"L\'évaluation a expiré.","evaluation_feedback":"Comment qualifieriez-vous cette session ?","evaluator":"Evaluateur","event":"Évènement","event_details":"Détails de l\'événement","event_name":"Nom de l\'événement","events":"Evènements","exam_end":"Fin Examen","exam_instructions_li_1":"Déplacez votre webcam pendant 15 à 20 secondes pour nous montrer votre espace de travail.","exam_instructions_li_2":"Cliquez sur le bouton « Suivant » seulement après avoir vu votre espace de travail.","exam_instructions_text":"Maintenant, préparez votre environnement de travail","exam_prep_msg":"Préparez une pièce d\'identité avec photo émise par le gouvernement.\\nSi vous avez besoin de récupérer votre pièce d\'identité ou de faire une pause rapide, veuillez le faire maintenant.","exam_preparation":"Préparation à l\'examen","exam_preparation_msg":"Votre examen sera enregistré à des fins de vérification, dans un cadre strictement confidentiel. L\'enregistrement démarrera après la vérification de votre matériel informatique.","exam_preparation_tnc":"Je confirme avoir pris connaissance et accepter le règlement de cet examen avant d’y accéder, sous la supervision de Mereos.","exam_security_level":"Niveau de sécurité de l\'examen (en fonction des options sélectionnées) :","exam_settings_summary":"Résumé des paramètres d\'examen","exam_start":"Début Examen","exam_taker":"Candidat","exam_taker_information":"Informations sur le candidat","exam_was_fair":"Cette session est fiable","exam_was_fraud":"Cette session est frauduleuse","example_tutorial":"Votre téléphone doit enregistrer selon cet angle de vue","exams":"Examens","export":"Exporter","export_pdf_report":"Télécharger au format PDF","extend_date":"Prolonger la date","extend_invite_date":"Prolonger la date d\'invitation","extend_last_date":"Prolonger la dernière date","extension":"Extension","extent_Date":"Prolonger la date","extent_date":"Extend date","external_id":"Identifiant externe","face_detected_click_next":"Lors de la prochaine étape, nous tenterons de détecter votre visage. Après avoir lu les quelques conseils ci-dessous, veuillez cliquer sur le bouton \\"SUIVANT\\".","face_not_detected":"Votre visage n’a pas été détecté. Veuillez réessayer.","face_photo":"Photo","failed":"Échec","fair":"Équitable","feedback_added_successfully":"Les commentaires ont été ajoutés avec succès","file_is_being_uploaded":"Le fichier est en cours de téléchargement","file_is_not_being_uploaded":"Le fichier n\'est pas téléchargé","files_at_once":"déposer immédiatement","filter":"Filtre","final_score":"Score final","final_section":"Section finale","final_status":"Statut final","finish_assessment_description":"Vous pouvez maintenant quitter cette page.","finish_assessment_title":"Évaluation terminée ! Merci !","first_name":"Prénom","flight_checked":"Premières Vérifications Effectuées !","for_more_information":" pour plus d’informations.","force_full_screen":"Forcer le plein écran","forgot_your_password":"Mot de passe oublié ?","fox_jumped_over_dog":"Rien ne sert de courir ; il faut partir à point.","fr":"FR","fraud":"Fraude","fraud_report":"Rapport de fraude","fraud_status":"Statut de fraude","french":"Français","french_rating":"Évaluation en français","full_face_visible":"Votre visage doit être intégralement visible à l\'écran.","gaze_away":"Détournement du regard","gdpa_controls":"Contrôle & GDPA","general":"Général","geography":"Géographie","german":"Allemand","get_comfy":"Installez-vous confortablement","get_ready":"Préparez-vous","get_ready_for_identity_validation":"Votre pièce d\'identité doit présenter votre visage de face.","get_started":"COMMENCER","get_water":"Hydratez-vous","go":"DÉMARRER","go_back":"Retour","good":"Bonne","good_light":"Le lieu où vous passez votre session doit être bien éclairé.","got_it":"D’accord","grade_book_tour":"Découvrir la plateforme","great":"Parfaite","group_id":"ID du groupe","group_name":"Nom du groupe","guidelines":"INDICATIONS CONCERNANT LA PLATEFORME","hardware_test":"TEST DU MATÉRIEL","hardware_test_face_detection":"TEST DU MATÉRIEL (Détection Faciale)","havent_selected_any_one":"Vous n’avez sélectionné aucun des champs","head_movement":"Détournement du visage","help":"Aide","here_is_some_information_regarding_the_mereos_platform":"Voici les indications relatives au passage de votre évaluation sur la plateforme :","hey_mate_ready_for_test_it_starting_soon":"Hé mon pote, prêt pour le test ? Cela va bientôt commencer.","hi_im_your_support_manager":"Bonjour, je suis un membre du support","hi_there":"Bonjour !","hide_grades":"Masquer les résultats","hide_id":"Masquer les identités","hide_location":"Masquer les localisations","hide_names":"Masquer les noms","hide_screen":"Masquer les partages d\'écran","hide_video":"Masquer les vidéos","high":"élevé","highly_satisfied":"Très satisfait","highly_unsatisfied":"Très insatisfait","hiring_manager":"Gestionnaire d\'embauche","hold":"Prise","hold_your_photo_id_into_the_frame":"Positionnez votre pièce d\'identité avec photo dans le cadre et cliquez sur le bouton \\"Prendre une photo de la pièce d\'identité\\" ci-dessous.","home_page":"Page d\'accueil","i_already_have_the_app":"Je possède déjà l’application","i_dont_have_the_app":"Je ne possède pas l\'application","i_downloaded_the_app":"J\'ai téléchargé l\'application ","i_have_read_and_accept_the":"J\'ai lu et j\'accepte les ","icc_msg":"Préparez une pièce d\'identité officielle.\\nSi vous avez besoin de chercher votre pièce d\'identité ou de faire une pause, veuillez la faire maintenant.","id":"Identité","id_being_verified":"Attendez. L\'identité du candidat est en cours de vérification.","id_card":"Carte d\'identité","id_not_exists":"L\'invitation n\'est plus valide. Veuillez contacter l\'école.","id_not_verified":"L\'identifiant du candidat n\'est pas vérifiable. Veuillez réessayer!","id_number":"Numéro d\'identité (optionnel)","id_photo":"Pièce d’identité","id_successfully_verified":"L\'identité du candidat a été vérifiée avec succès.","identity_card_verified_successfully":"Carte d\'identité vérifiée avec succès","identity_validation":"Contrôle de l\'identité","ignored":"Ignorée","import":"Importer","import_and_invite":"Importer et inviter","import_candidates":"Importer les candidats","in_order_to_carry_out_your_assessment":"Afin de réaliser votre évaluation, vous avez besoin d’un smartphone pour vous filmer avec un second angle.\\u2028Pour cela, vous devez installer l’application Mereos Mobile sur votre téléphone.","in_process":"Traitement en Cours","incident_Level":"Risque de fraude","incident_level":"Niveau d\'incident","incident_score":"Score d\'incident","incognito_error":"Cette extension n’est pas autorisée à fonctionner en mode Navigation Privée.\\nVeuillez autoriser ceci et rafraichir la page.","incognito_mode":"Mode Navigation Privée","incognito_mode_requirement_checking":"Vérification du mode Navigation Privée","incognito_mode_requirement_checking_msg":"Cette extension doit être fonctionnelle en mode Navigation Privée afin d\'assurer la surveillance de votre examen en toute circonstance.\\nPour en savoir plus, ","incorrect":"incorrecte","incorrect_end_date_and_time":"Date et heure de fin incorrectes","indications_li_1":"Le chronomètre se trouve dans la partie supérieure de l’écran.","indications_li_2":"Cliquez sur la flèche de gauche pour revenir à la question précédente.","indications_li_3":"Cliquez sur « Suivant » pour ignorer la question.","indications_li_4":"La barre permettant de naviguer entre les questions se trouve dans la partie supérieure de l\'écran.","indications_li_5":"Pour marquer une question à afficher ultérieurement, cochez la case \\"Marquer la question\\".","indications_li_6":"Votre session se terminera lorsque vous cliquerez sur \\"Soumettre toutes les réponses\\".","indications_title":"Indications relatives à la plateforme","infinite_pdf":"PDF à l\'infini","initial_system_check_passed":"Les vérifications préalables à l\'examen ont été réalisées avec succès. Votre examen va démarrer.","initial_system_check_passed_get_ready_for_identity_validation":"Votre pièce d\'identité doit présenter votre visage de face.","instruction":"Instruction","instructions":"INSTRUCTIONS","internet_connection":"Connexion Internet","internet_connection_not_working":"La connexion Internet ne fonctionne pas","internet_download_speed":"Vitesse de téléchargement","internet_speed_is_too_low":"La vitesse Internet est trop faible","internet_upload_speed":"Vitesse de chargement","interview":"Entretien asynchrone","invalid_email":"Email invalide","invalid_phone_number":"Numéro de téléphone invalide","invitation":"Invitation","invitation_id":"ID d\'invitation","invitation_incomplete_contact_support":"Cette invitation est incomplète. Contactez le support!","invitation_successfully_created":"L\'invitation a été créée avec succès","invitations":"Invitations","invite":"Inviter","invite_by_groups":"Inviter plusieurs candidats","invite_name":"Nom de l\'invitation","invite_people":"Inviter des personnes","invite_search":"Inviter une recherche","invite_status":"Statut de l\'invitation","invite_to_assessment":"Inviter au test","invited":"Invité","invited_at":"Invité à","invited_for_evaluation":"Vous êtes invité à être évalué","invited_to_assessment_for":"Vous êtes invité à passer l\'évaluation","invites":"Invitations","ip_address":"Adresse IP","is_the_camera_feedback_good":"Veuillez vous assurer de pouvoir positionner votre téléphone de manière à ce que votre écran, vos mains ainsi que le haut de votre tête soient visibles.  ","it_looks_suspicious":"Ça a l\'air suspect","italian":"Italien","just_remembered":"Je m\'en souviens","keep_mic_close":"Veuillez garder le microphone ouvert & ne pas changer la position de celui-ci jusqu\'à la fin de l\'évaluation.","last_name":"Nom de Famille","leave_your_comment_here":"Laisser un commentaire","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Direct","load_full_question":"Chargement de la question","loading":"Chargement","location":"Localisation","location_enabled":"Emplacement activé","location_error":"La localisation est inaccessible. Pour utiliser cette extension, assurez-vous de bien activer votre localisation.","location_not_working":"Le partage de position ne fonctionne pas","lock_down_options":"Options de verrouillage","log_out":"Se déconnecter","login_failed":"Veuillez s\'il vous plaît vérifier votre adresse mail ou votre mot de passe!","login_successfully":"Connexion réalisée avec succès","longer_time_message":"Cela prend un peu plus de temps que prévu. Veuillez patienter s\'il vous plaît...","look_out_for_the_best_talent_across_the_globe_remotely":"Recherchez les meilleurs talents dans le monde entier, le tout à distance.","low":"Faible","mac_users":"Utilisateurs d’un Mac","macos_10_13":"macOS 10.13 (Oldest Still Maintained Version)","macos_10_15":"macOS 10.15","made_changes":"Il semblerait que vous ayez effectué des modifications.","maps":"Emplacements","mark_for_review":"Taguer la Question","marked":"marked","marked_for_review":"Taguée(s)","master_hiring_manager":"Maître responsable du recrutement","master_recruiter":"Master Recruteur","mathematics":"Mathématiques","maths":"Mathématiques","maximum_section_time":"Durée maximale des sections","maximum_size_of_file":"La taille maximale des fichiers est de 50 Mo en format csv ou xls. Jusqu\'à 5 fichiers à la fois","mb":"MB","med":"Moyen","mereos_proctoring_portal":"Portail d\'examens Mereos","mereos_settings":"Paramètres Mereos","mereos_support":"Support Mereos","metro_code":"Indicatif","microphone":"Microphone","microphone_error":"Le microphone est inaccessible. Pour utiliser cette extension, assurez-vous de bien activer votre microphone.","microphone_not_working":"Le micro ne fonctionne pas","minimum":"Minimum","minutes":"minutes","mobile_connection_successfull":"Mobile connecté avec succès","mobile_phone_disconnected":"Téléphone portable déconnecté","modified_at":"Modifié à","modify_at":"Modifier à","month_names":"JanFévMarAvrMaiJuiJuiAoûSepOctNovDéc","more_actions":"Plus d\'actions","moved_away_from_page":"L\'utilisateur a quitté sa page d\'examen","moved_back_to_page":"L\'utilisateur est revenu sur sa page d\'examen","multiple_face_detected":"Plusieurs visages sont détectés","multiple_people":"Plusieurs personnes","multiple_people_detected":"Plusieurs personnes sont détectées.","multiple_people_detected_for_more_than_10_seconds":"Plusieurs personnes détectées pendant plus de 10 secondes","multiple_people_in_the_screen":"Plusieurs personnes détectées","multiple_screens":"Plusieurs écrans","multiple_screens_detected":"Plusieurs écrans détectés","my_settings_profiles":"Mes paramètres personnels","name":"Nom","name_of_assessment":"Nom du test","name_of_playlist":"Nom de la liste de lecture","navigate_up_and_down":"Naviguez de haut en bas","need_help":"Besoin d\'aide ?","negative_marks":"Marques négatives","new_notification_from_mereos":"Nouvelle notification de mereos","new_playlist":"Nouvelle playlist","next":"Suivant","next_step":"Suivant","no":"Non","no_access_code_use_mereos":"Si vous n’avez pas un code d’accès et que n’êtes pas au centre d’examen, vous pouvez passer ce test en utilisant Mereos.","no_anomalies":"Aucune anomalie","no_assessment_found":"Aucune évaluation trouvée","no_candidate_found":"Aucun candidat trouvé","no_data_found":"Aucune donnée disponible","no_filtered_anomalies":"Pas d\'anomalie après application du filtre","no_invites_found":"Aucune invitation trouvée","no_mircophone_detected":"Aucun microphone détecté","no_noise_in_room":"Asssurez-vous de passer votre session dans un lieu calme et bien éclairé.","no_panel_added_to_the_section":"Aucun invité n\'a été ajouté à cette section","no_person_detected_come_back_to_assessment":"Aucune personne n\'est détectée. Veuillez revenir à l\'évaluation.","no_person_detected_for_more_than_10_seconds":"Aucune personne n\'a été détectée pendant plus de 10 secondes","no_person_in_the_screen":"Candidat absent","no_playlist_found":"Aucune liste de lecture trouvée","no_point_in_running_leave_in_time":"Rien ne sert de courir, il faut partir à point.","no_rating_available_for_this_section_type":"Aucune note disponible pour ce type de section","no_record_found":"Aucun enregistrement trouvé","no_section_found":"Aucune section trouvée","no_session_found":"Aucune session trouvée","normal":"Normal","not_fraud":"Pas de fraude","not_invited":"Non invité","not_viewed":"Non vue(s)","nothing_suspicious_was_noticed":"Aucun évènement suspect n’a été détecté","notification":"Notification","notification-histroy":"Historique des notifications","notification_not_working":"Les notifications ne fonctionnent pas","notifications":"Notifications","notifications_on_your_phone_should_be_turned_off":"Les notifications sur votre téléphone doivent être désactivées. Elles peuvent nuire à l’enregistrement du flux vidéo.","notify_candidate":"Notifier le candidat","notify_candidates":"Informer les candidats","number_of_assessment_sections":"Nombre de sections du test","number_of_sections":"Nombre de sections","object_detected":"Objet détecté","objective":"QCM","of":"de","okay":"Convenable","on_hold":"En attente","only_one_attempt":"Attention : si vous répondez à une question, il vous sera impossible de revenir sur celle-ci.","only_one_screen":"Un seul écran","open":"Ouvrir","open_the_mereos_mobile_application":"Ouvrez l’application Mereos Mobile sur votre téléphone et scanner ce QR-code afin de synchroniser votre telephone.","opened":"ouvert","or":"Ou","other_app_close":"Fermez toutes les applications de téléconférence (Zoom, Teams, etc.) qui pourraient pertuber votre session.","overall_gpa":"Moyenne générale","overall_knowledge_rating":"Évaluation globale des connaissances","overall_time_taken":"Temps total écoulé","overview":"Vue d\'ensemble","owner":"Propriétaire","page_error":"Erreur de page","page_not_found":"Page non trouvée","panel_name":"Nom du panneau","password":"Mot de passe","password_reset_link_sent":"Un lien de réinitialisation a été envoyé sur votre adresse mail","pause":"Pause","pc_users":"Utilisateurs d’un PC","pending":"En attente","per_page":"Par Page","person_missing":"Personne manquante","persons_eyes_are_moving":"Mouvements oculaires","persons_head_is_moving":"Mouvements du visage","phone":"Téléphone","phone_number":"Numéro de téléphone","photo_id":"Contrôle d\'identité","physics":"Physique","play":"Lecture","playlist_name":"Nom de la liste de lecture","playlists":"Listes de lecture","please_add_assessment_duration":"Veuillez ajouter la durée de l\'évaluation","please_add_atleast_one_item":"Veuillez ajouter au moins un élément","please_check_your_mic":"Veuillez vérifier votre micro avant de commencer l\'enregistrement","please_enable_force_submission\'":"Veuillez activer la soumission forcée","please_scan_this_qr_code":"Veuillez scanner ce QR-code avec l’appareil de votre téléphone afin de téléchager l’application Mereos Mobile.","please_share_entire_screen":"Veuillez partager tout l\'écran.","please_take_picture_or":"Veuillez prendre en photo ou","please_unselect_time_region_from_template\'":"Veuillez désélectionner la région horaire du modèle","please_wait":"Veuillez patienter s\'il vous plaît...","please_wait_we_processing":"Veuillez patienter, nous traitons.","points":"Points","poor":"Catastrophique","pop_up":"POP-UP","portuguese_brazil":"Portugais (Brésil)","positive_marks":"Notes positives","post_instructions_text":"Voici les instructions post-évaluation","postinstructions":"Instructions de publication","pre_configured_behavior":"Choisissez un paramètre de comportement préconfiguré ou personnalisez l’un des paramètres d’examen.","preinstructions":"Instructions préalables","previous_step":"Etape précédente","privacy_msg":"J\'accepte le traitement de mes données personnelles pour les finalités spécifiques mentionnées dans la politique de confidentialité.","privacy_policy":"Politique de confidentialité","privacy_policy_msg":"Je consens au traitement de mes données personnelles aux fins spécifiques mentionnées dans la Politique de confidentialité.","processed_anomalies":"Anomalies traitées","processing":"Traitement","proctor":"Surveillant","proctored_review_will_end_in":"L’examen surveillé se terminera dans","proctoring_behavior_settings":"Paramètres de comportement de surveillance","proctoring_exam_description":"Les anomalies comparent les actions d’un candidat au reste des examens de la classe. Cela mettra en évidence des différences statistiquement significatives dans le comportement d’un candidat.","proctoring_exam_metrics":"Mesures d’examen de surveillance","proctoring_exam_settings":"Paramètres de l’examen","proctoring_frame_description":"La gravité de chaque métrique définit le poids du comportement suspect par rapport aux autres comportements. Ces métriques sont calculées avec chaque image. Chaque caractéristique est dérivée pour chaque image, quels que soient les paramètres activés ou non. La gravité de ces mesures peut être modifiée à tout moment, ce qui entraînera un nouveau calcul du caractère suspect d\'un examen surveillé.","proctoring_frame_metrics":"Mesures du cadre de surveillance","proctoring_profile_required":"Un profil de surveillance est requis","profile_id":"ID du profil","proven_fraud":"Fraude avérée","provider":"Fournisseur","published":"Publié","question":"Question","question_1_of_20":"QUESTION 1 SUR 20","question_List":"Liste des Questions","question_based_stats":"Statistiques basées sur les questions","question_count":"Numéro de la question","question_list":"Liste de questions","question_name":"Nom de la question","question_not_answered":"Vous n\'avez pas répondu à X des Y questions posées.","question_view":"Affichage des questions","questions":"Questions","questions_attended":"Questions répondues","questions_uploaded_successFully":"Les questions sont téléchargées avec succèsComplètement","quick_filter":"Filtre rapide","quiz_name":"Nom du quiz","ram":"RAM","ram_error":"Ce système ne répond pas aux exigences minimales requises pour la RAM.","ram_min_requirement":"4 GB\\n Moins de 90% d’utilisation de la RAM","ram_recommended_requirement":"16 GB\\nMoins de 70% d’utilisation de la RAM","rate_experience_by_emotion":"Notez votre expérience en cliquant sur l\'un des émoticônes.","rating":"Notation","re_invite":"Reinvité","re_record_audio":"Réenregistrer l\'audio","recapture":"Rephotographier","recommended":"Recommandé","record_audio":"Enregistrer","record_not_found":"Aucun enregistrement trouvé","record_room":"Enregistrer le salle","record_screen":"Écran d\'enregistrement","record_video":"Enregistrer la vidéo","record_web_traffic":"Enregistrer le trafic Web","recording":"Enregistrement","recording_started_successfully":"L\'enregistrement a démarré avec succès","recording_stopped_successfully":"L\'enregistrement a été arrêté avec succès","recruiter":"Recruteur","refresh":"Rafraîchir","register_here":"INSCRIVEZ-VOUS ICI","registered_successfully":"Éléments enregistrés avec succès !","reinvite":"Réinviter","reinvite_people":"Réinviter des personnes","reject":"Rejeter","rejected":"Refusé","rejection":"Rejet","reloading_closing_add_partial_data":"Recharger ou fermer la fenêtre peut entraîner un téléchargement incomplet du fichier.","remind_candidate":"Rappeler aux candidats","remind_candidates":"Rappeler aux candidats","remind_panel":"Panneau de rappel","reminder":"Rappel","remote_automate_reuse":null,"reports":"Rapports","required_time":"Le temps requis","reset":"Réinitialiser","reset_email_sent":"Un lien permettant de réinitialiser votre mot de passe sera envoyé sur votre adresse mail","reshare_screen":"Partager à nouveau l’écran","reshoot_video":"Enregistrer une nouvelle vidéo","results":"Résultats","resume":"Continuer","resume_doc":"CV","retake":"Reprendre","retake_id_photo":"Reprendre la photo d\'identité","retake_photo":"Reprendre une photo","reuse_the_candidate_data_and_hire_faster":"Réutilisez les données des candidats et embauchez plus rapidement","review_q_later":"Pour tagguer une question à voir ultérieurement, cochez la case \\"Taguer la Question\\".","roles":"Rôle","room_id":"ID de la salle","room_scan":"Environnement","room_scan_completed":"Analyse de la salle terminée","room_scanning":"Numérisation de la pièce","roomscan_recordings":"Enregistrement par scan de la pièce","row":"Ligne","satisfied":"Satisfaite","save":"Sauvegarder","save_answer":"Votre réponse ne pourra être mis à jour. Veuillez cliquer sur le bouton \\"SUIVANT\\" pour enregistrer votre réponse.","save_exam_settings":"Sauvegarder les paramètres d’examens","save_information":"enregistrer les informations","save_n_publish":"Sauvergarder &amp; Publier","save_settings_profile":"Configurations déjà enregistrées","saved_successfully":"Enregistré avec succès","scan_or_download_the_below_qr_code_to":"Scannez ou téléchargez le code QR ci-dessous pour","scan_your_room":"Utilisez votre webcam pour scanner votre pièce à 360°, y compris votre bureau","schedule_invite":"Programmer l\'invitation","schedule_live":"Programmer en direct","scheduled_at":"Prévu à","scheduled_invite":"Invitation programmée","scheduled_time":"Heure prévue","school":"Établissement","school_name":"Nom de l’Établissement","science":"Science","score":"Score","screen":"Écran","screen_record":"Partage d\'écran","screen_recording_window_shared":"Fenêtre d\'enregistrement d\'écran partagée","screen_recordings":"Enregistrements d\'écran","screen_resolution":"Résolution de l’écran","screen_shared_successfully":"Votre écran est partagé","screen_sharing_stopped":"Partage d\'écran arrêté","search":"Rechercher","search_an_exam":"Chercher un examen","search_an_exam_taker":"Chercher un candidat","search_by":"Rechercher par","search_candidate_name_or_location":"Chercher un candidat par son nom ou son emplacement","search_location":"Chercher un lieu","search_question":"Chercher une Question","search_text":"Recherche de texte","section":"Section","section1":"Section 1","section2":"Section 2","section3":"Section 3","section4":"Section 4","section_activity_required":"Une activité est requise","section_completed_next_to_continue":"Votre session est terminée ! Veuillez cliquer sur Suivant pour passer à l\'étape suivante.","section_name":"Nom de la section","section_status":"Statut de la section","section_type":"Type de la section","sections":"Sections","secure_feature":"Fonctionnalité sécurisée","security_document":"Document sur la Sécurité","see_all_arguments":"Voir tous les arguments","see_more":"Voir plus","see_support_tags":"Voir les balises d\'assistance","seems_like_a_fraud":"On dirait une fraude","select":"Sélectionner","select_a_chat_room_for_messages":"Sélectionnez une salle de discussion pour les messages","select_a_question":"Sélectionner une question","select_a_saved_setting_profile_or_create_new_one":"Sélectionner une configuration existante ou en créer une nouvelle.","select_and_invite_status":"Statut de sélection et d\'invitation","select_answer_below_from_below":"Sélectionnez votre réponse parmi les propositions ci-dessous :","select_camera":"Choisir Caméra","select_candidates":"Sélectionnez les candidats","select_complete":"SECTION TERMINÉE","select_evaluator":"Sélectionner un évaluateur","select_microphone":"Choisir Microphone","select_on_assessments":"Sélectionnez parmi les tests","select_on_assessments_to_duplicate":"Sélectionnez le test à dupliquer","select_on_playlist_to_duplicate":"Sélectionnez la liste de lecture à dupliquer","select_on_status_to_change":"Sélectionnez le statut à modifier","select_preferred_camera_and_microphone":"Sélectionnez la caméra et le microphone de votre choix.","select_proctor":"Sélectionnez le surveillant","select_profile":"Choisissez un profil","select_role":"Choisir un rôle","selected":"Sélectionné","selection":"Sélection","send":"Envoyer","send_candidates_reminder":"Envoyer un rappel au candidat","send_invitation":"Envoyer une invitation","send_invite":"Envoyer l\'invitation","send_reset_password_link":"Envoyer le lien de réinitialisation du mot de passe","session":"Session","session_completed":"La session est terminée","session_completed_successfully":"La session s\'est terminée avec succès","session_duration":"Durée","session_id":"ID de session","session_initiated":"Session lancée","session_started":"Votre évaluation va bientôt commencer.","session_status":"Statut de la session","session_view":"Vue détaillée de la session","sessions":"Sessions","set_as_default_profile":"Définir comme profil par défaut","setting_up_your_phone_camera":"Configurez votre téléphone","settings":"Paramètres","setup_section":"Configurer la section","several_sections":"Sections multiples","share_screen_msg":"Cliquez sur le bouton \\"Terminé\\" après avoir autorisé le partage d’écran.","share_setting":"Paramètres de partage","share_settings":"Paramètres de partage","share_the_assessment":"partager l\'évaluation","show_unmatched_attempts":"Afficher les tentatives manquées","showing_results_for":"Montrer les résultats de","sign_in":"Se connecter","sign_in_with":"Se connecter avec ","sign_out":"Se déconnecter","skills":"Compétences","skip":"Ignorer","skip_question_click_next":"Cliquez sur le bouton \\"Suivant\\" pour ignorer une question. Vous pourrez revoir toutes les questions ignorées en cliquant sur \\"Afficher la liste des Questions\\".","skipped":"Ignorée(s)","skipped_question":"question ignorée","solution":"Solution","some_attribute":"Un attribut","some_of_the_candidate_start_assessment":"Certains candidats commencent l\'évaluation Vous ne pouvez pas modifier l\'évaluation","something_went_wrong":"Quelque chose s\'est mal passé","something_went_wrong_please_contact_support":"Quelque chose s\'est mal passé ! Veuillez contacter l\'assistance.","something_went_wrong_please_try_again_later":"Quelque chose s\'est mal passé. Veuillez réessayer plus tard.","something_went_wrong_please_upload_again":"Quelque chose s\'est mal passé, veuillez télécharger à nouveau","sort_by_last_name":"Trier par nom de famille","sound_check":"Vérification micro","sourcer":"Sourceur","spanish":"Espagnol","speech_detected":"Détection de voix","speech_is_detected":"Son détecté","start":"Début","start_and_end_time":"Heure de début & fin","start_at":"Débute à","start_camera":"Activer la caméra","start_chat":"Besoin d’aide?","start_date":"Date de début","start_date_&_time":"Date & heure de début","start_recording":"Enregistrer","start_time":"Début","start_tour":"Démarrer le tour","stats":"Stats","status":"Statut","step_1":"Etape 1","step_2":"Etape 2","step_3":"Etape 3","step_4":"Etape 4","stop_recording":"Arrêter l\'enregistrement","student_id":"Identité de l’étudiant","student_identify_verification":"Contrôle d’identité","student_information":"Informations sur l’étudiant","studies_at":"Études à","subject":"Sujet","submission_time":"Heure de soumission","submit":"Envoyer","submit_all":"TOUT ENVOYER","submit_and_end":"Êtes-vous sûr de vouloir envoyer toutes vos réponses et finir la session ? ","submit_answers":"SOUMETTRE TOUTES LES RÉPONSES","summary":"Résumé","support_chat":"Service Support","supports_html5_video":"supporte les vidéos HTML5.","surname":"Nom","suspecious":"Suspicious","suspicious_incidents":"Évènements suspects","switch_language":"Changer la langue","synchronisation_mobile":"Flux mobile","system_diagnostic":"Vérification du matériel","system_diagnostic_msg":"Un diagnostic rapide de votre matériel informatique sera effectué.","system_diagnostic_passed":"Test de diagnostic du système réussi","system_requirement_checking":"Vérification des prérequis techniques","system_requirement_checking_msg":"Nous vérifierons votre système pour connaître la configuration minimale requise pour utiliser la bibliothèque. Vous pouvez lire la liste complète des exigences en ","system_requirements":"Vérification de la configuration requise","system_requirements_for_testing":"Vérification des prérequis techniques","t2":"T2","take_a_photo":"Vérification webcam","take_id_photo":"Prendre une photo de ma pièce d\'identité","take_photo":"Prendre une photo","take_the_superhero_leap_and_hire_fast_with_instahiring":null,"take_with_mereos":"Passer avec Mereos","template_editing":"Modification du modèle","template_id":"ID du modèle","terms_and_conditions_read":"Conditions générales lues","terms_of_use":"Conditions d\'utilisation","test":"Test","test_translation":"Traduction du test","thankyou":"Merci !","the_maximum_file_size_is":"La taille maximale du fichier est","the_questions":"Le Questions","the_questions_cant_be_modified_if_the_assessment":"Les questions ne peuvent pas être modifiées si l\'évaluation est à l\'état ouvert car cela aura un impact critique sur les rapports des candidats.","this_invitation_has_expired":"Cette invitation a expiré","time":"Temps","time_required":"Le temps requis est de","time_taken":"Temps pris","time_to_answer":"Vous disposez de X minutes pour répondre à Y question(s).","time_zone":"Fuseau Horaire","timer_on_screen":"Vous disposez de X minutes pour répondre à Y question(s). Le chrono se trouvera en haut à droite de votre écran.","timezone":"Fuseau horaire","tips":"Conseils Pratiques :","to_end":"Terminer","to_search_question_use_filter":"Pour chercher une question spécifique, utilisez les options de recherches et de filtres dans le Menu.","to_start":"Commencer","total":"Total","total_questions":"Total de questions","total_score":"Note finale","try_again":"RÉESSAYER","type":"Type","type_your_answer_in_space":"Tapez votre réponse dans l\'espace prévu à cet effet sur le côté droit de votre écran. Si vous souhaitez joindre un fichier, cliquez sur \\"Joindre un Fichier\\".","un_publish":"Annuler la publication","unauthorized_access":"L\'accès non autorisé","unauthorized_object_detected_for_more_than_10_seconds":"Objet non autorisé détecté pendant plus de 10 secondes","unauthorized_object_detected_please_put_it_away":"Un objet non autorisé est détecté. S\'il vous plaît, rangez-le.","unmarked":"unmarked","unsatisfied":"Insatisfaite","unselect":"Désélectionner","up_to":"Jusqu\'à","update":"Mise à jour","update_assessment":"Mettre à jour l\'Examen","update_candidate":"Mettre à jour les infos du candidat","update_candidate_details":"Actualiser les Informations relatives au candidat","update_quiz":"Mettre à jour l\'Examen","upload":"Télécharger","upload_candidate_from":"Télécharger les candidats de","upload_id_image":"Prenez une photo ou télécharger votre pièce d\'identité.","upload_image":"Télécharger la photo","upload_items":"Télécharger des éléments","upload_resume":"Ajouter un CV","upload_speed":"Vitesse de chargement","upload_speed_error":"Votre vitesse de chargement n’est pas suffisante pour démarrer l’examen.","upload_speed_insufficient":"La vitesse de téléchargement est insuffisante","upload_your_id_card":"Télécharger une photo de votre pièce d\'identité","upload_your_identity_document":"télécharger votre piece d\'identité","uploaded":"Téléchargé","url":"URL","url_filtering":"Filtrage d\'URL","use_select_cam_if_not_detected":"Utilisez le menu déroulant \\"Choisir Caméra\\" dans le cas où votre caméra n\'est pas détectée automatiquement.","use_select_microphone_if_not_detected":"Utilisez le menu déroulant \\"Choisir Microphone\\" dans le cas où votre microphone n\'est pas détecté automatiquement.","use_washroom":"Pause toilettes","useful_tips":"Conseils Pratiques :","user":"Utilisateur","user_idle":"Candidat Inactif","candidate_interrupted_the_stream":"L\'utilisateur a interrompu le flux!","username":"Nom d\'utilisateur","users":"Utilisateurs","verification_code":"Entrez le code de vérification","verification_completed":"Vérification terminée","verification_completed_msg":"Tout est prêt pour l\'examen.\\nLisez et acceptez les conditions de passation de l\'examen pour continuer.","video_codec":"Codec vidéo","video_extension":"Extension vidéo","video_recorded":"Votre vidéo peut être enregistrée lors de cette session.","video_recording_msg":"La vidéo peut être enregistrée pendant cette session. Assurez-vous que la pièce est suffisamment éclairée et qu\'il n\'y a pas de bruit de fond","view_our":"Consulter notre ","view_question_list":"AFFICHER LA LISTE DES QUESTIONS","view_question_list_button_help":"Le bouton \\"Afficher la liste des Questions\\" vous aidera à parcourir la liste des questions.","view_session":"Voir la session","visible_always":"Visible toujours","visible_at_the_end":"Visible à la fin","wait_loading":"Veuillez patienter le temps que votre évaluation se charge.","wait_video_uploading":"Le téléchargement de votre vidéo peut prendre 1-2 minutes en fonction de votre connexion Internet. Veuillez s\'il vous plaît patienter jusqu\'à ce que l\'écran suivant apparaisse.","want_to_capture":"Vous préférez prendre une photo de votre pièce d\'identité ? Cliquez ici.","want_to_upload":"Vous préférez télécharger une photo de votre pièce d\'identité ? Cliquez ici.","webcam":"Webcam","webcam_diagnostics":"Diagnostic de la Webcam","webcam_error":"La webcam est inaccessible. Pour utiliser cette extension, assurez-vous de bien activer votre webcam.","webcam_not_working":"La webcam ne fonctionne pas","webpages_users_access_during_exam":"Liste des sites internet auxquels les utilisateurs ont le droit d\'accéder pendant l\'examen","welcome":"BIENVENUE !","welsh":"Gallois","whats_new":"Quelles sont les nouveautés ?","whitelist_specific_urls":"Autoriser l\'accès à certains sites internet","wifi_connection":"Connexion Wifi","window_focus_in":"Vous êtes rentré(e)","window_focus_out":"Vous êtes sorti(e)","windows_10":"Windows 10 (Windows 10 n’est pas supporté)","windows_8":"Windows 8 (Windows 8 n’est pas supporté)","wired_connection":"Connexion filaire","without_saving":"Continuer sans sauvergarder","workspace_checking":"Contrôle de l\'environnement de travail","workspace_checking_msg":"Nous devons nous assurer qu\'il n\'y a pas d\'autres personnes ou d\'objets non-autorisés autour de vous.","write_a_message":"Écrire un message...","write_your_comment":"Écrivez votre commentaire","yes":"Oui","you_welcome_here":"Vous êtes les bienvenus ici!","your_assessment_completed":"Votre évaluation est terminée.","your_face_must_visible_on_screen":"Votre visage doit être intégralement visible à l\'écran.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Votre connexion Internet est très lente. Veuillez vous assurer d\'avoir une connexion Internet stable.","your_session_will_end_when_the_time_is_up":"Votre session se terminera lorsque le temps sera écoulé ou lorsque vous cliquerez sur “Soumettre et quitter”.","your_time_is_valuable":"Votre temps est précieux","your_warm_pool_may_have_ideal_candidate_to_instahire":"Votre piscine chauffée peut avoir un candidat idéal pour Instahire."}')},834:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"Risoluzione 1280x720","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 e oltre","1_mbps":"1 Mbps","360_video":"Video a 360°","3_mbps":"3 Mbps","640x480_resolution":"Risoluzione 640x480","Unpublished":"Non pubblicato","__none__":"--Nessuno--","access_code":"Codice di accesso","account_manager":"Gestore account","action":"Azione","actions":"Azioni","add":"Aggiungi","add_assessment":"Aggiungi valutazione","add_candidates":"Aggiungi candidati","add_description":"Aggiungi descrizione","add_exam":"Aggiungi esame","add_file":"Aggiungi file","add_question":"Aggiungi domanda","add_questions":"Aggiungi domande","add_quiz":"Aggiungi un quiz","add_solution":"Aggiungi soluzione","add_url":"AGGIUNGI URL","advance_filter":"Filtro avanzato","advanced_filter_search":"Ricerca filtro avanzata","agree_by_clicking":"Cliccando sul pulsante accetti i Termini e condizioni","ai_anomalies":"Anomalie AI","ai_recorder_unknown_violation":"È stata registrata una violazione sconosciuta dall\'IA","all":"Tutto","all_questions":"Tutte le domande","allow_access_to_popups":"Consenti l\'accesso ai seguenti popup che appaiono, come mostrato di seguito:","allow_interruption":"Consenti interruzione","allow_question_skip":"Consenti salto domanda","and":"e","anomalies":"Anomalie","answer":"Risposta","answer_is_mandatory":"È obbligatorio rispondere a tutte le domande.","answered":"Risposto","apply_a_settings_profile_for_this_exam":"Applica un profilo impostazioni per questo esame","apply_filter":"Applica filtro","archive":"Archivia","are_you_sure_want_to_leave":"Sei sicuro di voler uscire?","are_you_sure_you_want_to_delete_this_candidate":"Sei sicuro di voler eliminare questo candidato?","ask_anything_about_the_extension":"Potresti chiedermi qualsiasi cosa sull\'estensione. Come posso aiutarti?","assessment":"Valutazione","assessment_complete":"VALUTAZIONE COMPLETATA","assessment_completed":"Valutazione completata con successo","assessment_date_updated_successfully":"Data di aggiornamento della valutazione","assessment_duration_invalid_please_contact_support":"La durata della valutazione non è valida. Contatta l\'assistenza!","assessment_expired":"La valutazione è scaduta.","assessment_id":"ID valutazione","assessment_indications_read":"Le indicazioni della valutazione sono lette","assessment_invitation":"Invito alla valutazione","assessment_link":"Link alla valutazione","assessment_list":"Elenco valutazioni","assessment_loaded":"Valutazione caricata con successo","assessment_name":"Nome valutazione","assessment_passed":"Valutazione superata","assessment_preinstructions_read_successfully":"Le istruzioni preliminari di valutazione sono lette","assessment_restriction":"Restrizione valutazione","assessment_saved":"Valutazione salvata correttamente","assessment_sections":"Sezioni valutazione","assessment_start_in_5":"La valutazione inizia tra 5","assessment_stat":"Stato valutazione","assessment_status_change":"Modifica stato valutazione","assessment_tool":"Strumento valutazione","assessment_window":"Finestra valutazione","assessments":"Valutazioni","assign_panel":"Assegna pannello","assign_proctor":"Assegna supervisore","assignment_name_required":"Il nome valutazione è obbligatorio","attach_file":"Allega file","attempt":"Tentativo","attend_test_quitely":"Partecipa al test in un ambiente tranquillo e senza distrazioni.","attending":"Partecipante","audio_check":"Controllo audio","audio_check_completed":"Controllo audio completato","audio_check_msg":"Clicca sul pulsante \\"Registra\\" e leggi la frase qui sotto.","audio_detected_click_next":"Nella schermata successiva, rileveremo il tuo audio. Clicca sul pulsante AVANTI per procedere dopo aver letto i suggerimenti qui sotto.","audio_level":"Livello audio","audio_recordings":"Registrazioni audio","audio_test_failed":"Test audio fallito!","audio_test_passed":"Test audio superato!","audio_video_recorded":"Questa valutazione è supervisionata. Il tuo audio e video saranno registrati per tutta la sessione.","automate_the_routine_tasks_employ_your_time_wisely":"Automatizza le attività di routine, impiega il tuo tempo saggiamente.","available":"Disponibile","back":"Indietro","back_to_Instructions":"Torna alle istruzioni","back_to_exams":"Torna agli esami","back_to_gradebook":"Torna al registro dei voti","bad":"Scarso","basic_information":"Informazioni di base","be_loud_clear":"Prova a parlare forte e chiaro e tieni il microfono vicino alla bocca.","begin_exam_now":"Accetto, inizia l\'esame ora","block_browser_screenshot":"Blocca lo screenshot del browser","block_screen_recording":"Blocca la registrazione dello schermo","body":"Corpo","bridge_the_talent_and_timezone":"Crea un ponte tra talento e timezone","browse_document":"sfoglia documento","browser_anomalies":"Anomalie del browser","browser_locked_successfully":"Browser bloccato correttamente","brussels":"Bruxelles","bulk_import_items":"Importazione in blocco di elementi","calculator":"Calcolatrice","camera_mic":"Fotocamera e microfono","camera_recordings":"Registrazioni della fotocamera","cancel":"Annulla","cancellation":"Annullamento","candidate":"Candidato","candidate_details_cannot_updated":"I dettagli del candidato non possono essere aggiornati","candidate_email":"Email del candidato","candidate_group_id":"ID gruppo","candidate_id_is_uploaded_successfully":"L\'ID del candidato è stato caricato correttamente","candidate_identity_card":"Carta d\'identità del candidato","candidate_invite_assessment_section_id":"ID sezione valutazione invito candidato","candidate_list":"Elenco candidati","candidate_name":"Nome candidato","candidate_photo":"Foto","candidate_photo_captured_successfully":"Foto del candidato catturata correttamente","candidate_photo_uploaded_successfully":"La foto del candidato è stata caricata correttamente","candidate_reinvite_successfully":"Il candidato è stato nuovamente invitato correttamente","candidate_resized_window":"Finestra ridimensionata del candidato","candidate_search":"Ricerca candidato","candidate_successfully_created":"Il candidato è stato creato correttamente","candidate_successfully_updated":"I dettagli del candidato sono stati aggiornati correttamente","candidate_video_is_uploaded_successfully":"Il video del candidato è stato caricato correttamente","candidates":"Candidati","cant_be_modified_assessment_in_open_state":"non può essere modificato se la valutazione è in stato aperto, poiché ciò avrà un impatto critico sui report del candidato","capture":"Cattura","capture_id":"Cattura il tuo documento di identità prima di iniziare a compilare il modulo.","capture_image_of_id_card":"Cattura l\'immagine del tuo documento di identità","catastrophic":"Catastrofico","category":"Categoria","center_your_face":"Centra il tuo viso nell\'inquadratura e fai clic sul pulsante in basso.","cg":"CG","change_assessment_status":"Modifica stato valutazione","change_candidate_invite_status":"Modifica invito candidato Stato","change_end_time":"Cambia ora di fine","change_invite_status":"Cambia pannello di invito","change_role":"Cambia ruolo","change_roles":"Cambia ruoli","change_start_and_last_date":"Cambia data di inizio e ultima","change_start_date":"Cambia data di inizio","change_start_time":"Cambia ora di inizio","change_status":"Cambia stato","change_type":"Cambia tipo","cheating":"Imbroglio","check_your_email":"Controlla la tua e-mail","chemisty":"Chimica","choose_answer":"In questa sezione, devi scegliere la risposta corretta tra le opzioni fornite","chromebook_users":"Utenti Chromebook (solo per il controllo automatizzato. Non è supportato per Live Proctoring)","chromebook_users_min_requirement":"Il dispositivo Chrome esegue l\'ultima versione di Chrome OS.","chromebook_users_recommended_requirement":"Il dispositivo Chrome esegue l\'ultima versione di Chrome OS.","clean_cache":"Pulisci cache","clear_filter":"Cancella filtro","click_go":"Cliccando sul pulsante \\"GO\\" accetti i Termini e condizioni","click_here":"clicca qui","click_here_when_done":"Clicca qui quando hai finito","click_ok_to_agree":"Cliccando su Avanti accetti i Termini e condizioni.","click_start_recording":"CLICCA SU AVVIA REGISTRAZIONE E LEGGI IL SEGUENTE TESTO","click_to_attempt":"Clicca sulla domanda per tentare","click_to_capture":"Clicca qui per acquisire","click_to_submit_anwsers":"Per inviare la sezione, clicca sul pulsante \\"Invia tutte le risposte\\" nella schermata di revisione. (Questo passaggio non può essere ripetuto)","click_to_upload":"Clicca qui per caricare","clicking_here":"cliccando qui","close":"Chiudi","close_open_tabs":"Chiudi le schede aperte","close_window":"Puoi chiudere la finestra ora.","closed":"Chiuso","code":"Codice","collapse":"Comprimi","column_visibility":"Visibilità colonna","comment":"Commento","comment_suggestion":"Commento/Suggerimento","complete":"Completato","complete_assessment":"Valutazione completa","completed":"Completato","completed_at":"Completato alle","configuration":"Configurazione","confirm":"Conferma","confirmation_delete_msg":"Questa modifica non può essere annullata, sei sicuro di voler eliminare definitivamente la playlist?","connection":"Connessione","connectivity_ports":"Porte di connettività","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contatto","contact_support":"Contatta l\'assistenza","contact_us":"contattaci","content_manager":"Gestore dei contenuti","continue":"Continua","conversion_ratio":"Rapporto di conversione","coordinates":"Coordinate","correct":"Corretto","course_id":"ID corso","cpu":"CPU","cpu_error":"Questo sistema non soddisfa i requisiti CPU.","cpu_min_requirement":"più di 1,3 GHz meno del 50% di utilizzo della CPU","cpu_recommended_requirement":"più di 2,3 GHz meno dell\'85% di utilizzo della CPU","create":"Crea","create_a_panel":"Crea un pannello","create_a_playlist":"Crea una playlist","create_account":"Crea il tuo account","create_an_account":"Crea un account","create_an_assessment":"Crea una valutazione","create_assessment":"Crea una valutazione","create_candidate":"Crea candidato","create_panel":"Crea pannello","create_playlist":"Crea playlist","create_quiz":"Crea un quiz","created_at":"Creato alle","creation_date":"Data di creazione","current_invites_status":"Stato attuale degli inviti","customize_proctoring_options_below":"Personalizza la tua esperienza d\'esame selezionando tra le opzioni di supervisione qui sotto.","dashboard":"Dashboard","date":"Data","deadline":"Scadenza","delete":"Elimina","delete_assessment":"Elimina valutazione","delete_candidate":"Elimina candidato","delete_playlist":"Elimina playlist","description":"Descrizione","description_cant_be_empty":"La descrizione non può essere vuota.","description_of_the_scam":"Descrizione della truffa","desktop":"Desktop","desktop_error":"È stata rilevata un\'altra schermata del desktop. Per procedere, assicurati di aver scollegato altri screen.","detail_view":"Vista dettagliata","detailed_view":"Vista dettagliata","detect_resizing_of_window":"Rileva ridimensionamento della finestra","detect_unfocus":"Rileva sfocatura","detected_face_successfully":"Il volto del candidato è stato rilevato correttamente.","detected_for_more_than_10_seconds":"Rilevato per più di 10 secondi! ","detecting_audio":"Rilevamento audio","detecting_face":"Rilevamento volto…","detection_time":"Tempo di rilevamento","disable":"Disabilita","disable_clipboard":"Disabilita Appunti","disable_downloading":"Disabilita download","disable_function_keys":"Disabilita tasti funzione","disable_keyboard_shortcuts":"Disabilita le scorciatoie da tastiera","disable_new_tabs":"Disabilita nuove schede","disable_printing":"Disabilita stampa","disable_right_click":"Disabilita clic destro","disable_switch_to_apps":"Disabilita passaggio a App","disable_tempering":"Disattiva Tempering","discard":"Ignora","display_help_icons":"Visualizza icone di aiuto","display_options":"Opzioni di visualizzazione","display_potential_hardware_issues":"Visualizza potenziali problemi hardware","display_suspicious_ids":"Visualizza ID sospetti","do_not_lock_your_phone":"Non bloccare il telefono, perderai la connessione se lo schermo si blocca.","do_you_really_want_to_delete_the_grade":"Vuoi davvero eliminare il voto","do_you_want_to_change_assessment_end_date_&_time":"Vuoi modificare la data e l\'ora di fine della valutazione","done":"Fatto","dont_have_a_template":"Non hai un modello?","dont_have_email":"Non hai un\'e-mail?","dont_have_email_id":"Non hai un ID e-mail?","dont_have_phone_number":"Non hai un numero di telefono?","dont_see_yourself_above":"Non ti vedi sopra?","don’t_move_microphone":"Non cambiare la posizione del microfono durante la valutazione.","download":"Scarica","download_report":"Scarica il report","download_speed":"Velocità di download","download_speed_error":"La tua connessione Internet non è sufficiente per il corretto funzionamento dell\'estensione.\\nPer utilizzare questa estensione, assicurati che la velocità della tua connessione Internet soddisfi i requisiti.","download_speed_insufficient":"La velocità di download è insufficiente","download_the_app":"Scarica l\'app","draft":"Bozza","drag_&_drop_your_document":"Trascina e rilascia il tuo documento","drag_n_drop_your_document_or":"Trascina e rilascia il tuo documento o ","drop_the_files_here":"Rilascia i file qui","dual_screen_detected":"È stato rilevato un doppio schermo","duplicate_assessment":"Valutazione duplicata","duplicate_playlist":"Playlist duplicata","duration":"Durata","duration_taken":"Durata impiegata","duration_time":"Durata","during_your_assessment":"Durante la valutazione","dutch":"Olandese","eassy_test":"Test Eassy","edbs":"EDBS","edit":"Modifica","edit_assessment":"Modifica valutazione","edit_column":"Modifica colonna","edit_playlist_settings":"Modifica impostazioni playlist","edit_profile_for_later_use":"Modifica questo profilo sul tuo account per un uso successivo","edit_settings":"Modifica impostazioni","edit_template":"Modifica modello","email":"Email","email_id":"ID e-mail","email_or_password_wrong":"Il tuo indirizzo e-mail o la tua password sono errati","email_reminder_to_selected_candidate":"Un promemoria e-mail verrà inviato al/ai candidato/i selezionato/i","email_templates":"Modelli e-mail","en":"EN","enable":"Enable","enable_javascript":"Per visualizzare questo video, abilita JavaScript e prendi in considerazione l\'aggiornamento a un browser Web che","enabled":"Abilitato","end":"Fine","end_at":"Fine alle","end_date_&_time":"Data e ora di fine","end_date_greater_start_date":"La data di fine deve essere successiva alla data di inizio","end_section_description":"La tua sessione è terminata! Fai clic su Avanti per andare al passaggio successivo.","end_time":"Ora di fine","english":"Inglese","english_rating":"Valutazione inglese","ensure_sharing_your_screen":"Assicurati di aver consentito la condivisione dello schermo.","enter":"Inserisci","enter_access_code":"Inserisci codice di accesso","enter_code":"Inserisci codice","enter_code_sent_to_email":"Inserisci il codice di verifica inviato all\'indirizzo e-mail registrato di seguito","enter_detail":"INSERIRE I TUOI DATI","enter_email_id":"Inserisci ID e-mail","enter_first_name":"Inserisci nome","enter_group_name":"Inserisci nome gruppo","enter_surname":"Inserisci cognome","enter_your_email":"Inserisci la tua e-mail","enter_your_first_name":"Inserisci il tuo nome","enter_your_last_name":"Inserisci il tuo cognome","enter_your_password":"Inserisci la tua password","enter_your_phone_number":"Inserisci il tuo numero di telefono","essay":"Saggio","europe":"Europa","evaluate":"Valuta","evaluate_full_session":"Valuta la sessione completa","evaluate_session":"Valuta la sessione","evaluation_completed":"La tua valutazione è completa","evaluation_expired":"La valutazione è scaduta.","evaluation_feedback":"Dai la tua valutazione per quella sessione, è una frode o no?","evaluator":"Valutatore","event":"Evento","event_details":"Dettagli evento","event_name":"Nome evento","events":"Eventi","exam_end":"Fine esame","exam_instructions_li_1":"Muovi la webcam per 15-20 secondi per mostrarci il tuo spazio di lavoro.","exam_instructions_li_2":"Clicca sul pulsante \\"Avanti\\" solo dopo aver visto il tuo spazio di lavoro.","exam_instructions_text":"Ora prepara il tuo ambiente di lavoro","exam_prep_msg":"Tieni pronto un documento d\'identità con foto rilasciato dal governo.\\nSe hai bisogno di recuperare il tuo documento d\'identità o di fare una breve pausa, fallo ora.","exam_preparation":"Preparazione esame","exam_preparation_msg":"La biblioteca dovrà registrare la tua sessione d\'esame per una potenziale revisione.\\nQueste informazioni sono crittografate e possono essere accessibili solo da individui autorizzati dal tuo istituto. La registrazione inizierà dopo aver controllato il tuo sistema e l\'ambiente.","exam_preparation_tnc":"Accetto di aver compreso le regole dell\'esame prima di iniziare l\'esame con estensione.","exam_security_level":"Livello di sicurezza dell\'esame (in base alle opzioni selezionate):","exam_settings_summary":"Riepilogo delle impostazioni dell\'esame","exam_start":"Inizio esame","exam_taker":"Nome del candidato","exam_taker_information":"Informazioni del candidato all\'esame","exam_was_fair":"L\'esame è stato corretto","exam_was_fraud":"L\'esame è stato fraudolento","example_tutorial":"Il tuo telefono dovrebbe registrare da questa angolazione","exams":"Esami","export":"Esporta","export_pdf_report":"Esporta rapporto PDF","extend_date":"Estendi data","extend_invite_date":"Estendi data invito","extend_last_date":"Estendi ultima Data","extension":"Estensione","extent_Date":"Estendi data","extent_date":"Estendi data","external_id":"ID esterno","face_detected_click_next":"Nella schermata successiva, rileveremo il tuo volto. Fai clic sul pulsante AVANTI per procedere dopo aver letto i suggerimenti di seguito.","face_not_detected":"Il volto non è stato rilevato. Riprova.","face_photo":"Foto del viso","failed":"Non riuscito","fair":"Discreto","feedback_added_successfully":"Il feedback è stato aggiunto correttamente","file_is_being_uploaded":"Il file è in fase di caricamento","file_is_not_being_uploaded":"Il file non è in fase di caricamento","files_at_once":"file in una volta","filter":"Filtro","final_score":"Punteggio finale","final_section":"Sezione finale","final_status":"Stato finale","finish_assessment_description":"Ora puoi uscire da questa page.","finish_assessment_title":"Valutazione completata! Grazie!","first_name":"Nome","flight_checked":"Controllo pre-volo riuscito!","for_more_information":"per maggiori informazioni.","force_full_screen":"Forza schermo intero","forgot_your_password":"Hai dimenticato la password?","fox_jumped_over_dog":"Una volpe marrone ha saltato velocemente sopra un cane pigro.","fr":"FR","fraud":"Frode","fraud_report":"Segnalazione di frode","fraud_status":"Stato di frode","french":"French","french_rating":"Valutazione francese","full_face_visible":"Posiziona la telecamera in modo che il tuo viso intero sia visibile nell\'anteprima","gaze_away":"Guarda lontano","gdpa_controls":"Controlli GPDA","general":"Generale","geography":"Geografia","german":"Tedesco","get_comfy":"Mettiti comodo","get_ready":"Preparati","get_ready_for_identity_validation":"Preparati per la convalida dell\'identità.","get_started":"INIZIA","get_water":"Prendi l\'acqua","go":"VAI","go_back":"Torna indietro","good":"Buono","good_light":"Assicurati che ci sia abbastanza luce nella stanza","got_it":"Capito","grade_book_tour":"Tour del registro dei voti","great":"Ottimo","group_id":"ID gruppo","group_name":"Nome gruppo","guidelines":"LINEE GUIDA PIATTAFORMA","hardware_test":"TEST HARDWARE","hardware_test_face_detection":"TEST HARDWARE (Rilevamento volti)","havent_selected_any_one":"Non hai selezionato nessuno di questi campi.","head_movement":"Movimento della testa","help":"Aiuto","here_is_some_information_regarding_the_mereos_platform":"Ecco alcune informazioni sulla piattaforma Mereos:","hey_mate_ready_for_test_it_starting_soon":"Ehi amico, pronto per il test? Inizierà presto.","hi_im_your_support_manager":"Ciao, sono il tuo responsabile dell\'assistenza","hi_there":"Ciao","hide_grades":"Nascondi voti","hide_id":"Nascondi ID","hide_location":"Nascondi posizione","hide_names":"Nascondi nomi","hide_screen":"Nascondi schermo","hide_video":"Nascondi video","high":"Alto","highly_satisfied":"Molto soddisfatto","highly_unsatisfied":"Molto insoddisfatto","hiring_manager":"Responsabile delle assunzioni","hold":"In attesa","hold_your_photo_id_into_the_frame":"Tieni il tuo documento d\'identità con foto nella cornice e clicca sul pulsante \\"Scatta foto documento d\'identità\\" qui sotto.","home_page":"Home page","i_already_have_the_app":"Ho già l\'app","i_dont_have_the_app":"Non ho l\'app","i_downloaded_the_app":"Ho scaricato l\'app","i_have_read_and_accept_the":"Ho letto e accetto il","icc_msg":"Tieni pronto un documento d\'identità con foto rilasciato dal governo.\\nSe hai bisogno di recuperare il tuo documento d\'identità o di fare una breve pausa, fallo ora.","id":"ID","id_being_verified":"Aspetta. L\'ID del candidato è in fase di verifica.","id_card":"Carta d\'identità","id_not_exists":"L\'invito non è più valido. Contatta la scuola","id_not_verified":"L\'ID del candidato non è verificabile. Riprova!","id_number":"Numero documento d\'identità","id_photo":"Foto documento d\'identità","id_successfully_verified":"L\'ID del candidato è stato verificato correttamente.","identity_card_verified_successfully":"Carta d\'identità verificata con successo","identity_validation":"Convalida identità","ignored":"Ignorato","import":"Importa","import_and_invite":"Importa e invita","import_candidates":"Importa candidati","in_order_to_carry_out_your_assessment":"Per svolgere la valutazione, hai bisogno di uno smartphone per filmarti da una seconda angolazione. Per farlo, devi installare l\'applicazione Mereos Mobile sul tuo telefono.","in_process":"In corso","incident_Level":"Livello incidente","incident_level":"Livello incidente","incident_score":"Punteggio incidente","incognito_error":"Questa estensione non può funzionare in modalità di navigazione in incognito.\\nConsenti e aggiorna la pagina.","incognito_mode":"Modalità di navigazione in incognito","incognito_mode_requirement_checking":"Controllo modalità di navigazione in incognito","incognito_mode_requirement_checking_msg":"Questa estensione deve funzionare in modalità di navigazione in incognito per garantire una supervisione sicura dell\'esame.\\nPer maggiori informazioni ","incorrect":"Non corretto","incorrect_end_date_and_time":"Data e ora di fine errate","indications_li_1":"Il timer si trova nella parte superiore dello schermo.","indications_li_2":"Clicca sulla freccia a sinistra per tornare alla domanda precedente.","indications_li_3":"Clicca su « Avanti » per ignorare la domanda.","indications_li_4":"Sarai in grado di vedere qualsiasi domanda persa alla fine della valutazione.","indications_li_5":"Per contrassegnare una domanda da mostrare in seguito, seleziona la casella di controllo \'contrassegna domanda\'.","indications_li_6":"La sessione terminerà quando cliccherai su \'Invia tutte le risposte\'.","indications_title":"Informazioni sulla piattaforma","infinite_pdf":"PDF infinito","initial_system_check_passed":"Controllo iniziale del sistema superato. Il tuo esame sta per iniziare.","initial_system_check_passed_get_ready_for_identity_validation":"Controllo iniziale del sistema superato. Preparati per la convalida dell\'identità.","instruction":"Istruzione","instructions":"Istruzioni","internet_connection":"Connessione Internet","internet_connection_not_working":"La connessione Internet non funziona","internet_download_speed":"Velocità di download Internet","internet_speed_is_too_low":"La velocità di Internet è troppo bassa","internet_upload_speed":"Velocità di upload Internet","interview":"Colloquio","invalid_email":"Email non valida","invalid_phone_number":"Numero di telefono non valido","invitation":"Invito","invitation_id":"ID invito","invitation_incomplete_contact_support":"Questo invito è incompleto. Contatta il supporto!","invitation_successfully_created":"Invito creato correttamente","invitations":"Inviti","invite":"Invita","invite_by_groups":"Invita per gruppi","invite_name":"Nome dell\'invito","invite_people":"Invita persone","invite_search":"Cerca invito","invite_status":"Stato invito","invite_to_assessment":"Invita alla valutazione","invited":"Invitato","invited_at":"Invitato a","invited_for_evaluation":"Sei invitato a essere valutato","invited_to_assessment_for":"Sei invitato a una valutazione per","invites":"Inviti","ip_address":"Indirizzo IP","is_the_camera_feedback_good":"Certifico che il mio telefono è posizionato in modo che il mio schermo, le mie mani e la parte superiore della mia testa siano visibili.","it_looks_suspicious":"Sembra sospetto","italian":"Italiano","just_remembered":"Ricordato solo?","keep_mic_close":"Conserva il microfono vicino alla bocca e non cambiare posizione finché il test non è completato.","last_name":"Cognome","leave_your_comment_here":"Lascia il tuo commento qui","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"In diretta","load_full_question":"Caricamento della vista completa della domanda.","loading":"Caricamento","location":"Posizione","location_enabled":"Posizione abilitata","location_error":"La posizione non è accessibile. Per usare questa estensione, assicurati che la tua posizione sia accessibile.","location_not_working":"La condivisione della posizione non funziona","lock_down_options":"Opzioni di blocco","log_out":"Disconnetti","login_failed":"Controlla la tua e-mail o password!","login_successfully":"Hai effettuato l\'accesso correttamente","longer_time_message":"Ci sta mettendo più tempo del solito. Attendi...","look_out_for_the_best_talent_across_the_globe_remotely":"Cerca i migliori talenti in tutto il mondo, da remoto.","low":"Basso","mac_users":"Utenti Mac","macos_10_13":"macOS 10.13 (versione più vecchia ancora mantenuta)","macos_10_15":"macOS 10.15","made_changes":"Sembra che tu abbia apportato alcune modifiche.","maps":"Mappe","mark_for_review":"Contrassegna per revisione","marked":"contrassegnato","marked_for_review":"Contrassegnato per Revisione","master_hiring_manager":"Responsabile assunzioni principale","master_recruiter":"Recruiter principale","mathematics":"Matematica","maths":"Matematica","maximum_section_time":"Tempo massimo della sezione","maximum_size_of_file":"La dimensione massima del file è 50 MB csv o xls. Fino a 5 file contemporaneamente","mb":"MB","med":"Med","mereos_proctoring_portal":"Portale di supervisione Mereos","mereos_settings":"Impostazioni Mereos","mereos_support":"Supporto Mereos","metro_code":"Codice Metro","microphone":"Microfono","microphone_error":"Il microfono non è accessibile. Per utilizzare questa estensione, assicurati che il tuo microfono sia accessibile.","microphone_not_working":"Il microfono non funziona","minimum":"Minimo","minutes":"minuti","mobile_connection_successfull":"Cellulare connesso correttamente","mobile_phone_disconnected":"Telefono cellulare disconnesso","modified_at":"Modificato alle","modify_at":"Modifica alle","month_names":"GenFebMarAprMagGiuLugAgoSetOttNovDic","more_actions":"Altre azioni","moved_away_from_page":"L\'utente si è allontanato dalla pagina dell\'esame","moved_back_to_page":"L\'utente torna alla pagina dell\'esame","multiple_face_detected":"Sono stati rilevati più volti","multiple_people":"Più persone","multiple_people_detected":"Sono state rilevate più persone.","multiple_people_detected_for_more_than_10_seconds":"Più persone rilevate per più di 10 secondi","multiple_people_in_the_screen":"Più persone sullo schermo","multiple_screens":"Schermate multiple","multiple_screens_detected":"Schermate multiple rilevate","my_settings_profiles":"I miei profili delle impostazioni","name":"Nome","name_of_assessment":"Nome della valutazione","name_of_playlist":"Nome della playlist","navigate_up_and_down":"Naviga su e giù","need_help":"Hai bisogno di aiuto?","negative_marks":"Punteggi negativi","new_notification_from_mereos":"Nuova notifica da mereos","new_playlist":"Nuova playlist","next":"Avanti","next_step":"Passo successivo","no":"No","no_access_code_use_mereos":"Se non hai un codice di accesso e non sei al centro di test, puoi sostenere l\'esame usando Mereos.","no_anomalies":"Nessuna anomalia","no_assessment_found":"Nessuna valutazione trovata","no_candidate_found":"Nessun candidato trovato","no_data_found":"Nessun dato trovato","no_filtered_anomalies":"Nessuna anomalia filtrata","no_invites_found":"Nessun invito trovato","no_mircophone_detected":"Nessun microfono rilevato","no_noise_in_room":"Assicurati che la stanza sia ben illuminata e che non ci siano rumori di sottofondo.","no_panel_added_to_the_section":"Nessun pannello aggiunto alla sezione","no_person_detected_come_back_to_assessment":"Nessuna persona rilevata. Torna alla valutazione.","no_person_detected_for_more_than_10_seconds":"Nessuna persona rilevata per più di 10 secondi","no_person_in_the_screen":"Nessuna persona sullo schermo","no_playlist_found":"Nessuna playlist trovata","no_point_in_running_leave_in_time":"Non ha senso correre, devi andartene in tempo","no_rating_available_for_this_section_type":"Nessuna valutazione disponibile per questo tipo di sezione","no_record_found":"Nessun record trovato","no_section_found":"Nessuna sezione trovata","no_session_found":"Nessuna sessione trovata","normal":"Normale","not_fraud":"Non frode","not_invited":"Non invitato","not_viewed":"Non visualizzato","nothing_suspicious_was_noticed":"Non è stato notato nulla di sospetto","notification":"Notifica","notification-histroy":"Cronologia notifiche","notification_not_working":"La notifica non funziona","notifications":"Notifiche","notifications_on_your_phone_should_be_turned_off":"Le notifiche sul telefono devono essere disattivate. Possono interferire con la registrazione del flusso video.","notify_candidate":"Notifica candidato","notify_candidates":"Notifica candidati","number_of_assessment_sections":"Numero di sezioni di valutazione","number_of_sections":"Numero di sezioni","object_detected":"Oggetto rilevato","objective":"Obiettivo","of":"di","okay":"Okay","on_hold":"In attesa","only_one_attempt":"Puoi partecipare a una domanda solo una volta. Non potrai rivederlo in seguito.","only_one_screen":"Solo una schermata","open":"Apri","open_the_mereos_mobile_application":"Apri l\'applicazione Mereos Mobile sul tuo telefono e scansiona questo codice QR per sincronizzare il tuo telefono.","opened":"Aperto","or":"Oppure","other_app_close":"Chiudi applicazioni come Skype, Google Hangouts, ecc. che potrebbero interrompere il test.","overall_gpa":"GPA complessivo","overall_knowledge_rating":"Valutazione delle conoscenze complessive","overall_time_taken":"Tempo complessivo impiegato","overview":"Panoramica","owner":"Proprietario","page_error":"Errore di pagina","page_not_found":"Pagina non trovata","panel_name":"Nome del pannello","password":"Password","password_reset_link_sent":"Un collegamento per la reimpostazione della password è stato inviato alla tua e-mail.","pause":"Pausa","pc_users":"Utenti PC","pending":"In sospeso","per_page":"Per pagina","person_missing":"Persona mancante","persons_eyes_are_moving":"Gli occhi della persona si muovono","persons_head_is_moving":"La testa della persona si muove","phone":"Telefono","phone_number":"Numero di telefono","photo_id":"ID foto","physics":"Fisica","play":"Riproduci","playlist_name":"Nome playlist","playlists":"Playlist","please_add_assessment_duration":"Aggiungi durata valutazione","please_add_atleast_one_item":"Aggiungi almeno un elemento","please_check_your_mic":"Controlla il microfono prima di iniziare la registrazione","please_enable_force_submission\'":"Abilita invio forzato","please_scan_this_qr_code":"Scansiona questo codice QR con il tuo telefono per scaricare l\'applicazione Mereos Mobile.","please_share_entire_screen":"Condividi l\'intero schermo.","please_take_picture_or":"Scatta una foto o","please_unselect_time_region_from_template\'":"Deseleziona la regione oraria dal modello","please_wait":"Attendi...","please_wait_we_processing":"Attendi, stiamo elaborando.","points":"Punti","poor":"Scarso","pop_up":"POP-UP","portuguese_brazil":"Portoghese (Brasile)","positive_marks":"Punteggi positivi","post_instructions_text":"Ecco le istruzioni post-valutazione","postinstructions":"Istruzioni post","pre_configured_behavior":"Scegli un\'impostazione di comportamento preconfigurata o personalizza una qualsiasi delle impostazioni dell\'esame.","preinstructions":"Istruzioni pre","previous_step":"Passaggio precedente","privacy_msg":"Acconsento al trattamento dei miei dati personali per gli scopi specifici\\n menzionati nell\'informativa sulla privacy.","privacy_policy":"Informativa sulla privacy","privacy_policy_msg":"Acconsento al trattamento dei miei dati personali per gli scopi specifici menzionati nell\'informativa sulla privacy.","processed_anomalies":"Anomalie elaborate","processing":"Elaborazione","proctor":"Proctor","proctored_review_will_end_in":"La revisione sorvegliata terminerà tra","proctoring_behavior_settings":"Impostazioni comportamento sorvegliato","proctoring_exam_description":"Le anomalie confrontano le azioni di un candidato con il resto degli esami in classe. Ciò evidenzierà differenze statisticamente significative nel comportamento di un candidato.","proctoring_exam_metrics":"Metriche esame sorvegliato","proctoring_exam_settings":"Impostazioni esame sorvegliato","proctoring_frame_description":"La gravità di ogni metrica imposta il peso del comportamento sospetto in relazione agli altri comportamenti. Queste metriche vengono calcolate con ogni immagine. Ogni caratteristica viene derivata per ogni immagine, indipendentemente dal fatto che le impostazioni siano abilitate o meno. La severità di queste metriche può essere modificata in qualsiasi momento, il che comporterà un ricalcolo della sospettività di un esame sorvegliato.","proctoring_frame_metrics":"Metriche del frame di sorveglianza","proctoring_profile_required":"È richiesto il profilo di sorveglianza","profile_id":"ID profilo","proven_fraud":"Frode comprovata","provider":"Fornitore","published":"Pubblicato","question":"Domanda","question_1_of_20":"DOMANDA 1 DI 20","question_List":"Elenco domande","question_based_stats":"Statistiche basate sulle domande","question_count":"Conteggio domande","question_list":"Elenco domande","question_name":"Nome domanda","question_not_answered":"Non hai risposto a X domande su Y. ","question_view":"Visualizzazione domande","questions":"Domande","questions_attended":"Domanda a cui hai partecipato","questions_uploaded_successFully":"Le domande sono state caricate con successo","quick_filter":"Filtro rapido","quiz_name":"Nome quiz","ram":"RAM","ram_error":"Questo sistema non soddisfa i requisiti di RAM.","ram_min_requirement":"4 GB\\nmeno del 90% di utilizzo della RAM","ram_recommended_requirement":"16 GB\\nmeno del 70% di utilizzo","rate_experience_by_emotion":"Valuta la tua esperienza cliccando sull\'emoticon.","rating":"Valutazione","re_invite":"Reinvita","re_record_audio":"Registra di nuovo l\'audio","recapture":"Ricattura","recommended":"Consigliato","record_audio":"Registra audio","record_not_found":"Nessun record trovato","record_room":"Registra stanza","record_screen":"Registra schermo","record_video":"Registra video","record_web_traffic":"Registra traffico web","recording":"Registrazione","recording_started_successfully":"Registrazione avviata con successo","recording_stopped_successfully":"Registrazione interrotta con successo","recruiter":"Recruiter","refresh":"Aggiorna","register_here":"REGISTRATI QUI","registered_successfully":"Registrazione completata!","reinvite":"Reinvita","reinvite_people":"Reinvita persone","reject":"Rifiuta","rejected":"Rifiutato","rejection":"Rifiuto","reloading_closing_add_partial_data":"Il ricaricamento o la chiusura della finestra potrebbe causare un download parziale del file.","remind_candidate":"Ricorda candidati","remind_candidates":"Ricorda candidati","remind_panel":"Ricorda pannello","reminder":"Promemoria","remote_automate_reuse":"Remoto. Automatizza. Riutilizza.","reports":"Report","required_time":"Tempo richiesto","reset":"Reimposta","reset_email_sent":"Un link per reimpostare la password verrà inviato alla tua e-mail.","reshare_screen":"Condividi di nuovo lo schermo","reshoot_video":"Riprendi il video","results":"Risultati","resume":"Curriculum","resume_doc":"CV","retake":"Riprendi","retake_id_photo":"Riprendi la foto del documento d\'identità","retake_photo":"Riprendi la foto","reuse_the_candidate_data_and_hire_faster":"Riutilizza i dati del candidato e assumi più velocemente","review_q_later":"Per rivedere una domanda in un secondo momento, fai clic sulla casella di controllo \\"Segna per revisione\\". Utilizza i filtri nella schermata Revisione per visualizzare le domande contrassegnate.","roles":"Ruoli","room_id":"ID stanza","room_scan":"Scansione stanza","room_scan_completed":"Scansione stanza completata","room_scanning":"Scansione stanza","roomscan_recordings":"Registrazioni scansione stanza","row":"Riga","satisfied":"Soddisfatto","save":"Salva","save_answer":"La tua risposta non verrà caricata. Fai clic sul pulsante AVANTI per salvare la tua risposta","save_exam_settings":"Salva impostazioni esame","save_information":"Salva informazioni","save_n_publish":"Salva e Pubblica","save_settings_profile":"Salva profilo impostazioni","saved_successfully":"Salvato correttamente","scan_or_download_the_below_qr_code_to":"Scansiona o scarica il codice QR qui sotto per","scan_your_room":"Scansiona la tua stanza a 360°, inclusa la tua area di lavoro","schedule_invite":"Pianifica invito","schedule_live":"Pianifica in diretta","scheduled_at":"Pianificato alle","scheduled_invite":"Invito pianificato","scheduled_time":"Orario pianificato","school":"Scuola","school_name":"Nome scuola","science":"Scienza","score":"Punteggio","screen":"Schermo","screen_record":"Registrazione schermo","screen_recording_window_shared":"Finestra di registrazione dello schermo condivisa","screen_recordings":"Registrazioni dello schermo","screen_resolution":"Risoluzione dello schermo","screen_shared_successfully":"Hai condiviso lo schermo con successo","screen_sharing_stopped":"Condivisione dello schermo interrotta","search":"Cerca","search_an_exam":"Cerca un esame","search_an_exam_taker":"Cerca un candidato all\'esame","search_by":"Cerca per","search_candidate_name_or_location":"Cerca candidato o sede","search_location":"Cerca sede","search_question":"Cerca domanda","search_text":"Cerca testo","section":"Sezione","section1":"Sezione 1","section2":"Sezione 2","section3":"Sezione 3","section4":"Sezione 4","section_activity_required":"Attività richiesta","section_completed_next_to_continue":"Hai completato la sezione. Fai clic su Avanti per continuare.","section_name":"Nome sezione","section_status":"Stato sezione","section_type":"Tipo sezione","sections":"Sezioni","secure_feature":"Funzionalità di sicurezza","security_document":"Documento di sicurezza","see_all_arguments":"Visualizza tutti gli argomenti","see_more":"Visualizza altro","see_support_tags":"Vedi tag di supporto","seems_like_a_fraud":"Sembra una frode","select":"Seleziona","select_a_chat_room_for_messages":"Seleziona una chat room per i messaggi","select_a_question":"Seleziona una domanda","select_a_saved_setting_profile_or_create_new_one":"Seleziona un profilo di impostazione salvato o creane uno nuovo.","select_and_invite_status":"Seleziona e invita lo stato","select_answer_below_from_below":"Seleziona la tua risposta da sotto:","select_camera":"Seleziona telecamera","select_candidates":"Seleziona candidati","select_complete":"SEZIONE COMPLETATA","select_evaluator":"Seleziona valutatore","select_microphone":"Seleziona microfono","select_on_assessments":"Seleziona sulle valutazioni","select_on_assessments_to_duplicate":"Seleziona le valutazioni da duplicare","select_on_playlist_to_duplicate":"Seleziona playlist per duplicazione","select_on_status_to_change":"Seleziona lo stato da modificare","select_preferred_camera_and_microphone":"Seleziona la telecamera e il microfono preferiti.","select_proctor":"Seleziona Proctor","select_profile":"Seleziona profilo","select_role":"Seleziona ruolo","selected":"Selezionato","selection":"Selezione","send":"Invia","send_candidates_reminder":"Invia promemoria candidato","send_invitation":"Invia invito","send_invite":"Invia invito","send_reset_password_link":"Invia collegamento di reimpostazione password","session":"Sessione","session_completed":"La sessione è completata","session_completed_successfully":"La sessione è stata completata con successo","session_duration":"Durata sessione","session_id":"ID sessione","session_initiated":"Sessione avviata","session_started":"La tua sessione inizierà ora.","session_status":"Stato sessione","session_view":"Visualizzazione sessione","sessions":"Sessioni","set_as_default_profile":"Imposta come profilo predefinito","setting_up_your_phone_camera":"Imposta il tuo telefono","settings":"Impostazioni","setup_section":"Sezione di configurazione","several_sections":"Diverse sezioni","share_screen_msg":"Fai clic sul pulsante \\"Fatto\\" dopo aver consentito la condivisione dello schermo.","share_setting":"Impostazioni di condivisione","share_settings":"Impostazioni di condivisione","share_the_assessment":"condividi la valutazione","show_unmatched_attempts":"Mostra tentativi non abbinati","showing_results_for":"Visualizzazione dei risultati per","sign_in":"Accedi","sign_in_with":"Accedi con ","sign_out":"Esci","skills":"Skills","skip":"Salta","skip_question_click_next":"Clicca sul pulsante \\"Next\\" per saltare una domanda. Puoi rivedere le domande saltate usando \\"View Question List\\"","skipped":"Skipped","skipped_question":"domanda saltata","solution":"Solution","some_attribute":"Some Attribute","some_of_the_candidate_start_assessment":"Alcuni candidati iniziano la valutazione Non puoi modificare la valutazione","something_went_wrong":"Qualcosa è andato storto","something_went_wrong_please_contact_support":"Qualcosa è andato storto! Contatta il supporto.","something_went_wrong_please_try_again_later":"Qualcosa è andato storto. Riprova più tardi.","something_went_wrong_please_upload_again":"Qualcosa è andato storto, carica di nuovo","sort_by_last_name":"Ordina per cognome","sound_check":"Controllo audio","sourcer":"Sourcer","spanish":"Spagnolo","speech_detected":"Parole rilevate","speech_is_detected":"Parole rilevate","start":"Inizia","start_and_end_time":"Ora di inizio e fine","start_at":"Inizia alle","start_camera":"Avvia videocamera","start_chat":"Avvia chat","start_date":"Data di inizio","start_date_&_time":"Data e ora di inizio","start_recording":"Avvia registrazione","start_time":"Ora di inizio","start_tour":"Avvia tour","stats":"Statistiche","status":"Stato","step_1":"Passaggio 1","step_2":"Passaggio 2","step_3":"Passaggio 3","step_4":"Passaggio 4","stop_recording":"Interrompi registrazione","student_id":"ID studente","student_identify_verification":"Verifica dell\'identità studente","student_information":"Informazioni studente","studies_at":"Studi presso","subject":"Oggetto","submission_time":"Ora di invio","submit":"Invia","submit_all":"Invia tutto","submit_and_end":"Sei sicuro di voler inviare tutte le risposte e terminare la sezione?","submit_answers":"INVIA TUTTE LE RISPOSTE","summary":"Riepilogo","support_chat":"Chat di supporto","supports_html5_video":"supporta video HTML5.","surname":"Cognome","suspecious":"Sospetto","suspicious_incidents":"Incidenti sospetti","switch_language":"Cambia lingua","synchronisation_mobile":"Sincronizzazione mobile","system_diagnostic":"Diagnostica di sistema","system_diagnostic_msg":"La diagnostica di sistema richiederà solo un momento.","system_diagnostic_passed":"Diagnostica di sistema superata","system_requirement_checking":"Controllo dei requisiti di sistema","system_requirement_checking_msg":"Verificheremo i requisiti minimi del tuo sistema per utilizzare la libreria.\\n Puoi leggere l\'elenco completo dei requisiti tramite","system_requirements":"Verifica dei requisiti di sistema","system_requirements_for_testing":"Requisiti di sistema per i test","t2":"T2","take_a_photo":"Scatta una foto","take_id_photo":"Scatta una foto","take_photo":"Scatta una foto","take_the_superhero_leap_and_hire_fast_with_instahiring":"Fai il salto da supereroe e assumi velocemente con Instahiring.","take_with_mereos":"Scatta con Mereos","template_editing":"Modifica modello","template_id":"ID modello","terms_and_conditions_read":"Termini e condizioni letti","terms_of_use":"Termini di utilizzo","test":"Test","test_translation":"Traduzione di prova","thankyou":"Grazie!","the_maximum_file_size_is":"La dimensione massima del file è","the_questions":"Le domande","the_questions_cant_be_modified_if_the_assessment":"Le domande non possono essere modificate se la valutazione è in stato aperto, poiché ciò avrà un impatto critico sui report dei candidati","this_invitation_has_expired":"Questo invito è scaduto","time":"Tempo","time_required":"Il tempo richiesto è","time_taken":"Tempo impiegato","time_to_answer":"Avrai X minuti per rispondere a Y domande.","time_zone":"Fuso orario","timer_on_screen":"Hai X minuti per rispondere a Y domande. Fai riferimento al timer in alto direttamente sullo schermo.","timezone":"Fuso orario","tips":"Suggerimenti utili:","to_end":"Per terminare","to_search_question_use_filter":"Per cercare una domanda specifica, usa l\'opzione di ricerca e filtri nella sezione Revisione.","to_start":"Per iniziare","total":"Totale","total_questions":"Totale domande","total_score":"Punteggio totale","try_again":"RIPROVA","type":"Digita","type_your_answer_in_space":"Digita la tua risposta nello spazio fornito sul lato destro dello schermo. Se desideri allegare un file, clicca sul link \\"Allega file\\" e invia.","un_publish":"Annulla pubblicazione","unauthorized_access":"Accesso non autorizzato","unauthorized_object_detected_for_more_than_10_seconds":"Oggetto non autorizzato rilevato per più di 10 secondi","unauthorized_object_detected_please_put_it_away":"È stato rilevato un oggetto non autorizzato. Mettilo via","unmarked":"non contrassegnato","unsatisfied":"Insoddisfatto","unselect":"Deseleziona","up_to":"Fino a","update":"Aggiorna","update_assessment":"Aggiorna valutazione","update_candidate":"Aggiorna candidato","update_candidate_details":"Aggiorna dettagli candidato","update_quiz":"Aggiorna il quiz","upload":"Carica","upload_candidate_from":"Carica candidati da","upload_id_image":"Carica/cattura un\'immagine della tua carta d\'identità.","upload_image":"Carica immagine","upload_items":"Carica elementi","upload_resume":"Carica curriculum","upload_speed":"Velocità di caricamento","upload_speed_error":"La velocità di caricamento non è sufficiente per inizia questo esame.","upload_speed_insufficient":"La velocità di upload è insufficiente","upload_your_id_card":"Carica l\'immagine della tua carta d\'identità","upload_your_identity_document":"carica il tuo documento di identità","uploaded":"Caricato","url":"URL","url_filtering":"Filtro URL","use_select_cam_if_not_detected":"Utilizza il menu a discesa \\"Seleziona telecamera\\" per selezionare un\'altra telecamera, nel caso in cui la tua telecamera non venga rilevata automaticamente.","use_select_microphone_if_not_detected":"Utilizza il menu a discesa \\"Seleziona microfono\\", nel caso in cui il tuo microfono non venga rilevato automaticamente.","use_washroom":"Usa il bagno","useful_tips":"Suggerimenti utili:","user":"Utente","user_idle":"Utente inattivo","candidate_interrupted_the_stream":"L\'utente ha interrotto lo streaming!","username":"Nome utente","users":"Utenti","verification_code":"Inserisci il codice di verifica","verification_completed":"Verifica completata","verification_completed_msg":"La verifica è stata completata con successo e tutto è pronto per l\'esame.\\nLeggi e accetta l\'accordo d\'esame e poi continueremo.","video_codec":"Codec video","video_extension":"Estensione video","video_recorded":"Il tuo video potrebbe essere registrato durante questa sessione.","video_recording_msg":"Il video può essere registrato durante questa sessione. Assicurati che la stanza sia sufficientemente illuminata e che non ci siano rumori di sottofondo","view_our":"Visualizza il nostro ","view_question_list":"Visualizza l\'elenco delle domande","view_question_list_button_help":"Il pulsante \\"Visualizza l\'elenco delle domande\\" ti aiuterà a navigare nell\'elenco delle domande.","view_session":"Visualizza la sessione","visible_always":"Visibile sempre","visible_at_the_end":"Visibile alla fine","wait_loading":"Attendi, mentre la tua valutazione si carica.","wait_video_uploading":"Il caricamento del video potrebbe richiedere 10-15 minuti a seconda della velocità di Internet. Quindi attendi che venga visualizzata la schermata successiva.","want_to_capture":"Vuoi catturare un\'immagine? Fai clic qui.","want_to_upload":"Vuoi caricare un\'immagine? Fai clic qui.","webcam":"Webcam","webcam_diagnostics":"Diagnostica webcam","webcam_error":"La webcam non è accessibile. Per usare questa estensione, assicurati che la tua webcam sia accessibile.","webcam_not_working":"La webcam non funziona","webpages_users_access_during_exam":"Pagine web a cui gli utenti possono accedere durante l\'esame","welcome":"BENVENUTO!","welsh":"Gallese","whats_new":"Novità?","whitelist_specific_urls":"URL specifici nella whitelist","wifi_connection":"Connessione Wi-Fi","window_focus_in":"Finestra Focus-In","window_focus_out":"Finestra Focus-Out","windows_10":"Windows 10 (la modalità 10 S non è supportata)","windows_8":"Windows 8 (la modalità Windows 10 S non è supportata)","wired_connection":"Connessione cablata","without_saving":"Continua senza salvare","workspace_checking":"Controllo dell\'area di lavoro","workspace_checking_msg":"Dobbiamo assicurarci che ci sia non ci sono altre persone o oggetti non necessari vicino a te.","write_a_message":"Scrivi un messaggio...","write_your_comment":"Scrivi il tuo commento","yes":"Sì","you_welcome_here":"Sei il benvenuto!","your_assessment_completed":"La tua valutazione è completa.","your_face_must_visible_on_screen":"Il tuo viso deve essere completamente visibile sullo schermo.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"La tua connessione Internet è molto lenta. Assicurati di avere una connessione Internet stabile","your_session_will_end_when_the_time_is_up":"La tua sessione terminerà allo scadere del tempo o quando clicchi su \\"Invia ed esci\\".","your_time_is_valuable":"Il tuo tempo è prezioso","your_warm_pool_may_have_ideal_candidate_to_instahire":"La tua piscina calda potrebbe avere un candidato ideale da Instahire."}')},9197:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"1280x720 resolutie","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 en hoger","1_mbps":"1 Mbps","360_video":"360° video","3_mbps":"3 Mbps","640x480_resolution":"640x480 resolutie","Unpublished":"Niet gepubliceerd","__none__":"--Geen--","access_code":"Toegangscode","account_manager":"Accountmanager","action":"Actie","actions":"Acties","add":"Toevoegen","add_assessment":"Toets toevoegen","add_candidates":"Kandidaten toevoegen","add_description":"Beschrijving toevoegen","add_exam":"Toets toevoegen","add_file":"Bestand toevoegen","add_question":"Vraag toevoegen","add_questions":"Vragen toevoegen","add_quiz":"Toets toevoegen","add_solution":"Oplossing toevoegen","add_url":"URL TOEVOEGEN","advance_filter":"Geavanceerd filteren","advanced_filter_search":"Geavanceerd zoeken","agree_by_clicking":"Door op de knop te klikken, gaat u akkoord met de Algemene Voorwaarden","ai_anomalies":"AI onregelmatigheden","ai_recorder_unknown_violation":"Er is een onbekende onregelmatigheid vastgesteld door AI","all":"Alles","all_questions":"Alle vragen","allow_access_to_popups":"Geef toegang tot uw browser popups, zoals hieronder weergegeven:","allow_interruption":"Sta onderbreking toe","allow_question_skip":"Sta het overslaan van vragen toe","and":"en","anomalies":"Onregelmatigheden","answer":"Antwoord","answer_is_mandatory":"Het is verplicht alle vragen te beantwoorden","answered":"Beantwoord","apply_a_settings_profile_for_this_exam":"Pas een instellingenprofiel toe voor deze toets","apply_filter":"Filter toepassen","archive":"Archiveren","are_you_sure_want_to_leave":"Bent u zeker dat u wilt afsluiten?","are_you_sure_you_want_to_delete_this_candidate":"Bent u zeker dat u deze kandidaat wilt verwijderen?","ask_anything_about_the_extension":"U kunt me alles vragen over de extensie. Hoe kan ik u helpen?","assessment":"Toets","assessment_complete":"TOETS BEËINDIGD","assessment_completed":"De toets is succesvol beëindigd","assessment_date_updated_successfully":"De toetsdatum is met succes aangepast","assessment_duration_invalid_please_contact_support":"De toetsduur is ongeldig. Neem contact op met de support.","assessment_expired":"De toets is verlopen.","assessment_id":"ID toets","assessment_indications_read":"Toetsindicaties zijn gelezen","assessment_invitation":"Toetsuitnodiging","assessment_link":"Toetslink","assessment_list":"Toetslijst","assessment_loaded":"De toets is met succes geladen","assessment_name":"Toetsnaam","assessment_passed":"Toets geslaagd","assessment_preinstructions_read_successfully":"De toetsinstructies zijn gelezen","assessment_restriction":"Beperkingen voor toets","assessment_saved":"De toets is succesvol opgeslagen","assessment_sections":"Toetssecties","assessment_start_in_5":"De toets begint over 5","assessment_stat":"Toetsstatistieken","assessment_status_change":"Wijziging toetsstatus","assessment_tool":"Toetshulpmiddel","assessment_window":"Toetsvenster","assessments":"Toetsen","assign_panel":"Panel toewijzen","assign_proctor":"Proctor toewijzen","assignment_name_required":"De toetsnaam is verplicht","attach_file":"Bestand bijvoegen","attempt":"Poging","attend_test_quitely":"Neem deel aan de toets in een rustige omgeving zonder afleiding.","attending":"Aanwezig","audio_check":"Audiocheck","audio_check_completed":"Audiocheck voltooid","audio_check_msg":"Klik op de knop \'Opnemen\' en lees de onderstaande zin.","audio_detected_click_next":"Op het volgende scherm zullen we uw audio detecteren. Lees onderstaande tips en klik op de knop VOLGENDE.","audio_level":"Audiovolume","audio_recordings":"Audio-opnames","audio_test_failed":"Audiotest mislukt","audio_test_passed":"Audiotest geslaagd","audio_video_recorded":"Deze toets wordt geproctord. Uw audio en video worden tijdens de sessie opgenomen.","automate_the_routine_tasks_employ_your_time_wisely":"Automatiseer de routinetaken, gebruik uw tijd verstandig.","available":"Beschikbaar","back":"Terug","back_to_Instructions":"Terug naar de instructies","back_to_exams":"Terug naar de toetsen","back_to_gradebook":"Terug naar de resultaten","bad":"Slecht","basic_information":"Basisinformatie","be_loud_clear":"Probeer luid en duidelijk te spreken en houd de microfoon dicht bij uw mond.","begin_exam_now":"Ik ga akkoord, begin nu met de toets","block_browser_screenshot":"Schermafbeelding van browser blokkeren","block_screen_recording":"Schermopname blokkeren","body":"Lichaam","bridge_the_talent_and_timezone":"Overbrug het talent en de tijdzone","browse_document":"Het document doorbladeren","browser_anomalies":"Browser-onregelmatigheden","browser_locked_successfully":"Browser succesvol vergrendeld","brussels":"Brussel","bulk_import_items":"Items in bulk importeren","calculator":"Rekenmachine","camera_mic":"Camera & microfoon","camera_recordings":"Camera-opnames","cancel":"Annuleren","cancellation":"Annulatie","candidate":"Kandidaat","candidate_details_cannot_updated":"De kandidatengegevens kunnen niet worden aangepast","candidate_email":"E-mail kandidaat","candidate_group_id":"ID groep","candidate_id_is_uploaded_successfully":"De identiteitskaart van de kandidaat is succesvol geüpload","candidate_identity_card":"Identiteitskaart kandidaat","candidate_invite_assessment_section_id":"Kandidaat uitnodigen toets ID sectie","candidate_list":"Kandidatenlijst","candidate_name":"Naam kandidaat","candidate_photo":"Foto","candidate_photo_captured_successfully":"Uw foto is gemaakt","candidate_photo_uploaded_successfully":"Uw foto is geüpload","candidate_reinvite_successfully":"De kandidaat is succesvol opnieuw uitgenodigd","candidate_resized_window":"De kandidaat heeft de grootte van het browservenster aangepast","candidate_search":"Kandidaten zoeken","candidate_successfully_created":"De kandidaat is met succes aangemaakt","candidate_successfully_updated":"De kandidatengegevens zijn aangepast ","candidate_video_is_uploaded_successfully":"De video van de kandidaat is geüpload","candidates":"Kandidaten","cant_be_modified_assessment_in_open_state":"kan niet worden aangepast als de toets open staat, aangezien dit invloed heeft op de kandidatenrapporten","capture":"Maken","capture_id":"Leg uw ID vast voordat u het formulier begint in te vullen.","capture_image_of_id_card":"Leg een afbeelding van uw identiteitskaart vast","catastrophic":"Catastrofaal","category":"Categorie","center_your_face":"Centreer uw gezicht in het frame en klik op de onderstaande knop.","cg":"CG","change_assessment_status":"Toetsstatus wijzigen","change_candidate_invite_status":"Status kandidaat uitnodigen aanpassen","change_end_time":"Eindtijd aanpassen","change_invite_status":"Status uitnodiging aanpassen","change_role":"Rol aanpassen","change_roles":"Rollen aanpassen","change_start_and_last_date":"Start- en laatste datum aanpassen","change_start_date":"Startdatum aanpassen","change_start_time":"Starttijd aanpassen","change_status":"Status aanpassen","change_type":"Type aanpassen","cheating":"Frauderen","check_your_email":"Controleer uw e-mail","chemisty":"Scheikunde","choose_answer":"In deze sectie moet u het juiste antwoord kiezen uit de gegeven keuzes","chromebook_users":"Chromebook-gebruikers (Alleen voor geautomatiseerd toezicht. Wordt niet ondersteund voor Live Toezicht)","chromebook_users_min_requirement":"Het Chrome-apparaat draait de nieuwste versie van Chrome OS.","chromebook_users_recommended_requirement":"Het Chrome-apparaat draait de nieuwste versie van Chrome OS.","clean_cache":"Cache wissen","clear_filter":"Filter wissen","click_go":"Door op de knop \'STARTEN\' te klikken, gaat u akkoord met de Algemene Voorwaarden","click_here":"Klik hier","click_here_when_done":"Klik hier als u klaar bent","click_ok_to_agree":"Door op volgende te klikken, gaat u akkoord met de Algemene Voorwaarden.","click_start_recording":"KLIK OP OPNAME STARTEN & LEES DE VOLGENDE TEKST","click_to_attempt":"Klik op de vraag om te proberen","click_to_capture":"Klik hier om vast te leggen","click_to_submit_anwsers":"Klik op de knop \'Verzend alle antwoorden\' in het overzichtsscherm om de sectie in te dienen. (Deze stap kan niet worden herhaald)","click_to_upload":"Klik hier om te uploaden","clicking_here":"Klik hier","close":"Sluiten","close_open_tabs":"Open tabbladen sluiten","close_window":"U kunt het venster nu sluiten.","closed":"Gesloten","code":"Code","collapse":"Inklappen","column_visibility":"Kolom zichtbaarheid","comment":"Opmerking","comment_suggestion":"Opmerking/Suggestie","complete":"Beëindigen","complete_assessment":"Toets beëindigen","completed":"Beëindigd","completed_at":"Beëindigd op","configuration":"Configuratie","confirm":"Bevestigen","confirmation_delete_msg":"Bent u zeker dat u deze afspeellijst definitief wilt verwijderen? Deze actie kan niet worden ongedaan gemaakt. ","connection":"Verbonden","connectivity_ports":"Connectiviteitspoorten","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contact","contact_support":"De support contacteren","contact_us":"Neem contact met ons op","content_manager":"Contentmanager","continue":"Doorgaan","conversion_ratio":"Conversieratio","coordinates":"Coördinaten","correct":"Correct","course_id":"ID cursus","cpu":"CPU","cpu_error":"Dit systeem voldoet niet aan de CPU-vereisten.","cpu_min_requirement":"meer dan 1.3 GHz minder dan 50% CPU-gebruik","cpu_recommended_requirement":"meer dan 2.3 GHz minder dan 85% CPU-gebruik","create":"Aanmaken","create_a_panel":"Panel aanmaken","create_a_playlist":"Afspeellijst aanmaken","create_account":"Account aanmaken","create_an_account":"Maak een account aan","create_an_assessment":"Toets aanmaken","create_assessment":"Toets aanmaken","create_candidate":"Kandidaat aanmaken","create_panel":"Panel aanmaken","create_playlist":"Afspeellijst aanmaken","create_quiz":"Quiz aanmaken","created_at":"Aangemaakt op","creation_date":"Aangemaakt op","current_invites_status":"Huidige uitnodigingsstatus","customize_proctoring_options_below":"Pas uw toetservaring aan door een van de toezichtopties hieronder te kiezen.","dashboard":"Dashboard","date":"Datum","deadline":"Deadline","delete":"Verwijderen","delete_assessment":"Toets verwijderen","delete_candidate":"Kandidaat verwijderen","delete_playlist":"Afspeelllijst verwijderen","description":"Beschrijving","description_cant_be_empty":"De beschrijving mag niet leeg zijn.","description_of_the_scam":"Beschrijving van de fraudepoging","desktop":"Bureaublad","desktop_error":"Er is een ander bureaublad-scherm gedetecteerd. Zorg ervoor dat u het andere scherm hebt losgekoppeld.","detail_view":"Detailweergave","detailed_view":"Gedetailleerde weergave","detect_resizing_of_window":"Detecteren van het aanpassen van het venster","detect_unfocus":"Detecteren van het verlies van focus","detected_face_successfully":"Het gezicht van de kandidaat is met succes gedetecteerd.","detected_for_more_than_10_seconds":"Gedetecteerd voor meer dan 10 seconden","detecting_audio":"Audio detecteren","detecting_face":"Gezicht detecteren…","detection_time":"Detectietijd","disable":"Uitschakelen","disable_clipboard":"Klembord uitschakelen van het klembord","disable_downloading":"Downloaden uitschakelen","disable_function_keys":"Functietoetsen uitschakelen","disable_keyboard_shortcuts":"Toetsenbord sneltoetsen uitschakelen","disable_new_tabs":"Nieuwe tabbladen uitschakelen","disable_printing":"Afdrukken uitschakelen","disable_right_click":"Rechtermuisklik uitschakelen","disable_switch_to_apps":"Switchen naar apps uitschakelen","disable_tempering":"Bewerken uitschakelen","discard":"Negeren","display_help_icons":"Help-iconen weergeven","display_options":"Weergaveopties","display_potential_hardware_issues":"Potentiële hardwareproblemen tonen","display_suspicious_ids":"Verdachte ID\'s tonen","do_not_lock_your_phone":"Vergrendel u telefoon niet, u verliest uw verbinding als uw scherm vergrendeld wordt.","do_you_really_want_to_delete_the_grade":"Bent u zeker dat u de score wilt verwijderen?","do_you_want_to_change_assessment_end_date_&_time":"Wilt u de einddatum en -tijd van de toets aanpassen?","done":"Klaar","dont_have_a_template":"Heeft u geen sjabloon?","dont_have_email":"Heeft u geen e-mailadres?","dont_have_email_id":"Heeft u geen e-mailadres?","dont_have_phone_number":"Heeft u geen telefoonnummer?","dont_see_yourself_above":"Ziet u zichzelf niet hierboven?","don’t_move_microphone":"Verander de positie van de microfoon niet tijdens de toets.","download":"Downloaden","download_report":"Rapport downloaden","download_speed":"Downloadsnelheid","download_speed_error":"Uw internetverbinding is niet voldoende snel voor de juiste werking van de extensie.\\n Zorg ervoor dat uw internetverbinding snel genoeg is.","download_speed_insufficient":"De downloadsnelheid is onvoldoende","download_the_app":"Download de app","draft":"Klad","drag_&_drop_your_document":"Sleep uw document hier","drag_n_drop_your_document_or":"Sleep uw document hier of","drop_the_files_here":"Sleep uw bestanden hier","dual_screen_detected":"Dubbele schermen gedetecteerd","duplicate_assessment":"Toets dupliceren","duplicate_playlist":"Afspeellijst dupliceren","duration":"Duur","duration_taken":"Benodigde duur","duration_time":"Tijdsduur","during_your_assessment":"Tijdens uw toets","dutch":"Nederlands","eassy_test":"Essay toets","edbs":"EDBS","edit":"Aanpassen","edit_assessment":"Toets aanpassen","edit_column":"Kolom bewerken","edit_playlist_settings":"Instellingen afspeellijst aanpassen","edit_profile_for_later_use":"Profiel aanpassen voor later gebruik","edit_settings":"Instellingen aanpassen","edit_template":"Sjabloon bewerken","email":"E-mail","email_id":"E-mailadres","email_or_password_wrong":"Uw e-mailadres of wachtwoord is onjuist","email_reminder_to_selected_candidate":"Er wordt een e-mailherinnering gestuurd naar de geselecteerde kandida(a)t(en)","email_templates":"E-mailsjablonen","en":"EN","enable":"Inschakelen","enable_javascript":"Om deze video te bekijken, moet u JavaScript inschakelen en uw browser updaten.","enabled":"Ingeschakeld","end":"Einde","end_at":"Eindigt om","end_date_&_time":"Einddatum & tijd","end_date_greater_start_date":"De einddatum moet later zijn dan de startdatum","end_section_description":"Uw sessie is afgelopen. Klik op Volgende om naar de volgende stap te gaan.","end_time":"Eindtijd","english":"Engels","english_rating":"Evaluatie Engels","ensure_sharing_your_screen":"Zorg ervoor dat het delen van uw scherm is toegestaan.","enter":"Invullen","enter_access_code":"Vul toegangscode in","enter_code":"Vul code in","enter_code_sent_to_email":"Vul de verificatiecode in die naar uw e-mailadres is gestuurd","enter_detail":"VUL UW GEGEVENS IN","enter_email_id":"Vul e-mailadres in","enter_first_name":"Vul voornaam in","enter_group_name":"Vul groepsnaam in","enter_surname":"Vul achternaam in","enter_your_email":"Vul uw e-mail in","enter_your_first_name":"Vul uw voornaam in","enter_your_last_name":"Vul uw achternaam in","enter_your_password":"Vul uw wachtwoord in","enter_your_phone_number":"Vul uw telefoonnummer in","essay":"Essay","europe":"Europa","evaluate":"Beoordelen","evaluate_full_session":"Volledige sessie beoordelen","evaluate_session":"Sessie beoordelen","evaluation_completed":"Uw beoordeling is voltooid","evaluation_expired":"De beoordeling is verlopen.","evaluation_feedback":"Geef uw beoordeling voor deze sessie, is er fraude gepleegd of niet?","evaluator":"Beoordelaar","event":"Event","event_details":"Details event","event_name":"Naam event","events":"Events","exam_end":"Einde van de toets","exam_instructions_li_1":"Beweeg uw webcam 15-20 seconden om uw volledige werkruimte te tonen.","exam_instructions_li_2":"Klik op de \'Volgende\' knop nadat u uw werkruimte hebt gezien.","exam_instructions_text":"Bereid nu uw werkomgeving voor","exam_prep_msg":"Houd een identiteitsbewijs met pasfoto bij de hand.\\nAls u uw identiteitsbewijs moet halen of een korte pauze moet nemen, doe dat dan nu.","exam_preparation":"Voorbereiding toets","exam_preparation_msg":"De software zal uw toetssessie opnemen voor een mogelijke beoordeling.\\nDeze informatie is versleuteld en kan alleen worden bekeken door geautoriseerde personen van uw organisatie. De opname begint nadat uw systeem en omgeving zijn gecontroleerd.","exam_preparation_tnc":"Ik ga akkoord met en begrijp de toetsregels voordat ik begin met de toets met de extensie.","exam_security_level":"Beveiligingsniveau van de toets (gebaseerd op geselecteerde opties):","exam_settings_summary":"Samenvatting van de toetsinstellingen","exam_start":"Start toets","exam_taker":"Naam kandidaat","exam_taker_information":"Informatie kandidaat","exam_was_fair":"De toets verliep zonder fraude","exam_was_fraud":"De toets verliep met fraude","example_tutorial":"Uw telefoon moet opnemen vanuit deze kijkhoek","exams":"Toets","export":"Exporteren","export_pdf_report":"PDF rapport exporteren","extend_date":"Datum verlengen","extend_invite_date":"Uitnodigingsdatum verlengen","extend_last_date":"Laatste datum verlengen","extension":"Extensie","extent_Date":"Datum verlengen","extent_date":"Datum verlengen","external_id":"Extern ID","face_detected_click_next":"Op het volgende scherm detecteren we uw gezicht. Lees onderstaande tips en klik op de knop VOLGENDE  om verder te gaan.","face_not_detected":"Uw gezicht werd niet gedetecteerd. Probeer het opnieuw.","face_photo":"Foto gezicht","failed":"Mislukt","fair":"Eerlijk","feedback_added_successfully":"De feedback is toegevoegd","file_is_being_uploaded":"Het bestand wordt geüpload","file_is_not_being_uploaded":"Het bestand wordt niet geüpload","files_at_once":"Bestanden tegelijk","filter":"Filteren","final_score":"Eindscore","final_section":"Laatste sectie","final_status":"Laatste status","finish_assessment_description":"U kunt nu deze pagina verlaten.","finish_assessment_title":"Beoordeling voltooid","first_name":"Voornaam","flight_checked":"Pre Flight Check Geslaagd!","for_more_information":"voor meer informatie.","force_full_screen":"Volledig scherm forceren","forgot_your_password":"Wachtwoord vergeten?","fox_jumped_over_dog":"Een snelle bruine vos sprong over een luie hond.","fr":"FR","fraud":"Fraude","fraud_report":"Frauderapport","fraud_status":"Fraudestatus","french":"Frans","french_rating":"Beoordeling Frans","full_face_visible":"Positioneer de camera zodat uw volledige gezicht zichtbaar is in de preview","gaze_away":"Kijk weg","gdpa_controls":"GPDR regels","general":"Algemeen","geography":"Geografie","german":"Duits","get_comfy":"Maak het u comfortabel","get_ready":"Maak u klaar","get_ready_for_identity_validation":"Maak u klaar voor de identiteitscontrole.","get_started":"STARTEN","get_water":"Neem water","go":"STARTEN","go_back":"Terug","good":"Goed","good_light":"Zorg voor voldoende goed licht in de kamer","got_it":"Begrepen","grade_book_tour":"Rondleiding cijferboek","great":"Geweldig","group_id":"ID groep","group_name":"Naam groep","guidelines":"PLATFORMRICHTLIJNEN","hardware_test":"HARDWARE TEST","hardware_test_face_detection":"HARDWARE TEST (Gezichtsherkenning)","havent_selected_any_one":"U hebt geen van deze velden geselecteerd.","head_movement":"Hoofdbeweging","help":"Help","here_is_some_information_regarding_the_mereos_platform":"Hier vindt u meer informatie over het Mereos-platform:","hey_mate_ready_for_test_it_starting_soon":"Klaar voor de toets? Hij start meteen.","hi_im_your_support_manager":"Hallo, ik ben uw assistent voor support","hi_there":"Hallo","hide_grades":"Scores verbergen","hide_id":"ID verbergen","hide_location":"Locatie verbergen","hide_names":"Namen verbergen","hide_screen":"Scherm verbergen","hide_video":"Video verbergen","high":"Hoog","highly_satisfied":"Zeer tevreden","highly_unsatisfied":"Zeer ontevreden","hiring_manager":"HR manager","hold":"Vasthouden","hold_your_photo_id_into_the_frame":"Hou uw identiteitskaart in het frame en klik op de knop \'Foto maken\'.","home_page":"Homepagina","i_already_have_the_app":"Ik heb de app al","i_dont_have_the_app":"Ik heb de app niet","i_downloaded_the_app":"Ik heb de app gedownload","i_have_read_and_accept_the":"Ik ga akkoord met de","icc_msg":"Hou uw identiteitskaart klaar.\\nAls u ze nog moet halen of een korte pauze nodig hebt, doe dit dan nu.","id":"ID","id_being_verified":"Even geduld. De identiteitskaart wordt geverifieerd.","id_card":"Identiteitskaart","id_not_exists":"De uitnodiging is niet meer geldig. Neem contact op met de organisatie.","id_not_verified":"De identiteitskaart kan niet worden geverifieerd. Probeer het opnieuw.","id_number":"Nummer identiteitskaart","id_photo":"Foto identiteitskaart","id_successfully_verified":"De identiteitskaart is geverifieerd.","identity_card_verified_successfully":"Identiteitskaart geverifieerd","identity_validation":"Identiteitscontrole","ignored":"Genegeerd","import":"Importeren","import_and_invite":"Importeren en uitnodigen","import_candidates":"Kandidaten importeren","in_order_to_carry_out_your_assessment":"Om uw toets af te leggen, heeft u een smartphone nodig om uzelf vanuit een tweede hoek op te nemen. Installeer de Mereos Mobile-app op uw telefoon.","in_process":"In behandeling","incident_Level":"Incidentniveau","incident_level":"Incidentniveau","incident_score":"Incidentscore","incognito_error":"Deze extensie mag niet in incognitomodus werken.\\nPas dit aan en vernieuw de pagina.","incognito_mode":"Incognitomodus","incognito_mode_requirement_checking":"Controle incognitomodus","incognito_mode_requirement_checking_msg":"Deze extensie moet in incognitomodus werken om veilige toetsbewaking te garanderen.\\nVoor meer informatie","incorrect":"Fout","incorrect_end_date_and_time":"Foute einddatum en tijd","indications_li_1":"De timer bevindt zich bovenaan het scherm.","indications_li_2":"Klik op de linkerpijl om terug te gaan naar de vorige vraag.","indications_li_3":"Klik op \\"Volgende\\" om de vraag over te slaan.","indications_li_4":"U kunt niet-beantwoorde vragen aan het einde van de toets bekijken.","indications_li_5":"Om een vraag later te herbekijken, vinkt u het \'Vraag markeren\' aan.","indications_li_6":"Uw sessie eindigt wanneer u op \'Alle antwoorden verzenden\' klikt.","indications_title":"Platforminformatie","infinite_pdf":"Onbeperkte PDF","initial_system_check_passed":"Systeemcontrole geslaagd. Uw toets begint zo.","initial_system_check_passed_get_ready_for_identity_validation":"Systeemcontrole geslaagd. Maak u klaar voor de identiteitscontrole.","instruction":"Instructie","instructions":"Instructies","internet_connection":"Internetverbinding","internet_connection_not_working":"Uw internetverbinding werkt niet","internet_download_speed":"Internet downloadsnelheid","internet_speed_is_too_low":"Internetsnelheid is te laag","internet_upload_speed":"Internet uploadsnelheid","interview":"Interview","invalid_email":"Ongeldig e-mailadres","invalid_phone_number":"Ongeldig telefoonnummer","invitation":"Uitnodiging","invitation_id":"ID uitnodiging","invitation_incomplete_contact_support":"Deze uitnodiging is niet compleet. Neem contact op met de support?","invitation_successfully_created":"Uitnodiging aangemaakt","invitations":"Uitnodigingen","invite":"Uitnodigen","invite_by_groups":"Uitnodigen per groep","invite_name":"Naam uitnodiging","invite_people":"Nodig mensen uit","invite_search":"Uitnodigen zoeken","invite_status":"Uitnodigingsstatus","invite_to_assessment":"Uitnodigen voor toets","invited":"Uitgenodigd","invited_at":"Uitgenodigd om","invited_for_evaluation":"U bent uitgenodigd voor een toets","invited_to_assessment_for":"Je bent uitgenodigd voor een toets voor","invites":"Uitnodigingen","ip_address":"IP-adres","is_the_camera_feedback_good":"Zorg ervoor dat u uw telefoon zo positioneert dat uw scherm, handen en de bovenkant van uw hoofd zichtbaar zijn.","it_looks_suspicious":"Het lijkt verdacht","italian":"Italiaans","just_remembered":"Net herinnerd?","keep_mic_close":"Houd de microfoon dicht bij uw mond en verander de positie niet totdat de test is voltooid.","last_name":"Familienaam","leave_your_comment_here":"Vul hier uw opmerking in","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Live","load_full_question":"De volledige vraagweergave wordt geladen.","loading":"Laden","location":"Locatie","location_enabled":"Locatie ingeschakeld","location_error":"De locatie is niet toegankelijk. Om deze extensie te gebruiken, moet uw locatie toegankelijk zijn.","location_not_working":"Locatie delen werkt niet","lock_down_options":"Vergrendelingsopties","log_out":"Uitloggen","login_failed":"Controleer uw e-mail of wachtwoord","login_successfully":"U bent met succes ingelogd","longer_time_message":"Het duurt langer dan normaal. Even geduld a.u.b...","look_out_for_the_best_talent_across_the_globe_remotely":"Zoek wereldwijd naar het beste talent - op afstand.","low":"Laag","mac_users":"Mac-gebruikers","macos_10_13":"macOS 10.13 (Oudste versie die nog wordt onderhouden)","macos_10_15":"macOS 10.15","made_changes":"Het lijkt erop dat u enkele wijzigingen hebt aangebracht.","maps":"Kaarten","mark_for_review":"Markeren voor beoordeling","marked":"gemarkeerd","marked_for_review":"Gemarkeerd voor beoordeling","master_hiring_manager":"Hoofd HR manager","master_recruiter":"Hoofd recruiter","mathematics":"Wiskunde","maths":"Wiskunde","maximum_section_time":"Maximale sectietijd","maximum_size_of_file":"De maximale bestandsgrootte is 50 MB (csv of xls, tot 5 bestanden tegelijk)","mb":"MB","med":"Gem.","mereos_proctoring_portal":"Mereos Proctoring Portaal","mereos_settings":"Mereos instellingen","mereos_support":"Mereos ondersteuning","metro_code":"Metrocode","microphone":"Microfoon","microphone_error":"De microfoon is niet toegankelijk. Zorg ervoor dat uw microfoon toegankelijk is om deze extensie te gebruiken.","microphone_not_working":"Uw microfoon werkt niet","minimum":"Minimaal","minutes":"minuten","mobile_connection_successfull":"Mobiele verbinding succesvol","mobile_phone_disconnected":"Mobiele telefoon is losgekoppeld","modified_at":"Aangepast op","modify_at":"Aanpassen in","month_names":"JanFebMarAprMeiJunJulAugSepOktNovDec","more_actions":"Meer acties","moved_away_from_page":"De gebruiker verliet de toetspagina","moved_back_to_page":"De gebruiker keerde terug naar de toetspagina","multiple_face_detected":"Meerdere gezichten gedetecteerd","multiple_people":"Meerdere mensen","multiple_people_detected":"Meerdere mensen gedetecteerd","multiple_people_detected_for_more_than_10_seconds":"Meerdere mensen gedetecteerd voor meer dan 10 seconden","multiple_people_in_the_screen":"Meerdere mensen op het scherm","multiple_screens":"Meerdere schermen","multiple_screens_detected":"Meerdere schermen gedetecteerd","my_settings_profiles":"Mijn persoonlijke instellingen","name":"Naam","name_of_assessment":"Naam van de toets","name_of_playlist":"Naam van de afspeellijst","navigate_up_and_down":"Navigeer omhoog en omlaag","need_help":"Hulp nodig?","negative_marks":"Negatieve punten","new_notification_from_mereos":"Nieuwe melding van Mereos","new_playlist":"Nieuwe afspeellijst","next":"Volgende","next_step":"Volgende stap","no":"Nee","no_access_code_use_mereos":"Als u geen toegangscode hebt en niet in het examencentrum bent, kunt de toets afleggen met Mereos.","no_anomalies":"Geen onregelmatigheden","no_assessment_found":"Geen toets gevonden","no_candidate_found":"Geen kandidaat gevonden","no_data_found":"Geen gegevens gevonden","no_filtered_anomalies":"Geen onregelmatigheden","no_invites_found":"Geen uitnodigingen gevonden","no_mircophone_detected":"Geen microfoon gedetecteerd","no_noise_in_room":"Zorg ervoor dat uw kamer goed verlicht is en er geen achtergrondgeluiden zijn.","no_panel_added_to_the_section":"Geen panel toegevoegd aan de sectie","no_person_detected_come_back_to_assessment":"Er is geen persoon gedetecteerd. Kom terug naar de toets.","no_person_detected_for_more_than_10_seconds":"Er is geen persoon gedetecteerd voor meer dan 10 seconden","no_person_in_the_screen":"Geen persoon op het scherm","no_playlist_found":"Geen afspeellijst gevonden","no_point_in_running_leave_in_time":"Het heeft geen zin om u te haasten, u moet op tijd vertrekken","no_rating_available_for_this_section_type":"Geen beoordelingen beschikbaar voor dit sectietype","no_record_found":"Geen record gevonden","no_section_found":"Geen sectie gevonden","no_session_found":"Geen sessie gevonden","normal":"Normaal","not_fraud":"Geen fraude","not_invited":"Niet uitgenodigd","not_viewed":"Niet bekeken","nothing_suspicious_was_noticed":"Er werd niets verdachts opgemerkt","notification":"Melding","notification-histroy":"Historiek meldingen ","notification_not_working":"Meldingen werken niet","notifications":"Meldingen","notifications_on_your_phone_should_be_turned_off":"De meldingen op uw telefoon moeten uitgeschakeld zijn. Ze kunnen de opname van de videostream verstoren.","notify_candidate":"De kandidaat verwittigen","notify_candidates":"De kandidaten verwittigen","number_of_assessment_sections":"Aantal beoordelingssecties","number_of_sections":"Aantal secties","object_detected":"Object gedetecteerd","objective":"Meerkeuzevraag","of":"van","okay":"OK","on_hold":"In de wacht","only_one_attempt":"U kunt een vraag maar één keer beantwoorden. U kunt deze later niet aanpassen.","only_one_screen":"Slechts één scherm","open":"Openen","open_the_mereos_mobile_application":"Open de Mereos mobiele applicatie op uw telefoon en scan deze QR-code.","opened":"Geopend","or":"Of","other_app_close":"Sluit apps zoals Skype, Google Hangouts, etc., die de toets kunnen onderbreken.","overall_gpa":"Algemeen gemiddelde","overall_knowledge_rating":"Algemene kennisbeoordeling","overall_time_taken":"Totale tijd gespendeerd","overview":"Overzicht","owner":"Eigenaar","page_error":"Paginafout","page_not_found":"Pagina niet gevonden","panel_name":"Panelnaam","password":"Wachtwoord","password_reset_link_sent":"Er is een link verstuurd naar uw e-mailadres om het wachtwoord te herstellen. ","pause":"Pauzeren","pc_users":"PC-gebruikers","pending":"In afwachting","per_page":"Per pagina","person_missing":"Persoon ontbreekt","persons_eyes_are_moving":"De ogen van de persoon bewegen","persons_head_is_moving":"Het hoofd van de persoon beweegt","phone":"Telefoon","phone_number":"Telefoonnummer","photo_id":"Identiteitskaart","physics":"Natuurkunde","play":"Afspelen","playlist_name":"Naam afspeellijst","playlists":"Afspeellijsten","please_add_assessment_duration":"Voeg de toetsduur toe","please_add_atleast_one_item":"Voeg minimaal één item toe","please_check_your_mic":"Controleer uw microfoon voordat u de opname start","please_enable_force_submission\'":"Geforceerd indienen inschakelen","please_scan_this_qr_code":"Scan deze QR-code met uw telefoon om de Mereos mobiele applicatie te downloaden.","please_share_entire_screen":"Deel het volledige scherm","please_take_picture_or":"Maak een foto of","please_unselect_time_region_from_template\'":"Deselecteer de tijdzone uit de sjabloon","please_wait":"Even geduld...","please_wait_we_processing":"Even geduld...","points":"Punten","poor":"Slecht","pop_up":"POP-UP","portuguese_brazil":"Portugees (Brazilië)","positive_marks":"Positieve punten","post_instructions_text":"Hier zijn de instructies na de toets","postinstructions":"Instructies na de toets","pre_configured_behavior":"Kies een vooraf geconfigureerde instelling of pas de toetsinstellingen zelf aan.","preinstructions":"Instructies vooraf","previous_step":"Vorige stap","privacy_msg":"Ik geef toestemming voor de verwerking van mijn persoonsgegevens voor de specifieke doeleinden die in het privacybeleid worden vermeld.","privacy_policy":"Privacybeleid","privacy_policy_msg":"Ik geef toestemming voor de verwerking van mijn persoonsgegevens voor de specifieke doeleinden die in het privacybeleid worden vermeld.","processed_anomalies":"Verwerkte onregelmatigheden","processing":"Verwerken","proctor":"Proctor","proctored_review_will_end_in":"De geproctorde toets eindigt over","proctoring_behavior_settings":"Proctoring instellingen","proctoring_exam_description":"Onregelmatigheden vergelijken de acties van een testpersoon met de rest van de kandidaten. Dit toont statistisch significante verschillen in het gedrag van een testpersoon.","proctoring_exam_metrics":"Proctoring toetsstatistieken","proctoring_exam_settings":"Proctoring Toetsinstellingen","proctoring_frame_description":"De ernst van elke metriek bepaalt het gewicht van verdacht gedrag ten opzichte van ander gedrag. Deze statistieken worden berekend bij elke afbeelding. Elke eigenschap wordt afgeleid voor elke afbeelding, ongeacht of de instelling is ingeschakeld of niet. De ernst van deze statistieken kan op elk moment worden gewijzigd, wat resulteert in een herberekening van het verdacht gedrag in een gecontroleerde toets.","proctoring_frame_metrics":"Proctoring Framestatistieken","proctoring_profile_required":"Proctoringprofiel is verplicht","profile_id":"ID profiel","proven_fraud":"Bewezen fraude","provider":"Provider","published":"Gepubliceerd","question":"Vraag","question_1_of_20":"VRAAG 1 VAN 20","question_List":"Vragenlijst","question_based_stats":"Vraaggebaseerde statistieken","question_count":"Aantal vragen","question_list":"Vragenlijst","question_name":"Naam vraag","question_not_answered":"U hebt X van de Y vragen niet beantwoord.","question_view":"Vraagweergave","questions":"Vragen","questions_attended":"Beantwoorde vragen","questions_uploaded_successFully":"Vragen met succes geüpload","quick_filter":"Snelle filter","quiz_name":"Naam quiz","ram":"RAM","ram_error":"Dit systeem voldoet niet aan de RAM-vereisten.","ram_min_requirement":"4 GB\\nminder dan 90% RAM-gebruik","ram_recommended_requirement":"16 GB\\nminder dan 70% gebruik","rate_experience_by_emotion":"Beoordeel uw ervaring door op de emoticon te klikken.","rating":"Beoordeling","re_invite":"Opnieuw uitnodigen","re_record_audio":"Opnieuw opnemen","recapture":"Opnieuw vastleggen","recommended":"Aanbevolen","record_audio":"Opnemen van audio","record_not_found":"Geen records gevonden","record_room":"Opname werkruimte","record_screen":"Scherm opnemen","record_video":"Video opnemen","record_web_traffic":"Webverkeer opnemen","recording":"Opnemen","recording_started_successfully":"Opname succesvol gestart","recording_stopped_successfully":"Opname succesvol gestopt","recruiter":"Recruiter","refresh":"Vernieuwen","register_here":"HIER REGISTREREN","registered_successfully":"Succesvol geregistreerd","reinvite":"Opnieuw uitnodigen","reinvite_people":"Mensen opnieuw uitnodigen","reject":"Weigeren","rejected":"Geweigerd","rejection":"Weigering","reloading_closing_add_partial_data":"Het browservenster opnieuw laden of sluiten kan leiden tot een gedeeltelijke download van het bestand.","remind_candidate":"De kandidaat herinnneren","remind_candidates":"De kandidaten herinnneren","remind_panel":"Het panel herinneren","reminder":"Herinnering","remote_automate_reuse":"Afstand. Automatiseren. Hergebruiken.","reports":"Rapporten","required_time":"Vereiste tijd","reset":"Resetten","reset_email_sent":"Een link om uw wachtwoord te resetten is naar uw e-mail gestuurd.","reshare_screen":"Opnieuw delen van het scherm","reshoot_video":"Opnieuw opnemen","results":"Resultaten","resume":"Ga verder","resume_doc":"CV","retake":"Opnieuw maken","retake_id_photo":"Opnieuw proberen","retake_photo":"Opnieuw proberen","reuse_the_candidate_data_and_hire_faster":"Hergebruik de kandidaatgegevens en huur sneller in","review_q_later":"Om een vraag later te beoordelen, klikt u op \'Markeren voor beoordeling\'. Gebruik de filters in het beoordelingsscherm om de gemarkeerde vragen te bekijken.","roles":"Rollen","room_id":"ID werkruimte","room_scan":"Scan werkruimte","room_scan_completed":"Scan werkruimte voltooid","room_scanning":"Werkruimte aan het scannen","roomscan_recordings":"Opnames scan werkkruimte","row":"Rij","satisfied":"Tevreden","save":"Opslaan","save_answer":"Uw antwoord wordt niet geüpload. Klik op de knop VOLGENDE om uw antwoord op te slaan","save_exam_settings":"Toetsinstellingen opslaan","save_information":"Informatie opslaan","save_n_publish":"Opslaan & publiceren","save_settings_profile":"Instellingen opslaan","saved_successfully":"Succesvol opgeslagen","scan_or_download_the_below_qr_code_to":"Scan of download de onderstaande QR-code om","scan_your_room":"Scan uw werkruimte 360° inclusief uw werkblad","schedule_invite":"Uitnodiging plannen","schedule_live":"Live plannen","scheduled_at":"Gepland om","scheduled_invite":"Geplande uitnodiging","scheduled_time":"Geplande tijd","school":"Organisatie","school_name":"Naam van de organisatie","science":"Wetenschap","score":"Score","screen":"Scherm","screen_record":"Schermopname","screen_recording_window_shared":"Opgenomen scherm gedeeld","screen_recordings":"Schermopnames","screen_resolution":"Schermresolutie","screen_shared_successfully":"U hebt uw scherm succesvol gedeeld","screen_sharing_stopped":"Scherm delen gestopt","search":"Zoeken","search_an_exam":"Toets zoeken","search_an_exam_taker":"Kandidaat zoeken","search_by":"Zoeken op","search_candidate_name_or_location":"Kandidaat of locatie zoeken","search_location":"Locatie zoeken","search_question":"Vraag zoeken","search_text":"Tekst zoeken","section":"Sectie","section1":"Sectie 1","section2":"Sectie 2","section3":"Sectie 3","section4":"Sectie 4","section_activity_required":"Activiteit is verplicht","section_completed_next_to_continue":"U hebt de sectie voltooid. Klik op Volgende om door te gaan.","section_name":"Sectienaam","section_status":"Sectiestatus","section_type":"Sectietype","sections":"Secties","secure_feature":"Beveiligde functie","security_document":"Beveiligingsdocument","see_all_arguments":"Alle argumenten bekijken","see_more":"Meer zien","see_support_tags":"Supportlabels bekijken","seems_like_a_fraud":"Lijkt op fraude","select":"Selecteren","select_a_chat_room_for_messages":"Een chatroom voor berichten selecteren","select_a_question":"Een vraag selecteren","select_a_saved_setting_profile_or_create_new_one":"Selecteer een opgeslagen profiel of maak een nieuw aan.","select_and_invite_status":"Status selectie en uitnodiging ","select_answer_below_from_below":"Selecteer uw antwoord hieronder:","select_camera":"Camera selecteren","select_candidates":"Kandidaten selecteren","select_complete":"SECTIE VOLTOOID","select_evaluator":"Beoordelar selecteren","select_microphone":"Microfoon selecteren","select_on_assessments":"Toetsen selecteren","select_on_assessments_to_duplicate":"Selecteer een toets om te dupliceren","select_on_playlist_to_duplicate":"Selecteer afspeellijst om te dupliceren","select_on_status_to_change":"Selecteer de status die u wilt aanpassen","select_preferred_camera_and_microphone":"Selecteer de gewenste camera en microfoon.","select_proctor":"Selecteer de proctor","select_profile":"Profiel selecteren","select_role":"Rol selecteren","selected":"Geselecteerd","selection":"Selectie","send":"Verzenden","send_candidates_reminder":"Herinnering sturen naar kandidaat","send_invitation":"Uitnodiging sturen","send_invite":"Uitnodiging sturen","send_reset_password_link":"Stuur een link om het wachtwoord opnieuw in te stellen","session":"Sessie","session_completed":"Sessie is beëindigd","session_completed_successfully":"Sessie met succes beëindigd","session_duration":"Sessieduur","session_id":"ID sessie","session_initiated":"Sessie gestart","session_started":"Uw sessie begint nu.","session_status":"Sessiestatus","session_view":"Sessieweergave","sessions":"Sessies","set_as_default_profile":"Instellen als standaardprofiel","setting_up_your_phone_camera":"Uw telefooncamera instellen","settings":"Instellingen","setup_section":"Sectie instellen","several_sections":"Verschillende secties","share_screen_msg":"Klik op de knop \'Klaar\' nadat u het delen van uw scherm hebt toegestaan.","share_setting":"Instellingen voor het delen","share_settings":"Instellingen delen","share_the_assessment":"Toets delen","show_unmatched_attempts":"Foute pogingen tonen","showing_results_for":"Resultaten tonen van","sign_in":"Inloggen","sign_in_with":"Inloggen met","sign_out":"Uitloggen","skills":"Vaardigheden","skip":"Overslaan","skip_question_click_next":"Klik op de knop \'Volgende\' om een vraag over te slaan. U kunt de overgeslagen vragen opnieuw bekijken via \'Vragenlijst bekijken\'.","skipped":"Overgeslagen","skipped_question":"vraag overgeslagen","solution":"Oplossing","some_attribute":"Een attribuut","some_of_the_candidate_start_assessment":"Sommige kandidaten hebben de toets gestart. U kunt deze niet meer aanpassen.","something_went_wrong":"Er is iets mis gegaan","something_went_wrong_please_contact_support":"Er is iets mis gegaan. Neem contact op met de support.","something_went_wrong_please_try_again_later":"Er is iets mis gegaan. Probeer het opnieuw.","something_went_wrong_please_upload_again":"Er is iets mis gegaan, upload het opnieuw.","sort_by_last_name":"Sorteren op familienaam","sound_check":"Geluidstest","sourcer":"Bron","spanish":"Spaans","speech_detected":"Stem gedetecteerd","speech_is_detected":"Geluid gedetecteerd","start":"Start","start_and_end_time":"Start- en eindtijd","start_at":"Start om","start_camera":"Camera inschakelen","start_chat":"Hulp nodig?","start_date":"Startdatum","start_date_&_time":"Startdatum en -tijd","start_recording":"Opname starten","start_time":"Starttijd","start_tour":"Rondleiding starten","stats":"Statistieken","status":"Status","step_1":"Stap 1","step_2":"Stap 2","step_3":"Stap 3","step_4":"Stap 4","stop_recording":"Opname stoppen","student_id":"ID kandidaat","student_identify_verification":"Identiteitscontrole","student_information":"Kandidaatinformatie","studies_at":"Studeert aan","subject":"Onderwerp","submission_time":"Beëindigd op","submit":"Indienen","submit_all":"Alles indienen","submit_and_end":"Bent u zeker dat u alle antwoorden wilt indienen en de sectie wilt beëindigen?","submit_answers":"ALLE ANTWOORDEN INDIENEN","summary":"Samenvatting","support_chat":"Support chat","supports_html5_video":"ondersteunt HTML5-video.","surname":"Familienaam","suspecious":"Verdacht","suspicious_incidents":"Verdachte events","switch_language":"Taal aanpassen","synchronisation_mobile":"Mobiele synchronisatie","system_diagnostic":"Systeemcontrole","system_diagnostic_msg":"De systeemcontrole duurt maar even...","system_diagnostic_passed":"Systeemcontrole geslaagd","system_requirement_checking":"Systeemvereisten controleren","system_requirement_checking_msg":"Wij controleren uw systeem op minimale vereisten voor het gebruik van de bibliotheek.\\n U kunt de volledige lijst met vereisten lezen door","system_requirements":"Systeemvereisten controleren","system_requirements_for_testing":"Systeemvereisten voor toetsen","t2":"T2","take_a_photo":"Foto maken","take_id_photo":"Foto maken","take_photo":"Foto maken","take_the_superhero_leap_and_hire_fast_with_instahiring":"Maak de superheldensprong en huur snel in met Instahiring.","take_with_mereos":"Met Mereos nemen","template_editing":"Sjabloon aanpassen","template_id":"ID sjabloon","terms_and_conditions_read":"Algemene voorwaarden gelezen","terms_of_use":"Gebruiksvoorwaarden","test":"Test","test_translation":"Vertaling van de test","thankyou":"Dank u","the_maximum_file_size_is":"De maximale bestandsgrootte is","the_questions":"De vragen","the_questions_cant_be_modified_if_the_assessment":"De vragen kunnen niet worden aangepast als de toets bezig is, omdat dit een kritiek effect kan hebben op de rapporten van de kandidaten","this_invitation_has_expired":"Deze uitnodiging is verlopen","time":"Tijd","time_required":"De benodigde tijd is","time_taken":"Tijd genomen","time_to_answer":"Je hebt X minuten om Y vra(a)g(en) te beantwoorden.","time_zone":"Tijdzone","timer_on_screen":"Je hebt X minuten om Y vra(a)g(en) te beantwoorden. Raadpleeg de timer rechtsboven op het scherm.","timezone":"Tijdzone","tips":"Nuttige tips:","to_end":"Beëindigen","to_search_question_use_filter":"Om een specifieke vraag te zoeken, gebruik de zoek- en filteropties in de toetssectie.","to_start":"Starten","total":"Totaal","total_questions":"Totaal aantal vragen","total_score":"Totale score","try_again":"OPNIEUW PROBEREN","type":"Type","type_your_answer_in_space":"Typ uw antwoord in de ruimte aan de rechterkant van het scherm. Als u een bestand wilt toevoegen, klik dan op de link \'Bestand toevoegen\' en dien in.","un_publish":"Publicatie annuleren","unauthorized_access":"Ongeautoriseerde toegang","unauthorized_object_detected_for_more_than_10_seconds":"Niet-toegelaten object gedetecteerd voor meer dan 10 seconden","unauthorized_object_detected_please_put_it_away":"Niet-toegelaten object gedetecteerd. Verwijder het aub.","unmarked":"Niet beoordeeld","unsatisfied":"Ontevreden","unselect":"Deselecteren","up_to":"Tot","update":"Aanpassen","update_assessment":"Toets aanpassen","update_candidate":"Kandidaat aanpassen","update_candidate_details":"Gegevens kandidaat aanpassen","update_quiz":"Quiz aanpassen","upload":"Uploaden","upload_candidate_from":"Kandidaten uploaden van","upload_id_image":"Neem of upload een foto van uw identiteitskaart.","upload_image":"Afbeelding uploaden","upload_items":"Items uploaden","upload_resume":"Upload cv","upload_speed":"Uploadsnelheid","upload_speed_error":"Uw uploadsnelheid is niet hoog genoeg om deze toets te starten.","upload_speed_insufficient":"Uploadsnelheid onvoldoende","upload_your_id_card":"Upload een afbeelding van uw identiteitskaart","upload_your_identity_document":"upload uw identiteitskaart","uploaded":"Geüpload","url":"URL","url_filtering":"URL filtering","use_select_cam_if_not_detected":"Gebruik de keuzelijst \'Camera selecteren\' om een andere camera te selecteren als uw camera niet automatisch gedetecteerd wordt.","use_select_microphone_if_not_detected":"Gebruik de keuzelijst \'Microfoon selecteren\' als uw microfoon niet automatisch gedetecteerd wordt.","use_washroom":"Gebruik het toilet","useful_tips":"Nuttige tips:","user":"Gebruiker","user_idle":"Gebruiker inactief","candidate_interrupted_the_stream":"De gebruiker heeft de stream onderbroken.","username":"Gebruikersnaam","users":"Gebruikers","verification_code":"Vul verificatiecode in","verification_completed":"Verificatie voltooid","verification_completed_msg":"De verificatie is voltooid en alles is klaar voor de toets.\\nLees en ga akkoord met de toetsovereenkomst en ga verder.","video_codec":"Video codec","video_extension":"Video extensie","video_recorded":"Uw video kan tijdens deze sessie worden opgenomen.","video_recording_msg":"Uw video kan tijdens deze sessie worden opgenomen. Zorg ervoor dat de kamer voldoende verlicht is en er geen achtergrondgeluiden zijn.","view_our":"Bekijk onze","view_question_list":"Vragenlijst bekijken","view_question_list_button_help":"De knop \\"Vragenlijst bekijken\\" helpt u door de vragenlijst te navigeren.","view_session":"Sessie bekijken","visible_always":"Altijd zichtbaar","visible_at_the_end":"Zichtbaar aan het einde","wait_loading":"Wacht terwijl uw toets wordt geladen.","wait_video_uploading":"De video-upload kan 10-15 minuten duren, afhankelijk van uw internetsnelheid. Wacht totdat het volgende scherm verschijnt.","want_to_capture":"Wilt u een foto nemen? Klik hier.","want_to_upload":"Wilt u een afbeelding uploaden? Klik hier.","webcam":"Webcam","webcam_diagnostics":"Webcamcontrole","webcam_error":"De webcam is niet toegankelijk. Zorg ervoor dat uw webcam toegankelijk is om deze extensie te gebruiken.","webcam_not_working":"Uw webcam werkt niet","webpages_users_access_during_exam":"Webpagina\'s die gebruikers kunnen openen tijdens de toets","welcome":"WELKOM","welsh":"Welsh","whats_new":"Wat is er nieuw?","whitelist_specific_urls":"Whitelist specifieke URL\'s","wifi_connection":"Wifi-verbinding","window_focus_in":"Venster heeft focus","window_focus_out":"Venster heeft geen focus","windows_10":"Windows 10 (10 S-modus wordt niet ondersteund)","windows_8":"Windows 8 (Windows 8 wordt niet ondersteund)","wired_connection":"Bekabelde verbinding","without_saving":"Ga verder zonder op te slaan","workspace_checking":"Werkruimte controleren","workspace_checking_msg":"We moeten ervoor zorgen dat er geen andere mensen of onnodige items in de buurt zijn.","write_a_message":"Een bericht schrijven","write_your_comment":"Uw commentaar geven","yes":"Ja","you_welcome_here":"U bent hier welkom!","your_assessment_completed":"Uw toets is beëindigd.","your_face_must_visible_on_screen":"Uw gezicht moet volledig zichtbaar zijn op het scherm.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Uw internet is erg traag. Zorg ervoor dat u een stabiele internetverbinding heeft.","your_session_will_end_when_the_time_is_up":"Uw sessie eindigt wanneer de tijd op is of wanneer u op \'Indienen en afsluiten\' klikt.","your_time_is_valuable":"Uw tijd is waardevol","your_warm_pool_may_have_ideal_candidate_to_instahire":"Uw warme pool heeft mogelijk een ideale kandidaat om snel in te huren via Instahiring."}')},3895:e=>{"use strict";e.exports=JSON.parse('{"1280x720_resolution":"Resolução 1280x720","12_mbps":"12 Mbps","1366_x_768":"1366 x 768","1920_x_1080_and_above":"1920 x 1080 e acima","1_mbps":"1 Mbps","360_video":"Vídeo 360°","3_mbps":"3 Mbps","640x480_resolution":"Resolução 640x480","Unpublished":"Não publicado","__none__":"--Nenhum--","access_code":"Código de acesso","account_manager":"Gerente de conta","action":"Ação","actions":"Ações","add":"Adicionar","add_assessment":"Adicionar avaliação","add_candidates":"Adicionar candidatos","add_description":"Adicionar descrição","add_exam":"Adicionar exame","add_file":"Adicionar arquivo","add_question":"Adicionar pergunta","add_questions":"Adicionar perguntas","add_quiz":"Adicionar um quiz","add_solution":"Adicionar solução","add_url":"ADICIONAR URL","advance_filter":"Filtro avançado","advanced_filter_search":"Pesquisa de filtro avançado","agree_by_clicking":"Ao clicar no botão, você concorda com os Termos e Condições","ai_anomalies":"Anomalias de IA","ai_recorder_unknown_violation":"Há uma violação desconhecida registrada pela IA","all":"Todas","all_questions":"Todas as perguntas","allow_access_to_popups":"Permitir acesso aos seguintes pop-ups que aparecem, conforme mostrado abaixo:","allow_interruption":"Permitir interrupção","allow_question_skip":"Permitir pular pergunta","and":"e","anomalies":"Anomalias","answer":"Responder","answer_is_mandatory":"Responder a todas as perguntas é obrigatório.","answered":"Respondido","apply_a_settings_profile_for_this_exam":"Aplicar um perfil de configurações para este exame","apply_filter":"Aplicar filtro","archive":"Arquivar","are_you_sure_want_to_leave":"Tem certeza de que quer sair?","are_you_sure_you_want_to_delete_this_candidate":"Tem certeza de que deseja excluir este candidato?","ask_anything_about_the_extension":"Você pode me perguntar qualquer coisa sobre a extensão. Como posso ajudar?","assessment":"Avaliação","assessment_complete":"AVALIAÇÃO CONCLUÍDA","assessment_completed":"A avaliação foi concluída com sucesso","assessment_date_updated_successfully":"A data da avaliação foi atualizada com sucesso","assessment_duration_invalid_please_contact_support":"A duração da avaliação é inválida. Entre em contato com o suporte!","assessment_expired":"A avaliação expirou.","assessment_id":"ID da avaliação","assessment_indications_read":"As indicações da avaliação foram lidas","assessment_invitation":"Convite para avaliação","assessment_link":"Link da avaliação","assessment_list":"Lista de avaliações","assessment_loaded":"A avaliação foi carregada com sucesso","assessment_name":"Nome da avaliação","assessment_passed":"Avaliação aprovada","assessment_preinstructions_read_successfully":"As pré-instruções da avaliação foram lidas","assessment_restriction":"Restrição da avaliação","assessment_saved":"A avaliação foi salva com sucesso","assessment_sections":"Seções da avaliação","assessment_start_in_5":"A avaliação começa em 5","assessment_stat":"Estatística da avaliação","assessment_status_change":"Alteração do status da avaliação","assessment_tool":"Ferramenta de avaliação","assessment_window":"Janela de avaliação","assessments":"Avaliações","assign_panel":"Painel de atribuição","assign_proctor":"Atribuir Proctor","assignment_name_required":"O nome da avaliação é obrigatório","attach_file":"Anexar arquivo","attempt":"Tentativa","attend_test_quitely":"Participe do teste em um ambiente tranquilo e sem distrações.","attending":"Participando","audio_check":"Verificação de áudio","audio_check_completed":"Verificação de áudio concluída","audio_check_msg":"Clique no botão \\"Gravar\\" e leia a frase abaixo.","audio_detected_click_next":"Na próxima tela, detectaremos seu áudio. Clique no botão PRÓXIMO para prosseguir após ler as dicas abaixo.","audio_level":"Nível de áudio","audio_recordings":"Gravações de áudio","audio_test_failed":"Teste de áudio falhou!","audio_test_passed":"Teste de áudio aprovado!","audio_video_recorded":"Esta avaliação é supervisionada. Seu áudio e vídeo serão gravados durante a sessão.","automate_the_routine_tasks_employ_your_time_wisely":"Automatize as tarefas de rotina, empregue seu tempo com sabedoria.","available":"Disponível","back":"Voltar","back_to_Instructions":"Voltar para as Instruções","back_to_exams":"Voltar para os Exames","back_to_gradebook":"Voltar para o Boletim de Notas","bad":"Ruim","basic_information":"Informações Básicas","be_loud_clear":"Tente falar alto e claro e mantenha o microfone perto da boca.","begin_exam_now":"Aceito, comece o exame agora","block_browser_screenshot":"Bloquear Captura de Tela do Navegador","block_screen_recording":"Bloquear Gravação de Tela","body":"Corpo","bridge_the_talent_and_timezone":"Faça a ponte entre o talento e o fuso horário","browse_document":"navegar pelo documento","browser_anomalies":"Anomalias do navegador","browser_locked_successfully":"Navegador bloqueado com sucesso","brussels":"Bruxelas","bulk_import_items":"Itens de importação em massa","calculator":"Calculadora","camera_mic":"Câmera e microfone.","camera_recordings":"Gravações da câmera","cancel":"Cancelar","cancellation":"Cancelamento","candidate":"Candidato","candidate_details_cannot_updated":"Os detalhes do candidato não podem ser atualizados","candidate_email":"E-mail do candidato","candidate_group_id":"ID do grupo","candidate_id_is_uploaded_successfully":"O ID do candidato foi carregado com sucesso","candidate_identity_card":"Carteira de identidade do candidato","candidate_invite_assessment_section_id":"ID da seção de avaliação do convite do candidato","candidate_list":"Lista de candidatos","candidate_name":"Nome do candidato","candidate_photo":"Foto","candidate_photo_captured_successfully":"Foto do candidato capturada com sucesso","candidate_photo_uploaded_successfully":"A foto do candidato foi carregada com sucesso","candidate_reinvite_successfully":"O candidato foi convidado novamente com sucesso","candidate_resized_window":"Janela redimensionada do candidato","candidate_search":"Pesquisa de Candidatos","candidate_successfully_created":"Candidato criado com sucesso","candidate_successfully_updated":"Detalhes do candidato atualizados com sucesso","candidate_video_is_uploaded_successfully":"O vídeo do candidato foi carregado com sucesso","candidates":"Candidatos","cant_be_modified_assessment_in_open_state":"não pode ser modificado se a avaliação estiver em estado aberto, pois isso terá um impacto crítico nos relatórios dos candidatos","capture":"Capturar","capture_id":"Capture sua identidade antes de começar a preencher o formulário.","capture_image_of_id_card":"Capture a imagem do seu documento de identidade","catastrophic":"Catastrófico","category":"Categoria","center_your_face":"Centralize seu rosto no quadro e clique no botão abaixo.","cg":"CG","change_assessment_status":"Alterar status de avaliação","change_candidate_invite_status":"Alterar status de convite de candidato","change_end_time":"Alterar hora de término","change_invite_status":"Alterar painel de convites","change_role":"Alterar função","change_roles":"Alterar funções","change_start_and_last_date":"Alterar data de início e fim","change_start_date":"Alterar data de início","change_start_time":"Alterar hora de início","change_status":"Alterar status","change_type":"Alterar tipo","cheating":"Trapaça","check_your_email":"Verifique seu e-mail","chemisty":"Química","choose_answer":"Nesta seção, você deve escolher a resposta correta entre as opções fornecidas","chromebook_users":"Usuários do Chromebook (somente para monitoramento automatizado. Não é compatível com o Live Proctoring)","chromebook_users_min_requirement":"O dispositivo Chrome está executando a versão mais recente do Chrome OS.","chromebook_users_recommended_requirement":"O dispositivo Chrome está executando a versão mais recente do Chrome OS.","clean_cache":"Limpar cache","clear_filter":"Limpar filtro","click_go":"Ao clicar no botão \\"IR\\", você concorda com os Termos e Condições","click_here":"clique aqui","click_here_when_done":"Clique aqui quando terminar","click_ok_to_agree":"Ao clicar em próximo, você concorda com os Termos e Condições.","click_start_recording":"CLIQUE EM INICIAR GRAVAÇÃO E LEIA O TEXTO A SEGUIR","click_to_attempt":"Clique na pergunta para tentar","click_to_capture":"Clique aqui para capturar","click_to_submit_anwsers":"Para enviar a seção, clique no botão \\"Enviar todas as respostas\\" na tela de revisão. (Esta etapa não pode ser refeita)","click_to_upload":"Clique aqui para fazer upload","clicking_here":"clicando aqui","close":"Fechar","close_open_tabs":"Fechar abas abertas","close_window":"Você pode fechar a janela agora.","closed":"Fechada","code":"Código","collapse":"Recolher","column_visibility":"Visibilidade da coluna","comment":"Comentário","comment_suggestion":"Comentário/Sugestão","complete":"Concluído","complete_assessment":"Concluir avaliação","completed":"Concluído","completed_at":"Concluído em","configuration":"Configuração","confirm":"Confirmar","confirmation_delete_msg":"Esta alteração não pode ser revertido, tem certeza de que deseja excluir permanentemente a lista de reprodução?","connection":"Conexão","connectivity_ports":"Portas de conectividade","connectivity_ports_min_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","connectivity_ports_recommended_requirement":"1935, 843, 80, 443, 61613, UDP/TCP","contact":"Contato","contact_support":"Entrar em contato com o suporte","contact_us":"entre em contato conosco","content_manager":"Gerenciador de conteúdo","continue":"Continuar","conversion_ratio":"Taxa de conversão","coordinates":"Coordenadas","correct":"Correto","course_id":"ID do curso","cpu":"CPU","cpu_error":"Este o sistema não atende aos requisitos da CPU.","cpu_min_requirement":"mais de 1,3 GHz, menos de 50% de uso da CPU","cpu_recommended_requirement":"mais de 2,3 GHz, menos de 85% de uso da CPU","create":"Criar","create_a_panel":"Criar um painel","create_a_playlist":"Criar uma lista de reprodução","create_account":"Criar sua conta","create_an_account":"Criar uma conta","create_an_assessment":"Criar uma avaliação","create_assessment":"Criar avaliação","create_candidate":"Criar candidato","create_panel":"Criar painel","create_playlist":"Criar lista de reprodução","create_quiz":"Criar um quiz","created_at":"Criado em","creation_date":"Data de criação","current_invites_status":"Status atual dos convites","customize_proctoring_options_below":"Personalize sua experiência no exame selecionando as opções de supervisão abaixo.","dashboard":"Painel","date":"Data","deadline":"Prazo","delete":"Excluir","delete_assessment":"Excluir avaliação","delete_candidate":"Excluir candidato","delete_playlist":"Excluir lista de reprodução","description":"Descrição","description_cant_be_empty":"A descrição não pode estar vazia.","description_of_the_scam":"Descrição do golpe","desktop":"Área de trabalho","desktop_error":"Outra tela da área de trabalho foi detectada. Para processar mais, certifique-se de desconectar a outra tela.","detail_view":"Visualização detalhada","detailed_view":"Visualização detalhada","detect_resizing_of_window":"Detectar redimensionamento da janela","detect_unfocus":"Detectar desfoque","detected_face_successfully":"O rosto candidato foi detectado com sucesso.","detected_for_more_than_10_seconds":"Detectado por mais de 10 segundos!","detecting_audio":"Detectando áudio","detecting_face":"Detectando rosto…","detection_time":"Hora da detecção","disable":"Desativar","disable_clipboard":"Desativar área de transferência","disable_downloading":"Desativar download","disable_function_keys":"Desativar teclas de função","disable_keyboard_shortcuts":"Desativar atalhos de teclado","disable_new_tabs":"Desativar novas guias","disable_printing":"Desativar impressão","disable_right_click":"Desativar clique com o botão direito","disable_switch_to_apps":"Desabilitar alternar para aplicativos","disable_tempering":"Desabilitar moderação","discard":"Descartar","display_help_icons":"Exibir ícones de ajuda","display_options":"Exibir opções","display_potential_hardware_issues":"Exibir possíveis problemas de hardware","display_suspicious_ids":"Exibir IDs suspeitos","do_not_lock_your_phone":"Não bloqueie seu telefone, você perderá sua conexão se sua tela bloquear.","do_you_really_want_to_delete_the_grade":"Você realmente deseja excluir a nota","do_you_want_to_change_assessment_end_date_&_time":"Você deseja alterar a data e a hora de término da avaliação","done":"Concluído","dont_have_a_template":"Não tem um modelo?","dont_have_email":"Você não tem um email?","dont_have_email_id":"Não tem um ID de e-mail?","dont_have_phone_number":"Você não tem um número de telefone?","dont_see_yourself_above":"Não se vê acima?","don’t_move_microphone":"Não altere a posição do microfone durante a avaliação.","download":"Baixar","download_report":"Baixar relatório","download_speed":"Velocidade de download","download_speed_error":"Sua conexão com a Internet não é suficiente para que a extensão funcione corretamente.\\nPara usar esta extensão, certifique-se de que a velocidade da sua conexão com a Internet atenda aos requisitos.","download_speed_insufficient":"A velocidade de download é insuficiente","download_the_app":"Baixe o aplicativo","draft":"Rascunho","drag_&_drop_your_document":"Arraste e solte seu documento","drag_n_drop_your_document_or":"Arraste e solte seu documento ou ","drop_the_files_here":"Solte os arquivos aqui","dual_screen_detected":"Tela dupla detectada","duplicate_assessment":"Duplicate Assessment","duplicate_playlist":"Duplicate Playlist","duration":"Duração","duration_taken":"Duração tomada","duration_time":"Tempo de duração","during_your_assessment":"Durante sua avaliação","dutch":"Holandês","eassy_test":"Eassy Test","edbs":"EDBS","edit":"Editar","edit_assessment":"Editar avaliação","edit_column":"Editar coluna","edit_playlist_settings":"Editar configurações da playlist","edit_profile_for_later_use":"Edite este perfil para sua conta para uso posterior","edit_settings":"Editar configurações","edit_template":"Editar modelo","email":"E-mail","email_id":"ID do e-mail","email_or_password_wrong":"Seu endereço de e-mail ou senha está errado","email_reminder_to_selected_candidate":"Um lembrete por e-mail será enviado aos candidatos selecionados","email_templates":"Modelos de e-mail","en":"EN","enable":"Habilitar","enable_javascript":"Para assistir a este vídeo, habilite o JavaScript e considere atualizar para um navegador da Web que","enabled":"Habilitado","end":"Fim","end_at":"Fim às","end_date_&_time":"Data e hora de término","end_date_greater_start_date":"A data de término deve ser posterior à data de início","end_section_description":"Sua sessão acabou! Clique em Avançar para ir para a próxima etapa.","end_time":"Hora de término","english":"Inglês","english_rating":"Classificação em inglês","ensure_sharing_your_screen":"Certifique-se de que você permitiu o compartilhamento de sua tela.","enter":"Entre","enter_access_code":"Digite o código de acesso","enter_code":"Digite o código","enter_code_sent_to_email":"Digite o código de verificação enviado no seu e-mail registrado abaixo","enter_detail":"DIGITE SEUS DADOS","enter_email_id":"Digite o ID do e-mail","enter_first_name":"Digite o primeiro nome","enter_group_name":"Digite o nome do grupo","enter_surname":"Digite o sobrenome","enter_your_email":"Digite seu e-mail","enter_your_first_name":"Digite seu primeiro nome","enter_your_last_name":"Digite seu sobrenome","enter_your_password":"Digite sua senha","enter_your_phone_number":"Digite seu número de telefone","essay":"Redação","europe":"Europa","evaluate":"Avaliar","evaluate_full_session":"Avaliar sessão completa","evaluate_session":"Avaliar sessão","evaluation_completed":"Sua avaliação foi concluída","evaluation_expired":"A avaliação expirou.","evaluation_feedback":"Dê sua avaliação para essa sessão, isso é fraude ou não?","evaluator":"Avaliador","event":"Evento","event_details":"Detalhes do evento","event_name":"Nome do evento","events":"Eventos","exam_end":"Fim do exame","exam_instructions_li_1":"Mova sua webcam por 15 a 20 segundos para nos mostrar seu espaço de trabalho.","exam_instructions_li_2":"Clique no botão \'próximo\' somente depois de ver seu espaço de trabalho.","exam_instructions_text":"Agora, prepare seu ambiente de trabalho","exam_prep_msg":"Tenha um documento de identificação com foto emitido pelo governo pronto.\\nSe precisar recuperar seu documento de identificação ou fazer uma pausa rápida, faça isso agora.","exam_preparation":"Preparação para o exame","exam_preparation_msg":"A biblioteca precisará gravar sua sessão de exame para possível revisão.\\nEstas informações são criptografadas e podem ser acessadas somente por indivíduos autorizados por sua instituição. A gravação começará após a verificação do seu sistema e ambiente.","exam_preparation_tnc":"Concordo que entendi as regras do exame antes de iniciar o exame com extensão.","exam_security_level":"Nível de segurança do exame (com base nas opções selecionadas):","exam_settings_summary":"Resumo das configurações do exame","exam_start":"Início do exame","exam_taker":"Nome do candidato","exam_taker_information":"Informações do candidato","exam_was_fair":"O exame foi justo","exam_was_fraud":"O exame foi uma fraude","example_tutorial":"Seu telefone deve gravar deste ângulo de visão","exams":"Exames","export":"Exportar","export_pdf_report":"Exportar relatório em PDF","extend_date":"Data de extensão","extend_invite_date":"Estender Data do convite","extend_last_date":"Estender última data","extension":"Extensão","extent_Date":"Estender data","extent_date":"Estender data","external_id":"ID externo","face_detected_click_next":"Na próxima tela, detectaremos seu rosto. Clique no botão PRÓXIMO para prosseguir após ler as dicas abaixo.","face_not_detected":"O rosto não foi detectado. Tente novamente.","face_photo":"Foto do rosto","failed":"Falha","fair":"Razoável","feedback_added_successfully":"O feedback foi adicionado com sucesso","file_is_being_uploaded":"O arquivo está sendo carregado","file_is_not_being_uploaded":"O arquivo não está sendo carregado","files_at_once":"arquivar de uma vez","filter":"Filtrar","final_score":"Pontuação final","final_section":"Seção final","final_status":"Status final","finish_assessment_description":"Agora você pode sair desta página.","finish_assessment_title":"Avaliação concluída! Obrigado!","first_name":"Primeiro nome","flight_checked":"Verificação pré-voo bem-sucedida!","for_more_information":" para mais informações.","force_full_screen":"Forçar tela cheia","forgot_your_password":"Esqueceu sua senha?","fox_jumped_over_dog":"Uma raposa marrom rápida pulou sobre um cachorro preguiçoso.","fr":"FR","fraud":"Fraude","fraud_report":"Relatório de fraude","fraud_status":"Status da fraude","french":"Francês","french_rating":"Classificação em francês","full_face_visible":"Posicione a câmera de forma que seu rosto inteiro fique visível na pré-visualização","gaze_away":"Olhe para longe","gdpa_controls":"Controles GPDA","general":"Geral","geography":"Geografia","german":"Alemão","get_comfy":"Fique confortável","get_ready":"Prepare-se","get_ready_for_identity_validation":"Prepare-se para a validação de identidade.","get_started":"COMEÇAR","get_water":"Pegue água","go":"IR","go_back":"Voltar","good":"Bom","good_light":"Certifique-se de que haja luz suficiente e boa no room","got_it":"Entendi","grade_book_tour":"Tour do livro de notas","great":"Ótimo","group_id":"ID do grupo","group_name":"Nome do grupo","guidelines":"DIRETRIZES DA PLATAFORMA","hardware_test":"TESTE DE HARDWARE","hardware_test_face_detection":"TESTE DE HARDWARE (Detecção de rosto)","havent_selected_any_one":"Você não selecionou nenhum destes campos.","head_movement":"Movimento da cabeça","help":"Ajuda","here_is_some_information_regarding_the_mereos_platform":"Aqui estão algumas informações sobre a plataforma Mereos:","hey_mate_ready_for_test_it_starting_soon":"Ei, cara, pronto para o teste? Ele começará em breve.","hi_im_your_support_manager":"Olá, sou seu gerente de suporte","hi_there":"Olá","hide_grades":"Ocultar notas","hide_id":"Ocultar ID","hide_location":"Ocultar Localização","hide_names":"Ocultar nomes","hide_screen":"Ocultar tela","hide_video":"Ocultar vídeo","high":"Alto","highly_satisfied":"Altamente satisfeito","highly_unsatisfied":"Altamente insatisfeito","hiring_manager":"Gerente de contratação","hold":"Segure","hold_your_photo_id_into_the_frame":"Segure seu documento de identidade com foto no quadro e clique no botão \\"Tirar foto de identidade\\" abaixo.","home_page":"Página inicial","i_already_have_the_app":"Eu já tenho o aplicativo","i_dont_have_the_app":"Eu não tenho o aplicativo","i_downloaded_the_app":"Eu baixei o aplicativo","i_have_read_and_accept_the":"Li e aceito o","icc_msg":"Tenha um documento de identidade com foto emitido pelo governo pronto.\\nSe precisar recuperar seu documento de identidade ou fazer uma pausa rápida, faça isso agora.","id":"ID","id_being_verified":"Espere. O ID do candidato está sendo verificado.","id_card":"Carteira de Identidade","id_not_exists":"O convite não é mais válido. Entre em contato com a escola","id_not_verified":"O ID do candidato não é verificável. Tente novamente!","id_number":"Número da Identidade","id_photo":"Foto da Identidade","id_successfully_verified":"O ID do candidato foi verificado com sucesso.","identity_card_verified_successfully":"Carteira de Identidade Verificada com Sucesso","identity_validation":"Validação de Identidade","ignored":"Ignorado","import":"Importar","import_and_invite":"Importar e Convidar","import_candidates":"Importar Candidatos","in_order_to_carry_out_your_assessment":"Para realizar sua avaliação, você precisa de um smartphone para se filmar de um segundo ângulo. Para fazer isso, você deve instalar o aplicativo Mereos Mobile em seu telefone.","in_process":"Em Processamento","incident_Level":"Nível do Incidente","incident_level":"Nível do Incidente","incident_score":"Pontuação do Incidente","incognito_error":"Esta extensão não tem permissão para funcionar no modo anônimo.\\nPermita e atualize a página.","incognito_mode":"Modo Anônimo","incognito_mode_requirement_checking":"Verificação no modo anônimo","incognito_mode_requirement_checking_msg":"Esta extensão precisa funcionar no modo anônimo para garantir a prototipação segura do exame.\\nPara mais informações","incorrect":"Incorreto","incorrect_end_date_and_time":"Data e hora de término incorretas","indications_li_1":"O cronômetro está localizado na parte superior da tela.","indications_li_2":"Clique na seta para a esquerda para retornar à pergunta anterior.","indications_li_3":"Clique em « Avançar » para ignorar a pergunta.","indications_li_4":"Você poderá ver qualquer pergunta perdida no final da avaliação.","indications_li_5":"Para marcar uma pergunta para ser exibida mais tarde, marque a caixa de seleção \'marcar pergunta\'.","indications_li_6":"Sua sessão terminará quando você clicar em \'Enviar todas as respostas\'.","indications_title":"Informações da plataforma","infinite_pdf":"PDF infinito","initial_system_check_passed":"Verificação inicial do sistema aprovada. Seu exame está prestes a começar.","initial_system_check_passed_get_ready_for_identity_validation":"Verificação inicial do sistema aprovada. Prepare-se para validação de identidade.","instruction":"Instrução","instructions":"Instruções","internet_connection":"Conexão de Internet","internet_connection_not_working":"A conexão com a Internet não está funcionando","internet_download_speed":"Velocidade de Download de Internet","internet_speed_is_too_low":"A velocidade da Internet está muito baixa","internet_upload_speed":"Velocidade de Upload de Internet","interview":"Entrevista","invalid_email":"E-mail inválido","invalid_phone_number":"Número de telefone inválido","invitation":"Convite","invitation_id":"ID do Convite","invitation_incomplete_contact_support":"Este convite está incompleto. Entre em contato com o suporte!","invitation_successfully_created":"O convite foi criado com sucesso","invitations":"Convites","invite":"Convidar","invite_by_groups":"Convidar por grupos","invite_name":"Nome do Convite","invite_people":"Convidar Pessoas","invite_search":"Pesquisa de Convites","invite_status":"Status do Convite","invite_to_assessment":"Convidar para avaliação","invited":"Convidado","invited_at":"Convidado para","invited_for_evaluation":"Você está convidado para ser avaliado","invited_to_assessment_for":"Você está convidado para uma avaliação para","invites":"Convida","ip_address":"Endereço IP","is_the_camera_feedback_good":"Certifico que meu telefone está posicionado de forma que minha tela, minhas mãos e o topo da minha cabeça fiquem visíveis.","it_looks_suspicious":"Parece suspeito","italian":"Italiano","just_remembered":"Acabei de lembrar?","keep_mic_close":"Mantenha o microfone próximo à boca e não mude de posição até que o teste seja concluído.","last_name":"Sobrenome","leave_your_comment_here":"Deixe seu comentário aqui","legendre_svt_so":"Legendre_SVT_SO","lg":"LG","live":"Ao vivo","load_full_question":"Carregando a visualização completa da pergunta.","loading":"Carregando","location":"Localização","location_enabled":"Localização habilitada","location_error":"A localização está inacessível. Para usar esta extensão, certifique-se de que sua localização seja acessada.","location_not_working":"O compartilhamento de localização não está funcionando","lock_down_options":"Opções de bloqueio","log_out":"Sair","login_failed":"Verifique seu e-mail ou senha!","login_successfully":"Você efetuou login com sucesso","longer_time_message":"Está demorando mais do que o normal. Por favor, aguarde...","look_out_for_the_best_talent_across_the_globe_remotely":"Fique de olho nos melhores talentos do mundo - remotamente.","low":"Baixo","mac_users":"Usuários de Mac","macos_10_13":"macOS 10.13 (versão mais antiga ainda mantida)","macos_10_15":"macOS 10.15","made_changes":"Parece que você fez algumas alterações.","maps":"Mapas","mark_for_review":"Marcar para revisão","marked":"marcado","marked_for_review":"Marcado para revisão","master_hiring_manager":"Gerente de contratação mestre","master_recruiter":"Recrutador mestre","mathematics":"Matemática","maths":"Matemática","maximum_section_time":"Tempo máximo de seção","maximum_size_of_file":"O tamanho máximo do arquivo é 50 MB csv ou xls. Até 5 arquivos de uma vez","mb":"MB","med":"Médio","mereos_proctoring_portal":"Portal de supervisão Mereos","mereos_settings":"Configurações Mereos","mereos_support":"Suporte Mereos","metro_code":"Código Metro","microphone":"Microfone","microphone_error":"O microfone está inacessível. Para usar esta extensão, certifique-se de que seu microfone seja acessado.","microphone_not_working":"O microfone não está funcionando","minimum":"Mínimo","minutes":"minutos","mobile_connection_successfull":"Celular conectado com sucesso","mobile_phone_disconnected":"Telemóvel desligado","modified_at":"Modificado em","modify_at":"Modificar em","month_names":"JanFevMarAbrMaiJunJulAgoSetOctNovDez","more_actions":"Mais ações","moved_away_from_page":"Usuário saiu da página do exame","moved_back_to_page":"Usuário volta para a página do exame","multiple_face_detected":"Vários rostos foram detectados","multiple_people":"Várias pessoas","multiple_people_detected":"Várias pessoas foram detectadas.","multiple_people_detected_for_more_than_10_seconds":"Várias pessoas detectadas por mais de 10 segundos","multiple_people_in_the_screen":"Várias pessoas na tela","multiple_screens":"Várias telas","multiple_screens_detected":"Várias telas detectadas","my_settings_profiles":"Meus perfis de configurações","name":"Nome","name_of_assessment":"Nome da avaliação","name_of_playlist":"Nome da lista de reprodução","navigate_up_and_down":"Navegar para cima e para baixo","need_help":"Precisa de ajuda?","negative_marks":"Marcas negativas","new_notification_from_mereos":"Nova notificação do mereos","new_playlist":"Nova lista de reprodução","next":"Próximo","next_step":"Próximo passo","no":"Não","no_access_code_use_mereos":"Se você não tiver um código de acesso e não estiver no centro de testes, poderá fazer o exame usando o Mereos.","no_anomalies":"Nenhuma anomalia","no_assessment_found":"Nenhuma avaliação encontrada","no_candidate_found":"Nenhum candidato encontrado","no_data_found":"Nenhum dado encontrado","no_filtered_anomalies":"Nenhuma anomalia filtrada","no_invites_found":"Nenhum convite encontrado","no_mircophone_detected":"Nenhum microfone detectado","no_noise_in_room":"Certifique-se de que sua sala esteja bem iluminada e que não haja ruído de fundo.","no_panel_added_to_the_section":"Nenhum painel adicionado à seção","no_person_detected_come_back_to_assessment":"Nenhuma pessoa foi detectada. Por favor, volte para a avaliação.","no_person_detected_for_more_than_10_seconds":"Nenhuma pessoa foi detectada por mais de 10 segundos","no_person_in_the_screen":"Nenhuma pessoa na tela","no_playlist_found":"Nenhuma lista de reprodução encontrada","no_point_in_running_leave_in_time":"Não há sentido em correr, você tem que sair a tempo","no_rating_available_for_this_section_type":"Nenhuma classificação disponível para este tipo de seção","no_record_found":"Nenhum registro encontrado","no_section_found":"Nenhuma seção encontrada","no_session_found":"Nenhuma sessão encontrada","normal":"Normal","not_fraud":"Não Fraude","not_invited":"Não Convidado","not_viewed":"Não Visualizado","nothing_suspicious_was_noticed":"Nada suspeito foi notado","notification":"Notificação","notification-histroy":"Histórico de Notificações","notification_not_working":"A notificação não está funcionando","notifications":"Notificações","notifications_on_your_phone_should_be_turned_off":"As notificações no seu telefone devem ser desativadas. Eles podem interferir na gravação do fluxo de vídeo.","notify_candidate":"Notificar candidato","notify_candidates":"Notificar Candidatos","number_of_assessment_sections":"Número de seções de avaliação","number_of_sections":"Número de seções","object_detected":"Objeto é detectado","objective":"Objetivo","of":"de","okay":"Ok","on_hold":"Ligado Hold","only_one_attempt":"Você pode responder a uma pergunta apenas uma vez. Você não poderá revisá-lo mais tarde.","only_one_screen":"Apenas uma tela","open":"Aberto","open_the_mereos_mobile_application":"Abra o aplicativo Mereos Mobile em seu telefone e escaneie este código QR para sincronizar seu telefone.","opened":"Aberto","or":"Ou","other_app_close":"Feche aplicativos como Skype, Google Hangouts, etc. que podem interromper o teste.","overall_gpa":"GPA geral","overall_knowledge_rating":"Classificação geral do conhecimento","overall_time_taken":"Tempo total gasto","overview":"Visão geral","owner":"Proprietário","page_error":"Erro de página","page_not_found":"Página não encontrada","panel_name":"Nome do painel","password":"Senha","password_reset_link_sent":"Um link para redefinição de senha foi enviado para seu e-mail.","pause":"Pause","pc_users":"Usuários de PC","pending":"Pendente","per_page":"Por página","person_missing":"Pessoa desaparecida","persons_eyes_are_moving":"Os olhos da pessoa estão se movendo","persons_head_is_moving":"A cabeça da pessoa está se movendo","phone":"Telefone","phone_number":"Número de telefone","photo_id":"ID da foto","physics":"Física","play":"Reproduzir","playlist_name":"Nome da lista de reprodução","playlists":"Listas de reprodução","please_add_assessment_duration":"Adicione a duração da avaliação","please_add_atleast_one_item":"Adicione pelo menos um item","please_check_your_mic":"Verifique seu microfone antes de iniciar a gravação","please_enable_force_submission\'":"Ative o envio forçado","please_scan_this_qr_code":"Digite este código QR com seu dispositivo de telefone para baixar o aplicativo Mereos Mobile.","please_share_entire_screen":"Compartilhe a tela inteira.","please_take_picture_or":"Tire uma foto ou","please_unselect_time_region_from_template\'":"Por favor, desmarque a Região de Horário do modelo","please_wait":"Aguarde...","please_wait_we_processing":"Aguarde, estamos processando.","points":"Pontos","poor":"Ruim","pop_up":"POP-UP","portuguese_brazil":"Português (Brasil)","positive_marks":"Marcas Positivas","post_instructions_text":"Aqui estão as instruções pós-avaliação","postinstructions":"Publicar Instruções","pre_configured_behavior":"Escolha uma configuração de comportamento pré-configurada ou personalize qualquer uma das configurações do exame.","preinstructions":"Pré-Instruções","previous_step":"Etapa anterior","privacy_msg":"Eu concordo com o processamento dos meus dados pessoais para os propósitos\\n específicos mencionados na política de privacidade.","privacy_policy":"Política de Privacidade","privacy_policy_msg":"Eu concordo com o processamento dos meus dados pessoais para os propósitos\\n específicos mencionados na política de privacidade.","processed_anomalies":"Anomolias processadas","processing":"Processando","proctor":"Proctor","proctored_review_will_end_in":"A revisão supervisionada terminará em","proctoring_behavior_settings":"Configurações de comportamento de supervisão","proctoring_exam_description":"Anormalidades comparam as ações de um candidato ao restante dos exames da classe. Isso destacará diferenças estatisticamente significativas no comportamento de um candidato.","proctoring_exam_metrics":"Métricas de exame de supervisão","proctoring_exam_settings":"Configurações de exame de supervisão","proctoring_frame_description":"A gravidade de cada métrica define o peso do comportamento suspeito em relação aos outros comportamentos. Essas métricas são calculadas com cada imagem. Cada característica é derivada para cada imagem, independentemente de as configurações estarem habilitadas ou não. A gravidade dessas métricas pode ser alterada a qualquer momento, o que resultará em um recálculo da suspeita de um exame supervisionado.","proctoring_frame_metrics":"Métricas de quadro de supervisão","proctoring_profile_required":"Perfil de supervisão é obrigatório","profile_id":"ID do perfil","proven_fraud":"Fraude comprovada","provider":"Provedor","published":"Publicado","question":"Pergunta","question_1_of_20":"PERGUNTA 1 DE 20","question_List":"Lista de perguntas","question_based_stats":"Estatísticas baseadas em perguntas","question_count":"Contagem de perguntas","question_list":"Lista de perguntas","question_name":"Nome da pergunta","question_not_answered":"Você não respondeu X de Y perguntas.","question_view":"Visualização de perguntas","questions":"Perguntas","questions_attended":"Pergunta respondida","questions_uploaded_successFully":"Perguntas enviadas com sucesso","quick_filter":"Filtro rápido","quiz_name":"Nome do teste","ram":"RAM","ram_error":"Este sistema não atende aos requisitos de RAM.","ram_min_requirement":"4 GB\\nmenos que 90% de uso de RAM","ram_recommended_requirement":"16 GB\\nmenos que 70% de uso","rate_experience_by_emotion":"Avalie sua experiência clicando no emoticon.","rating":"Classificação","re_invite":"Reconvidar","re_record_audio":"Regravar áudio","recapture":"Recapturar","recommended":"Recomendado","record_audio":"Gravar áudio","record_not_found":"Nenhum registro encontrado","record_room":"Sala de gravação","record_screen":"Gravar tela","record_video":"Gravar vídeo","record_web_traffic":"Gravar tráfego da Web","recording":"Gravando","recording_started_successfully":"Gravação iniciada com sucesso","recording_stopped_successfully":"Gravação interrompida com sucesso","recruiter":"Recrutador","refresh":"Atualizar","register_here":"REGISTRE-SE AQUI","registered_successfully":"Registrado com sucesso!","reinvite":"Reconvidar","reinvite_people":"Reconvidar pessoas","reject":"Rejeitar","rejected":"Rejeitado","rejection":"Rejeição","reloading_closing_add_partial_data":"Recarregar ou fechar a janela pode resultar em um download parcial do arquivo.","remind_candidate":"Lembrar candidatos","remind_candidates":"Lembrar candidatos","remind_panel":"Painel de lembretes","reminder":"Lembrete","remote_automate_reuse":"Remoto. Automatize. Reutilizar.","reports":"Relatórios","required_time":"Tempo necessário","reset":"Redefinir","reset_email_sent":"Um link para redefinir sua senha será enviado para seu e-mail.","reshare_screen":"Compartilhar tela novamente","reshoot_video":"Refilmar vídeo","results":"Resultados","resume":"Currículo","resume_doc":"CV","retake":"Refazer","retake_id_photo":"Retirar foto do documento de identidade","retake_photo":"Retirar foto","reuse_the_candidate_data_and_hire_faster":"Reutilize os dados do candidato e contrate mais rápido","review_q_later":"Para revisar uma pergunta mais tarde, clique na caixa de seleção \\"Marcar para revisão\\". Use filtros na tela de revisão para visualizar as questões marcadas.","roles":"Funções","room_id":"ID da sala","room_scan":"Varredura da sala","room_scan_completed":"Varredura da sala concluída","room_scanning":"Varredura da sala","roomscan_recordings":"Gravações da varredura da sala","row":"Linha","satisfied":"Satisfeito","save":"Salvar","save_answer":"Sua resposta não será carregada. Clique no botão PRÓXIMO para salvar sua resposta","save_exam_settings":"Salvar configurações do exame","save_information":"Salvar informações","save_n_publish":"Salvar e Publicar","save_settings_profile":"Salvar perfil de configurações","saved_successfully":"Salvo com sucesso","scan_or_download_the_below_qr_code_to":"Escaneie ou baixe o código QR abaixo para","scan_your_room":"Escaneie sua sala em 360°, incluindo sua área de trabalho","schedule_invite":"Agendar convite","schedule_live":"Programar ao vivo","scheduled_at":"Agendado em","scheduled_invite":"Convite agendado","scheduled_time":"Horário agendado","school":"Escola","school_name":"Nome da escola","science":"Ciências","score":"Pontuação","screen":"Tela","screen_record":"Gravação de tela","screen_recording_window_shared":"Janela de gravação de tela compartilhada","screen_recordings":"Gravações de tela","screen_resolution":"Resolução da tela","screen_shared_successfully":"Você compartilhou a tela com sucesso","screen_sharing_stopped":"Compartilhamento de tela interrompido","search":"Pesquisar","search_an_exam":"Pesquisar um exame","search_an_exam_taker":"Pesquisar um candidato","search_by":"Pesquisar por","search_candidate_name_or_location":"Pesquisar candidato ou local","search_location":"Pesquisar local","search_question":"Pesquisar pergunta","search_text":"Pesquisar texto","section":"Seção","section1":"Seção 1","section2":"Seção 2","section3":"Seção 3","section4":"Seção 4","section_activity_required":"Atividade é necessária","section_completed_next_to_continue":"Você concluiu a seção. Clique em Avançar para continuar.","section_name":"Nome da seção","section_status":"Status da seção","section_type":"Tipo de seção","sections":"Seções","secure_feature":"Recurso de segurança","security_document":"Documento de segurança","see_all_arguments":"Ver todos os argumentos","see_more":"Ver mais","see_support_tags":"Ver tags de suporte","seems_like_a_fraud":"Parece uma fraude","select":"Selecionar","select_a_chat_room_for_messages":"Selecionar uma sala de bate-papo para mensagens","select_a_question":"Selecionar uma pergunta","select_a_saved_setting_profile_or_create_new_one":"Selecionar um perfil de configuração salvo ou criar um novo.","select_and_invite_status":"Selecionar e convidar status","select_answer_below_from_below":"Selecionar sua resposta abaixo:","select_camera":"Selecionar câmera","select_candidates":"Selecionar candidatos","select_complete":"SEÇÃO CONCLUÍDA","select_evaluator":"Selecionar avaliador","select_microphone":"Selecionar microfone","select_on_assessments":"Selecionar avaliações","select_on_assessments_to_duplicate":"Selecionar avaliações para duplicar","select_on_playlist_to_duplicate":"Selecionar lista de reprodução para duplicar","select_on_status_to_change":"Selecionar status para alterar","select_preferred_camera_and_microphone":"Selecione a câmera e o microfone preferidos.","select_proctor":"Selecionar fiscal","select_profile":"Selecionar perfil","select_role":"Selecionar função","selected":"Selecionado","selection":"Seleção","send":"Enviar","send_candidates_reminder":"Enviar lembrete de candidato","send_invitation":"Enviar convite","send_invite":"Enviar convite","send_reset_password_link":"Enviar link para redefinir senha","session":"Sessão","session_completed":"A sessão está concluída","session_completed_successfully":"A sessão foi concluída com sucesso","session_duration":"Duração da sessão","session_id":"ID da sessão","session_initiated":"Sessão iniciada","session_started":"Sua sessão começará agora.","session_status":"Status da sessão","session_view":"Visualização da sessão","sessions":"Sessões","set_as_default_profile":"Definir como perfil padrão","setting_up_your_phone_camera":"Configure seu telefone","settings":"Configurações","setup_section":"Seção de configuração","several_sections":"Várias seções","share_screen_msg":"Clique no botão \\"Concluído\\" depois de permitir o compartilhamento de sua tela.","share_setting":"Configuração de compartilhamento","share_settings":"Configurações de compartilhamento","share_the_assessment":"compartilhe a avaliação","show_unmatched_attempts":"Mostrar tentativas não correspondidas","showing_results_for":"Mostrando resultados para","sign_in":"Entrar","sign_in_with":"Entrar com","sign_out":"Sair","skills":"Habilidades","skip":"Ignorar","skip_question_click_next":"Clique no botão \\"Próximo\\" para pular uma pergunta. Você pode revisitar as perguntas ignoradas usando \\"Exibir lista de perguntas\\"","skipped":"Ignorado","skipped_question":"pergunta ignorada","solution":"Solução","some_attribute":"Algum atributo","some_of_the_candidate_start_assessment":"Alguns dos candidatos iniciam a avaliação. Você não pode editar a avaliação","something_went_wrong":"Algo deu errado","something_went_wrong_please_contact_support":"Algo deu errado! Entre em contato com o suporte.","something_went_wrong_please_try_again_later":"Algo deu errado. Tente novamente mais tarde.","something_went_wrong_please_upload_again":"Algo deu errado, carregue novamente","sort_by_last_name":"Classificar por sobrenome","sound_check":"Verificação de som","sourcer":"Sourcer","spanish":"Espanhol","speech_detected":"Fala detectada","speech_is_detected":"Fala detectada","start":"Início","start_and_end_time":"Hora de início e término","start_at":"Início em","start_camera":"Iniciar câmera","start_chat":"Iniciar bate-papo","start_date":"Data de início","start_date_&_time":"Data e hora de início","start_recording":"Iniciar gravação","start_time":"Hora de início","start_tour":"Iniciar tour","stats":"Estatísticas","status":"Status","step_1":"Etapa 1","step_2":"Etapa 2","step_3":"Etapa 3","step_4":"Etapa 4","stop_recording":"Parar gravação","student_id":"ID do aluno","student_identify_verification":"Verificação de identidade do aluno","student_information":"Informações do aluno","studies_at":"Estudos em","subject":"Assunto","submission_time":"Hora do envio","submit":"Enviar","submit_all":"Enviar tudo","submit_and_end":"Tem certeza de que deseja enviar todas as respostas e encerrar a seção?","submit_answers":"ENVIAR TODAS AS RESPOSTAS","summary":"Resumo","support_chat":"Bate-papo de suporte","supports_html5_video":"supports HTML5 video.","surname":"Sobrenome","suspecious":"Suspicious","suspicious_incidents":"Incidentes suspeitos","switch_language":"Trocar idioma","synchronisation_mobile":"Sincronização móvel","system_diagnostic":"Diagnóstico do sistema","system_diagnostic_msg":"O diagnóstico do sistema levará apenas um momento.","system_diagnostic_passed":"Diagnóstico do sistema aprovado","system_requirement_checking":"Verificação de requisitos do sistema","system_requirement_checking_msg":"Verificaremos seu sistema quanto aos requisitos mínimos para usar a biblioteca.\\n Você pode ler a lista completa de requisitos em ","system_requirements":"Verificação de requisitos do sistema","system_requirements_for_testing":"Requisitos do sistema para teste","t2":"T2","take_a_photo":"Tire uma foto","take_id_photo":"Tire uma foto de identificação","take_photo":"Tire uma foto","take_the_superhero_leap_and_hire_fast_with_instahiring":"Dê o salto de super-herói e contrate rápido com o Instahiring.","take_with_mereos":"Tire com Mereos","template_editing":"Edição de modelo","template_id":"ID do modelo","terms_and_conditions_read":"Termos e condições lidos","terms_of_use":"Termos de uso","test":"Teste","test_translation":"Teste de tradução","thankyou":"Obrigado!","the_maximum_file_size_is":"O tamanho máximo do arquivo é","the_questions":"As perguntas","the_questions_cant_be_modified_if_the_assessment":"As perguntas não podem ser modificadas se a avaliação estiver em estado aberto, pois isso terá um impacto crítico nos relatórios dos candidatos","this_invitation_has_expired":"Este convite expirou","time":"Tempo","time_required":"O tempo necessário é","time_taken":"Tempo gasto","time_to_answer":"Você terá X minutos para responder Y pergunta(s).","time_zone":"Fuso horário","timer_on_screen":"Você tem X minutos para responder Y pergunta(s). Consulte o cronômetro no canto superior direito da tela.","timezone":"Fuso horário","tips":"Dicas úteis:","to_end":"Para finalizar","to_search_question_use_filter":"Para pesquisar para uma pergunta específica, use a opção de pesquisa e filtros na seção Revisão.","to_start":"Para começar","total":"Total","total_questions":"Total de perguntas","total_score":"Pontuação total","try_again":"TENTE NOVAMENTE","type":"Digite","type_your_answer_in_space":"Digite sua resposta no espaço fornecido no lado direito da tela. Caso queira anexar um arquivo, clique no link \\"Anexar arquivo\\" e envie.","un_publish":"Cancelar publicação","unauthorized_access":"Acesso não autorizado","unauthorized_object_detected_for_more_than_10_seconds":"Objeto não autorizado detectado por mais de 10 segundos","unauthorized_object_detected_please_put_it_away":"Objeto não autorizado foi detectado. Por favor, guarde-o","unmarked":"desmarcado","unsatisfied":"Insatisfeito","unselect":"Desmarcar","up_to":"Até","update":"Atualizar","update_assessment":"Atualizar avaliação","update_candidate":"Atualizar candidato","update_candidate_details":"Atualizar detalhes do candidato","update_quiz":"Atualizar quiz","upload":"Carregar","upload_candidate_from":"Carregar candidatos de","upload_id_image":"Carregar/capturar uma imagem do seu cartão de identificação.","upload_image":"Carregar imagem","upload_items":"Carregar itens","upload_resume":"Carregar currículo","upload_speed":"Velocidade de upload","upload_speed_error":"Sua velocidade de upload não é suficiente para iniciar este exame.","upload_speed_insufficient":"A velocidade de upload é insuficiente","upload_your_id_card":"Carregar imagem do seu documento de identidade","upload_your_identity_document":"carregue seu documento de identidade","uploaded":"Carregado","url":"URL","url_filtering":"Filtragem de URL","use_select_cam_if_not_detected":"Use o menu suspenso \\"Selecionar câmera\\" para selecionar outra câmera, caso sua câmera não seja detectada automaticamente.","use_select_microphone_if_not_detected":"Use o menu suspenso \\"Selecionar microfone\\" caso seu microfone não seja detectado automaticamente.","use_washroom":"Usar banheiro","useful_tips":"Dicas úteis:","user":"Usuário","user_idle":"Usuário inativo","candidate_interrupted_the_stream":"O usuário interrompeu a transmissão!","username":"Nome de usuário","users":"Usuários","verification_code":"Digite o código de verificação","verification_completed":"Verificação concluída","verification_completed_msg":"A verificação foi concluída com sucesso e tudo está pronto para o exame.\\nLeia e concorde com o acordo do exame e então continuaremos.","video_codec":"Codec de vídeo","video_extension":"Extensão de vídeo","video_recorded":"Seu vídeo pode ser gravado durante esta sessão.","video_recording_msg":"O vídeo pode ser gravado durante esta sessão. Certifique-se de que a sala esteja suficientemente iluminada e que não haja ruído de fundo","view_our":"Veja nossa ","view_question_list":"Veja a lista de perguntas","view_question_list_button_help":"O botão \\"Ver lista de perguntas\\" ajudará você a navegar pela lista de perguntas.","view_session":"Veja a sessão","visible_always":"Visível sempre","visible_at_the_end":"Visível no final","wait_loading":"Aguarde enquanto sua avaliação carrega.","wait_video_uploading":"O upload do vídeo pode levar de 10 a 15 minutos, dependendo da velocidade da sua internet. Então, aguarde até que a próxima tela apareça.","want_to_capture":"Quer capturar uma imagem? Clique aqui.","want_to_upload":"Quer enviar uma imagem? Clique aqui.","webcam":"Webcam","webcam_diagnostics":"Diagnóstico da webcam","webcam_error":"A webcam está inacessível. Para usar esta extensão, certifique-se de que sua webcam seja acessada.","webcam_not_working":"A webcam não está funcionando","webpages_users_access_during_exam":"Páginas da Web que os usuários podem acessar durante o exame","welcome":"BEM-VINDO!","welsh":"Galês","whats_new":"O que há de novo?","whitelist_specific_urls":"URLs específicos da lista de permissões","wifi_connection":"Conexão Wi-Fi","window_focus_in":"Foco na janela","window_focus_out":"Foco na janela","windows_10":"Windows 10 (o modo 10 S não é suportado)","windows_8":"Windows 8 (o modo Windows 10 S não é suportado)","wired_connection":"Conexão com fio","without_saving":"Continuar sem salvar","workspace_checking":"Verificação do espaço de trabalho","workspace_checking_msg":"Precisamos ter certeza de que não há outras pessoas ou itens desnecessários perto de você.","write_a_message":"Escreva uma mensagem...","write_your_comment":"Escreva seu comentário","yes":"Sim","you_welcome_here":"Você é bem-vindo aqui!","your_assessment_completed":"Sua avaliação foi concluída.","your_face_must_visible_on_screen":"Seu rosto deve estar totalmente visível na tela.","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality":"Sua conexão com a Internet está muito lenta. Certifique-se de que você tenha uma conexão estável com a Internet","your_session_will_end_when_the_time_is_up":"Sua sessão terminará quando o tempo acabar ou quando você clicar em \\"Enviar e sair\\".","your_time_is_valuable":"Seu tempo é valioso","your_warm_pool_may_have_ideal_candidate_to_instahire":"Sua piscina aquecida pode ter um candidato ideal para Instahire."}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};return(()=>{"use strict";n.r(r),n.d(r,{init:()=>iL,start_prechecks:()=>oL,start_session:()=>lL,stop_prechecks:()=>cL,stop_session:()=>pL});var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Je,hasStandardBrowserEnv:()=>et,hasStandardBrowserWebWorkerEnv:()=>tt,navigator:()=>Ze,origin:()=>nt});var t={};n.r(t),n.d(t,{mx:()=>Uv,XI:()=>Ly,Nk:()=>My,f6:()=>zy,ct:()=>zv,YG:()=>Vy,hH:()=>Yy,z3:()=>Rb,sG:()=>Ub,uM:()=>Yb,vS:()=>dw,qB:()=>yw,GG:()=>ww,lg:()=>Cw,rq:()=>xw,cu:()=>$w,WR:()=>Mw,GE:()=>Vw,px:()=>Gw,jC:()=>ak,He:()=>ck,hE:()=>vk,BF:()=>Sb,Dk:()=>Ik,cl:()=>Mk,_B:()=>Kk,ub:()=>ex,_f:()=>rx,Ku:()=>ux,qy:()=>dx,Zy:()=>xx,bu:()=>Cx,zv:()=>Nv,dH:()=>Jv,HS:()=>Oy,yH:()=>Wx,l3:()=>Yx,z9:()=>Xx,x6:()=>tS,_m:()=>cS,eW:()=>hS,GK:()=>gS,SP:()=>yS,yr:()=>wS,dl:()=>ew,Dw:()=>IS,xT:()=>RS,_X:()=>ay,wz:()=>$S});const i={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||i,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new a(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new a(this.logger,e)}}var o=new a;class s{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let e=0;e<r;e++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let t=0;t<i;t++)r.apply(r,[e,...n])}))}}}function c(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}function u(e){return null==e?"":""+e}const l=/###/g;function d(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(l,"."):e}function i(){return!e||"string"==typeof e}const a="string"!=typeof t?t:t.split(".");let o=0;for(;o<a.length-1;){if(i())return{};const t=r(a[o]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++o}return i()?{}:{obj:e,k:r(a[o])}}function p(e,t,n){const{obj:r,k:i}=d(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let a=t[t.length-1],o=t.slice(0,t.length-1),s=d(e,o,Object);for(;void 0===s.obj&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=d(e,o,Object),s&&s.obj&&void 0!==s.obj[`${s.k}.${a}`]&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=n}function h(e,t){const{obj:n,k:r}=d(e,t);if(n)return n[r]}function f(e,t,n){for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):f(e[r],t[r],n):e[r]=t[r]);return e}function m(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function _(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(e=>g[e])):e}const v=[" ",",","?","!",";"],y=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20);function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let e=0;e<r.length;){if(!i||"object"!=typeof i)return;let t,a="";for(let o=e;o<r.length;++o)if(o!==e&&(a+=n),a+=r[o],t=i[a],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}i=t}return i}function w(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class k extends s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):"string"==typeof n&&i?o.push(...n.split(i)):o.push(n)));const s=h(this.data,o);return!s&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),s||!a||"string"!=typeof n?s:b(this.data&&this.data[e]&&this.data[e][t],n,i)}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),p(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in n)("string"==typeof n[r]||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let s=h(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?f(s,n,i):s={...s,...n},p(this.data,o,s),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var x={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))})),t}};const S={};class T extends s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,t,n){e.forEach((e=>{t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=o.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";const r=v.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=y.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let a=!i.test(e);if(!a){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(a=!0)}return a}(e,n,r));if(a&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:i};const a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),s=o[o.length-1],c=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(u){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:`${s}${e}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:`${s}${e}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:a}const l=this.resolve(e,t);let d=l&&l.res;const p=l&&l.usedKey||a,h=l&&l.exactUsedKey||a,f=Object.prototype.toString.apply(d),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&d&&("string"!=typeof d&&"boolean"!=typeof d&&"number"!=typeof d)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!=typeof m||!Array.isArray(d))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(l.res=e,l.usedParams=this.getUsedParamsDetails(t),l):e}if(i){const e=Array.isArray(d),n=e?[]:{},r=e?h:p;for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e)){const a=`${r}${i}${e}`;n[e]=this.translate(a,{...t,joinArrays:!1,ns:o}),n[e]===a&&(n[e]=d[e])}d=n}}else if(g&&"string"==typeof m&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,t,n));else{let r=!1,o=!1;const u=void 0!==t.count&&"string"!=typeof t.count,p=T.hasDefaultValue(t),h=u?this.pluralResolver.getSuffix(c,t.count,t):"",f=t.ordinal&&u?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",m=u&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${h}`]||t[`defaultValue${f}`]||t.defaultValue;!this.isValidLookup(d)&&p&&(r=!0,d=g),this.isValidLookup(d)||(o=!0,d=a);const _=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:d,v=p&&g!==d&&this.options.updateMissing;if(o||r||v){if(this.logger.log(v?"updateKey":"missingKey",c,s,a,v?g:d),i){const e=this.resolve(a,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=p&&r!==d?r:_;this.options.missingKeyHandler?this.options.missingKeyHandler(e,s,n,i,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,s,n,i,v,t),this.emit("missingKey",e,s,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);m&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{r([e],a+n,t[`defaultValue${n}`]||g)}))})):r(e,a,g))}d=this.extendTranslation(d,e,t,l,n),o&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${s}:${a}`),(o||r)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${a}`:a,r?d:void 0):this.options.parseMissingKeyHandler(d))}return r?(l.res=d,l.usedParams=this.getUsedParamsDetails(t),l):d}extendTranslation(e,t,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(o){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),o){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):a.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,s="string"==typeof o?[o]:o;return null!=e&&s&&s.length&&!1!==n.applyPostProcessor&&(e=x.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,o),c=s.key;n=c;let u=s.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const l=void 0!==o.count&&"string"!=typeof o.count,d=l&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),p=void 0!==o.context&&("string"==typeof o.context||"number"==typeof o.context)&&""!==o.context,h=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);u.forEach((e=>{this.isValidLookup(t)||(a=e,!S[`${h[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(S[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${h.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((n=>{if(this.isValidLookup(t))return;i=n;const a=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(a,c,n,e,o);else{let e;l&&(e=this.pluralResolver.getSuffix(n,o.count,o));const t=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(a.push(c+e),o.ordinal&&0===e.indexOf(r)&&a.push(c+e.replace(r,this.options.pluralSeparator)),d&&a.push(c+t)),p){const n=`${c}${this.options.contextSeparator}${o.context}`;a.push(n),l&&(a.push(n+e),o.ordinal&&0===e.indexOf(r)&&a.push(n+e.replace(r,this.options.pluralSeparator)),d&&a.push(n+t))}}let s;for(;s=a.pop();)this.isValidLookup(t)||(r=s,t=this.getResource(n,e,s,o))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&"string"!=typeof e.replace;let r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}function C(e){return e.charAt(0).toUpperCase()+e.slice(1)}class E{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=o.create("languageUtils")}getScriptPartFromCode(e){if(!(e=w(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=w(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if("string"==typeof e&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=C(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=C(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=C(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return"string"==typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))})),r}}let I=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],N={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};const A=["v1","v2","v3"],O=["v4"],R={zero:0,one:1,two:2,few:3,many:4,other:5};class P{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=o.create("pluralResolver"),this.options.compatibilityJSON&&!O.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const e={};return I.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:N[t.fc]}}))})),e}()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(w("dev"===e?"en":e),{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>R[e]-R[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!A.includes(this.options.compatibilityJSON)}}function D(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=function(e,t,n){const r=h(e,n);return void 0!==r?r:h(t,n)}(e,t,n);return!a&&i&&"string"==typeof n&&(a=b(e,n,r),void 0===a&&(a=b(t,n,r))),a}class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=o.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:s,formatSeparator:c,unescapeSuffix:u,unescapePrefix:l,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:f,nestingOptionsSeparator:g,maxReplaces:v,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:_,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?m(i):a||"{{",this.suffix=o?m(o):s||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":l||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?m(d):p||m("$t("),this.nestingSuffix=h?m(h):f||m(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=v||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,a,o;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}const l=e=>{if(e.indexOf(this.formatSeparator)<0){const i=D(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),a=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(D(t,s,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...t,interpolationkey:a})};this.resetRegExp();const d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>c(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?c(this.escape(e)):c(e)}].forEach((t=>{for(o=0;i=t.regex.exec(e);){const n=i[1].trim();if(a=l(n),void 0===a)if("function"==typeof d){const t=d(e,i,r);a="string"==typeof t?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))a="";else{if(p){a=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else"string"==typeof a||this.useRawValueToEscape||(a=u(a));const s=t.safeValue(a);if(e=e.replace(i[0],s),p?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function o(e,t){const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let a=`{${r[1]}`;e=r[0],a=this.interpolate(a,i);const o=a.match(/'/g),s=a.match(/"/g);(o&&o.length%2==0&&!s||s.length%2!=0)&&(a=a.replace(/'/g,'"'));try{i=JSON.parse(a),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${a}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){let s=[];i={...a},i=i.replace&&"string"!=typeof i.replace?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),s=e,c=!0}if(r=t(o.call(this,n[1].trim(),i),i),r&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=u(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),c&&(r=s.reduce(((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}function M(e){const t={};return function(n,r,i){const a=r+JSON.stringify(i);let o=t[a];return o||(o=e(w(r),i),t[a]=o),o(n)}}class F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=o.create("formatter"),this.options=e,this.formats={number:M(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:M(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:M(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:M(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:M(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=M(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator).reduce(((e,t)=>{const{formatName:i,formatOptions:a}=function(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();n[a]||(n[a]=i),"false"===i&&(n[a]=!1),"true"===i&&(n[a]=!0),isNaN(i)||(n[a]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}}(t);if(this.formats[i]){let t=e;try{const o=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},s=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,s,{...a,...r,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e);return i}}class z extends s{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=o.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},a={},o={},s={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===a[o]&&(a[o]=!0):(this.state[o]=1,r=!1,void 0===a[o]&&(a[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===s[t]&&(s[t]=!0)))})),r||(o[e]=!0)})),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2;const o={};this.queue.forEach((n=>{!function(e,t,n){const{obj:r,k:i}=d(e,t,Object);r[i]=r[i]||[],r[i].push(n)}(n.loaded,[i],a),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:a});this.readingCalls++;const o=(o,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&s&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,a)}),i):a(o,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,o);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>o(null,e))).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,a)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,a),this.loaded(e,n,a)}))}saveMissing(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const s={...a,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,s):c(e,t,n,r),i&&"function"==typeof i.then?i.then((e=>o(null,e))).catch(o):o(null,i)}catch(e){o(e)}else c(e,t,n,r,o,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}function $(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"==typeof e[1]&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function j(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function B(){}class V extends s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=j(e),this.services={},this.logger=o,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=$();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options={...r,...this.options,...j(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){let t;this.modules.logger?o.init(i(this.modules.logger),this.options):o.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=F);const n=new E(this.options);this.store=new k(this.options.resources,this.options);const a=this.services;a.logger=o,a.resourceStore=this.store,a.languageUtils=n,a.pluralResolver=new P(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(a.formatter=i(t),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new L(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new z(i(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(a.languageDetector=i(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=i(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new T(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=B),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const a=c(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),a}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;const n="string"==typeof e?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=c();return e||(e=this.languages),t||(t=this.options.ns),n||(n=B),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&x.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=c();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(e,a)=>{a?(i(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const n="string"==typeof t?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{a(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let a;if("object"!=typeof t){for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];a=r.options.overloadTranslationOptionHandler([e,t].concat(s))}else a={...t};a.lng=a.lng||i.lng,a.lngs=a.lngs||i.lngs,a.ns=a.ns||i.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||n||i.keyPrefix);const u=r.options.keySeparator||".";let l;return l=a.keyPrefix&&Array.isArray(e)?e.map((e=>`${a.keyPrefix}${u}${e}`)):a.keyPrefix?`${a.keyPrefix}${u}${e}`:e,r.t(l,a)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const a=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||2===n};if(t.precheck){const e=t.precheck(this,a);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!a(n,e)||r&&!a(i,e)))}loadNamespaces(e,t){const n=c();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=c();"string"==typeof e&&(e=[e]);const r=this.options.preload||[],i=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=r.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new E($());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new V(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new V(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new k(this.store.data,r),i.services.resourceStore=i.store),i.translator=new T(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const U=V.createInstance();U.createInstance=V.createInstance;U.createInstance,U.dir,U.init,U.loadResources,U.reloadResources,U.use,U.changeLanguage,U.getFixedT;const G=U.t;U.exists,U.setDefaultNamespace,U.hasLoadedNamespace,U.loadNamespaces,U.loadLanguages;function q(e,t){return function(){return e.apply(t,arguments)}}const{toString:W}=Object.prototype,{getPrototypeOf:H}=Object,Y=(K=Object.create(null),e=>{const t=W.call(e);return K[t]||(K[t]=t.slice(8,-1).toLowerCase())});var K;const X=e=>(e=e.toLowerCase(),t=>Y(t)===e),Q=e=>t=>typeof t===e,{isArray:J}=Array,Z=Q("undefined");const ee=X("ArrayBuffer");const te=Q("string"),ne=Q("function"),re=Q("number"),ie=e=>null!==e&&"object"==typeof e,ae=e=>{if("object"!==Y(e))return!1;const t=H(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},oe=X("Date"),se=X("File"),ce=X("Blob"),ue=X("FileList"),le=X("URLSearchParams"),[de,pe,he,fe]=["ReadableStream","Request","Response","Headers"].map(X);function me(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),J(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let o;for(r=0;r<a;r++)o=i[r],t.call(null,e[o],o,e)}}function ge(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const _e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ve=e=>!Z(e)&&e!==_e;const ye=(be="undefined"!=typeof Uint8Array&&H(Uint8Array),e=>be&&e instanceof be);var be;const we=X("HTMLFormElement"),ke=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),xe=X("RegExp"),Se=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};me(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},Te="abcdefghijklmnopqrstuvwxyz",Ce="0123456789",Ee={DIGIT:Ce,ALPHA:Te,ALPHA_DIGIT:Te+Te.toUpperCase()+Ce};const Ie=X("AsyncFunction"),Ne=(Ae="function"==typeof setImmediate,Oe=ne(_e.postMessage),Ae?setImmediate:Oe?((e,t)=>(_e.addEventListener("message",(({source:n,data:r})=>{n===_e&&r===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),_e.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var Ae,Oe;const Re="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_e):"undefined"!=typeof process&&process.nextTick||Ne,Pe={isArray:J,isArrayBuffer:ee,isBuffer:function(e){return null!==e&&!Z(e)&&null!==e.constructor&&!Z(e.constructor)&&ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ne(e.append)&&("formdata"===(t=Y(e))||"object"===t&&ne(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ee(e.buffer),t},isString:te,isNumber:re,isBoolean:e=>!0===e||!1===e,isObject:ie,isPlainObject:ae,isReadableStream:de,isRequest:pe,isResponse:he,isHeaders:fe,isUndefined:Z,isDate:oe,isFile:se,isBlob:ce,isRegExp:xe,isFunction:ne,isStream:e=>ie(e)&&ne(e.pipe),isURLSearchParams:le,isTypedArray:ye,isFileList:ue,forEach:me,merge:function e(){const{caseless:t}=ve(this)&&this||{},n={},r=(r,i)=>{const a=t&&ge(n,i)||i;ae(n[a])&&ae(r)?n[a]=e(n[a],r):ae(r)?n[a]=e({},r):J(r)?n[a]=r.slice():n[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&me(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(me(t,((t,r)=>{n&&ne(t)?e[r]=q(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&H(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Y,kindOfTest:X,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(J(e))return e;let t=e.length;if(!re(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:we,hasOwnProperty:ke,hasOwnProp:ke,reduceDescriptors:Se,freezeMethods:e=>{Se(e,((t,n)=>{if(ne(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ne(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return J(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ge,global:_e,isContextDefined:ve,ALPHABET:Ee,generateString:(e=16,t=Ee.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ne(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ie(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=J(e)?[]:{};return me(e,((e,t)=>{const a=n(e,r+1);!Z(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Ie,isThenable:e=>e&&(ie(e)||ne(e))&&ne(e.then)&&ne(e.catch),setImmediate:Ne,asap:Re};function De(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Pe.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.status}}});const Le=De.prototype,Me={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Me[e]={value:e}})),Object.defineProperties(De,Me),Object.defineProperty(Le,"isAxiosError",{value:!0}),De.from=(e,t,n,r,i,a)=>{const o=Object.create(Le);return Pe.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),De.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const Fe=De;function ze(e){return Pe.isPlainObject(e)||Pe.isArray(e)}function $e(e){return Pe.endsWith(e,"[]")?e.slice(0,-2):e}function je(e,t,n){return e?e.concat(t).map((function(e,t){return e=$e(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Be=Pe.toFlatObject(Pe,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ve=function(e,t,n){if(!Pe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Pe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Pe.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Pe.isSpecCompliantForm(t);if(!Pe.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Pe.isDate(e))return e.toISOString();if(!s&&Pe.isBlob(e))throw new Fe("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(e)||Pe.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(Pe.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Pe.isArray(e)&&function(e){return Pe.isArray(e)&&!e.some(ze)}(e)||(Pe.isFileList(e)||Pe.endsWith(n,"[]"))&&(s=Pe.toArray(e)))return n=$e(n),s.forEach((function(e,r){!Pe.isUndefined(e)&&null!==e&&t.append(!0===o?je([n],r,a):null===o?n:n+"[]",c(e))})),!1;return!!ze(e)||(t.append(je(i,n,a),c(e)),!1)}const l=[],d=Object.assign(Be,{defaultVisitor:u,convertValue:c,isVisitable:ze});if(!Pe.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Pe.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Pe.forEach(n,(function(n,a){!0===(!(Pe.isUndefined(n)||null===n)&&i.call(t,n,Pe.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function Ue(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ge(e,t){this._pairs=[],e&&Ve(e,this,t)}const qe=Ge.prototype;qe.append=function(e,t){this._pairs.push([e,t])},qe.toString=function(e){const t=e?function(t){return e.call(this,t,Ue)}:Ue;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const We=Ge;function He(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ye(e,t,n){if(!t)return e;const r=n&&n.encode||He;Pe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):Pe.isURLSearchParams(t)?t.toString():new We(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Ke=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Pe.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qe={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:We,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Je="undefined"!=typeof window&&"undefined"!=typeof document,Ze="object"==typeof navigator&&navigator||void 0,et=Je&&(!Ze||["ReactNative","NativeScript","NS"].indexOf(Ze.product)<0),tt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,nt=Je&&window.location.href||"http://localhost",rt={...e,...Qe};const it=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),s=i>=e.length;if(a=!a&&Pe.isArray(r)?r.length:a,s)return Pe.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o;r[a]&&Pe.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],i)&&Pe.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!o}if(Pe.isFormData(e)&&Pe.isFunction(e.entries)){const n={};return Pe.forEachEntry(e,((e,r)=>{t(function(e){return Pe.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const at={transitional:Xe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Pe.isObject(e);i&&Pe.isHTMLForm(e)&&(e=new FormData(e));if(Pe.isFormData(e))return r?JSON.stringify(it(e)):e;if(Pe.isArrayBuffer(e)||Pe.isBuffer(e)||Pe.isStream(e)||Pe.isFile(e)||Pe.isBlob(e)||Pe.isReadableStream(e))return e;if(Pe.isArrayBufferView(e))return e.buffer;if(Pe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ve(e,new rt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return rt.isNode&&Pe.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Pe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ve(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Pe.isString(e))try{return(t||JSON.parse)(e),Pe.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||at.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Pe.isResponse(e)||Pe.isReadableStream(e))return e;if(e&&Pe.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Fe.from(e,Fe.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rt.classes.FormData,Blob:rt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],(e=>{at.headers[e]={}}));const ot=at,st=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ct=Symbol("internals");function ut(e){return e&&String(e).trim().toLowerCase()}function lt(e){return!1===e||null==e?e:Pe.isArray(e)?e.map(lt):String(e)}function dt(e,t,n,r,i){return Pe.isFunction(r)?r.call(this,t,n):(i&&(t=n),Pe.isString(t)?Pe.isString(r)?-1!==t.indexOf(r):Pe.isRegExp(r)?r.test(t):void 0:void 0)}class pt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=ut(t);if(!i)throw new Error("header name must be a non-empty string");const a=Pe.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=lt(e))}const a=(e,t)=>Pe.forEach(e,((e,n)=>i(e,n,t)));if(Pe.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Pe.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&st[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Pe.isHeaders(e))for(const[t,r]of e.entries())i(r,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=ut(e)){const n=Pe.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Pe.isFunction(t))return t.call(this,e,n);if(Pe.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ut(e)){const n=Pe.findKey(this,e);return!(!n||void 0===this[n]||t&&!dt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=ut(e)){const i=Pe.findKey(n,e);!i||t&&!dt(0,n[i],i,t)||(delete n[i],r=!0)}}return Pe.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!dt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Pe.forEach(this,((r,i)=>{const a=Pe.findKey(n,i);if(a)return t[a]=lt(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=lt(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Pe.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Pe.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ct]=this[ct]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ut(e);t[r]||(!function(e,t){const n=Pe.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Pe.isArray(e)?e.forEach(r):r(e),this}}pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Pe.reduceDescriptors(pt.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Pe.freezeMethods(pt);const ht=pt;function ft(e,t){const n=this||ot,r=t||n,i=ht.from(r.headers);let a=r.data;return Pe.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function mt(e){return!(!e||!e.__CANCEL__)}function gt(e,t,n){Fe.call(this,null==e?"canceled":e,Fe.ERR_CANCELED,t,n),this.name="CanceledError"}Pe.inherits(gt,Fe,{__CANCEL__:!0});const _t=gt;function vt(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Fe("Request failed with status code "+n.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const yt=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,o=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),u=r[o];i||(i=c),n[a]=s,r[a]=c;let l=o,d=0;for(;l!==a;)d+=n[l++],l%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),c-i<t)return;const p=u&&c-u;return p?Math.round(1e3*d/p):void 0}};const bt=function(e,t){let n,r,i=0,a=1e3/t;const o=(t,a=Date.now())=>{i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-i;s>=a?o(e,t):(n=e,r||(r=setTimeout((()=>{r=null,o(n)}),a-s)))},()=>n&&o(n)]},wt=(e,t,n=3)=>{let r=0;const i=yt(50,250);return bt((n=>{const a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,c=i(s);r=a;e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:c||void 0,estimated:c&&o&&a<=o?(o-a)/c:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},kt=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},xt=e=>(...t)=>Pe.asap((()=>e(...t))),St=rt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,rt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(rt.origin),rt.navigator&&/(msie|trident)/i.test(rt.navigator.userAgent)):()=>!0,Tt=rt.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const o=[e+"="+encodeURIComponent(t)];Pe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Pe.isString(r)&&o.push("path="+r),Pe.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ct(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Et=e=>e instanceof ht?{...e}:e;function It(e,t){t=t||{};const n={};function r(e,t,n,r){return Pe.isPlainObject(e)&&Pe.isPlainObject(t)?Pe.merge.call({caseless:r},e,t):Pe.isPlainObject(t)?Pe.merge({},t):Pe.isArray(t)?t.slice():t}function i(e,t,n,i){return Pe.isUndefined(t)?Pe.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!Pe.isUndefined(t))return r(void 0,t)}function o(e,t){return Pe.isUndefined(t)?Pe.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,n)=>i(Et(e),Et(t),0,!0)};return Pe.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=c[r]||i,o=a(e[r],t[r],r);Pe.isUndefined(o)&&a!==s||(n[r]=o)})),n}const Nt=e=>{const t=It({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:c}=t;if(t.headers=s=ht.from(s),t.url=Ye(Ct(t.baseURL,t.url),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Pe.isFormData(r))if(rt.hasStandardBrowserEnv||rt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(rt.hasStandardBrowserEnv&&(i&&Pe.isFunction(i)&&(i=i(t)),i||!1!==i&&St(t.url))){const e=a&&o&&Tt.read(o);e&&s.set(a,e)}return t},At="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Nt(e);let i=r.data;const a=ht.from(r.headers).normalize();let o,s,c,u,l,{responseType:d,onUploadProgress:p,onDownloadProgress:h}=r;function f(){u&&u(),l&&l(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=ht.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());vt((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Fe("Request aborted",Fe.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Fe("Network Error",Fe.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Xe;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Fe(t,i.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&Pe.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Pe.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),h&&([c,l]=wt(h,!0),m.addEventListener("progress",c)),p&&m.upload&&([s,u]=wt(p),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new _t(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const _=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);_&&-1===rt.protocols.indexOf(_)?n(new Fe("Unsupported protocol "+_+":",Fe.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Ot=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Fe?t:new _t(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Fe(`timeout ${t} of ms exceeded`,Fe.ETIMEDOUT))}),t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>Pe.asap(o),s}},Rt=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Pt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Dt=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of Pt(e))yield*Rt(n,t)}(e,t);let a,o=0,s=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let a=r.byteLength;if(n){let e=o+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},Lt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Mt=Lt&&"function"==typeof ReadableStream,Ft=Lt&&("function"==typeof TextEncoder?(zt=new TextEncoder,e=>zt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var zt;const $t=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},jt=Mt&&$t((()=>{let e=!1;const t=new Request(rt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Bt=Mt&&$t((()=>Pe.isReadableStream(new Response("").body))),Vt={stream:Bt&&(e=>e.body)};var Ut;Lt&&(Ut=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Vt[e]&&(Vt[e]=Pe.isFunction(Ut[e])?t=>t[e]():(t,n)=>{throw new Fe(`Response type '${e}' is not supported`,Fe.ERR_NOT_SUPPORT,n)})})));const Gt=async(e,t)=>{const n=Pe.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Pe.isBlob(e))return e.size;if(Pe.isSpecCompliantForm(e)){const t=new Request(rt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Pe.isArrayBufferView(e)||Pe.isArrayBuffer(e)?e.byteLength:(Pe.isURLSearchParams(e)&&(e+=""),Pe.isString(e)?(await Ft(e)).byteLength:void 0)})(t):n},qt={http:null,xhr:At,fetch:Lt&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:c,responseType:u,headers:l,withCredentials:d="same-origin",fetchOptions:p}=Nt(e);u=u?(u+"").toLowerCase():"text";let h,f=Ot([i,a&&a.toAbortSignal()],o);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&jt&&"get"!==n&&"head"!==n&&0!==(g=await Gt(l,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Pe.isFormData(r)&&(e=n.headers.get("content-type"))&&l.setContentType(e),n.body){const[e,t]=kt(g,wt(xt(c)));r=Dt(n.body,65536,e,t)}}Pe.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;h=new Request(t,{...p,signal:f,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let a=await fetch(h);const o=Bt&&("stream"===u||"response"===u);if(Bt&&(s||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Pe.toFiniteNumber(a.headers.get("content-length")),[n,r]=s&&kt(t,wt(xt(s),!0))||[];a=new Response(Dt(a.body,65536,n,(()=>{r&&r(),m&&m()})),e)}u=u||"text";let _=await Vt[Pe.findKey(Vt,u)||"text"](a,e);return!o&&m&&m(),await new Promise(((t,n)=>{vt(t,n,{data:_,headers:ht.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:h})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,e,h),{cause:t.cause||t});throw Fe.from(t,t&&t.code,e,h)}})};Pe.forEach(qt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Wt=e=>`- ${e}`,Ht=e=>Pe.isFunction(e)||null===e||!1===e,Yt=e=>{e=Pe.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!Ht(n)&&(r=qt[(t=String(n)).toLowerCase()],void 0===r))throw new Fe(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(Wt).join("\n"):" "+Wt(e[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Kt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _t(null,e)}function Xt(e){Kt(e),e.headers=ht.from(e.headers),e.data=ft.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Yt(e.adapter||ot.adapter)(e).then((function(t){return Kt(e),t.data=ft.call(e,e.transformResponse,t),t.headers=ht.from(t.headers),t}),(function(t){return mt(t)||(Kt(e),t&&t.response&&(t.response.data=ft.call(e,e.transformResponse,t.response),t.response.headers=ht.from(t.response.headers))),Promise.reject(t)}))}const Qt="1.7.9",Jt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Jt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Zt={};Jt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Fe(r(i," has been removed"+(t?" in "+t:"")),Fe.ERR_DEPRECATED);return t&&!Zt[i]&&(Zt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},Jt.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const en={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new Fe("option "+a+" must be "+n,Fe.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Fe("Unknown option "+a,Fe.ERR_BAD_OPTION)}},validators:Jt},tn=en.validators;class nn{constructor(e){this.defaults=e,this.interceptors={request:new Ke,response:new Ke}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=It(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&en.assertOptions(n,{silentJSONParsing:tn.transitional(tn.boolean),forcedJSONParsing:tn.transitional(tn.boolean),clarifyTimeoutError:tn.transitional(tn.boolean)},!1),null!=r&&(Pe.isFunction(r)?t.paramsSerializer={serialize:r}:en.assertOptions(r,{encode:tn.function,serialize:tn.function},!0)),en.assertOptions(t,{baseUrl:tn.spelling("baseURL"),withXsrfToken:tn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Pe.merge(i.common,i[t.method]);i&&Pe.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=ht.concat(a,i);const o=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,d=0;if(!s){const e=[Xt.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);d<l;)u=u.then(e[d++],e[d++]);return u}l=o.length;let p=t;for(d=0;d<l;){const e=o[d++],t=o[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{u=Xt.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,l=c.length;d<l;)u=u.then(c[d++],c[d++]);return u}getUri(e){return Ye(Ct((e=It(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Pe.forEach(["delete","get","head","options"],(function(e){nn.prototype[e]=function(t,n){return this.request(It(n||{},{method:e,url:t,data:(n||{}).data}))}})),Pe.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(It(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}nn.prototype[e]=t(),nn.prototype[e+"Form"]=t(!0)}));const rn=nn;class an{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new _t(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new an((function(t){e=t})),cancel:e}}}const on=an;const sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sn).forEach((([e,t])=>{sn[t]=e}));const cn=sn;const un=function e(t){const n=new rn(t),r=q(rn.prototype.request,n);return Pe.extend(r,rn.prototype,n,{allOwnKeys:!0}),Pe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(It(t,n))},r}(ot);un.Axios=rn,un.CanceledError=_t,un.CancelToken=on,un.isCancel=mt,un.VERSION=Qt,un.toFormData=Ve,un.AxiosError=Fe,un.Cancel=un.CanceledError,un.all=function(e){return Promise.all(e)},un.spread=function(e){return function(t){return e.apply(null,t)}},un.isAxiosError=function(e){return Pe.isObject(e)&&!0===e.isAxiosError},un.mergeConfig=It,un.AxiosHeaders=ht,un.formToJSON=e=>it(Pe.isHTMLForm(e)?new FormData(e):e),un.getAdapter=Yt,un.HttpStatusCode=cn,un.default=un;const ln=un;var dn=n(4202);const pn=ln.create({baseURL:dn.BASE_URL,headers:{"content-type":dn.CONTENT_TYPE.JSON}});function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function fn(){fn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==hn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(hn(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function mn(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){mn(a,r,i,o,s,"next",e)}function s(e){mn(a,r,i,o,s,"throw",e)}o(void 0)}))}}var _n=function(){var e=gn(fn().mark((function e(t){var n,r;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/sessions/candidate_session/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vn=function(){var e=gn(fn().mark((function e(t){var n,r;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.put("/sessions/candidate_session/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function yn(e){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(e)}function bn(){bn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==yn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(yn(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function wn(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){wn(a,r,i,o,s,"next",e)}function s(e){wn(a,r,i,o,s,"throw",e)}o(void 0)}))}}var xn=function(){var e=kn(bn().mark((function e(t){var n,r;return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:"".concat(n)},params:t},e.abrupt("return",pn.get("/twilio/create_room/",r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sn=function(){var e=kn(bn().mark((function e(t){var n,r;return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:"".concat(n)},params:t},e.abrupt("return",pn.get("/twilio/get-token/",r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){var e=kn(bn().mark((function e(t){var n,r;return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:"".concat(n)}},e.abrupt("return",pn.post("/twilio/get_SID/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cn=function(){var e=kn(bn().mark((function e(t){var n,r;return bn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:"".concat(n)}},e.abrupt("return",pn.post("/twilio/candidate_get_create_room/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function In(){In=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==En(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(En(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Nn(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function An(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Nn(a,r,i,o,s,"next",e)}function s(e){Nn(a,r,i,o,s,"throw",e)}o(void 0)}))}}var On=function(){var e=An(In().mark((function e(t){var n,r;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/sessions/candidate_ai_event/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Pn(){Pn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Rn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Rn(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Dn(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ln(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Dn(a,r,i,o,s,"next",e)}function s(e){Dn(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Mn=function(){var e=Ln(Pn().mark((function e(t){var n,r;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/sessions/candidate_event/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function zn(){zn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Fn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Fn(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function $n(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$n(a,r,i,o,s,"next",e)}function s(e){$n(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Bn,Vn=function(){var e=jn(zn().mark((function e(t){var n,r;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/general/info/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Un=function(){var e=jn(zn().mark((function e(t){var n,r,i;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),(r=new FormData).append("files",t.file,"".concat(Date.now())),r.append("folder_name",t.folderName),i={headers:{token:n,"Content-Type":"multipart/form-data"}},e.abrupt("return",pn.post("/general/candidate_upload_file/",r,i));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gn=function(){return Gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gn.apply(this,arguments)},qn=function(){function e(e){this.options=e,this.listeners={}}return e.prototype.on=function(e,t){var n=this.listeners[e]||[];this.listeners[e]=n.concat([t])},e.prototype.triggerEvent=function(e,t){var n=this;(this.listeners[e]||[]).forEach((function(e){return e({target:n,event:t})}))},e}();!function(e){e[e.Add=0]="Add",e[e.Remove=1]="Remove"}(Bn||(Bn={}));var Wn,Hn=function(){function e(){this.notifications=[]}return e.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,Bn.Add,this.notifications)},e.prototype.splice=function(e,t){var n=this.notifications.splice(e,t)[0];return this.updateFn(n,Bn.Remove,this.notifications),n},e.prototype.indexOf=function(e){return this.notifications.indexOf(e)},e.prototype.onUpdate=function(e){this.updateFn=e},e}();!function(e){e.Dismiss="dismiss",e.Click="click"}(Wn||(Wn={}));var Yn={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},Kn=function(){function e(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),t=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(t),document.body.appendChild(e),this.container=t,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return e.prototype.on=function(e,t){var n;this.events=Gn(Gn({},this.events),((n={})[e]=t,n))},e.prototype.update=function(e,t){t===Bn.Add?this.addNotification(e):t===Bn.Remove&&this.removeNotification(e)},e.prototype.removeNotification=function(e){var t,n,r=this,i=this._popRenderedNotification(e);i&&((t=i.node).classList.add("notyf__toast--disappear"),t.addEventListener(this.animationEndEventName,n=function(e){e.target===t&&(t.removeEventListener(r.animationEndEventName,n),r.container.removeChild(t))}))},e.prototype.addNotification=function(e){var t=this._renderNotification(e);this.notifications.push({notification:e,node:t}),this._announce(e.options.message||"Notification")},e.prototype._renderNotification=function(e){var t,n=this._buildNotificationCard(e),r=e.options.className;return r&&(t=n.classList).add.apply(t,r.split(" ")),this.container.appendChild(n),n},e.prototype._popRenderedNotification=function(e){for(var t=-1,n=0;n<this.notifications.length&&t<0;n++)this.notifications[n].notification===e&&(t=n);if(-1!==t)return this.notifications.splice(t,1)[0]},e.prototype.getXPosition=function(e){var t;return(null===(t=null==e?void 0:e.position)||void 0===t?void 0:t.x)||"right"},e.prototype.getYPosition=function(e){var t;return(null===(t=null==e?void 0:e.position)||void 0===t?void 0:t.y)||"bottom"},e.prototype.adjustContainerAlignment=function(e){var t=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],r=this.container.style;r.setProperty("justify-content",n),r.setProperty("align-items",t)},e.prototype._buildNotificationCard=function(e){var t=this,n=e.options,r=n.icon;this.adjustContainerAlignment(n);var i=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),a=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),o=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),s=this._createHTMLElement({tagName:"div",className:"notyf__message"});s.innerHTML=n.message||"";var c=n.background||n.backgroundColor;if(r){var u=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if(("string"==typeof r||r instanceof String)&&(u.innerHTML=new String(r).valueOf()),"object"==typeof r){var l=r.tagName,d=void 0===l?"i":l,p=r.className,h=r.text,f=r.color,m=void 0===f?c:f,g=this._createHTMLElement({tagName:d,className:p,text:h});m&&(g.style.color=m),u.appendChild(g)}o.appendChild(u)}if(o.appendChild(s),i.appendChild(o),c&&(n.ripple?(a.style.background=c,i.appendChild(a)):i.style.background=c),n.dismissible){var _=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),v=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});_.appendChild(v),o.appendChild(_),i.classList.add("notyf__toast--dismissible"),v.addEventListener("click",(function(n){var r,i;null===(i=(r=t.events)[Wn.Dismiss])||void 0===i||i.call(r,{target:e,event:n}),n.stopPropagation()}))}i.addEventListener("click",(function(n){var r,i;return null===(i=(r=t.events)[Wn.Click])||void 0===i?void 0:i.call(r,{target:e,event:n})}));var y="top"===this.getYPosition(n)?"upper":"lower";return i.classList.add("notyf__toast--"+y),i},e.prototype._createHTMLElement=function(e){var t=e.tagName,n=e.className,r=e.text,i=document.createElement(t);return n&&(i.className=n),i.textContent=r||null,i},e.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},e.prototype._announce=function(e){var t=this;this.a11yContainer.textContent="",setTimeout((function(){t.a11yContainer.textContent=e}),100)},e.prototype._getAnimationEndEventName=function(){var e,t=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(e in n)if(void 0!==t.style[e])return n[e];return"animationend"},e}(),Xn=function(){function e(e){var t=this;this.dismiss=this._removeNotification,this.notifications=new Hn,this.view=new Kn;var n=this.registerTypes(e);this.options=Gn(Gn({},Yn),e),this.options.types=n,this.notifications.onUpdate((function(e,n){return t.view.update(e,n)})),this.view.on(Wn.Dismiss,(function(e){var n=e.target,r=e.event;t._removeNotification(n),n.triggerEvent(Wn.Dismiss,r)})),this.view.on(Wn.Click,(function(e){var t=e.target,n=e.event;return t.triggerEvent(Wn.Click,n)}))}return e.prototype.error=function(e){var t=this.normalizeOptions("error",e);return this.open(t)},e.prototype.success=function(e){var t=this.normalizeOptions("success",e);return this.open(t)},e.prototype.open=function(e){var t=this.options.types.find((function(t){return t.type===e.type}))||{},n=Gn(Gn({},t),e);this.assignProps(["ripple","position","dismissible"],n);var r=new qn(n);return this._pushNotification(r),r},e.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},e.prototype.assignProps=function(e,t){var n=this;e.forEach((function(e){t[e]=null==t[e]?n.options[e]:t[e]}))},e.prototype._pushNotification=function(e){var t=this;this.notifications.push(e);var n=void 0!==e.options.duration?e.options.duration:this.options.duration;n&&setTimeout((function(){return t._removeNotification(e)}),n)},e.prototype._removeNotification=function(e){var t=this.notifications.indexOf(e);-1!==t&&this.notifications.splice(t,1)},e.prototype.normalizeOptions=function(e,t){var n={type:e};return"string"==typeof t?n.message=t:"object"==typeof t&&(n=Gn(Gn({},n),t)),n},e.prototype.registerTypes=function(e){var t=(e&&e.types||[]).slice(),n=Yn.types.map((function(e){var n=-1;t.forEach((function(t,r){t.type===e.type&&(n=r)}));var r=-1!==n?t.splice(n,1)[0]:{};return Gn(Gn({},e),r)}));return n.concat(t)},e}();function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function Jn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e){return function(e){if(Array.isArray(e))return ir(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){if(e){if("string"==typeof e)return ir(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(e,t):void 0}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ar(){ar=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Qn(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Qn(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function or(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){or(a,r,i,o,s,"next",e)}function s(e){or(a,r,i,o,s,"throw",e)}o(void 0)}))}}var cr=function(e){var t=e.split(",");if(t.length<2)return null;for(var n=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),r=t[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([i],{type:r})},ur=function(e){var t=e.isUTC,n=void 0!==t&&t,r=e.inputDate,i=void 0===r?new Date:r,a=new Date(i);return n?a.getTime()-60*a.getTimezoneOffset()*1e3:a.getTime()},lr=function(){return new Promise((function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e(t)})).catch((function(){e(!1)}));else if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia){(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)({video:!0},(function(t){e(t)}),(function(){e(!1)}))}else e(!1)}))},dr=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,i=n.longitude;e({latitude:r,longitude:i})}),(function(t){e(!1)}))}))},pr=function(){var e=sr(ar().mark((function e(){return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.screen.isExtended){e.next=4;break}return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hr=function(){return new Promise((function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e(t)})).catch((function(){e(!1)}));else if(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia){(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)({audio:!0},(function(t){e(t)}),(function(){e(!1)}))}else e(!1)}))},fr=function(){var e=sr(ar().mark((function e(t){var n,r,i,a,o;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.eventName,r=t.eventValue,e.prev=1,i=br("session"),a=i.browserEvents,null==i||!i.id){e.next=8;break}return o={name:n,value:r,session_id:null==i?void 0:i.id,start_at:0!==(null==i?void 0:i.quizStartTime)?Math.round((ur({isUTC:!0})-(null==i?void 0:i.quizStartTime))/1e3):0},Er("session",{browserEvents:[].concat(nr(a),[o])}),e.abrupt("return",Mn(o));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),Zr.error("Error in register event",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),mr=function(){var e,t=Tr(),n=(null==t?void 0:t.entities)||[];(null==n?void 0:n.some((function(e){return"chat_bot"===e.key})))&&(document.querySelector("#ze-snippet")||((e=document.createElement("script")).src="https://static.zdassets.com/ekr/snippet.js?key=6542e7ef-41de-43ed-bc22-3d429a78ead3",e.async=!0,e.id="ze-snippet",document.body.appendChild(e)),window.zE&&"function"==typeof window.zE&&window.zE("messenger","show"))},gr=function(){if(window.zE&&"function"==typeof window.zE)try{window.zE("messenger","hide"),window.zE("messenger","close")}catch(e){Zr.error("Error resetting the Zendesk widget:",e)}},_r=function(){var e=document.getElementById("ze-snippet");if(e&&e.parentNode&&e.parentNode.removeChild(e),window.zE&&"function"==typeof window.zE)try{window.zE("messenger","hide"),window.zE("messenger","close"),delete window.zE,delete window.zESettings}catch(e){Zr.error("Error resetting the Zendesk widget:",e)}},vr=function(){var e=localStorage.getItem("mereosToken");if(e){var t=JSON.parse(e),n=t.token,r=t.expiresAt;return Date.now()>r?(localStorage.removeItem("mereosToken"),null):n}return null},yr=function(){var e=sr(ar().mark((function e(t){return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln.post("".concat(dn.BASE_URL,"/general/rekognition/"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(e){return JSON.parse(localStorage.getItem(e))},wr=function(){var e=sr(ar().mark((function e(t){var n;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){fetch(t).then((function(e){return e.blob()})).then((function(t){var n=new FileReader;n.onloadend=function(){e(n.result),n.result.replace("data:","").replace(/^.+,/,"")},n.readAsDataURL(t)}))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,r=["cards","document","text","id cards","passport","driving license","license","id","identity","doc","cnic","nic"],i=0,a=0;return null==e||null===(t=e.Labels)||void 0===t||t.forEach((function(e){r.includes(e.Name.toLowerCase())&&(i+=e.Confidence,a+=1)})),i/a>n},xr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,n=0,r=0;return e.TextDetections.forEach((function(e){n+=e.Confidence,r+=1})),n/r>=t},Sr=function(e,t){var n,r=[],i=Jn(t);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Jn(e);try{for(s.s();!(a=s.n()).done;){if(a.value===o.key){r.push(o);break}}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}return r},Tr=function(){return JSON.parse(localStorage.getItem("secureFeatures"))},Cr=function(){var e=sr(ar().mark((function e(){var t,n;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:if(t=e.sent,!((n=t.filter((function(e){return"audioinput"===e.kind}))).length>0)){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",[]);case 12:return e.prev=12,e.t0=e.catch(0),"NotAllowedError"===e.t0.name||e.t0.name,Zr.error("Permission denied:",e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Er=function(e,t){var n=localStorage.getItem(e);if(n){var r=JSON.parse(n);for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var a=JSON.stringify(r);localStorage.setItem(e,a)}else Zr.warn('No item found in localStorage with key "'.concat(e,'"'))},Ir=function(){var e=sr(ar().mark((function e(t){return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=sr(ar().mark((function e(n,r){var i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d=t.aiEvents,p=t.browserEvents,h=Tr(),![].concat(nr(null==t?void 0:t.user_video_name),nr(null==t?void 0:t.user_audio_name),nr(null==t?void 0:t.screen_sharing_video_name),nr(null==t?void 0:t.mobileRecordings),nr(null==t?void 0:t.mobileAudios)).length){e.next=13;break}if(null==(m=[].concat(nr(null==t?void 0:t.user_video_name),nr(null==t?void 0:t.user_audio_name),nr(null==t?void 0:t.screen_sharing_video_name),nr(null==t?void 0:t.mobileRecordings),nr(null==t?void 0:t.mobileAudios)))||!m.length){e.next=11;break}return e.next=8,Tn({source_id:[].concat(nr(null==t?void 0:t.user_video_name),nr(null==t?void 0:t.user_audio_name),nr(null==t?void 0:t.screen_sharing_video_name),nr(null==t?void 0:t.mobileRecordings),nr(null==t?void 0:t.mobileAudios))});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:f=e.t0;case 13:if(g={start_time:null==t?void 0:t.quizStartTime,submission_time:null==t?void 0:t.submissionTime,duration_taken:null!=t&&t.quizStartTime?ur({isUTC:!0})-t.quizStartTime:0,identity_card:null==t?void 0:t.identityCard,room_scan_video:null==t?void 0:t.room_scan_video,identity_photo:null==t?void 0:t.candidatePhoto,user_video_name:(null===(i=f)||void 0===i||null===(i=i.data)||void 0===i||null===(i=i.filter((function(e){return t.user_video_name.find((function(t){return t===e.source_sid}))})))||void 0===i?void 0:i.map((function(e){return e.media_external_location})))||[],user_audio_name:(null===(a=f)||void 0===a||null===(a=a.data)||void 0===a||null===(a=a.filter((function(e){return t.user_audio_name.find((function(t){return t===e.source_sid}))})))||void 0===a?void 0:a.map((function(e){return e.media_external_location})))||[],screen_sharing_video_name:(null===(o=f)||void 0===o||null===(o=o.data)||void 0===o||null===(o=o.filter((function(e){return t.screen_sharing_video_name.find((function(t){return t===e.source_sid}))})))||void 0===o?void 0:o.map((function(e){return e.media_external_location})))||[],roomscan_recordings:null==t?void 0:t.roomScanRecordings,session_id:null==t?void 0:t.sessionId,archive_id:null==t?void 0:t.room_id,location:null==t?void 0:t.location,collected_details:{download_speed:null==t?void 0:t.downloadSpeed,upload_speed:null==t?void 0:t.uploadSpeed,cpu_info:null==t?void 0:t.CPUSpeed,ram_info:null==t?void 0:t.RAMSpeed},status:null==t?void 0:t.sessionStatus,video_codec:null===(s=f)||void 0===s||null===(s=s.data)||void 0===s||null===(s=s.filter((function(e){var n;return null===(n=t.user_video_name)||void 0===n?void 0:n.find((function(t){return t===e.source_sid}))})))||void 0===s?void 0:s.map((function(e){return e.codec}))[0],video_extension:null===(c=f)||void 0===c||null===(c=c.data)||void 0===c||null===(c=c.filter((function(e){var n;return null===(n=t.user_video_name)||void 0===n?void 0:n.find((function(t){return t===e.source_sid}))})))||void 0===c?void 0:c.map((function(e){return e.container_format}))[0],incident_level:ai(d,p,h),mobile_audio_name:(null===(u=f)||void 0===u||null===(u=u.data)||void 0===u||null===(u=u.filter((function(e){var n;return null==t||null===(n=t.mobileAudios)||void 0===n?void 0:n.find((function(t){return t===e.source_sid}))})))||void 0===u?void 0:u.map((function(e){return e.media_external_location})))||[],mobile_video_name:(null===(l=f)||void 0===l||null===(l=l.data)||void 0===l||null===(l=l.filter((function(e){var n;return null==t||null===(n=t.mobileRecordings)||void 0===n?void 0:n.find((function(t){return t===e.source_sid}))})))||void 0===l?void 0:l.map((function(e){return e.media_external_location})))||[],conversation_id:localStorage.getItem("conversationId")||"",candidate_assessment:null==t?void 0:t.candidate_assessment},null!=t&&t.id&&(g.id=null==t?void 0:t.id),null==t||!t.id){e.next=21;break}return e.next=18,vn(g);case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,_n(g);case 23:e.t1=e.sent;case 24:_=e.t1,n(_),e.next=33;break;case 28:e.prev=28,e.t2=e.catch(0),403===(null===(v=e.t2.response)||void 0===v?void 0:v.status)&&window.globalCallback&&(null===(y=window)||void 0===y||y.globalCallback({type:"error",message:"error_saving_session_info",code:40018})),window.startRecordingCallBack&&(null===(b=window)||void 0===b||b.startRecordingCallBack({type:"error",message:"error_saving_session_info",code:40018})),r(e.t2);case 33:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,i=new Date(r),a=i.getUTCFullYear(),o=("0"+i.getUTCDate()).substr(-2),s=("0"+(i.getUTCMonth()+1)).substr(-2),c=("0"+i.getUTCHours()).substr(-2),u=("0"+i.getUTCMinutes()).substr(-2),l=("0"+i.getUTCSeconds()).substr(-2);return"".concat(a).concat(e).concat(o).concat(e).concat(s).concat(n).concat(c).concat(t).concat(u).concat(t).concat(l)},Ar=function(){var e=sr(ar().mark((function e(t){var n,r,i,a,o;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventName,r=t.startTime,i=t.endTime,e.prev=1,a=br("session"),o={name:n,start_at:r,end_at:i,value:n,created_at:Nr(),session_id:null==a?void 0:a.id},e.next=6,On(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Zr.error("Error in register ai event",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Or=function(e){return new Promise(function(){var t=sr(ar().mark((function t(n,r){var i,a,o,s;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},a=Jn(e),t.prev=2,a.s();case 4:if((o=a.n()).done){t.next=57;break}s=o.value,t.t0=s.key,t.next="disable_right_click"===t.t0?9:"disable_clipboard"===t.t0?14:"disable_downloading"===t.t0?19:"disable_keyboard_shortcuts"===t.t0?24:"disable_printing"===t.t0?29:"detect_unfocus"===t.t0?34:"detect_resizing_of_window"===t.t0?39:"verify_desktop"===t.t0?44:"force_full_screen"===t.t0?49:54;break;case 9:return t.next=11,Dr();case 11:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 14:return t.next=16,Lr();case 16:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 19:return t.next=21,Rr();case 21:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 24:return t.next=26,jr();case 26:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 29:return t.next=31,Br();case 31:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 34:return t.next=36,Fr();case 36:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 39:return t.next=41,Gr(null);case 41:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 44:return t.next=46,Mr();case 46:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 49:return t.next=51,qr();case 51:return t.sent&&(i=er(er({},i),{},tr({},s.name,!0))),t.abrupt("break",55);case 54:case 55:t.next=4;break;case 57:t.next=62;break;case 59:t.prev=59,t.t1=t.catch(2),a.e(t.t1);case 62:return t.prev=62,a.f(),t.finish(62);case 65:n(i);case 66:case"end":return t.stop()}}),t,null,[[2,59,62,65]])})));return function(e,n){return t.apply(this,arguments)}}())};function Rr(){document.addEventListener("contextmenu",(function(e){return e.preventDefault()})),document.addEventListener("keydown",(function(e){(e.ctrlKey||e.metaKey)&&["s","p","u"].includes(e.key.toLowerCase())&&e.preventDefault()}))}var Pr,Dr=function(){return new Promise((function(e,t){document.addEventListener("contextmenu",Yr),e(!0)}))},Lr=function(){return new Promise((function(e,t){"cut copy paste".split(" ").forEach((function(e){window.addEventListener(e,(function(e){e.preventDefault(),e.stopPropagation(),fr({notify:!1,eventName:"copy_paste_cut",eventType:"error"})}))})),e(!0)}))},Mr=function(){return new Promise((function(e,t){e(window.screen.isExtended)}))},Fr=function(){return new Promise(function(){var e=sr(ar().mark((function e(t,n){return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Pr=function(){document.hidden?(ti("error","moved_away_from_page"),fr({eventType:"error",notify:!1,eventName:"moved_away_from_page"})):fr({eventType:"success",notify:!1,eventName:"moved_back_to_page"})},document.addEventListener("visibilitychange",Pr),t(!0)}catch(e){Zr.error("Notification permission error:",e),t(!1)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};window.sharedMediaStream=null;var zr,$r,jr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t,n){document.onkeydown=function(t){if(((t=t||window.event).ctrlKey||t.metaKey)&&"p"===t.key&&(t.preventDefault(),t.stopPropagation()),(t.ctrlKey||t.metaKey)&&-1!=="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.key)&&(t.preventDefault(),t.stopPropagation()),(t.ctrlKey||t.metaKey)&&t.shiftKey&&-1!=="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.key)&&(t.preventDefault(),t.stopPropagation()),[27,91,112,113,114,115,116,117,118,119,120,121,122,123,91,44,173,174,114,145].includes(t.keyCode)){if(t.keyCode>=112&&t.keyCode<=123&&e.includes(t.keyCode))return;t.preventDefault(),t.stopPropagation()}},t(!0)}))},Br=function(){return new Promise((function(e,t){var n="\n\t\t\t@media print {\n\t\t\t\t* {\n\t\t\t\t\tdisplay: none !important;\n\t\t\t\t}\n\t\t\t}\n\t\t",r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");r.appendChild(i),i.type="text/css",i.media="print",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),window.onbeforeprint=function(){return!1},e(!0)}))},Vr=!1,Ur=function(){Vr||(fr({eventType:"error",notify:!1,eventName:"candidate_resized_window"}),Vr=!0),clearTimeout(zr),zr=setTimeout((function(){Vr=!1}),500)},Gr=function(){return new Promise((function(e,t){window.addEventListener("resize",Ur),e(!0)}))},qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;try{"function"==typeof e.requestFullscreen?e.requestFullscreen():"function"==typeof e.webkitRequestFullscreen?e.webkitRequestFullscreen():"function"==typeof e.msRequestFullscreen&&e.msRequestFullscreen(),$r||(($r=document.createElement("div")).id="white-Background-Element",$r.style.backgroundColor="white",$r.style.top="0",$r.style.left="0",$r.style.width="100%",$r.style.height="100%",$r.style.overflow="auto",$r.style.zIndex="1000",document.body.appendChild($r));var t=function(){document.fullscreenElement||($r&&document.body.contains($r)&&(document.body.removeChild($r),$r=null),document.removeEventListener("fullscreenchange",t))};document.addEventListener("fullscreenchange",t)}catch(e){Zr.error("An error occurred while attempting to enter fullscreen:",e)}},Wr=function(e){e.preventDefault(),e.returnValue="",fr({eventType:"error",notify:!1,eventName:"candidate_clicked_on_refresh_button",eventValue:Nr()})},Hr=function(){var e,t;window.startRecordingCallBack&&(window.startRecordingCallBack({type:"error",message:"candidate_clicked_on_browser_back_button",code:40005}),window.recordingStart=!1,(null===(e=window)||void 0===e||null===(e=e.socket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(null===(t=window.socket)||void 0===t||t.send(JSON.stringify({event:"resetSession"}))))},Yr=function(e){e.preventDefault(),e.stopPropagation()},Kr=function(){window.removeEventListener("contextmenu",Yr),window.removeEventListener("beforeunload",Wr),window.removeEventListener("popstate",Hr),"cut copy paste".split(" ").forEach((function(e){window.removeEventListener(e,Yr)})),document.onkeydown=null,document.querySelectorAll('style[media="print"]').forEach((function(e){e.textContent.includes("display: none")&&e.textContent.includes("visibility: hidden")&&e.remove()})),Pr&&(document.removeEventListener("visibilitychange",Pr),Pr=null),window.removeEventListener("resize",Ur),document.fullscreenElement&&document.exitFullscreen();var e=document.getElementById("white-Background-Element");e&&document.body.removeChild(e),window.alert=function(){}},Xr=function(){var e,t,n,r,i=localStorage.getItem("precheckSetting"),a=br("preChecksSteps"),o=Tr(),s=(null==o?void 0:o.entities)||[],c=function(e){return s.some((function(t){return t.key===e}))};return"session_resume"!==i?window.precheckCompleted&&c("record_screen")?"IdentityVerificationScreenFive":(localStorage.setItem("preChecksSteps",JSON.stringify(dn.preChecksSteps)),"ExamPreparation"):null!=a&&a.examPreparation||null==s||null===(e=s.filter((function(e){return dn.examPreparationSteps.includes(e.key)})))||void 0===e||!e.length?null!=a&&a.identityConfirmation||!c("verify_id")?null!=a&&a.diagnosticStep||null==s||null===(t=s.filter((function(e){return dn.systemDiagnosticSteps.includes(e.key)})))||void 0===t||!t.length?null!=a&&a.requirementStep||null==s||null===(n=s.filter((function(e){return dn.SYSTEM_REQUIREMENT_STEP.includes(e.key)})))||void 0===n||!n.length?null!=a&&a.preValidation||null==s||null===(r=s.filter((function(e){return dn.prevalidationSteps.includes(e.key)})))||void 0===r||!r.length?null!=a&&a.userPhoto||!c("verify_candidate")?null!=a&&a.identityCardPhoto||!c("verify_id")?null!=a&&a.audioDetection||!c("record_audio")?null!=a&&a.roomScanningVideo||!c("record_room")?null!=a&&a.mobileConnection||!c("mobile_proctoring")?null==a||!a.screenSharing||c("record_screen")?"IdentityVerificationScreenFive":void zo():"MobileProctoring":"IdentityVerificationScreenFour":"IdentityVerificationScreenThree":"IdentityVerificationScreenTwo":"IdentityVerificationScreenOne":"Prevalidationinstruction":"SystemRequirements":"runSystemDiagnostics":"IdentityCardRequirement":"ExamPreparation"},Qr=function(e){if(!e)return"en";if((e=e.toLowerCase()).includes("-"))return e.split("-")[0];return{french:"fr",english:"en",spanish:"es",german:"de",italian:"it",dutch:"nl",portugese:"pt",welsh:"cy"}[e]||e},Jr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n?console.log("%c".concat(e),t,n):console.log("%c".concat(e),t)},Zr={info:function(e,t){return Jr(e,"color: blue; font-weight: bold;",t)},success:function(e,t){return Jr(e,"color: green; font-weight: bold",t)},debug:function(e,t){return Jr(e,"color: orange; font-weight: bold;",t)},error:function(e,t){return Jr(e,"color: red; font-weight: bold;",t)},warn:function(e,t){return Jr(e,"color: yellow; font-weight: bold;",t)}},ei=function(){var e=void 0!==localStorage.getItem("schoolTheme")?JSON.parse(localStorage.getItem("schoolTheme")):{},t=(null==e?void 0:e.language)||"en";U.init({lng:Qr(t),resources:{cy:{translation:n(5595)},en:{translation:n(7740)},fr:{translation:n(311)},it:{translation:n(834)},pt:{translation:n(3895)},nl:{translation:n(9197)},es:{translation:n(2115)},de:{translation:n(9880)}}},(function(e){if(e)return Zr.error("Error in language",e)}))},ti=function(e,t){U.isInitialized||ei();var n=Tr(),r=(null==n?void 0:n.entities)||[];if(null==r?void 0:r.some((function(e){return"notify"===e.key}))){var i=new Xn,a=U.t(t),o={message:U.t(a),duration:3e3,position:{x:"right",y:"top"},ripple:!0};switch(e){case"error":i.error(o);break;case"success":i.success(o);break;case"warning":i.warning(o);break;default:Zr.warn("Invalid notification type")}}},ni=function(){var e=sr(ar().mark((function e(){var t;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={capacity:"Unknown",availableCapacity:"Unknown"},"deviceMemory"in navigator?t.capacity=(navigator.deviceMemory*Math.pow(1024,3)).toFixed(0):"hardwareConcurrency"in navigator?t.capacity=(2*navigator.hardwareConcurrency*Math.pow(1024,3)).toFixed(0):console.warn("Cannot determine RAM capacity in this browser."),"memory"in performance?t.availableCapacity=performance.memory.jsHeapSizeLimit-performance.memory.usedJSHeapSize:console.warn("performance.memory is not supported in this browser."),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ri=function(){return new Promise((function(e,t){var n,r=new Image;r.onload=function(){var t=(10108968/(((new Date).getTime()-n)/1e3)).toFixed(2),r=(t/1024).toFixed(2),i=(r/1024).toFixed(2);e({speedBps:t,speedKbps:r,speedMbps:i})};var i="?nnn="+(n=(new Date).getTime());r.src="http://d3ia9qn5swl78e.cloudfront.net/images/detection-side-img.svg"+i}))},ii=function(){var e=sr(ar().mark((function e(){var t,n,r,i,a,o,s,c;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={test:"a".repeat(1048576)},n=(new Date).getTime(),e.next=5,Vn({test:"a".repeat(1048576)});case 5:if(!e.sent){e.next=14;break}return r=(new Date).getTime(),i=(r-n)/1e3,a=8*t.test.length,o=(a/i).toFixed(2),s=(o/1024).toFixed(2),c=(s/1024).toFixed(2),e.abrupt("return",{speedBps:o,speedKbps:s,speedMbps:c});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),ai=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=oi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t),r=si(e,t);return"high"===n||"high"===r?"high":"medium"===n||"medium"===r?"medium":"low"},oi=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i="low",a=((null==r||null===(e=r.settings)||void 0===e||null===(e=e.proctoring_behavior)||void 0===e?void 0:e.metrics)||[]).reduce((function(e,t){return er(er({},e),t)}),{}),o=Jn(n);try{for(o.s();!(t=o.n()).done;){var s,c=t.value,u=c.endTime-c.startTime;if(u>=a[c.name]){i="high";break}u>=(null==r||null===(s=r.settings)||void 0===s||null===(s=s.proctoring_behavior)||void 0===s?void 0:s.metrics[c.name])/2&&(i="medium")}}catch(e){o.e(e)}finally{o.f()}return i},si=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r="low",i=((null==n||null===(e=n.settings)||void 0===e||null===(e=e.proctoring_behavior)||void 0===e?void 0:e.metrics)||[]).reduce((function(e,t){return er(er({},e),t)}),{}),a=t.filter((function(e){return"copy_paste_cut"===e.name})),o=t.filter((function(e){return"candidate_resized_window"===e.name})),s=t.filter((function(e){return["moved_away_from_page","moved_to_another_app","moved_to_another_window"].includes(e.name)}));return i.copy_paste_cut>0&&a.length>=i.copy_paste_cut||i.browser_resized>0&&o.length>=i.browser_resized||i.navigating_away>0&&s.length>=i.navigating_away?r="high":(i.copy_paste_cut>0&&a.length>=i.copy_paste_cut/2||i.browser_resized>0&&o.length>=i.browser_resized/2||i.navigating_away>0&&s.length>=i.navigating_away/2)&&(r="medium"),r};function ci(e){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ci(e)}function ui(){ui=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ci(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ci(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function li(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var di=[{name:"img1",src:"".concat(dn.ASSET_URL,"/oc-address.svg"),alt:""},{name:"img2",src:"".concat(dn.ASSET_URL,"/oc-lightbulb.svg"),alt:""},{name:"img3",src:"".concat(dn.ASSET_URL,"/oc-megaphone.svg"),alt:""},{name:"img4",src:"".concat(dn.ASSET_URL,"/stacked-up-books.svg"),alt:""},{name:"img5",src:"".concat(dn.ASSET_URL,"/vector-2.png"),alt:""},{name:"img6",src:"".concat(dn.ASSET_URL,"/vector-1.png"),alt:""},{name:"img7",src:"".concat(dn.ASSET_URL,"/vector-3.png"),alt:""},{name:"img8",src:"".concat(dn.ASSET_URL,"/vector-1.png"),alt:""}],pi=function(){var e,t=(e=ui().mark((function e(t,n){var r,i,a,o,s,c,u,l,d,p,h;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Zr.error("tabContent is not defined or is not a valid DOM element"),e.abrupt("return");case 3:i=function(){fr({eventType:"success",notify:!1,eventName:"identity_card_requirement_read",eventValue:(new Date).toISOString()}),$o("runSystemDiagnostics",n),Er("preChecksSteps",{identityConfirmation:!0})},t.innerHTML="",(a=null===(r=document)||void 0===r?void 0:r.getElementById("mobile-proctoring"))&&(a.innerHTML=""),(o=document.createElement("div")).className="exam-preparation",(s=document.createElement("div")).className="exam-preparation-container",(c=document.createElement("img")).className="header-img",c.src="".concat(dn.ASSET_URL,"/oc-reading-book.png"),c.alt="header-img",s.appendChild(c),(u=document.createElement("h1")).textContent=U.t("exam_preparation"),s.appendChild(u),(l=document.createElement("label")).className="ep-msg",l.textContent=U.t("icc_msg"),s.appendChild(l),(d=document.createElement("button")).className="orange-filled-btn",d.textContent=U.t("continue"),d.style.marginTop="10px",d.style.justifyContent="center",d.addEventListener("click",i),s.appendChild(d),o.appendChild(s),(p=document.createElement("div")).className="bg-images",di.forEach((function(e){var t=document.createElement("img");t.className=e.name,t.src=e.src,t.alt=e.alt,p.appendChild(t)})),o.appendChild(p),t.appendChild(o),(h=document.createElement("style")).textContent="\n    .exam-preparation {\n        /* Define your CSS styles here */\n    }\n    .exam-preparation-container {\n        /* Define your CSS styles here */\n    }\n    /* Define other classes as needed */\n  ",document.head.appendChild(h),U.on("languageChanged",(function(){u.textContent=U.t("exam_preparation"),l.textContent=U.t("icc_msg"),d.textContent=U.t("continue")}));case 40:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){li(a,r,i,o,s,"next",e)}function s(e){li(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();function hi(e){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hi(e)}function fi(){fi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==hi(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(hi(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function mi(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function gi(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){mi(a,r,i,o,s,"next",e)}function s(e){mi(a,r,i,o,s,"throw",e)}o(void 0)}))}}U.on("languageChanged",(function(){var e=document.querySelector(".tab-content.active");e&&"IdentityCardRequirement"===e.id&&pi(e)}));var _i=null,vi=null,yi="".concat(dn.ASSET_URL,"/video-camera-green.svg"),bi="".concat(dn.ASSET_URL,"/microphone-green.svg"),wi="".concat(dn.ASSET_URL,"/location-pin-green.svg"),ki="".concat(dn.ASSET_URL,"/multiple-screen-green.svg"),xi="".concat(dn.ASSET_URL,"/video-camera-red.svg"),Si="".concat(dn.ASSET_URL,"/microphone-red.svg"),Ti="".concat(dn.ASSET_URL,"/location-pin-red.svg"),Ci="".concat(dn.ASSET_URL,"/multiple-screen-red.svg"),Ei=function(e){e.innerHTML="";var t=document.createElement("div");t.classList.add("system-diagnostic-test-screen");var n=document.createElement("h1");n.classList.add("heading"),n.textContent=U.t("system_diagnostic");var r=document.createElement("div");r.classList.add("diagnostic-status","container-box");var i=document.createElement("div");i.classList.add("container");var a=document.createElement("div");a.classList.add("container-top");var o=document.createElement("label");o.classList.add("description"),o.textContent=U.t("system_diagnostic_msg");var s=document.createElement("div");s.classList.add("container-prompt");var c=document.createElement("img");c.src="".concat(dn.ASSET_URL,"/microphone-").concat(U.language||"en",".svg"),c.alt="",c.id="microphone-img",c.width=350,c.classList.add("prompt-image");var u=document.createElement("div");u.classList.add("container-middle","box-section");var l=Tr(),d=(null==l?void 0:l.entities)||[],p=d.some((function(e){return"record_video"===e.key||"record_room"===e.key})),h=d.some((function(e){return"record_audio"===e.key})),f=d.some((function(e){return"track_location"===e.key})),m=d.some((function(e){return"verify_desktop"===e.key})),g=[];p&&g.push("webcam"),h&&g.push("microphone"),f&&g.push("location"),m&&g.push("desktop"),g.forEach((function(e){var t=function(e,t){var n=document.createElement("div");n.classList.add("diagnostic-item","grey-box"),n.id="".concat(e,"DiagnosticItem");var r=document.createElement("div");r.classList.add("grey-box-right");var i=document.createElement("img");i.id="".concat(e,"StatusIcon"),i.src="".concat(dn.ASSET_URL,"/").concat({webcam:"video-camera-light-gray.svg",microphone:"microphone-light-gray.svg",location:"location-pin-black.svg",desktop:"multiple-screen-gray.svg"}[e]||"video-camera-light-gray.svg"),i.alt="";var a=document.createElement("label");a.textContent=t;var o=document.createElement("div");o.classList.add("grey-box-left");var s=document.createElement("img");return s.id="".concat(e,"StatusLoading"),s.src="".concat(dn.ASSET_URL,"/loading-gray.svg"),s.alt="",r.appendChild(i),r.appendChild(a),o.appendChild(s),n.appendChild(r),n.appendChild(o),n}(e,U.t(e));u.appendChild(t)}));var _=document.createElement("div");_.classList.add("button-section");var v=document.createElement("button");v.classList.add("orange-filled-btn"),v.id="diagnosticContinueBtn",v.disabled=!0,v.textContent=U.t("continue"),v.addEventListener("click",(function(){_i&&_i.getTracks().forEach((function(e){return e.stop()})),vi&&vi.getTracks().forEach((function(e){return e.stop()})),fr({eventType:"success",notify:!1,eventName:"system_diagnostic_passed"}),Er("preChecksSteps",{diagnosticStep:!0}),$o("SystemRequirements")})),_.appendChild(v),i.append(a,o,s,c,u,_),r.appendChild(i),t.append(n,r),e.appendChild(t)},Ii=function(){var e=gi(fi().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Zr.error('Element with id "runSystemDiagnostics" not found.'),e.abrupt("return");case 3:return Zr.success("langaueg isse",U.language),Ei(t),n=function(e,t,n){var r=document.getElementById("".concat(e,"StatusIcon")),i=document.getElementById("".concat(e,"StatusLoading"));r&&i&&(r.src=n?t.success:t.failure,i.src="".concat(dn.ASSET_URL,n?"/checkmark-rounded-green.png":"/x-circle.png"))},r=function(e,t){var r=document.getElementById("".concat(e,"DiagnosticItem"));r&&"desktop"!==e&&r.addEventListener("click",gi(fi().mark((function r(){var s;return fi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:s=r.sent,n(e,{success:a[e],failure:o[e]},s),i();case 5:case"end":return r.stop()}}),r)}))))},i=function(){var e=document.querySelectorAll(".diagnostic-item"),t=Array.from(e).every((function(e){var t=e.id.replace("DiagnosticItem",""),n=document.getElementById("".concat(t,"StatusIcon"));return!!n&&new URL(n.src).pathname===new URL(a[t]||"").pathname}));document.getElementById("diagnosticContinueBtn").disabled=!t},a={webcam:yi,microphone:bi,location:wi,desktop:ki},o={webcam:xi,microphone:Si,location:Ti,desktop:Ci},e.prev=10,s=Tr(),c=(null==s?void 0:s.entities)||[],u=c.some((function(e){return"record_video"===e.key||"record_room"===e.key})),l=c.some((function(e){return"record_audio"===e.key})),d=c.some((function(e){return"track_location"===e.key})),p=c.some((function(e){return"verify_desktop"===e.key})),h=[],u?h.push(lr().then((function(e){return _i=e,n("webcam",{success:yi,failure:xi},e),r("webcam",lr),e}))):n("webcam",{success:yi,failure:xi},!0),l?h.push(hr().then((function(e){return vi=e,n("microphone",{success:bi,failure:Si},e),r("microphone",hr),e}))):n("microphone",{success:bi,failure:Si},!0),d?h.push(dr().then((function(e){return Er("session",{location:e}),n("location",{success:wi,failure:Ti},e),r("location",dr),e}))):n("location",{success:wi,failure:Ti},!0),p?h.push(pr().then((function(e){return n("desktop",{success:ki,failure:Ci},!e),r("desktop",pr),e}))):n("desktop",{success:ki,failure:Ci},!0),e.next=24,Promise.all(h);case 24:_i&&_i.getTracks().forEach((function(e){return e.stop()})),vi&&vi.getTracks().forEach((function(e){return e.stop()})),i(),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(10),Zr.error("Error running diagnostics:",e.t0);case 32:return e.prev=32,_i&&_i.getTracks().forEach((function(e){return e.stop()})),vi&&vi.getTracks().forEach((function(e){return e.stop()})),e.finish(32);case 36:case"end":return e.stop()}}),e,null,[[10,29,32,36]])})));return function(t){return e.apply(this,arguments)}}();U.on("languageChanged",(function(){!function(){var e=document.getElementById("microphone-img");["webcam","microphone","location","desktop"].forEach((function(e){var t=document.querySelector("#".concat(e,"DiagnosticItem label"));t&&(t.textContent=U.t(e))})),e&&(e.src="".concat(dn.ASSET_URL,"/microphone-").concat(U.language||"en",".svg"));var t=document.querySelector(".heading");t&&(t.textContent=U.t("system_diagnostic"));var n=document.querySelector(".description");n&&(n.textContent=U.t("system_diagnostic_msg"));var r=document.querySelector(".orange-filled-btn");r&&(r.textContent=U.t("continue"))}()}));var Ni="VERIFIED",Ai="VERIFING",Oi=function(e,t){var n=document.createElement("div");n.className="ivs-instruction-step-container";var r="ivs-instruction-txt";e!==Ai&&e!==Ni||(r="ivs-instruction-txt-orange");var i=document.createElement("span");return i.className=r,i.setAttribute("data-i18n-key",t),i.textContent=G(t),n.appendChild(i),n},Ri=function(e,t){var n=e,r=Tr(),i=(null==r?void 0:r.entities)||[],a=function(e){return i.find((function(t){return t.key===e}))},o=document.createElement("div");o.className="steps-container";var s=function(e){return e===t?Ai:e<t?Ni:"UNVERIFIED"};if(a("verify_candidate")){var c=document.createElement("div");c.className="ivs-instruction";var u=s(1);c.appendChild(Oi(u,"take_a_photo")),o.appendChild(c)}if(a("verify_id")){var l=document.createElement("div");l.className="ivs-instruction";var d=s(2);l.appendChild(Oi(d,"photo_id")),o.appendChild(l)}if(a("record_audio")){var p=document.createElement("div");p.className="ivs-instruction";var h=s(3);p.appendChild(Oi(h,"sound_check")),o.appendChild(p)}if(a("record_room")){var f=document.createElement("div");f.className="ivs-instruction";var m=s(4);f.appendChild(Oi(m,"360_video")),o.appendChild(f)}if(a("mobile_proctoring")){var g=document.createElement("div");g.className="ivs-instruction";var _=s(5);g.appendChild(Oi(_,"synchronisation_mobile")),o.appendChild(g)}if(a("record_screen")){var v=document.createElement("div");v.className="ivs-instruction";var y=s(6);v.appendChild(Oi(y,"screen_record")),o.appendChild(v)}n.appendChild(o)};function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(){Fi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Pi(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Pi(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function zi(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){zi(a,r,i,o,s,"next",e)}function s(e){zi(a,r,i,o,s,"throw",e)}o(void 0)}))}}U.on("languageChanged",(function(){!function(){document.querySelectorAll("[data-i18n-key]").forEach((function(e){var t=e.getAttribute("data-i18n-key");e.textContent=G(t)}));var e=document.querySelector(".orange-filled-btn");e&&(e.textContent=U.t("continue"))}()}));var ji=function(){var e=$i(Fi().mark((function e(t){var n,r,i,a,o,s,c,u,l,d;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={isUploading:!1,captureMode:"take",imageSrc:null,videoConstraints:{video:!localStorage.getItem("deviceId")||{deviceId:{exact:localStorage.getItem("deviceId")}},width:350,height:280,facingMode:"user"},msg:{type:"checking",text:"center_your_face"}},r=null,i=null,a=function(){var e=$i(Fi().mark((function e(){var a;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(i=document.createElement("video")).width=n.videoConstraints.width,i.height=n.videoConstraints.height,i.autoplay=!0,e.next=7,navigator.mediaDevices.getUserMedia(n.videoConstraints);case 7:r=e.sent,i.srcObject=r,t&&(a=t.querySelector(".ivso-webcam-container"))&&(a.innerHTML="",a.appendChild(i)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Zr.error("Error accessing webcam:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=$i(Fi().mark((function e(){var t,r;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("canvas")).width=i.videoWidth,t.height=i.videoHeight,t.getContext("2d").drawImage(i,0,0,t.width,t.height),r=t.toDataURL("image/jpeg"),n=Li(Li({},n),{},{captureMode:"retake",imageSrc:r,msg:{type:"checking",text:"please_wait_we_processing"}}),d(),c();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=$i(Fi().mark((function e(t){var n,r,i,a=arguments;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"screenshot.png",e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.blob();case 6:return i=e.sent,e.abrupt("return",new File([i],n,{type:i.type}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=$i(Fi().mark((function e(){var t,r,i,o,c,u;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.imageSrc){e.next=21;break}return t=new Image,r=new FormData,e.next=5,s(n.imageSrc);case 5:return i=e.sent,r.append("image",i),e.prev=7,e.next=10,yr(r);case 10:c=e.sent,u=null==c||null===(o=c.data)||void 0===o||null===(o=o.face)||void 0===o?void 0:o.FaceDetails,t.onload=$i(Fi().mark((function e(){var t,r,i;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=u&&u.length&&1===u.length?(t=u[0],r=t.Pose,i=t.Confidence,i>=95&&Math.abs(r.Yaw)<=10&&Math.abs(r.Pitch)<=10&&Math.abs(r.Roll)<=10?(n=Li(Li({},n),{},{imageSrc:n.imageSrc,msg:{type:"successful",text:"detected_face_successfully"}}),fr({eventType:"success",notify:!1,eventName:"detected_face_successfully"})):(n=Li(Li({},n),{},{imageSrc:null,captureMode:"retake",msg:{type:"unsuccessful",text:"face_not_detected"}}),a(),fr({eventType:"error",notify:!0,eventName:"face_not_detected"}))):(null==u?void 0:u.length)>1?(n=Li(Li({},n),{},{imageSrc:null,captureMode:"retake",msg:{type:"unsuccessful",text:"multiple_face_detected"}}),a(),fr({eventType:"error",notify:!0,eventName:"multiple_face_detected"})):(n=Li(Li({},n),{},{imageSrc:null,captureMode:"retake",msg:{type:"unsuccessful",text:"face_not_detected"}}),a(),fr({eventType:"error",notify:!0,eventName:"face_not_detected"})),d();case 2:case"end":return e.stop()}}),e)}))),t.src=n.imageSrc,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(7),Zr.error("Error processing the image:",e.t0),n=Li(Li({},n),{},{msg:{type:"error",text:"face_processing_failed"}}),d();case 21:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e;r&&(null===(e=r)||void 0===e||null===(e=e.getTracks())||void 0===e||e.forEach((function(e){return e.stop()})));fr({eventType:"success",notify:!1,eventName:"candidate_photo_captured_successfully"}),Er("preChecksSteps",{userPhoto:!0}),$o("IdentityVerificationScreenTwo")},l=function(){var e=$i(Fi().mark((function e(){var t,r,i;return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.isUploading=!0,d(),n=Li(Li({},n),{},{msg:{type:"loading",text:"file_is_being_uploaded"}}),r=cr(n.imageSrc),e.next=7,Un({folderName:"candidate_images",file:r});case 7:null!=(i=e.sent)&&null!==(t=i.data)&&void 0!==t&&t.file_url&&(Er("session",{candidatePhoto:i.data.file_url}),n=Li(Li({},n),{},{captureMode:"uploaded_photo",msg:{type:"waiting",text:"candidate_photo_uploaded_successfully"}}),fr({eventType:"success",notify:!1,eventName:"candidate_photo_uploaded_successfully"})),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),Zr.error("Upload failed:",e.t0),n=Li(Li({},n),{},{captureMode:"take",imageSrc:null,msg:{type:"checking",text:"something_went_wrong_please_upload_again"}}),fr({eventType:"error",notify:!1,eventName:"internet_connection_unstable"});case 16:return e.prev=16,n.isUploading=!1,d(),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,11,16,20]])})));return function(){return e.apply(this,arguments)}}(),(d=function(){var e=t.querySelector(".ivso-container");e?e.innerHTML="":((e=document.createElement("div")).className="ivso-container",t.appendChild(e));var s=document.createElement("div");s.className="ivso-first-wrapper";var c=document.createElement("div");c.className="ivso-header-title",c.textContent=U.t("webcam_diagnostics");var p=document.createElement("div");p.className="first-header-msg",p.textContent=U.t("your_face_must_visible_on_screen");var h=document.createElement("div");Ri(h,1);var f=document.createElement("div");n.msg.text&&(f.className="ivso-msg",f.id="success-msg","unsuccessful"!==n.msg.type&&"something_went_wrong_please_upload_again"!==n.msg.type||(f.style.color="#E95E5E"),f.textContent=U.t(n.msg.text));var m=document.createElement("div");m.className="ivso-webcam-container";var g=document.createElement("div");g.className="ivso-header-img-container";var _=document.createElement("div");_.className="ivso-btn-container";var v=document.createElement("div");if(v.className="ivso-query-msg",n.imageSrc){var y=document.createElement("img");y.src=n.imageSrc,y.className="ivso-captured-img",g.appendChild(y)}else{r||a(),m.appendChild(i);var b=document.createElement("img");b.src="".concat(dn.ASSET_URL,"/screen-centered-grid.svg"),b.className="ivso-screen-grid",g.appendChild(b)}if("take"!==n.captureMode){var w=document.createElement("button");w.textContent=U.t("retake_photo"),w.className="orange-hollow-btn",w.addEventListener("click",(function(){n=Li(Li({},n),{},{imageSrc:null,captureMode:"take",isUploading:!1,videoConstraints:Li(Li({},n.videoConstraints),{},{deviceId:localStorage.getItem("deviceId")||void 0}),msg:{type:"checking",text:"center_your_face"}}),d(),a()})),_.appendChild(w)}if("uploaded_photo"===n.captureMode){var k=document.createElement("button");k.textContent=U.t("next_step"),k.className="orange-filled-btn",k.addEventListener("click",u),_.appendChild(k)}if("take"===n.captureMode){var x=document.createElement("button");x.textContent=U.t("take_photo"),x.className="orange-filled-btn",x.addEventListener("click",o),_.appendChild(x)}if("retake"===n.captureMode){var S=document.createElement("button");S.textContent=U.t("upload"),S.className="orange-filled-btn",S.disabled=n.isUploading||"successful"!==n.msg.type,S.addEventListener("click",l),_.appendChild(S)}s.appendChild(c),s.appendChild(p),s.appendChild(h),s.appendChild(g),s.appendChild(m),s.appendChild(f),s.appendChild(_),"retake"===n.captureMode&&s.appendChild(v),e.appendChild(s)})(),U.on("languageChanged",(function(){d();var e=document.getElementById("success-msg");e&&n.msg.text&&(e.textContent=U.t(n.msg.text))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Bi(e){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(e)}function Vi(){Vi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Bi(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Bi(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Bi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wi(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Hi(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Wi(a,r,i,o,s,"next",e)}function s(e){Wi(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Yi=function(){var e=Hi(Vi().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null,a=!1,s={captureMode:"take",imageSrc:null,msg:{text:""}},c=Tr(),u=(null==c?void 0:c.entities)||[],l={width:350,height:280,facingMode:"user",deviceId:localStorage.getItem("deviceId")||void 0},d=function(){var e=document.createElement("canvas");e.width=l.width,e.height=l.height,e.getContext("2d").drawImage(n,0,0,e.width,e.height);var t=e.toDataURL("image/png");p(t).then((function(e){o=e,t?(s=Gi(Gi({},s),{},{imageSrc:t,msg:{type:"checking",text:"id_being_verified"}}),y(),m()):(s=Gi(Gi({},s),{},{captureMode:"retake",msg:{type:"unsuccessful",text:"error_capturing_picture"}}),y())}))},p=function(){var e=Hi(Vi().mark((function e(t){var n,r,i,a=arguments;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"screenshot.png",e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.blob();case 6:return i=e.sent,e.abrupt("return",new File([i],n,{type:i.type}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){s=Gi(Gi({},s),{},{captureMode:"take",imageSrc:null,msg:{text:""}}),y()},f=function(){var e=Hi(Vi().mark((function e(t){var n,r;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files.length>0)){e.next=7;break}return o=t.target.files[0],n=URL.createObjectURL(t.target.files[0]),e.next=5,wr(n);case 5:(r=e.sent)?(s=Gi(Gi({},s),{},{imageSrc:r,msg:{type:"checking",text:"id_being_verified"}}),y(),m()):(s=Gi(Gi({},s),{},{captureMode:"retake",msg:{type:"unsuccessful",text:"error_with_uploading_file"}}),y());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Hi(Vi().mark((function e(){var t,n,r,i;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.imageSrc){e.next=16;break}return a=!0,(t=new FormData).append("image",o),e.prev=4,e.next=7,yr(t);case 7:n=e.sent,(r=n.data)&&(kr(null==r?void 0:r.label,80)&&xr(null==r?void 0:r.text,59)&&(null==r||null===(i=r.face)||void 0===i?void 0:i.FaceDetails.length)>0?(s=Gi(Gi({},s),{},{captureMode:"retake",msg:{type:"successful",text:"id_successfully_verified"}}),a=!1,fr({eventType:"success",notify:!1,eventName:"id_successfully_verified"})):(s=Gi(Gi({},s),{},{captureMode:"retake",msg:{type:"unsuccessful",text:"id_not_verified"}}),a=!1,fr({eventType:"success",notify:!1,eventName:"id_not_verified"}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Zr.error("Error verifying image:",e.t0);case 15:y();case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Hi(Vi().mark((function e(){var t;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(t=i)&&void 0!==t&&t.getTracks()&&i.getTracks().forEach((function(e){return e.stop()})),Er("preChecksSteps",{identityCardPhoto:!0}),fr({eventType:"success",notify:!1,eventName:"identity_card_verified_successfully",eventValue:Nr()}),$o("IdentityVerificationScreenThree");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Hi(Vi().mark((function e(){var t,n;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isUploading){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s.isUploading=!0,y(),s=Gi(Gi({},s),{},{msg:{type:"loading",text:"file_is_being_uploaded"}}),y(),e.next=9,Un({folderName:"candidate_ids/",file:cr(s.imageSrc)});case 9:if(null==(n=e.sent)||null===(t=n.data)||void 0===t||!t.file_url){e.next=16;break}Er("session",{identityCard:n.data.file_url}),s=Gi(Gi({},s),{},{captureMode:"uploaded_photo",isUploading:!1,msg:{type:"waiting",text:"candidate_id_is_uploaded_successfully"}}),fr({eventType:"success",notify:!1,eventName:"identity_card_uploaded_successfully"}),e.next=17;break;case 16:throw"something_went_wrong_please_upload_again";case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),s=Gi(Gi({},s),{},{isUploading:!1,msg:{type:"error",text:"something_went_wrong_please_upload_again"}}),fr({eventType:"success",notify:!1,eventName:"internet_connection_unstable"});case 23:y();case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),v=function(){Er("preChecksSteps",{identityCardPhoto:!1});var e=JSON.parse(localStorage.getItem("navHistory")),t=e.indexOf("IdentityVerificationScreenTwo"),n=t>0?e[t-1]:null;$o(n)},y=function(){var e=Hi(Vi().mark((function e(){var o,c,p,m,y,w,k,x,S,T,C,E,I,N,A,O,R,P;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=t.querySelector(".id-card-container"))||((o=document.createElement("div")).className="id-card-container",t.appendChild(o)),o.innerHTML="",(c=o.querySelector(".ivst-wrapper"))||((c=document.createElement("div")).className="ivst-wrapper",o.appendChild(c)),c.innerHTML="",p=document.createElement("div"),Ri(p,2),(m=document.createElement("div")).className="ivst-header-title",m.textContent=U.t("identity_validation"),(y=document.createElement("div")).className="ivst-msg",y.textContent=U.t("initial_system_check_passed_get_ready_for_identity_validation"),(w=document.createElement("div")).className="ivst-header-img-container",!s.imageSrc){e.next=29;break}(k=document.createElement("img")).src=s.imageSrc,k.className="ivst-header-img",k.alt="captured-image",w.appendChild(k),(x=document.createElement("img")).src="unsuccessful"===s.msg.type?"".concat(dn.ASSET_URL,"/close-red.svg"):"".concat(dn.ASSET_URL,"/checkmark-green.svg"),x.className="ivst-header-img-result",x.alt="tick-mark-green-bg","checking"!==s.msg.type&&w.appendChild(x),e.next=43;break;case 29:return(n=document.createElement("video")).width=l.width,n.height=l.height,n.autoplay=!0,w.appendChild(n),e.next=36,navigator.mediaDevices.getUserMedia({video:l,audio:!1});case 36:null!==(i=e.sent)&&(n.srcObject=i),(S=document.createElement("img")).src="".concat(dn.ASSET_URL,"/screen-centered-grid.svg"),S.className="ivst-screen-grid",S.alt="screen-centered-grid",w.appendChild(S);case 43:c.appendChild(m),c.appendChild(y),c.appendChild(p),c.appendChild(w),s.msg.text&&((T=document.createElement("div")).className="ivst-query-msg",T.id="queryMsg-msg",T.textContent=U.t(s.msg.text),"unsuccessful"===s.msg.type&&(T.style.color="#E95E5E"),c.appendChild(T)),s.imageSrc||((E=document.createElement("div")).className="ivst-query-msg",E.innerHTML="".concat(U.t("please_take_picture_or")," <span id='upload-identity-card' class=\"ivst-file\">").concat(U.t("upload_your_identity_document"),"</span>."),null===(C=E.querySelector(".ivst-file"))||void 0===C||C.addEventListener("click",(function(){return r.click()})),c.appendChild(E)),(I=document.createElement("div")).className="ivst-btn-container","take"===s.captureMode?(N=b("".concat(U.t("previous_step")),"orange-hollow-btn",v),(A=b("".concat(U.t("take_id_photo")),"orange-filled-btn",d)).disabled=a||!!s.imageSrc,u.find((function(e){return"verify_candidate"===e.key}))&&I.appendChild(N),I.appendChild(A)):(O=b("".concat(U.t("retake_id_photo")),"orange-filled-btn",h),I.appendChild(O),"uploaded_photo"!==s.captureMode?((R=b("".concat(U.t("upload")),"orange-filled-btn",_)).disabled="unsuccessful"===s.msg.type||s.isUploading,I.appendChild(R)):(P=b("".concat(U.t("next_step")),"orange-filled-btn",g),I.appendChild(P))),c.appendChild(I),(r=document.createElement("input")).type="file",r.name="idCard",r.accept="image/*",r.hidden=!0,r.addEventListener("change",f),o.appendChild(r);case 60:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e,t,n){var r=document.createElement("button");return r.className=t,r.textContent=e,r.addEventListener("click",n),r},y(),U.on("languageChanged",(function(){y();var e=document.getElementById("queryMsg-msg");e&&s.msg.text&&(e.textContent=U.t(s.msg.text))}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}function Xi(){Xi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ki(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ki(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Qi(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ji(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Qi(a,r,i,o,s,"next",e)}function s(e){Qi(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Zi=function(){var e=Ji(Xi().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y;return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,o=!1,s={type:"",text:"be_loud_clear"},c=Tr(),u=(null==c?void 0:c.entities)||[],l=JSON.parse(localStorage.getItem("schoolTheme")),d=null,p=function(){var e=Ji(Xi().mark((function e(){var t,o,s,c;return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(),e.next=4,navigator.permissions.query({name:"microphone"});case 4:if("granted"!==(t=e.sent).state){e.next=20;break}return e.next=8,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 8:r=e.sent,i=new AudioContext,(a=i.createAnalyser()).fftSize=2048,i.createMediaStreamSource(r).connect(a),o=n||document.getElementById("audio-wavesform-canvas"),s=null==o?void 0:o.getContext("2d"),c=function(){d||(d=requestAnimationFrame((function(){var e=a.frequencyBinCount,t=new Uint8Array(e);a.getByteFrequencyData(t),null==s||s.clearRect(0,0,o.width,o.height),s.fillStyle=(null==l?void 0:l.theming)||"#FF961B";for(var n,r=o.width/e*8.5,i=0,u=0;u<e;u++)n=t[u]/2,s.fillRect(i,o.height-n,r,n),i+=r+1;d=null,c()})))},c(),e.next=21;break;case 20:throw t.state;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),Zr.error("no_mircophone_detected:",e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),h=function(){d||p(),s.type="",s.text="recording",o=!0,_();var e=0,t=setInterval((function(){try{e+=1;var n=(null==c?void 0:c.settings)||[],r=a.frequencyBinCount,i=new Uint8Array(r);a.getByteFrequencyData(i);for(var u=0,l=0;l<r;l++)u+=Math.pow(i[l]/255,2);if(Math.sqrt(u/r)>((null==n?void 0:n.audio_level)||.15))clearInterval(t),o=!1,s.type="successful",s.text="audio_test_passed",_();else if(e>=15)throw"error"}catch(e){clearInterval(t),o=!1,s.type="unsuccessful",s.text="audio_test_failed",_()}}),1e3)},f=function(){d&&(cancelAnimationFrame(d),d=null),r&&r.getTracks().forEach((function(e){return e.stop()}))},m=function(){var e=Ji(Xi().mark((function e(){return Xi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&r.getAudioTracks().forEach((function(e){return e.stop()})),y(),Er("preChecksSteps",{audioDetection:!0}),fr({eventType:"success",notify:!1,eventName:"audio_check_completed",eventValue:Nr()}),$o("IdentityVerificationScreenFour");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){y(),Er("preChecksSteps",{audioDetection:!1});var e=JSON.parse(localStorage.getItem("navHistory")),t=e.indexOf("IdentityVerificationScreenThree"),n=t>0?e[t-1]:null;"Prevalidationinstruction"===n?Er("preChecksSteps",{preValidation:!1}):"IdentityVerificationScreenTwo"===n?Er("preChecksSteps",{identityCardPhoto:!1}):"IdentityVerificationScreenOne"===n&&Er("preChecksSteps",{userPhoto:!1}),$o(n)},_=function(){var e=t.querySelector(".ivst-container");e||((e=document.createElement("div")).className="ivst-container",t.appendChild(e));var r=document.createElement("div");Ri(r,3);var i=e.querySelector(".ivst-wrapper");if(!i){(i=document.createElement("div")).className="ivst-wrapper";var a=document.createElement("div");a.className="ivst-header-title",i.appendChild(a),i.appendChild(r);var c=document.createElement("div");c.className="audio-test-msg",c.id="audio-test-msg";var l=document.createElement("div");l.className="ivst-audio-text",l.style.textAlign="center",i.appendChild(l),(n=document.createElement("canvas")).width=800,n.id="audio-wavesform-canvas",n.height=200,i.appendChild(n),i.appendChild(c),e.appendChild(i)}var d=i.querySelector(".ivst-header-title");d&&(d.textContent=U.t("audio_check"));var f=i.querySelector(".ivst-audio-text");f&&(f.textContent=U.t("no_point_in_running_leave_in_time"));var _=i.querySelector(".audio-test-msg");_&&(_.textContent=U.t(s.text),"unsuccessful"===s.type?_.style.color="#E95E5E":_.style.color="");var y=i.querySelector(".ivst-btn-container");if(y?y.innerHTML="":((y=document.createElement("div")).className="ivst-btn-container",i.appendChild(y)),""===s.type){var b=v("".concat(U.t("previous_step")),"orange-hollow-btn",g);b.disabled=o;var w=v("".concat(U.t("record_audio")),"orange-filled-btn",h);w.disabled=o,y.appendChild(b),y.appendChild(w)}else if("unsuccessful"===s.type){var k,x=v("".concat(U.t("previous_step")),"orange-hollow-btn",g),S=v("".concat(U.t("re_record_audio")),"orange-filled-btn",h),T=["verify_candidate","verify_id"];(null===(k=u.filter((function(e){return T.includes(e.key)})))||void 0===k?void 0:k.length)>0&&y.appendChild(x),y.appendChild(S)}else{var C=v("".concat(U.t("re_record_audio")),"orange-hollow-btn",h),E=v("".concat(U.t("done")),"orange-filled-btn",m);y.appendChild(C),y.appendChild(E)}n&&p()},v=function(e,t,n){var r=document.createElement("button");return r.textContent=e,r.className=t,r.addEventListener("click",n),r},_(),p(),U.on("languageChanged",(function(){var e=document.getElementById("audio-test-msg");e&&e.text&&(e.text=U.t(e.text)),_()})),y=function(){if(r&&r.getTracks().forEach((function(e){return e.stop()})),i&&i.close(),d&&cancelAnimationFrame(d),n){var e=n.getContext("2d");e&&e.clearRect(0,0,n.width,n.height)}},e.abrupt("return",{cleanup:y});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ea=n(7360),ta=n.n(ea);const na={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var ra,ia=new Uint8Array(16);function aa(){if(!ra&&!(ra="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ra(ia)}for(var oa=[],sa=0;sa<256;++sa)oa.push((sa+256).toString(16).slice(1));function ca(e,t=0){return(oa[e[t+0]]+oa[e[t+1]]+oa[e[t+2]]+oa[e[t+3]]+"-"+oa[e[t+4]]+oa[e[t+5]]+"-"+oa[e[t+6]]+oa[e[t+7]]+"-"+oa[e[t+8]]+oa[e[t+9]]+"-"+oa[e[t+10]]+oa[e[t+11]]+oa[e[t+12]]+oa[e[t+13]]+oa[e[t+14]]+oa[e[t+15]]).toLowerCase()}const ua=function(e,t,n){if(na.randomUUID&&!t&&!e)return na.randomUUID();var r=(e=e||{}).random||(e.rng||aa)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return ca(r)};var la=n(1485),da=n(4202).SOCKET_URL,pa=n(6425).v4,ha=function(){return pa()},fa=function(){if(!da)throw new Error("SOCKET_URL is not defined");window.socket=null;var e=function(){try{var e=ha();return localStorage.setItem("socketGroupId",JSON.stringify({groupName:e})),e}catch(e){return Zr.warn("Error accessing localStorage or invalid UUID:",e),ha()}}();window.socket=new WebSocket("".concat(da,"?groupName=").concat(e)),window.socket.onerror=function(e){Zr.error("WebSocket error:",e)},window.socket.onclose=function(e){Zr.warn("WebSocket connection closed:",e.reason)},window.socket.onopen=function(){Zr.success("WebSocket connection opened")}};function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function ga(){ga=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ma(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ma(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function _a(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var va=function(){var e,t=(e=ga().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f;return ga().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=function(){var e=JSON.parse(localStorage.getItem("socketGroupId")),a=null==t?void 0:t.querySelector(".mobile-conection-container");a||((a=document.createElement("div")).className="mobile-conection-container",t.appendChild(a),a.id="mobile-proctoring"),a.innerHTML="";var c=document.createElement("div");c.className="ivsf-wrapper";var u=document.createElement("div");u.className="mobile-header-title",u.innerText=G("setting_up_your_phone_camera");var l=document.createElement("div");if(Ri(l,5),c.appendChild(u),c.appendChild(l),""===n){var d=document.createElement("div");d.className="mobile-connection-banner";var f=document.createElement("img");f.className="banner-image",f.src="".concat(dn.ASSET_URL,"/mobile-connection-banner.png"),d.appendChild(f);var m=document.createElement("div");m.className="banner-info-box";var g=document.createElement("div");g.className="title",g.innerHTML='<img src="'.concat(dn.ASSET_URL,'/info-blue.svg" /> <p>').concat(G("during_your_assessment"),"</p>");var _=document.createElement("p");_.className="desc",_.innerHTML="".concat(G("notifications_on_your_phone_should_be_turned_off"),"<br />").concat(G("do_not_lock_your_phone")),m.appendChild(g),m.appendChild(_),d.appendChild(m),c.appendChild(d);var v=document.createElement("div");v.className="bottom-desc",v.innerText=G("in_order_to_carry_out_your_assessment"),c.appendChild(v);var y=document.createElement("div");y.className="ivsf-btn-container";var b=document.createElement("button");b.className="orange-hollow-btn",b.innerText=G("i_already_have_the_app"),b.onclick=h;var w=document.createElement("button");w.className="orange-filled-btn",w.innerText=G("download_the_app"),w.onclick=function(){return p("downloadApp")},y.appendChild(b),y.appendChild(w),c.appendChild(y)}else if("downloadApp"===n){var k,x=document.createElement("div");x.className="qr-code-container";var S=document.createElement("canvas");x.appendChild(S),la.toCanvas(S,"https://mobile.mereos.eu/",(function(e){e&&Zr.error("error in QR code",e)}));var T=document.createElement("p");T.className="bottom-desc",T.innerText=G("please_scan_this_qr_code");var C=document.createElement("div");C.className="ivsf-btn-container";var E=document.createElement("button");E.className="orange-hollow-btn",E.innerText=G("previous_step"),E.onclick=function(){return h("previousStep")};var I=document.createElement("button");I.className="orange-filled-btn",I.innerText=G("i_downloaded_the_app"),I.onclick=function(){return p("tokenCode")};var N=["verify_candidate","verify_id","record_audio","record_room"];(null===(k=o.filter((function(e){return N.includes(e.key)})))||void 0===k?void 0:k.length)>0&&C.appendChild(E),C.appendChild(I),x.appendChild(T),x.appendChild(C),c.appendChild(x)}else if("tokenCode"===n){var A,O=document.createElement("div");O.className="qr-code-container";var R=document.createElement("canvas");O.appendChild(R),la.toCanvas(R,JSON.stringify({token:vr(),groupName:null==e?void 0:e.groupName}),(function(e){e&&Zr.error("Error in QR code",e)}));var P=document.createElement("p");P.className="bottom-desc",P.innerText=G("open_the_mereos_mobile_application");var D=document.createElement("div");D.className="ivsf-btn-container";var L=document.createElement("button");L.className="orange-hollow-btn",L.innerText=G("previous_step"),L.onclick=function(){return h("previousStep")};var M=document.createElement("button");M.className="orange-filled-btn",M.innerText=G("i_dont_have_the_app"),M.onclick=function(){return p("downloadApp")};var F=["verify_candidate","verify_id","record_audio","record_room"];(null===(A=o.filter((function(e){return F.includes(e.key)})))||void 0===A?void 0:A.length)>0&&D.appendChild(L),D.appendChild(M),O.appendChild(P),O.appendChild(D),c.appendChild(O)}else{var z=document.createElement("div");z.className="remote-mobile-video";var $=document.createElement("div");$.className="mobile-broadcastin-container";var j=document.createElement("img");j.className="banner-image",j.src="".concat(dn.ASSET_URL,"/user-video-tutorial.jpeg");var B=document.createElement("div");if(B.appendChild(s),r){var V=document.createElement("div");V.className="video-loader",V.innerHTML="<div class='spinner'>\n\t\t\t\t<div class='bounce1' style={colorStyles}></div>\n\t\t\t\t<div class='bounce2' style={colorStyles}></div>\n\t\t\t\t<div class='bounce3' style={colorStyles}></div>\n\t\t\t</div>",B.appendChild(V)}$.appendChild(j),$.appendChild(B);var U=document.createElement("span");U.className="example-text",U.innerText=G("example_tutorial");var q=document.createElement("div");q.className="bottom-desc-remote";var W=document.createElement("input");W.type="checkbox",W.checked=i,W.onchange=function(e){i=e.target.checked,X.disabled=!i};var H=document.createElement("p");H.innerText=G("is_the_camera_feedback_good"),q.appendChild(W),q.appendChild(H),z.appendChild($),z.appendChild(U),z.appendChild(q);var Y=document.createElement("div");Y.className="mobile-btn-container";var K=document.createElement("button");K.className="orange-hollow-btn",K.innerText=G("previous_step"),K.onclick=h;var X=document.createElement("button");X.className="orange-filled-btn",X.innerText=G("next"),X.disabled=!i||r,X.onclick=function(){return p("step4")},Y.appendChild(K),Y.appendChild(X),z.appendChild(Y),c.appendChild(z)}a.appendChild(c),t.appendChild(a)},window.mobileStream=null,n="",r=!1,i=!1,a=Tr(),o=(null==a?void 0:a.entities)||[],(s=document.createElement("video")).id="remote-mobile-video-container",c=document.createElement("video"),u=null,l=function(){var e;if(fa(),window.socket){var t=function(){window.socket.readyState===WebSocket.OPEN?(window.socket.send(JSON.stringify({event:"resetSession"})),n=""):Zr.warn("Socket is not open, cannot send resetSession")};null!==(e=s.srcObject)&&void 0!==e&&null!==(e=e.getTracks())&&void 0!==e&&e.length||t(),window.socket.onopen=function(){var e;Zr.success("WebSocket connection established"),null!==(e=s.srcObject)&&void 0!==e&&null!==(e=e.getTracks())&&void 0!==e&&e.length||t()},window.socket.onmessage=function(e){var t,a,o,s=JSON.parse(e.data);switch((null==s||null===(t=s.message)||void 0===t?void 0:t.event)||(null==s?void 0:s.event)){case"mobile_connection":Zr.success("mobile_connection",s.message);break;case"mobilePreChecksCompleted":n="precheckCompleted",null===(a=window.socket)||void 0===a||a.send(JSON.stringify({event:"requestMobileBroadcast"})),r=!0,f();break;case"MobileRecordingStarted":Zr.success("MobileRecordingStarted",s.message);break;case"mobile-broadcast":f(),(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)({video:!0,audio:!1},(function(e){if(window.mobileStream=e,u){var t,n=u.call(null==s||null===(t=s.message)||void 0===t?void 0:t.message,e),i=document.getElementById("remote-mobile-video-container");null==n||n.on("stream",(function(e){i.srcObject=e,i.setAttribute("autoplay",!0),i.setAttribute("playsinline",!0),r=!1,f()})),null==n||n.on("close",(function(){i.srcObject&&(i.srcObject=null),r=!1})),null==n||n.on("error",(function(e){Zr.error("Error during call:",e)}))}else Zr.error("peerInstance is not initialized")}));break;case"violation":var c;"Violation"===(null==s||null===(o=s.message)||void 0===o?void 0:o.message)?(n="tokenCode",i=!1,ti("error","mobile_phone_disconnected"),window.mobileStream&&window.mobileStream.getTracks().forEach((function(e){return e.stop()})),f()):Zr.error(null==s||null===(c=s.message)||void 0===c?void 0:c.message);break;default:Zr.error("Unknown event:",null==s?void 0:s.message)}},window.socket.onerror=function(e){Zr.error("WebSocket error:",e)},window.socket.onclose=function(){Zr.error("WebSocket connection closed")}}else Zr.error("Socket not initialized")},d=function(){try{u&&u.destroy();var e=ua(),t=new(ta())(e);u=t,t.on("open",(function(e){Zr.success("Peer connection opened with ID:",e)})),t.on("error",(function(e){Zr.error("Peer connection error:",e)})),t.on("close",(function(){Zr.error("Peer connection closed")})),t.on("call",(function(e){(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)({video:!0,audio:!0},(function(t){c.srcObject=t,e.answer(t),e.on("stream",(function(e){s.srcObject=e}))}))}))}catch(e){Zr.error("Failed to create Peer instance:",e)}},p=function(e){if(n=e,f(),"step4"===e){var t;null===(t=window.mobileStream)||void 0===t||null===(t=t.getTracks())||void 0===t||t.forEach((function(e){return e.stop()})),fr({eventType:"success",notify:!1,eventName:"mobile_connection_successfull",eventValue:Nr()}),Er("preChecksSteps",{mobileConnection:!0}),$o("IdentityVerificationScreenFive");var r=document.getElementById("mobile-proctoring");r&&(r.innerHTML=""),s&&(s.srcObject=null)}},h=function(e){if("previousStep"===e){Er("preChecksSteps",{mobileConnection:!1});var t=JSON.parse(localStorage.getItem("navHistory")),r=t.indexOf("MobileProctoring"),a=r>0?t[r-1]:null;$o(a)}else{var o,s;n="tokenCode",i=!1,window.mobileStream&&(null===(o=window.mobileStream)||void 0===o||null===(o=o.getTracks())||void 0===o||o.forEach((function(e){return e.stop()}))),window.socket.readyState===WebSocket.OPEN&&(null===(s=window.socket)||void 0===s||s.send(JSON.stringify({event:"resetSession"}))),f()}},window.webStream&&window.webStream.getTracks().forEach((function(e){return e.stop()})),l(),d(),f(),U.on("languageChanged",f);case 18:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){_a(a,r,i,o,s,"next",e)}function s(e){_a(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),ya=n(7825);function ba(e){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(e)}function wa(e){return function(e){if(Array.isArray(e))return ka(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ka(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ka(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xa(){xa=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ba(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ba(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Sa(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ta(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Sa(a,r,i,o,s,"next",e)}function s(e){Sa(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Ca=function(){var e=Ta(xa().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b,w,k,x,S;return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.newStream=null,r=Tr(),i=(null==r?void 0:r.entities)||[],t){e.next=6;break}return Zr.error("tabContent is not defined or is not a valid DOM element"),e.abrupt("return");case 6:return a=null,o="startScreenRecording",s={type:"successful",text:U.t("please_share_entire_screen")},c=function(){var e=Ta(xa().mark((function e(){return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr();case 2:e.sent?(n=!0,fr({eventType:"error",notify:!1,eventName:"multiple_screens_detected"})):n=!1;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){if(!window.socket)return Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),window.globalCallback({type:"error",message:"mobile_phone_disconnected",code:40017}),ti("error","mobile_phone_disconnected"),void Zr.error("Socket not initialized");window.socket.onmessage=function(e){var t,n,r,i=JSON.parse(null==e?void 0:e.data);if("violation"===((null==i||null===(t=i.message)||void 0===t?void 0:t.event)||(null==i?void 0:i.event))){if("Violation"===(null==i||null===(n=i.message)||void 0===n?void 0:n.message)){var a;if(Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),window.newStream)null===(a=window.newStream)||void 0===a||a.getVideoTracks()[0].stop();$o("MobileProctoring")}fr({eventType:"error",notify:!1,eventName:null==i||null===(r=i.message)||void 0===r?void 0:r.message,eventValue:Nr()})}},window.socket.onerror=function(e){Zr.error("WebSocket error:",e)},window.socket.onclose=function(){Zr.error("WebSocket connection closed")}},i.find((function(e){return"verify_desktop"===e.key}))&&c(),l=function(){var e;_.textContent=U.t("verification_completed"),"startScreenRecording"===o?s={type:"successful",text:U.t("screen_shared_successfully")}:"rerecordScreen"===o?s={type:"unsuccessful",text:U.t("screen_sharing_stopped")}:"share-screen-again"===o&&(s={type:"unsuccessful",text:U.t("please_share_entire_screen")}),w.textContent=U.t(s.text),w.style.color="unsuccessful"===s.type?"#E95E5E":"",k.innerHTML="";var t=document.createElement("button");t.className="orange-hollow-btn",t.textContent=U.t("previous_step");var r=["verify_candidate","verify_id","record_audio","record_room"];(null===(e=i.filter((function(e){return r.includes(e.key)})))||void 0===e?void 0:e.length)>0&&(t.addEventListener("click",h),k.appendChild(t)),"startScreenRecording"===o?((x=document.createElement("button")).className="orange-filled-btn",x.textContent=U.t("done"),x.disabled=n,x.addEventListener("click",p),k.appendChild(x)):"rerecordScreen"!==o&&"share-screen-again"!==o||(y.className="orange-filled-btn",y.textContent=U.t("reshare_screen"),y.addEventListener("click",d),k.appendChild(y)),g.appendChild(k),b.src="".concat(dn.ASSET_URL,"/share-screen-").concat(U.language||"en",".svg")},d=function(){var e=Ta(xa().mark((function e(){var t,n,r;return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){var n=navigator.userAgent.toLowerCase().includes("firefox")?{video:{mediaSource:"screen"}}:{video:{displaySurface:"monitor"}};navigator.mediaDevices.getDisplayMedia(n).then((function(t){t.getVideoTracks()[0].addEventListener("ended",(function(){fr({notify:!1,eventName:"screen_shared_stopped",eventType:"error"}),window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"screen_share_stopped",code:40012}),Fo()})),e(t)})).catch((function(e){return t(e)}))}));case 3:if(window.newStream=e.sent,Er("session",{screenRecordingStream:location}),t=navigator.userAgent.toLowerCase().includes("firefox"),n=window.newStream.getVideoTracks()[0],r=n.getSettings(),!(!!t||"monitor"===r.displaySurface)){e.next=15;break}a=window.newStream,o="startScreenRecording",s={type:"successful",text:U.t("screen_shared_successfully")},e.next=18;break;case 15:throw o="rerecordScreen",n.stop(),new Error(U.t("please_share_entire_screen"));case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(0),Zr.error("Error during screen sharing:",e.t0.message),o="share-screen-again",s={type:(null===e.t0||void 0===e.t0?void 0:e.t0.message)===U.t("please_share_entire_screen")?"share-screen-again":"unsuccessful",text:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"screen_sharing_stopped"};case 25:l();case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Ta(xa().mark((function e(){var t,n,r,i,a;return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Er("preChecksSteps",{screenSharing:!0}),fr({eventType:"success",notify:!1,eventName:"screen_recording_window_shared",eventValue:Nr()}),$o("IdentityVerificationScreenSix"),t=br("session"),!window.roomInstance){e.next=11;break}return r=new ya.LocalVideoTrack(null===(n=window)||void 0===n||null===(n=n.newStream)||void 0===n?void 0:n.getTracks()[0]),e.next=8,window.roomInstance.localParticipant.publishTrack(r);case 8:i=e.sent,a=[].concat(wa(t.screen_sharing_video_name),[i.trackSid]),Er("session",{screen_sharing_video_name:a});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e;(a&&a.getVideoTracks()[0].stop(),window.socket&&window.socket.readyState===WebSocket.OPEN)&&(null===(e=window.socket)||void 0===e||e.send(JSON.stringify({event:"resetSession"})));Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1,roomScanningVideo:!1});var t=JSON.parse(localStorage.getItem("navHistory")),n=t.indexOf("IdentityVerificationScreenFive"),r=n>0?t[n-1]:null;$o(r)},(f=document.createElement("div")).classList.add("screen-share-container"),m=document.createElement("div"),Ri(m,6),(g=document.createElement("div")).classList.add("screen-wrapper"),(_=document.createElement("div")).classList.add("ivsf-header-titles"),_.textContent=U.t("verification_completed"),(v=document.createElement("div")).classList.add("screen-desc"),v.textContent=U.t("verification_completed_msg"),g.appendChild(_),g.appendChild(v),g.appendChild(m),y=document.createElement("button"),(b=document.createElement("img")).classList.add("screen-share-dummy"),b.src="".concat(dn.ASSET_URL,"/share-screen-").concat((null==U?void 0:U.language)||"en",".svg"),b.alt="camera-icon",g.appendChild(b),(w=document.createElement("div")).classList.add("ivsf-query-msg"),w.id="query-message-screen",s.text&&(w.textContent=U.t(s.text),"unsuccessful"===s.type&&(w.style.color="#E95E5E"),g.appendChild(w)),(k=document.createElement("div")).classList.add("ivsf-btn-container"),x=document.createElement("button"),f.appendChild(g),S=document.createElement("style"),f.appendChild(S),t.innerHTML="",t.appendChild(f),window.newStream||d(),i.find((function(e){return"mobile_proctoring"===e.key}))&&u(),U.on("languageChanged",l),e.abrupt("return",f);case 54:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function Ia(){Ia=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ea(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ea(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Na(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Aa(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Na(a,r,i,o,s,"next",e)}function s(e){Na(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Oa=function(){var e=Aa(Ia().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b,w;return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.querySelector(".screen-four-container")){e.next=2;break}return e.abrupt("return");case 2:window.userMediaStream=null,n="startRecording",r=!1,i="scan_your_room",a=!1,o=null,s=null,c=[],u=Tr(),l=(null==u?void 0:u.entities)||[],d=!0,p={width:640,height:480,facingMode:"user",video:!localStorage.getItem("deviceId")||{deviceId:{exact:localStorage.getItem("deviceId")}}},h=null,f=function(){var e=Aa(Ia().mark((function e(t){return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"startRecording"===t&&((s=new MediaRecorder(window.userMediaStream)).ondataavailable=function(e){e.data.size>0&&c.push(e.data)},s.onstop=function(){clearTimeout(h),o=new Blob(c,{type:"video/webm"}),r=!0,c=[],b()},s.start(),n="beingRecorded",d=!0,b(),setTimeout((function(){d=!1,b()}),3e3),h=setTimeout((function(){s&&"recording"===s.state&&(s.stop(),n="stopRecording",b())}),6e4))}catch(e){Zr.error("Error accessing media devices:",e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Aa(Ia().mark((function e(){return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,n="startRecording",i="scan_your_room",b();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Aa(Ia().mark((function e(){return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(window.recordingDotInterval),clearTimeout(h),s&&s.stop(),n="stopRecording",b();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Aa(Ia().mark((function e(){return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=!1,a=!1,o=null,n="startRecording",i="scan_your_room",b(),window.userMediaStream&&(window.userMediaStream.getTracks().forEach((function(e){return e.stop()})),window.userMediaStream=null),Er("preChecksSteps",{roomScanningVideo:!0}),fr({eventType:"success",notify:!1,eventName:"room_scan_completed",eventValue:Nr()}),$o("MobileProctoring")}catch(e){Zr.error("Error navigating to next step:",e)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){r=!1,a=!1,n="startRecording",i="scan_your_room",o=null,b(),Er("preChecksSteps",{audioDetection:!1,roomScanningVideo:!1});var e=JSON.parse(localStorage.getItem("navHistory")),t=e.indexOf("IdentityVerificationScreenFour"),s=t>0?e[t-1]:null;$o(s)},y=function(){var e=Aa(Ia().mark((function e(){var t,r,s;return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=!0,i="file_is_being_uploaded",b(),e.next=6,Un({file:o,folderName:"videos"});case 6:null!=(r=e.sent)&&null!==(t=r.data)&&void 0!==t&&t.file_url&&(s=r.data.file_url,Er("session",{room_scan_video:s}),n="uploaded_file",i="candidate_video_is_uploaded_successfully",b()),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),a=!1,i="something_went_wrong_please_upload_again",n="stopRecording",b();case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Aa(Ia().mark((function e(){var s,c,u,h,b,k,x,S,T,C,E,I,N,A,O,R,P,D,L,M,F,z,$,j,B;return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=null==t?void 0:t.querySelector(".screen-four-container"))||((s=document.createElement("div")).className="screen-four-container",s.id="screen-four-main-container",t.appendChild(s)),s.innerHTML="",c=document.createElement("div"),Ri(c,4),(u=document.createElement("div")).className="ivsf-wrapper",(h=document.createElement("div")).className="room-scan-header-title",h.textContent=U.t("workspace_checking"),(b=document.createElement("div")).className="ivsf-msg",b.textContent=U.t("workspace_checking_msg"),(k=document.createElement("div")).className="ivsf-header-img-container",r&&o?((x=document.createElement("video")).id="myVideo",x.className="my-recorded-video2",x.controls=!0,x.autoplay=!0,x.src=URL.createObjectURL(o),k.appendChild(x)):"beingRecorded"===n&&((S=document.createElement("div")).className="ivsf-recording-badge-container",(T=document.createElement("img")).className="ivsf-recording-dot",T.src="".concat(dn.ASSET_URL,"/white-dot.svg"),T.alt="recording-dot",C=!1,E=setInterval((function(){T.src="".concat(dn.ASSET_URL,"/").concat(C?"white-dot.svg":"red-dot.svg"),C=!C}),1e3),window.recordingDotInterval=E,(I=document.createElement("video")).autoplay=!0,I.muted=!0,I.height=250,I.id="webcam-recorded-media",I.srcObject=window.userMediaStream,S.appendChild(T),S.appendChild(document.createTextNode("".concat(U.t("recording")))),k.appendChild(S),k.appendChild(I)),u.appendChild(h),u.appendChild(b),u.appendChild(c),u.appendChild(k),(N=document.createElement("div")).className="ivsf-query-msg",N.textContent=U.t(i),"something_went_wrong_please_upload_again"===i&&(N.style.color="#E95E5E"),u.appendChild(N),(A=document.createElement("div")).className="ivsf-btn-container","startRecording"!==n){e.next=45;break}return O={audio:null===localStorage.getItem("microphoneID")||{deviceId:{exact:localStorage.getItem("microphoneID")}},video:p.video},e.next=31,navigator.mediaDevices.getUserMedia(O);case 31:window.userMediaStream=e.sent,(R=document.createElement("video")).autoplay=!0,R.muted=!0,R.height=250,R.id="webcam-recording-media",R.srcObject=window.userMediaStream,k.appendChild(R),P=w("".concat(U.t("previous_step")),"orange-hollow-btn",v),D=w("".concat(U.t("record_video")),"orange-filled-btn",(function(){return f("startRecording")})),A.appendChild(P),A.appendChild(D),e.next=46;break;case 45:"beingRecorded"===n?(M=w("".concat(U.t("previous_step")),"orange-hollow-btn",v),(F=w("".concat(U.t("stop_recording")),"orange-filled-btn",g)).disabled=d,z=["verify_candidate","verify_id","record_audio"],(null===(L=l.filter((function(e){return z.includes(e.key)})))||void 0===L?void 0:L.length)>0&&A.appendChild(M),A.appendChild(F)):"stopRecording"!==n&&"uploaded_file"!==n||($=w("".concat(U.t("reset")),"orange-hollow-btn",m),A.appendChild($),"uploaded_file"!==n?((j=w("".concat(U.t("upload")),"orange-filled-btn",y)).disabled=a,A.appendChild(j)):(B=w("".concat(U.t("next_step")),"orange-filled-btn",_),A.appendChild(B)));case 46:u.appendChild(A),s.appendChild(u);case 48:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e,t,n){var r=document.createElement("button");return r.textContent=e,r.className=t,r.addEventListener("click",n),r},f(),b(),U.on("languageChanged",(function(){b()}));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Pa(){Pa=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ra(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ra(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){Ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ma(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ra(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ra(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fa(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function za(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Fa(a,r,i,o,s,"next",e)}function s(e){Fa(a,r,i,o,s,"throw",e)}o(void 0)}))}}var $a=function(){var e=za(Pa().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=null,r=null,i=[],a=[],o=null,s=null,c={width:640,height:480,facingMode:"user"},u={noiseSuppression:!0},l=JSON.parse(localStorage.getItem("schoolTheme")),d=[{svg:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<circle cx="24" cy="24" r="24" fill="#FF961B"/>\n\t\t\t\t<g clip-path="url(#clip0)">\n\t\t\t\t<path d="M23.9409 11.0078C23.5205 11.0078 23.1797 11.3487 23.1797 11.769V36.2299C23.1797 36.6504 23.5205 36.9912 23.9409 36.9912C24.3613 36.9912 24.7021 36.6503 24.7021 36.2299V11.7691C24.7022 11.3487 24.3613 11.0078 23.9409 11.0078Z" fill="white"/>\n\t\t\t\t<path d="M36.8643 24.7484L35.1193 19.9013C34.8916 19.0308 34.3656 18.3025 33.6677 17.814C34.2407 17.2599 34.5981 16.4842 34.5981 15.626C34.5981 13.947 33.2322 12.5811 31.5532 12.5811C29.8742 12.5811 28.5082 13.947 28.5082 15.626C28.5082 16.4842 28.8657 17.2599 29.4387 17.814C28.7408 18.3025 28.2148 19.0309 27.9871 19.9013L26.2421 24.7484C25.7971 25.9844 26.4853 27.3415 27.747 27.7129V33.1344C27.747 34.3936 28.7714 35.418 30.0307 35.418C30.615 35.418 31.1488 35.1974 31.5531 34.8351C31.9574 35.1974 32.4912 35.418 33.0756 35.418C34.3348 35.418 35.3593 34.3936 35.3593 33.1344V27.7129C36.6195 27.342 37.3097 25.9858 36.8643 24.7484ZM31.5532 14.1035C32.3927 14.1035 33.0757 14.7865 33.0757 15.626C33.0757 16.4655 32.3927 17.1485 31.5532 17.1485C30.7137 17.1485 30.0308 16.4655 30.0308 15.626C30.0308 14.7865 30.7137 14.1035 31.5532 14.1035ZM34.7156 26.2832H34.5981C34.1777 26.2832 33.8369 26.6241 33.8369 27.0444V33.1343C33.8369 33.554 33.4954 33.8955 33.0757 33.8955C32.6559 33.8955 32.3145 33.554 32.3145 33.1343V28.5668C32.3145 28.1464 31.9736 27.8056 31.5533 27.8056C31.1329 27.8056 30.7921 28.1465 30.7921 28.5668V33.1343C30.7921 33.554 30.4506 33.8955 30.0309 33.8955C29.6111 33.8955 29.2696 33.554 29.2696 33.1343V27.0445C29.2696 26.6241 28.9288 26.2833 28.5084 26.2833H28.391C27.8644 26.2833 27.4963 25.7598 27.6748 25.2642C29.5568 20.0367 29.4405 20.365 29.4543 20.3098C29.6955 19.3449 30.5587 18.6709 31.5534 18.6709C32.5481 18.6709 33.4113 19.3449 33.6525 20.3098C33.6663 20.3649 33.5506 20.0381 35.4321 25.2642C35.6102 25.7596 35.2423 26.2832 34.7156 26.2832Z" fill="white"/>\n\t\t\t\t<path d="M18.596 17.6556C19.079 17.1165 19.3735 16.4051 19.3735 15.626C19.3735 13.947 18.0076 12.5811 16.3286 12.5811C14.6496 12.5811 13.2837 13.947 13.2837 15.6259C13.2837 16.4051 13.5782 17.1165 14.0612 17.6556C12.2538 18.509 11 20.3492 11 22.4771V25.522C11 26.5145 11.6363 27.361 12.5225 27.6752V33.1343C12.5225 34.3935 13.5469 35.4179 14.8062 35.4179C15.3905 35.4179 15.9243 35.1973 16.3286 34.835C16.7329 35.1973 17.2667 35.4179 17.8511 35.4179C19.1103 35.4179 20.1348 34.3935 20.1348 33.1343V27.6752C21.0209 27.361 21.6573 26.5145 21.6573 25.5219V22.477C21.6573 20.3492 20.4035 18.509 18.596 17.6556ZM16.3286 14.1035C17.1681 14.1035 17.8511 14.7865 17.8511 15.626C17.8511 16.4655 17.1681 17.1485 16.3286 17.1485C15.4891 17.1485 14.8062 16.4655 14.8062 15.626C14.8062 14.7865 15.4892 14.1035 16.3286 14.1035ZM20.1348 25.522C20.1348 25.9418 19.7933 26.2832 19.3736 26.2832C18.9532 26.2832 18.6124 26.6241 18.6124 27.0444V33.1343C18.6124 33.554 18.2709 33.8955 17.8512 33.8955C17.4314 33.8955 17.0899 33.554 17.0899 33.1343V28.5668C17.0899 28.1464 16.7491 27.8056 16.3287 27.8056C15.9084 27.8056 15.5675 28.1465 15.5675 28.5668V33.1343C15.5675 33.554 15.226 33.8955 14.8063 33.8955C14.3866 33.8955 14.0451 33.554 14.0451 33.1343V27.0445C14.0451 26.6241 13.7043 26.2833 13.2839 26.2833C12.8641 26.2833 12.5227 25.9418 12.5227 25.522V22.4771C12.5227 20.3784 14.2301 18.6709 16.3288 18.6709C18.4275 18.6709 20.135 20.3784 20.135 22.4771V25.522H20.1348Z" fill="white"/>\n\t\t\t\t</g>\n\t\t\t\t<defs>\n\t\t\t\t<clipPath id="clip0">\n\t\t\t\t<rect width="26" height="26" fill="white" transform="translate(11 11)"/>\n\t\t\t\t</clipPath>\n\t\t\t\t</defs>\n\t\t\t\t</svg>\n\t\t\t\t',text:"use_washroom"},{svg:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<circle cx="24" cy="24" r="24" fill="#FF961B"/>\n\t\t\t\t<path d="M33.6485 12.1421L33.6485 12.1421L33.647 12.1405C33.4633 11.9549 33.205 11.85 32.9375 11.85H15.0625C14.7949 11.85 14.5366 11.9549 14.353 12.1405L14.353 12.1405L14.3514 12.1421C14.1704 12.3305 14.0762 12.5821 14.1041 12.841L14.1041 12.8412L16.5416 35.3412L16.5416 35.3414C16.5933 35.8108 17.0156 36.15 17.5 36.15H30.5C30.9843 36.15 31.4067 35.8108 31.4583 35.3414L31.4583 35.3412L33.1774 19.4699C33.1774 19.4697 33.1775 19.4694 33.1775 19.4691C33.1789 19.4572 33.1804 19.4465 33.182 19.4346L33.182 19.4346L33.1825 19.4306L33.8958 12.8426L33.8959 12.8424C33.9237 12.5822 33.8297 12.3307 33.6485 12.1421ZM24.6056 18.0499C21.9428 16.0339 18.6956 16.3545 16.4846 16.9449L16.1282 13.65H31.8717L31.3219 18.7251C29.2739 19.3361 26.6527 19.6035 24.6058 18.05L24.6056 18.0499ZM31.1143 20.6461L29.6292 34.35H18.3707L16.6826 18.7675C18.5126 18.2227 21.2695 17.8384 23.3942 19.4485C24.9367 20.6179 26.6874 20.997 28.3111 20.997C29.3252 20.997 30.28 20.8443 31.1143 20.6461Z" fill="white" stroke="white" stroke-width="0.3"/>\n\t\t\t\t</svg>\n\t\t\t\t',text:"get_water"},{svg:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<circle cx="24" cy="24" r="24" fill="#FF961B"/>\n\t\t\t\t<path d="M35.5879 23.875C34.607 22.4143 32.9612 22.5876 32.911 22.5762C32.6944 22.5762 32.4813 22.6007 32.2743 22.6469L33.4105 18.2496C33.9762 16.06 32.9529 13.7644 30.9451 12.7239C28.7376 11.5801 26.4016 11.0001 24.0003 11C21.6005 11.0001 19.2644 11.5801 17.057 12.7238C15.0491 13.7643 14.0259 16.06 14.5916 18.2495L15.7278 22.6468C15.3017 22.5518 15.0115 22.582 14.8521 22.5761C12.7668 22.5761 11.3468 24.6901 12.1346 26.6166C13.1602 29.1248 14.9393 31.2261 17.258 32.6566L15.2475 35.3812C14.9145 35.8326 15.0104 36.4684 15.4618 36.8015C15.9161 37.1367 16.5513 37.0356 16.8821 36.5872L19.0912 33.5933C20.6315 34.23 22.2861 34.5605 23.9775 34.5605H24.0246C25.716 34.5605 27.3706 34.23 28.9109 33.5933L31.1199 36.5872C31.452 37.0373 32.0877 37.1353 32.5402 36.8015C32.9916 36.4684 33.0876 35.8326 32.7545 35.3812L30.7441 32.6566C33.0596 31.2281 34.8405 29.1283 35.8675 26.6166C36.2375 25.7117 36.133 24.6868 35.5879 23.875ZM17.9916 14.5274C19.9074 13.5346 21.929 13.0313 24.0018 13.0313C26.073 13.0313 28.0946 13.5346 30.0104 14.5273C31.1859 15.1365 31.7753 16.4581 31.4437 17.7415L29.6801 24.5671C28.2954 25.5942 26.207 26.3438 24.001 26.3438C21.7927 26.3438 19.7038 25.5921 18.3219 24.5671L16.5583 17.7414C16.2268 16.4581 16.8161 15.1364 17.9916 14.5274ZM33.9873 25.8478C32.3364 29.8853 28.4035 32.5293 24.0246 32.5293H23.9775C19.5895 32.5293 15.662 29.8765 14.0148 25.8478C13.7727 25.2557 14.2076 24.6074 14.8521 24.6074C14.9629 24.6263 15.4486 24.5051 15.8198 24.9744C17.1152 26.6123 20.2279 28.375 24.0011 28.375C27.7742 28.375 30.8869 26.6122 32.1823 24.9744C32.3668 24.7412 32.6324 24.6074 32.9109 24.6074C33.0176 24.6263 33.5614 24.5009 33.9014 25.0073C34.0711 25.2599 34.1024 25.5663 33.9873 25.8478Z" fill="white"/>\n\t\t\t\t</svg>\n\t\t\t\t',text:"get_comfy"},{svg:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<circle cx="24" cy="24" r="24" fill="#FF961B"/>\n\t\t\t\t\t<g clip-path="url(#clip0)">\n\t\t\t\t\t<path d="M36.9693 12.941C36.913 11.9082 36.0916 11.0869 35.0588 11.0305C32.9748 10.9167 28.8969 11.0274 24.9975 13.0443C23.0097 14.0725 20.9073 15.8158 19.2296 17.8271C19.2089 17.8519 19.1888 17.8768 19.1683 17.9017L15.3607 18.1958C14.734 18.2442 14.1757 18.5727 13.8291 19.097L11.2314 23.0261C10.9685 23.4237 10.9267 23.9213 11.1196 24.3571C11.3124 24.793 11.7087 25.0968 12.1797 25.1698L15.3876 25.6666C15.3763 25.729 15.3649 25.7913 15.3545 25.8537C15.2477 26.4925 15.4594 27.1493 15.9208 27.6106L20.3891 32.079C20.7717 32.4616 21.2886 32.6725 21.8182 32.6725C21.9273 32.6725 22.037 32.6635 22.1462 32.6452C22.2085 32.6348 22.2708 32.6235 22.3332 32.6121L22.83 35.8201C22.903 36.2911 23.2068 36.6874 23.6426 36.8803C23.8239 36.9605 24.0158 37.0001 24.2069 37.0001C24.4751 37 24.7415 36.9219 24.9737 36.7684L28.9027 34.1707C29.4271 33.824 29.7555 33.2658 29.8039 32.6391L30.098 28.8316C30.1228 28.8111 30.1478 28.791 30.1726 28.7703C32.184 27.0925 33.9273 24.9902 34.9555 23.0023C36.9724 19.1028 37.083 15.0248 36.9693 12.941ZM28.0626 32.8999L24.3042 35.3847L23.82 32.2584C25.4084 31.7914 26.9797 31.0434 28.4767 30.0413L28.2851 32.5217C28.2732 32.6764 28.192 32.8143 28.0626 32.8999ZM21.4663 31.0018L16.9979 26.5334C16.8839 26.4194 16.8312 26.2592 16.8571 26.1048C16.9899 25.3105 17.1964 24.5543 17.4519 23.8419L24.1564 30.5465C23.3009 30.8529 22.5345 31.0357 21.8949 31.1427C21.7404 31.1684 21.5803 31.1158 21.4663 31.0018ZM15.4781 19.7147L17.9584 19.5231C16.9563 21.0201 16.2083 22.5914 15.7413 24.1799L12.615 23.6957L15.0999 19.9372C15.1855 19.8077 15.3234 19.7267 15.4781 19.7147ZM29.1969 27.6003C27.9663 28.6268 26.7718 29.3692 25.6707 29.9064L18.0931 22.3288C18.7968 20.8915 19.6557 19.6946 20.3994 18.803C21.9521 16.9416 23.8831 15.3358 25.6975 14.3974C29.2762 12.5463 33.0468 12.4466 34.9759 12.5516C35.2312 12.5655 35.4343 12.7686 35.4482 13.024C35.5534 14.9531 35.4535 18.7236 33.6024 22.3024C32.664 24.1167 31.0582 26.0477 29.1969 27.6003Z" fill="white"/>\n\t\t\t\t\t<path d="M28.81 22.9971C29.7851 22.997 30.7606 22.6258 31.5029 21.8835C32.2223 21.1641 32.6184 20.2077 32.6184 19.1905C32.6184 18.1732 32.2223 17.2168 31.5029 16.4975C30.018 15.0125 27.6018 15.0126 26.117 16.4975C25.3976 17.2168 25.0015 18.1732 25.0015 19.1905C25.0015 20.2077 25.3977 21.1641 26.117 21.8835C26.8595 22.626 27.8345 22.9972 28.81 22.9971ZM27.1941 17.5747C27.6396 17.1292 28.2247 16.9064 28.8099 16.9064C29.3951 16.9064 29.9802 17.1292 30.4257 17.5747C30.8573 18.0063 31.0949 18.5801 31.0949 19.1904C31.0949 19.8008 30.8573 20.3746 30.4257 20.8062C29.5348 21.6972 28.085 21.6971 27.194 20.8062C26.7625 20.3746 26.5248 19.8008 26.5248 19.1905C26.5248 18.5801 26.7625 18.0063 27.1941 17.5747Z" fill="white"/>\n\t\t\t\t\t<path d="M11.7771 32.4264C11.972 32.4264 12.167 32.3521 12.3157 32.2033L14.8026 29.7163C15.1 29.4189 15.1 28.9366 14.8026 28.6391C14.5051 28.3416 14.0228 28.3416 13.7253 28.6391L11.2385 31.126C10.941 31.4235 10.941 31.9058 11.2385 32.2033C11.3872 32.352 11.5821 32.4264 11.7771 32.4264Z" fill="white"/>\n\t\t\t\t\t<path d="M17.0816 30.9184C16.7842 30.6209 16.3018 30.6209 16.0044 30.9184L11.2231 35.6997C10.9256 35.9972 10.9256 36.4795 11.2231 36.777C11.3718 36.9257 11.5667 37 11.7617 37C11.9566 37 12.1516 36.9257 12.3003 36.7769L17.0815 31.9956C17.3791 31.6982 17.3791 31.2159 17.0816 30.9184Z" fill="white"/>\n\t\t\t\t\t<path d="M18.2835 33.1977L15.7966 35.6846C15.4991 35.9821 15.4991 36.4644 15.7966 36.7619C15.9453 36.9106 16.1403 36.985 16.3352 36.985C16.5301 36.985 16.7251 36.9106 16.8738 36.7619L19.3607 34.2749C19.6581 33.9775 19.6581 33.4952 19.3607 33.1977C19.0632 32.9002 18.5809 32.9002 18.2835 33.1977Z" fill="white"/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<defs>\n\t\t\t\t\t<clipPath id="clip0">\n\t\t\t\t\t<rect width="26" height="26" fill="white" transform="translate(11 11)"/>\n\t\t\t\t\t</clipPath>\n\t\t\t\t\t</defs>\n\t\t\t\t\t</svg>\n\t\t\t\t\t',text:"get_ready"}],Zr.success("currentCaptureMode",n),p=function(){var e=za(Pa().mark((function e(t,n){return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"camera"===n&&(c=La(La({},c),{},{deviceId:{ideal:t}}),localStorage.setItem("deviceId",t)),"microphone"===n&&(u=La(La({},u),{},{deviceId:{ideal:t}}),localStorage.setItem("microphoneID",t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e;r&&(null===(e=r)||void 0===e||null===(e=e.getTracks())||void 0===e||e.forEach((function(e){return e.stop()})),r=null);fr({eventType:"success",notify:!1,eventName:"prevalidation_passed"}),Er("preChecksSteps",{preValidation:!0}),$o("IdentityVerificationScreenOne")},f=function(){var e=t.querySelector(".ivso-container");e?e.innerHTML="":((e=document.createElement("div")).className="ivso-container",t.appendChild(e));var n=document.createElement("div"),r=document.createElement("div");n.className="pvi-header-title",r.className="pvi-msg",e.append(n),e.append(r);var i=document.createElement("div");i.className="pvi-instructions-container";var a=[];d.forEach((function(e){var t=document.createElement("div");t.className="pvi-instruction-svg",t.innerHTML=e.svg,t.querySelectorAll("circle").forEach((function(e){e.setAttribute("fill","".concat(null==l?void 0:l.theming))})),i.appendChild(t);var n=document.createElement("div");n.className="pvi-instruction-txt",a.push(n),i.appendChild(n)})),e.appendChild(i);var o=document.createElement("div");o.id="videoMainContainer",o.className="pvi-header-img";var s=document.createElement("div");s.id="videoContainer",o.appendChild(s),e.appendChild(o);var c=document.createElement("div");c.id="dropdownContainer",c.className="multi-device-block";var u=document.createElement("div");u.className="camera-container";var p=document.createElement("select");p.id="cameraDropdown",u.appendChild(p),c.appendChild(u);var f=document.createElement("div");f.className="microphone-container";var g=document.createElement("select");g.id="microphoneDropdown",f.appendChild(g),c.appendChild(f);var _=document.createElement("div");_.id="message",_.className="pvi-query-msg";var v=document.createElement("div");v.id="button-container",v.className="pvi-btn-container";var y=document.createElement("button");y.id="continue-btn",y.textContent=U.t("continue"),y.className="orange-filled-btn",y.style.marginLeft="auto",y.style.padding="9px 32px",y.addEventListener("click",h),v.append(y),e.appendChild(c),e.appendChild(_),e.appendChild(v),t.appendChild(e),m(n,r,_,a,d)},m=function(e,t,n,r,i,a){e.textContent=U.t("system_diagnostic"),t.textContent=U.t("initial_system_check_passed"),n.textContent=U.t("select_preferred_camera_and_microphone"),Array.isArray(r)&&i.forEach((function(e,t){r[t]&&(r[t].textContent=U.t(e.text))})),a&&(a.textContent=U.t("continue"))},g=function(){var e=za(Pa().mark((function e(){var t,n,r,c,u,l;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){var n=t.filter((function(e){return"videoinput"===e.kind}));n.sort((function(e,t){var n=function(e){var t=e.label.toLowerCase();return t.includes("webcam")||t.includes("camera")||t.includes("integrated")||t.includes("facetime")||t.includes("isight")};return n(e)?-1:n(t)?1:0})),e(n)})).catch((function(e){Zr.error("Error enumerating devices:",e),t(e)}))}));case 2:return i=e.sent,i=null===(t=i)||void 0===t?void 0:t.map((function(e){return La({id:e.deviceId,name:e.label},e)})),localStorage.setItem("deviceId",null!==(n=i)&&void 0!==n&&n.length?i[0].id:null),s=null!==(r=i)&&void 0!==r&&r.length?i[0].id:null,e.next=8,Cr();case 8:a=e.sent,a=null===(c=a)||void 0===c?void 0:c.map((function(e){return La({id:e.deviceId,name:e.label},e)})),localStorage.setItem("microphoneID",null!==(u=a)&&void 0!==u&&u.length?a[0].id:null),o=null!==(l=a)&&void 0!==l&&l.length?a[0].id:null,v(),_();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=document.getElementById("cameraDropdown"),t=document.getElementById("microphoneDropdown"),n=document.getElementById("message");e.innerHTML="",t.innerHTML="",i.forEach((function(t){var n=document.createElement("option");n.value=t.id,n.textContent=t.name,t.id===s&&(n.selected=!0),e.appendChild(n)})),a.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,e.id===o&&(n.selected=!0),t.appendChild(n)})),n.textContent=U.t("select_preferred_camera_and_microphone"),e.onchange=function(e){s=e.target.value,p(s,"camera")},t.onchange=function(e){o=e.target.value,p(o,"microphone")}},v=function(){var e=za(Pa().mark((function e(){var t,i;return Pa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.getElementById("videoContainer")).innerHTML="",e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({video:c,audio:!1});case 5:r=e.sent,(i=document.getElementById("myVideo"))||((i=document.createElement("video")).id="myVideo",i.className="my-recorded-video",i.controls=!1,i.autoplay=!0),i.srcObject=r,t.appendChild(i),n="done",_(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),Zr.error("Webcam error:",e.t0),_();case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),f(),g(),U.on("languageChanged",(function(){var e=document.querySelector(".pvi-header-title"),t=document.querySelector(".pvi-msg"),n=document.getElementById("message"),r=document.querySelectorAll(".pvi-instruction-txt"),i=document.getElementById("continue-btn");m(e,t,n,Array.from(r),d,i)}))}catch(e){Zr.error("Failed to initialize; error: "+e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ja(e){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(e)}function Ba(){Ba=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ja(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ja(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Va(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var Ua=function(){var e,t=(e=Ba().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f;return Ba().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Zr.error("tabContent is not defined or is not a valid DOM element"),e.abrupt("return");case 3:Zr.error("tabContent",t),t.innerHTML="",n=!1,r=!1,Zr.success("in the ExamPreparation"),(i=document.createElement("div")).className="exam-preparation-container",(a=document.createElement("div")).className="exam-preparation-wrapper",i.appendChild(a),(o=document.createElement("div")).className="exam-preparation-header-title",o.textContent=U.t("exam_preparation"),a.appendChild(o),(s=document.createElement("div")).className="exam-preparation-msg",s.textContent=U.t("exam_preparation_msg"),a.appendChild(s),(c=document.createElement("img")).className="exam-preparation-header-img",c.src="".concat(dn.ASSET_URL,"/camera-icon.svg"),c.alt="camera-icon",a.appendChild(c),(u=document.createElement("div")).className="exam-preparation-tnc-block",a.appendChild(u),(l=document.createElement("input")).className="exam-preparation-tnc-checkbox",l.type="checkbox",l.addEventListener("change",(function(e){n=e.target.checked,r&&(u.style.color="",u.style.fontWeight="",r=!1)})),u.appendChild(l),(d=document.createElement("div")).className="exam-preparation-tnc-txt",d.textContent=U.t("exam_preparation_tnc"),u.appendChild(d),d.addEventListener("click",(function(){l.checked=!l.checked,n=l.checked,r&&(u.style.color="",u.style.fontWeight="",r=!1)})),(p=document.createElement("div")).className="exam-preparation-sd-container",p.innerHTML="\n    ".concat(U.t("view_our"),' <a\n      class="exam-preparation-sd-link"\n      href="https://mereos.eu/conditions-générales"\n      target="_blank"\n    >').concat(U.t("security_document"),"</a> ").concat(U.t("for_more_information"),"\n  "),a.appendChild(p),(h=document.createElement("div")).className="exam-preparation-btn-container",a.appendChild(h),(f=document.createElement("button")).className="orange-filled-btn",f.textContent=U.t("continue"),f.style.padding="11px 32px",f.addEventListener("click",(function(){n?(fr({eventType:"success",notify:!1,eventName:"terms_and_conditions_read",eventValue:Nr()}),$o("IdentityCardRequirement"),Er("preChecksSteps",{examPreparation:!0})):(r=!0,u.style.color="#E95E5E",u.style.fontWeight="700")})),h.appendChild(f),t.appendChild(i);case 53:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Va(a,r,i,o,s,"next",e)}function s(e){Va(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(U.on("languageChanged",(function(){var e=document.querySelector(".tab-content.active");e&&"ExamPreparation"===e.id&&Ua(e)})),"undefined"==typeof window)throw new Error("[TalkJS] The TalkJS JavaScript SDK only works in browsers (and not, for example, in Node.js)");!function(e,t,n,r,i,a){(a=t.createElement("script")).async=1,a.src="https://cdn.talkjs.com/talk.js",t.head.appendChild(a),r=e.Promise,e.Talk={v:3,ready:{then:function(e){if(r)return new r((function(t,r){n.push([e,t,r])}));n.push([e])},catch:function(){return r&&new r},c:n}}}(window,document,[]);const Ga=window.Talk;var qa=n(6691),Wa=n.n(qa);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ya(){Ya=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ha(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ha(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Ka(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Xa(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ka(a,r,i,o,s,"next",e)}function s(e){Ka(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Qa=function(){var e=Xa(Ya().mark((function e(t){var n,r;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.put("/candidates/custom_candidate_assessment/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ja=function(){var e=Xa(Ya().mark((function e(t){var n,r;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/candidates/custom_candidate_assessment/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function eo(){eo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Za(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Za(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function to(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function no(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){to(a,r,i,o,s,"next",e)}function s(e){to(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ro="".concat(dn.ASSET_URL,"/ram-icon-green.svg"),io="".concat(dn.ASSET_URL,"/cpu-icon-green.svg"),ao="".concat(dn.ASSET_URL,"/upload-speed-green.svg"),oo="".concat(dn.ASSET_URL,"/download-speed-green.svg"),so="".concat(dn.ASSET_URL,"/ram-icon-red.svg"),co="".concat(dn.ASSET_URL,"/cpu-icon-red.svg"),uo="".concat(dn.ASSET_URL,"/upload-speed-red.svg"),lo="".concat(dn.ASSET_URL,"/download-speed-red.svg"),po={ram:"ram-icon-gray.svg",cpu:"cpu-icon-gray.svg",upload_speed:"upload-speed-gray.svg",download_speed:"download-speed-gray.svg"},ho=function(e){e.innerHTML="";var t=document.createElement("div");t.classList.add("system-requirement-test-screen");var n=document.createElement("h1");n.classList.add("system-requirement-heading"),n.textContent=U.t("system_requirements");var r=document.createElement("div");r.classList.add("diagnostic-status","container-box");var i=document.createElement("div");i.classList.add("container");var a=document.createElement("div");a.classList.add("container-top");var o=document.createElement("label");o.classList.add("system-requirement-description"),o.textContent=U.t("system_requirement_checking_msg");var s=document.createElement("div");s.classList.add("container-middle","box-section");var c=Tr(),u=(null==c?void 0:c.entities)||[],l=u.find((function(e){return"verify_ram"===e.key})),d=u.find((function(e){return"verify_cpu"===e.key})),p=u.find((function(e){return"verify_upload_speed"===e.key})),h=u.find((function(e){return"verify_download_speed"===e.key})),f=[];l&&f.push("ram"),d&&f.push("cpu"),p&&f.push("upload_speed"),h&&f.push("download_speed"),f.forEach((function(e){var t=function(e,t){var n=document.createElement("div");n.classList.add("requirement-item","grey-box"),n.id="".concat(e,"RequirementItem");var r=document.createElement("div");r.classList.add("grey-box-right");var i=document.createElement("img");i.id="".concat(e,"StatusIcon"),i.src="".concat(dn.ASSET_URL,"/").concat(po[e]),i.alt="";var a=document.createElement("label");a.textContent=t;var o=document.createElement("div");o.classList.add("grey-box-left");var s=document.createElement("img");return s.id="".concat(e,"StatusLoading"),s.src="".concat(dn.ASSET_URL,"/loading-gray.svg"),s.alt="",r.appendChild(i),r.appendChild(a),o.appendChild(s),n.appendChild(r),n.appendChild(o),n}(e,U.t(e));s.appendChild(t)}));var m=document.createElement("div");m.classList.add("button-section");var g=document.createElement("button");g.classList.add("orange-filled-btn"),g.id="requirementContinueBtn",g.disabled=!0,g.textContent=U.t("continue"),g.addEventListener("click",(function(){fr({eventType:"success",notify:!1,eventName:"system_requirement_passed"}),Er("preChecksSteps",{requirementStep:!0}),$o("Prevalidationinstruction")})),m.appendChild(g),i.append(a,o,s,m),r.appendChild(i),t.append(n,r),e.appendChild(t)},fo=function(){var e=no(eo().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h,f;return eo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Zr.error('Element with id "SystemRequirements" not found.'),e.abrupt("return");case 3:return ho(t),n=function(e,t,n){var r=document.getElementById("".concat(e,"StatusIcon")),i=document.getElementById("".concat(e,"StatusLoading"));r&&i&&(r.src=n?t.success:t.failure,i.src="".concat(dn.ASSET_URL,n?"/checkmark-rounded-green.png":"/x-circle.png"))},r=function(e,t){var r=document.getElementById("".concat(e,"RequirementItem"));if(r){var s=Tr(),c=null==s?void 0:s.settings;r.addEventListener("click",no(eo().mark((function r(){var s,u,l,d,p,h,f,m,g,_;return eo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=document.getElementById("".concat(e,"StatusIcon")),u=document.getElementById("".concat(e,"StatusLoading")),l=document.getElementById("requirementContinueBtn"),s&&u){r.next=5;break}return r.abrupt("return");case 5:return l.disabled=!0,u.src="".concat(dn.ASSET_URL,"/loading-gray.svg"),s.src="".concat(dn.ASSET_URL,"/").concat(po[e]),r.next=10,t();case 10:d=r.sent,p=(parseInt(null==d?void 0:d.capacity)/Math.pow(1024,3)).toFixed(0),h=Number(p)>(null==c?void 0:c.ram_size),f=Number(null==d?void 0:d.noOfPrcessor)>(null==c?void 0:c.cpu_size),m=Number(null==d?void 0:d.speedMbps)>(null==c?void 0:c.upload_speed),g=Number(null==d?void 0:d.speedMbps)>(null==c?void 0:c.download_speed),r.t0=e,r.next="ram"===r.t0?19:"cpu"===r.t0?21:"upload_speed"===r.t0?23:"download_speed"===r.t0?25:27;break;case 19:return _=h,r.abrupt("break",28);case 21:return _=f,r.abrupt("break",28);case 23:return _=m,r.abrupt("break",28);case 25:return _=g,r.abrupt("break",28);case 27:_=d;case 28:n(e,{success:a[e],failure:o[e]},_),i();case 30:case"end":return r.stop()}}),r)}))))}},i=function(){var e=document.querySelectorAll(".requirement-item"),t=Array.from(e).every((function(e){var t=e.id.replace("RequirementItem",""),n=document.getElementById("".concat(t,"StatusIcon"));return!!n&&new URL(n.src).pathname===new URL(a[t]||"").pathname}));document.getElementById("requirementContinueBtn").disabled=!t},a={ram:ro,cpu:io,upload_speed:ao,download_speed:oo},o={ram:so,cpu:co,upload_speed:uo,download_speed:lo},e.prev=9,e.next=12,Tr();case 12:return s=e.sent,c=(null==s?void 0:s.entities)||[],u=null==s?void 0:s.settings,l=c.find((function(e){return"verify_ram"===e.key})),d=c.find((function(e){return"verify_cpu"===e.key})),p=c.find((function(e){return"verify_upload_speed"===e.key})),h=c.find((function(e){return"verify_download_speed"===e.key})),f=[],l?f.push(ni().then((function(e){Er("session",{RAMSpeed:e});var t=(parseInt(null==e?void 0:e.capacity)/Math.pow(1024,3)).toFixed(0),i=Number(t)>(null==u?void 0:u.ram_size);return n("ram",{success:ro,failure:so},i),r("ram",ni),i}))):n("ram",{success:ro,failure:so},!0),d?f.push(new Promise((function(e,t){var n=navigator.hardwareConcurrency||"Unknown",r=navigator.deviceMemory?"".concat(navigator.deviceMemory," GB"):"Unknown",i="",a="Unknown";if(window.WebGLRenderingContext){var o=document.createElement("canvas").getContext("webgl");if(o){var s=o.getExtension("WEBGL_debug_renderer_info");if(s){var c=(a=o.getParameter(s.UNMASKED_RENDERER_WEBGL)||"Unknown").match(/@?\s*(\d+(\.\d+)?)\s*GHz/i);c&&(i="".concat(c[1]," GHz"))}}}e({modelName:a,noOfPrcessor:n,cpuSpeedGHz:i,memoryGB:r})})).then((function(e){Er("session",{CPUSpeed:e});var t=Number(null==e?void 0:e.noOfPrcessor)>(null==u?void 0:u.cpu_size);return n("cpu",{success:io,failure:co},t),t}))):n("cpu",{success:io,failure:co},!0),p?f.push(ii().then((function(e){Er("session",{uploadSpeed:e});var t=Number(e.speedMbps)>(null==u?void 0:u.upload_speed);return n("upload_speed",{success:ao,failure:uo},t),r("upload_speed",ii),t}))):n("upload_speed",{success:ao,failure:uo},!0),h?f.push(ri().then((function(e){Er("session",{downloadSpeed:e});var t=Number(e.speedMbps)>(null==u?void 0:u.download_speed);return n("download_speed",{success:oo,failure:lo},t),r("download_speed",ri),t}))):n("download_speed",{success:oo,failure:lo},!0),e.next=26,Promise.all(f);case 26:i(),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(9),Zr.error("Error running diagnostics:",e.t0);case 32:case"end":return e.stop()}}),e,null,[[9,29]])})));return function(t){return e.apply(this,arguments)}}();function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function go(){go=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==mo(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(mo(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function _o(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function vo(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){_o(a,r,i,o,s,"next",e)}function s(e){_o(a,r,i,o,s,"throw",e)}o(void 0)}))}}U.on("languageChanged",(function(){!function(){["ram","cpu","upload_speed","download_speed"].forEach((function(e){var t=document.querySelector("#".concat(e,"RequirementItem label"));t&&(t.textContent=U.t(e))}));var e=document.querySelector(".system-requirement-heading");e&&(e.textContent=U.t("system_requirements"));var t=document.querySelector(".system-requirement-description");t&&(t.textContent=U.t("system_requirement_checking_msg"));var n=document.getElementById("requirementContinueBtn");n&&(n.textContent=U.t("continue"))}()}));var yo=document.createElement("div");yo.className="modal",yo.id="precheck-modal";var bo=document.createElement("div");bo.className="modal-content",yo.appendChild(bo);var wo=document.createElement("div");wo.className="tabs-container",bo.appendChild(wo);var ko=document.createElement("div");ko.className="tab-contents-wrapper";var xo=document.createElement("div");xo.className="tab-content",xo.id="ExamPreparation";var So=document.createElement("div");So.className="tab-content",So.id="IdentityCardRequirement";var To=document.createElement("div");To.className="tab-content",To.id="runSystemDiagnostics";var Co=document.createElement("div");Co.className="tab-content",Co.id="SystemRequirements";var Eo=document.createElement("div");Eo.className="tab-content",Eo.id="IdentityVerificationScreenOne";var Io=document.createElement("div");Io.className="tab-content",Io.id="IdentityVerificationScreenTwo";var No=document.createElement("div");No.className="tab-content",No.id="IdentityVerificationScreenThree";var Ao=document.createElement("div");Ao.className="tab-content",Ao.id="IdentityVerificationScreenFour";var Oo=document.createElement("div");Oo.className="tab-content",Oo.id="IdentityVerificationScreenFive";var Ro=document.createElement("div");Ro.className="tab-content",Ro.id="Prevalidationinstruction";var Po=document.createElement("div");Po.className="tab-content",Po.id="MobileProctoring",ko.appendChild(xo),ko.appendChild(So),ko.appendChild(To),ko.appendChild(Co),ko.appendChild(Eo),ko.appendChild(Io),ko.appendChild(No),ko.appendChild(Ao),ko.appendChild(Oo),ko.appendChild(Ro),ko.appendChild(Po);var Do=function(){var e=!!vr(),t=Tr(),n=(null==t?void 0:t.entities)||[],r=null==n?void 0:n.some((function(e){return"live_chat"===e.key}));if(e&&r){var i=document.getElementById("chat-icon"),a=document.getElementById("talkjs-container");if(i)return i.style.display="block",void(a&&(a.style.display="block"));var o=document.createElement("img");o.className="chat-icon",o.id="chat-icon",o.style.position="fixed",o.style.bottom="20px",o.style.right="20px",o.style.zIndex="99999999",o.style.cursor="grab",o.src="".concat(dn.ASSET_URL,"/mereos.svg"),o.alt="Chat Icon",o.style.width="50px",o.style.height="50px",o.style.userSelect="none";var s=document.createElement("div");s.id="talkjs-container",s.className="live-chat-container",s.style.width="400px",s.style.height="500px",s.style.position="fixed",s.style.bottom="100px",s.style.right="20px",s.style.zIndex="9999",s.style.backgroundColor="white",s.style.border="1px solid #ccc",s.style.borderRadius="8px",s.style.boxShadow="0px 4px 6px rgba(0, 0, 0, 0.1)",s.style.display="none",document.body.appendChild(o),document.body.appendChild(s);var c={icon:{x:0,y:0},container:{x:0,y:0}};Wa()(o).draggable({cursorChecker:function(){return"grabbing"},modifiers:[Wa().modifiers.restrict({restriction:"parent",endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}})],listeners:{start:function(){o.style.cursor="grabbing"},move:function(e){c.icon.x+=e.dx,c.icon.y+=e.dy,c.container.x+=e.dx,c.container.y+=e.dy,o.style.transform="translate(".concat(c.icon.x,"px, ").concat(c.icon.y,"px)"),s.style.transform="translate(".concat(c.container.x,"px, ").concat(c.container.y,"px)")},end:function(){o.style.cursor="grab"}}}),Wa()(s).draggable({enabled:!1});var u=0;o.addEventListener("mousedown",(function(e){e.stopPropagation(),u=Date.now()})),o.addEventListener("click",(function(e){e.stopPropagation(),Date.now()-u<200&&(s.style.display="none"===s.style.display?"block":"none")})),s.addEventListener("click",(function(e){e.stopPropagation()})),document.addEventListener("click",(function(e){o.contains(e.target)||s.contains(e.target)||(s.style.display="none")})),Ga.ready.then((function(){var e,t,n,r,i,a,o,c=br("candidateAssessment"),u=new Ga.User({id:null==c||null===(e=c.candidate)||void 0===e?void 0:e.id,name:null==c||null===(t=c.candidate)||void 0===t?void 0:t.name,email:null==c||null===(n=c.candidate)||void 0===n?void 0:n.email,photoUrl:(null==c||null===(r=c.candidate)||void 0===r?void 0:r.photo)||"".concat(dn.ASSET_URL,"/profile-draft-circled-orange.svg")}),l=new Ga.Session({appId:"tl1lE0Vo",me:u}),d=new Ga.User({id:null==c||null===(i=c.school)||void 0===i?void 0:i.id,name:null==c||null===(a=c.school)||void 0===a?void 0:a.name,email:null==c||null===(o=c.school)||void 0===o?void 0:o.email,photoUrl:"".concat(dn.ASSET_URL,"/profile-draft-circled-orange.svg")}),p=localStorage.getItem("conversationId"),h=l.getOrCreateConversation(p);h.setParticipant(u),h.setParticipant(d);var f=l.createChatbox();f.select(h),f.mount(s)}))}};bo.appendChild(ko);var Lo=function(e){$o(e)},Mo=function(){var e=document.createElement("div");e.className="header";var t=document.createElement("section");t.className="dropdown";var n=void 0!==localStorage.getItem("schoolTheme")?JSON.parse(localStorage.getItem("schoolTheme")):{},r=(null==n?void 0:n.language)||"en",i=Qr(r),a=dn.languages.find((function(e){return e.keyword===i.trim()})),o=document.createElement("div");o.className="select",o.onclick=function(){return l.classList.toggle("active")};var s=document.createElement("img");s.src=a.src,s.alt=a.alt,s.className="flag-icon-img",o.appendChild(s);var c=document.createElement("label");c.className="language",c.textContent=U.t(a.value),o.appendChild(c);var u=document.createElement("img");u.src="".concat(dn.ASSET_URL,"/dropdown-btn.svg"),o.appendChild(u),t.appendChild(o);var l=document.createElement("section");l.className="dropdown-content",dn.languages.forEach((function(e,t){var n=document.createElement("div");n.key=t,n.className="dropdown-option ".concat(e.keyword===a.keyword?"selected":""),n.onclick=function(){return a=t=e,U.changeLanguage(t.keyword).then((function(){s.src=t.src,c.textContent=U.t(t.value),dn.languages.forEach((function(e,t){var n=l.children[t];n&&(n.querySelector(".text").textContent=U.t(e.value))}))})).catch((function(e){return Zr.error(e)})),l.classList.remove("active"),void Er("schoolTheme",{language:t.keyword});var t};var r=document.createElement("img");r.src=e.src,r.alt=e.alt,r.className="flag-icon-img",n.appendChild(r);var i=document.createElement("div");i.className="text",i.id="dropdown-text-language",i.textContent=U.t(e.value),n.appendChild(i),l.appendChild(n)})),t.appendChild(l),e.appendChild(t),bo.insertBefore(e,bo.firstChild)},Fo=function(){var e=vo(go().mark((function e(t){var n,r;return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.appendChild(yo),yo.style.display="block",(n=document.querySelector(".header"))&&n.remove(),r=Xr(),null===JSON.parse(localStorage.getItem("preChecksSteps"))&&localStorage.setItem("preChecksSteps",JSON.stringify(dn.preChecksSteps)),$o(r,t),Mo();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zo(){"function"==typeof window.globalCallback&&(window.precheckCompleted=!0,window.globalCallback({type:"success",message:"precheck_completed",code:50001})),yo.style.display="none",yo.remove(),vr()||_r()}var $o=function(){var e=vo(go().mark((function e(t,n){var r,i,a,o,s,c,u,l,d;return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ei(),r=Tr(),i=(null==r?void 0:r.entities)||[],a={IdentityCardRequirement:"verify_id",ExamPreparation:dn.examPreparationSteps,runSystemDiagnostics:dn.systemDiagnosticSteps,SystemRequirements:dn.SYSTEM_REQUIREMENT_STEP,Prevalidationinstruction:dn.prevalidationSteps,IdentityVerificationScreenOne:"verify_candidate",IdentityVerificationScreenTwo:"verify_id",IdentityVerificationScreenThree:"record_audio",IdentityVerificationScreenFour:"record_room",MobileProctoring:"mobile_proctoring",IdentityVerificationScreenFive:"record_screen"},o=a[t],!(s=Array.isArray(o)?i.some((function(e){return o.includes(e.key)})):i.some((function(e){return e.key===o})))&&o||(c=JSON.parse(localStorage.getItem("navHistory"))||[],(u=c.filter((function(e){return"IdentityVerificationScreenSix"!==e}))).includes(t)||u.push(t),localStorage.setItem("navHistory",JSON.stringify(u))),Do(),mr(),p=void 0,h=void 0,f=void 0,m=void 0,g=void 0,_=void 0,v=void 0,y=void 0,f="#FF961B",m="normal",g=JSON.parse(localStorage.getItem("schoolTheme")),p=null==g?void 0:g.theming,_=/^#[0-9A-F]{6}$/i.test(p)?g.theming:f,h=null==g?void 0:g.font,v=["normal","italic","oblique"].includes(h)?g.font:m,y=er(er({},g),{},{theming:_,font:v}),localStorage.setItem("schoolTheme",JSON.stringify(y)),document.documentElement.style.setProperty("--theme-color",_),document.documentElement.style.setProperty("--font-style",v),l=document.querySelectorAll(".tab"),d=document.querySelectorAll(".tab-content"),l.forEach((function(e){e.classList.remove("active"),e.dataset.tab===t&&e.classList.add("active")})),d.forEach((function(e){e.classList.remove("active"),e.id===t&&e.classList.add("active")})),"ExamPreparation"!==t){e.next=23;break}if(s){e.next=19;break}return Lo("IdentityCardRequirement"),e.abrupt("return");case 19:return e.next=21,Ua(xo);case 21:e.next=104;break;case 23:if("IdentityCardRequirement"!==t){e.next=31;break}if(s){e.next=27;break}return Lo("runSystemDiagnostics"),e.abrupt("return");case 27:return e.next=29,pi(So);case 29:e.next=104;break;case 31:if("runSystemDiagnostics"!==t){e.next=38;break}if(s){e.next=35;break}return Lo("Prevalidationinstruction"),e.abrupt("return");case 35:Ii(To),e.next=104;break;case 38:if("SystemRequirements"!==t){e.next=46;break}if(s){e.next=42;break}return Lo("Prevalidationinstruction"),e.abrupt("return");case 42:return e.next=44,fo(Co);case 44:e.next=104;break;case 46:if("Prevalidationinstruction"!==t){e.next=54;break}if(s){e.next=50;break}return Lo("IdentityVerificationScreenOne"),e.abrupt("return");case 50:return e.next=52,$a(Ro);case 52:e.next=104;break;case 54:if("IdentityVerificationScreenOne"!==t){e.next=62;break}if(s){e.next=58;break}return Lo("IdentityVerificationScreenTwo"),e.abrupt("return");case 58:return e.next=60,ji(Eo,n);case 60:e.next=104;break;case 62:if("IdentityVerificationScreenTwo"!==t){e.next=70;break}if(s){e.next=66;break}return Lo("IdentityVerificationScreenThree"),e.abrupt("return");case 66:return e.next=68,Yi(Io);case 68:e.next=104;break;case 70:if("IdentityVerificationScreenThree"!==t){e.next=78;break}if(s){e.next=74;break}return Lo("IdentityVerificationScreenFour"),e.abrupt("return");case 74:return e.next=76,Zi(No);case 76:e.next=104;break;case 78:if("IdentityVerificationScreenFour"!==t){e.next=86;break}if(s){e.next=82;break}return Lo("MobileProctoring"),e.abrupt("return");case 82:return e.next=84,Oa(Ao);case 84:e.next=104;break;case 86:if("MobileProctoring"!==t){e.next=94;break}if(s){e.next=90;break}return Lo("IdentityVerificationScreenFive"),e.abrupt("return");case 90:return e.next=92,va(Po);case 92:e.next=104;break;case 94:if("IdentityVerificationScreenFive"!==t){e.next=102;break}if(s){e.next=98;break}return zo(),e.abrupt("return");case 98:return e.next=100,Ca(Oo,n);case 100:e.next=104;break;case 102:return zo(),e.abrupt("return");case 104:e.next=109;break;case 106:e.prev=106,e.t0=e.catch(0),Zr.error("error in showTab",e.t0);case 109:case"end":return e.stop()}var p,h,f,m,g,_,v,y}),e,null,[[0,106]])})));return function(t,n){return e.apply(this,arguments)}}(),jo=function(){var e=vo(go().mark((function e(){var t,n,r,i,a,o,s,c;return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=br("session"),n=br("candidateAssessment"),e.prev=2,e.next=5,Ir(t,n);case 5:return null!=(r=e.sent)&&r.data&&(Er("session",{sessionId:null==r||null===(i=r.data)||void 0===i?void 0:i.session_id,id:null==r||null===(a=r.data)||void 0===a?void 0:a.id}),null!=t&&null!==(o=t.browserEvents.filter((function(e){return"session_initiated"===e.name})))&&void 0!==o&&o.length||fr({eventType:"success",notify:!1,eventName:"session_initiated"})),Er("session",{id:r.data.id,sessionStatus:"Attending"}),e.next=10,Qa({status:"Attending",id:null==t?void 0:t.candidate_assessment});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),ti("error",null===(s=e.t0.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail),Zr.error("Error in start Session",null===(c=e.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.detail);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Bo=!1;function Vo(){vr()||Bo||Uo()}function Uo(){Bo=!0,zo()}window.addEventListener("storage",(function(e){"mereosToken"!==e.key||null!==e.newValue||Bo||Uo()})),window.onload=Vo;function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function qo(){qo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Go(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Go(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Wo(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}setInterval((function(){Vo()}),2e3);var Ho=function(){var e,t=(e=qo().mark((function e(t){var n,r;return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/candidates/candidate_candidate/",t,r));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Wo(a,r,i,o,s,"next",e)}function s(e){Wo(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Yo=n(2380),Ko=n(8496),Xo=n(6295),Qo=n(9339),Jo=n(7544),Zo=n(794);const es={kernelName:Xo.ljI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,Zo.P)((0,Qo.w)(n,"float32"),-1))}}};var ts=n(4425),ns=n(168),rs=n(4964),is=n(2654),as=n(5843),os=n(6964);const ss={kernelName:Xo.Vvy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=(0,as.E)((0,Qo.w)(n,"float32")),r=(0,is.R)((0,os.j)((0,rs.d)(1),t));return(0,ns.H)((0,ts.y)(e,r))}}}},cs={kernelName:Xo.PH8,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=(0,is.R)((0,os.j)((0,as.E)((0,Qo.w)(n,"float32")),1));return(0,ts.y)(e,t)}}}};var us=n(7600),ls=n(5556),ds=n(4857);const ps={kernelName:Xo.OMN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=us.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e;const r=us.getReductionAxes(n.shape,i);return r.length>0&&(t=(0,ds.c)(t,r)),(0,ls.t)(t,n.shape)},b:()=>{let t=e;const n=us.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,ds.c)(t,n)),(0,ls.t)(t,r.shape)}}}},hs={kernelName:Xo.EkD,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}};var fs=n(3107);const ms={kernelName:Xo.Jp_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,fs.P)(n)}}},gs={kernelName:Xo.p_m,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,fs.P)(n)}}},_s={kernelName:Xo.QKF,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,is.R)((0,os.j)((0,rs.d)(1),(0,as.E)((0,Qo.w)(n,"float32")))))}}};var vs=n(2377);const ys={kernelName:Xo.epO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=(0,is.R)((0,vs.W)((0,rs.d)(1),(0,as.E)((0,Qo.w)(n,"float32"))));return(0,ts.y)(e,t)}}}},bs={kernelName:Xo.lxb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,us.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{const t=(0,vs.W)((0,as.E)(n),(0,as.E)(r));let a=(0,Jo.l)(e,(0,ts.y)(r,t));const o=(0,us.getReductionAxes)(n.shape,i);return o.length>0&&(a=(0,ds.c)(a,o)),(0,ls.t)(a,n.shape)},b:()=>{const t=(0,vs.W)((0,as.E)(n),(0,as.E)(r));let a=(0,ns.H)((0,Jo.l)(e,(0,ts.y)(n,t)));const o=(0,us.getReductionAxes)(r.shape,i);return o.length>0&&(a=(0,ds.c)(a,o)),(0,ls.t)(a,r.shape)}}}},ws={kernelName:Xo.TyE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,vs.W)((0,as.E)((0,Qo.w)(n,"float32")),1))}}},ks={kernelName:Xo.zP9,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,os.j)((0,rs.d)(1),(0,as.E)((0,Qo.w)(n,"float32"))))}}};var xs=n(2215),Ss=n(9031),Ts=n(1109),Cs=n(9397),Es=n(7839);const Is=(0,Es.op)({avgPool3dGrad_:function(e,t,n,r,i,a){const o=(0,Ss.YT)(e,"dy","avgPool3dGrad"),s=(0,Ss.YT)(t,"input","avgPool3dGrad");let c=o,u=s,l=!1;4===s.rank&&(l=!0,c=(0,ls.t)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=(0,ls.t)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Ts.vA(5===c.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),Ts.vA(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),(0,Cs.s_)("avgPool3dGrad",i,a);const d={dy:c,input:u},p={filterSize:n,strides:r,pad:i,dimRoundingMode:a},h=xs.T2.runKernel(Xo.wwC,d,p);return l?(0,ls.t)(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Ns={kernelName:Xo.cS,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>Is(e,r,i,a,o,s)}}};const As=(0,Es.op)({avgPoolGrad_:function(e,t,n,r,i){const a=(0,Ss.YT)(e,"dy","avgPoolGrad"),o=(0,Ss.YT)(t,"input","avgPoolGrad");Ts.vA(o.rank===a.rank,(()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`));let s=o,c=a,u=!1;3===o.rank&&(u=!0,s=(0,ls.t)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=(0,ls.t)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ts.vA(4===c.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${c.rank}.`)),Ts.vA(4===s.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`));const l={dy:c,input:s},d={filterSize:n,strides:r,pad:i},p=xs.T2.runKernel(Xo.VCH,l,d);return u?(0,ls.t)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),Os={kernelName:Xo.ho8,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:a,pad:o}=n;return{x:()=>As(e,r,i,a,o)}}};var Rs=n(7041);const Ps={kernelName:Xo.jAQ,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:a,transposeB:o}=n;return a||o?!a&&o?{a:()=>(0,Rs.N)(e,i,!1,!1),b:()=>(0,Rs.N)(e,r,!0,!1)}:a&&!o?{a:()=>(0,Rs.N)(i,e,!1,!0),b:()=>(0,Rs.N)(r,e,!1,!1)}:{a:()=>(0,Rs.N)(i,e,!0,!0),b:()=>(0,Rs.N)(e,r,!0,!0)}:{a:()=>(0,Rs.N)(e,i,!1,!0),b:()=>(0,Rs.N)(r,e,!0,!1)}}};var Ds=n(2802);const Ls={kernelName:Xo.Ik2,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>(0,Ds.e)(e,r,i)}}},Ms={kernelName:Xo.LB5,gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let e=i.length-1;e>=0;e--)if(i[e]===a[e])o[e]=1;else if(1!==i[e])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let e=0;e<o.length;e++)o[e]>1&&s.push(e);return{x:()=>(0,ds.c)(e,s,!0)}}},Fs={kernelName:Xo.KXH,gradFunc:e=>({x:()=>e.clone()})},zs={kernelName:Xo.QDP,gradFunc:e=>({x:()=>(0,fs.P)(e)})};var $s=n(1031),js=n(3274),Bs=n(1303),Vs=n(7133);const Us={kernelName:Xo.vaV,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>(0,Vs._)((0,Bs.n)((0,$s.D)(r,i),(0,js.I)(r,a)),e,(0,fs.P)(e))}}},Gs={kernelName:Xo.$zE,inputsToSave:["x"],gradFunc:es.gradFunc};var qs=n(5274);const Ws={kernelName:Xo.$dB,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:i}=n,a=(0,Ts.Y6)(i,t[0].shape)[0],o=r.map((e=>e[a]));return(0,qs.l)(e,o,a).map((e=>()=>e))}};var Hs=n(9018),Ys=n(9833);const Ks={kernelName:Xo.p2J,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:a,strides:o,pad:s,dataFormat:c}=n;return Ts.vA(Cs.Dh(a),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`)),{x:()=>(0,Ys.v)(r.shape,e,i,o,s,c),filter:()=>(0,Hs.H)(r,e,i.shape,o,s,c)}}};var Xs=n(2736);const Qs={kernelName:Xo.jfg,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:a,pad:o,dataFormat:s,dimRoundingMode:c}=n;return{dy:()=>(0,Xs.X)(e,i,a,o,s,1,c),filter:()=>(0,Hs.H)(e,r,i.shape,a,o,s,c)}}};const Js=(0,Es.op)({conv3DBackpropFilter_:function(e,t,n,r,i){let a=e;4===e.rank&&(a=(0,ls.t)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;4===o.rank&&(o=(0,ls.t)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Ts.vA(5===a.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`)),Ts.vA(5===o.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`)),Ts.vA(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),Ts.vA(a.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`)),Ts.vA(o.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`));const s={x:a,dy:o},c={strides:r,pad:i,filterShape:n};return xs.T2.runKernel(Xo.iGz,s,c)}});var Zs=n(4633);const ec={kernelName:Xo.A1h,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:a}=n;Ts.vA((0,Cs.Dh)(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[o,s]=t;return{x:()=>(0,Zs.c)(o.shape,e,s,i,a),filter:()=>Js(o,e,s.shape,i,a)}}};var tc=n(1996);const nc={kernelName:Xo.Mn0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)((0,ns.H)((0,tc.F)((0,Qo.w)(n,"float32"))),e)}}};var rc=n(9710);const ic={kernelName:Xo.MnK,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)((0,rc.L)((0,Qo.w)(n,"float32")),e)}}};var ac=n(5596),oc=n(5362),sc=n(3345);const cc={kernelName:Xo.nY8,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const t=(0,ac.Em)([i],r.rank);let n=(0,oc.r)(e,i,a,!o);return null!=t&&(n=(0,sc.m)(n,t)),n}}}};var uc=n(6952),lc=n(5524);const dc={kernelName:Xo.tGH,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=null==r?[1,1]:r;Ts.vA(Cs.Dh(s),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[c,u]=t;return Ts.vA(4===c.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${c.rank}.`)),Ts.vA(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),Ts.vA(c.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),Ts.vA(Cs.G0(i,s),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`)),Cs.s_("depthwiseConv2d",a,o),{x:()=>(0,lc.l)(c.shape,e,u,i,a,s,o),filter:()=>(0,uc.x)(c,e,u.shape,i,a,s,o)}}},pc={kernelName:Xo.jxD,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,a={x:r,filter:i,dy:e},o={x:r,filter:i,dy:e};return{x:()=>xs.T2.runKernel(Xo.bP9,a,n),filter:()=>xs.T2.runKernel(Xo.pk0,o,n)}}},hc={kernelName:Xo.Pah,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>xs.T2.runKernel(Xo.rsH,r)}}};var fc=n(5117);const mc={kernelName:Xo._s9,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=(0,Jo.l)((0,fc.o)((0,ns.H)((0,as.E)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,Jo.l)(e,r)}}},gc={kernelName:Xo.ox3,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,n)}}},_c={kernelName:Xo.ybN,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>(0,ls.t)(e,n.shape)}}},vc={kernelName:Xo.ybj,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,fc.o)(n))}}},yc={kernelName:Xo.ZgB,gradFunc:e=>({x:()=>(0,fs.P)(e)})},bc={kernelName:Xo.ElG,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,us.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{const t=(0,ts.y)(e,(0,Qo.w)(r,"float32")),a=(0,us.getReductionAxes)(n.shape,i);return a.length>0?(0,ls.t)((0,ds.c)(t,a),n.shape):t},b:()=>{let t=(0,Jo.l)(e,(0,Qo.w)(n,"float32"));const a=(0,us.getReductionAxes)(r.shape,i);a.length>0&&(t=(0,ls.t)((0,ds.c)(t,a),r.shape));const o=(0,as.E)(r);return(0,ns.H)((0,ts.y)(t,(0,Qo.w)(o,"float32")))}}}};var wc=n(8822),kc=n(9884);const xc={kernelName:Xo.i5R,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=t,c=null==s?(0,rs.d)(1):s,u=(0,us.getReductionAxes)(a.shape,i.shape),l=[];if(1===a.rank){for(let e=0;e<i.shape.length-1;++e)l.push(i.shape[e]);l.push(1)}const d=(0,os.j)(i,a),p=(0,Jo.l)(e,c),h=(0,wc.Z)((0,vs.W)(o,(0,rs.d)(r))),f=(0,Jo.l)((0,Jo.l)((0,Jo.l)(h,h),h),(0,rs.d)(-.5));return{x:()=>1===a.rank?(0,ls.t)((0,Jo.l)((0,Jo.l)(e,(0,kc.V)((0,ls.t)(h,[1,1,1,a.shape[0]]),l)),c),i.shape):(0,ls.t)((0,Jo.l)((0,Jo.l)(e,h),c),i.shape),mean:()=>{let e=(0,Jo.l)((0,Jo.l)(h,(0,rs.d)(-1)),p);return 1===a.rank&&(e=(0,ds.c)(e,u)),(0,ls.t)(e,a.shape)},variance:()=>{let e=(0,Jo.l)((0,Jo.l)(f,d),p);return 1===a.rank&&(e=(0,ds.c)(e,u)),(0,ls.t)(e,a.shape)},scale:()=>{const t=(0,Jo.l)(d,h);let n=(0,Jo.l)(e,t);return 1===a.rank&&(n=(0,ds.c)(n,u)),(0,ls.t)(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=(0,ds.c)(t,u)),(0,ls.t)(t,a.shape)}}}};var Sc=n(1686),Tc=n(6732);const Cc={kernelName:Xo.mxL,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:a,batchDims:o}=n,s=(0,Ts.Y6)(a,r.shape)[0],c=(e,t,n)=>()=>{const r=e.shape,i=t.size,o=r.slice(0,s),c=o.length,u=r.slice(a,r.length).slice(1),l=u.length,d=Ec(0,c),p=Ec(c+1,c+1+l),h=Ic([o,[i],u]),f=(0,ls.t)(n,h),m=(0,ls.t)(t,[i]),g=Ic([[c],d,p]),_=(0,sc.m)(f,g);let v=(0,Tc.z)(_,m,e.shape[s]);const y=(0,ac.gx)(g);return v=(0,sc.m)(v,y),v};if(1===o){const t=r.shape[0],n=r.split(t,0),a=()=>{const t=(0,Sc.t)(n.map(((t,n)=>c(t,i.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:a,indices:()=>i}}return{x:c(r,i,e),indices:()=>i}}};function Ec(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Ic(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const Nc={kernelName:Xo.lLS,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,fs.P)(n),b:()=>(0,fs.P)(r)}}},Ac={kernelName:Xo.lzr,gradFunc:e=>({x:()=>(0,Qo.w)(e,"float32")})},Oc={kernelName:Xo.gIW,gradFunc:e=>({x:()=>(0,fs.P)(e)})},Rc={kernelName:Xo.E3$,gradFunc:e=>({x:()=>(0,fs.P)(e)})},Pc={kernelName:Xo.iPs,gradFunc:e=>({x:()=>(0,fs.P)(e)})};var Dc=n(7724);const Lc={kernelName:Xo.X0$,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,a=(0,Dc.r)(r,0);return{x:()=>(0,Vs._)(a,e,(0,Jo.l)(e,i))}}},Mc={kernelName:Xo.Cg$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,vs.W)(n,1))}}},Fc={kernelName:Xo.tG8,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,Qo.w)(n,"float32"))}}},zc={kernelName:Xo.zfU,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=(0,fc.o)(r);return(0,os.j)(e,(0,Jo.l)((0,ds.c)(e,i,!0),t))}}}};const $c=(0,Es.op)({localResponseNormalizationBackprop_:function(e,t,n,r=5,i=1,a=1,o=.5){const s={x:e,y:t,dy:n},c={depthRadius:r,bias:i,alpha:a,beta:o};return xs.T2.runKernel(Xo.ToN,s,c)}}),jc={kernelName:Xo.jM4,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:a,bias:o,alpha:s,beta:c}=n;return{x:()=>$c(r,i,e,a,o,s,c)}}};var Bc=n(1042);function Vc(e,t,n,r){return t.rank<n.rank&&(t=(0,ls.t)(t,ac.SM(t.shape,r))),e.rank<n.rank&&(e=(0,ls.t)(e,ac.SM(e.shape,r))),{x:()=>(0,Jo.l)(e,(0,Qo.w)((0,Bc.L)(n,t),e.dtype))}}const Uc={kernelName:Xo.VAI,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,a=t[0],o=Vc(e,t[1],a,Ts.Y6(i,a.shape));return{x:()=>o.x()}}};var Gc=n(9553);const qc={kernelName:Xo.LDN,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,Jo.l)(e,(0,Qo.w)((0,$s.D)(n,r),"float32")),b:()=>(0,Jo.l)(e,(0,Qo.w)((0,Gc.M)(n,r),"float32"))}}};const Wc=(0,Es.op)({maxPool3dGrad_:function(e,t,n,r,i,a,o){const s=(0,Ss.YT)(e,"dy","maxPool3dGrad"),c=(0,Ss.YT)(t,"input","maxPool3dGrad"),u=(0,Ss.YT)(n,"output","maxPool3dGrad");let l=s,d=c,p=u,h=!1;4===c.rank&&(h=!0,l=(0,ls.t)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=(0,ls.t)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),p=(0,ls.t)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Ts.vA(5===l.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),Ts.vA(5===d.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`)),Ts.vA(5===p.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`)),(0,Cs.s_)("maxPool3dGrad",a,o);const f={dy:l,input:d,output:p},m={filterSize:r,strides:i,pad:a,dimRoundingMode:o},g=xs.T2.runKernel(Xo.cHb,f,m);return h?(0,ls.t)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),Hc={kernelName:Xo.ySp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:c}=n;return{x:()=>Wc(e,r,i,a,o,s,c)}}};const Yc=(0,Es.op)({maxPoolGrad_:function(e,t,n,r,i,a,o){const s=(0,Ss.YT)(e,"dy","maxPoolGrad"),c=(0,Ss.YT)(t,"input","maxPoolGrad"),u=(0,Ss.YT)(n,"output","maxPoolGrad");Ts.vA(c.rank===s.rank,(()=>`Rank of input (${c.rank}) does not match rank of dy (${s.rank})`)),Ts.vA(4===s.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`)),Ts.vA(4===c.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${c.rank}.`)),Cs.s_("maxPoolGrad",a,o);const l={dy:s,input:c,output:u},d={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return xs.T2.runKernel(Xo.RXX,l,d)}}),Kc={kernelName:Xo.t3d,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:a,strides:o,pad:s}=n;return{x:()=>Yc(e,r,i,a,o,s)}}};var Xc=n(169);const Qc={kernelName:Xo.g5A,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,a=Ts.Y6(i,r.shape),o=(0,ac.lb)(r.shape,a)[1],s=Ts.Ze(o);return{x:()=>{const t=r.shape.slice();a.forEach((e=>{t[e]=1}));const n=(0,ls.t)(e,t);return(0,ts.y)((0,Jo.l)(n,(0,Xc.S)(r.shape,"float32")),s)}}}},Jc={kernelName:Xo.lNG,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[a,o]=t,s=Vc(e,o,a,Ts.Y6(i,a.shape));return{x:()=>s.x()}}},Zc={kernelName:Xo.LG0,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>(0,Jo.l)(e,(0,Qo.w)((0,js.I)(n,r),"float32")),b:()=>(0,Jo.l)(e,(0,Qo.w)((0,Dc.r)(n,r),"float32"))}}};var eu=n(5048);const tu={kernelName:Xo.x7F,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,a=i.map((e=>e[0]));return{x:()=>(0,eu.d)(e,a,r.shape)}}};var nu=n(7412);const ru={kernelName:Xo.BLA,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,us.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{const t=(0,us.getReductionAxes)(n.shape,i);return t.length>0?(0,ls.t)((0,ds.c)(e,t),n.shape):e},b:()=>{const t=(0,Jo.l)(e,(0,ns.H)((0,nu.R)((0,ts.y)(n,r)))),a=(0,us.getReductionAxes)(r.shape,i);return a.length>0?(0,ls.t)((0,ds.c)(t,a),r.shape):t}}}},iu={kernelName:Xo.xu7,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,us.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{const t=(0,Jo.l)(e,(0,Qo.w)(r,"float32")),a=(0,us.getReductionAxes)(n.shape,i);return a.length>0?(0,ls.t)((0,ds.c)(t,a),n.shape):t},b:()=>{const t=(0,Jo.l)(e,(0,Qo.w)(n,"float32")),a=(0,us.getReductionAxes)(r.shape,i);return a.length>0?(0,ls.t)((0,ds.c)(t,a),r.shape):t}}}},au={kernelName:Xo.l0G,gradFunc:e=>({x:()=>(0,ns.H)(e)})};var ou=n(8845);const su={kernelName:Xo.urI,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>(0,ou.U)(n.shape,"float32")}}},cu={kernelName:Xo.LWX,gradFunc:e=>({x:()=>(0,fs.P)(e)})};var uu=n(835);const lu={kernelName:Xo.mM$,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return(0,uu.K)(e,r).map((e=>()=>e))}},du={kernelName:Xo.ODT,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,a=i.map((e=>e[0]));return{x:()=>(0,eu.d)(e,a,r.shape)}}};var pu=n(3800),hu=n(3940);const fu={kernelName:Xo.pyJ,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,a=n,o=r,s=us.assertAndGetBroadcastShape(a.shape,o.shape);return{a:()=>{const t=(0,Qo.w)(o,"float32");let n=(0,Jo.l)(e,(0,Jo.l)(t,(0,hu.n)(a,(0,os.j)(t,(0,rs.d)(1)))));const r=us.getReductionAxes(a.shape,s);return r.length>0&&(n=(0,ds.c)(n,r)),(0,ls.t)(n,a.shape)},b:()=>{const t=(0,Dc.r)(a,0),n=(0,Vs._)(t,(0,pu.R)(a),(0,fs.P)(a));let r=(0,Jo.l)(e,(0,Jo.l)(i,n));const c=us.getReductionAxes(o.shape,s);return c.length>0&&(r=(0,ds.c)(r,c)),(0,ls.t)(r,o.shape)}}}},mu={kernelName:Xo.Ncv,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,Dc.r)(n,0);return{x:()=>(0,Vs._)(i,e,(0,Jo.l)(e,r)),alpha:()=>{let t=(0,Vs._)(i,(0,fs.P)(e),(0,Jo.l)(e,n));const a=(0,us.getReductionAxes)(r.shape,e.shape);return a.length>0&&(t=(0,ds.c)(t,a)),(0,ls.t)(t,r.shape)}}}};var gu=n(8424);function _u(e,t,n){const r=e.shape.length,i=r-n.length,a=ac.Em(n,r);let o=e;null!=a&&(o=(0,sc.m)(e,a));const s=o.shape.slice(),c=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(c);let u=function(e,t,n){const r=e.shape.slice();r[n]=1;const i=(0,ls.t)(t,r),a=(0,gu.L)(e,n,!0,!1),o=(0,gu.L)(e,n,!0,!0),s=(0,Jo.l)(a,o);return(0,Jo.l)(i,s)}(o.reshape(s),t,i);if(u=u.reshape(o.shape),null!=a){const e=ac.gx(a);u=(0,sc.m)(u,e)}return u}const vu={kernelName:Xo.kdj,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let a=[];return a=null==i?r.shape.map(((e,t)=>t)):"number"==typeof i?[i]:i,{x:()=>_u(r,e,a)}}},yu={kernelName:Xo.sDr,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=us.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{const t=(0,ts.y)(e,(0,Qo.w)(r,"float32")),a=us.getReductionAxes(n.shape,i);return a.length>0?(0,ls.t)((0,ds.c)(t,a),n.shape):t},b:()=>{let t=(0,Jo.l)(e,(0,Qo.w)(n,"float32"));const a=us.getReductionAxes(r.shape,i);a.length>0&&(t=(0,ls.t)((0,ds.c)(t,a),r.shape));const o=(0,as.E)(r);return(0,ns.H)((0,ts.y)(t,(0,Qo.w)(o,"float32")))}}}},bu={kernelName:Xo.huO,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,ns.H)((0,as.E)(n)))}}},wu={kernelName:Xo.P_L,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=(0,Jo.l)((0,js.I)(n,6),(0,Zo.P)(n));return{x:()=>(0,Jo.l)(e,(0,Qo.w)(r,"float32"))}}},ku={kernelName:Xo.fUj,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,Qo.w)((0,Zo.P)(n),"float32"))}}},xu={kernelName:Xo.R23,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ls.t)(e,n.shape)}}},Su={kernelName:Xo.hgw,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>xs.T2.runKernel(Xo.FCQ,i,n)}}},Tu={kernelName:Xo.jOE,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>xs.T2.runKernel(Xo.XQy,i,n)}}};var Cu=n(3788);const Eu={kernelName:Xo.D7i,gradFunc:(e,t,n)=>{const{dims:r}=n,i=(0,Ts.Y6)(r,e.shape);return{x:()=>(0,Cu.B)(e,i)}}},Iu={kernelName:Xo.hVg,gradFunc:e=>({x:()=>(0,fs.P)(e)})},Nu={kernelName:Xo.TOR,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ns.H)((0,ts.y)(e,(0,Jo.l)((0,hu.n)(n,1.5),2)))}}};var Au=n(5895);const Ou={kernelName:Xo.l6P,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>(0,Qo.w)((0,fs.P)(n),"float32"),t:()=>(0,Jo.l)(e,(0,Qo.w)(n,e.dtype)),e:()=>(0,Jo.l)(e,(0,Qo.w)((0,Au.N)(n),e.dtype))}}};var Ru=n(1838);const Pu={kernelName:Xo.u$b,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=(0,Dc.r)(n,(0,rs.d)(0)),r=(0,rs.d)(Ru.j),i=(0,rs.d)(Ru.X),a=(0,Jo.l)(e,i),o=(0,Jo.l)((0,Jo.l)(e,r),(0,fc.o)((0,Qo.w)(n,"float32")));return(0,Vs._)(t,a,o)}}}},Du={kernelName:Xo.vI1,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,Jo.l)(n,(0,os.j)((0,rs.d)(1),n)))}}},Lu={kernelName:Xo.YVe,gradFunc:e=>({x:()=>(0,fs.P)(e)})};var Mu=n(8093);const Fu={kernelName:Xo.hql,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)((0,Mu.g)((0,Qo.w)(n,"float32")),e)}}};var zu=n(6505);const $u={kernelName:Xo.J3C,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)((0,zu.y)((0,Qo.w)(n,"float32")),e)}}};var ju=n(3019),Bu=n(1295);const Vu={kernelName:Xo.JiE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:a}=n,o=r.shape,[s,c]=(0,Bu.parseSliceParams)(r,i,a),u=[];for(let t=0;t<e.rank;t++)u.push([s[t],o[t]-s[t]-c[t]]);return{x:()=>(0,ju.e)(e,u)}}},Uu={kernelName:Xo.rFG,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,a=(0,Jo.l)(e,r);return{logits:()=>(0,os.j)(a,(0,Jo.l)((0,ds.c)(a,[i],true),r))}}};var Gu=n(8453);const qu={kernelName:Xo.Fin,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,Gu.r)(n))}}};var Wu=n(7478);const Hu={kernelName:Xo.A8B,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>(0,Wu.G)(e,r,i)}}};var Yu=n(1448);const Ku={kernelName:Xo.Blb,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>(0,Yu.x)(e,r)}}},Xu={kernelName:Xo.dFH,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,Jo.l)((0,is.R)((0,Qo.w)(n,"float32")),2))}}},Qu={kernelName:Xo.M6A,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)(e,(0,Jo.l)((0,Qo.w)(n,"float32"),2))}}},Ju={kernelName:Xo.Ddj,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=(0,rs.d)(2);return{a:()=>(0,Jo.l)(e,(0,Jo.l)(i,(0,os.j)(n,r))),b:()=>(0,Jo.l)(e,(0,Jo.l)(i,(0,os.j)(r,n)))}}},Zu={kernelName:Xo.pnw,gradFunc:e=>({x:()=>(0,fs.P)(e)})},el={kernelName:Xo.PbM,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=us.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e;const r=us.getReductionAxes(n.shape,i);return r.length>0&&(t=(0,ds.c)(t,r)),(0,ls.t)(t,n.shape)},b:()=>{let t=e;const n=us.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,ds.c)(t,n)),(0,ls.t)((0,ns.H)(t),r.shape)}}}},tl={kernelName:Xo.WuN,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:a}=n;(0,Ts.Y6)(a,r.shape).forEach((e=>{i[e]=1}));const o=(0,ls.t)(e,i),s=(0,Jo.l)(o,(0,Xc.S)(r.shape,"float32"));return{x:()=>s}}},nl={kernelName:Xo.oFs,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,ts.y)(e,(0,as.E)((0,Mu.g)(n)))}}},rl={kernelName:Xo.iuW,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,Jo.l)((0,os.j)((0,rs.d)(1),(0,as.E)(n)),e)}}},il={kernelName:Xo.FAs,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let t=(0,fs.P)(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=(0,vs.W)(t,(0,eu.d)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)t=(0,vs.W)(t,(0,eu.d)(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)t=(0,vs.W)(t,(0,eu.d)(e,[n*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)for(let s=0;s<i[3];++s)t=(0,vs.W)(t,(0,eu.d)(e,[n*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},al={kernelName:Xo.wx0,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,a=ac.gx(i);return{x:()=>(0,sc.m)(e,a)}}},ol={kernelName:Xo.dXR,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>(0,Sc.t)(e,i)}}};var sl=n(5160),cl=n(7047),ul=n(7184);const ll={kernelName:Xo.pPe,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=(0,ul.P)(t,(0,fs.P)(t)),r=(0,cl.k)(e,n);let i=(0,$s.D)(t,(0,rs.d)(0,"int32"));const a=r.rank-i.rank;for(let e=0;e<a;++e)i=(0,sl.U)(i,e+1);i=(0,Bs.n)(i,(0,Xc.S)(r.shape,"bool"));const o=(0,fs.P)(r);return(0,Vs._)(i,r,o)}(e,n)}}};const dl={kernelName:Xo.xJ3,gradFunc:e=>({x:()=>(0,fs.P)(e)})};var pl=n(6244);const hl=[es,ss,cs,ps,hs,ms,gs,_s,ys,bs,ws,ks,Ns,Os,Ps,Ls,Ms,Fs,zs,Us,Gs,Ws,Qs,Ks,ec,nc,ic,cc,dc,pc,yu,hc,mc,gc,_c,vc,bc,yc,xc,Cc,Nc,Ac,Oc,Rc,Pc,Lc,Mc,Fc,zc,jc,Uc,Uc,qc,Hc,Kc,Qc,Jc,Zc,tu,ru,iu,au,su,cu,lu,du,du,fu,mu,vu,bu,wu,ku,xu,Su,Tu,Eu,Iu,Nu,Ou,Pu,Du,Lu,Fu,$u,Vu,Uu,qu,Hu,Hu,Ku,Ku,Xu,Ju,Qu,Zu,el,tl,nl,rl,il,al,ol,ll,dl];for(const e of hl)(0,pl.kr)(e);var fl=n(8598),ml=n(5225);(0,ml.tp)().prototype.abs=function(){return this.throwIfDisposed(),(0,fl.t)(this)};var gl=n(458);(0,ml.tp)().prototype.acos=function(){return this.throwIfDisposed(),(0,gl.H)(this)};var _l=n(24);(0,ml.tp)().prototype.acosh=function(){return this.throwIfDisposed(),(0,_l.F)(this)},(0,ml.tp)().prototype.add=function(e){return this.throwIfDisposed(),(0,vs.W)(this,e)};var vl=n(5609);(0,ml.tp)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,vl.Q)(this,e,t)};var yl=n(408);(0,ml.tp)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,yl.b)(this,e,t)};var bl=n(7923);(0,ml.tp)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,bl.F)(this,e)};var wl=n(1873);(0,ml.tp)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,wl.X)(this,e)},(0,ml.tp)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,Ts.vA)(1===this.size,(()=>"The array must have only 1 element.")),(0,ls.t)(this,[])},(0,ml.tp)().prototype.asType=function(e){return this.throwIfDisposed(),(0,Qo.w)(this,e)},(0,ml.tp)().prototype.as1D=function(){return this.throwIfDisposed(),(0,ls.t)(this,[this.size])},(0,ml.tp)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,ls.t)(this,[e,t])},(0,ml.tp)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,ls.t)(this,[e,t,n])},(0,ml.tp)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,ls.t)(this,[e,t,n,r])},(0,ml.tp)().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),(0,ls.t)(this,[e,t,n,r,i])};var kl=n(9715);(0,ml.tp)().prototype.asin=function(){return this.throwIfDisposed(),(0,kl.q)(this)};var xl=n(2763);(0,ml.tp)().prototype.asinh=function(){return this.throwIfDisposed(),(0,xl.y)(this)};var Sl=n(5754);(0,ml.tp)().prototype.atan=function(){return this.throwIfDisposed(),(0,Sl.r)(this)};var Tl=n(3386);(0,ml.tp)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,Tl.F)(this,e)};var Cl=n(9800);(0,ml.tp)().prototype.atanh=function(){return this.throwIfDisposed(),(0,Cl.r)(this)};var El=n(107);(0,ml.tp)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,El.$)(this,e,t,n,r)},(0,ml.tp)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,Wu.G)(this,e,t)};var Il=n(6686);(0,ml.tp)().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),(0,Il.$)(this,e,t,n,r,i)};var Nl=n(4789);(0,ml.tp)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,Nl.h)(this,e)},(0,ml.tp)().prototype.cast=function(e){return this.throwIfDisposed(),(0,Qo.w)(this,e)};var Al=n(2653);(0,ml.tp)().prototype.ceil=function(){return this.throwIfDisposed(),(0,Al.m)(this)};var Ol=n(8421);(0,ml.tp)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,Ol.z)(this,e,t)},(0,ml.tp)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof ml.qY&&(e=[e]),(0,Yu.x)([this,...e],t)};var Rl=n(1279);(0,ml.tp)().prototype.conv1d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,Rl.k)(this,e,t,n,r,i,a)};var Pl=n(6224);(0,ml.tp)().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),(0,Pl.w)(this,e,t,n,r,i)},(0,ml.tp)().prototype.conv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,Xs.X)(this,e,t,n,r,i,a)},(0,ml.tp)().prototype.cos=function(){return this.throwIfDisposed(),(0,Mu.g)(this)},(0,ml.tp)().prototype.cosh=function(){return this.throwIfDisposed(),(0,zu.y)(this)},(0,ml.tp)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),(0,gu.L)(this,e,t,n)},(0,ml.tp)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,oc.r)(this,e,t,n)};var Dl=n(3846);(0,ml.tp)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,Dl.R)(this,e,t)};var Ll=n(5510);(0,ml.tp)().prototype.depthwiseConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,Ll.G)(this,e,t,n,r,i,a)};var Ml=n(5608);(0,ml.tp)().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),(0,Ml.X)(this,e,t,n,r,i)};var Fl=n(9541);(0,ml.tp)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,Fl.e)(this,e)},(0,ml.tp)().prototype.div=function(e){return this.throwIfDisposed(),(0,ts.y)(this,e)};var zl=n(7241);(0,ml.tp)().prototype.dot=function(e){return this.throwIfDisposed(),(0,zl.O)(this,e)};var $l=n(3790);(0,ml.tp)().prototype.elu=function(){return this.throwIfDisposed(),(0,$l.P)(this)},(0,ml.tp)().prototype.equal=function(e){return this.throwIfDisposed(),(0,Bc.L)(this,e)};var jl=n(9037);(0,ml.tp)().prototype.erf=function(){return this.throwIfDisposed(),(0,jl.Y)(this)};var Bl=n(1419);(0,ml.tp)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),(0,Bl.p)(this,e,t)},(0,ml.tp)().prototype.exp=function(){return this.throwIfDisposed(),(0,fc.o)(this)},(0,ml.tp)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,sl.U)(this,e)};var Vl=n(1675);(0,ml.tp)().prototype.expm1=function(){return this.throwIfDisposed(),(0,Vl.I)(this)};var Ul=n(51);(0,ml.tp)().prototype.fft=function(){return this.throwIfDisposed(),(0,Ul.h)(this)},(0,ml.tp)().prototype.flatten=function(){return this.throwIfDisposed(),(0,ls.t)(this,[this.size])},(0,ml.tp)().prototype.floor=function(){return this.throwIfDisposed(),(0,nu.R)(this)};var Gl=n(1021);(0,ml.tp)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,Gl.w)(this,e)},(0,ml.tp)().prototype.gather=function(e,t,n){return this.throwIfDisposed(),(0,cl.k)(this,e,t,n)},(0,ml.tp)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,$s.D)(this,e)},(0,ml.tp)().prototype.greater=function(e){return this.throwIfDisposed(),(0,Dc.r)(this,e)};var ql=n(7906);(0,ml.tp)().prototype.ifft=function(){return this.throwIfDisposed(),(0,ql.K)(this)};var Wl=n(5900);(0,ml.tp)().prototype.irfft=function(){return this.throwIfDisposed(),(0,Wl.g)(this)};var Hl=n(1580);(0,ml.tp)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,Hl.M)(this)};var Yl=n(112);(0,ml.tp)().prototype.isInf=function(){return this.throwIfDisposed(),(0,Yl.E)(this)};var Kl=n(6094);(0,ml.tp)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,Kl.y)(this)};var Xl=n(2869);(0,ml.tp)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,Xl.H)(this,e)},(0,ml.tp)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,js.I)(this,e)},(0,ml.tp)().prototype.less=function(e){return this.throwIfDisposed(),(0,Gc.M)(this,e)};var Ql=n(7361);(0,ml.tp)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,Ql.K)(this,e,t,n,r)};var Jl=n(6843);(0,ml.tp)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,Jl.n)(this)};var Zl=n(8045);(0,ml.tp)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,Zl.H)(this,e)};var ed=n(4460);(0,ml.tp)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,ed.V)(this,e,t)},(0,ml.tp)().prototype.log=function(){return this.throwIfDisposed(),(0,pu.R)(this)};var td=n(7589);(0,ml.tp)().prototype.log1p=function(){return this.throwIfDisposed(),(0,td.K)(this)},(0,ml.tp)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,Bs.n)(this,e)},(0,ml.tp)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,Au.N)(this)};var nd=n(7777);(0,ml.tp)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,nd.z)(this,e)};var rd=n(8025);(0,ml.tp)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,rd.r)(this,e)},(0,ml.tp)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,Rs.N)(this,e,t,n)};var id=n(7165);(0,ml.tp)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,id.j)(this,e,t,n,r)};var ad=n(3232);(0,ml.tp)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,ad.T)(this,e,t)},(0,ml.tp)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,ul.P)(this,e)};var od=n(2865);(0,ml.tp)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,od.i)(this,e,t)};var sd=n(6926);(0,ml.tp)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,sd.j)(this,e,t)};var cd=n(4278);(0,ml.tp)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,cd.B)(this,e)};var ud=n(7237);(0,ml.tp)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,ud.F)(this,e,t)};var ld=n(5130);(0,ml.tp)().prototype.mod=function(e){return this.throwIfDisposed(),(0,ld.z)(this,e)},(0,ml.tp)().prototype.mul=function(e){return this.throwIfDisposed(),(0,Jo.l)(this,e)},(0,ml.tp)().prototype.neg=function(){return this.throwIfDisposed(),(0,ns.H)(this)};var dd=n(1978);(0,ml.tp)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,dd.x)(this,e,t,n)};var pd=n(5712);(0,ml.tp)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,pd.E)(this,e)};var hd=n(1046);(0,ml.tp)().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),(0,hd.M)(this,e,t,n)};var fd=n(2975);(0,ml.tp)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,fd.P)(this)},(0,ml.tp)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,ju.e)(this,e,t)};var md=n(706);(0,ml.tp)().prototype.pool=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,md.d)(this,e,t,n,r,i,a)},(0,ml.tp)().prototype.pow=function(e){return this.throwIfDisposed(),(0,hu.n)(this,e)};var gd=n(1212);(0,ml.tp)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,gd.N)(this,e)};var _d=n(9677);(0,ml.tp)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,_d._)(this,e,t)};var vd=n(6900);(0,ml.tp)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,vd.V)(this)};var yd=n(8662);(0,ml.tp)().prototype.relu=function(){return this.throwIfDisposed(),(0,yd.V)(this)};var bd=n(8757);(0,ml.tp)().prototype.relu6=function(){return this.throwIfDisposed(),(0,bd.j)(this)},(0,ml.tp)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,ls.t)(this,e.shape)},(0,ml.tp)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,ls.t)(this,e)};var wd=n(4081);(0,ml.tp)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,wd.v)(this,e,t,n)};var kd=n(6052);(0,ml.tp)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,kd.b)(this,e,t,n)},(0,ml.tp)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,Cu.B)(this,e)};var xd=n(1121);(0,ml.tp)().prototype.rfft=function(){return this.throwIfDisposed(),(0,xd.z)(this)};var Sd=n(314);(0,ml.tp)().prototype.round=function(){return this.throwIfDisposed(),(0,Sd.L)(this)},(0,ml.tp)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,wc.Z)(this)};var Td=n(3411);(0,ml.tp)().prototype.selu=function(){return this.throwIfDisposed(),(0,Td.W)(this)};var Cd=n(5707);(0,ml.tp)().prototype.separableConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,Cd.w)(this,e,t,n,r,i,a)},(0,ml.tp)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,Gu.r)(this)};var Ed=n(1753);(0,ml.tp)().prototype.sign=function(){return this.throwIfDisposed(),(0,Ed._)(this)},(0,ml.tp)().prototype.sin=function(){return this.throwIfDisposed(),(0,tc.F)(this)},(0,ml.tp)().prototype.sinh=function(){return this.throwIfDisposed(),(0,rc.L)(this)},(0,ml.tp)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,eu.d)(this,e,t)};var Id=n(6412);(0,ml.tp)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,Id.V)(this,e)};var Nd=n(4224);(0,ml.tp)().prototype.softplus=function(){return this.throwIfDisposed(),(0,Nd.l)(this)},(0,ml.tp)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,Ds.e)(this,e,t)},(0,ml.tp)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,qs.l)(this,e,t)},(0,ml.tp)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,is.R)(this)},(0,ml.tp)().prototype.square=function(){return this.throwIfDisposed(),(0,as.E)(this)};var Ad=n(2922);(0,ml.tp)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,Ad.P)(this,e)};var Od=n(8610);(0,ml.tp)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,Od.r)(this,e)},(0,ml.tp)().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof ml.qY?[this,e]:[this,...e];return(0,Sc.t)(n,t)},(0,ml.tp)().prototype.step=function(e){return this.throwIfDisposed(),(0,Zo.P)(this,e)};var Rd=n(9128);(0,ml.tp)().prototype.stridedSlice=function(e,t,n,r,i,a,o,s){return this.throwIfDisposed(),(0,Rd.Y)(this,e,t,n,r,i,a,o,s)},(0,ml.tp)().prototype.sub=function(e){return this.throwIfDisposed(),(0,os.j)(this,e)},(0,ml.tp)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,ds.c)(this,e,t)};var Pd=n(1129);(0,ml.tp)().prototype.tan=function(){return this.throwIfDisposed(),(0,Pd.M)(this)};var Dd=n(5949);(0,ml.tp)().prototype.tanh=function(){return this.throwIfDisposed(),(0,Dd.y)(this)},(0,ml.tp)().prototype.tile=function(e){return this.throwIfDisposed(),(0,kc.V)(this,e)},(0,ml.tp)().prototype.toBool=function(){return this.throwIfDisposed(),(0,Qo.w)(this,"bool")},(0,ml.tp)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,Qo.w)(this,"float32")},(0,ml.tp)().prototype.toInt=function(){return this.throwIfDisposed(),(0,Qo.w)(this,"int32")};var Ld=n(744);(0,ml.tp)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,Ld.r)(this,e,t)},(0,ml.tp)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,sc.m)(this,e)};var Md=n(5935);(0,ml.tp)().prototype.unique=function(e){return this.throwIfDisposed(),(0,Md.A)(this,e)},(0,ml.tp)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,Tc.z)(this,e,t)},(0,ml.tp)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,uu.K)(this,e)},(0,ml.tp)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,Vs._)(e,this,t)},(0,ml.tp)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,fs.P)(this)};class Fd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fd.prototype)}}class zd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zd.prototype)}}class $d extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$d.prototype)}}class jd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jd.prototype)}}class Bd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Bd.prototype)}}Error;class Vd{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function Ud(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function Gd(e,t){if(!e)throw new Bd(t)}function qd(e,t){let n=0;for(const r of e)r===t&&n++;return n}function Wd(e){return 1===e.length?e[0]:e}function Hd(e){return Array.isArray(e)?e:[e]}function Yd(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Kd(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let Xd={};function Qd(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Jd(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((e=>Jd(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?Jd(t):e[n]=t.value)}}}function Zd(e,t={},n={},r="object",i=!1){if("string"==typeof e){const i=e;let a;if(i in n)a=n[i];else if(i in Xd)a=Xd[i];else if(a=t[i],null==a)throw new $d(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{const a=e;if(null==a.className||null==a.config)throw new $d(`${r}: Improper config format: ${JSON.stringify(a)}.\n'className' and 'config' must set.`);const o=a.className;let s,c;if(o in n?[s,c]=n[o]:o in Xd?[s,c]=Xd.className:o in t&&([s,c]=t[o]),null==s)throw new $d(`Unknown ${r}: ${o}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=c){const e={};for(const t of Object.keys(Xd))e[t]=Xd[t];for(const t of Object.keys(n))e[t]=n[t];a.config.customObjects=e;const t=Object.assign({},Xd);for(const e of Object.keys(n))Xd[e]=n[e];Jd(a.config);const r=c(s,a.config,n,i);return Xd=Object.assign({},t),r}{const e=Object.assign({},Xd);for(const e of Object.keys(n))Xd[e]=n[e];const t=new s(a.config);return Xd=Object.assign({},e),t}}}function ep(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function tp(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function np(e){if(null==e)throw new $d(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function rp(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new $d(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function ip(e,t,n=0,r=1/0){return Gd(n>=0),Gd(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function ap(e,t){Array.isArray(e)?(Ko.util.assert(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>ap(e,`element ${n+1} of ${t}`)))):Ko.util.assert(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${op(e)}.`))}function op(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>op(e))).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function sp(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let cp=0;function up(){return cp++}const lp={};function dp(e=""){return e in lp||(lp[e]=0),lp[e]+=1,e+lp[e].toString()}const pp=["channelsFirst","channelsLast"],hp=["nearest","bilinear"],fp=["valid","same","causal"],mp=["max","avg"],gp=["sum","mul","concat","ave"],_p=new Map;function vp(e){rp(pp,"DataFormat",e)}function yp(e){rp(fp,"PaddingMode",e)}function bp(e){rp(mp,"PoolMode",e)}const wp=[];function kp(e,t){wp.push(e);try{const e=t();return wp.pop(),e}catch(e){throw wp.pop(),e}}function xp(e){if(!Cp(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===wp.length?"":wp.join("/")+"/")+e}function Sp(e){if(!Cp(e))throw new Error("Not a valid tensor name: '"+e+"'");_p.has(e)||_p.set(e,0);const t=_p.get(e);if(_p.set(e,_p.get(e)+1),t>0){const n=`${e}_${t}`;return _p.set(n,1),n}return e}const Tp=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Cp(e){return!!e.match(Tp)}function Ep(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Ip(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function Np(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Ap(e,t){if(t<e)throw new $d(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let Op;function Rp(){return null==Op&&(Op=(0,Ko.backend)().epsilon()),Op}function Pp(e,t){return Ko.cast(e,t)}function Dp(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Ko.reshape(e,n)}function Lp(e,t,n){return(0,Ko.tidy)((()=>{switch(e.rank){case 1:return Ko.slice1d(e,t,n);case 2:return Ko.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return Ko.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Ko.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Ko.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Ko.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new $d(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Mp(e,t,n){return(0,Ko.tidy)((()=>{switch(e.rank){case 1:return Ko.slice1d(e,t,n);case 2:return Ko.slice2d(e,[0,t],[e.shape[0],n]);case 3:return Ko.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Ko.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new $d(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Fp(e,t,n,r){return(0,Ko.tidy)((()=>{switch(e.rank){case 1:return Ko.slice1d(e,t,n);case 2:switch(r){case 1:return Lp(e,t,n);case 2:return Mp(e,t,n);default:throw new $d(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Lp(e,t,n);case 2:return Ko.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Mp(e,t,n);default:throw new $d(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Lp(e,t,n);case 2:return Ko.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Ko.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Mp(e,t,n);default:throw new $d(`The axis is not within the rank of the tensor ${r}`)}default:throw new $d(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function zp(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),Ko.concat(e,t)}function $p(e,t){switch(e.rank){case 1:return Ko.concat1d([e,t]);case 2:return Ko.concat2d([e,t],0);case 3:return Ko.concat3d([e,t],0);case 4:return Ko.concat4d([e,t],0);default:throw new $d(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function jp(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new $d(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Ko.tile(e,t)}function Bp(e,t=0,n=1,r,i){return Ko.randomNormal(e,t,n,r,i)}function Vp(e,t,n,r){if(e.rank<2||t.rank<2)throw new jd(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new jd(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){const i=!1,a=!1;return Ko.fused.matMul({a:e,b:t,transposeA:i,transposeB:a,bias:r?qp(e.rank,r,"channelsLast"):null,activation:n})}{const i=e.shape.slice(),a=i.pop();e=Ko.reshape(e,[-1,a]);const o=t.shape.slice(),s=o.pop(),c=o.pop(),u=[...o,s],l=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=Ko.reshape(Ko.transpose(t,l),[c,-1]);const d=[...i,...u],p=!1,h=!1;return Ko.reshape(Ko.fused.matMul({a:e,b:t,transposeA:p,transposeB:h,bias:r?qp(e.rank,r,"channelsLast"):null,activation:n}),d)}}function Up(e,t,n){return(0,Ko.tidy)((()=>(t=Array.isArray(t)?(0,Ko.tensor1d)(t,"int32"):Ko.cast(t,"int32"),Ko.gather(e,t,n))))}function Gp(e){return Ko.mul(e,e)}function qp(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new $d(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?Ko.reshape(t,[1,r[0],1,1,1]):Ko.reshape(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Ko.reshape(t,[1,1,1,1,r[0]]):Ko.reshape(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Ko.reshape(t,[1,r[0],1,1]):Ko.reshape(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Ko.reshape(t,[1,1,1,r[0]]):Ko.reshape(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Ko.reshape(t,[1,r[0],1]):Ko.reshape(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Ko.reshape(t,[1,1,r[0]]):Ko.reshape(t,[1].concat(r))}else if(e<3)return t;throw new $d(`Unsupported input rank by biasAdd: ${t.rank}`)}function Wp(e,t,n){return(0,Ko.tidy)((()=>(null==n&&(n="channelsLast"),vp(n),Ko.add(e,qp(e.rank,t,n)))))}function Hp(e,t,n,r){return(0,Ko.tidy)((()=>Ko.dropout(e,t,n,r)))}function Yp(e,t,n=!1){return n?e():t()}const Kp=["fanIn","fanOut","fanAvg"],Xp=["normal","uniform","truncatedNormal"];class Qp extends Ko.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Jp extends Qp{apply(e,t){return(0,Ko.zeros)(e,t)}}Jp.className="Zeros",Ko.serialization.registerClass(Jp);class Zp extends Qp{apply(e,t){return(0,Ko.ones)(e,t)}}Zp.className="Ones",Ko.serialization.registerClass(Zp);class eh extends Qp{constructor(e){if(super(),"object"!=typeof e)throw new $d(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new $d(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return(0,Ko.tidy)((()=>(0,Ko.mul)((0,Ko.scalar)(this.value),(0,Ko.ones)(e,t))))}getConfig(){return{value:this.value}}}eh.className="Constant",Ko.serialization.registerClass(eh);class th extends Qp{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return(0,Ko.randomUniform)(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}th.className="RandomUniform",Ko.serialization.registerClass(th);class nh extends Qp{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jd(`randomNormal does not support dType ${t}.`);return Bp(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}nh.className="RandomNormal",Ko.serialization.registerClass(nh);class rh extends Qp{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jd(`truncatedNormal does not support dType ${t}.`);return(0,Ko.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}rh.className="TruncatedNormal",Ko.serialization.registerClass(rh);class ih extends Qp{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return(0,Ko.tidy)((()=>{if(2!==e.length||e[0]!==e[1])throw new $d("Identity matrix initializer can only be used for 2D square matrices.");return(0,Ko.mul)(this.gain,(0,Ko.eye)(e[0]))}))}getConfig(){return{gain:this.gain}}}ih.className="Identity",Ko.serialization.registerClass(ih);class ah extends Qp{constructor(e){if(super(),e.scale<0)throw new $d(`scale must be a positive float. Got: ${e.scale}`);var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,rp(Kp,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){rp(Xp,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,r;if(vp(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=Ep(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=Ep(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=Ep(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],i=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,i):a/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(a);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jd(`${this.getClassName()} does not support dType ${t}.`);return(0,Ko.truncatedNormal)(e,0,n,t,this.seed)}{const n=Math.sqrt(3*a);return(0,Ko.randomUniform)(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ah.className="VarianceScaling",Ko.serialization.registerClass(ah);class oh extends ah{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ah.className}}oh.className="GlorotUniform",Ko.serialization.registerClass(oh);class sh extends ah{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ah.className}}sh.className="GlorotNormal",Ko.serialization.registerClass(sh);class ch extends ah{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ah.className}}ch.className="HeNormal",Ko.serialization.registerClass(ch);class uh extends ah{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ah.className}}uh.className="HeUniform",Ko.serialization.registerClass(uh);class lh extends ah{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ah.className}}lh.className="LeCunNormal",Ko.serialization.registerClass(lh);class dh extends ah{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ah.className}}dh.className="LeCunUniform",Ko.serialization.registerClass(dh);class ph extends Qp{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return(0,Ko.tidy)((()=>{if(e.length<2)throw new jd("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=Ko.util.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=Bp([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),o=Ko.linalg.qr(a,!1);let s=o[0];const c=o[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=(0,Ko.mul)(s,c.sign()),n<r&&(s=s.transpose()),(0,Ko.mul)((0,Ko.scalar)(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}ph.className="Orthogonal",Ko.serialization.registerClass(ph);const hh={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function fh(e,t={}){return Zd(e,Ko.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function mh(e){return Qd(e)}function gh(e){if("string"==typeof e){const t=e in hh?hh[e]:e;if("GlorotNormal"===t)return new sh;if("GlorotUniform"===t)return new oh;if("HeNormal"===t)return new ch;if("HeUniform"===t)return new uh;if("LeCunNormal"===t)return new lh;if("LeCunUniform"===t)return new dh;{const e={};return e.className=t,e.config={},fh(e)}}return e instanceof Qp?e:fh(e)}function _h(e){return Array.isArray(e)&&Array.isArray(e[0])}function vh(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function yh(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new $d(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function bh(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new $d(`Expected exactly 1 Shape; got ${e.length}`)}return e}function wh(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const kh="Variable";class xh{constructor(e,t="float32",n=kh,r=!0,i=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=up(),n=null==n?kh:n,this.originalName=xp(n),this.name=Sp(this.originalName),this.trainable_=r,this.constraint=i,this.val=Ko.variable(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Sh(e){return e.map((e=>e.read()))}function Th(e){e.forEach((e=>{e[0].write(e[1])}))}class Ch{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Eh{constructor(e,t,n,r,i,a,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=up(),null!=a&&(this.originalName=xp(a),this.name=Sp(this.originalName)),this.rank=t.length}}let Ih=0;class Nh{constructor(e,t){this.callArgs=t,this.id=Ih++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const t of e.inboundLayers)null!=t&&t.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Ah=0;class Oh extends Ko.serialization.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Ah++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=Yd(e)+"_"+dp(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new zd(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new $d(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Wd(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Wd(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Fd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Fd(`Layer ${this.name} is not connected, no input to return.`);return Wd(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Fd(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Fd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Wd(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=Hd(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=Hd(this.inputSpec);if(t.length!==n.length)throw new $d(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let e=0;e<t.length;e++){const r=t[e],i=n[e];if(null==i)continue;const a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new $d(`Input ${e} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(null!=i.maxNDim&&a>i.maxNDim)throw new $d(`Input ${e} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(null!=i.minNDim&&a<i.minNDim)throw new $d(`Input ${e} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new $d(`Input ${e} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const n in i.axes){const r=Number(n),a=i.axes[n],o=r>=0?t[r]:t[t.length+r];if(null!=a&&-1===[a,null].indexOf(o))throw new $d(`Input ${e} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const n=i.shape[t],a=r.shape[t];if(null!=n&&null!=a&&n!==a)throw new $d(`Input ${e} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=Hd(e),r=function(e){let t=!0;for(const n of Hd(e))if(!(n instanceof Eh)){t=!1;break}return t}(e),i=function(e){let t=!0;for(const n of Hd(e))if(n instanceof Eh){t=!1;break}return t}(e);if(r===i)throw new $d("Arguments to apply() must be all SymbolicTensors or all Tensors");return kp(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of Hd(e))t.push(n.shape);this.build(Wd(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const i=Hd(r),a=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=Wd(a),null!=this.activityRegularizer)throw new jd("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=Hd(e);const t=[];for(const n of e)t.push(n.shape);return Wd(t)}(e),r=this.computeOutputShape(n);let i;const a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new Eh(a,n,this,Hd(e),t,this.name,r))):new Eh(a,r,this,Hd(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new jd("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Fd(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Fd(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new zd(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return wh(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Sh(e?this.trainableWeights:this.weights)}setWeights(e){(0,Ko.tidy)((()=>{const t=this.weights;if(t.length!==e.length)throw new $d(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=Sh(t);for(let i=0;i<r.length;++i){const a=r[i],o=t[i],s=e[i];if(!Ko.util.arraysEqual(a.shape,s.shape))throw new $d(`Layer weight shape ${a.shape} not compatible with provided weight shape ${s.shape}`);n.push([o,s])}Th(n)}))}addWeight(e,t,n,r,i,a,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new $d(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():gh("zeros"));const c=r.apply(t,n),u=new xh(c,n,e,a,o);return c.dispose(),null!=i&&this.addLoss((()=>i.apply(u.read()))),null==a&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=Hd(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),i=Hd(t),a=Hd(r);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let e=0;e<i.length;e++)i[e].kerasMask=a[e]}addInboundNode(e,t,n,r,i,a,o=null){const s=Hd(e);t=Hd(t),n=Hd(n),r=Hd(r),i=vh(i),a=vh(a);const c=[],u=[],l=[];for(const e of s)c.push(e.sourceLayer),u.push(e.nodeIndex),l.push(e.tensorIndex);new Nh({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:l,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Rh(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=Rh(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class Ph extends Oh{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:dp("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new $d("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new $d("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new $d("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new Eh(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Nh({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new $d(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Ph.className="InputLayer",Ko.serialization.registerClass(Ph);class Dh{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Dh)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new $d(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,Ko.cast)(t,e.dtype)}catch(n){throw new $d(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Eh){if(null==this.id2Value[e.id])throw new $d(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new $d(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Eh){if(null==this.id2Value[e.id])throw new $d(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new $d(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,Ko.dispose)(this.id2Mask)}}const Lh=new Vd,Mh=new Vd;function Fh(e,t,n,r){const i=null!=n&&n.training,a=Array.isArray(e),o=a?e:[e],s=o.map((e=>e.name)),c=[],u=t.names();for(const e of s)-1!==u.indexOf(e)?c.push(t.getValue(e)):c.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const l=s.join(",")+"|"+t.names().sort().join(",");let d,p=Lh.get(l);if(null==p){const e=function(e,t){Ko.util.assert(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const i=$h(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of e){const{sorted:e,recipientMap:o}=$h(a,t);for(const t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(const e in o)null==r[e]&&(r[e]=new Set),o[e].forEach((t=>r[e].add(t)))}}return{sorted:n,recipientCounts:zh(r)}}(o,t);p=e.sorted,d=e.recipientCounts,Lh.put(l,p),Mh.put(l,d)}d={},i||Object.assign(d,Mh.get(l));const h=new Dh(t);for(let e=0;e<p.length;++e){if(null!=r){const e=(0,Ko.memory)().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const a=p[e],o=a.sourceLayer;if(o instanceof Ph)continue;const u=[],l=[],f=[];let m=!1;for(const e of a.inputs){const n=h.getValue(e),r=h.getMask(e);u.push(n),l.push(r),null!=r&&(m=!0),i||(d[e.name]--,0!==d[e.name]||t.hasKey(e)||-1!==s.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||f.push(n))}m&&((n=n||{}).mask=l[0]);const g=Hd(o.apply(u,n));let _=null;o.supportsMasking&&(_=o.computeMask(u,l));const v=jh(a),y=Array.isArray(v)?v:[v];for(let e=0;e<y.length;++e){h.hasKey(y[e])||h.add(y[e],g[e],Array.isArray(_)?_[0]:_);const t=s.indexOf(y[e].name);-1!==t&&(c[t]=g[e])}i||(0,Ko.dispose)(f)}return h.disposeMasks(),a?c:c[0]}function zh(e){const t={};for(const n in e)t[n]=e[n].size;return t}function $h(e,t){const n=new Set,r=[],i={};for(const e of t.names())n.add(e);const a=[],o=[];for(a.push(e);a.length>0;){const e=a[a.length-1];if(n.has(e.name)){a.pop();continue}const t=o[o.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&o.pop();else{o.push(a.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||a.push(t)}}return{sorted:r,recipientMap:i}}function jh(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function Bh(e,t){return(0,Ko.tidy)((()=>Ko.sqrt(Ko.sum(Ko.mul(e,e),t,!0))))}(0,Ko.env)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=Lh&&Lh.setMaxEntries(e),null!=Mh&&Mh.setMaxEntries(e)}));class Vh extends Ko.serialization.Serializable{getConfig(){return{}}}class Uh extends Vh{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,Ko.tidy)((()=>{const t=Bh(e,this.axis),n=Ko.clipByValue(t,0,this.maxValue);return Ko.mul(e,Ko.div(n,Ko.add(Rp(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Uh.className="MaxNorm",Ko.serialization.registerClass(Uh);class Gh extends Vh{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,Ko.tidy)((()=>Ko.div(e,Ko.add(Rp(),Bh(e,this.axis)))))}getConfig(){return{axis:this.axis}}}Gh.className="UnitNorm",Ko.serialization.registerClass(Gh);class qh extends Vh{apply(e){return Ko.relu(e)}}qh.className="NonNeg",Ko.serialization.registerClass(qh);class Wh extends Vh{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,Ko.tidy)((()=>{const t=Bh(e,this.axis),n=Ko.add(Ko.mul(this.rate,Ko.clipByValue(t,this.minValue,this.maxValue)),Ko.mul(1-this.rate,t));return Ko.mul(e,Ko.div(n,Ko.add(Rp(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Wh.className="MinMaxNorm",Ko.serialization.registerClass(Wh);const Hh={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Yh(e){return Qd(e)}function Kh(e,t={}){return Zd(e,Ko.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function Xh(e){if(null==e)return null;if("string"==typeof e){return Kh({className:e in Hh?Hh[e]:e,config:{}})}return e instanceof Vh?e:Kh(e)}async function Qh(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const a=e[i];if("number"!=typeof a){const e=a;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];(0,Ko.dispose)(r)}}function Jh(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}var Zh;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Zh||(Zh={}));class ef{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class tf{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class nf extends ef{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const e in t){const r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;const i=(0,Ko.tidy)((()=>(0,Ko.add)(this.totals[e],(0,Ko.mul)(r,n))));this.totals[e]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:(0,Ko.tidy)((()=>{const n=(0,Ko.mul)((0,Ko.div)(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),(0,Ko.keep)(t[e])})))}}class rf extends ef{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const e in t)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(t[e])}async syncData(){const e=[],t=[],n=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if("number"!=typeof i[a]){const o=i[a];e.push(o.data()),t.push(r),n.push(a)}}const r=await Promise.all(e);for(let e=0;e<r.length;++e){this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}}}class af extends ef{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Ko.nextFrame,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Ko.util.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,i=null!=n?n():Ko.util.now();return(...a)=>{const o=null!=n?n():Ko.util.now();return o-i<t||(i=o,r=e(...a)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await Qh(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await Qh(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await Qh(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await Qh(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await Qh(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):Ko.util.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await Qh(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await Qh(e),await this.trainEnd(e))}}function of(e,t){if(null==e&&(e={}),e instanceof ef)return[e];if(Array.isArray(e)&&e[0]instanceof ef)return e;return Hd(e).map((e=>new af(e,t)))}class sf{constructor(){}static registerCallbackConstructor(e,t){Ko.util.assert(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),sf.checkForDuplicate(t),null==sf.constructors[e]&&(sf.constructors[e]=[]),sf.constructors[e].push(t)}static checkForDuplicate(e){for(const t in sf.constructors){sf.constructors[+t].forEach((t=>{if(t===e)throw new $d("Duplicate callback constructor.")}))}}static clear(){sf.constructors={}}static createCallbacks(e){const t=[];for(const n in sf.constructors){const r=+n;e>=r&&t.push(...sf.constructors[r])}return t.map((e=>new e))}}function cf(e,t,n,r,i,a,o,s,c){const u=new rf,l=[new nf,...sf.createCallbacks(t)];null!=e&&l.push(...e),l.push(u);const d=new tf(l);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:t,doValidation:s,metrics:c}),{callbackList:d,history:u}}function uf(e,t={},n=!1){return Zd(e,Ko.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function lf(e,t){return(0,Ko.tidy)((()=>{"float32"!==e.dtype&&(e=Ko.cast(e,"float32"));const n=Ko.sum(Gp(e),t,!0),r=Ko.fill(n.shape,Rp()),i=Ko.sqrt(Ko.maximum(n,r));return Ko.div(e,i)}))}function df(e,t){return(0,Ko.tidy)((()=>Ko.mean(Gp(Ko.sub(t,e)),-1)))}function pf(e,t){return(0,Ko.tidy)((()=>Ko.mean(Ko.abs(Ko.sub(t,e)),-1)))}function hf(e,t){return(0,Ko.tidy)((()=>{const n=Ko.sub(e,t),r=Ko.clipByValue(Ko.abs(e),Rp(),Number.MAX_VALUE),i=Ko.abs(Ko.div(n,r));return Ko.mul(100,Ko.mean(i,-1))}))}function ff(e,t){return(0,Ko.tidy)((()=>{const n=Ko.clipByValue(t,Rp(),Number.MAX_VALUE),r=Ko.log(Ko.add(1,n)),i=Ko.clipByValue(e,Rp(),Number.MAX_VALUE),a=Ko.log(Ko.add(1,i));return Ko.mean(Gp(Ko.sub(r,a)),-1)}))}function mf(e,t,n=!1){return(0,Ko.tidy)((()=>{if(n)t=Ko.softmax(t);else{const e=Ko.sum(t,t.shape.length-1,!0);t=Ko.div(t,e)}return t=Ko.clipByValue(t,Rp(),1-Rp()),Ko.neg(Ko.sum(Ko.mul(Ko.cast(e,"float32"),Ko.log(t)),t.shape.length-1))}))}function gf(e,t,n=!1){return(0,Ko.tidy)((()=>{const r=Ko.cast(Ko.floor(function(e){const t=[Ep(e.shape)];return Ko.reshape(e,t)}(e)),"int32"),i=(t=Ko.clipByValue(t,Rp(),1-Rp())).shape;return mf(Ko.reshape(Ko.oneHot(r,i[i.length-1]),i),t,n)}))}function _f(e,t){return(0,Ko.tidy)((()=>{let n;return n=Ko.clipByValue(t,Rp(),1-Rp()),n=Ko.log(Ko.div(n,Ko.sub(1,n))),Ko.mean(function(e,t){if(!Ko.util.arraysEqual(e.shape,t.shape))throw new $d(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return(0,Ko.tidy)((()=>{const n=Ko.relu(t),r=Ko.neg(Ko.abs(t));return Ko.add(Ko.sub(n,Ko.mul(t,e)),Ko.log1p(Ko.exp(r)))}))}(e,n),-1)}))}function vf(e,t){return(0,Ko.tidy)((()=>{const n=Ko.clipByValue(e,Rp(),1),r=Ko.clipByValue(t,Rp(),1);return Ko.sum(Ko.mul(e,Ko.log(Ko.div(n,r))),-1)}))}function yf(e,t){return(0,Ko.tidy)((()=>{const n=lf(e,-1),r=lf(t,-1),i=Ko.mul(n,r);return Ko.neg(Ko.sum(i,-1))}))}sf.constructors={};const bf={meanSquaredError:df,meanAbsoluteError:pf,meanAbsolutePercentageError:hf,meanSquaredLogarithmicError:ff,squaredHinge:function(e,t){return(0,Ko.tidy)((()=>{const n=Ko.maximum(0,Ko.sub(1,Ko.mul(e,t)));return Ko.mean(Gp(n),-1)}))},hinge:function(e,t){return(0,Ko.tidy)((()=>{const n=Ko.maximum(0,Ko.sub(1,Ko.mul(e,t)));return Ko.mean(n,-1)}))},categoricalHinge:function(e,t){return(0,Ko.tidy)((()=>{const n=Ko.sum(Ko.mul(e,t),-1),r=Ko.max(Ko.mul(Ko.sub(1,e),t),-1);return Ko.maximum(0,Ko.add(1,Ko.sub(r,n)))}))},logcosh:function(e,t){return(0,Ko.tidy)((()=>{const n=Math.log(2),r=Ko.sub(t,e),i=Ko.sub(Ko.add(r,Ko.softplus(Ko.mul(-2,r))),n);return Ko.mean(i,-1)}))},categoricalCrossentropy:mf,sparseCategoricalCrossentropy:gf,binaryCrossentropy:_f,kullbackLeiblerDivergence:vf,poisson:function(e,t){return(0,Ko.tidy)((()=>{const n=Ko.log(Ko.add(Rp(),t));return Ko.mean(Ko.sub(t,Ko.mul(e,n)),-1)}))},cosineProximity:yf};function wf(e){if("string"==typeof e){if(e in bf)return bf[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new $d(t)}return e}function kf(e,t){return(0,Ko.tidy)((()=>{const n=Ko.mul(.5,Ko.onesLike(t)),r=Pp(Ko.greater(t,n),e.dtype);return Ko.mean(Ko.equal(e,r),-1)}))}function xf(e,t){return(0,Ko.tidy)((()=>Pp(Ko.equal(Ko.argMax(e,-1),Ko.argMax(t,-1)),"float32")))}function Sf(e,t){return(0,Ko.tidy)((()=>Ko.cast(Ko.sum(Ko.logicalAnd(Ko.equal(e,1),Ko.equal(t,1))),"float32")))}function Tf(e,t){return _f(e,t)}function Cf(e,t){return e.rank===t.rank&&(e=Ko.squeeze(e,[e.rank-1])),(t=Ko.argMax(t,-1)).dtype!==e.dtype&&(t=Ko.cast(t,e.dtype)),Ko.cast(Ko.equal(e,t),"float32")}const Ef=mf,If=gf,Nf={binaryAccuracy:kf,categoricalAccuracy:xf,precision:function(e,t){return(0,Ko.tidy)((()=>{const n=Sf(e,t),r=function(e,t){return(0,Ko.tidy)((()=>Ko.cast(Ko.sum(Ko.logicalAnd(Ko.equal(e,0),Ko.equal(t,1))),"float32")))}(e,t),i=Ko.add(n,r);return Ko.cast(Ko.where(Ko.greater(i,0),Ko.div(n,i),0),"float32")}))},categoricalCrossentropy:Ef,sparseCategoricalCrossentropy:If,mse:df,MSE:df,mae:pf,MAE:pf,mape:hf,MAPE:hf,cosine:yf};function Af(e){if("string"==typeof e&&e in Nf)return Nf[e];if("string"!=typeof e&&null!=e)return e;throw new $d(`Unknown metric ${e}`)}function Of(e){if(Gd(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(const n of Object.keys(bf))if(bf[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Nf))if(Nf[n]===e){t=n;break}return void 0!==t?t:e.name}}const Rf=1048576;function Pf(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Df(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>Rf&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function Df(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!=typeof n)return!1;if(!Df(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!Df(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function Lf(e,t,n,r=console.log){const i=function(e){let t=!0;const n=[],r=[];for(const t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(const e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(const n of e.layers){let e=!1;for(const i of n.inboundNodes)if(-1!==r.indexOf(i)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];let o;if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!i){a.push("Receives inputs"),o=[];for(const t in e.nodesByDepth)o.push(...e.nodesByDepth[t])}r("_".repeat(t)),Mf(a,n,r),r("=".repeat(t));const s=e.layers;for(let e=0;e<s.length;++e)i?Ff(s[e],n,r):zf(s[e],n,o,r),r((e===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const c=function(e){let t;t=null!=e.collectedTrainableWeights?wh(e.collectedTrainableWeights):wh(e.trainableWeights);return t}(e),u=wh(e.nonTrainableWeights);r(`Total params: ${c+u}`),r(`Trainable params: ${c}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function Mf(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}function Ff(e,t,n){let r,i;try{i=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}Mf([`${e.name} (${e.getClassName()})`,i,r,e.countParams().toString()],t,n)}function zf(e,t,n,r){let i,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){a="multiple"}try{i=JSON.stringify(e.outputShape)}catch(e){i="multiple"}const o=[];for(const t of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(t)))for(let e=0;e<t.inboundLayers.length;++e){const n=t.inboundLayers[e].name,r=t.nodeIndices[e],i=t.tensorIndices[e];o.push(`${n}[${r}][${i}]`)}const s=e.name,c=e.getClassName(),u=0===o.length?"":o[0];Mf([`${s} (${c})`,a,i,e.countParams().toString(),u],t,r);for(let e=1;e<o.length;++e)Mf(["","","","",o[e]],t,r)}function $f(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function jf(e,t){if(null===e)return null;if("string"==typeof e)return Kd(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];$f(t,i,r)?n.push(r):n.push(jf(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{const e=Kd(n);t[e]=jf(r,e)}}return t}}function Bf(e,t){if(null==e)return null;if("string"==typeof e)return Yd(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];$f(t,i,r)?n.push(r):n.push(Bf(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],i=Yd(n);t[i]="name"!==n&&"className"!==n||"string"!=typeof r?Bf(r,n):r}return t}}const Vf="4.20.0";class Uf extends Oh{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=dp(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],tp(this.inputs).length!==this.inputs.length)throw new $d(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);tp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(r)}for(const e of this.inputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;Gd(0===n,"input layer has >1 nodes"),Gd(0===r,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(r)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let t=0;t<this.inputLayers.length;t++){const n=this.inputLayers[t];if(!(n instanceof Ph))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${t} (0-based) originates from layer type ${n.getClassName()}.`);this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},i={},a={},o=[],s=(e,t,n,r,i,c)=>{null!=r&&null!=i&&null!=c||(r=e.sourceLayer,i=e.nodeIndex,c=e.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new zd(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(Uf.nodeKey(r,i)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(u)&&n.push(u);const l=u.inboundLayers.length;for(let e=0;e<l;e++){const r=u.inputTensors[e],i=u.inboundLayers[e],a=u.nodeIndices[e],o=u.tensorIndices[e];s(r,t,n,i,a,o)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);o.push(u)},c=[],u=[];for(const e of this.outputs)s(e,c,u);const l=o.slice().reverse();for(const e of l){n[e.id]=e,e.id in t||(t[e.id]=0);let a=t[e.id];const o=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];a=Math.max(a,o),r[e.outboundLayer.id]=a,i[e.outboundLayer.id]=e.outboundLayer,t[e.id]=a;for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],o=e.nodeIndices[r],s=i.inboundNodes[o],c=null==t[s.id]?0:t[s.id];t[s.id]=Math.max(a+1,c),n[s.id]=s}}const d={};for(const e in t){const r=t[e];r in d||(d[r]=[]),d[r].push(n[e])}const p={};for(const e in r){const t=r[e];t in p||(p[t]=[]),p[t].push(i[e])}let h=Object.keys(p).map((e=>parseInt(e,10))).sort(ep);this.layers=[];for(const e of h){const t=p[e];t.sort(((e,t)=>{const n=a[e.id],r=a[t.id];return n<r?-1:n>r?1:0}));for(const e of t)e instanceof Uf&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=p,h=Object.keys(d).map((e=>parseInt(e,10))).sort(ep);const f=this.inputs.slice(),m=[];for(const e of h)for(const t of d[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new zd(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${m}`);for(const e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=d;const g=this.layers.map((e=>e.name));for(const e of g){const t=g.filter((t=>t===e)).length;if(1!==t)throw new zd(`The name "${e}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Nh({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new $d("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;const i=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);i&&this.parseWeights(e);for(const e of this.layers)for(const[t,a]of e.weights.entries()){const e=i?`${a.name.split("/").slice(0,-1).join("/")+"/"}${t}`:a.originalName;if(null!=n[e])throw new $d(`Duplicate weight name: ${e}`);n[e]=a,r++}const a=[];for(const r in e){let i=r;if(null==n[r]){const e=r.split("/");i=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[i])a.push([n[i],e[r]]);else if(t)throw new $d(`Provided weight data has no target variable: ${r}`);delete n[i]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new $d(`${e.length} of ${r} weights are not set: ${e}`)}Th(a)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],i=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");i!==t&&(e[i]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${Vf}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=Bf(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return(0,Ko.tidy)((()=>{e=Hd(e);const n=new Dh;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return Fh(this.outputs,n,t)}))}computeMask(e,t){return(0,Ko.tidy)((()=>{let n;return e=Hd(e),n=null==t?Ud(null,e.length):Hd(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=vh(e);if(t.length!==this.inputLayers.length)throw new $d(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let e=0;e<t.length;e++){const r=this.inputLayers[e],i=t[e];n[r.name+"_0_0"]=i}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(ep);if(r.length>1)for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(t.id))continue;const r=[];for(let t=0;t<e.inboundLayers.length;t++){const i=e.inboundLayers[t],a=e.nodeIndices[t],o=e.tensorIndices[t],s=n[`${i.name}_${a}_${o}`];r.push(s)}const i=vh(t.computeOutputShape(Wd(r))),a=t.inboundNodes.indexOf(e);for(let e=0;e<i.length;e++){n[`${t.name}_${a}_${e}`]=i[e]}}}const i=[],a=[];for(let e=0;e<this.outputLayers.length;e++){const t=this.outputLayers[e],n=this.outputLayersNodeIndices[e],r=this.outputLayersTensorIndices[e],i=`${t.name}_${n}_${r}`;a.push(i)}for(let e=0;e<a.length;e++){const t=a[e];Gd(t in n),i.push(n[t])}return Wd(i)}runInternalGraph(e,t){null==t&&(t=Ud(null,e.length));const n={};for(let r=0;r<this.inputs.length;++r){const i=this.inputs[r],a=e[r],o=t[r];n[i.id]=[a,o]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(ep);for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,a=new Array;for(const e of r)e.id in n&&a.push(n[e.id]);if(a.length===r.length){let r,o,s,c,u={};if(null!=e.callArgs&&(u=e.callArgs),1===a.length){const[e,n]=a[0];null==u.mask&&(u.mask=n),s=Hd(t.call(e,u)),c=Hd(t.computeMask(e,n)),r=[e],o=[n]}else r=a.map((e=>e[0])),o=a.map((e=>e[1])),null==u.mask&&(u.mask=o),s=Hd(t.call(r,u)),c=Hd(t.computeMask(r,o));if(t.activityRegularizer)throw new jd("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){const t=i[e],r=s[e],a=c[e];n[t.id]=[r,a]}}}}const i=[],a=[],o=[];for(const e of this.outputs){Gd(e.id in n,`Could not compute output ${e.name} : ${e.id}`);const[t,r]=n[e.id];o.push(t.shape),i.push(t),a.push(r)}return[i,a,o]}buildNodeConversionMap(e){const t={};let n;for(const e of this.layers){n=e instanceof Uf?1:0;for(let r=0;r<e.inboundNodes.length;r++){const i=Uf.nodeKey(e,r);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new $d("Provide either a layer name or layer index");if("number"==typeof e)return this.findLayer(e);for(const t of this.layers)if(t.name===e)return t;throw new $d(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new $d(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return(0,Ko.tidy)((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=Uf.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const e of this.layers){const r=e.getClassName(),i=e.getConfig(),a=[];for(let n=0;n<e.inboundNodes.length;n++){const r=e.inboundNodes[n],i=Uf.nodeKey(e,n);let o={};if(this.containerNodes.has(i)){if(r.callArgs)try{JSON.stringify(r.callArgs),o=r.callArgs}catch(t){console.warn(`Layer ${e.name} was passed non-serializable keyword arguments: ${r.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),o={}}if(r.inboundLayers.length>0){const e=[];for(let n=0;n<r.inboundLayers.length;n++){const i=r.inboundLayers[n],a=r.nodeIndices[n],s=r.tensorIndices[n];let c=t[Uf.nodeKey(i,a)];null==c&&(c=0),e.push([i.name,c,s,o])}a.push(e)}}}const o={};o.name=e.name,o.className=r,o.config=i,o.inboundNodes=a,n.push(o)}e.layers=n;const r=[];for(let e=0;e<this.inputLayers.length;e++){const n=this.inputLayers[e],i=this.inputLayersNodeIndices[e],a=Uf.nodeKey(n,i);if(!this.containerNodes.has(a))continue;let o=t[a];null==o&&(o=0);const s=this.inputLayersTensorIndices[e];r.push([n.name,o,s])}e.inputLayers=r;const i=[];for(let e=0;e<this.outputLayers.length;e++){const n=this.outputLayers[e],r=this.outputLayersNodeIndices[e],a=Uf.nodeKey(n,r);if(!this.containerNodes.has(a))continue;let o=t[a];null==o&&(o=0);const s=this.outputLayersTensorIndices[e];i.push([n.name,o,s])}return e.outputLayers=i,e}static fromConfig(e,t,n={},r=!1){const i={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function s(e,t){const n=[];let r;for(const a of t){const s=a[0],c=a[1],u=a[2];if(r=null==a[3]?{}:a[3],!(s in i))return void o(e,t);const l=i[s];if(l.inboundNodes.length<=c)return void o(e,t);const d=l.inboundNodes[c];n.push(d.outputTensors[u])}n.length>0&&e.apply(Wd(n),r)}function c(e){const n=e.name,a=uf(e,null!=t.customObjects?t.customObjects:{});a.setFastWeightInitDuringBuild(r),i[n]=a;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new $d(`Corrupted configuration, expected array for nodeData: ${e}`);o(a,e)}))}const u=t.name,l=t.layers;for(const e of l)c(e);for(;!np(a);)for(const e of l){const t=i[e.name];if(t.name in a){const e=a[t.name];delete a[t.name];for(const n of e)s(t,n)}}const d=[],p=[],h=t.inputLayers;for(const e of h){const t=e[0],n=e[1],r=e[2];Gd(t in i);const a=i[t].inboundNodes[n].outputTensors;d.push(a[r])}const f=t.outputLayers;for(const e of f){const t=e[0],n=e[1],r=e[2];Gd(t in i);const a=i[t].inboundNodes[n].outputTensors;p.push(a[r])}return new e({inputs:d,outputs:p,name:u})}get stateful(){if(this._stateful)throw new $d("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){(0,Ko.tidy)((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function Gf(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function qf(e,t){return Gf(e,t,"classWeight")}async function Wf(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=(0,Ko.tidy)((()=>{if(1===e.shape.length)return(0,Ko.clone)(e);if(2===e.shape.length){if(e.shape[1]>1){const t=1;return(0,Ko.argMax)(e,t)}if(1===e.shape[1])return(0,Ko.reshape)(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());(0,Ko.dispose)(t);const i=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])})),(0,Ko.tensor1d)(i,"float32")}return null}function Hf(e,t){return(0,Ko.mul)(e,t)}function Yf(e,t){let n,r;const i=t;n=i.xs,r=i.ys,Ko.util.assert(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const a=Kf("input",e.inputNames,n),o=Kf("output",e.outputNames,r),s=a[0].shape[0];Ko.util.assert(a.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),Ko.util.assert(o.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let t=0;t<a.length;t++)Ko.util.assert(a[t].shape[0]===s,(()=>`Batch size mismatch: input ${e.inputNames[t]} has ${a[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));for(let t=0;t<o.length;t++)Ko.util.assert(o[t].shape[0]===s,(()=>`Batch size mismatch: output ${e.outputNames[t]} has ${o[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));return{xs:a,ys:o}}function Kf(e,t,n){if(n instanceof Ko.Tensor)return[n];if(Array.isArray(n))return Ko.util.assert(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const i of t){if(null==n[i])throw new $d(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}async function Xf(e,t,n){const r=null!=n.batchesPerEpoch;if(Ko.util.assert(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),Ko.util.assert(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),Ko.util.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),Ko.util.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),Ko.util.assert(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=null!=n.validationData;let a,o;if(i)if(Qf(n.validationData))Ko.util.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new jd("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,o=e.ys}const s=e.makeTrainFunction(),c=e.getDedupedMetricsNames();let u;u=i?c.slice().concat(c.map((e=>"val_"+e))):c.slice();const l=of(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:h}=cf(l,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,i,u);p.setModel(e),e.history=h,await p.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await p.onEpochBegin(f);let l=0,d=0;for(r||(m=await t.iterator());!r||l<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${l} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=Yf(e,t.value),a={};a.batch=d,a.size=r[0].shape[0],await p.onBatchBegin(d,a);const o=[];if(null!=n.classWeight){const t=qf(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)o.push(await Wf(i[e],null,t[e]))}const u=r.concat(i).concat(o),h=s(u);Ko.dispose(u);for(let e=0;e<c.length;++e){const t=c[e],n=h[e];a[t]=n,Ko.keep(n)}await p.onBatchEnd(d,a),Jh(a),d++,l++}if(r?l>=n.batchesPerEpoch:t.done){if(i){let t;t=Qf(n.validationData)?Hd(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):Hd(e.evaluate(a,o,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(f,u),f++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Qf(e){return"function"==typeof e.iterator}function Jf(e){Ko.util.assert(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function Zf(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>Lp(e,t,n-t))):Lp(e,t,n-t)}function em(e,t){return Ko.tidy((()=>null==e?null:Array.isArray(e)?e.map((e=>em(e,t))):Up(e,"int32"===t.dtype?t:Ko.cast(t,"int32"))))}function tm(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function nm(e){const t=[];e instanceof Ko.Tensor&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Dp(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function rm(e,t){if(null==e)return;const n=[];if(t instanceof Ko.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const e in t){const r=t[e];n.push(r.id)}const r=[];if(e instanceof Ko.Tensor)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const t in e){const i=e[t];-1===n.indexOf(i.id)&&r.push(i)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function im(e){return Array.isArray(e)}function am(e){return!function(e){return e instanceof Ko.Tensor}(e)&&!im(e)}function om(e,t,n,r=!0,i=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(im(e)&&e.length>0)t=!0;else if(am(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new $d(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));let a;if(am(e)){a=[];for(const n of t){if(null==e[n])throw new $d(`No data provided for "${n}". Need data for each key in: ${t}`);a.push(e[n])}}else if(im(e)){if(e.length!==t.length)throw new $d(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);a=e}else{if(t.length>1)throw new $d(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);a=[e]}if(a=nm(a),null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const o=a[e];if(o.shape.length!==n[e].length)throw new $d(`Error when checking ${i}: expected ${t[e]} to have ${n[e].length} dimension(s). but got array with shape ${o.shape}`);for(let t=0;t<n[e].length;++t){if(0===t&&!r)continue;const a=o.shape[t],s=n[e][t];if(null!=s&&s>=0&&a!==s)throw new $d(`${i} expected a batch of elements where each example has shape [${n[e].slice(1,n[e].length)}] (i.e.,tensor shape [*,${n[e].slice(1,n[e].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function sm(e,t,n,r=!0,i=""){let a;if(Array.isArray(e)){if(e.length!==t.length)throw new $d(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);a=e}else{if(t.length>1)throw new $d(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);a=[e]}if(null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const o=a[e];if(o.shape.length!==n[e].length)throw new $d(`Error when checking ${i}: expected ${t[e]} to have ${n[e].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let a=0;a<n[e].length;++a){if(0===a&&!r)continue;const s=o.shape[a],c=n[e][a];if(null!=c&&c!==s)throw new $d(`Error when checking ${i}: expected ${t[e]} to have shape ${JSON.stringify(n[e])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}class cm extends Uf{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new $d("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Lf(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>Ko.train.adagrad(.01),Adadelta:()=>Ko.train.adadelta(1,.95,Rp()),Adam:()=>Ko.train.adam(.001,.9,.999,Rp()),Adamax:()=>Ko.train.adamax(.002,.9,.999,Rp(),0),RMSProp:()=>Ko.train.rmsprop(.001,.9,0,Rp()),SGD:()=>Ko.train.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new $d(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ko.Optimizer))throw new $d("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new $d(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>wf(e)))}else{const n=wf(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new $d(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(wf(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],n=this.outputNames[e];this.feedOutputNames.push(n),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],kp("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};kp("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,a;for(const o of t){if("string"==typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===_f?-1!==["accuracy","acc"].indexOf(o)?r=kf:-1!==["crossentropy","ce"].indexOf(o)&&(r=Tf):this.lossFunctions[e]===gf?-1!==["accuracy","acc"].indexOf(o)?r=Cf:-1!==["crossentropy","ce"].indexOf(o)&&(r=If):-1!==["accuracy","acc"].indexOf(o)?r=xf:-1!==["crossentropy","ce"].indexOf(o)&&(r=Ef),-1!==["accuracy","acc"].indexOf(o)?i="acc":-1!==["crossentropy","ce"].indexOf(o)&&(i="ce"),a=r,n=""+i}else{const e=Af(o);a=e,n=""+Of(o)}let t;kp(n,(()=>{t=a})),i(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;Jf(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const e=i[0].concat(i[1]);this.makeTestFunction();const t=this.testFunction;return Wd(this.testLoop(t,e,r,n.verbose,n.steps))}finally{rm(i[0],e),rm(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,i=e.testFunction;let a=[];if(n.verbose>0)throw new jd("Verbose mode is not implemented yet.");Ko.util.assert(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const o="function"==typeof t.next?t:await t.iterator();let s=0,c=0;for(;!r||c<n.batches;){const t=await o.next();if(a=Ko.tidy((()=>{if(t.value){const{xs:n,ys:r}=Yf(e,t.value),o=n.concat(r),u=Ko.tidy((()=>i(o)));if(Ko.dispose(o),0===c)for(let e=0;e<u.length;++e)a.push((0,Ko.scalar)(0));const l=o[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=a[e];a[e]=Ko.tidy((()=>Ko.add(a[e],Ko.mul(l,t)))),c>0&&Ko.dispose(n)}Ko.dispose(u),s+=l,++c}return a})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<a.length;++e){const t=a[e];a[e]=Ko.div(a[e],s),Ko.dispose(t)}return Wd(a)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let i;if(null!=n){if(i=null,null!=t)throw new $d(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new $d(`Either the input data should have a defined shape, or ${r} shoud be specified.`);i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new $d("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),a=new Dh;if(e instanceof Ko.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new $d(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const t of this.inputs){const n=e[t.name];if(null==n)throw new $d(`No value is provided for the model's input ${t.name}`);a.add(t,n)}const o=Fh(i,a);return n?o:o[0]}retrieveSymbolicTensors(e){const t=Ud(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],a=i.map((e=>e.name));for(let r=0;r<e.length;++r){const o=a.indexOf(e[r]);if(-1!==o&&(t[r]=i[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new $d(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return Ko.tidy((()=>{const r=this.checkNumSamples(e);if(n)throw new jd("Verbose predictLoop() is not implemented yet.");const i=tm(r,t),a=this.outputs.map((e=>[]));for(let t=0;t<i.length;++t){const n=Ko.tidy((()=>{const n=i[t][0],r=i[t][1],a=Zf(e,n,r),o=[];if(Array.isArray(a))for(let e=0;e<a.length;++e)o.push({key:this.inputs[e],value:a[e]});else o.push({key:this.inputs[0],value:a});const s=new Dh(o);return Fh(this.outputs,s)}));n.forEach(((e,t)=>a[t].push(e)))}return Wd(a.map((e=>Ko.concat(e,0))))}))}predict(e,t={}){const n=nm(e);sm(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return Jf(e),this.predictLoop(n,e)}finally{rm(n,e)}}predictOnBatch(e){sm(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new zd("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let e=0;e<this.feedOutputShapes.length;++e){const t=this.feedOutputShapes[e];this.feedLossFns[e]===gf?i.push(t.slice(0,t.length-1).concat([1])):i.push(t)}if(function(e,t){const n=tp(e.map((e=>e.shape[0])));n.sort();const r=tp(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new $d(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new $d(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!Ko.util.arraysEqual(n,r))throw new $d(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=om(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=om(t,this.feedOutputNames,i,!1,"target")),function(e,t,n){const r=[df,_f,mf];for(let i=0;i<e.length;++i){const a=e[i],o=t[i],s=n[i];if(null!=o){if(o===mf&&1===a.shape[a.shape.length-1])throw new $d(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(o)){const e=a.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new $d(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new $d(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,i=!0,a){const[o,s]=this.standardizeUserDataXY(e,t,i,a);if(null!=n)throw new Error("sample weight is not supported yet.");let c=null;if(null!=r){const e=qf(r,this.outputNames);c=[];for(let t=0;t<e.length;++t)c.push(await Wf(s[t],null,e[t]))}return[o,s,c]}testLoop(e,t,n,r=0,i){return Ko.tidy((()=>{const a=this.checkNumSamples(t,n,i,"steps"),o=[];if(r>0)throw new jd("Verbose mode is not implemented yet.");if(null!=i)throw new jd("steps mode in testLoop() is not implemented yet");{const r=tm(a,n),i=(0,Ko.tensor1d)(Ap(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],s=r[n][1],c=Lp(i,a,s-a),u=em(t,c),l=e(u);if(0===n)for(let e=0;e<l.length;++e)o.push((0,Ko.scalar)(0));for(let e=0;e<l.length;++e){const t=l[e];o[e]=Ko.add(o[e],Ko.mul(s-a,t))}}for(let e=0;e<o.length;++e)o[e]=Ko.div(o[e],a)}return o}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;if(qd(e,r)>1){i+=`_${qd(e.slice(0,n),r)}`}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],o=this.collectedTrainableWeights.map((e=>e.read())),s=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const o=new Dh(e),s=Fh(this.outputs,o,{training:!0});let c;for(let e=0;e<this.lossFunctions.length;++e){let n=(0,this.lossFunctions[e])(r[e],s[e]);null!=i[e]&&(n=Hf(n,i[e]));const a=Ko.mean(n);t.push(a),c=0===e?n:Ko.add(c,n)}for(let e=0;e<this.metricsTensors.length;++e){let n;if(this.outputs.length>1&&e<this.outputs.length)n=t[e];else{const t=this.metricsTensors[e][0],i=this.metricsTensors[e][1];n=Ko.mean(t(r[i],s[i]))}Ko.keep(n),a.push(n)}return c=Ko.mean(c),this.calculateLosses().forEach((e=>{c=Ko.add(c,e)})),c}),!0,o);return[s].concat(a)}}makeTestFunction(){this.testFunction=e=>Ko.tidy((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let e=0;e<this.inputs.length;++e)a.push({key:this.inputs[e],value:r[e]});const o=new Dh(a),s=Fh(this.outputs,o);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],a=Ko.mean(r(i[e],s[e]));n=0===e?a:Ko.add(n,a),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],a=Ko.mean(n(i[r],s[r]));t.push(a)}return t}))}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let r,i,a,o,s,c,u,l,d;this.isTraining=!0;try{const p=null==n.batchSize?32:n.batchSize;Jf(p);const h=!1,f=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,h,p);r=f[0],i=f[1],d=f[2];let m,g=!1;if(null!=n.validationData&&n.validationData.length>0){if(g=!0,2!==n.validationData.length)throw 3===n.validationData.length?new jd("validationData including sample weights is not supported yet."):new $d(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);s=n.validationData[0],c=n.validationData[1];const e=!0,t=await this.standardizeUserData(s,c,null,null,e,p);u=t[0],l=t[1],m=u.concat(l)}else if(null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1){g=!0;const e=Math.floor(r[0].shape[0]*(1-n.validationSplit)),t=r[0].shape[0];u=Zf(r,e,t),a=r,r=Zf(r,0,e),l=Zf(i,e,t),o=i,i=Zf(i,0,e),m=u.concat(l)}else null!=n.validationSteps&&(g=!0);const _=r.concat(i).concat(d);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let b,w;g?(this.makeTestFunction(),b=this.testFunction,w=y.slice().concat(y.map((e=>"val_"+e)))):(b=null,m=[],w=y.slice());const k=of(n.callbacks,n.yieldEvery);return await this.fitLoop(v,_,y,p,n.epochs,n.verbose,k,b,m,n.shuffle,w,n.initialEpoch,null,null)}finally{this.isTraining=!1,rm(r,e),rm(i,t),rm(a,e),rm(o,t),rm(u,s),rm(l,c),null!=d&&Ko.dispose(d)}}async fitLoop(e,t,n,r,i,a,o,s,c,u,l,d,p,h){null==r&&(r=32),null==i&&(i=1),null==u&&(u=!0),null==d&&(d=0);let f=!1;if(null!=s&&null!=c&&(f=!0),null!=h&&(f=!0,null==p))throw new $d("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,p,"steps_per_epoch");let g;null!=m&&(g=Ap(0,m)),null==a&&(a=1);const{callbackList:_,history:v}=cf(o,a,i,d,m,p,r,f,l);_.setModel(this),this.history=v,await _.onTrainBegin(),this.stopTraining_=!1;for(let a=d;a<i;++a){await _.onEpochBegin(a);const i={};if(null!=p)throw new jd("stepsPerEpoch mode is not implemented yet.");{if("batch"===u)throw new jd("batch shuffling is not implemneted yet");u&&Ko.util.shuffle(g);const a=(0,Ko.tensor1d)(g),o=tm(m,r);for(let u=0;u<o.length;++u){const l={};if(await _.onBatchBegin(u,l),Ko.tidy((()=>{const d=o[u][0],p=o[u][1],h=Lp(a,d,p-d);l.batch=u,l.size=p-d;const m=em(t,h),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];l[t]=r,Ko.keep(r)}if(u===o.length-1&&f){const e=this.testLoop(s,c,r);for(let t=0;t<n.length;++t){const r=n[t],a=e[t];Ko.keep(a),i["val_"+r]=a}}})),await _.onBatchEnd(u,l),Jh(l),this.stopTraining_)break}a.dispose()}if(await _.onEpochEnd(a,i),this.stopTraining_)break}return await _.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return Xf(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],a=this.makeTrainFunction()(r.concat(i)),o=[];for(const e of a){const t=await e.data();o.push(t[0])}return Ko.dispose(a),rm(n[0],e),rm(n[1],t),Wd(o)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let e=0;e<r.length;++e)n&&!r[e].trainable||t.push({name:r[e].originalName,tensor:i[e]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=Ko.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Ko.memory().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=Yd(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>Yd(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Yd(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Yd(Of(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>Yd(Of(e))));{const e={};for(const t in this.metrics)e[t]=Yd(Of(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=uf(jf(e.optimizer_config));let n,r;if("string"==typeof e.loss)n=Kd(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>Kd(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=Kd(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>Kd(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=Kd(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"==typeof e){const t=Ko.io.getSaveHandlers(e);if(0===t.length)throw new $d(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new $d(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new $d("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await Ko.io.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${Vf}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:i}=await Ko.io.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...i),n.data=Ko.io.concatenateArrayBuffers([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;Pf(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){Pf(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}cm.className="Model",Ko.serialization.registerClass(cm);class um extends cm{}um.className="Functional",Ko.serialization.registerClass(um);class lm extends cm{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:dp("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new $d(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof lm||e instanceof cm;let n;if(t){if(n=e,1!==n.outputs.length)throw new $d("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new $d("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new $d("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new $d("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new Ph({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new $d(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new $d("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Rh(this.outputs[0])}this.inboundNodes=[],new Nh({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Ud(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(bh(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cm({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new zd("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new zd("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new zd("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new zd("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let i,a={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new $d("Legacy serialization format not supported yet.");i=t}else Ko.util.assert(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),i=t.layers,delete t.layers,a=t;const o=new e(a);if(!(o instanceof lm))throw new jd(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const e of i){const t=uf(e,void 0,r);r&&t.setFastWeightInitDuringBuild(!0),o.add(t)}return o}set stopTraining(e){if(null==this.model)throw new $d("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new $d("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}lm.className="Sequential",Ko.serialization.registerClass(lm);class dm extends Ko.serialization.Serializable{getConfig(){return{}}}class pm extends dm{apply(e,t=1){return function(e,t=1){if(1!==t)throw new jd(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Ko.elu(e)}(e,t)}}pm.className="elu",Ko.serialization.registerClass(pm);class hm extends dm{apply(e){return Ko.selu(e)}}hm.className="selu",Ko.serialization.registerClass(hm);class fm extends dm{apply(e){return Ko.relu(e)}}fm.className="relu",Ko.serialization.registerClass(fm);class mm extends dm{apply(e){return(0,Ko.tidy)((()=>Ko.minimum(6,Ko.relu(e))))}}mm.className="relu6",Ko.serialization.registerClass(mm);class gm extends dm{apply(e){return e}}gm.className="linear",Ko.serialization.registerClass(gm);class _m extends dm{apply(e){return Ko.sigmoid(e)}}_m.className="sigmoid",Ko.serialization.registerClass(_m);class vm extends dm{apply(e){return function(e){return(0,Ko.tidy)((()=>{const t=Ko.add(.5,Ko.mul(.2,e));return Ko.clipByValue(t,0,1)}))}(e)}}vm.className="hardSigmoid",Ko.serialization.registerClass(vm);class ym extends dm{apply(e){return Ko.softplus(e)}}ym.className="softplus",Ko.serialization.registerClass(ym);class bm extends dm{apply(e){return function(e){return(0,Ko.tidy)((()=>Ko.div(e,Ko.add(Ko.abs(e),1))))}(e)}}bm.className="softsign",Ko.serialization.registerClass(bm);class wm extends dm{apply(e){return Ko.tanh(e)}}wm.className="tanh",Ko.serialization.registerClass(wm);class km extends dm{apply(e,t=-1){return Ko.softmax(e,t)}}km.className="softmax",Ko.serialization.registerClass(km);class xm extends dm{apply(e,t=-1){return Ko.logSoftmax(e,t)}}xm.className="logSoftmax",Ko.serialization.registerClass(xm);class Sm extends dm{apply(e){return(0,Ko.tidy)((()=>Ko.tidy((()=>{const t=Math.sqrt(2),n=Ko.mul(.5,Ko.add(1,Ko.erf(Ko.div(e,t))));return Ko.mul(e,n)}))))}}Sm.className="gelu",Ko.serialization.registerClass(Sm);class Tm extends dm{apply(e){return(0,Ko.tidy)((()=>Ko.mul(.5,Ko.mul(e,Ko.add(1,Ko.tanh(Ko.mul(Ko.sqrt(Ko.div(2,Math.PI)),Ko.add(e,Ko.mul(.044715,Ko.pow(e,3))))))))))}}Tm.className="gelu_new",Ko.serialization.registerClass(Tm);class Cm extends dm{apply(e){return(0,Ko.tidy)((()=>Ko.mul(e,Ko.tanh(Ko.softplus(e)))))}}Cm.className="mish",Ko.serialization.registerClass(Cm);class Em extends dm{apply(e,t=1){return(0,Ko.tidy)((()=>Ko.mul(Ko.sigmoid(Ko.mul(e,t)),e)))}}function Im(e){return e.getClassName()}function Nm(e,t={}){return Zd(e,Ko.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function Am(e){if(null==e){const e={className:"linear",config:{}};return Nm(e)}if("string"==typeof e){const t={};return t.className=e,t.config={},Nm(t)}return e instanceof dm?e:Nm(e)}function Om(e){if(null!=e&&"object"!=typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}Em.className="swish",Ko.serialization.registerClass(Em);class Rm extends Ko.serialization.Serializable{}class Pm extends Rm{constructor(e){super(),Om(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return(0,Ko.tidy)((()=>{let t=(0,Ko.zeros)([1]);return this.hasL1&&(t=(0,Ko.add)(t,(0,Ko.sum)(Ko.mul(this.l1,(0,Ko.abs)(e))))),this.hasL2&&(t=(0,Ko.add)(t,(0,Ko.sum)(Ko.mul(this.l2,Gp(e))))),Ko.reshape(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Pm.className="L1L2",Ko.serialization.registerClass(Pm);const Dm={l1l2:"L1L2"};function Lm(e){return Qd(e)}function Mm(e,t={}){return Zd(e,Ko.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function Fm(e){if(null==e)return null;if("string"==typeof e){return Mm({className:e in Dm?Dm[e]:e,config:{}})}return e instanceof Rm?e:Mm(e)}class zm extends Oh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=yh(e);let n=(0,Ko.relu)(e);return null!=this.maxValue&&(n=(0,Ko.clipByValue)(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}zm.className="ReLU",Ko.serialization.registerClass(zm);class $m extends Oh{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=yh(e);return(0,Ko.leakyRelu)(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}$m.className="LeakyReLU",Ko.serialization.registerClass($m);class jm extends Oh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=gh(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Fm(e.alphaRegularizer),this.alphaConstraint=Xh(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new $d(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=bh(e)).slice(1);if(null!=this.sharedAxes)for(const e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new Ch({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=yh(e),(0,Ko.prelu)(e,this.alpha.read())}getConfig(){const e={alphaInitializer:mh(this.alphaInitializer),alphaRegularizer:Lm(this.alphaRegularizer),alphaConstraint:Yh(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}jm.className="PReLU",Ko.serialization.registerClass(jm);class Bm extends Oh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new jd(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=yh(e);return(0,Ko.elu)(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}Bm.className="ELU",Ko.serialization.registerClass(Bm);class Vm extends Oh{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=yh(e);return(0,Ko.mul)(n,(0,Ko.cast)((0,Ko.greater)(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}Vm.className="ThresholdedReLU",Ko.serialization.registerClass(Vm);class Um extends Oh{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new km).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return(0,Ko.tidy)((()=>{let n=yh(e);const r=t.mask;if(null!=r){const e=(0,Ko.mul)((0,Ko.sub)((0,Ko.ones)(n.shape),(0,Ko.cast)(r,n.dtype)),(0,Ko.scalar)(-1e9));n=(0,Ko.add)(n,e)}return this.axis instanceof Array?this.axis.length>1?(0,Ko.exp)((0,Ko.sub)(n,(0,Ko.logSumExp)(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Gm(e,t,n){if("number"==typeof e)return Ud(e,t);if(e.length!==t)throw new $d(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let i=0;i<t;++i){const a=e[i];if((r=a)!==parseInt(r.toString(),10))throw new $d(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${a}`)}return e;var r}function qm(e,t,n,r,i=1){if(null==e)return e;let a;return a="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((a+r-1)/r)}function Wm(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Np([n-t,0]);else{if("same"!==r)throw new $d(`Unsupport padding mode: ${r}.`);e*=t}return e}function Hm(e,t){return(0,Ko.tidy)((()=>(vp(t),"channelsFirst"===t?Ko.transpose(e,[0,2,3,1]):e)))}function Ym(e,t){return(0,Ko.tidy)((()=>(vp(t),"channelsFirst"===t?Ko.transpose(e,[0,2,3,4,1]):e)))}function Km(e,t,n,r=1,i="valid",a,o=1){return(0,Ko.tidy)((()=>{if(null==a&&(a="channelsLast"),vp(a),3!==e.shape.length)throw new $d(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new $d(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new $d(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===a&&(e=Ko.transpose(e,[0,2,1])),"causal"===i)throw new jd("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=Ko.conv1d(e,t,r,"same"===i?"same":"valid","NWC",o);return null!=n&&(s=Wp(s,n)),s}))}function Xm(e,t,n,r=[1,1],i="valid",a,o,s=null){return(0,Ko.tidy)((()=>{if(null==a&&(a="channelsLast"),vp(a),3!==e.rank&&4!==e.rank)throw new $d(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new $d(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let c=Hm(e,a);if("causal"===i)throw new jd("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=Ko.fused.conv2d({x:c,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(c=Ko.transpose(c,[0,3,1,2])),c}))}function Qm(e,t,n,r=[1,1,1],i="valid",a,o){return(0,Ko.tidy)((()=>{if(null==a&&(a="channelsLast"),vp(a),4!==e.rank&&5!==e.rank)throw new $d(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new $d(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=Ym(e,a);if("causal"===i)throw new jd("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Ko.conv3d(s,t,r,"same"===i?"same":"valid","NDHWC",o),null!=n&&(s=Wp(s,n)),"channelsFirst"===a&&(s=Ko.transpose(s,[0,4,1,2,3])),s}))}Um.className="Softmax",Ko.serialization.registerClass(Um);class Jm extends Oh{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Jm.verifyArgs(t),this.rank=e,ap(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new jd(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Gm(t.kernelSize,e,"kernelSize"),this.strides=Gm(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,yp(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,vp(this.dataFormat),this.activation=Am(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=gh(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Xh(t.biasConstraint),this.biasRegularizer=Fm(t.biasRegularizer),this.activityRegularizer=Fm(t.activityRegularizer),this.dilationRate=Gm(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new $d(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new $d(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new $d(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(Gd("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!ip(e.kernelSize,"number",1,3))throw new $d(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Im(this.activation),useBias:this.useBias,biasInitializer:mh(this.biasInitializer),biasRegularizer:Lm(this.biasRegularizer),activityRegularizer:Lm(this.activityRegularizer),biasConstraint:Yh(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Zm extends Jm{constructor(e,t){super(e,t),this.kernel=null,Zm.verifyArgs(t),this.filters=t.filters,ap(this.filters,"filters"),this.kernelInitializer=gh(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Xh(t.kernelConstraint),this.kernelRegularizer=Fm(t.kernelRegularizer)}build(e){e=bh(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new $d(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{let t;e=yh(e);const n=null==this.bias?null:this.bias.read(),r=sp(this.activation.getClassName());if(null!=r&&2===this.rank)t=Xm(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=Km(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=Xm(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new jd("convolutions greater than 3D are not implemented yet.");t=Qm(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=bh(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let e=0;e<n.length;++e){const r=qm(n[e],this.kernelSize[e],this.padding,this.strides[e],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[e]);t.push(r)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:mh(this.kernelInitializer),kernelRegularizer:Lm(this.kernelRegularizer),kernelConstraint:Yh(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new $d(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class eg extends Zm{constructor(e){super(2,e),eg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!ip(e.kernelSize,"number",1,2))throw new $d(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}eg.className="Conv2D",Ko.serialization.registerClass(eg);class tg extends Zm{constructor(e){super(3,e),tg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new $d(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}tg.className="Conv3D",Ko.serialization.registerClass(tg);class ng extends eg{constructor(e){if(super(e),this.inputSpec=[new Ch({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new $d(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=bh(e)).length)throw new $d("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new $d("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ch({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Ko.tidy((()=>{let t=yh(e);if(4!==t.shape.length)throw new $d(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,a;"channelsFirst"===this.dataFormat?(i=2,a=3):(i=1,a=2);const o=n[i],s=n[a],c=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],d=this.strides[1],p=[r,Wm(o,l,c,this.padding),Wm(s,d,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Ko.transpose(t,[0,2,3,1]));let h=Ko.conv2dTranspose(t,this.kernel.read(),p,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=Ko.transpose(h,[0,3,1,2])),null!=this.bias&&(h=Wp(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h}))}computeOutputShape(e){const t=(e=bh(e)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],c=this.strides[1];return t[n]=this.filters,t[r]=Wm(t[r],s,a,this.padding),t[i]=Wm(t[i],c,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}ng.className="Conv2DTranspose",Ko.serialization.registerClass(ng);class rg extends tg{constructor(e){if(super(e),this.inputSpec=[new Ch({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new $d(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=bh(e)).length)throw new $d("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new $d("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ch({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Ko.tidy((()=>{let t=yh(e);if(5!==t.shape.length)throw new $d(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,a,o;"channelsFirst"===this.dataFormat?(o=2,i=3,a=4):(o=1,i=2,a=3);const s=n[o],c=n[i],u=n[a],l=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],h=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,Wm(s,h,l,this.padding),Wm(c,f,d,this.padding),Wm(u,m,p,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Ko.transpose(t,[0,2,3,4,1]));let _=Ko.conv3dTranspose(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(_=Ko.transpose(_,[0,4,1,2,3])),null!==this.bias&&(_=Wp(_,this.bias.read(),this.dataFormat)),null!==this.activation&&(_=this.activation.apply(_)),_}))}computeOutputShape(e){const t=(e=bh(e)).slice();let n,r,i,a;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,a=4):(n=4,r=1,i=2,a=3);const o=this.kernelSize[0],s=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],l=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=Wm(t[r],u,o,this.padding),t[i]=Wm(t[i],l,s,this.padding),t[a]=Wm(t[a],d,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}rg.className="Conv3DTranspose",Ko.serialization.registerClass(rg);class ig extends Zm{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new $d("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new $d("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new $d(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=gh(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Fm(t.depthwiseRegularizer),this.depthwiseConstraint=Xh(t.depthwiseConstraint),this.pointwiseInitializer=gh(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Fm(t.pointwiseRegularizer),this.pointwiseConstraint=Xh(t.pointwiseConstraint)}build(e){if((e=bh(e)).length<this.rank+2)throw new $d(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new $d(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let e=0;e<this.rank;++e)i.push(1);i.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Ch({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{let t;if(e=yh(e),1===this.rank)throw new jd("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Ko.transpose(e,[0,2,3,1])),t=Ko.separableConv2d(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=Wp(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Ko.transpose(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=mh(this.depthwiseInitializer),e.pointwiseInitializer=mh(this.pointwiseInitializer),e.depthwiseRegularizer=Lm(this.depthwiseRegularizer),e.pointwiseRegularizer=Lm(this.pointwiseRegularizer),e.depthwiseConstraint=Yh(this.depthwiseConstraint),e.pointwiseConstraint=Yh(this.pointwiseConstraint),e}}ig.className="SeparableConv";class ag extends ig{constructor(e){super(2,e)}}ag.className="SeparableConv2D",Ko.serialization.registerClass(ag);class og extends Zm{constructor(e){super(1,e),og.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!ip(e.kernelSize,"number",1,1))throw new $d(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}og.className="Conv1D",Ko.serialization.registerClass(og);class sg extends Oh{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return(0,Ko.tidy)((()=>{if(e=yh(e),"channelsLast"===this.dataFormat){const t=Fp(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Fp(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=Fp(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Fp(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}sg.className="Cropping2D",Ko.serialization.registerClass(sg);class cg extends Oh{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,vp(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,rp(hp,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return Ko.tidy((()=>{let t=yh(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Ko.transpose(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?Ko.image.resizeNearestNeighbor(t,[e,r]):Ko.image.resizeBilinear(t,[e,r]);return Ko.transpose(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?Ko.image.resizeNearestNeighbor(t,[e,r]):Ko.image.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}cg.className="UpSampling2D",Ko.serialization.registerClass(cg);class ug extends Jm{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=gh(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Xh(e.depthwiseConstraint),this.depthwiseRegularizer=Fm(e.depthwiseRegularizer)}build(e){if((e=bh(e)).length<4)throw new $d(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new $d(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{let t=function(e,t,n=[1,1],r="valid",i,a){return(0,Ko.tidy)((()=>{null==i&&(i="channelsLast"),vp(i);let o=Hm(e,i);if(4!==e.rank)throw new $d(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new $d(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return o=Ko.depthwiseConv2d(o,t,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===i&&(o=Ko.transpose(o,[0,3,1,2])),o}))}(e=yh(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=Wp(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=bh(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=qm(t,this.kernelSize[0],this.padding,this.strides[0]),a=qm(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,a]:[e[0],i,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=mh(this.depthwiseInitializer),e.depthwiseRegularizer=Lm(this.depthwiseRegularizer),e.depthwiseConstraint=Yh(this.depthwiseRegularizer),e}}function lg(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new $d("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function dg(e,t,n,r=!1,i,a,o=!1,s=!1){return Ko.tidy((()=>{const c=t.shape.length;if(c<3)throw new $d(`Input should be at least 3D, but is ${c}D.`);const u=[1,0].concat(Ap(2,c));if(t=Ko.transpose(t,u),null!=a)throw new jd("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=Ko.cast(Ko.cast(i,"bool"),"float32")).rank===c-1&&(i=Ko.expandDims(i,-1)),i=Ko.transpose(i,u)),r&&(t=Ko.reverse(t,0),null!=i&&(i=Ko.reverse(i,0)));const l=[];let d,p=n;const h=t.shape[0],f=Ko.unstack(t);let m,g;null!=i&&(m=Ko.unstack(i));for(let t=0;t<h;++t){const n=f[t],r=Ko.tidy((()=>e(n,p)));if(null==i)d=r[0],p=r[1];else{const e=Ko.tidy((()=>{const e=m[t],n=Ko.sub(Ko.onesLike(e),e),i=Ko.add(Ko.mul(r[0],e),Ko.mul(p[0],n)),a=p.map(((t,i)=>Ko.add(Ko.mul(r[1][i],e),Ko.mul(t,n))));return{output:i,newStates:a}}));d=e.output,p=e.newStates}s&&l.push(d)}if(s){const e=1;g=Ko.stack(l,e)}return[d,g,p]}))}ug.className="DepthwiseConv2D",Ko.serialization.registerClass(ug);class pg extends Oh{constructor(e){let t;if(super(e),null==e.cell)throw new $d("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new bg({cells:e.cell}):e.cell,null==t.stateSize)throw new $d("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ch({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return Ap(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){_h(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return Ko.tidy((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new jd("Constants support is not implemented in RNN yet.");_h(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Ch({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let i;if(this.cell.build(r),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Ko.util.arraysEqual(this.stateSpec.map((e=>e.shape[e.shape.length-1])),i))throw new $d(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map((e=>new Ch({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e,t=!1){(0,Ko.tidy)((()=>{if(!this.stateful)throw new Fd("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new $d("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ko.zeros([n,e]))):this.states_=[Ko.zeros([n,this.cell.stateSize])];else if(null==e)Ko.dispose(this.states_),null!=this.keptStates&&(Ko.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ko.zeros([n,e]))):this.states_[0]=Ko.zeros([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new $d(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):Ko.dispose(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,i];if(!Ko.util.arraysEqual(r.shape,a))throw new $d(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>Ko.keep(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=lg(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let a=[],o=[];if(null!=n){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new Ch({shape:e.shape}));o=o.concat(this.stateSpec)}null!=r&&(t.constants=r,a=a.concat(r),this.numConstants=r.length);if(a[0]instanceof Eh){const n=[e].concat(a),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return(0,Ko.tidy)((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let i=null==t?null:t.initialState;e=yh(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new $d(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},s=dg(((e,t)=>{const n=this.cell.call([e].concat(t),o);return[n[0],n.slice(1)]}),e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),c=s[0],u=s[1],l=s[2];this.stateful&&this.resetStates(l,r);const d=this.returnSequences?u:c;return this.returnState?[d].concat(l):d}))}getInitialState(e){return(0,Ko.tidy)((()=>{let t=Ko.zeros(e.shape);return t=Ko.sum(t,[1,2]),t=Dp(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?jp(t,[1,e]):t)):this.cell.stateSize>1?[jp(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===pg.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t,n={}){const r=uf(t.cell,n);return new e(Object.assign(t,{cell:r}))}}pg.className="RNN",Ko.serialization.registerClass(pg);class hg extends Oh{}class fg extends hg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ap(this.units,"units"),this.activation=Am(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=gh(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gh(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gh(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fm(e.kernelRegularizer),this.recurrentRegularizer=Fm(e.recurrentRegularizer),this.biasRegularizer=Fm(e.biasRegularizer),this.kernelConstraint=Xh(e.kernelConstraint),this.recurrentConstraint=Xh(e.recurrentConstraint),this.biasConstraint=Xh(e.biasConstraint),this.dropout=Ip([1,Np([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ip([1,Np([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bh(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{if(2!==e.length)throw new $d(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wg({ones:()=>Ko.onesLike(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wg({ones:()=>Ko.onesLike(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;i=Vp(null!=a?Ko.mul(e,a):e,this.kernel.read()),null!=this.bias&&(i=Wp(i,this.bias.read())),null!=o&&(n=Ko.mul(n,o));let s=Ko.add(i,Vp(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Im(this.activation),useBias:this.useBias,kernelInitializer:mh(this.kernelInitializer),recurrentInitializer:mh(this.recurrentInitializer),biasInitializer:mh(this.biasInitializer),kernelRegularizer:Lm(this.kernelRegularizer),recurrentRegularizer:Lm(this.recurrentRegularizer),biasRegularizer:Lm(this.biasRegularizer),activityRegularizer:Lm(this.activityRegularizer),kernelConstraint:Yh(this.kernelConstraint),recurrentConstraint:Yh(this.recurrentConstraint),biasConstraint:Yh(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}fg.className="SimpleRNNCell",Ko.serialization.registerClass(fg);class mg extends pg{constructor(e){e.cell=new fg(e),super(e)}call(e,t){return(0,Ko.tidy)((()=>{null!=this.cell.dropoutMask&&(Ko.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ko.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return new e(t)}}mg.className="SimpleRNN",Ko.serialization.registerClass(mg);class gg extends hg{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new $d("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ap(this.units,"units"),this.activation=Am(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Am(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=gh(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gh(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gh(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fm(e.kernelRegularizer),this.recurrentRegularizer=Fm(e.recurrentRegularizer),this.biasRegularizer=Fm(e.biasRegularizer),this.kernelConstraint=Xh(e.kernelConstraint),this.recurrentConstraint=Xh(e.recurrentConstraint),this.biasConstraint=Xh(e.biasConstraint),this.dropout=Ip([1,Np([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ip([1,Np([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=bh(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{if(2!==e.length)throw new $d(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wg({ones:()=>Ko.onesLike(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wg({ones:()=>Ko.onesLike(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,s,c;0<this.dropout&&this.dropout<1&&(e=Ko.mul(e,i[0]));let u=Vp(e,this.kernel.read());this.useBias&&(u=Wp(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ko.mul(r,a[0]));const l=this.recurrentKernel.read(),[d,p]=Ko.split(l,[2*this.units,this.units],l.rank-1),h=Vp(r,d),[f,m,g]=Ko.split(u,3,u.rank-1),[_,v]=Ko.split(h,2,h.rank-1);o=this.recurrentActivation.apply(Ko.add(f,_)),s=this.recurrentActivation.apply(Ko.add(m,v));const y=Vp(Ko.mul(s,r),p);c=this.activation.apply(Ko.add(g,y));const b=Ko.add(Ko.mul(o,r),Ko.mul(Ko.add(1,Ko.neg(o)),c));return[b,b]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Im(this.activation),recurrentActivation:Im(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mh(this.kernelInitializer),recurrentInitializer:mh(this.recurrentInitializer),biasInitializer:mh(this.biasInitializer),kernelRegularizer:Lm(this.kernelRegularizer),recurrentRegularizer:Lm(this.recurrentRegularizer),biasRegularizer:Lm(this.biasRegularizer),activityRegularizer:Lm(this.activityRegularizer),kernelConstraint:Yh(this.kernelConstraint),recurrentConstraint:Yh(this.recurrentConstraint),biasConstraint:Yh(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}gg.className="GRUCell",Ko.serialization.registerClass(gg);class _g extends pg{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new gg(e),super(e)}call(e,t){return(0,Ko.tidy)((()=>{null!=this.cell.dropoutMask&&(Ko.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ko.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}_g.className="GRU",Ko.serialization.registerClass(_g);class vg extends hg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ap(this.units,"units"),this.activation=Am(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Am(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=gh(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gh(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gh(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Fm(e.kernelRegularizer),this.recurrentRegularizer=Fm(e.recurrentRegularizer),this.biasRegularizer=Fm(e.biasRegularizer),this.kernelConstraint=Xh(e.kernelConstraint),this.recurrentConstraint=Xh(e.recurrentConstraint),this.biasConstraint=Xh(e.biasConstraint),this.dropout=Ip([1,Np([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ip([1,Np([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=bh(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends Qp{apply(t,r){const i=e.apply([n]),a=(new Zp).apply([n]),o=e.apply([2*n]);return $p($p(i,a),o)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new $d(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wg({ones:()=>Ko.onesLike(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wg({ones:()=>Ko.onesLike(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,c,u,l;0<this.dropout&&this.dropout<1&&(e=Ko.mul(e,a[0]));let d=Vp(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ko.mul(r,o[0])),d=Ko.add(d,Vp(r,this.recurrentKernel.read())),this.useBias&&(d=Wp(d,this.bias.read()));const[p,h,f,m]=Ko.split(d,4,d.rank-1);s=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(h),u=Ko.add(Ko.mul(c,i),Ko.mul(s,this.activation.apply(f))),l=this.recurrentActivation.apply(m);const g=Ko.mul(l,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Im(this.activation),recurrentActivation:Im(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mh(this.kernelInitializer),recurrentInitializer:mh(this.recurrentInitializer),biasInitializer:mh(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Lm(this.kernelRegularizer),recurrentRegularizer:Lm(this.recurrentRegularizer),biasRegularizer:Lm(this.biasRegularizer),activityRegularizer:Lm(this.activityRegularizer),kernelConstraint:Yh(this.kernelConstraint),recurrentConstraint:Yh(this.recurrentConstraint),biasConstraint:Yh(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}vg.className="LSTMCell",Ko.serialization.registerClass(vg);class yg extends pg{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vg(e),super(e)}call(e,t){return(0,Ko.tidy)((()=>{null!=this.cell.dropoutMask&&(Ko.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ko.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}yg.className="LSTM",Ko.serialization.registerClass(yg);class bg extends hg{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return(0,Ko.tidy)((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const s=this.cells[o];n=r[o],a=0===o?[e[0]].concat(n):[a[0]].concat(n),a=s.call(a,t),i.push(a.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[a[0]].concat(n)}))}build(e){let t;_h(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{kp(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t,n={}){const r=[];for(const e of t.cells)r.push(uf(e,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return Sh(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}Th(t)}}function wg(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=e,o=()=>null!=a?a(t(),n):Hp(t(),n),s=()=>Yp(o,t,r);if(!i||i<=1)return Ko.keep(s().clone());return Array(i).fill(void 0).map(s).map((e=>Ko.keep(e.clone())))}bg.className="StackedRNNCells",Ko.serialization.registerClass(bg);var kg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class xg extends pg{constructor(e){if(e.unroll)throw new jd("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new jd("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ch({ndim:5})]}call(e,t){return Ko.tidy((()=>{if(null!=this.cell.dropoutMask&&(Ko.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ko.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new $d("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Ko.tidy((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=Ko.zeros(i);return Array.isArray(t)?Array(t.length).fill(a):[a]}))}resetStates(e,t=!1){Ko.tidy((()=>{if(!this.stateful)throw new Fd("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(null==n[0])throw new $d("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ko.zeros(i))):this.states_=[Ko.zeros(i)];else if(null==e)Ko.dispose(this.states_),null!=this.keptStates&&(Ko.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ko.zeros(i))):this.states_[0]=Ko.zeros(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new $d(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):Ko.dispose(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=i;if(!Ko.util.arraysEqual(n.shape,r))throw new $d(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>Ko.keep(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:a,dilationRate:o}=this.cell,s="channelsFirst"===t,c=e[s?3:2],u=e[s?4:3],l=qm(c,r[0],i,a[0],o[0]),d=qm(u,r[1],i,a[1],o[1]);return[...e.slice(0,2),...s?[n,l,d]:[l,d,n]]}}xg.className="ConvRNN2D";class Sg extends vg{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,ap(this.filters,"filters"),this.kernelSize=Gm(n,2,"kernelSize"),this.kernelSize.forEach((e=>ap(e,"kernelSize"))),this.strides=Gm(r||1,2,"strides"),this.strides.forEach((e=>ap(e,"strides"))),this.padding=i||"valid",yp(this.padding),this.dataFormat=a||"channelsLast",vp(this.dataFormat),this.dilationRate=Gm(o||1,2,"dilationRate"),this.dilationRate.forEach((e=>ap(e,"dilationRate")))}build(e){var t;e=bh(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new $d(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends Qp{apply(e,t){return zp([n.apply([r]),Ko.ones([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Ko.tidy((()=>{if(3!==e.length)throw new $d(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],i=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wg({ones:()=>Ko.onesLike(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=(e,t,n)=>t&&t[n]?Ko.mul(t[n],e):e;let c=s(r,o,0),u=s(r,o,1),l=s(r,o,2),d=s(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wg({ones:()=>Ko.onesLike(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let h=s(i,p,0),f=s(i,p,1),m=s(i,p,2),g=s(i,p,3);const[_,v,y,b]=Ko.split(this.kernel.read(),4,3),[w,k,x,S]=this.useBias?Ko.split(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,_,w,this.padding),u=this.inputConv(u,v,k,this.padding),l=this.inputConv(l,y,x,this.padding),d=this.inputConv(d,b,S,this.padding);const[T,C,E,I]=Ko.split(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,T),f=this.recurrentConv(f,C),m=this.recurrentConv(m,E),g=this.recurrentConv(g,I);const N=this.recurrentActivation.apply(Ko.add(c,h)),A=this.recurrentActivation.apply(Ko.add(u,f)),O=Ko.add(Ko.mul(A,a),Ko.mul(N,this.activation.apply(Ko.add(l,m)))),R=Ko.mul(this.recurrentActivation.apply(Ko.add(d,g)),this.activation.apply(O));return[R,R,O]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=kg(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const i=Ko.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Wp(i,n,this.dataFormat):i}recurrentConv(e,t){return Ko.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}Sg.className="ConvLSTM2DCell",Ko.serialization.registerClass(Sg);class Tg extends xg{constructor(e){const t=new Sg(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Tg.className="ConvLSTM2D",Ko.serialization.registerClass(Tg);class Cg extends Oh{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return Yp((()=>Hp(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}Cg.className="Dropout",Ko.serialization.registerClass(Cg);class Eg extends Cg{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Eg.className="SpatialDropout1D",Ko.serialization.registerClass(Eg);class Ig extends Oh{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,ap(this.units,"units"),this.activation=Am(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=gh(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=gh(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Xh(e.kernelConstraint),this.biasConstraint=Xh(e.biasConstraint),this.kernelRegularizer=Fm(e.kernelRegularizer),this.biasRegularizer=Fm(e.biasRegularizer),this.activityRegularizer=Fm(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=bh(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=bh(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e),r=sp(this.activation.getClassName());let i;return null!=r?i=Vp(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Vp(n,this.kernel.read()),null!=this.bias&&(i=Wp(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i}))}getConfig(){const e={units:this.units,activation:Im(this.activation),useBias:this.useBias,kernelInitializer:mh(this.kernelInitializer),biasInitializer:mh(this.biasInitializer),kernelRegularizer:Lm(this.kernelRegularizer),biasRegularizer:Lm(this.biasRegularizer),activityRegularizer:Lm(this.activityRegularizer),kernelConstraint:Yh(this.kernelConstraint),biasConstraint:Yh(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Ig.className="Dense",Ko.serialization.registerClass(Ig);class Ng extends Oh{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=bh(e);for(const t of e.slice(1))if(null==t)throw new $d(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ep(e,1)]}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);let n=yh(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=(0,Ko.transpose)(n,e)}return function(e){if(e.rank<=1)throw new $d(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Ep(e.shape,1)];return Ko.reshape(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}Ng.className="Flatten",Ko.serialization.registerClass(Ng);class Ag extends Oh{constructor(e){super(e),this.supportsMasking=!0,this.activation=Am(e.activation)}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e);return this.activation.apply(n)}))}getConfig(){const e={activation:Im(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Ag.className="Activation",Ko.serialization.registerClass(Ag);class Og extends Oh{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return(0,Ko.tidy)((()=>{return e=yh(e),t=e,n=this.n,(0,Ko.tidy)((()=>{if(2!==t.shape.length)throw new $d(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return jp(Dp(t,1),[1,n,1])}));var t,n}))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Og.className="RepeatVector",Ko.serialization.registerClass(Og);class Rg extends Oh{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,a=null;for(let e=0;e<r.length;++e){const t=r[e];if(this.isUnknown(t)){if(null!==a)throw new $d("Can only specifiy one unknown dimension.");a=e}else i*=t}const o=Ep(e);if(null!==a){if(0===i||o%i!=0)throw new $d(n);r[a]=o/i}else if(o!==i)throw new $d(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return(0,Ko.reshape)(n,i)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Rg.className="Reshape",Ko.serialization.registerClass(Rg);class Pg extends Oh{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Ap(1,e.dims.length+1);if(!Ko.util.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ch({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=bh(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return(0,Ko.transpose)(yh(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Pg.className="Permute",Ko.serialization.registerClass(Pg);class Dg extends Oh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=yh(e);return(0,Ko.any)((0,Ko.notEqual)(n,this.maskValue),-1)}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e),r=(0,Ko.any)((0,Ko.notEqual)(n,this.maskValue),-1,!0);return(0,Ko.mul)(n,(0,Ko.cast)(r,n.dtype))}))}}Dg.className="Masking",Ko.serialization.registerClass(Dg);class Lg extends Oh{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Hd(e.inputLength))}this.inputDim=e.inputDim,ap(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ap(this.outputDim,"outputDim"),this.embeddingsInitializer=gh(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Fm(e.embeddingsRegularizer),this.activityRegularizer=Fm(e.activityRegularizer),this.embeddingsConstraint=Xh(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return(0,Ko.tidy)((()=>this.maskZero?(e=yh(e),(0,Ko.notEqual)(e,(0,Ko.zerosLike)(e))):null))}computeOutputShape(e){if(e=bh(e),null==this.inputLength)return[...e,this.outputDim];const t=Hd(this.inputLength);if(t.length!==e.length-1)throw new $d(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const i=t[r],a=e[r+1];if(null!=i&&null!=a&&i!==a)throw new $d(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);let n=yh(e);"int32"!==n.dtype&&(n=Pp(n,"int32"));const r=Up(this.embeddings.read(),(0,Ko.reshape)(n,[n.size]));return(0,Ko.reshape)(r,bh(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:mh(this.embeddingsInitializer),embeddingsRegularizer:Lm(this.embeddingsRegularizer),activityRegularizer:Lm(this.activityRegularizer),embeddingsConstraint:Yh(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}Lg.className="Embedding",Ko.serialization.registerClass(Lg);class Mg extends Oh{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new jd}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],a=t[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new $d("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[bh(e)]),e.length<2)throw new $d(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if(t=tp(t),t.length>1)throw new $d(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){const r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===tp(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return(0,Ko.tidy)((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=Np(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Dp(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const r of e){const e=r.rank;if(null==e){const e=r.shape,i=e[0],a=e.slice(1).concat([i]);let o=Ko.reshape(r,[i].concat(Ep(e.slice(1))));o=Ko.transpose(o,[1,0]),o=Ko.reshape(o,a),t.push(o),n=!0}else if(e>1){const i=Ap(1,e).concat([0]);t.push(Ko.transpose(r,i)),n=!0}else t.push(r)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=Ko.reshape(Ko.transpose(Ko.reshape(r,[-1,t]),[1,0]),n)}else if(i>1){const e=[i-1].concat(Ap(0,i-1));r=Ko.transpose(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(const t of e)null!=t&&null!==t[0]&&n.push(t[0]);return n=tp(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Ko.tidy((()=>{if(null==t)return null;if(!Array.isArray(t))throw new $d("`mask` should be an Array");if(!Array.isArray(e))throw new $d("`inputs` should be an Array");if(t.length!==e.length)throw new $d(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:Ko.expandDims(e,0))))[0];for(let e=1;e<t.length-1;++e)n=Ko.logicalAnd(n,t[e]);return n}))}}class Fg extends Mg{constructor(e){super(e)}mergeFunction(e){return(0,Ko.tidy)((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ko.add(t,e[n]);return t}))}}Fg.className="Add",Ko.serialization.registerClass(Fg);class zg extends Mg{constructor(e){super(e)}mergeFunction(e){return(0,Ko.tidy)((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ko.mul(t,e[n]);return t}))}}zg.className="Multiply",Ko.serialization.registerClass(zg);class $g extends Mg{constructor(e){super(e)}mergeFunction(e){return(0,Ko.tidy)((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ko.add(t,e[n]);return Ko.mul(1/e.length,t)}))}}$g.className="Average",Ko.serialization.registerClass($g);class jg extends Mg{constructor(e){super(e)}mergeFunction(e){return(0,Ko.tidy)((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Ko.maximum(t,e[n]);return t}))}}jg.className="Maximum",Ko.serialization.registerClass(jg);class Bg extends Mg{constructor(e){super(e)}mergeFunction(e){return(0,Ko.tidy)((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Ko.minimum(t,e[n]);return t}))}}Bg.className="Minimum",Ko.serialization.registerClass(Bg);class Vg extends Mg{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new $d("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const n of e)if(null!=n){t=!1;break}if(t)return;const n=[];for(let t=0;t<e.length;++t){const r=e[t].slice();r.splice(this.axis,1);let i=!1;for(const e of n)if(Ko.util.arraysEqual(e,r)){i=!0;break}i||n.push(r)}if(n.length>1)throw new $d("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return(0,Ko.tidy)((()=>zp(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new $d("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const e of t.slice(1)){if(null==n[r]||null==e[r]){n[r]=null;break}n[r]+=e[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new $d("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new $d("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new $d(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Ko.tidy((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let n=0;n<e.length;++n)null==t[n]?r.push(Ko.cast(Ko.onesLike(e[n]),"bool")):t[n].rank<e[n].rank?r.push(Ko.expandDims(t[n],-1)):r.push(t[n]);const i=Ko.concat(r,this.axis);return Ko.all(i,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Ug(e,t){for(;e<0;)e+=t;return e}Vg.className="Concatenate",Ko.serialization.registerClass(Vg);class Gg extends Mg{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Ko.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new jd("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new $d(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new $d(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>Ug(t,e[n].shape.length))):[Ug(this.axes,n.shape.length),Ug(this.axes,r.shape.length)],this.normalize&&(n=lf(n,t[0]),r=lf(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new jd("batchDot is not implemented for tensors of 4D or higher rank yet");if(Ko.util.assert(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),Ko.util.assert(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new jd("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);const a=n;return Ko.tidy((()=>{let n,o;if(r>i){n=r-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=Ko.reshape(t,t.shape.concat(e))}else if(i>r){n=i-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=Ko.reshape(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=a[0]===a[1]?Ko.sum(Ko.mul(e,t),a[0]):Ko.sum(Ko.mul(Ko.transpose(e,[1,0]),t),a[1]);else{const n=a[0]!==e.shape.length-1,r=a[1]===t.shape.length-1;o=Ko.matMul(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);o=Ko.squeeze(o,t)}return 1===o.shape.length&&(o=Ko.expandDims(o,1)),o}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Ug(this.axes,e.length),Ug(this.axes,t.length)],n}computeOutputShape(e){Ko.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new jd("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}Gg.className="Dot",Ko.serialization.registerClass(Gg);class qg extends Oh{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e);return Yp((()=>(0,Ko.add)(Bp(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}qg.className="GaussianNoise",Ko.serialization.registerClass(qg);class Wg extends Oh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t);const n=yh(e);if(this.rate>0&&this.rate<1){return Yp((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return(0,Ko.mul)(n,Bp(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}Wg.className="GaussianDropout",Ko.serialization.registerClass(Wg);class Hg extends Oh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||yh(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,Ko.tidy)((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=yh(e),r=-1.7580993408473766;let i=(0,Ko.greaterEqual)((0,Ko.randomUniform)(n),this.rate);i=Pp(i,"float32");const a=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-a*r*this.rate,s=(0,Ko.add)((0,Ko.mul)(t,i),(0,Ko.mul)((0,Ko.add)(i,-1),r));return(0,Ko.add)((0,Ko.mul)(s,a),o)};return Yp(r,(()=>yh(e)),t.training||!1)}return e}))}}function Yg(e,t,n,r,i,a=.001){let o;if(2===e.rank)o=Ko.batchNorm2d(e,t,n,r,i,a);else if(3===e.rank)o=Ko.batchNorm3d(e,t,n,r,i,a);else{if(4!==e.rank)throw new jd(`batchNormalization is not implemented for array of rank ${e.rank} yet`);o=Ko.batchNorm4d(e,t,n,r,i,a)}return o}function Kg(e,t,n,r,i=.001){return Ko.util.arraysEqual(r.slice().sort(),Ap(0,e.rank-1))?function(e,t,n,r,i=.001){return(0,Ko.tidy)((()=>{const a=Ko.moments(e,r),o=a.mean,s=a.variance;return[Yg(e,o,s,n,t,i),o,s]}))}(e,t,n,r,i):function(e,t,n,r,i=.001){return(0,Ko.tidy)((()=>{const a=Ko.moments(e,r),o=a.mean,s=a.variance,c=[];for(const t of Ap(0,e.rank))-1!==r.indexOf(t)?c.push(1):c.push(e.shape[t]);const u=(0,Ko.reshape)(o,c),l=(0,Ko.reshape)(s,c),d=null==t?null:(0,Ko.reshape)(t,c),p=null==n?null:(0,Ko.reshape)(n,c);return[Yg(e,u,l,p,d,i),o,s]}))}(e,t,n,r,i)}Hg.className="AlphaDropout",Ko.serialization.registerClass(Hg);class Xg extends Oh{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=gh(e.betaInitializer||"zeros"),this.gammaInitializer=gh(e.gammaInitializer||"ones"),this.movingMeanInitializer=gh(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=gh(e.movingVarianceInitializer||"ones"),this.betaConstraint=Xh(e.betaConstraint),this.gammaConstraint=Xh(e.gammaConstraint),this.betaRegularizer=Fm(e.betaRegularizer),this.gammaRegularizer=Fm(e.gammaRegularizer)}build(e){e=bh(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new $d(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ch({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,Ko.tidy)((()=>{const n=null!=t.training&&t.training,r=yh(e),i=r.shape,a=i.length,o=Ap(0,a),s=this.axis>=0?this.axis:this.axis+a;o.splice(s,1);const c=Ud(1,a);c[s]=i[s];const u=o.slice();u.sort();const l=!Ko.util.arraysEqual(u,Ap(0,a).slice(0,a-1));if(!n)return(()=>{if(l){const e=(0,Ko.reshape)(this.movingMean.read(),c),t=(0,Ko.reshape)(this.movingVariance.read(),c),n=this.center?(0,Ko.reshape)(this.beta.read(),c):null,i=this.scale?(0,Ko.reshape)(this.gamma.read(),c):null;return Yg(r,e,t,n,i,this.epsilon)}return Yg(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,h]=Kg(r,this.gamma.read(),this.beta.read(),o,this.epsilon),f=(e,t,n)=>{Ko.tidy((()=>{const r=1-n,i=e.read(),a=Ko.mul(Ko.sub(i,t),r);e.write(Ko.sub(i,a))}))};return(()=>{f(this.movingMean,p,this.momentum),f(this.movingVariance,h,this.momentum)})(),d}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mh(this.betaInitializer),gammaInitializer:mh(this.gammaInitializer),movingMeanInitializer:mh(this.movingMeanInitializer),movingVarianceInitializer:mh(this.movingVarianceInitializer),betaRegularizer:Lm(this.betaRegularizer),gammaRegularizer:Lm(this.gammaRegularizer),betaConstraint:Yh(this.betaConstraint),gammaConstraint:Yh(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Xg.className="BatchNormalization",Ko.serialization.registerClass(Xg);class Qg extends Oh{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=gh(e.betaInitializer||"zeros"),this.gammaInitializer=gh(e.gammaInitializer||"ones"),this.betaRegularizer=Fm(e.betaRegularizer),this.gammaRegularizer=Fm(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=bh(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(const e of this.axis)if(e<0||e>=t)throw new Error(`Invalid axis: ${e}`);if(this.axis.length!==tp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=yh(e),r=n.shape,i=r.length;return(0,Ko.tidy)((()=>{let{mean:e,variance:t}=(0,Ko.moments)(n,this.axis,!0);const a=Ud(1,i);for(const e of this.axis)a[e]=r[e];const o=e=>null!=e&&e.shape.length!==i?Ko.reshape(e,a):e;let s=this.scale?o(this.gamma.read()):null,c=this.center?o(this.beta.read()):null;const u=[],l=[];for(let e=0;e<i;++e)-1!==this.axis.indexOf(e)?(u.push(r[e]),l.push(1)):(u.push(1),l.push(r[e]));return e=Ko.tile(e,u),t=Ko.tile(t,u),null!=s&&(s=Ko.tile(s,l)),null!=c&&(c=Ko.tile(c,l)),Yg(n,e,t,c,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mh(this.betaInitializer),gammaInitializer:mh(this.gammaInitializer),betaRegularizer:Lm(this.betaRegularizer),gammaRegularizer:Lm(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Qg.className="LayerNormalization",Ko.serialization.registerClass(Qg);class Jg extends Oh{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new $d(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new $d(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new $d(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new Ch({ndim:4})]}computeOutputShape(e){let t,n;return e=bh(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return(0,Ko.tidy)((()=>{return t=yh(e),n=this.padding,r=this.dataFormat,(0,Ko.tidy)((()=>{if(4!==t.rank)throw new $d(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new $d("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new $d(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],Ko.pad(t,e)}));var t,n,r}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function Zg(e,t,n,r,i,a){return(0,Ko.tidy)((()=>{let o;vp(i),bp(a),yp(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),e=Hm(e,i);const s="same"===r?"same":"valid";return o="max"===a?Ko.maxPool(e,t,n,s):Ko.avgPool(e,t,n,s),"channelsFirst"===i&&(o=Ko.transpose(o,[0,3,1,2])),o}))}function e_(e,t,n,r,i,a){return(0,Ko.tidy)((()=>{let o;vp(i),bp(a),yp(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),e=Ym(e,i);const s="same"===r?"same":"valid";return o="max"===a?Ko.maxPool3d(e,t,n,s):Ko.avgPool3d(e,t,n,s),"channelsFirst"===i&&(o=Ko.transpose(o,[0,4,1,2,3])),o}))}Jg.className="ZeroPadding2D",Ko.serialization.registerClass(Jg);class t_ extends Oh{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new $d(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(ap(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new $d(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}ap(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,yp(this.padding),this.inputSpec=[new Ch({ndim:3})]}computeOutputShape(e){const t=qm((e=bh(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return(0,Ko.tidy)((()=>{this.invokeCallHook(e,t),e=Dp(yh(e),2);const n=this.poolingFunction(yh(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ko.squeeze(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class n_ extends t_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),Zg(e,t,n,r,i,"max")}}n_.className="MaxPooling1D",Ko.serialization.registerClass(n_);class r_ extends t_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),Zg(e,t,n,r,i,"avg")}}r_.className="AveragePooling1D",Ko.serialization.registerClass(r_);class i_ extends Oh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new $d(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ap(this.poolSize,"poolSize"),ap(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,vp(this.dataFormat),yp(this.padding),this.inputSpec=[new Ch({ndim:4})]}computeOutputShape(e){e=bh(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=qm(t,this.poolSize[0],this.padding,this.strides[0]),n=qm(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return(0,Ko.tidy)((()=>(this.invokeCallHook(e,t),this.poolingFunction(yh(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class a_ extends i_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),Zg(e,t,n,r,i,"max")}}a_.className="MaxPooling2D",Ko.serialization.registerClass(a_);class o_ extends i_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),Zg(e,t,n,r,i,"avg")}}o_.className="AveragePooling2D",Ko.serialization.registerClass(o_);class s_ extends Oh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new $d(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ap(this.poolSize,"poolSize"),ap(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,vp(this.dataFormat),yp(this.padding),this.inputSpec=[new Ch({ndim:5})]}computeOutputShape(e){e=bh(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=qm(t,this.poolSize[0],this.padding,this.strides[0]),n=qm(n,this.poolSize[1],this.padding,this.strides[1]),r=qm(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return(0,Ko.tidy)((()=>(this.invokeCallHook(e,t),this.poolingFunction(yh(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class c_ extends s_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),e_(e,t,n,r,i,"max")}}c_.className="MaxPooling3D",Ko.serialization.registerClass(c_);class u_ extends s_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return vp(i),yp(r),e_(e,t,n,r,i,"avg")}}u_.className="AveragePooling3D",Ko.serialization.registerClass(u_);class l_ extends Oh{constructor(e){super(e),this.inputSpec=[new Ch({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new jd}}class d_ extends l_{constructor(e){super(e||{})}call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e);return Ko.mean(t,1)}))}}d_.className="GlobalAveragePooling1D",Ko.serialization.registerClass(d_);class p_ extends l_{constructor(e){super(e||{})}call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e);return Ko.max(t,1)}))}}p_.className="GlobalMaxPooling1D",Ko.serialization.registerClass(p_);class h_ extends Oh{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,vp(this.dataFormat),this.inputSpec=[new Ch({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new jd}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class f_ extends h_{call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e);return"channelsLast"===this.dataFormat?Ko.mean(t,[1,2]):Ko.mean(t,[2,3])}))}}f_.className="GlobalAveragePooling2D",Ko.serialization.registerClass(f_);class m_ extends h_{call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e);return"channelsLast"===this.dataFormat?Ko.max(t,[1,2]):Ko.max(t,[2,3])}))}}m_.className="GlobalMaxPooling2D",Ko.serialization.registerClass(m_);class g_ extends Oh{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=uf(t.layer,n);delete t.layer;const i={layer:r};return Object.assign(i,t),new e(i)}}class __ extends g_{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=bh(e)).length<3)throw new $d(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=bh(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return(0,Ko.tidy)((()=>dg(((e,n)=>[yh(this.layer.call(e,t)),[]]),e=yh(e),[],!1,null,null,!1,!0)[1]))}}__.className="TimeDistributed",Ko.serialization.registerClass(__);class v_ extends g_{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=uf(n),t.goBackwards=!0!==t.goBackwards;const r={};var i;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=uf(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,i=this.mergeMode,rp(gp,"BidirectionalMergeMode",i),e.weights)throw new jd("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState?(r=i.slice(1),t=i[0]):t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Wd(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=lg(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const a=[],o=[];if(null!=n){const e=n.length;if(e%2>0)throw new $d("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);const r=n.map((e=>new Ch({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),o.push(...r)}if(null!=r)throw new jd("Support for constants in Bidirectional layers is not implemented yet.");const s=a[0]instanceof Eh;for(const e of a)if(e instanceof Eh!==s)throw new $d("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(a),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return(0,Ko.tidy)((()=>{const n=t.initialState;let r,i,a,o;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const a=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=Ko.reverse(i,1)),"concat"===this.mergeMode?o=zp([r,i]):"sum"===this.mergeMode?o=Ko.add(r,i):"ave"===this.mergeMode?o=Ko.mul(.5,Ko.add(r,i)):"mul"===this.mergeMode?o=Ko.mul(r,i):null==this.mergeMode&&(o=[r,i]),this.returnState?null==this.mergeMode?o.concat(a):[o].concat(a):o}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){kp(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),kp(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=uf(t.layer);if(delete t.layer,null!=t.numConstants)throw new jd("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}v_.className="Bidirectional",Ko.serialization.registerClass(v_);class y_ extends Oh{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return(0,Ko.tidy)((()=>("float32"!==(e=yh(e)).dtype&&(e=Pp(e,"float32")),(0,Ko.add)((0,Ko.mul)(e,this.scale),this.offset))))}}y_.className="Rescaling",Ko.serialization.registerClass(y_);const{resizeBilinear:b_,cropAndResize:w_}=Ko.image;class k_ extends Oh{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,a,o,s){return(0,Ko.tidy)((()=>{let c,u=!1;const l=[t/a,n/o,(r+t)/a,(i+n)/o],d=[];3===e.rank?(u=!0,c=(0,Ko.stack)([e])):c=e;for(let e=0;e<c.shape[0];e++)d.push(l);const p=(0,Ko.tensor)(d,[d.length,4]),h=(0,Ko.range)(0,d.length,1,"int32"),f=w_(c,p,h,[r,i],"nearest");return Pp(u?yh((0,Ko.unstack)(f)):f,s)}))}upsize(e,t,n,r){return(0,Ko.tidy)((()=>Pp(b_(e,[t,n]),r)))}call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e),n=t.dtype,r=t.shape,i=r[r.length-3],a=r[r.length-2];let o=0;i!==this.height&&(o=Math.floor((i-this.height)/2));let s=0;return a!==this.width&&(s=Math.floor((a-this.width)/2),0===s&&(s=1)),o>=0&&s>=0?this.centerCrop(t,o,s,this.height,this.width,i,a,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=bh(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}k_.className="CenterCrop",Ko.serialization.registerClass(k_);class x_ extends Oh{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=bh(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return(0,Ko.tidy)((()=>{let n;if("int32"!==(e=yh(e)).dtype&&(e=Pp(e,"int32")),void 0!==t.countWeights){if("count"!==this.outputMode)throw new $d(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=yh(t.countWeights)}const r=(0,Ko.max)(e),i=(0,Ko.min)(e),a=(0,Ko.greater)(this.numTokens,r).bufferSync().get(0),o=(0,Ko.greaterEqual)(i,0).bufferSync().get(0);if(!a||!o)throw new $d(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let i=yh(e);if("int32"!==i.dtype&&(i=Pp(i,"int32")),"int"===t)return i;const a=i.shape;if(0===i.rank&&(i=(0,Ko.expandDims)(i,-1)),"oneHot"===t&&1!==i.shape[i.shape.length-1]&&(i=(0,Ko.expandDims)(i,-1)),i.rank>2)throw new $d(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${a} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(t),s=i;let c;if(c=void 0!==r&&"count"===t?(0,Ko.denseBincount)(s,r,n,o):(0,Ko.denseBincount)(s,[],n,o),"tfIdf"!==t)return c;if(r)return(0,Ko.mul)(c,r);throw new $d("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}x_.className="CategoryEncoding",Ko.serialization.registerClass(x_);const S_=new Set(["bilinear","nearest"]);class T_ extends Oh{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!S_.has(e.interpolation))throw new $d(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=bh(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return(0,Ko.tidy)((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return Ko.image.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return Ko.image.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...S_]} are supported`)}))}}T_.className="Resizing",Ko.serialization.registerClass(T_);class C_{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}C_.className="RandomSeed";class E_ extends Oh{constructor(e){super(e),this.randomGenerator=new C_(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}E_.className="BaseRandomLayer";const I_=new Set(["bilinear","nearest"]);class N_ extends E_{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new $d(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new $d(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new $d(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!I_.has(n))throw new $d(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=bh(e))[2];return[this.imgHeight,-1,t]}call(e,t){return(0,Ko.tidy)((()=>{const t=yh(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=(0,Ko.randomUniform)([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return Ko.image.resizeBilinear(e,i);case"nearest":return Ko.image.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...I_]} are supported`)}}))}}N_.className="RandomWidth",Ko.serialization.registerClass(N_);var A_,O_=n(9692),R_=n(1445);function P_(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(F_(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const a in e){const o=P_(e[a],t,n,r);i[a]=o}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,i.value),i.value}function D_(e,t=M_){return L_(e,t)}function L_(e,t,n=new Set){const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(F_(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=L_(e.map((e=>e[a])),t,n);i[a]=r}return n.delete(r),i}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return i.value}function M_(e){return null===e?null:F_(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function F_(e){let t=!1;if(Ko.env().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(7689);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Ko.Tensor)&&!(e instanceof Promise)&&!t)}function z_(e){return function(e,t){return P_(e,t)}(e,$_)}function $_(e){return e instanceof Ko.Tensor?{value:e.clone(),recurse:!1}:F_(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class j_{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class B_ extends j_{constructor(){super(B_.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function V_(e){return new W_(e)}function U_(e,t){return new rv(e,t)}B_.INITIAL_CAPACITY=32;class G_{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Z_(this,e)}filter(e){return new Q_(this,e)}map(e){return new J_(this,e)}mapAsync(e){return new ev(this,e)}serialMapAsync(e){return new ev(this,e).serial()}flatmap(e){return new nv(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e,t=!0){return new X_(this,e,t)}columnMajorBatch(e,t=!0,n=M_){return this.rowMajorBatch(e,t).map((e=>D_(e,n)))}concatenate(e,t){return new rv(new q_([this,e]),t)}take(e){return e<0||null==e?this:new K_(this,e)}skip(e){return e<0||null==e?this:new Y_(this,e)}prefetch(e){return new iv(this,e)}shuffle(e,t){return new av(this,e,t)}serial(){return new H_(this)}}class q_ extends G_{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:z_(e),done:!1}}}class W_ extends G_{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class H_ extends G_{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class Y_ extends G_{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;Ko.dispose(e.value)}return this.upstream.next()}}class K_ extends G_{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class X_ extends G_{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class Q_ extends G_{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Ko.dispose(e.value)}}}class J_ extends G_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Ko.tensor_util.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ko.tensor_util.getTensorsInContainer(n);for(const e of t)Ko.tensor_util.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class Z_ extends G_{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class ev extends G_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Ko.tensor_util.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Ko.tensor_util.getTensorsInContainer(n);for(const e of t)Ko.tensor_util.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class tv extends G_{constructor(){super(),this.outputQueue=new B_,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class nv extends tv{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=Ko.tensor_util.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ko.tensor_util.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const e of t)Ko.tensor_util.isTensorInList(e,r)||e.dispose();return!0}}class rv extends G_{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(A_||(A_={}));class iv extends G_{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new j_(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class av extends iv{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=R_.alea(n||Ko.util.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class ov{constructor(){this.size=null}batch(e,t=!0){const n=this;let r;return Ko.util.assert(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),sv((async()=>(await n.iterator()).columnMajorBatch(e,t,cv)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,sv((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,sv((async()=>(await t.iterator()).filter((t=>Ko.tidy((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return sv((async()=>(await t.iterator()).map((t=>Ko.tidy((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return sv((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return sv((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,sv((async()=>U_(V_((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,sv((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=R_.alea(t||Ko.util.now().toString());return sv((async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,sv((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function sv(e,t=null){return new class extends ov{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function cv(e){if(null===e)return null;const t=e[0];if(null==(n=t)||null===(r=n)||"object"!=typeof r&&"function"!=typeof r||Array.isArray(n)||"object"==typeof n&&n instanceof Ko.Tensor||Ko.util.isTypedArray(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Ko.Tensor?Ko.stack(e):Ko.tensor(e)}(e),recurse:!1}}var n,r;return{value:null,recurse:!0}}ov.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function uv(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Ko.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const lv=Ko.kernel_impls.whereImpl;class dv extends Ko.KernelBackend{nextDataId(){return dv.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ko.DataStorage(this,(0,Ko.engine)())}write(e,t,n){this.firstUse&&(this.firstUse=!1,(0,Ko.env)().get("IS_NODE")&&Ko.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Ko.util.isString(n[0])){const i=n.map((e=>Ko.util.encodeString(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Ko.backend_util.mergeRealAndImagArrays(e,t)}return Ko.util.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Ko.util.decodeString(e)));return(0,Ko.buffer)(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,Ko.buffer)(e.shape,e.dtype,t)}makeOutput(e,t,n){return(0,Ko.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Ko.util.now();e();return{kernelMs:Ko.util.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){uv([e],"where");const t=this.readSync(e.dataId);return lv(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}dv.nextDataId=0;function pv(e){return(t,n,r)=>{const i=Ko.util.getArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)i[n]=e(t[n],r);return i}}function hv(e,t,n){return fv(e,pv(t),n)}function fv(e,t,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;uv(o,e);const s=a,c=s.data.get(o.dataId).values;let u;if("string"===o.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=Ko.backend_util.fromUint8ToStringArray(c)}else u=c;const l=n||o.dtype,d=t(u,l,i);return s.makeTensorInfo(o.shape,l,d)}}(0,Ko.registerBackend)("cpu",(()=>new dv),1);const mv=hv(Ko.Elu,(e=>e>=0?e:Math.exp(e)-1)),gv={kernelName:Ko.Elu,backendName:"cpu",kernelFunc:mv};function _v(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const vv={kernelName:Ko.Identity,backendName:"cpu",kernelFunc:_v};function yv(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r;uv([i],"leakyRelu");const o=Ko.util.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,c=Ko.util.getTypedArrayFromDType("float32",o);for(let e=0;e<s.length;e++)c[e]=s[e]<0?a*s[e]:s[e];return n.makeTensorInfo(i.shape,"float32",c)}const bv={kernelName:Ko.LeakyRelu,backendName:"cpu",kernelFunc:yv};function wv(e){return(t,n,r,i,a)=>{const o=Ko.backend_util.assertAndGetBroadcastShape(t,n),s=o.length,c=Ko.util.computeStrides(o),u=Ko.util.sizeFromShape(o),l=Ko.util.getTypedArrayFromDType(a,u),d=t.length,p=n.length,h=Ko.util.computeStrides(t),f=Ko.util.computeStrides(n),m=Ko.backend_util.getBroadcastDims(t,o),g=Ko.backend_util.getBroadcastDims(n,o);if(m.length+g.length===0)for(let t=0;t<l.length;++t)l[t]=e(r[t%r.length],i[t%i.length]);else for(let t=0;t<l.length;++t){const n=Ko.util.indexToLoc(t,s,c),a=n.slice(-d);m.forEach((e=>a[e]=0));const o=Ko.util.locToIndex(a,d,h),u=n.slice(-p);g.forEach((e=>u[e]=0));const _=Ko.util.locToIndex(u,p,f);l[t]=e(r[o],i[_])}return[l,o]}}const kv=wv(((e,t)=>e<0?t*e:e));function xv(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;uv([r,i],"prelu");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,c]=kv(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(c,"float32",s)}const Sv={kernelName:Ko.Prelu,backendName:"cpu",kernelFunc:xv},Tv=hv(Ko.Relu,(e=>Math.max(0,e))),Cv={kernelName:Ko.Relu,backendName:"cpu",kernelFunc:Tv},Ev=hv(Ko.Relu6,(e=>Math.min(Math.max(0,e),6))),Iv={kernelName:Ko.Relu6,backendName:"cpu",kernelFunc:Ev},Nv=pv((e=>1/(1+Math.exp(-e)))),Av=hv(Ko.Sigmoid,(e=>1/(1+Math.exp(-e)))),Ov={kernelName:Ko.Sigmoid,backendName:"cpu",kernelFunc:Av};function Rv(e,t,n,r,i){if("linear"===n)return _v({inputs:{x:t},backend:e});if("relu"===n)return Tv({inputs:{x:t},backend:e});if("elu"===n)return mv({inputs:{x:t},backend:e});if("relu6"===n)return Ev({inputs:{x:t},backend:e});if("prelu"===n)return xv({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return yv({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return Av({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Pv(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const Dv={kernelName:Ko.Complex,backendName:"cpu",kernelFunc:Pv};function Lv(e,t,n="float32"){if("complex64"===n){return Pv({inputs:{real:Lv(e,t,"float32"),imag:Lv(e,t,"float32")},backend:e})}const r=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function Mv(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const Fv={kernelName:Ko.Real,backendName:"cpu",kernelFunc:Mv};function zv(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=Ko.util.toTypedArray([0],n),[i,a]=wv(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function $v(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return _v({inputs:{x:i},backend:n});const e=Lv(n,i.shape,i.dtype),t=$v({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Pv({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=Mv({inputs:{input:i},backend:n}),t=$v({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!Ko.util.hasEncodingLoss(i.dtype,a)){const e=_v({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const o=n.data.get(i.dataId).values,[s,c,u]=zv(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,c,u)}const jv={kernelName:Ko.Cast,backendName:"cpu",kernelFunc:$v};function Bv(e,t,n,r){return null==n?({inputs:n,backend:i})=>{const{a,b:o}=n,s=i;uv([a,o],e);const c=s.data.get(a.dataId).values,u=s.data.get(o.dataId).values,l="string"===a.dtype?Ko.backend_util.fromUint8ToStringArray(c):c,d="string"===a.dtype?Ko.backend_util.fromUint8ToStringArray(u):u,p=r||a.dtype,[h,f]=t(a.shape,o.shape,l,d,p);return s.makeTensorInfo(f,p,h)}:({inputs:e,backend:i})=>{const{a,b:o}=e,s=i;if("complex64"===a.dtype||"complex64"===o.dtype){const e=$v({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,c=s.data.get(r.dataId).values,u=s.data.get(i.dataId).values,l=$v({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),d=s.data.get(l.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=s.data.get(p.dataId).values,m=s.data.get(h.dataId).values,[g,_,v]=n(a.shape,o.shape,c,u,f,m),y=s.makeTensorInfo(v,"float32",g),b=s.makeTensorInfo(v,"float32",_),w=Pv({inputs:{real:y,imag:b},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(b),w}{const e=s.data.get(a.dataId).values,n=s.data.get(o.dataId).values,i=r||a.dtype,[c,u]=t(a.shape,o.shape,e,n,i);return s.makeTensorInfo(u,i,c)}}}function Vv(e){return(t,n,r,i,a,o)=>{const s=Ko.backend_util.assertAndGetBroadcastShape(t,n),c=Ko.util.sizeFromShape(s),u=s.length,l=Ko.util.computeStrides(s),d=Ko.util.getTypedArrayFromDType("float32",c),p=Ko.util.getTypedArrayFromDType("float32",c),h=Ko.backend_util.getBroadcastDims(t,s),f=Ko.backend_util.getBroadcastDims(n,s),m=Ko.backend_util.mergeRealAndImagArrays(r,i),g=Ko.backend_util.mergeRealAndImagArrays(a,o),_=t.length,v=Ko.util.computeStrides(t),y=n.length,b=Ko.util.computeStrides(n);if(h.length+f.length===0)for(let t=0;t<d.length;t++){const n=t%m.length,r=t%g.length,i=e(m[2*n],m[2*n+1],g[2*r],g[2*r+1]);d[t]=i.real,p[t]=i.imag}else for(let t=0;t<d.length;t++){const n=Ko.util.indexToLoc(t,u,l),r=n.slice(-_);h.forEach((e=>r[e]=0));const i=Ko.util.locToIndex(r,_,v),a=n.slice(-y);f.forEach((e=>a[e]=0));const o=Ko.util.locToIndex(a,y,b),s=e(m[2*i],m[2*i+1],g[2*o],g[2*o+1]);d[t]=s.real,p[t]=s.imag}return[d,p,s]}}const Uv=wv(((e,t)=>e+t)),Gv=Vv(((e,t,n,r)=>({real:e+n,imag:t+r}))),qv=Bv(Ko.Add,Uv,Gv),Wv={kernelName:Ko.Add,backendName:"cpu",kernelFunc:qv};function Hv(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,o=Ko.util.sizeFromShape(i.shape),s=Ko.util.inferFromImplicitShape(a,o),c=Ko.util.sizeFromShape(s);Ko.util.assert(o===c,(()=>`The new shape (${s}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const Yv={kernelName:Ko.Reshape,backendName:"cpu",kernelFunc:Hv};function Kv(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:o,transposeB:s}=r;uv([i,a],"matMul");const c=i.shape.length,u=a.shape.length,l=o?i.shape[c-2]:i.shape[c-1],d=s?a.shape[u-1]:a.shape[u-2],p=o?i.shape[c-1]:i.shape[c-2],h=s?a.shape[u-2]:a.shape[u-1],f=i.shape.slice(0,-2),m=a.shape.slice(0,-2),g=Ko.util.sizeFromShape(f),_=Ko.util.sizeFromShape(m),v=Ko.broadcast_util.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,h]);Ko.util.assert(l===d,(()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`));const y=s?[_,h,d]:[_,d,h],b=Hv({inputs:{x:i},backend:n,attrs:{shape:o?[g,l,p]:[g,p,l]}}),w=Hv({inputs:{x:a},backend:n,attrs:{shape:y}}),k=o?b.shape[1]:b.shape[2],x=o?b.shape[2]:b.shape[1],S=s?w.shape[1]:w.shape[2],T=Math.max(g,_),C=n.data.get(b.dataId).values,E=n.data.get(w.dataId).values,I=Ko.util.computeStrides(b.shape),N=Ko.util.computeStrides(w.shape),[A,O,R]=o?[I[0],1,I[1]]:[I[0],I[1],1],[P,D,L]=s?[1,N[1],N[0]]:[N[1],1,N[0]],M=x*S,F=(0,Ko.buffer)([T,x,S],b.dtype),z=F.values,$=n.blockSize;for(let e=0;e<T;e++){const t=e%g,n=e%_;for(let r=0;r<x;r+=$){const i=Math.min(r+$,x);for(let a=0;a<S;a+=$){const o=Math.min(a+$,S);for(let s=0;s<k;s+=$){const c=Math.min(s+$,k);for(let u=r;u<i;u++)for(let r=a;r<o;r++){let i=0;for(let e=s;e<c;e++){i+=C[t*A+u*O+e*R]*E[e*P+r*D+n*L]}z[e*M+(u*S+r)]+=i}}}}}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}const Xv={kernelName:Ko.BatchMatMul,backendName:"cpu",kernelFunc:Kv};const Qv={kernelName:Ko._FusedMatMul,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:o,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;let p,h,f;const m=[];p=Kv({inputs:{a:i,b:a},attrs:{transposeA:c,transposeB:u},backend:n}),o&&(h=qv({inputs:{a:p,b:o},backend:n}),m.push(p),p=h),l&&(f=Rv(n,p,l,s,d),m.push(p),p=f);for(const e of m)n.disposeIntermediateTensorInfo(e);return p}};function Jv(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Zv={kernelName:Ko.Abs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;uv(t,"abs");let r=new Float32Array(Ko.util.sizeFromShape(t.shape));return r=Jv(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},ey=hv(Ko.Acos,(e=>Math.acos(e))),ty={kernelName:Ko.Acos,backendName:"cpu",kernelFunc:ey},ny=hv(Ko.Acosh,(e=>Math.acosh(e))),ry={kernelName:Ko.Acosh,backendName:"cpu",kernelFunc:ny};const iy={kernelName:Ko.AddN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;uv(t,"addN");const i=r.map((e=>n.data.get(e.dataId).values)),a=(0,Ko.buffer)(r[0].shape,r[0].dtype),o=a.values;for(let e=0;e<r.length;e++){const t=i[e];for(let e=0;e<o.length;e++)o[e]+=t[e]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function ay(e,t,n,r,i){const a=t.length,o=Ko.util.sizeFromShape(t),s=Ko.util.computeStrides(t),c=Ko.util.computeStrides(i),u=Ko.util.getTypedArrayFromDType(n,Ko.util.sizeFromShape(i));for(let t=0;t<o;++t){const n=Ko.util.indexToLoc(t,a,s),i=new Array(n.length);for(let e=0;e<i.length;e++)i[e]=n[r[e]];u[Ko.util.locToIndex(i,a,c)]=e[t]}return u}function oy(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:a}=n;uv(i,"transpose");const o=i.shape.length,s=new Array(o);for(let e=0;e<s.length;e++)s[e]=i.shape[a[e]];const c=ay(r.data.get(i.dataId).values,i.shape,i.dtype,a,s);return{dataId:r.write(c,s,i.dtype),shape:s,dtype:i.dtype}}const sy={kernelName:Ko.Transpose,backendName:"cpu",kernelFunc:oy};const cy={kernelName:Ko.All,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;uv(i,"all");const s=Ko.util.parseAxisParam(a,i.shape);let c=s;const u=Ko.backend_util.getAxesPermutation(c,i.shape.length);let l=i;null!=u&&(l=oy({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ko.backend_util.getInnerMostAxes(c.length,i.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("all",c,l.shape.length);const[d,p]=Ko.backend_util.computeOutAndReduceShapes(l.shape,c),h=Ko.util.sizeFromShape(p),f=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n&&r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(o){const e=Hv({inputs:{x:g},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const uy={kernelName:Ko.Any,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;uv(i,"any");const s=Ko.util.parseAxisParam(a,i.shape);let c=s;const u=Ko.backend_util.getAxesPermutation(c,i.shape.length);let l=i;null!=u&&(l=oy({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ko.backend_util.getInnerMostAxes(c.length,i.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("any",c,l.shape.length);const[d,p]=Ko.backend_util.computeOutAndReduceShapes(l.shape,c),h=Ko.util.sizeFromShape(p),f=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n||r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(o){const e=Hv({inputs:{x:g},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const ly={kernelName:Ko.ArgMax,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;uv(i,"argMax");let o=Ko.util.parseAxisParam(a,i.shape);const s=Ko.backend_util.getAxesPermutation(o,i.shape.length);let c=i;const u=[];null!=s&&(c=oy({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(c),o=Ko.backend_util.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],Ko.backend_util.assertAxesAreInnerMostDims("argMax",o,c.shape.length);const[l,d]=Ko.backend_util.computeOutAndReduceShapes(c.shape,o),p=Ko.util.sizeFromShape(l),h=Ko.util.makeZerosTypedArray(p,"int32"),f=Ko.util.sizeFromShape(d),m=n.data.get(c.dataId).values;for(let e=0;e<h.length;++e){const t=e*f;let n=m[t],r=0;for(let e=0;e<f;++e){const i=m[t+e];i>n&&(n=i,r=e)}h[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l,"int32",h)}};const dy={kernelName:Ko.ArgMin,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;uv(i,"argMin");let o=Ko.util.parseAxisParam(a,i.shape);const s=Ko.backend_util.getAxesPermutation(o,i.shape.length);let c=i;const u=[];null!=s&&(c=oy({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(c),o=Ko.backend_util.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],Ko.backend_util.assertAxesAreInnerMostDims("argMin",o,c.shape.length);const[l,d]=Ko.backend_util.computeOutAndReduceShapes(c.shape,o),p=Ko.util.sizeFromShape(l),h=Ko.util.makeZerosTypedArray(p,"int32"),f=Ko.util.sizeFromShape(d),m=n.data.get(c.dataId).values;for(let e=0;e<h.length;++e){const t=e*f;let n=m[t],r=0;for(let e=0;e<f;++e){const i=m[t+e];i<n&&(n=i,r=e)}h[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l,"int32",h)}},py=hv(Ko.Asin,(e=>Math.asin(e))),hy={kernelName:Ko.Asin,backendName:"cpu",kernelFunc:py},fy=hv(Ko.Asinh,(e=>Math.asinh(e))),my={kernelName:Ko.Asinh,backendName:"cpu",kernelFunc:fy},gy=hv(Ko.Atan,(e=>Math.atan(e))),_y={kernelName:Ko.Atan,backendName:"cpu",kernelFunc:gy},vy=wv(((e,t)=>Math.atan2(e,t))),yy=Bv(Ko.Atan2,vy),by={kernelName:Ko.Atan2,backendName:"cpu",kernelFunc:yy},wy=hv(Ko.Atanh,(e=>Math.atanh(e))),ky={kernelName:Ko.Atanh,backendName:"cpu",kernelFunc:wy};function xy(e,t,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,l=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=(0,Ko.buffer)(i.outShape,n),g=m.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],y=i.outShape[3];for(let t=0;t<i.batchSize;++t){const n=t*_,m=t*r[0];for(let t=0;t<i.inChannels;++t)for(let _=0;_<i.outHeight;++_){const b=_*o-p,w=Math.max(0,b),k=Math.min(i.inHeight,l+b),x=n+_*v;for(let n=0;n<i.outWidth;++n){const o=n*s-h,l=Math.max(0,o),p=Math.min(i.inWidth,d+o);let _=f,v=0,b=0;for(let n=w;n<k;n+=c){const i=m+n*r[1];for(let n=l;n<p;n+=u){const o=e[i+n*r[2]+t];"max"===a&&o>_?_=o:"avg"===a&&(v+=o,b++)}if(isNaN(_))break}g[x+n*y+t]="avg"===a?v/b:_}}}return m}function Sy(e,t,n,r,i=!1,a=!1){const o=(0,Ko.buffer)(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=(0,Ko.buffer)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){const g=n*s-h;let _=g;for(;_<0;)_+=u;const v=Math.min(r.inHeight,d+g);for(let s=0;s<r.outWidth;++s){const d=s*c-f;let h=d;for(;h<0;)h+=l;const y=Math.min(r.inWidth,p+d);let b=Number.NEGATIVE_INFINITY,w=-1;for(let n=_;n<v;n+=u){const o=n-g;for(let s=h;s<y;s+=l){const c=s-d,u=m.get(e,n,s,t);u>b&&(b=u,w=i?a?((e*r.inHeight+n)*r.inWidth+s)*r.inChannels+t:(n*r.inWidth+s)*r.inChannels+t:o*p+c)}}o.set(w,e,n,s,t)}}return o}function Ty(e,t,n,r,i,a){const o=i.strideDepth,s=i.strideHeight,c=i.strideWidth,u=i.dilationDepth,l=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,_=i.padInfo.left,v="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=(0,Ko.buffer)(i.outShape,n),b=y.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],x=i.outShape[3]*i.outShape[4],S=i.outShape[4];for(let t=0;t<i.batchSize;++t){const n=t*w,y=t*r[0];for(let t=0;t<i.inChannels;++t)for(let w=0;w<i.outDepth;++w){const T=w*o-m;let C=T;for(;C<0;)C+=u;const E=Math.min(i.inDepth,p+T),I=n+w*k;for(let n=0;n<i.outHeight;++n){const o=n*s-g;let p=o;for(;p<0;)p+=l;const m=Math.min(i.inHeight,h+o),w=I+n*x;for(let n=0;n<i.outWidth;++n){const o=n*c-_;let s=o;for(;s<0;)s+=d;const h=Math.min(i.inWidth,f+o),g=w+n*S;let k=v,x=0,T=0;for(let n=C;n<E;n+=u){const i=y+n*r[1];for(let n=p;n<m;n+=l){const o=i+n*r[2];for(let n=s;n<h;n+=d){const i=e[o+n*r[3]+t];if("max"===a&&i>k?k=i:"avg"===a&&(x+=i,T++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}b[g+t]="avg"===a?x/Math.max(T,1):k}}}}return y}const Cy={kernelName:Ko.AvgPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;uv(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:c}=r;Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=Ko.backend_util.computePool2DInfo(i.shape,a,o,1,s,c);let l;if(1===u.filterWidth&&1===u.filterHeight&&Ko.util.arraysEqual(u.inShape,u.outShape))l=_v({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=Ko.util.computeStrides(i.shape),r=xy(e,i.shape,i.dtype,t,u,"avg");l=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return l}};const Ey={kernelName:Ko.AvgPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:c,dataFormat:u}=r;uv(i,"avgPool3d");const l=Ko.backend_util.computePool3DInfo(i.shape,a,o,1,s,c,u),d=Ty(n.data.get(i.dataId).values,i.shape,i.dtype,Ko.util.computeStrides(i.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const Iy={kernelName:Ko.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:c,dimRoundingMode:u}=r;uv([i,a],"avgPool3DGrad");const l=Ko.backend_util.computePool3DInfo(a.shape,o,s,1,c,u),d=l.strideDepth,p=l.strideHeight,h=l.strideWidth,f=l.filterDepth,m=l.filterHeight,g=l.filterWidth,_=l.dilationDepth,v=l.dilationHeight,y=l.dilationWidth,b=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,x=b-1-l.padInfo.front,S=k-1-l.padInfo.left,T=w-1-l.padInfo.top,C=(0,Ko.buffer)(a.shape,"float32"),E=1/(f*m*g),I=n.bufferSync(i);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inDepth;++n)for(let r=0;r<l.inHeight;++r)for(let i=0;i<l.inWidth;++i){const a=n-x,o=r-T,s=i-S;let c=0;for(let n=0;n<b;n+=_){const r=(a+n)/d;if(!(r<0||r>=l.outDepth||Math.floor(r)!==r))for(let n=0;n<w;n+=v){const i=(o+n)/p;if(!(i<0||i>=l.outHeight||Math.floor(i)!==i))for(let n=0;n<k;n+=y){const a=(s+n)/h;if(a<0||a>=l.outWidth||Math.floor(a)!==a)continue;c+=I.get(e,r,i,a,t)}}}C.set(c*E,e,n,r,i,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const Ny={kernelName:Ko.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,o=a;uv([i,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=r,l=Ko.backend_util.computePool2DInfo(o.shape,s,c,1,u),d=l.strideHeight,p=l.strideWidth,h=l.filterHeight,f=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,_=l.effectiveFilterHeight,v=l.effectiveFilterWidth,y=v-1-l.padInfo.left,b=_-1-l.padInfo.top,w=(0,Ko.buffer)(o.shape,"float32"),k=1/(h*f),x=n.data.get(i.dataId).values,S=(0,Ko.buffer)(i.shape,"float32",x);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){const i=n-b,a=r-y;let o=0;for(let n=0;n<_;n+=m){const r=(i+n)/d;if(!(r<0||r>=l.outHeight||Math.floor(r)!==r))for(let n=0;n<v;n+=g){const i=(a+n)/p;if(i<0||i>=l.outWidth||Math.floor(i)!==i)continue;o+=S.get(e,r,i,t)}}w.set(o*k,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const Ay={kernelName:Ko.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:a,offset:o,mean:s,variance:c}=t;Ko.util.assert(s.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Ko.util.assert(null==o||s.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Ko.util.assert(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),uv([i,s,c,a,o],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const l=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(c.dataId).values,h=a?n.data.get(a.dataId).values:new Float32Array([1]),f=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=f.length,_=h.length,v=p.length,y=d.length;let b=0,w=0,k=0,x=0;for(let e=0;e<l.length;++e)m[e]=f[b++]+(l[e]-d[w++])*h[k++]/Math.sqrt(p[x++]+u),b>=g&&(b=0),w>=y&&(w=0),k>=_&&(k=0),x>=v&&(x=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};function Oy(e,t,n,r,i){const a=Ko.slice_util.isSliceContinous(r,t,n),o=Ko.util.sizeFromShape(n),s=Ko.util.computeStrides(r);if(a){const n=Ko.slice_util.computeFlatOffset(t,s);return"string"===i?e.slice(n,n+o):e.subarray(n,n+o)}const c="string"===i?Ko.backend_util.fromUint8ToStringArray(e):e,u=(0,Ko.buffer)(r,i,c),l=(0,Ko.buffer)(n,i);for(let e=0;e<l.size;++e){const n=l.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));l.set(u.get(...r),...n)}return"string"===i?Ko.backend_util.fromStringArrayToUint8(l.values):l.values}function Ry(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:o}=r;uv(i,"slice");const[s,c]=Ko.slice_util.parseSliceParams(i,a,o);Ko.slice_util.assertParamsValid(i,s,c);const u=Oy(n.data.get(i.dataId).values,s,c,i.shape,i.dtype);return n.makeTensorInfo(c,i.dtype,u)}const Py={kernelName:Ko.Slice,backendName:"cpu",kernelFunc:Ry};const Dy={kernelName:Ko.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:o}=r;uv([i],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),c=Ko.backend_util.getReshaped(i.shape,a,s),u=Ko.backend_util.getPermuted(c.length,a.length),l=Ko.backend_util.getReshapedPermuted(i.shape,a,s),d=Ko.backend_util.getSliceBeginCoords(o,a.length),p=Ko.backend_util.getSliceSize(l,o,a.length),h=Hv({inputs:{x:i},backend:n,attrs:{shape:c}}),f=oy({inputs:{x:h},backend:n,attrs:{perm:u}}),m=Hv({inputs:{x:f},backend:n,attrs:{shape:l}}),g=Ry({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function Ly(e,t,n,r,i){const a=Ko.util.sizeFromShape(r),o=Ko.util.makeZerosTypedArray(i,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=i||(o[r]+=a>0?t[n]:1)}return o}function My(e,t,n,r=!1){const i=e.shape[0],a=e.shape[1],o=(0,Ko.buffer)([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<a;i++){const a=e.get(s,i);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?o.set(1,s,a):t.size>0?o.set(o.get(s,a)+t.get(s,i),s,a):o.set(o.get(s,a)+1,s,a))}return o}const Fy={kernelName:Ko.Bincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o}=r,s=Ly(n.data.get(i.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,s)}},zy=wv(((e,t)=>e&t)),$y=Bv(Ko.BitwiseAnd,zy),jy={kernelName:Ko.BitwiseAnd,backendName:"cpu",kernelFunc:$y};const By={kernelName:Ko.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=Ko.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Vy=pv((e=>Math.ceil(e))),Uy=fv(Ko.Ceil,Vy),Gy={kernelName:Ko.Ceil,backendName:"cpu",kernelFunc:Uy},qy=hv(Ko.ClipByValue,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Wy={kernelName:Ko.ClipByValue,backendName:"cpu",kernelFunc:qy},Hy={kernelName:Ko.ComplexAbs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(Ko.util.sizeFromShape(t.shape)),i=n.data.get(t.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values;for(let e=0;e<s.length;e++){const t=s[e],n=c[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function Yy(e,t,n,r){const i=Ko.util.getArrayFromDType(n,Ko.util.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=Ko.util.sizeFromShape(e.shape);i.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?Ko.backend_util.fromUint8ToStringArray(e.vals):e.vals;let o=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=a[o++]}r+=e.shape[1]}))}return i}function Ky(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const Xy={kernelName:Ko.Imag,backendName:"cpu",kernelFunc:Ky};function Qy(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=Ko.util.parseAxisParam(i,t[0].shape)[0],o=t.map((e=>e.shape));Ko.backend_util.assertParamsConsistent(o,a);let s=Ko.backend_util.computeOutShape(t.map((e=>e.shape)),a);if(0===Ko.util.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);const c=t.filter((e=>Ko.util.sizeFromShape(e.shape)>0));if(1===c.length)return _v({inputs:{x:c[0]},backend:n});if("complex64"===c[0].dtype){const e=c.map((e=>Mv({inputs:{input:e},backend:n}))),t=c.map((e=>Ky({inputs:{input:e},backend:n}))),r=Qy({inputs:e,backend:n,attrs:{axis:a}}),i=Qy({inputs:t,backend:n,attrs:{axis:a}}),o=Pv({inputs:{real:r,imag:i},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),o}const u=c.map((e=>{const t=Ko.util.sizeFromShape(e.shape.slice(a));return Hv({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=u.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));s=Ko.backend_util.computeOutShape(u.map((e=>e.shape)),1);const d=1===u[0].shape[0],p=Yy(l,s,t[0].dtype,d),h=Ko.backend_util.computeOutShape(c.map((e=>e.shape)),a),f=n.makeTensorInfo(h,t[0].dtype,p);return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const Jy={kernelName:Ko.Concat,backendName:"cpu",kernelFunc:Qy};function Zy(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=r;uv([i,a],"conv2d");const d=Ko.backend_util.convertConv2DDataFormat(c),p=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,o,u,s,l,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,_=p.padInfo.left,v=p.padInfo.top,y="channelsLast"===p.dataFormat,b=new Ko.TensorBuffer(p.outShape,i.dtype),w=Ko.util.computeStrides(i.shape),k=Ko.util.computeStrides(a.shape),x=w[0],S=y?w[1]:w[2],T=y?w[2]:1,C=y?1:w[1],E=b.strides[0],I=y?b.strides[1]:b.strides[2],N=y?b.strides[2]:1,A=y?1:b.strides[1],O=n.data.get(i.dataId).values,R=n.data.get(a.dataId).values,P=b.values;for(let e=0;e<p.batchSize;++e){const t=e*x,n=e*E;for(let e=0;e<p.outHeight;++e){const r=n+e*I,i=e*p.strideHeight-v;for(let e=0;e<h;++e){const n=i+e*m;if(n<0||n>=p.inHeight)continue;const a=e*k[0],o=t+n*S;for(let e=0;e<p.outWidth;++e){const t=r+e*N,n=e*p.strideWidth-_;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=p.inWidth)continue;const i=o+r*T;let s=a+e*k[1];for(let e=0;e<p.inChannels;++e){const n=O[i+e*C];for(let e=0;e<p.outChannels;++e)P[t+e*A]+=n*R[s+e];s+=p.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,P)}const eb={kernelName:Ko.Conv2D,backendName:"cpu",kernelFunc:Zy};const tb={kernelName:Ko.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=r;uv([i,a],"conv2dBackpropFilter");const d=Ko.backend_util.convertConv2DDataFormat(c),p=Ko.backend_util.computeConv2DInfo(i.shape,l,o,1,s,u,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,_="channelsLast"===p.dataFormat,v=new Ko.TensorBuffer(p.filterShape,"float32"),y=p.padInfo.left,b=p.padInfo.top,w=n.data.get(i.dataId).values,k=n.data.get(a.dataId).values,x=new Ko.TensorBuffer(i.shape,i.dtype,w),S=new Ko.TensorBuffer(a.shape,a.dtype,k);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((b-e)/h)),n=Math.min(p.outHeight,(p.inHeight+b-e)/h);for(let r=0;r<g;++r){const i=Math.max(0,Math.ceil((y-r)/f)),a=Math.min(p.outWidth,(p.inWidth+y-r)/f);for(let o=0;o<p.inChannels;++o)for(let s=0;s<p.outChannels;++s){let c=0;for(let u=0;u<p.batchSize;++u)for(let l=t;l<n;++l){const t=e+l*h-b;for(let e=i;e<a;++e){const n=r+e*f-y;c+=_?x.get(u,t,n,o)*S.get(u,l,e,s):x.get(u,o,t,n)*S.get(u,s,l,e)}}v.set(c,e,r,o,s)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const nb={kernelName:Ko.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:o,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=r;uv([i,a],"conv2dBackpropInput");const d=Ko.util.computeStrides(a.shape),p=Ko.util.computeStrides(i.shape);let h=Ko.backend_util.convertConv2DDataFormat(u);const f=Ko.backend_util.computeConv2DInfo(o,a.shape,s,1,c,l,!1,h),m=new Ko.TensorBuffer(f.inShape,"float32"),g=m.values,_=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,[y,b,w]=d,{batchSize:k,filterHeight:x,filterWidth:S,inChannels:T,inHeight:C,inWidth:E,outChannels:I,outHeight:N,outWidth:A,strideHeight:O,strideWidth:R}=f;h=f.dataFormat;const P=x-1-f.padInfo.top,D=S-1-f.padInfo.left,L="channelsLast"===h,M=m.strides[0],F=L?m.strides[1]:m.strides[2],z=L?m.strides[2]:1,$=L?1:m.strides[1],j=p[0],B=L?p[1]:p[2],V=L?p[2]:1,U=L?1:p[1];for(let e=0;e<k;++e)for(let t=0;t<T;++t)for(let n=0;n<C;++n){const r=n-P,i=Math.max(0,Math.ceil(r/O)),a=Math.min(N,(x+r)/O);for(let o=0;o<E;++o){const s=o-D,c=Math.max(0,Math.ceil(s/R)),u=Math.min(A,(S+s)/R);let l=0;for(let n=i;n<a;++n){const i=n*O-r;for(let r=c;r<u;++r){const a=j*e+B*n+V*r,o=y*(x-1-i)+b*(S-1-(r*R-s))+w*t;for(let e=0;e<I;++e){l+=_[a+U*e]*v[o+e]}}}g[M*e+F*n+z*o+$*t]=l}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const rb={kernelName:Ko.Conv3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:c}=r;uv([i,a],"conv3d");const u=Ko.backend_util.computeConv3DInfo(i.shape,a.shape,o,c,s),{filterDepth:l,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,_=g.front,v=g.left,y=g.top,b=new Ko.TensorBuffer(u.outShape,i.dtype),w=n.data.get(i.dataId).values,k=n.data.get(a.dataId).values,x=b.values,S=Ko.util.computeStrides(i.shape),T=Ko.util.computeStrides(a.shape);for(let e=0;e<u.batchSize;++e){const t=e*S[0],n=e*b.strides[0];for(let e=0;e<u.outDepth;++e){const r=n+e*b.strides[1],i=e*u.strideDepth-_;for(let e=0;e<l;++e){const n=i+e*h;if(n<0||n>=u.inDepth)continue;const a=e*T[0],o=t+n*S[1];for(let e=0;e<u.outHeight;++e){const t=r+e*b.strides[2],n=e*u.strideHeight-y;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const i=a+e*T[1],s=o+r*S[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<p;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const a=i+e*T[2],o=s+t*u.inChannels;let c=a;for(let e=0;e<u.inChannels;++e){const t=w[o+e];for(let e=0;e<u.outChannels;++e)x[n+e]+=t*k[c+e];c+=u.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const ib={kernelName:Ko.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,filterShape:c}=r;uv([i,a],"conv3dBackpropFilterV2");const u=Ko.util.computeStrides(i.shape),l=Ko.util.computeStrides(a.shape),d=Ko.backend_util.computeConv3DInfo(i.shape,c,o,1,s),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,_=d.filterWidth,v=new Ko.TensorBuffer(d.filterShape,"float32"),y=v.values,[b,w,k,x]=v.strides,S=n.data.get(a.dataId).values,[T,C,E,I]=l,N=n.data.get(i.dataId).values,[A,O,R,P]=u,D=d.padInfo.front,L=d.padInfo.left,M=d.padInfo.top;for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((D-e)/p)),n=Math.min(d.outDepth,(d.inDepth+D-e)/p),r=e*b;for(let i=0;i<g;++i){const a=Math.max(0,Math.ceil((M-i)/h)),o=Math.min(d.outHeight,(d.inHeight+M-i)/h),s=i*w+r;for(let r=0;r<_;++r){const c=Math.max(0,Math.ceil((L-r)/f)),u=Math.min(d.outWidth,(d.inWidth+L-r)/f),l=r*k+s;for(let s=0;s<d.inChannels;++s){const m=s*x+l;for(let l=0;l<d.outChannels;++l){let g=0;for(let m=0;m<d.batchSize;++m){const d=m*A,_=m*T;for(let m=t;m<n;++m){const t=(e+m*p-D)*O+d,n=m*C+_;for(let e=a;e<o;++e){const a=(i+e*h-M)*R+t,o=e*E+n;for(let e=c;e<u;++e){const t=e*I+o;g+=N[(r+e*f-L)*P+a+s]*S[t+l]}}}}y[m+l]=g}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const ab={kernelName:Ko.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:o,strides:s,inputShape:c}=r;uv([i],"conv3dBackpropInputV2");const u=Ko.util.computeStrides(i.shape),l=Ko.util.computeStrides(a.shape),d=Ko.backend_util.computeConv3DInfo(c,a.shape,s,1,o),p=new Ko.TensorBuffer(d.inShape,"float32"),h=p.values,[f,m,g,_]=p.strides,v=n.data.get(i.dataId).values,[y,b,w,k]=u,x=n.data.get(a.dataId).values,[S,T,C,E]=l,{batchSize:I,filterDepth:N,filterHeight:A,filterWidth:O,inChannels:R,inDepth:P,inHeight:D,inWidth:L,outChannels:M,outDepth:F,outHeight:z,outWidth:$,strideDepth:j,strideHeight:B,strideWidth:V}=d,U=N-1-d.padInfo.front,G=A-1-d.padInfo.top,q=O-1-d.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<R;++t)for(let n=0;n<P;++n){const r=n-U,i=Math.max(0,Math.ceil(r/j)),a=Math.min(F,(N+r)/j);for(let o=0;o<D;++o){const s=o-G,c=Math.max(0,Math.ceil(s/B)),u=Math.min(z,(A+s)/B);for(let l=0;l<L;++l){const d=l-q,p=Math.max(0,Math.ceil(d/V)),I=Math.min($,(O+d)/V);let R=0;for(let n=i;n<a;++n){const i=n*j-r;for(let r=c;r<u;++r){const a=r*B-s;for(let o=p;o<I;++o){const s=y*e+b*n+w*r+k*o,c=S*(N-1-i)+T*(A-1-a)+C*(O-1-(o*V-d))+E*t;for(let e=0;e<M;++e){R+=v[s+e]*x[c+e]}}}}h[f*e+m*n+g*o+_*l+t]=R}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},ob=hv(Ko.Cos,(e=>Math.cos(e))),sb={kernelName:Ko.Cos,backendName:"cpu",kernelFunc:ob},cb=hv(Ko.Cosh,(e=>Math.cosh(e))),ub={kernelName:Ko.Cosh,backendName:"cpu",kernelFunc:cb};const lb={kernelName:Ko.CropAndResize,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:o}=t,{cropSize:s,method:c,extrapolationValue:u}=r,[l,d,p,h]=i.shape,f=a.shape[0],[m,g]=s,_=(0,Ko.buffer)([f,m,g,h],"float32"),v=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,w=Ko.util.computeStrides(i.shape),k=Ko.util.computeStrides(_.shape);for(let e=0;e<f;e++){const t=4*e,n=v[t],r=v[t+1],i=v[t+2],a=v[t+3],o=y[e];if(o>=l)continue;const s=m>1?(i-n)*(d-1)/(m-1):0,f=g>1?(a-r)*(p-1)/(g-1):0;for(let t=0;t<m;t++){const l=m>1?n*(d-1)+t*s:.5*(n+i)*(d-1);if(l<0||l>d-1)for(let n=0;n<g;n++)for(let r=0;r<h;r++){const i=r+n*k[2]+t*k[1]+e*k[0];_.values[i]=u}else if("bilinear"===c){const n=Math.floor(l),i=Math.ceil(l),s=l-n;for(let c=0;c<g;c++){const l=g>1?r*(p-1)+c*f:.5*(r+a)*(p-1);if(l<0||l>p-1){for(let n=0;n<h;n++){const r=n+c*k[2]+t*k[1]+e*k[0];_.values[r]=u}continue}const d=Math.floor(l),m=Math.ceil(l),v=l-d;for(let r=0;r<h;r++){let a=r+d*w[2]+n*w[1]+o*w[0];const u=b[a];a=r+m*w[2]+n*w[1]+o*w[0];const l=b[a];a=r+d*w[2]+i*w[1]+o*w[0];const p=b[a];a=r+m*w[2]+i*w[1]+o*w[0];const h=u+(l-u)*v,f=p+(b[a]-p)*v;a=r+c*k[2]+t*k[1]+e*k[0],_.values[a]=h+(f-h)*s}}}else for(let n=0;n<g;++n){const i=g>1?r*(p-1)+n*f:.5*(r+a)*(p-1);if(i<0||i>p-1){for(let r=0;r<h;r++){const i=r+n*k[2]+t*k[1]+e*k[0];_.values[i]=u}continue}const s=Math.round(i),c=Math.round(l);for(let r=0;r<h;r++){const i=r+s*w[2]+c*w[1]+o*w[0],a=r+n*k[2]+t*k[1]+e*k[0];_.values[a]=b[i]}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};const db={kernelName:Ko.Cumprod,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;uv(i,"cumprod");const c=Ko.backend_util.getAxesPermutation([a],i.shape.length);let u=i;null!=c&&(u=oy({inputs:{x:i},backend:n,attrs:{perm:c}}));const l=Ko.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(l!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${l}`);const d=(0,Ko.upcastType)(u.dtype,"int32"),p=Ko.util.makeOnesTypedArray(Ko.util.sizeFromShape(u.shape),d),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)p[n]=o?1:h[n];else{const r=m(e,t-1);p[n]=o?h[r]*p[r]:h[n]*p[r]}}const g=n.makeTensorInfo(u.shape,d,p);if(null!=c){const e=oy({inputs:{x:g},backend:n,attrs:{perm:Ko.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const pb={kernelName:Ko.Cumsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;uv(i,"cumsum");const c=Ko.backend_util.getAxesPermutation([a],i.shape.length);let u=i;null!=c&&(u=oy({inputs:{x:i},backend:n,attrs:{perm:c}}));const l=Ko.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(l!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${l}`);const d=(0,Ko.upcastType)(u.dtype,"int32"),p=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(u.shape),d),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)p[n]=o?0:h[n];else{const r=m(e,t-1);p[n]=o?h[r]+p[r]:h[n]+p[r]}}const g=n.makeTensorInfo(u.shape,d,p);if(null!=c){const e=oy({inputs:{x:g},backend:n,attrs:{perm:Ko.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const hb={kernelName:Ko.DenseBincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o,binaryOutput:s}=r;if(1===i.shape.length){const e=Ly(n.data.get(i.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,e)}if(2===i.shape.length){const e=My(n.bufferSync(i),n.bufferSync(a),o,s);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};const fb={kernelName:Ko.DepthToSpace,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:o}=r;Ko.util.assert("NHWC"===o,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`));const s=i.shape[0],c=i.shape[1],u=i.shape[2],l=i.shape[3],d=c*a,p=u*a,h=l/(a*a),f=n.data.get(i.dataId).values,m=new Float32Array(s*d*p*h);let g=0;for(let e=0;e<s;++e)for(let t=0;t<d;++t){const n=Math.floor(t/a),r=t%a;for(let t=0;t<p;++t){const i=Math.floor(t/a),o=(r*a+t%a)*h;for(let t=0;t<h;++t){const r=t+o+l*(i+u*(n+c*e));m[g++]=f[r]}}}return n.makeTensorInfo([s,d,p,h],i.dtype,m)}};function mb(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:c,dimRoundingMode:u}=r;uv([i,a],"depthwiseConv2DNative");const l=Ko.util.computeStrides(i.shape),d=Ko.util.computeStrides(a.shape);let p=c;null==p&&(p=[1,1]),Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,p),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`));const h=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,o,p,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:_,padInfo:v}=h,y=v.left,b=v.top,w=h.outChannels/h.inChannels,k=new Ko.TensorBuffer(h.outShape,i.dtype),x=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,T=k.values;for(let e=0;e<h.batchSize;++e){const t=e*l[0],n=e*k.strides[0];for(let e=0;e<h.outHeight;++e){const r=n+e*k.strides[1],i=e*h.strideHeight-b;for(let e=0;e<f;++e){const n=i+e*g;if(n<0||n>=h.inHeight)continue;const a=e*d[0],o=t+n*l[1];for(let e=0;e<h.outWidth;++e){const t=r+e*k.strides[2],n=e*h.strideWidth-y;for(let e=0;e<m;++e){const r=n+e*_;if(r<0||r>=h.inWidth)continue;const i=a+e*d[1],s=o+r*h.inChannels;let c=t,u=i;for(let e=0;e<h.inChannels;++e){const t=x[s+e];for(let e=0;e<w;++e)T[c+e]+=t*S[u+e];c+=w,u+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const gb={kernelName:Ko.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:mb};const _b={kernelName:Ko.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=r;uv([i,a],"depthwiseConv2dNativeBackpropFilter");const d=Ko.backend_util.computeConv2DInfo(i.shape,l,o,s,c,u,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new Ko.TensorBuffer(d.filterShape,"float32"),_=d.padInfo.left,v=d.padInfo.top,y=d.outChannels/d.inChannels,b=n.data.get(i.dataId).values,w=new Ko.TensorBuffer(i.shape,i.dtype,b),k=n.data.get(a.dataId).values,x=new Ko.TensorBuffer(a.shape,a.dtype,k);for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((v-e)/p)),n=Math.min(d.outHeight,(d.inHeight+v-e)/p);for(let r=0;r<m;++r){const i=Math.max(0,Math.ceil((_-r)/h)),a=Math.min(d.outWidth,(d.inWidth+_-r)/h);for(let o=0;o<d.outChannels;++o){const s=Math.trunc(o/y),c=o%y;let u=0;for(let c=0;c<d.batchSize;++c)for(let l=t;l<n;++l){const t=e+l*p-v;for(let e=i;e<a;++e){const n=r+e*h-_;u+=w.get(c,t,n,s)*x.get(c,l,e,o)}}g.set(u,e,r,s,c)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const vb={kernelName:Ko.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:o,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=r;uv([i,a],"depthwiseConv2DNativeBackpropInput");const d=Ko.util.computeStrides(i.shape),p=Ko.util.computeStrides(a.shape),h=Ko.backend_util.computeConv2DInfo(l,a.shape,o,s,c,u,!0),f=new Ko.TensorBuffer(h.inShape,"float32"),m=f.values,[g,_,v]=f.strides,y=n.data.get(i.dataId).values,[b,w,k]=d,x=n.data.get(a.dataId).values,[S,T,C]=p,{batchSize:E,filterHeight:I,filterWidth:N,inChannels:A,inHeight:O,inWidth:R,outChannels:P,outHeight:D,outWidth:L,strideHeight:M,strideWidth:F}=h,z=I-1-h.padInfo.top,$=N-1-h.padInfo.left,j=P/A;for(let e=0;e<E;++e)for(let t=0;t<A;++t)for(let n=0;n<O;++n){const r=n-z,i=Math.max(0,Math.ceil(r/M)),a=Math.min(D,(I+r)/M);for(let o=0;o<R;++o){const s=o-$,c=Math.max(0,Math.ceil(s/F)),u=Math.min(L,(N+s)/F);let l=0;for(let n=i;n<a;++n){const i=n*M-r;for(let r=c;r<u;++r){const a=b*e+w*n+k*r,o=S*(I-1-i)+T*(N-1-(r*F-s))+C*t;for(let e=0;e<j;++e){l+=y[a+(t*j+e)]*x[o+e]}}}m[g*e+_*n+v*o+t]=l}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const yb={kernelName:Ko.Diag,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=Ko.util.sizeFromShape(r.shape),a=n.data.get(r.dataId).values,o=(0,Ko.buffer)([i,i],r.dtype),s=o.values;for(let e=0;e<a.length;e++)s[e*i+e]=a[e];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,o.dtype,o.values)}},bb={kernelName:Ko.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i}=e,{strides:a,pad:o,dilations:s}=n,c=t,u=c.data.get(r.dataId).values,l=r.shape.length,d=c.data.get(i.dataId).values,p=i.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:_,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:x,dilationHeight:S,dilationWidth:T,outShape:C}=Ko.backend_util.computeDilation2DInfo(r.shape,i.shape,a,o,"NHWC",s),E=Ko.util.sizeFromShape(C),I=C.length,N=Ko.util.getArrayFromDType(r.dtype,E);for(let e=0;e<h;++e)for(let t=0;t<_;++t){const n=t*b-y.top;for(let a=0;a<v;++a){const o=a*w-y.left;for(let s=0;s<g;++s){let c=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){const a=n+t*S;if(a>=0&&a<f)for(let n=0;n<x;++n){const h=o+n*T;if(h>=0&&h<m){const o=Ko.util.locToIndex([e,a,h,s],l,Ko.util.computeStrides(r.shape)),f=Ko.util.locToIndex([t,n,s],p,Ko.util.computeStrides(i.shape)),m=u[o]+d[f];m>c&&(c=m)}}}N[Ko.util.locToIndex([e,t,a,s],I,Ko.util.computeStrides(C))]=c}}}return{dataId:c.write(Ko.util.toTypedArray(N,r.dtype),C,r.dtype),shape:C,dtype:r.dtype}}},wb={kernelName:Ko.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:a}=e,{strides:o,pad:s,dilations:c}=n,u=t,l=Ko.util.toNestedArray(r.shape,u.data.get(r.dataId).values),d=Ko.util.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:_,padInfo:v,strideHeight:y,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:x,dilationWidth:S,outShape:T}=Ko.backend_util.computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",c);Ko.util.assert(a.rank===T.length,(()=>`Error in ${Ko.Dilation2DBackpropFilter}, dy must have the same rank as output ${T.length}, but got ${a.rank}`));const C=Ko.util.toNestedArray(T,u.data.get(a.dataId).values),E=Ko.util.makeZerosNestedTypedArray(i.shape,i.dtype);for(let e=0;e<p;++e)for(let t=0;t<g;++t){const n=t*y-v.top;for(let r=0;r<_;++r){const i=r*b-v.left;for(let a=0;a<m;++a){let o=Number.MIN_SAFE_INTEGER,s=0,c=0;for(let t=0;t<w;++t){const r=n+t*x;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=i+n*S;if(u>=0&&u<f){const i=l[e][r][u][a]+d[t][n][a];i>o&&(o=i,s=t,c=n)}}}E[s][c][a]+=C[e][t][r][a]}}}return{dataId:u.write(Ko.util.toTypedArray(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},kb={kernelName:Ko.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:a}=e,{strides:o,pad:s,dilations:c}=n,u=t,l=Ko.util.toNestedArray(r.shape,u.data.get(r.dataId).values),d=Ko.util.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:_,padInfo:v,strideHeight:y,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:x,dilationWidth:S,outShape:T}=Ko.backend_util.computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",c);Ko.util.assert(a.rank===T.length,(()=>`Error in ${Ko.Dilation2DBackpropInput}, dy must have the same rank as output ${T.length}, but got ${a.rank}`));const C=Ko.util.toNestedArray(T,u.data.get(a.dataId).values),E=Ko.util.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<p;++e)for(let t=0;t<g;++t){const n=t*y-v.top;for(let r=0;r<_;++r){const i=r*b-v.left;for(let a=0;a<m;++a){let o=Number.MIN_SAFE_INTEGER,s=n<0?0:n,c=i<0?0:i;for(let t=0;t<w;++t){const r=n+t*x;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=i+n*S;if(u>=0&&u<f){const i=l[e][r][u][a]+d[t][n][a];i>o&&(o=i,s=r,c=u)}}}E[e][s][c][a]+=C[e][t][r][a]}}}return{dataId:u.write(Ko.util.toTypedArray(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};const xb={kernelName:Ko.Draw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:c}=o||{},u=(null==c?void 0:c.alpha)||1,l=(null==s?void 0:s.contextType)||"2d";if("2d"!==l)throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const d=a.getContext(l,(null==s?void 0:s.contextAttributes)||{});if(null==d)throw new Error(`Could not get the context with ${l} type.`);const[p,h]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],m=n.data.get(i.dataId).values,g="float32"===i.dtype?255:1,_=new Uint8ClampedArray(h*p*4);for(let e=0;e<p*h;++e){const t=[0,0,0,255*u];for(let n=0;n<f;n++){const r=m[e*f+n];if("float32"===i.dtype){if(r<0||r>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${r}.`)}else if("int32"===i.dtype&&(r<0||r>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${r}.`);1===f?(t[0]=r*g,t[1]=r*g,t[2]=r*g):t[n]=r*g}const n=4*e;_[n+0]=Math.round(t[0]),_[n+1]=Math.round(t[1]),_[n+2]=Math.round(t[2]),_[n+3]=Math.round(t[3])}a.width=h,a.height=p;const v=new ImageData(_,h,p);return d.putImageData(v,0,0),i}},Sb=wv(((e,t)=>e*t)),Tb=Vv(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),Cb=Bv(Ko.Multiply,Sb,Tb),Eb={kernelName:Ko.Multiply,backendName:"cpu",kernelFunc:Cb};function Ib(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;let s;uv(i,"sum"),s="bool"===i.dtype?$v({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):_v({inputs:{x:i},backend:n});const c=s.shape.length,u=Ko.util.parseAxisParam(a,s.shape),l=Ko.backend_util.getAxesPermutation(u,c);let d=u,p=s;null!=l&&(p=oy({inputs:{x:s},backend:n,attrs:{perm:l}}),d=Ko.backend_util.getInnerMostAxes(d.length,c)),Ko.backend_util.assertAxesAreInnerMostDims("sum",d,p.shape.length);const[h,f]=Ko.backend_util.computeOutAndReduceShapes(p.shape,d);let m=Lv(n,h,Ko.backend_util.upcastType(p.dtype,"int32"));const g=Ko.util.sizeFromShape(f),_=n.data.get(m.dataId).values,v=n.data.get(p.dataId).values;for(let e=0;e<_.length;++e){const t=e*g;let n=0;for(let e=0;e<g;++e)n+=v[t+e];_[e]=n}if(o){const e=m;m=Hv({inputs:{x:m},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=l&&n.disposeIntermediateTensorInfo(p),m}const Nb={kernelName:Ko.Sum,backendName:"cpu",kernelFunc:Ib};const Ab={kernelName:Ko.Einsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:o,summedDims:s,idDims:c}=Ko.backend_util.decodeEinsumEquation(i,a.length);Ko.backend_util.checkEinsumDimSizes(o.length,c,a);const{path:u,steps:l}=Ko.backend_util.getEinsumComputePath(s,c),d=l.length;let p=null,h=o.length;const f=[];for(let e=0;e<d;++e){for(const t of l[e]){const{permutationIndices:e,expandDims:r}=Ko.backend_util.getEinsumPermutation(h,c[t]);let i;Ko.backend_util.isIdentityPermutation(e)?i=a[t]:(i=oy({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),f.push(i));const o=i.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);Ko.util.arraysEqual(i.shape,o)||(i=Hv({inputs:{x:i},backend:n,attrs:{shape:o}}),f.push(i)),null===p?p=i:(p=Cb({inputs:{a:i,b:p},backend:n}),f.push(p))}e<d-1&&(u[e]>=0&&(p=Ib({inputs:{x:p},backend:n,attrs:{axis:u[e]-(o.length-h),keepDims:!1}}),f.push(p)),h--)}for(const e of f)e!==p&&n.disposeIntermediateTensorInfo(e);return p}};const Ob={kernelName:Ko.EluGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;uv([r,i],"eluGrad");const a=new Float32Array(Ko.util.sizeFromShape(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let e=0;e<o.length;++e){const t=o[e];a[e]=t>=0?s[e]:s[e]*(t+1)}return n.makeTensorInfo(i.shape,"float32",a)}},Rb=wv(((e,t)=>e===t?1:0)),Pb=Bv(Ko.Equal,Rb,null,"bool"),Db={kernelName:Ko.Equal,backendName:"cpu",kernelFunc:Pb},Lb=Ko.backend_util.ERF_P,Mb=Ko.backend_util.ERF_A1,Fb=Ko.backend_util.ERF_A2,zb=Ko.backend_util.ERF_A3,$b=Ko.backend_util.ERF_A4,jb=Ko.backend_util.ERF_A5,Bb=hv(Ko.Erf,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+Lb*n);return t*(1-((((jb*r+$b)*r+zb)*r+Fb)*r+Mb)*r*Math.exp(-n*n))})),Vb={kernelName:Ko.Erf,backendName:"cpu",kernelFunc:Bb},Ub=pv((e=>Math.exp(e))),Gb=fv(Ko.Exp,Ub,"float32"),qb={kernelName:Ko.Exp,backendName:"cpu",kernelFunc:Gb};function Wb(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:a}=r,o=i.shape.length,s=i.shape.slice();let c=a;return a<0&&(Ko.util.assert(-(o+1)<=a,(()=>`Axis must be in the interval [${-(o+1)}, ${o}]`)),c=o+a+1),s.splice(c,0,1),Hv({inputs:{x:i},backend:n,attrs:{shape:s}})}const Hb={kernelName:Ko.ExpandDims,backendName:"cpu",kernelFunc:Wb},Yb=pv((e=>Math.expm1(e))),Kb=fv(Ko.Expm1,Yb),Xb={kernelName:Ko.Expm1,backendName:"cpu",kernelFunc:Kb},Qb=wv(((e,t)=>e/t)),Jb=Bv(Ko.RealDiv,Qb),Zb={kernelName:Ko.RealDiv,backendName:"cpu",kernelFunc:Jb},ew=wv(((e,t)=>e-t)),tw=Vv(((e,t,n,r)=>({real:e-n,imag:t-r}))),nw=Bv(Ko.Sub,ew,tw),rw={kernelName:Ko.Sub,backendName:"cpu",kernelFunc:nw};function iw(e,t,n){const r=e.shape,i=r[0],a=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,c=o.complexTensorInfos.imag,u=[i,a],l=Ko.util.sizeFromShape(u),d=Ko.util.getTypedArrayFromDType("float32",l),p=Ko.util.getTypedArrayFromDType("float32",l);for(let e=0;e<i;e++){const r=Ry({inputs:{x:s},backend:n,attrs:{begin:[e,0],size:[1,a]}}),i=Ry({inputs:{x:c},backend:n,attrs:{begin:[e,0],size:[1,a]}}),o=Pv({inputs:{real:r,imag:i},backend:n}),{real:u,imag:l}=aw(o,t,n),h=Ko.backend_util.mergeRealAndImagArrays(u,l);for(let t=0;t<a;t++){const n=Ko.backend_util.getComplexWithIndex(h,t);d[e*a+t]=n.real,p[e*a+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o)}const h=n.makeTensorInfo(u,"float32",d),f=n.makeTensorInfo(u,"float32",p),m=Pv({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}function aw(e,t,n){const r=Ko.util.sizeFromShape(e.shape),i=n.data.get(e.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if((s=r)&s-1){const e=function(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let a=0,o=0;for(let r=0;r<t;r++){const s=Ko.backend_util.exponent(i*r,t,n),c=Ko.backend_util.getComplexWithIndex(e,r);a+=c.real*s.real-c.imag*s.imag,o+=c.real*s.imag+c.imag*s.real}n&&(a/=t,o/=t),Ko.backend_util.assignToTypedArray(r,a,o,i)}return r}(Ko.backend_util.mergeRealAndImagArrays(a,o),r,t);return Ko.backend_util.splitRealAndImagArrays(e)}{const i=ow(a,o,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),a=n.makeTensorInfo([],"float32",Ko.util.createScalarValue(r,"float32")),o=_v({inputs:{x:a},backend:n}),c=Zb.kernelFunc({inputs:{a:e,b:a},backend:n}),u=Zb.kernelFunc({inputs:{a:t,b:o},backend:n}),l=n.data.get(c.dataId).values,d=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),{real:l,imag:d}}return i}var s}function ow(e,t,n,r,i){if(1===n)return{real:e,imag:t};const a=Ko.backend_util.mergeRealAndImagArrays(e,t),o=n/2,s=Ko.backend_util.complexWithEvenIndex(a),c=s.real,u=s.imag,l=[c.length],d=i.makeTensorInfo(l,"float32",c),p=i.makeTensorInfo(l,"float32",u),h=Pv({inputs:{real:d,imag:p},backend:i}),f=Ko.backend_util.complexWithOddIndex(a),m=f.real,g=f.imag,_=[m.length],v=i.makeTensorInfo(_,"float32",m),y=i.makeTensorInfo(_,"float32",g),b=Pv({inputs:{real:v,imag:y},backend:i}),w=ow(c,u,o,r,i),k=w.real,x=w.imag,S=[k.length],T=i.makeTensorInfo(S,"float32",k),C=i.makeTensorInfo(S,"float32",x),E=Pv({inputs:{real:T,imag:C},backend:i}),I=ow(m,g,o,r,i),N=I.real,A=I.imag,O=[N.length],R=i.makeTensorInfo(O,"float32",N),P=i.makeTensorInfo(O,"float32",A),D=Pv({inputs:{real:R,imag:P},backend:i}),L=Ko.backend_util.exponents(n,r),M=[L.real.length],F=i.makeTensorInfo(M,"float32",L.real),z=i.makeTensorInfo(M,"float32",L.imag),$=Pv({inputs:{real:F,imag:z},backend:i}),j=Cb({inputs:{a:$,b:D},backend:i}),B=qv({inputs:{a:E,b:j},backend:i}),V=nw({inputs:{a:E,b:j},backend:i}),U=Mv({inputs:{input:B},backend:i}),G=Mv({inputs:{input:V},backend:i}),q=Ky({inputs:{input:B},backend:i}),W=Ky({inputs:{input:V},backend:i}),H=Qy({inputs:[U,G],backend:i,attrs:{axis:0}}),Y=Qy({inputs:[q,W],backend:i,attrs:{axis:0}}),K=i.data.get(H.dataId).values,X=i.data.get(Y.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(Y),{real:K,imag:X}}const sw={kernelName:Ko.FFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=Ko.util.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=Hv({inputs:{x:r},backend:n,attrs:{shape:[i/a,a]}}),s=iw(o,!1,n),c=Hv({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}};function cw(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:a}=n,o=a||Ko.util.inferDtype(i),s=Ko.util.getArrayFromDType(o,Ko.util.sizeFromShape(r));return function(e,t){e.fill(t)}(s,i),t.makeTensorInfo(r,o,s)}const uw={kernelName:Ko.Fill,backendName:"cpu",kernelFunc:cw};const lw={kernelName:Ko.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,i=n,a=Ko.util.getTypedArrayFromDType(r.dtype,Ko.util.sizeFromShape(r.shape)),[o,s,c,u]=r.shape,l=i.data.get(r.dataId).values;for(let e=0;e<o;e++){const t=e*c*s*u;for(let e=0;e<s;e++){const n=e*(c*u);for(let e=0;e<c;e++){const r=e*u;for(let i=0;i<u;i++){const o=Math.round(c-e-1),s=t+n+r+i;let d=l[s];if(o>=0&&o<c){d=l[t+n+o*u+i]}a[s]=d}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},dw=pv((e=>Math.floor(e))),pw=fv(Ko.Floor,dw),hw={kernelName:Ko.Floor,backendName:"cpu",kernelFunc:pw},fw=wv(((e,t)=>Math.floor(e/t))),mw=Bv(Ko.FloorDiv,fw,null,"int32"),gw={kernelName:Ko.FloorDiv,backendName:"cpu",kernelFunc:mw};const _w={kernelName:Ko.FusedConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=Zy({inputs:{x:i,filter:a},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p}});if(o){const e=m;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){const e=Hv({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=qv({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=qv({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(e)}if(h){const e=m;if("NCHW"===l&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){const e=Hv({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Rv(n,m,h,e,f),n.disposeIntermediateTensorInfo(e)}else m=Rv(n,m,h,s,f);n.disposeIntermediateTensorInfo(e)}return m}};const vw={kernelName:Ko.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=mb({inputs:{x:i,filter:a},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p}});if(o){const e=m;m=qv({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=Rv(n,m,h,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function yw(e,t,n,r,i,a,o,s,c){const u=(0,Ko.buffer)([r,a],n);for(let n=0;n<r;n++){const r=[];let l=0;for(let t=0;t<i;t++){const a=e[n*i+t];l+=a*o[t],r.push(a)}if(l<0||l>=c/a)throw new Error(`Invalid indices: ${r} does not index into ${s}`);for(let e=0;e<a;e++)u.values[n*a+e]=t.get(...t.indexToLoc(l*a+e))}return u}const bw={kernelName:Ko.GatherNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=Ko.util.sizeFromShape(r.shape),o=i.shape,s=o[o.length-1],[c,u,l,d]=Ko.backend_util.prepareAndValidate(r,i);if(0===u)return n.makeTensorInfo(c,r.dtype,[]);const p=yw(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,u,s,l,d,r.shape,a);return n.makeTensorInfo(c,r.dtype,p.values)}};function ww(e,t,n){const r=(0,Ko.buffer)(n,e.dtype);for(let n=0;n<r.size;++n){const i=r.indexToLoc(n).slice(),a=i[0],o=i[2],s=t.locToIndex([a,o]);i[2]=t.values[s];const c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[n]=e.values[c])}return r}const kw={kernelName:Ko.GatherV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:o,batchDims:s}=r;uv([i,a],"gatherV2");const c=Ko.util.parseAxisParam(o,i.shape)[0],u=n.data.get(a.dataId).values,l=i.shape[c];for(let e=0;e<u.length;++e){const t=u[e];Ko.util.assert(t<=l-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${l-1}]`))}let d=s;null==s&&(d=0);const p=Ko.util.sizeFromShape(a.shape),h=Ko.backend_util.segment_util.collectGatherOpShapeInfo(i,a,c,d),f=Hv({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=Hv({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],_=n.bufferSync(m),v=ww(n.bufferSync(f),_,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}},xw=wv(((e,t)=>e>t?1:0)),Sw=Bv(Ko.Greater,xw,null,"bool"),Tw={kernelName:Ko.Greater,backendName:"cpu",kernelFunc:Sw},Cw=wv(((e,t)=>e>=t?1:0)),Ew=Bv(Ko.GreaterEqual,Cw,null,"bool"),Iw={kernelName:Ko.GreaterEqual,backendName:"cpu",kernelFunc:Ew};const Nw={kernelName:Ko.IFFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=Ko.util.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=Hv({inputs:{x:r},backend:n,attrs:{shape:[i/a,a]}}),s=iw(o,!0,n),c=Hv({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}},Aw=hv(Ko.IsFinite,(e=>Number.isFinite(e)?1:0),"bool"),Ow={kernelName:Ko.IsFinite,backendName:"cpu",kernelFunc:Aw},Rw=hv(Ko.IsInf,(e=>Math.abs(e)===1/0?1:0),"bool"),Pw={kernelName:Ko.IsInf,backendName:"cpu",kernelFunc:Rw},Dw=hv(Ko.IsNan,(e=>Number.isNaN(e)?1:0),"bool"),Lw={kernelName:Ko.IsNan,backendName:"cpu",kernelFunc:Dw},Mw=wv(((e,t)=>e<t?1:0)),Fw=Bv(Ko.Less,Mw,null,"bool"),zw={kernelName:Ko.Less,backendName:"cpu",kernelFunc:Fw},$w=wv(((e,t)=>e<=t?1:0)),jw=Bv(Ko.LessEqual,$w,null,"bool"),Bw={kernelName:Ko.LessEqual,backendName:"cpu",kernelFunc:jw};function Vw(e,t,n){const r=(t-e)/(n-1),i=Ko.util.makeZerosTypedArray(n,"float32");i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+r;return i}const Uw={kernelName:Ko.LinSpace,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,o=Vw(r,i,a);return t.makeTensorInfo([o.length],"float32",o)}},Gw=pv((e=>Math.log(e))),qw=fv(Ko.Log,Gw),Ww={kernelName:Ko.Log,backendName:"cpu",kernelFunc:qw},Hw=hv(Ko.Log1p,(e=>Math.log1p(e))),Yw={kernelName:Ko.Log1p,backendName:"cpu",kernelFunc:Hw},Kw=wv(((e,t)=>e&&t)),Xw=Bv(Ko.LogicalAnd,Kw,null,"bool"),Qw={kernelName:Ko.LogicalAnd,backendName:"cpu",kernelFunc:Xw},Jw=hv(Ko.LogicalNot,(e=>e?0:1),"bool"),Zw={kernelName:Ko.LogicalNot,backendName:"cpu",kernelFunc:Jw},ek=wv(((e,t)=>e||t)),tk=Bv(Ko.LogicalOr,ek,null,"bool"),nk={kernelName:Ko.LogicalOr,backendName:"cpu",kernelFunc:tk};const rk={kernelName:Ko.LRN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:o,alpha:s,beta:c}=r;uv(i,"LRN");const u=i.shape[3],l=u-1,d=n.data.get(i.dataId).values,p=Ko.util.sizeFromShape(i.shape),h=new Float32Array(p);function f(e){const t=e%u;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,l);let i=0;for(;n<=r;n++){const e=d[n];i+=e*e}return i}for(let e=0;e<p;e++){const t=f(e),n=d[e]*Math.pow(o+s*t,-c);h[e]=n}return n.makeTensorInfo(i.shape,i.dtype,h)}};const ik={kernelName:Ko.LRNGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:o}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=r;uv(o,"LRNGrad");const d=Ko.util.sizeFromShape(o.shape),p=o.shape[3],h=n.data.get(o.dataId).values,f=n.data.get(i.dataId).values,m=n.data.get(a.dataId).values,g=new Float32Array(d),_=d;for(let e=0;e<_;e++){const t=e%p,n=e-t+Math.max(0,t-s),r=e-t+Math.min(p,t+s+1);let i=0;for(let e=n;e<r;e++)i+=Math.pow(f[e],2);i=u*i+c;for(let t=n;t<r;t++){let n=-2*u*l*f[t]*m[e]/i;e===t&&(n+=Math.pow(i,-l)),n*=h[e],g[t]+=n}}return n.makeTensorInfo(o.shape,i.dtype,g)}};function ak(e,t,n,r){const i=Ko.util.getTypedArrayFromDType(r,Ko.util.sizeFromShape(n));for(let n=0;n<i.length;++n){const r=n*t;let a=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>a)&&(a=t)}i[n]=a}return i}function ok(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:o}=r,s=n;let c=i.shape;const u=c.length,l=Ko.util.parseAxisParam(a,c);let d=l;const p=Ko.backend_util.getAxesPermutation(d,u);let h=s.data.get(i.dataId).values;if(null!=p){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=c[p[t]];h=ay(h,c,i.dtype,p,e),d=Ko.backend_util.getInnerMostAxes(d.length,u),c=e}uv(i,"max"),Ko.backend_util.assertAxesAreInnerMostDims("max",d,u);const[f,m]=Ko.backend_util.computeOutAndReduceShapes(c,d),g=ak(h,Ko.util.sizeFromShape(m),f,i.dtype),_=s.write(g,f,i.dtype);let v=f;if(o){v=Ko.backend_util.expandShapeToKeepDim(f,l)}return{dataId:_,shape:v,dtype:i.dtype}}const sk={kernelName:Ko.Max,backendName:"cpu",kernelFunc:ok},ck=wv(((e,t)=>Math.max(e,t))),uk=Bv(Ko.Maximum,ck),lk={kernelName:Ko.Maximum,backendName:"cpu",kernelFunc:uk};const dk={kernelName:Ko.MaxPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;uv(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:c}=r;Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=Ko.backend_util.computePool2DInfo(i.shape,a,o,1,s,c);let l;if(1===u.filterWidth&&1===u.filterHeight&&Ko.util.arraysEqual(u.inShape,u.outShape))l=_v({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=Ko.util.computeStrides(i.shape),r=xy(e,i.shape,i.dtype,t,u,"max");l=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return l}};const pk={kernelName:Ko.MaxPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:c,dataFormat:u}=r;uv(i,"maxPool3d");const l=Ko.backend_util.computePool3DInfo(i.shape,a,o,1,s,c,u),d=Ty(n.data.get(i.dataId).values,i.shape,i.dtype,Ko.util.computeStrides(i.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const hk={kernelName:Ko.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:c,dimRoundingMode:u}=r;uv([i,a],"maxPool3DGrad");const l=Ko.backend_util.computePool3DInfo(a.shape,o,s,1,c,u),d=function(e,t){const n=(0,Ko.buffer)(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let _=0;_<t.outDepth;++_){const v=_*r-p;let y=v;for(;y<0;)y+=o;const b=Math.min(t.inDepth,u+v);for(let r=0;r<t.outHeight;++r){const u=r*i-h;let p=u;for(;p<0;)p+=s;const w=Math.min(t.inHeight,l+u);for(let i=0;i<t.outWidth;++i){const h=i*a-f;let k=h;for(;k<0;)k+=c;const x=Math.min(t.inWidth,d+h);let S=Number.NEGATIVE_INFINITY,T=-1;for(let t=y;t<b;t+=o){const n=t-v;for(let r=p;r<w;r+=s){const i=r-u;for(let a=k;a<x;a+=c){const o=a-h,s=e.get(m,t,r,a,g);s>=S&&(S=s,T=n*l*d+i*l+o)}}}n.set(T,m,_,r,i,g)}}}return n}(n.bufferSync(a),l),p=l.strideDepth,h=l.strideHeight,f=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,_=l.dilationWidth,v=l.effectiveFilterDepth,y=l.effectiveFilterHeight,b=l.effectiveFilterWidth,w=v-1-l.padInfo.front,k=b-1-l.padInfo.left,x=y-1-l.padInfo.top,S=(0,Ko.buffer)(a.shape,"float32"),T=n.bufferSync(i);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inDepth;++n)for(let r=0;r<l.inHeight;++r)for(let i=0;i<l.inWidth;++i){const a=n-w,o=r-x,s=i-k;let c=0;for(let n=0;n<v;n+=m){const r=(a+n)/p;if(!(r<0||r>=l.outDepth||Math.floor(r)!==r))for(let i=0;i<y;i+=g){const a=(o+i)/h;if(!(a<0||a>=l.outHeight||Math.floor(a)!==a))for(let o=0;o<b;o+=_){const u=(s+o)/f;if(u<0||u>=l.outWidth||Math.floor(u)!==u)continue;const p=v*y*b-1-d.get(e,r,a,u,t)===n*y*b+i*b+o?1:0;if(0===p)continue;c+=T.get(e,r,a,u,t)*p}}}S.set(c,e,n,r,i,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const fk={kernelName:Ko.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:o}=t,s=a;uv([a,o],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=Ko.backend_util.computePool2DInfo(s.shape,c,u,1,l,d),h=n.data.get(s.dataId).values,f=(0,Ko.buffer)(p.outShape,s.dtype,Sy(h,s.shape,s.dtype,p).values),m=p.strideHeight,g=p.strideWidth,_=p.dilationHeight,v=p.dilationWidth,y=p.effectiveFilterHeight,b=p.effectiveFilterWidth,w=b-1-p.padInfo.left,k=y-1-p.padInfo.top,x=(0,Ko.buffer)(s.shape,"float32"),S=n.data.get(i.dataId).values,T=(0,Ko.buffer)(i.shape,"float32",S);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inHeight;++n)for(let r=0;r<p.inWidth;++r){const i=n-k,a=r-w;let o=0;for(let n=0;n<y;n+=_){const r=(i+n)/m;if(!(r<0||r>=p.outHeight||Math.floor(r)!==r))for(let i=0;i<b;i+=v){const s=(a+i)/g;if(s<0||s>=p.outWidth||Math.floor(s)!==s)continue;const c=y*b-1-f.get(e,r,s,t)===n*b+i?1:0;if(0===c)continue;o+=T.get(e,r,s,t)*c}}x.set(o,e,n,r,t)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const mk={kernelName:Ko.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=t,c=n;uv(r,"MaxPoolWithArgmax");const u=c.data.get(r.dataId).values,l=Ko.backend_util.computePool2DInfo(r.shape,i,a,[1,1],o),[d,p]=function(e,t,n,r,i){const a=xy(e,0,n,Ko.util.computeStrides(t),i,"max"),o=Sy(e,t,n,i,!0,r);return[a.values,o.values]}(u,r.shape,r.dtype,s,l),h=c.write(d,l.outShape,r.dtype),f=c.write(p,l.outShape,r.dtype);return[{dataId:h,shape:l.outShape,dtype:r.dtype},{dataId:f,shape:l.outShape,dtype:"int32"}]}};const gk={kernelName:Ko.Mean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=Ko.util.parseAxisParam(a,i.shape),c=Ko.backend_util.computeOutAndReduceShapes(i.shape,s)[1],u=Ko.util.sizeFromShape(c),l=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(d);const p=$v({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});l.push(p);const h=Jb({inputs:{a:p,b:d},backend:n});l.push(h);const f=Ib({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:o}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};const _k={kernelName:Ko.Min,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;uv(i,"min");const s=Ko.util.parseAxisParam(a,i.shape);let c=s;const u=Ko.backend_util.getAxesPermutation(c,i.shape.length);let l=i;null!=u&&(l=oy({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ko.backend_util.getInnerMostAxes(c.length,i.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("min",c,l.shape.length);const[d,p]=Ko.backend_util.computeOutAndReduceShapes(l.shape,c),h=Ko.util.sizeFromShape(p),f=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(o){const e=Hv({inputs:{x:g},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},vk=wv(((e,t)=>Math.min(e,t))),yk=Bv(Ko.Minimum,vk),bk={kernelName:Ko.Minimum,backendName:"cpu",kernelFunc:yk};const wk={kernelName:Ko.MirrorPad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,mode:o}=r;uv(i,"mirrorPad");const s=a.map(((e,t)=>e[0]+i.shape[t]+e[1])),c=a.map((e=>e[0])),u=a.map(((e,t)=>e[0]+i.shape[t])),l="reflect"===o?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,h=Ko.util.computeStrides(i.shape),f=Ko.util.sizeFromShape(s),m=s.length,g=Ko.util.computeStrides(s),_=Ko.util.getTypedArrayFromDType(i.dtype,f);for(let e=0;e<f;e++){let t=Ko.util.indexToLoc(e,m,g);for(let e=0;e<m;e++)t[e]<c[e]?t[e]=2*c[e]-t[e]-l:t[e]>=u[e]&&(t[e]=2*(u[e]-1)-t[e]+l);t=t.map(((e,t)=>e-c[t]));const n=Ko.util.locToIndex(t,p,h);_[e]=d[n]}return{dataId:n.write(_,s,i.dtype),shape:s,dtype:i.dtype}}},kk=wv(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),xk=Bv(Ko.Mod,kk),Sk={kernelName:Ko.Mod,backendName:"cpu",kernelFunc:xk};function Tk(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,o=i.shape.length;let s=a;if(-1===s&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const c=Ko.util.parseAxisParam([s],i.shape),u=ok({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),l=Ko.backend_util.expandShapeToKeepDim(u.shape,c),d=Hv({inputs:{x:u},backend:n,attrs:{shape:l}}),p=nw({inputs:{a:i,b:d},backend:n}),h=Gb({inputs:{x:p},backend:n}),f=Ib({inputs:{x:h},backend:n,attrs:{axis:c,keepDims:!1}}),m=Hv({inputs:{x:f},backend:n,attrs:{shape:l}}),g=Jb({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const Ck={kernelName:Ko.Softmax,backendName:"cpu",kernelFunc:Tk};const Ek={kernelName:Ko.Multinomial,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:o,normalized:s}=r;uv(i,"multinomial");const c=s?i:Tk({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=c.shape[0],l=c.shape[1],d=n.data.get(c.dataId).values,p=[u,a],h=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(p),"int32");for(let e=0;e<u;++e){const t=e*l,n=new Float32Array(l-1);n[0]=d[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+d[t+e];const r=R_.alea(o.toString()),i=e*a;for(let e=0;e<a;++e){const t=r();h[i+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){h[i+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(p,"int32",h)}};function Ik(e,t,n){const r=Ko.util.createScalarValue(-1,n);return Sb([],t,r,e,n)}const Nk={kernelName:Ko.Neg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;uv(r,"neg");const i=n.data.get(r.dataId).values,[a,o]=Ik(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}},Ak=Ko.kernel_impls.nonMaxSuppressionV3Impl;const Ok={kernelName:Ko.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c}=r;uv(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,{selectedIndices:d}=Ak(u,l,o,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Rk=Ko.kernel_impls.nonMaxSuppressionV4Impl;const Pk={kernelName:Ko.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:u}=r;uv(i,"NonMaxSuppressionPadded");const l=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:h}=Rk(l,d,o,s,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Dk=Ko.kernel_impls.nonMaxSuppressionV5Impl;const Lk={kernelName:Ko.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=r;uv(i,"NonMaxSuppressionWithScore");const l=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=o,h=s,f=c,m=u,{selectedIndices:g,selectedScores:_}=Dk(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([_.length],"float32",new Float32Array(_))]}},Mk=wv(((e,t)=>e!==t?1:0)),Fk=Bv(Ko.NotEqual,Mk,null,"bool"),zk={kernelName:Ko.NotEqual,backendName:"cpu",kernelFunc:Fk};const $k={kernelName:Ko.OneHot,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:o,onValue:s,offValue:c}=r;uv(i,"oneHot");const u=Ko.util.sizeFromShape(i.shape),l=new Float32Array(u*o);l.fill(c);const d=n.data.get(i.dataId).values;for(let e=0;e<u;++e)d[e]>=0&&d[e]<o&&(l[e*o+d[e]]=s);return n.makeTensorInfo([...i.shape,o],a,l)}};function jk(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=Mv({inputs:{input:r},backend:n}),t=jk({inputs:{x:e},backend:n}),i=Ky({inputs:{input:r},backend:n}),a=jk({inputs:{x:i},backend:n}),o=Pv({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),o}return cw({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Bk={kernelName:Ko.ZerosLike,backendName:"cpu",kernelFunc:jk};const Vk={kernelName:Ko.OnesLike,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const t=Mv({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),a=Ky({inputs:{input:i},backend:r}),o=jk({inputs:{x:a},backend:r}),s=Pv({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}return cw({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function Uk(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return Wb({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const a=t[0].shape,o=t[0].dtype;t.forEach((e=>{Ko.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Ko.util.assert(o===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=t.map((e=>{const t=Wb({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),u=Qy({inputs:c,backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const Gk={kernelName:Ko.Pack,backendName:"cpu",kernelFunc:Uk};const qk={kernelName:Ko.PadV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:o}=r;uv(i,"pad");const s=a.map(((e,t)=>e[0]+i.shape[t]+e[1])),c=a.map((e=>e[0])),u=n.data.get(i.dataId).values,l=Ko.util.sizeFromShape(i.shape),d=i.shape.length,p=Ko.util.computeStrides(i.shape),h=Ko.util.sizeFromShape(s),f=s.length,m=Ko.util.computeStrides(s),g=Ko.util.getTypedArrayFromDType(i.dtype,h);0!==o&&g.fill(o);for(let e=0;e<l;e++){const t=Ko.util.indexToLoc(e,d,p).map(((e,t)=>e+c[t]));g[Ko.util.locToIndex(t,f,m)]=u[e]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}},Wk=wv(((e,t)=>Math.pow(e,t))),Hk=Bv(Ko.Pow,Wk),Yk={kernelName:Ko.Pow,backendName:"cpu",kernelFunc:Hk};function Kk(e,t,n,r){const[i,a]=Ko.backend_util.computeOutAndReduceShapes(e,r),o=(0,Ko.upcastType)(t,"int32"),s=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(i),o),c=Ko.util.sizeFromShape(a);for(let e=0;e<s.length;++e){const t=e*c;let r=1;for(let e=0;e<c;++e)r*=n[t+e];s[e]=r}return{outVals:s,outShape:i,outDtype:o}}const Xk={kernelName:Ko.Prod,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;uv(i,"prod");const s=i.shape.length,c=Ko.util.parseAxisParam(a,i.shape),u=Ko.backend_util.getAxesPermutation(c,s);let l=c,d=i;const p=[];null!=u&&(d=oy({inputs:{x:i},backend:n,attrs:{perm:u}}),p.push(d),l=Ko.backend_util.getInnerMostAxes(l.length,s));const h=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=Kk(d.shape,d.dtype,h,l);let _=m;return o&&(_=Ko.backend_util.expandShapeToKeepDim(m,c)),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(_,g,f)}};function Qk(e,t,n,r){const i=[];let a=0;const o=t.length-1+n.length,s=new Array(o).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let c=1;for(let e=0;e<t.length-1;++e){c*=t[e];const n=t[e+1];for(let t=1;t<c+1;++t)s[e].push(t*n)}for(let r=0;r<e.length;++r){let o=e[r],c=e[r]+1;for(let e=0;e<n.length;++e){const r=n[e],i=e+t.length-1;if(i>=0){const e=s[i],t=e[e.length-1]-r[o];for(let e=o;e<c;++e)s[i].push(r[e+1]+t)}o=r[o],c=r[c]}c!==o&&(i.push([o,c]),a+=c-o)}return{outSplits:s,valueSlices:i,numValues:a}}function Jk(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Zk(e,t,n,r,i){const a=t.slice();a[0]=i;const o=Ko.util.getArrayFromDType(n,Ko.util.sizeFromShape(a)),s=e.length;return function(e,t,n,r,i,a){const o=Jk(t,2)[1],s=Jk(a,2)[1];let c=0;for(const t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)i[c*s+t]=e[n*o+t];++c}}(e,t,r,0===s?0:s/t[0],o,a),[o,a]}function ex(e,t,n,r,i,a,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const i=Ko.util.indexToLoc(r,t.length,Ko.util.computeStrides(t)).join(",");throw new Error(`indices[${i}] = ${e} is not in [0, ${n})`)}}))}(a,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:l,numValues:d}=Qk(a,o,e,c),p=function(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,i=Ko.util.getArrayFromDType("int32",r);t.push(i),e[n].forEach(((e,t)=>i[t]=e))}return t}(u),h=Zk(n,r,i,l,d);return[p,h[0],h[1]]}const tx={kernelName:Ko.RaggedGather,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=t,{outputRaggedRank:s}=r,c=i.map((e=>n.data.get(e.dataId).values)),u=i.map((e=>e.shape)),l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,[p,h,f]=ex(c,u,l,a.shape,a.dtype,d,o.shape),m=p.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,h);return m.concat([g])}},nx=2147483647;function rx(e,t,n,r,i,a,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,c=0===i.length,u=0===o.length,l=[];s||l.push(t[0]),c||l.push(i[0]),u||l.push(o[0]);for(let e=1;e<l.length;++e)if(l[e]!==l[e-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===l.length?1:l[0],p=Ko.util.getArrayFromDType("int32",d+1);p[0]=0;for(let t=0;t<d;++t){const n=s?e[0]:e[t],i=c?r[0]:r[t],o=u?a[0]:a[t];if(0===o)throw new Error("Requires delta != 0");let l;if(o>0&&i<n||o<0&&i>n)l=0;else if(l=Math.ceil(Math.abs((i-n)/o)),l>nx)throw new Error(`Requires ((limit - start) / delta) <= ${nx}`);p[t+1]=p[t]+l}const h=p[d],f=Ko.util.getArrayFromDType(n,h);let m=0;for(let t=0;t<d;++t){const n=p[t+1]-p[t];let r=s?e[0]:e[t];const i=u?a[0]:a[t];for(let e=0;e<n;++e)f[m++]=r,r+=i}return[p,f]}const ix={kernelName:Ko.RaggedRange,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,[u,l]=rx(o,r.shape,r.dtype,s,i.shape,c,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([l.length],r.dtype,l)]}};var ax=Ko.backend_util.RowPartitionType;class ox{constructor(e,t,n,r,i,a,o,s,c,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=s,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Ko.backend_util.getRowPartitionTypesHelper(u),this.raggedRank=Ko.backend_util.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ax.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ax.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ax.VALUE_ROWIDS:return ox.getMaxWidthValueRowID(t);case ax.ROW_SPLITS:return ox.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${ax[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let a=1;a<t;++a){const t=e[a];t!==r&&(r=t,i=Math.max(a-n,i),n=a)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return cx(e,n)}calculateOutputSize(e){const t=this.valuesShape,n=this.defaultValueShape;Ko.backend_util.validateDefaultValueShape(n,t);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=Ko.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);i[0]<0&&(i[0]=e);for(let e=1;e<=this.raggedRank;++e)i[e]<0&&(i[e]=this.getMaxWidth(e));return i}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),i=[];let a=0;for(let e=0;e<r;++e,a+=t)i.push(a);for(let t=r;t<e;++t)i.push(-1);return Ko.util.assert(i.length===e,(()=>"Final length of result must be equal to firstDimension.")),i}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,a=[];for(let o=0;o<i-1;++o){const i=e[o+1]-e[o];let s=Math.min(r,i),c=t[o];-1===c&&(s=0);for(let e=0;e<s;++e)a.push(c),c+=n;for(let e=0;e<i-s;++e)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,a=[];if(0===i)return[];let o=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let c=t[s];a.push(c);for(let u=1;u<i;++u){const i=e[u];if(i===s)c>=0&&(++o,o<r?c+=n:c=-1);else{if(o=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);c=t[i]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case ax.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case ax.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error(`Unsupported partition type: ${ax[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case ax.FIRST_DIM_SIZE:return e[0];case ax.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ax.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ax[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];const r=cx(t,!1),i=Ko.util.getArrayFromDType(this.valuesDType,Ko.util.sizeFromShape(r));if(n[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){a=this.calculateOutputIndex(e-1,a,n[e],t[e])}this.setOutput(this.raggedRank,a,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;const i=this.values,a=n;let o=r.slice();o=o.slice(e+1);const s=Ko.util.sizeFromShape(o),c=t.length;let u=this.defaultValue;if(u.length!==s&&1!==u.length){const e=this.defaultValueShape;(0,Ko.tidy)((()=>{const t=(0,Ko.reshape)(u,e),n=(0,Ko.broadcastTo)(t,o);u=n.dataSync()}))}let l=0,d=0,p=0;for(let e=0;e<=c;++e){let r=e<c?t[e]:-1;if(r!==p){if(d<p){const e=i.subarray(l*s);sx(a.subarray(d*s),e,(p-d)*s)}if(e>=c){const e=n.length;r=Math.floor(e/s)}if(r>p)if(1===this.defaultValue.length)a.subarray(p*s,r*s).fill(this.defaultValue[0]),p=r;else for(;r>p;){sx(a.slice(p*s),u,s),++p}r<0?(l=e+1,d=p):(l=e,d=p,p=d+1)}else++p}}}function sx(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function cx(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function ux(e,t,n,r,i,a,o,s,c,u){return new ox(e,t,n,r,i,a,o,s,c,u).compute()}const lx={kernelName:Ko.RaggedTensorToTensor,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:c}=r,u=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=s.map((e=>n.data.get(e.dataId).values)),h=s.map((e=>e.shape)),[f,m]=ux(u,i.shape,l,a.shape,a.dtype,d,o.shape,p,h,c);return n.makeTensorInfo(f,a.dtype,m)}};function dx(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Ko.util.makeZerosTypedArray(0,r);const i=Math.abs(Math.ceil((t-e)/n)),a=Ko.util.makeZerosTypedArray(i,r);t<e&&1===n&&(n=-1),a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}const px={kernelName:Ko.Range,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:a,step:o}=n,s=dx(r,i,o,a);return t.makeTensorInfo([s.length],a,s)}},hx=hv(Ko.Reciprocal,(e=>1/e)),fx={kernelName:Ko.Reciprocal,backendName:"cpu",kernelFunc:hx};const mx={kernelName:Ko.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r;uv(i,"resizeBilinear");const c=Ko.util.computeStrides(i.shape),[u,l]=s,[d,p,h,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(Ko.util.sizeFromShape([d,u,l,f])),_=[a&&u>1?p-1:p,a&&l>1?h-1:h],v=[a&&u>1?u-1:u,a&&l>1?l-1:l];let y=0;const b=_[0]/v[0],w=_[1]/v[1];for(let e=0;e<d;e++)for(let t=0;t<u;t++){let n;n=o?b*(t+.5)-.5:b*t;const r=Math.max(0,Math.floor(n)),i=n-r,a=Math.min(p-1,Math.ceil(n)),s=e*c[0]+r*c[1],u=e*c[0]+a*c[1];for(let e=0;e<l;e++){let t;t=o?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(h-1,Math.ceil(t)),l=s+n*c[2],d=u+n*c[2],p=s+a*c[2],_=u+a*c[2];for(let e=0;e<f;e++){const t=m[l+e],n=m[d+e],a=t+(m[p+e]-t)*r,o=a+(n+(m[_+e]-n)*r-a)*i;g[y++]=o}}}return n.makeTensorInfo([d,u,l,f],"float32",g)}};const gx={kernelName:Ko.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r;uv([a,i],"resizeBilinearGrad");const s=Ko.util.computeStrides(i.shape),[c,u,l,d]=i.shape,[,p,h]=a.shape,f=new Float32Array(c*u*l*d),m=[o&&p>1?u-1:u,o&&h>1?l-1:l],g=[o&&p>1?p-1:p,o&&h>1?h-1:h],_=m[0]/g[0],v=m[1]/g[1],y=n.data.get(a.dataId).values;let b=0;for(let e=0;e<c;e++){const t=e*s[0];for(let e=0;e<p;e++){const n=e*_,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),a=t+r*s[1],o=t+i*s[1],c=n-r,p=1-c;for(let e=0;e<h;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),l-1),i=t-n,u=1-i,h=a+n*s[2],m=a+r*s[2],g=o+n*s[2],_=o+r*s[2],w=p*u,k=p*i,x=c*u,S=c*i;for(let e=0;e<d;e++){const t=y[b++];f[h+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*x,f[_+e]+=t*S}}}}return n.makeTensorInfo([c,l,u,d],"float32",f)}};const _x={kernelName:Ko.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r;uv(i,"resizeNearestNeighbor");const c=Ko.util.computeStrides(i.shape),[u,l]=s,[d,p,h,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(d*u*l*f),_=[a&&u>1?p-1:p,a&&l>1?h-1:h],v=[a&&u>1?u-1:u,a&&l>1?l-1:l],y=_[0]/v[0],b=_[1]/v[1];let w=0;for(let e=0;e<d;e++){const t=e*c[0];for(let e=0;e<u;e++){const n=o?y*(e+.5):y*e;let r=Math.min(p-1,a?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));const i=t+r*c[1];for(let e=0;e<l;e++){const t=o?b*(e+.5):b*e;let n=Math.min(h-1,a?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));const r=i+n*c[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([d,u,l,f],i.dtype,g)}};const vx={kernelName:Ko.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r;uv([a,i],"resizeNearestNeighborGrad");const s=Ko.util.computeStrides(i.shape),c=Ko.util.computeStrides(a.shape),[u,l,d,p]=i.shape,[,h,f]=a.shape,m=new Float32Array(u*l*d*p),g=n.data.get(a.dataId).values,_=[o&&h>1?l-1:l,o&&f>1?d-1:d],v=[o&&h>1?h-1:h,o&&f>1?f-1:f],y=_[0]/v[0],b=_[1]/v[1],w=1/y,k=1/b,x=2*Math.ceil(w)+2,S=2*Math.ceil(k)+2;for(let e=0;e<u;e++){const t=e*s[0];for(let e=0;e<l;e++){const n=t+e*s[1],r=Math.floor(e*w),i=Math.floor(r-x/2);for(let r=0;r<d;r++){const a=n+r*s[2],u=Math.floor(r*k),_=Math.floor(u-S/2);for(let n=0;n<p;n++){let s=0;for(let a=0;a<x;a++){const u=a+i;if(u<0||u>=h)continue;const p=t+u*c[1],m=u*y;if(e===Math.min(l-1,o?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){const t=e+_;if(t<0||t>=f)continue;const i=p+t*c[2],a=t*b;r===Math.min(d-1,o?Math.round(a):Math.floor(a))&&(s+=g[i+n])}}m[a+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}};const yx={kernelName:Ko.Reverse,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r;uv(i,"reverse");const o=i.shape.length,s=Ko.util.parseAxisParam(a,i.shape);if(0===o)return _v({inputs:{x:i},backend:n});const c=new Ko.TensorBuffer(i.shape,i.dtype),u=n.bufferSync(i);for(let e=0;e<c.size;e++){const t=c.indexToLoc(e),n=t.slice();s.forEach((e=>n[e]=i.shape[e]-1-n[e])),c.set(u.get(...n),...t)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}},bx={kernelName:Ko.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:a,center:o}=t,s=n,c=Ko.util.getTypedArrayFromDType(r.dtype,Ko.util.sizeFromShape(r.shape)),[u,l,d,p]=r.shape,[h,f]=Ko.backend_util.getImageCenter(o,l,d),m=Math.sin(i),g=Math.cos(i),_=s.data.get(r.dataId).values;for(let e=0;e<u;e++){const t=e*d*l*p;for(let e=0;e<l;e++){const n=e*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let o=0;o<p;o++){const s=[u,e,r,o],v=s[2],y=s[1];let b=(v-h)*g-(y-f)*m,w=(v-h)*m+(y-f)*g;b=Math.round(b+h),w=Math.round(w+f);let k=a;if("number"!=typeof a&&(k=3===o?255:a[o]),b>=0&&b<d&&w>=0&&w<l){k=_[t+w*(d*p)+b*p+o]}c[t+n+i+o]=k}}}}return{dataId:s.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wx=hv(Ko.Round,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),kx={kernelName:Ko.Round,backendName:"cpu",kernelFunc:wx},xx=pv((e=>1/Math.sqrt(e))),Sx=fv(Ko.Rsqrt,xx),Tx={kernelName:Ko.Rsqrt,backendName:"cpu",kernelFunc:Sx};function Cx(e,t,n,r,i,a,o,s,c,u){const l=[r/i,i],d=e.values,p=t.values;if(0===r)return(0,Ko.buffer)(n,t.dtype);const h=c instanceof Ko.TensorBuffer?c:(0,Ko.buffer)(l,t.dtype);"string"==typeof c||"number"==typeof c?h.values.fill(c):"boolean"==typeof c&&h.values.fill(+c);for(let e=0;e<a;e++){const a=[];let c=0;for(let t=0;t<o;t++){const n=d[e*o+t];a.push(n),c+=n*s[t]}if(c<0||c>=r/i)throw new Error(`Invalid indices: ${a} does not index into ${n}`);for(let n=0;n<i;n++)u?h.values[c*i+n]+=p[e*i+n]:h.values[c*i+n]=0===t.rank?p[0]:p[e*i+n]}return h}const Ex={kernelName:Ko.ScatterNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:o}=r,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=Ko.backend_util.calculateShapes(a,i,o),p=Cx(n.bufferSync(i),n.bufferSync(a),o,d,u,c,s,l,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};function Ix(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function Nx(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}const Ax={kernelName:Ko.SearchSorted,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:o}=r,s=function(e,t,n,r,i,a){const o=Ko.util.getArrayFromDType("int32",n*i);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),c=s*i;for(let e=0;e<i;++e)o[c+e]="left"===a?Ix(n,t[e+c]):Nx(n,t[e+c])}return o}(n.data.get(i.dataId).values,n.data.get(a.dataId).values,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",s)}};const Ox={kernelName:Ko.Select,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t;uv([r,i,a],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,l=(0,Ko.upcastType)(i.dtype,a.dtype),d=Ko.util.makeZerosTypedArray(Ko.util.sizeFromShape(i.shape),l);let p=0;const h=0===o||o>1||1===i.shape.length?1:Ko.util.sizeFromShape(i.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<h;t++)1===s[e]?d[p++]=c[e]:d[p++]=u[e];return n.makeTensorInfo(i.shape,l,d)}},Rx=Ko.backend_util.SELU_SCALEALPHA,Px=Ko.backend_util.SELU_SCALE,Dx=hv(Ko.Selu,(e=>e>=0?Px*e:Rx*(Math.exp(e)-1))),Lx={kernelName:Ko.Selu,backendName:"cpu",kernelFunc:Dx},Mx=hv(Ko.Sign,(e=>e<0?-1:e>0?1:0)),Fx={kernelName:Ko.Sign,backendName:"cpu",kernelFunc:Mx},zx=hv(Ko.Sin,(e=>Math.sin(e))),$x={kernelName:Ko.Sin,backendName:"cpu",kernelFunc:zx},jx=hv(Ko.Sinh,(e=>Math.sinh(e))),Bx={kernelName:Ko.Sinh,backendName:"cpu",kernelFunc:jx},Vx=Math.log(1.1920928955078125e-7)+2,Ux=hv(Ko.Softplus,(e=>{const t=e>-Vx,n=e<Vx,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i})),Gx={kernelName:Ko.Softplus,backendName:"cpu",kernelFunc:Ux};const qx={kernelName:Ko.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:o}=r;uv([i],"spaceToBatchND");const s=Ko.util.sizeFromShape(a),c=[[0,0]];c.push(...o);for(let e=1+a.length;e<i.shape.length;++e)c.push([0,0]);const u=qk.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),l=Ko.backend_util.getReshaped(u.shape,a,s,!1),d=Ko.backend_util.getPermuted(l.length,a.length,!1),p=Ko.backend_util.getReshapedPermuted(u.shape,a,s,!1),h=Hv({inputs:{x:u},backend:n,attrs:{shape:l}}),f=oy({inputs:{x:h},backend:n,attrs:{perm:d}}),m=Hv({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}};function Wx(e,t,n,r,i,a,o){const s=t[0],c=a[0],u=new Array(c),l=new Array(s),d=t[1];if(0===c){if(0!==s)throw new Error(Ko.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[Ko.util.getArrayFromDType(n,0),[0,d],Ko.util.getArrayFromDType(i,0),u,l]}let p=!0,h=0;const f=new Array(c).fill(0);for(let t=0;t<s;++t){const n=e[t*d];if(n<0)throw new Error(Ko.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=c)throw new Error(Ko.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,c));++f[n],p=p&&n>=h,h=n}let m=!0;for(let e=0;e<c;++e){const t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&p){const t=e,n=r;for(let e=0;e<s;++e)l[e]=e;return[t,[s,d],n,u,l]}{const t=f[c-1],a=Ko.util.getArrayFromDType(n,t*d),p=Ko.util.getArrayFromDType(i,t),h=new Array(c).fill(0);for(let t=0;t<s;++t){const n=e[t*d],i=h[n],o=(0===n?0:f[n-1])+i;h[n]++;for(let n=0;n<d;++n)a[o*d+n]=e[t*d+n];p[o]=r[t],l[t]=o}for(let e=0;e<c;++e){if(0===h[e]){const t=0===e?0:f[e-1];a[t*d+0]=e;for(let e=1;e<d;++e)a[t*d+e]=0;p[t]=o}}return[a,[t,d],p,u,l]}}const Hx={kernelName:Ko.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:o}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n        ${i.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const s=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[d,p,h,f,m]=Wx(s,r.shape,r.dtype,c,i.dtype,u,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function Yx(e,t,n,r,i){const a=Ko.util.sizeFromShape(r),o=t[0],s=i.length,c=[];let u=1,l=-1;for(let e=0;e<s;++e){const t=i[e];if(-1===t){if(-1!==l)throw new Error(Ko.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,e));l=e,c.push(1)}else{if(t<0)throw new Error(Ko.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(e,t));u*=t,c.push(t)}}if(-1!==l){if(u<=0)throw new Error(Ko.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const e=Math.trunc(a/u);if(u*e!==a)throw new Error(Ko.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,c));c[l]=e}if(Ko.util.sizeFromShape(c)!==a)throw new Error(Ko.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,c));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}const h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*c[e+1]}const f=Ko.util.getArrayFromDType(n,o*s);for(let t=0;t<o;++t){let n=0;for(let r=0;r<d;++r)n+=e[t*d+r]*p[r];for(let e=0;e<s;++e)f[t*s+e]=Math.trunc(n/h[e]),n%=h[e]}return[f,[o,s],c]}const Kx={kernelName:Ko.SparseReshape,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(a.dataId).values),[u,l,d]=Yx(s,r.shape,r.dtype,o,c);return[n.makeTensorInfo(l,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};function Xx(e,t,n,r,i,a=!1,o=0){const s=r.length,c=[t[0],e.length/t[0]],u=c[1],l=s>0?i[s-1]+1:0;if(l<0)throw new Error(Ko.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const d=t.slice();d[0]=l;const p=d.reduce(((e,t)=>e*t),1),h=Ko.util.getArrayFromDType(n,p);if(0===s)return l>0&&h.fill(o),[h,d];if(l<=0)throw new Error(Ko.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=0,m=1,g=0,_=i[f];for(;;){let t=0;if(m<s){if(t=i[m],_===t){++m;continue}if(_>=t)throw new Error(Ko.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(_<0||_>=l)throw new Error(Ko.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(_,l));_>g&&h.fill(o,g*u,_*u);for(let t=f;t<m;++t){const n=r[t];if(n<0||n>=c[0])throw new Error(Ko.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,r[t],c[0]));for(let t=0;t<u;t++)h[_*u+t]+=e[n*u+t]}if(a)for(let e=0;e<u;e++)h[_*u+e]/=m-f;if(f=m,++m,g=_+1,_=t,m>s)break}return g<l&&h.fill(o,g*u,l*u),[h,d]}const Qx={kernelName:Ko.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,[u,l]=Xx(o,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(l,r.dtype,u)}};const Jx={kernelName:Ko.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,[u,l]=Xx(o,r.shape,r.dtype,s,c);return n.makeTensorInfo(l,r.dtype,u)}};const Zx={kernelName:Ko.SparseToDense,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=Ko.backend_util.calculateShapes(a,i,s),h=!1,f=n.bufferSync(i);let m;switch(a.dtype){case"bool":m=Cx(f,n.bufferSync(a),s,p,l,u,c,d,Boolean(n.data.get(o.dataId).values[0]),h);break;case"float32":m=Cx(f,n.bufferSync(a),s,p,l,u,c,d,n.data.get(o.dataId).values[0],h);break;case"int32":m=Cx(f,n.bufferSync(a),s,p,l,u,c,d,n.data.get(o.dataId).values[0],h);break;case"string":m=Cx(f,n.bufferSync(a),s,p,l,u,c,d,Ko.util.decodeString(n.data.get(o.dataId).values[0]),h);break;default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,m.dtype,m.values)}};const eS={kernelName:Ko.SplitV,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:o}=r,s=Ko.util.parseAxisParam(o,i.shape)[0],c=Ko.backend_util.prepareSplitSize(i,a,s),u=new Array(i.shape.length).fill(0),l=i.shape.slice();return c.map((e=>{const t=[...l];t[s]=e;const r=Ry({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},tS=pv((e=>Math.sqrt(e))),nS=hv(Ko.Sqrt,(e=>Math.sqrt(e))),rS={kernelName:Ko.Sqrt,backendName:"cpu",kernelFunc:nS},iS={kernelName:Ko.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;uv(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let e=0;e<i.length;++e){const t=i[e];a[e]=t*t}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},aS=wv(((e,t)=>{const n=e-t;return n*n})),oS=Bv(Ko.SquaredDifference,aS),sS={kernelName:Ko.SquaredDifference,backendName:"cpu",kernelFunc:oS},cS=pv(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)})),uS=fv(Ko.StaticRegexReplace,cS),lS={kernelName:Ko.StaticRegexReplace,backendName:"cpu",kernelFunc:uS},dS=hv(Ko.Step,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),pS={kernelName:Ko.Step,backendName:"cpu",kernelFunc:dS};function hS(e,t,n,r){const i=(0,Ko.buffer)(e,t.dtype);for(let e=0;e<i.size;e++){const a=i.indexToLoc(e),o=new Array(a.length);for(let e=0;e<o.length;e++)o[e]=a[e]*n[e]+r[e];i.set(t.get(...o),...a)}return i}const fS={kernelName:Ko.StridedSlice,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:o,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r;uv(i,"stridedSlice");const{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:_,begin:v,end:y,strides:b}=Ko.slice_util.sliceInfo(i.shape,a,o,s,c,u,l,d,p);let w;if(m)w=Hv({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||_){Ko.util.assert(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=Ko.slice_util.computeOutShape(v,y,b),t=Ry({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=Hv({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=hS(h,n.bufferSync(i),b,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class mS{constructor(e,t,n,r,i,a){this.separator=Ko.util.encodeString(e),this.nGramWidths=t,this.leftPad=Ko.util.encodeString(n),this.rightPad=Ko.util.encodeString(r),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,a){for(let o=0;o<i;++o){const s=this.getPadWidth(a),c=Math.max(0,s-o),u=Math.max(0,s-(i-(o+1))),l=a-(c+u),d=t+(c>0?0:o-s);let p=0;p+=c*this.leftPad.length;for(let t=0;t<l;++t)p+=e[d+t].length;p+=u*this.rightPad.length;p+=(c+u+l-1)*this.separator.length,n[r+o]=new Uint8Array(p);const h=n[r+o];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<l-1;++t)m(e[d+t]),m(this.separator);if(l>0){m(e[d+l-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const i=r-1,a=Ko.util.getArrayFromDType("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=i;++e)a[e]=0;return[e,a]}a[0]=0;for(let e=1;e<=i;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),a[e]=a[e-1]+r}const o=new Array(a[i]);for(let n=0;n<i;++n){const r=t[n];let i=a[n];if(this.nGramWidths.forEach((a=>{const s=t[n+1]-t[n],c=this.getNumNGrams(s,a);this.createNGrams(e,r,o,i,c,a),i+=c})),this.preserveShort&&i===a[n]){const a=t[n+1]-t[n];if(0===a)continue;const s=a+2*this.padWidth,c=1;this.createNGrams(e,r,o,i,c,s)}}return[o,a]}}function gS(e,t,n,r,i,a,o,s){return new mS(n,r,i,a,o,s).compute(e,t)}const _S={kernelName:Ko.StringNGrams,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:c,preserveShortSequences:u}=r,{data:l,dataSplits:d}=t,p=n.data.get(l.dataId).values,h=n.data.get(d.dataId).values,[f,m]=gS(p,h,i,a,o,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function vS(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let a=e.indexOf(i);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(i,a);n&&0===t.length||r.push(t),i=a+1}}function yS(e,t,n){const r=e.length,i=[];let a=0,o=0;const s=new Array(r);for(let c=0;c<r;++c){const r=i.length;vS(e[c],t,n,i);const u=i.length-r;s[c]=u,a+=u,o=Math.max(o,u)}const c=Ko.util.getArrayFromDType("int32",2*a),u=new Array(a),l=[r,o];let d=0;for(let e=0;e<r;++e)for(let t=0;t<s[e];++t)c[2*d]=e,c[2*d+1]=t,u[d]=i[d],++d;return[c,u,l]}const bS={kernelName:Ko.StringSplit,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:o}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values[0],[u,l,d]=yS(s,c,i),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function wS(e,t){const n=Ko.util.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Ko.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}const kS={kernelName:Ko.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=wS(n.data.get(a.dataId).values,i);return n.makeTensorInfo(a.shape,"int32",o)}},xS=hv(Ko.Tan,(e=>Math.tan(e))),SS={kernelName:Ko.Tan,backendName:"cpu",kernelFunc:xS},TS=hv(Ko.Tanh,(e=>Math.tanh(e))),CS={kernelName:Ko.Tanh,backendName:"cpu",kernelFunc:TS};const ES={kernelName:Ko.TensorScatterUpdate,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:a}=t,{sliceRank:o,numUpdates:s,sliceSize:c,strides:u,outputSize:l}=Ko.backend_util.calculateShapes(a,i,r.shape),d=n.bufferSync(i),p=n.bufferSync(a),h=n.bufferSync(r),f=Cx(d,p,r.shape,l,c,s,o,u,h,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function IS(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=(0,Ko.buffer)(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),i=new Array(e.rank);for(let t=0;t<i.length;t++)i[t]=n[t]%e.shape[t];const a=e.locToIndex(i);r.values[t]=e.values[a]}return r}const NS={kernelName:Ko.Tile,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;uv(i,"tile");const o=IS(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},AS=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function OS(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*s*(i-s)/i)*Math.sign(a-i/2);OS(e,t,Math.max(n,Math.floor(t-a*s/i+c)),Math.min(r,Math.floor(t+(i-a)*s/i+c)))}const i=e[t];let a=n,o=r;for(Ko.util.swap(e,n,t),AS(e[r],i)>0&&Ko.util.swap(e,n,r);a<o;){for(Ko.util.swap(e,a,o),a++,o--;AS(e[a],i)<0;)a+=1;for(;AS(e[o],i)>0;)o-=1}0===AS(e[n],i)?Ko.util.swap(e,n,o):(o+=1,Ko.util.swap(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}}function RS(e,t,n,r,i){const a=t[t.length-1],[o,s]=[e.length/a,a],c=Ko.util.getTypedArrayFromDType(n,o*r),u=Ko.util.getTypedArrayFromDType("int32",o*r);for(let t=0;t<o;t++){const n=t*s,a=e.subarray(n,n+s);let o=new Array(a.length);a.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(OS(o,r),o=o.slice(0,r)),i&&o.sort(AS);const l=t*r,d=c.subarray(l,l+r),p=u.subarray(l,l+r);for(let e=0;e<r;e++)d[e]=o[e].value,p[e]=o[e].index}const l=t.slice();return l[l.length-1]=r,[(0,Ko.buffer)(l,n,c),(0,Ko.buffer)(l,"int32",u)]}const PS={kernelName:Ko.TopK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:o}=r;uv(i,"topk");const s=n.data.get(i.dataId).values,[c,u]=RS(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const DS={kernelName:Ko.Transform,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:a}=t,{interpolation:o,fillMode:s,fillValue:c,outputShape:u}=n,[l,d,p,h]=i.shape,[f,m]=null!=u?u:[d,p],g=[l,f,m,h],_=Ko.util.computeStrides(i.shape),v=_[0],y=_[1],b=_[2],w=Ko.util.computeStrides(g),k=w[0],x=w[1],S=w[2],T=Ko.util.getTypedArrayFromDType(i.dtype,Ko.util.sizeFromShape(g));T.fill(c);const C=r.data.get(i.dataId).values,E=r.data.get(a.dataId).values;for(let e=0;e<l;++e){const t=1===a.shape[0]?E:E.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let r=0;r<m;++r)for(let i=0;i<h;++i){let a;const u=t[6]*r+t[7]*n+1;if(0===u)continue;const l=(t[0]*r+t[1]*n+t[2])/u,h=(t[3]*r+t[4]*n+t[5])/u,f=LS(l,p,s),m=LS(h,d,s);switch(o){case"nearest":a=FS(C,d,p,v,y,b,e,m,f,i,c);break;case"bilinear":a=zS(C,d,p,v,y,b,e,m,f,i,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}T[e*k+n*x+r*S+i]=a}return r.makeTensorInfo(g,i.dtype,T)}return{dataId:r.write(T,g,i.dtype),shape:i.shape,dtype:i.dtype}}};function LS(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Ko.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Ko.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Ko.util.clamp(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function MS(e,t,n,r,i,a,o,s,c,u,l){return 0<=s&&s<t&&0<=c&&c<n?e[o*r+s*i+c*a+u]:l}function FS(e,t,n,r,i,a,o,s,c,u,l){return MS(e,t,n,r,i,a,o,Math.round(s),Math.round(c),u,l)}function zS(e,t,n,r,i,a,o,s,c,u,l){const d=Math.floor(s),p=Math.floor(c),h=d+1,f=p+1;return(h-s)*((f-c)*MS(e,t,n,r,i,a,o,d,p,u,l)+(c-p)*MS(e,t,n,r,i,a,o,d,f,u,l))+(s-d)*((f-c)*MS(e,t,n,r,i,a,o,h,p,u,l)+(c-p)*MS(e,t,n,r,i,a,o,h,f,u,l))}function $S(e,t,n,r){const i=Ko.util.parseAxisParam(t,n)[0],a=[1,n[0],1];for(let e=0;e<i;e++)a[0]*=n[e];a[1]=n[i];for(let e=i+1;e<n.length;e++)a[2]*=n[e];const o=new Map,s=new Int32Array(n[i]),c=new Ko.TensorBuffer(a,r,e),u=[],l=1===a[0]&&1===a[2];for(let t=0;t<n[i];t++){let n;if(l)n=e[t].toString();else{const e=[];for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)e.push(c.get(n,t,r));n=e.join(",")}const r=o.get(n);if(null!=r)s[t]=r;else{const e=o.size;o.set(n,e),s[t]=e,u.push(t)}}const d=a.slice();d[1]=o.size;const p=new Ko.TensorBuffer(d,r);u.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)p.set(c.get(n,e,r),n,t,r)}));const h=n.slice();return h[i]=d[1],{outputValues:p.values,outputShape:h,indices:s}}const jS={kernelName:Ko.Unique,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;uv(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:c,indices:u}=$S(o,i,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const BS={kernelName:Ko.Unpack,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i.shape.length,s=i.shape[a],c=new Array(o-1);let u=0;for(let e=0;e<o;e++)e!==a&&(c[u++]=i.shape[e]);const l=new Array(o).fill(0),d=i.shape.slice();d[a]=1;const p=new Array(s);for(let e=0;e<p.length;e++){l[a]=e;const t=Ry({inputs:{x:i},backend:n,attrs:{begin:l,size:d}});p[e]=Hv({inputs:{x:t},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(t)}return p}};const VS={kernelName:Ko.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:o}=r;uv(i,"unsortedSegmentSum");const s=[],c=[],u=i.shape.length-a.shape.length;let l=a;for(let e=0;e<u;++e){const t=Wb({inputs:{input:l},backend:n,attrs:{dim:e+1}});l=t,c.push(t)}for(let e=0;e<o;++e){const t=Ko.util.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),a=Pb({inputs:{a:r,b:l},backend:n}),o=$v({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=Cb({inputs:{a:o,b:i},backend:n}),d=Ib({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});s.push(d),c.push(r),c.push(a),c.push(o),c.push(u),c.push(d)}const d=Uk({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},US=[Qv,Zv,ty,ry,Wv,iy,cy,uy,ly,dy,hy,my,_y,by,ky,Cy,Ey,Iy,Ny,Xv,Ay,Dy,Fy,jy,By,jv,Gy,Wy,Dv,Hy,Jy,eb,tb,nb,rb,ib,ab,sb,ub,lb,db,pb,hb,fb,gb,_b,vb,yb,bb,wb,kb,xb,Ab,gv,Ob,Db,Vb,qb,Hb,Xb,sw,uw,lw,hw,gw,_w,vw,bw,kw,Tw,Iw,vv,Nw,Xy,Ow,Pw,Lw,bv,zw,Bw,Uw,Ww,Yw,Qw,Zw,nk,rk,ik,sk,lk,dk,pk,hk,fk,mk,gk,_k,bk,wk,Sk,Ek,Eb,Nk,Ok,Pk,Lk,zk,$k,Vk,Gk,qk,Yk,Sv,Xk,tx,ix,lx,px,Fv,Zb,fx,Cv,Iv,Yv,mx,gx,_x,vx,yx,bx,kx,Tx,Ex,Ax,Ox,Lx,Ov,Fx,$x,Bx,Py,Ck,Gx,qx,Hx,Kx,Qx,Jx,Zx,eS,rS,iS,sS,lS,pS,fS,_S,bS,kS,rw,Nb,SS,CS,ES,NS,PS,DS,sy,jS,BS,VS,Bk];for(const e of US)(0,Ko.registerKernel)(e);const GS={},qS={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function WS(e,t){if(!(e in GS)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if((0,Ko.env)().getBool("IS_SAFARI")||"undefined"==typeof OffscreenCanvas||2!==e){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete GS[e]}),!1),(0,Ko.env)().getBool("SOFTWARE_WEBGL_ENABLED")&&(qS.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",qS)||n.getContext("experimental-webgl",qS);return n.getContext("webgl2",qS)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;GS[e]=n}const n=GS[e];return null==n||n.isContextLost()?(delete GS[e],WS(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),GS[e])}var HS,YS,KS;function XS(e,t){return[t,e]}function QS(e){const t=Ko.util.sizeFromShape(e),n=Math.ceil(t/4);return Ko.util.sizeToSquarishShape(n)}function JS(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ZS(e,t){const n=e;let r,i,a,o,s,c,u,l,d,p;return 2===(0,Ko.env)().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,l=1,d=n.HALF_FLOAT,p=n.FLOAT,c=n.RGBA8):(r=e.RGBA,i=e.RGBA,a=e.RGBA,o=n.RGBA,s=e.RGBA,u=4,l=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,c=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:c,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:p}}function eT(e,t){const n=t();return(0,Ko.env)().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(HS||(HS={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(YS||(YS={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(KS||(KS={}));function tT(e){return!!((0,Ko.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function nT(e,t){return dT(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const rT=/ERROR: [0-9]+:([0-9]+):/g;function iT(e,t){const n=rT.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],i=e.split("\n"),a=i.length.toString().length+2,o=i.map(((e,t)=>Ko.util.rightPad((t+1).toString(),a)+e));let s=0;for(let e=0;e<o.length;e++)s=Math.max(o[e].length,s);const c=o.slice(0,r-1),u=o.slice(r-1,r),l=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${Ko.util.rightPad(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function aT(e,t){if(eT(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function oT(e,t,n,r,i,a,o){const s=e.getAttribLocation(t,n);return-1!==s&&(eT(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),eT(e,(()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,a,o))),eT(e,(()=>e.enableVertexAttribArray(s))),!0)}function sT(e,t,n,r){eT(e,(()=>function(e,t,n){pT(e,n),eT(e,(()=>e.activeTexture(e.TEXTURE0+n))),eT(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),eT(e,(()=>e.uniform1i(n,r)))}function cT(e,t,n){eT(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),eT(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function uT(e,t){eT(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),eT(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function lT(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function dT(e,t,n){const r=eT(e,(()=>t()));if(null==r)throw new Error(n);return r}function pT(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function hT(e,t=2){return Ko.util.sizeFromShape(e.slice(0,e.length-t))}function fT(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function mT(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[hT(e),...fT(e)]),t}function gT(e){return e%2==0}function _T(e,t){if(e=e.slice(-2),t=t.slice(-2),Ko.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(gT(n)&&gT(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&gT(e[0])&&gT(t[0])}let vT,yT;function bT(e,t){return null!=e.getExtension(t)}function wT(e){try{if(null!=WS(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function kT(e){if(0===e)return!1;const t=WS(e);if(1!==e){if(bT(t,"EXT_color_buffer_float"))return xT(t);const e="EXT_color_buffer_half_float";if(bT(t,e)){const n=t.getExtension(e);return function(e,t){const n=ZS(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,n)}return!1}if(!bT(t,"OES_texture_float"))return!1;if(!bT(t,"WEBGL_color_buffer_float"))return!1;return xT(t)}function xT(e){const t=ZS(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function ST(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Ko.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const TT=(0,Ko.env)();function CT(){let e,t,n,r,i,a,o,s,c,u;return 2===(0,Ko.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=(0,Ko.env)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:c,defineRound:u}}function ET(e,t,n="index"){const r=Ko.util.computeStrides(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / ${t}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`};`)).join("")}function IT(e,t,n="index"){const r=Ko.util.computeStrides(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / outShapeStrides[${i}]`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`};`)).join("")}function NT(e,t,n="index"){const r=e.map(((e,t)=>t)),i=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),i=new Array(n-1);i[n-2]=r[n-1];for(let e=n-3;e>=0;--e)i[e]=`(${i[e+1]} * ${r[e+1]})`;return i}(r,t);return i.map(((t,r)=>`${`int ${e[r]} = ${n} / ${i[r]}`}; ${r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${i[r]}`:`index -= ${e[r]} * ${i[r]}`};`)).join("")}function AT(e){const t=Ko.util.computeStrides(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}TT.registerFlag("HAS_WEBGL",(()=>TT.getNumber("WEBGL_VERSION")>0)),TT.registerFlag("WEBGL_VERSION",(()=>wT(2)?2:wT(1)?1:0)),TT.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),TT.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===TT.get("WEBGL_VERSION"))),TT.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),TT.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),TT.registerFlag("WEBGL_PACK",(()=>TT.getBool("HAS_WEBGL"))),TT.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_CLIP",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_REDUCE",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_LAZILY_UNPACK",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_CONV_IM2COL",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>TT.getBool("WEBGL_PACK"))),TT.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==vT){const t=WS(e);vT=t.getParameter(t.MAX_TEXTURE_SIZE)}return vT}(TT.getNumber("WEBGL_VERSION")))),TT.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==yT){const t=WS(e);yT=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,yT)}(TT.getNumber("WEBGL_VERSION")))),TT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=TT.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=WS(e);return t=bT(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:bT(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),TT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>TT.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Ko.device_util.isMobile())),TT.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=WS(e);if(1===e){if(!bT(t,"OES_texture_float"))return!1}else if(!bT(t,"EXT_color_buffer_float"))return!1;return xT(t)}(TT.getNumber("WEBGL_VERSION")))),TT.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!TT.getBool("WEBGL_FORCE_F16_TEXTURES")&&TT.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),TT.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>kT(TT.getNumber("WEBGL_VERSION")))),TT.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=TT.getNumber("WEBGL_VERSION"))&&null!=WS(e).fenceSync;var e})),TT.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>TT.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),TT.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),TT.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Ko.device_util.isMobile()?1:-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),TT.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),TT.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),TT.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),TT.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),TT.registerFlag("WEBGL_EXP_CONV",(()=>!1)),TT.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>TT.getBool("IS_TEST"))),TT.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),TT.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),TT.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),TT.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const OT="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:RT}=Ko.backend_util;function PT(e,t,n){const r=[];if(e.forEach((e=>{const t=Ko.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=GT(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const i=r.join("\n"),a=e.map((e=>function(e,t,n=!1,r){let i="";i+=n?LT(e,r):DT(e,r);const a=e.shapeInfo.logicalShape,o=t.logicalShape;a.length<=o.length&&(i+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,s=RT(e.shapeInfo.logicalShape,t.logicalShape),c=UT(o),u=o-a;let l;const d=["x","y","z","w","u","v"];l=0===a?"":o<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${d[e+u]} = 0;`)).join("\n");let p="";p=o<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${d[t+u]}`)).join(", ");let h="return outputValue;";const f=1===Ko.util.sizeFromShape(e.shapeInfo.logicalShape),m=Ko.util.sizeFromShape(t.logicalShape),g=1===m;if(1!==a||f||g){if(f&&!g)h=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?h="return vec4(outputValue.x);":s.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${c} coords = getOutputCoords();\n      ${l}\n      vec4 outputValue = get${r}(${p});\n      ${h}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&Ko.util.arraysEqual(o,a))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=UT(c),l=RT(e.shapeInfo.logicalShape,t.logicalShape),d=c-s;let p;const h=["x","y","z","w","u","v"];p=0===s?"":c<2&&l.length>=1?"coords = 0;":l.map((e=>`coords.${h[e+d]} = 0;`)).join("\n");let f="";f=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+d]}`)).join(", ");return`\n    float ${i}() {\n      ${u} coords = getOutputCoords();\n      ${p}\n      return get${r}(${f});\n    }\n  `}(e,t));return i}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),o=t.texShape,s=CT(),c=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let u,l,d=function(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${MT}\n    ${FT}\n    ${zT}\n  `;return t}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return jT();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Ko.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),a=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),a=i*Math.ceil(e[e.length-2]/2);let o=a,s="",c="b, r, c";for(let t=2;t<e.length-1;t++)o*=e[e.length-t-1],s=`\n      int b${t} = index / ${o};\n      index -= b${t} * ${o};\n    `+s,c=`b${t}, `+c;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${c});\n    }\n  `}(e,t,n)}}(t.logicalShape,o,n.enableShapeUniforms),l=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(u=function(e,t,n){switch(e.length){case 0:return jT();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(Ko.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${IT(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=ET(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${IT(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=ET(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=ET(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=ET(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,o,n.enableShapeUniforms),l=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(d+=$T);return[d,c,l,i,u,a,n.userCode].join("\n")}function DT(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=e.shapeInfo.texShape;if(1===i&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const o=BT(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,c]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${c}, ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${VT(e)}\n      }\n    `;const i=e.shapeInfo.texShape,a=i[0],o=i[1];if(1===o&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=BT(n);if(1===o)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&Ko.util.arraysEqual(n,a)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=a[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:o,keptDims:s}=Ko.util.squeezeShape(n),c=o;if(c.length<n.length){const n=["row","col"];return`\n      ${DT(qT(e,c),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${WT(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${VT(e)}\n      }\n    `;const u=a[0],l=a[1],d=BT(r);if(1===l)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${u}, ${l}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],{newShape:s,keptDims:c}=Ko.util.squeezeShape(n),u=s;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${DT(qT(e,u),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${WT(n,c)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${o}, 1)));\n        ${VT(e)}\n      }\n    `;const l=e.shapeInfo.texShape,d=l[0],p=l[1],h=e.shapeInfo.flatOffset;if(p===a&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${p}.0, ${d}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(p===o&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=BT(r);if(t)return`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${o} + depth + ${f};\n        vec2 uv = uvFromFlat(${d}, ${p}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,{newShape:c,keptDims:u}=Ko.util.squeezeShape(n);if(c.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${DT(qT(e,c),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${WT(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${o}, ${a}, 1)));\n        ${VT(e)}\n      }\n    `;const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===s&&null==l)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(h===a&&null==l)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const _=BT(r);if(t)return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${_});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${o} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${h}, index + ${_});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],a=t[3]*i,o=t[2]*a,s=t[1]*o,{newShape:c,keptDims:u}=Ko.util.squeezeShape(t);if(c.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${DT(qT(e,c))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${WT(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${o}, ${a}, ${i})) +\n          depth3;\n        ${VT(e)}\n      }\n    `;const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];if(h===s&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===i&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=BT(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${o} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${p}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=Ko.util.squeezeShape(t);if(i.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${DT(qT(e,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${WT(t,a)});\n      }\n    `}const o=t[5],s=t[4]*o,c=t[3]*s,u=t[2]*c,l=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${u}, ${c}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${VT(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===l&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${c}, ${s}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===o&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=BT(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} + depth * ${c} +\n          depth2 * ${s} + depth3 * ${o} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function LT(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=CT();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=CT();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${o[0]}, ${o[1]}, index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=a[0],s=a[1],c=CT();if(null!=a&&Ko.util.arraysEqual(n,a))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${c.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);\n\n        return ${c.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${c.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${l}, ${u[0]}, ${u[1]}, row, col);\n      return ${c.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=["b","row","col"];return`\n        ${LT(qT(e,n.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${WT(a,r)});\n        }\n      `}const s=CT();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const c=o[0],u=o[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${c}, ${u}, ${d}, ${l}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=CT();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,o=a.length,s=e.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=c[0],l=c[1],d=Math.ceil(a[o-1]/2);let p=d*Math.ceil(a[o-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let e=2;e<o-1;e++)h=`int b${e}, `+h,p*=a[o-e-1],f=`b${e} * ${p} + `+f;return`\n    vec4 ${r}(${h}) {\n      int index = ${f};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${u});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const MT="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",FT="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zT="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$T="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function jT(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function BT(e){return`offset${e}`}function VT(e){const t=e.name,n=Ko.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function UT(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function GT(e,t,n){const{newShape:r,keptDims:i}=Ko.util.squeezeShape(t),a=t.length,o=e&&3===a&&1===t[0],s=o?t.slice(1):r,c=!e&&a>1&&!Ko.util.arraysEqual(t,n)&&r.length<a||o;return{useSqueezeShape:c,uniformShape:c?s:t,keptDims:i}}function qT(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function WT(e,t){return t.map((t=>e[t])).join(", ")}function HT(e,t,n,r){const i=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=i.map((e=>e.shapeInfo)),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=PT(i,o,t),c=function(e,t){const n=dT(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(eT(e,(()=>e.shaderSource(n,t))),eT(e,(()=>e.compileShader(n))),(0,Ko.env)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw iT(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(c);return(0,Ko.env)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:c,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:o},YT(e,t,u)))}function YT(e,t,n){const r=[],i=[];let a,o,s,c=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===(0,Ko.env)().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const l=!1;for(const i of t.variableNames){const a={name:i,uniform:e.getUniformLocation(n,i,l),offset:e.getUniformLocation(n,`offset${i}`,l)};t.enableShapeUniforms&&(a.shape=e.getUniformLocation(n,`${i}Shape`,l),a.texShape=e.getUniformLocation(n,`${i}TexShape`,l)),r.push(a)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",l),s=e.getUniformLocation(n,"outShapeStrides",l),o=e.getUniformLocation(n,"outTexShape",l)),t.customUniforms)for(const r of t.customUniforms)i.push(e.getUniformLocation(n,r.name,l));return{variablesLocations:r,customUniformLocations:i,infLoc:c,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:o}}function KT(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,i=t[n],a=i.shape;if(!Ko.util.arraysEqual(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(e.isUniform&&i.isUniform)return;const o=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!Ko.util.arraysEqual(o,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${s} must match`)}))}function XT(e){return(0,Ko.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class QT{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=HS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=CT();this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?IT(["r","c","d"],e):ET(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class JT{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=HS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=CT();this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?IT(["r","c","d"],e):ET(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class ZT{constructor(e){this.variableNames=["A"],this.outTexUsage=YS.DOWNLOAD;const t=CT();this.outputShape=e,this.userCode=`\n      ${OT}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class eC{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=YS.DOWNLOAD;const t=CT();this.outputShape=e,this.userCode=`\n      ${OT}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const tC={R:0,G:1,B:2,A:3};class nC{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=CT();this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let a="";for(let e=0;e<n.length;e++){const t=n[e];a+=`\n          if(offset == ${e}) {\n            result = values[${tC[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AT(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${a}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}class rC{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=CT();this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let i=0;i<=1;i++){const a=2*t+i;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${i} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${i};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${a}] = values[0];\n            } else if (offset == 1) {\n              result[${a}] = values[1];\n            } else if (offset == 2) {\n              result[${a}] = values[2];\n            } else {\n              result[${a}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AT(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}function iC(e){const t=CT();return function(e,t){const n=dT(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(eT(e,(()=>e.shaderSource(n,t))),eT(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function aC(e){return function(e,t){const n=dT(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return eT(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),eT(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function oC(e){return function(e,t){const n=dT(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return eT(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),eT(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function sC(e,t,n,r,i,a){!function(e,t){const n=(0,Ko.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const o=function(e){return dT(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return eT(e,(()=>e.bindTexture(s,o))),eT(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),eT(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),eT(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),eT(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===(0,Ko.env)().getNumber("WEBGL_VERSION")?eT(e,(()=>e.texImage2D(s,0,r,t,n,0,i,a,null))):eT(e,(()=>e.texStorage2D(s,1,r,t,n))),eT(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:o,texShape:[n,t]}}function cC(e){return e.internalFormatFloat}function uC(e){return e.internalFormatHalfFloat}function lC(e){return e.downloadTextureFormat}function dC(e){return e.internalFormatPackedFloat}function pC(e){return e.internalFormatPackedHalfFloat}function hC(e,t,n,r,i,a,o,s){const c=e,u=new Float32Array(function(e,t){const[n,r]=JS(e,t);return n*r*4}(a,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}class fC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=(0,Ko.env)().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){GS[e]=t}(t,e)):this.gl=WS(t),e=this.gl,2===(0,Ko.env)().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>eT(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>eT(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>eT(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>eT(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>eT(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>eT(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>eT(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>eT(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,Ko.env)().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=nT(this.gl,e),bT(this.gl,t))this.textureHalfFloatExtension=nT(this.gl,t);else if((0,Ko.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),bT(this.gl,r))this.colorBufferHalfFloatExtension=nT(this.gl,r);else if((0,Ko.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",bT(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!bT(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=aC(this.gl),this.indexBuffer=oC(this.gl),this.framebuffer=function(e){return dT(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=ZS(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,Ko.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;eT(e,(()=>e.finish())),eT(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),eT(e,(()=>e.deleteFramebuffer(this.framebuffer))),eT(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),eT(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),eT(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,a]=XS(t,n);return sC(e,i,a,cC(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,a]=XS(t,n);return sC(e,i,a,uC(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,a]=XS(t,n);return sC(e,i,a,lC(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){eT(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===(0,Ko.env)().getNumber("WEBGL_VERSION")?eT(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):eT(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===(0,Ko.env)().getNumber("WEBGL_VERSION")?eT(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):eT(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),eT(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,a){let o,s,c;eT(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,c=a.internalFormatPackedFloat),o.set(i),2===(0,Ko.env)().getNumber("WEBGL_VERSION")?eT(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o))):eT(e,(()=>e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,o))),eT(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,a]=JS(t,n);return sC(e,i,a,pC(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,a]=JS(t,n);return sC(e,i,a,dC(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uT(this.gl,this.framebuffer),this.outputTexture=null),eT(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[i,a]=XS(t,n),o=new Uint8Array(t*n*4);return eT(e,(()=>e.readPixels(0,0,i,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,o))),new Float32Array(o.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,i,a){return hC(this.gl,e,0,0,0,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();eT(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const i=16*t*n;return eT(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),eT(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),eT(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,Ko.env)().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return eT(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=iC(t));const n=function(e){return dT(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);eT(t,(()=>t.attachShader(n,this.vertexShader))),eT(t,(()=>t.attachShader(n,e))),function(e,t){if(eT(e,(()=>e.linkProgram(t))),!(0,Ko.env)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&aT(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;eT(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){eT(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),oT(e,t,"clipSpacePos",n,3,20,0)&&oT(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(eT(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&aT(this.gl,this.program),eT(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return dT(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),eT(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),sT(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=JS(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&aT(this.gl,this.program),lT(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}eT(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),eT(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=nT(this.gl,2===(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Ko.util.repeatedTry((()=>this.disposed||this.isQueryAvailable(e,(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in(0,Ko.env)().platform&&(n=(0,Ko.env)().platform.setTimeoutCustom.bind((0,Ko.env)().platform)),Ko.util.repeatedTry((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),cT(this.gl,e,this.framebuffer),this.debug&&lT(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(cT(this.gl,this.outputTexture,this.framebuffer),this.debug&&lT(this.gl)):uT(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;cT(r,e,this.framebuffer),this.debug&&lT(r),this.outputTexture=e,eT(r,(()=>r.viewport(0,0,t,n))),eT(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),eT(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:mC,XI:gC,Nk:_C,f6:vC,ct:yC,YG:bC,hH:wC,z3:kC,sG:xC,uM:SC,vS:TC,qB:CC,GG:EC,rq:IC,lg:NC,WR:AC,cu:OC,GE:RC,px:PC,jC:DC,He:LC,hE:MC,BF:FC,Dk:zC,cl:$C,_B:jC,ub:BC,_f:VC,Ku:UC,qy:GC,Zy:qC,bu:WC,zv:HC,dH:YC,HS:KC,yH:XC,l3:QC,z9:JC,x6:ZC,_m:eE,eW:tE,GK:nE,SP:rE,yr:iE,dl:aE,Dw:oE,xT:sE,_X:cE,wz:uE}=t;function lE(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function dE(e,t){return 1===t?[e]:lE(e,t)}class pE{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=XT(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=dE("rc",this.rank),t=UT(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class hE{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,i;this.userCode=`\n      ${r=t,i=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${i?NT(["r","c","d"],"inputShape"):ET(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AT(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class fE{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=gE(t,n),i=_E(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=mE(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}let o;return r===KS.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===KS.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===KS.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===KS.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===KS.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=gE(n,r),a=_E(t,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);const o=mE(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,Ko.env)().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c&&c.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function mE(e,t,n,r,i){const a=function(e,t){switch(e){case KS.PACKED_2X2_FLOAT32:return dC(t);case KS.PACKED_2X2_FLOAT16:return pC(t);case KS.UNPACKED_FLOAT32:return cC(t);case KS.UNPACKED_FLOAT16:return uC(t);case KS.PACKED_4X1_UNSIGNED_BYTE:return lC(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let o;if(i){const[t,n]=JS(e[0],e[1]);o=t*n}else{const[t,n]=XS(e[0],e[1]);o=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,a);return o*s}function gE(e,t){if(e===YS.UPLOAD)return KS.PACKED_2X2_FLOAT32;if(e===YS.RENDER||null==e)return function(e){return(0,Ko.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?KS.PACKED_2X2_FLOAT32:KS.UNPACKED_FLOAT32:e?KS.PACKED_2X2_FLOAT16:KS.UNPACKED_FLOAT16}(t);if(e===YS.DOWNLOAD||e===YS.PIXELS)return KS.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function _E(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class vE{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const yE="if (isnan(x)) return x;",bE="return abs(x);";const wE=yE+"\n  return (x < 0.0) ? 0.0 : x;\n",kE=yE+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",xE="return x;";class SE{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class TE{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length);const t=e.length,n=dE("rc",t),r=UT(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),o=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}const CE=Ko.kernel_impls.whereImpl,EE={};const IE=(0,Ko.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class NE extends Ko.KernelBackend{nextDataId(){return NE.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,Ko.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof fC)t=e;else{const n=WS((0,Ko.env)().getNumber("WEBGL_VERSION"),e);t=new fC(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=WS((0,Ko.env)().getNumber("WEBGL_VERSION"));t=new fC(e),this.binaryCache=((n=(0,Ko.env)().getNumber("WEBGL_VERSION"))in EE||(EE[n]={}),EE[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new fE(this.gpgpu),this.numMBBeforeWarning=null==(0,Ko.env)().global.screen?1024:(0,Ko.env)().global.screen.height*(0,Ko.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Ko.DataStorage(this,(0,Ko.engine)())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,a){const o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,i]},s.texShape=[r,i];const c=mT(t),u=new nC(c,!1,a),l=this.runWebGLProgram(u,[o],n,[[r,i]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}write(e,t,n){if(((0,Ko.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,Ko.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:YS.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,i){if((0,Ko.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:YS.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:a,shape:o,isPacked:s}=t;if(null!=a){let t;t=s?new SE(o,xE):new vE(o,xE);const n=this.runWebGLProgram(t,[{dataId:e,shape:o,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const c=null!=this.activeTimers;let u,l;if(c&&(u=Ko.util.now()),"complex64"===r){const e=this.readSync(i.real.dataId),t=this.readSync(i.imag.dataId);l=Ko.backend_util.mergeRealAndImagArrays(e,t)}else l=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ko.util.now()-u),this.convertAndCacheOnCPU(e,l)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:a,complexTensorInfos:o,isPacked:s}=t;if(null!=i){let t;t=s?new SE(r,xE):new vE(r,xE);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if((0,Ko.env)().getBool("DEBUG")&&!(0,Ko.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,Ko.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,u,l=null;if("complex64"!==a&&(0,Ko.env)().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(t.texture.texture,...QS(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),t=e[0],n=e[1];u=Ko.backend_util.mergeRealAndImagArrays(t,n)}else if(null==l)u=this.getValuesFromTexture(e);else{const e=Ko.util.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(l,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=l){const e=this.gpgpu.gl;eT(e,(()=>e.deleteBuffer(l)))}const d=this.convertAndCacheOnCPU(e,u),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&(0,Ko.engine)().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,isPacked:s,texture:c}=n;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=s?new SE(i,xE):new vE(i,xE);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:o}],o),a=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),a}if(null==c)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),l=(0,Ko.engine)().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:l},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Ko.util.decodeString(e)));return(0,Ko.buffer)(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,Ko.buffer)(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!tT(n)){if((0,Ko.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=Ko.util.sizeFromShape(t);if((0,Ko.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...QS(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),a}const a=(0,Ko.env)().getBool("WEBGL_PACK")&&!0===r,o=a?mT(t):t,s=a?new eC(o):new ZT(o),c=this.runWebGLProgram(s,[{shape:o,dtype:n,dataId:e}],"float32"),u=this.texData.get(c.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),l}timerAvailable(){return(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=Ko.util.flatten(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=Ko.util.flatten(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if((0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);o.kernelMs=Ko.util.sum(e),o.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ko.util.now(),endMs:null}}endTimer(e){return(0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ko.util.now(),e)}async getQueryTime(e){if((0,Ko.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:a,slice:o}=this.texData.get(e),s=o&&o.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=IE){return(0,Ko.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&Ko.util.sizeFromShape(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){Ko.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return CE(e.shape,t)}packedUnaryOp(e,t,n){const r=new SE(e.shape,t),i=this.compileAndRun(r,[e],n);return(0,Ko.engine)().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=YC(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,Ko.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,bE,e.dtype);const t=new vE(e.shape,bE),n=this.compileAndRun(t,[e]);return(0,Ko.engine)().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Ko.util.isString(n[0])){const i=n.map((e=>Ko.util.encodeString(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return(0,Ko.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new TE(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new pE(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[hT(e.shape),...fT(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[hT(t),...fT(t)],a=new hE(i,n),o=[n],s=this.runWebGLProgram(a,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:a}=n;if(null!=t){const e=Ko.util.sizeFromShape(i),n=t[0]*t[1]*4;Ko.util.assert(e<=n,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const o=mT(i);let s;s=r?new JT(o):new QT(o);const c=[null!=t?t:QS(o)];return{dtype:a,shape:i,dataId:this.runWebGLProgram(s,[{shape:o,dtype:a,dataId:e}],a,c,!0,t).dataId}}runWebGLProgram(e,t,n,r,i=!1,a){const o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===HS.DENSE){const t=null!=a?a:QS(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Ko.util.sizeFromShape(o.shape))return s.values=Ko.util.getTypedArrayFromDType(o.dtype,0),o;const c=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ko.util.sizeFromShape(t.shape)<=(0,Ko.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),c.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!_T(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),c.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);const l={shape:o.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach((t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:o,uniformShape:s,keptDims:c}=GT(e.packedInputs,t.shape,a);let u="",l="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=Ko.util.computeStrides(s);d=`${e[0]===a[1]}_${e[e.length-1]===a[1]}`}}else l=`${s[0]>1}_${s[1]>1}`;const p=t.shape.length,h=2===s.length&&Ko.util.arraysEqual(t.shape,a),f=1===Ko.util.sizeFromShape(t.shape),m=Ko.backend_util.getBroadcastDims(t.shape,n.shape),g=!e.packedInputs&&p===n.shape.length&&Ko.util.arraysEqual(a,n.texData.texShape),_=e.packedInputs||s.length>2?"":`${a[0]>1}_${a[1]>1}`;r+=`${p}_${g}_${o?c:""}_${s.length}_${f}_${m}_${h}_${u}_${l}_${d}_${_}_${i}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}}));const i=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+i+`${(0,Ko.env)().getNumber("WEBGL_VERSION")}`,a}(e,u,l),p=this.getAndSaveBinary(d,(()=>HT(this.gpgpu,e,u,l))),h=null!=this.activeTimers;let f;h&&(f=this.startTimer()),(0,Ko.env)().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(KT(t.inShapeInfos,n),KT([t.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):e.setOutputMatrixTexture(a.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===(0,Ko.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let r=0;r<n.length;++r){const i=n[r],{uniform:a,offset:o,shape:s,texShape:c}=t.variablesLocations[r];if(s){const{uniformShape:n}=GT(t.program.packedInputs,i.shape,i.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(c&&e.gl.uniform2i(c,i.texData.texShape[0],i.texData.texShape[1]),null!=a)if(i.isUniform)if(Ko.util.sizeFromShape(i.shape)<2)e.gl.uniform1f(a,i.uniformValues[0]);else{let t=i.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=i.texData.slice&&null!=o&&e.gl.uniform1i(o,i.texData.slice.flatOffset),e.setInputMatrixTexture(i.texData.texture.texture,a,r)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=Ko.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let n=0;n<t.program.customUniforms.length;++n){const r=t.program.customUniforms[n],a=t.customUniformLocations[n],o=i[n];if("float"===r.type)e.gl.uniform1fv(a,o);else if("vec2"===r.type)e.gl.uniform2fv(a,o);else if("vec3"===r.type)e.gl.uniform3fv(a,o);else if("vec4"===r.type)e.gl.uniform4fv(a,o);else if("int"===r.type)e.gl.uniform1iv(a,o);else if("ivec2"===r.type)e.gl.uniform2iv(a,o);else if("ivec3"===r.type)e.gl.uniform3iv(a,o);else{if("ivec4"!==r.type)throw Error(`uniform type ${r.type} is not supported yet.`);e.gl.uniform4iv(a,o)}}e.executeProgram()}(this.gpgpu,p,u,l,r),c.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=(0,Ko.env)().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=Ko.util.now();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!(0,Ko.env)().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,n,r,i=!1){n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,Ko.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,Ko.tidy)((()=>{if(!(0,Ko.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=(0,Ko.env)().getBool("DEBUG");(0,Ko.env)().set("DEBUG",!1);const t=this.abs((0,Ko.scalar)(1e-8)).dataSync()[0];if((0,Ko.env)().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:a,usage:o,isPacked:s}=t;if(null!=a)return;const c=null!=this.activeTimers;let u;c&&(u=Ko.util.now());let l=t.texShape;if(null==l&&(l=function(e,t=!1){let n=(0,Ko.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,Ko.env)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&(0,Ko.env)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?Ko.util.nearestLargerEven(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=Ko.util.squeezeShape(e);e=t.newShape}let i=Ko.util.sizeFromShape(e),a=null;e.length<=1&&i<=n?a=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?a=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const o=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||o)if(t){const t=hT(e);let n=2,r=2;e.length&&([n,r]=fT(e)),i=t*(n/2)*(r/2),a=Ko.util.sizeToSquarishShape(i).map((e=>2*e))}else a=Ko.util.sizeToSquarishShape(i);return a}(n,s),t.texShape=l),null!=i){const e=mT(n);let a,o=l[1],d=l[0];const p=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&p||([o,d]=JS(l[0],l[1])),a=s?new rC(e,p):new nC(e,p);const h=p?[d,o]:l,f=this.makeTensorInfo(h,r),m=this.texData.get(f.dataId);m.usage=p?YS.PIXELS:YS.UPLOAD,m.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),o,d,i);const g=[[d,o]],_=!0,v=this.runWebGLProgram(a,[f],r,g,_),y=this.texData.get(v.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,(0,Ko.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),c&&(this.uploadWaitMs+=Ko.util.now()-u)}else{const e=this.acquireTexture(l,o,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*Ko.util.bytesPerElement(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await(0,Ko.nextFrame)(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw iT(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:s}=YT(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:a,channels:o}=e,s=(0,Ko.engine)().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=s.writeTexture(r,t,n,i,a,o);return(0,Ko.engine)().makeTensorFromDataId(c,t,n,s)}}NE.nextDataId=0;Ko.device_util.isBrowser()&&(0,Ko.registerBackend)("webgl",(()=>new NE),2);const AE="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class OE{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Ko.backend_util.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=XT(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const RE="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class PE{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ko.backend_util.assertAndGetBroadcastShape(t,n);const i=this.outputShape.length;this.enableShapeUniforms=XT(i);let a="";if(r)if(0===i||1===Ko.util.sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(a=`\n          ${UT(i)} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=dE("coords",i);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}function DE(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const LE={kernelName:Ko.Identity,backendName:"webgl",kernelFunc:DE};function ME(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=DE({inputs:{x:r},backend:n}),c=DE({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:c},a}const FE={kernelName:Ko.Complex,backendName:"webgl",kernelFunc:ME},zE="return (a < 0.) ? b * a : a;",$E="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const jE={kernelName:Ko.LeakyRelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r,o=n.makeTensorInfo([],"float32",Ko.util.createScalarValue(a,"float32")),s=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new PE($E,i.shape,o.shape):new OE(zE,i.shape,o.shape),c=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),c}},BE="return (a < 0.) ? b * a : a;",VE="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const UE={kernelName:Ko.Prelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,a=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new PE(VE,r.shape,i.shape):new OE(BE,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}},GE="if (isnan(x)) return x;";function qE({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,c=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&null!=n){const e=s.texData.get(o.dataId),t=n(e.values,c);return s.makeTensorInfo(o.shape,c,t)}let u;return u=(0,Ko.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new SE(o.shape,t):new vE(o.shape,e),s.runWebGLProgram(u,[o],c)}}function WE({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:c,b:u}=o,l=s;if(r&&"complex64"===c.dtype){const t=l.texData.get(c.dataId),n=l.texData.get(u.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:c.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o=new OE(e,c.shape,u.shape);return l.runWebGLProgram(o,[i,a],(0,Ko.upcastType)(n.dtype,r.dtype))})),a=ME({inputs:{real:r,imag:i},backend:l});return l.disposeIntermediateTensorInfo(r),l.disposeIntermediateTensorInfo(i),a}const d=a||(0,Ko.upcastType)(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||l.shouldExecuteOnCPU([c,u]))&&null!=i){const e=l.texData.get(c.dataId).values,t=l.texData.get(u.dataId).values,n="string"===c.dtype?Ko.backend_util.fromUint8ToStringArray(e):e,r="string"===c.dtype?Ko.backend_util.fromUint8ToStringArray(t):t,[a,o]=i(c.shape,u.shape,n,r,d),s=l.makeTensorInfo(o,d);return l.texData.get(s.dataId).values=a,s}let p;return p=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new PE(t,c.shape,u.shape,n):new OE(e,c.shape,u.shape),l.runWebGLProgram(p,[c,u],d)}}function HE(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":wE;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":kE;if("prelu"===e)return t?VE:BE;if("leakyrelu"===e)return t?$E:zE;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class YE{constructor(e,t,n,r=!1,i=!1,a=!1,o=null,s=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=XT(this.outputShape.length);const u=r?e[1]:e[2],l=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";o&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,g="result = activation(result);");const _=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",y="rc.x";e[0]<t[0]?v=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(y=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${v};\n        int batchB = ${y};\n        for (int i = 0; i < ${l}; i++) {\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${_}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const KE="return areal * breal - aimag * bimag;",XE="return areal * bimag + aimag * breal;";class QE{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ko.backend_util.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const JE="return a * b;";function ZE(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,a=Ko.backend_util.upcastType(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),a=new QE(KE,r.shape,i.shape),o=new QE(XE,r.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],c=n.runWebGLProgram(a,s,"float32"),u=n.runWebGLProgram(o,s,"float32"),l=ME({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[o,s]=FC(r.shape,i.shape,e.values,t.values,a),c=n.makeTensorInfo(s,a);return n.texData.get(c.dataId).values=o,c}let o;return o=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new PE(JE,r.shape,i.shape):new OE(JE,r.shape,i.shape),n.runWebGLProgram(o,[r,i],a)}const eI={kernelName:Ko.Multiply,backendName:"webgl",kernelFunc:ZE};function tI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,o=n,s=Ko.util.sizeFromShape(i.shape),c=Ko.util.inferFromImplicitShape(a,s),u=Ko.util.sizeFromShape(c);Ko.util.assert(s===u,(()=>`The new shape (${c}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const l=o.texData.get(i.dataId);return!l.isPacked||_T(i.shape,c)||null!==l.texture&&_T(l.shape,c)?(o.incRef(i.dataId),{dataId:i.dataId,shape:c,dtype:i.dtype}):function(e,t,n){const r=[hT(e.shape),...fT(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[hT(t),...fT(t)],o=new hE(a,r),s=[r],c=n.runWebGLProgram(o,[i],e.dtype,s,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(i,c,o)}const nI={kernelName:Ko.Reshape,backendName:"webgl",kernelFunc:tI};class rI{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];const o=4*Math.floor(n/4),s=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c=`sumValue += dot(values * ${Ko.util.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}class iI{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const u=4*Math.floor(n/4),l=n%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,p="vec4";"all"===t?(o="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(o="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${c});\n      }\n    `}}function aI(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Ko.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:c,outSize:u}=i[o];let l,d;l="mean"===n?0===o?new rI({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},s):new rI({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u}):new iI({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},n),d=a,a=r.runWebGLProgram(l,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}class oI{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=UT(this.rank),i=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class sI{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=UT(this.rank),i=lE("rc",this.rank),a=new Array(this.rank);for(let e=0;e<t.length;e++)a[t[e]]=i[e];const o=`vec2(${a.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${s}) {\n        result[1] = ${c};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${c};\n        if(${s}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function cI(e,t,n){const r=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sI(e.shape,t):new oI(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function uI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;return function(e,t,n,r){const i=t,a=e.shape.length,o=Ko.util.parseAxisParam(i,e.shape);let s=o;const c=Ko.backend_util.getAxesPermutation(s,a),u=null!=c;let l=e;u&&(l=cI(e,c,r),s=Ko.backend_util.getInnerMostAxes(s.length,a)),Ko.backend_util.assertAxesAreInnerMostDims("sum",s,a);const[d,p]=Ko.backend_util.computeOutAndReduceShapes(l.shape,s);let h=d;n&&(h=Ko.backend_util.expandShapeToKeepDim(d,o));const f=Ko.util.sizeFromShape(p),m=tI({inputs:{x:l},attrs:{shape:[Ko.util.sizeFromShape(e.shape)/f,f]},backend:r}),g=aI(m,(0,Ko.sumOutType)(e.dtype),"sum",r),_=tI({inputs:{x:g},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(l),_}(i,a,o,n)}const lI={kernelName:Ko.Sum,backendName:"webgl",kernelFunc:uI};function dI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:a}=r,o=n,s=i.shape.length,c=new Array(s);for(let e=0;e<c.length;e++)c[e]=i.shape[a[e]];let u;if(o.shouldExecuteOnCPU([i])){const e=o.texData.get(i.dataId).values,t=cE(e,i.shape,i.dtype,a,c);u=o.makeTensorInfo(c,i.dtype);o.texData.get(u.dataId).values=t}else u=cI(i,a,o);return u}const pI={kernelName:Ko.Transpose,backendName:"webgl",kernelFunc:dI};function hI({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:c=null}){const u=e.shape.length,l=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],p=r?t.shape[l-1]:t.shape[l-2],h=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[l-2]:t.shape[l-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),_=Ko.util.sizeFromShape(m),v=Ko.util.sizeFromShape(g),y=Ko.broadcast_util.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,f]);Ko.util.assert(d===p,(()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const b=n?[_,d,h]:[_,h,d],w=r?[v,f,p]:[v,p,f],k=tI({inputs:{x:e},backend:i,attrs:{shape:b}}),x=tI({inputs:{x:t},backend:i,attrs:{shape:w}}),S=[k,x],T=Math.max(_,v),C=n?k.shape[1]:k.shape[2],E=null!=a,I=null!=o,N="leakyrelu"===c,A=null!=c?HE(c,!0):null;let O;if((1===h||1===f)&&C>1e3&&!1===(E||I||N||null!=A)){let e=k,t=x;n&&(e=dI({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),S.push(e)),r&&(t=dI({inputs:{x},backend:i,attrs:{perm:[0,2,1]}}),S.push(t));const a=1===f;let o=e;1!==f&&(o=tI({inputs:{x:e},backend:i,attrs:{shape:[T,C,1]}}),S.push(o));const s=1===f?2:1;let c=t;a&&(c=tI({inputs:{x:t},backend:i,attrs:{shape:[T,1,C]}}),S.push(c));const u=ZE({inputs:{a:o,b:c},backend:i});O=uI({inputs:{x:u},backend:i,attrs:{axis:s,keepDims:!0}}),S.push(u)}else{const c=(0,Ko.upcastType)(e.dtype,t.dtype),u=new YE(b,w,[T,h,f],n,r,E,A,I,N),l=[k,x];if(null!=a&&l.push(a),I&&l.push(o),N){const e=i.makeTensorInfo([],"float32",Ko.util.createScalarValue(s,"float32"));l.push(e),S.push(e)}O=i.runWebGLProgram(u,l,c)}const R=tI({inputs:{x:O},backend:i,attrs:{shape:y}});S.push(O);for(const e of S)i.disposeIntermediateTensorInfo(e);return R}const fI={kernelName:Ko._FusedMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:o,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;return hI({a:i,b:a,transposeA:c,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:l})}},mI="return abs(x);";const gI={kernelName:Ko.Abs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=YC(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=(0,Ko.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new SE(r.shape,mI):new vE(r.shape,mI),n.runWebGLProgram(i,[r],r.dtype)}},_I=qE({opSnippet:yE+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),vI={kernelName:Ko.Acos,backendName:"webgl",kernelFunc:_I},yI=qE({opSnippet:yE+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),bI={kernelName:Ko.Acosh,backendName:"webgl",kernelFunc:yI},wI="return a + b;",kI=WE({opSnippet:wI,packedOpSnippet:wI,supportsComplex:!0,cpuKernelImpl:mC}),xI={kernelName:Ko.Add,backendName:"webgl",kernelFunc:kI};class SI{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class TI{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const CI={kernelName:Ko.AddN,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return DE({inputs:{x:i[0]},backend:r});if(i.length>(0,Ko.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),a=e({inputs:i.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=i.map((e=>e.dtype)).reduce(((e,t)=>(0,Ko.upcastType)(e,t))),o=i.map((e=>e.shape)),s=(0,Ko.env)().getBool("WEBGL_PACK")?new TI(i[0].shape,o):new SI(i[0].shape,o);return r.runWebGLProgram(s,i,a)}};const EI={kernelName:Ko.All,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=i.shape.length,c=Ko.util.parseAxisParam(a,i.shape);let u=c;const l=Ko.backend_util.getAxesPermutation(u,s);let d=i;null!=l&&(d=dI({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Ko.backend_util.getInnerMostAxes(u.length,s)),Ko.backend_util.assertAxesAreInnerMostDims("all",u,s);const[p,h]=Ko.backend_util.computeOutAndReduceShapes(d.shape,u),f=tI({inputs:{x:d},backend:n,attrs:{shape:[-1,Ko.util.sizeFromShape(h)]}}),m=aI(f,f.dtype,"all",n);let g;if(o){g=tI({inputs:{x:m},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(p,c)}})}else g=tI({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};const II={kernelName:Ko.Any,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=i.shape.length,c=Ko.util.parseAxisParam(a,i.shape);let u=c;const l=Ko.backend_util.getAxesPermutation(u,s);let d=i;null!=l&&(d=dI({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Ko.backend_util.getInnerMostAxes(u.length,s)),Ko.backend_util.assertAxesAreInnerMostDims("any",u,s);const[p,h]=Ko.backend_util.computeOutAndReduceShapes(d.shape,u),f=tI({inputs:{x:d},backend:n,attrs:{shape:[-1,Ko.util.sizeFromShape(h)]}}),m=aI(f,f.dtype,"any",n);let g;if(o){g=tI({inputs:{x:m},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(p,c)}})}else g=tI({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};class NI{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class AI{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Ko.util.assert(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const o=this.outputShape,s=o.length,c=UT(s),u=dE("coords",s);let l,d;if(1===a){d=s+1;const e=UT(d);l=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else d=s,l=`\n        ${c} sourceLocR = coords;\n        ++${u[s-1]};\n        ${c} sourceLocG = coords;\n        ++${u[s-2]};\n        ${c} sourceLocA = coords;\n        --${u[s-1]};\n        ${c} sourceLocB = coords;\n        --${u[s-2]};`;const p=["x","y","z","w","u","v"].slice(0,d),h="."+p[d-1],f=p.map((e=>"int "+e)),m=dE("sourceLocR",d-1).concat("inIdx.r"),g=dE("sourceLocG",d-1).concat("inIdx.g"),_=dE("sourceLocB",d-1).concat("inIdx.b"),v=dE("sourceLocA",d-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",b=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${_.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,w=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${_.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${p.join()}),\n                                          vec2(${p.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${p.join()}),\n                               vec2(${p.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${o[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${o[s-2]-1};\n        ${l}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${b}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function OI(e,t,n,r=null){let i=t.shape[0],a=t.shape[1];null!=r&&(i=r.shape[0],a=r.shape[1]);const o=Ko.backend_util.computeOptimalWindowSize(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},c=new NI(s,n,null==r),u=[t];null!=r&&u.push(r);const l=e.runWebGLProgram(c,u,"int32");if(1===l.shape[1])return l;const d=OI(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function RI(e,t,n,r=null){const i=null!=r?r.shape:t.shape,a=i[i.length-1],o=Ko.backend_util.computeOptimalWindowSize(a),s=new AI(i,o,n,null==r),c=null==r?[t]:[t,r],u=e.runWebGLProgram(s,c,"int32");if(u.shape.length===t.shape.length){const r=RI(e,t,n,u);return e.disposeIntermediateTensorInfo(u),r}return u}function PI(e,t,n,r){const i=[n];if(Ko.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!(0,Ko.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let o=t;null!==a&&a.isPacked&&(o=e.unpackTensor(t),n.push(o));const[s,c]=Ko.backend_util.computeOutAndReduceShapes(o.shape,i),u=Ko.util.sizeFromShape(c),l=tI({inputs:{x:o},backend:e,attrs:{shape:[-1,u]}});n.push(l);const d=OI(e,l,r);n.push(d);const p=tI({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return RI(e,t,r)}const DI={kernelName:Ko.ArgMax,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;let o=Ko.util.parseAxisParam(a,i.shape);const s=Ko.backend_util.getAxesPermutation(o,i.shape.length);let c=i;const u=[];null!=s&&(c=dI({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(c),o=Ko.backend_util.getInnerMostAxes(o.length,c.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],c.shape.length);const l=PI(n,c,o[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};const LI={kernelName:Ko.ArgMin,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;let o=Ko.util.parseAxisParam(a,i.shape);const s=Ko.backend_util.getAxesPermutation(o,i.shape.length);let c=i;const u=[];null!=s&&(c=dI({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(c),o=Ko.backend_util.getInnerMostAxes(o.length,c.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],c.shape.length);const l=PI(n,c,o[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}},MI=qE({opSnippet:yE+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),FI={kernelName:Ko.Asin,backendName:"webgl",kernelFunc:MI},zI=qE({opSnippet:yE+"return log(x + sqrt(x * x + 1.0));"}),$I={kernelName:Ko.Asinh,backendName:"webgl",kernelFunc:zI},jI=qE({opSnippet:yE+"\n  return atan(x);\n"}),BI={kernelName:Ko.Atan,backendName:"webgl",kernelFunc:jI},VI=WE({opSnippet:AE+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+RE+"\n  return result;\n"}),UI={kernelName:Ko.Atan2,backendName:"webgl",kernelFunc:VI},GI=qE({opSnippet:yE+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),qI={kernelName:Ko.Atanh,backendName:"webgl",kernelFunc:GI};class WI{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let _="0.0";if(f||(_="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${s});\n        const ivec2 pads = ivec2(${p}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / max(count, 1.0)");const y=4*Math.floor(a/4),b=a%4,w=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${s});\n      const ivec2 pads = ivec2(${p}, ${h});\n      const float initializationValue = ${_};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${_});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===b}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class HI{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,s=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,_=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let y="0.0";if(v||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${s}, ${c});\n        const ivec3 pads = ivec3(${m}, ${g}, ${_});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${p};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / max(count, 1.0)");const w=4*Math.floor(a/4),k=a%4,x=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${s}, ${c});\n      const ivec3 pads = ivec3(${m}, ${g}, ${_});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${p};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${x}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${x}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${x}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${x}\n            }\n          }\n        }\n        setOutput(${b});\n      }\n    `}}const YI={kernelName:Ko.AvgPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ST(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:c}=r;Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=Ko.backend_util.computePool2DInfo(i.shape,a,o,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Ko.util.arraysEqual(u.inShape,u.outShape))return DE({inputs:{x:i},backend:n});const l=new WI(u,"avg",!1);return n.runWebGLProgram(l,[i],"float32")}};const KI={kernelName:Ko.AvgPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:c,dataFormat:u}=r,l=Ko.backend_util.computePool3DInfo(i.shape,a,o,[1,1,1],s,c,u),d=new HI(l,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}};class XI{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.top,l=c-1-e.padInfo.left,d=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${l});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${o}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class QI{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,m=p-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const JI={kernelName:Ko.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,o=a,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=r,d=Ko.backend_util.computePool3DInfo(o.shape,s,c,[1,1,1],u,l),p=new QI(d);return n.runWebGLProgram(p,[i],o.dtype)}};const ZI={kernelName:Ko.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,o=a;ST([i,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=r,l=Ko.backend_util.computePool2DInfo(o.shape,s,c,1,u),d=new XI(l);return n.runWebGLProgram(d,[i],o.dtype)}};const eN={kernelName:Ko.BatchMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:o,transposeB:s}=r;return hI({a:i,b:a,transposeA:o,transposeB:s,backend:n})}};class tN{constructor(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Ko.backend_util.assertAndGetBroadcastShape(e,t),Ko.backend_util.assertAndGetBroadcastShape(e,n);let o="0.0";null!=r&&(Ko.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="1.0";null!=i&&(Ko.backend_util.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class nN{constructor(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ko.backend_util.assertAndGetBroadcastShape(e,t),Ko.backend_util.assertAndGetBroadcastShape(e,n);let o="vec4(0.0)";null!=r&&(Ko.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(Ko.backend_util.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const rN={kernelName:Ko.FusedBatchNorm,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=e;Ko.util.assert(i.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Ko.util.assert(null==o||i.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Ko.util.assert(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=n;null==c&&(c=.001);const u=[r,i,a];let l=null;null!=o&&(l=o.shape,u.push(o));let d=null;null!=s&&(d=s.shape,u.push(s));const p=(0,Ko.env)().getBool("WEBGL_PACK_NORMALIZATION")?new nN(r.shape,i.shape,a.shape,l,d,c):new tN(r.shape,i.shape,a.shape,l,d,c);return t.runWebGLProgram(p,u,u[0].dtype)}};class iN{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=UT(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return aN.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;const i=e.map(((e,t)=>`sourceLoc.${aN[t]} = start[${t}] + coords.${aN[t]};`));r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${i.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const aN=["x","y","z","w","u","v"];class oN{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=UT(this.rank),n=dE("coords",this.rank),r=dE("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,o=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${o}\n        ${s}\n        setOutput(result);\n      }\n    `}}function sN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:o}=r,[s,c]=Ko.slice_util.parseSliceParams(i,a,o);if(Ko.slice_util.assertParamsValid(i,s,c),0===Ko.util.sizeFromShape(c))return n.makeTensorInfo(c,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=KC(e.values,s,c,i.shape,i.dtype);return n.makeTensorInfo(c,i.dtype,t)}const{isPacked:u}=n.texData.get(i.dataId),l=Ko.slice_util.isSliceContinous(i.shape,s,c);if(u||!l){const e=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oN(c):new iN(c),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){const i=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=e.dtype;let s=Ko.slice_util.computeFlatOffset(t,Ko.util.computeStrides(e.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};const c=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,c+1),a}(i,s,c,n)}const cN={kernelName:Ko.Slice,backendName:"webgl",kernelFunc:sN},uN={kernelName:Ko.BatchToSpaceND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:o}=r;Ko.util.assert(i.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=Ko.backend_util.getReshaped(i.shape,a,s),u=Ko.backend_util.getPermuted(c.length,a.length),l=Ko.backend_util.getReshapedPermuted(i.shape,a,s),d=Ko.backend_util.getSliceBeginCoords(o,a.length),p=Ko.backend_util.getSliceSize(l,o,a.length),h=[],f=tI({inputs:{x:i},backend:n,attrs:{shape:c}}),m=dI({inputs:{x:f},backend:n,attrs:{perm:u}}),g=tI({inputs:{x:m},backend:n,attrs:{shape:l}}),_=sN({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),_}};const lN={kernelName:Ko.Bincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o}=r,s=n.readSync(i.dataId),c=n.readSync(a.dataId),u=gC(s,c,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}};const dN={kernelName:Ko.BitwiseAnd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,a=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=(0,Ko.env)().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||1===o){const e=n.texData.get(r.dataId).values,t=n.texData.get(i.dataId).values,[a,o]=vC(r.shape,i.shape,e,t,r.dtype),s=n.makeTensorInfo(o,r.dtype);return n.texData.get(s.dataId).values=a,s}let s;return s=a?new PE("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new OE("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}};const pN={kernelName:Ko.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=Ko.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},hN=WE({opSnippet:"return float(a != b);",cpuKernelImpl:$C,dtype:"bool"}),fN={kernelName:Ko.NotEqual,backendName:"webgl",kernelFunc:hN};function mN(e){const{inputs:t,backend:n}=e,{input:r}=t;return DE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const gN={kernelName:Ko.Real,backendName:"webgl",kernelFunc:mN};const _N={kernelName:Ko.Cast,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:i}=t,{x:a}=n,{dtype:o}=i;if("complex64"===o){if("complex64"===a.dtype)return DE({inputs:{x:a},backend:r});const t=Ko.zeros(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),i=ME({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===a.dtype){const t=mN({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(t),n}if(!Ko.util.hasEncodingLoss(a.dtype,o)){const e=DE({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:o}}if(r.shouldExecuteOnCPU([a])){const e=r.texData.get(a.dataId).values,[t,n,i]=yC(e,a.shape,a.dtype,o);return r.makeTensorInfo(t,n,i)}if("int32"===o)return function(e,t){const n=new vE(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===o){const e=r.makeTensorInfo([],"bool",Ko.util.getTypedArrayFromDType("bool",1)),t=hN({inputs:{a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${o}`)}},vN="return ceil(x);",yN=qE({opSnippet:vN,packedOpSnippet:vN,cpuKernelImpl:bC}),bN={kernelName:Ko.Ceil,backendName:"webgl",kernelFunc:yN};class wN{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class kN{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const xN={kernelName:Ko.ClipByValue,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:a,clipValueMax:o}=r;let s;s=(0,Ko.env)().getBool("WEBGL_PACK_CLIP")?new kN(i.shape):new wN(i.shape);const c=[[a],[o]];return n.runWebGLProgram(s,[i],i.dtype,c)}};class SN{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function TN(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const CN={kernelName:Ko.ComplexAbs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),a=new SN(r.shape),o=[TN(r,i.complexTensorInfos.real),TN(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}};class EN{constructor(e){this.outputShape=[],this.outputShape=Ko.backend_util.computeOutShape(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class IN{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ko.backend_util.computeOutShape(e,t);const n=this.outputShape,r=n.length,i=UT(r),a=dE("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];const c=o[t],u=o.slice(-2),l=o.join();let d=`if (${c} < ${s[0]}) {\n        return getChannel(\n            getT0(${l}), vec2(${u.join()}));\n        }`;for(let e=1;e<s.length;e++){const t=s[e-1];d+=`\n        if (${c} < ${s[e]}  && ${c} >= ${s[e-1]}) {\n          return getChannel(\n            getT${e}(${NN(o,c,t)}),\n            vec2(${NN(u,c,t)}));\n        }`}const p=s.length,h=s[s.length-1];d+=`\n        return getChannel(\n          getT${p}(${NN(o,c,h)}),\n          vec2(${NN(u,c,h)}));`,this.userCode=`\n      float getValue(${o.map((e=>"int "+e))}) {\n        ${d}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function NN(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function AN(e){const{inputs:t,backend:n}=e,{input:r}=t;return DE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const ON={kernelName:Ko.Imag,backendName:"webgl",kernelFunc:AN};function RN(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>mN({inputs:{input:e},backend:n}))),i=e.map((e=>AN({inputs:{input:e},backend:n}))),a=RN(r,t,n),o=RN(i,t,n),s=ME({inputs:{real:a,imag:o},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),i.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map((e=>{const r=Ko.util.sizeFromShape(e.shape.slice(t));return tI({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=i.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),o=Ko.backend_util.computeOutShape(i.map((e=>e.shape)),1),s=1===i[0].shape[0],c=wC(a,o,r,s),u=Ko.backend_util.computeOutShape(e.map((e=>e.shape)),t),l=n.makeTensorInfo(u,r,c);return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const a=e.filter((e=>Ko.util.sizeFromShape(e.shape)>0)),o=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=o?new vE(e[0].shape,xE):new SE(e[0].shape,xE);return n.runWebGLProgram(t,e,r)}const s=(0,Ko.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const e=[];for(let r=0;r<a.length;r+=s){const i=a.slice(r,r+s);e.push(RN(i,t,n))}const r=RN(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(o){const e=new IN(a.map((e=>e.shape)),t);return n.runWebGLProgram(e,a,r)}const{tensors2D:c,outShape:u}=function(e,t,n){const r=Ko.backend_util.computeOutShape(e.map((e=>e.shape)),t),i=e.map((e=>tI({inputs:{x:e},attrs:{shape:[-1,Ko.util.sizeFromShape(e.shape.slice(t))]},backend:n})));return{tensors2D:i,outShape:r}}(a,t,n),l=new EN(c.map((e=>e.shape))),d=n.runWebGLProgram(l,c,r);c.forEach((e=>n.disposeIntermediateTensorInfo(e)));const p=tI({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),p}function PN(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=Ko.util.parseAxisParam(i,t[0].shape)[0],o=t.map((e=>e.shape));Ko.backend_util.assertParamsConsistent(o,a);const s=Ko.backend_util.computeOutShape(t.map((e=>e.shape)),a);if(0===Ko.util.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);const c=t.filter((e=>Ko.util.sizeFromShape(e.shape)>0));return 1===c.length?DE({inputs:{x:c[0]},backend:n}):RN(c,a,n)}const DN={kernelName:Ko.Concat,backendName:"webgl",kernelFunc:PN};class LN{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,_=m?2:3,v=m?3:1;let y="",b="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,b="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${s}, ${c});\n      const ivec2 pads = ivec2(${a}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${_}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${l};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${b}\n        setOutput(result);\n      }\n    `}}class MN{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${a}, ${o});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class FN{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=XT(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,s=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,l=u;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<u;e++)d+=`\n           vec4 xTexelC${2*e};\n           int xTexelC${2*e}Ready;\n           vec4 xTexelC${2*e+1};\n           int xTexelC${2*e+1}Ready;\n           vec4 xC${e};`;d+=`\n     for (int r = 0; r < ${c}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let e=0;e<u;e++)d+=`\n           xTexelC${2*e} = vec4(0.0);\n           xTexelC${2*e}Ready = 0;\n           xTexelC${2*e+1} = vec4(0.0);\n           xTexelC${2*e+1}Ready = 0;\n           xC${e} = vec4(0.0);`;d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let t=0;t<(l+1)/2;t++){const n=2*t;if(d+=`\n           xC = xCCorner + ${n*s};\n           `,1===o){if(n<u&&(a%2==1?(d+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n               `,d+=1===s&&n>0?`\n                 xC${n} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${n} = vec4(previous.zw, xTexelC${n}.xy);\n                   } else {\n                     xC${n} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                   }\n                   `):d+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xC${n} = xTexelC${n};\n                 `,n+1<u)){const e=a%2==0?Ko.util.nearestLargerEven(s):s;s%2==0&&a%2==1||s%2!=0&&a%2!=1?(d+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                     xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${n+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${n+1}Ready = 1;\n                   }\n                   `,d+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${n+1} = vec4(previous.zw, xTexelC${n+1}.xy);\n                     } else {\n                      xC${n+1} = vec4(0.0, 0.0, xTexelC${n+1}.xy);\n                     }\n                     `:`\n                     xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.xy);\n                     `):d+=1===e?`\n                     xC${n+1} = xTexelC${n};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                       xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${n+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${n+1}Ready = 1;\n                     }\n\n                     xC${n+1} = xTexelC${n+1};\n                     `}}else n<u&&(a%2==1?(d+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n               `,n+1<u&&(d+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${n+1} = vec4(xTexelC${n+1}.xy, final.xy);\n                 `)):(d+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(\n                   xTexelC${n}.xy, xTexelC${n+1}.xy);\n               `,n+1<u&&(d+=`\n                   xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n                 `)));n<u&&(d+=`\n             wTexel = getW(r, ${n}, d1, d2);\n             dotProd += xC${n}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${n}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,n+1<u&&(d+=`\n               wTexel = getW(r, ${n+1}, d1, d2);\n               dotProd += xC${n+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${n+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let p="",h="";n&&(p=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,h="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${p}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${d}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${h}\n         setOutput(result);\n       }\n     `}}class zN{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=XT(this.outputShape.length);const{dataFormat:n}=t,r=CT(),i="channelsLast"===n,a=i?1:2,o=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)c+=`\n          blockIndex = rc.z + ${t};\n          pos = rc.y + ${e};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${o}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${r.output} = result;\n      }\n    `}}function $N(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function jN({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const c=e.shape,u=r.texData.get(e.dataId),l=n.inChannels,d=c[0]*c[1]*c[2],p=n.outChannels,h="channelsLast"===n.dataFormat,f=!1;let m;const g=[];if(null!=a){const e=$N(a.shape,h);null!=e&&(a=tI({inputs:{x:a},backend:r,attrs:{shape:e}}),g.push(a))}if(null!=i){const e=$N(i.shape,h);null!=e&&(i=tI({inputs:{x:i},backend:r,attrs:{shape:e}}),g.push(i))}if(!((1===d||1===p)&&l>1e3)&&u.isPacked&&h&&null!=u.texture&&c[2]%2!=0&&Ko.util.arraysEqual(u.shape.slice(-3),c.slice(-3))){const l=c[0]*c[1]*(c[2]+1),d={dataId:e.dataId,shape:[1,l,n.inChannels],dtype:e.dtype},p=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Ko.util.assert(_T(u.shape,d.shape),(()=>`packed reshape ${u.shape} to ${d.shape} isn't free`));const h=tI({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(h);const _=hI({a:d,b:h,backend:r,transposeA:false,transposeB:f,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),v=r.texData.get(_.dataId);Ko.util.assert(v.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=p,v.shape=n.outShape,m=DE({inputs:{x:_},backend:r}),m.shape=n.outShape,g.push(_)}else{const c=n.outHeight*n.outWidth,u=tI({inputs:{x:e},backend:r,attrs:{shape:h?[n.batchSize,c,n.inChannels]:[n.batchSize,n.inChannels,c]}}),l=tI({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),d=hI({a:h?u:l,b:h?l:u,transposeA:!h,transposeB:f,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});m=tI({inputs:{x:d},backend:r,attrs:{shape:n.outShape}}),g.push(u),g.push(l),g.push(d)}for(const e of g)r.disposeIntermediateTensorInfo(e);return m}function BN({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:c,filterHeight:u,inChannels:l,outWidth:d,outHeight:p,dataFormat:h}=n,f="channelsLast"===h,m=c*u*l,g=p*d,_=[n.batchSize,m,g],v=[];if(null!=a){const e=$N(a.shape,f);null!=e&&(a=tI({inputs:{x:a},backend:r,attrs:{shape:e}}),v.push(a))}if(null!=i){const e=$N(i.shape,f);null!=e&&(i=tI({inputs:{x:i},backend:r,attrs:{shape:e}}),v.push(i))}const y=tI({inputs:{x:t},backend:r,attrs:{shape:[1,m,Ko.util.sizeFromShape(t.shape)/m]}});v.push(y);const b=new zN(_,n),w=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],k=r.runWebGLProgram(b,[e],"float32",w),x=tI({inputs:{x:k},backend:r,attrs:{shape:_}});v.push(k),v.push(x);const S=null!=i,T=null!=a,C="leakyrelu"===s,E=s?HE(s,!0):null,I=new YE(f?x.shape:y.shape,f?y.shape:x.shape,f?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],!0,!1,S,E,T,C),N=f?[x,y]:[y,x];if(i&&N.push(i),T&&N.push(a),C){const e=r.makeTensorInfo([],"float32",Ko.util.createScalarValue(o,"float32"));N.push(e),v.push(e)}const A=r.runWebGLProgram(I,N,"float32"),O=tI({inputs:{x:A},backend:r,attrs:{shape:n.outShape}});v.push(A);for(const e of v)r.disposeIntermediateTensorInfo(e);return O}const VN={kernelName:Ko.Conv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=r,d=Ko.backend_util.convertConv2DDataFormat(c),p=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,o,u,s,l,!1,d);let h;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===d&&(0,Ko.env)().getBool("WEBGL_EXP_CONV")){const e=new FN(p),t=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(e,[i,a],"float32",t)}else if((0,Ko.env)().getBool("WEBGL_CONV_IM2COL"))h=BN({x:i,filter:a,convInfo:p,backend:n});else{const e=new LN(p);h=n.runWebGLProgram(e,[i,a],"float32")}else h=jN({x:i,filter:a,convInfo:p,backend:n});const f=tI({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class UN{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${a?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class GN{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=a?1:2,u=a?2:3,l=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class qN{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${i};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${o};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class WN{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${c}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const HN={kernelName:Ko.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=r,d=Ko.backend_util.convertConv2DDataFormat(c),p=Ko.backend_util.computeConv2DInfo(i.shape,l,o,1,s,u,!1,d),h=new UN(p);return n.runWebGLProgram(h,[i,a],"float32")}};class YN{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=XT(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const KN={kernelName:Ko.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:o,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=r,d=Ko.backend_util.convertConv2DDataFormat(u),p=Ko.backend_util.computeConv2DInfo(o,a.shape,s,1,c,l,!1,d);if((0,Ko.env)().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[p.strideHeight,p.strideWidth]],t=new YN(p);return n.runWebGLProgram(t,[i,a],"float32",e)}{const e=new GN(p);return n.runWebGLProgram(e,[i,a],"float32")}}};const XN={kernelName:Ko.Conv3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:c}=r,u=Ko.backend_util.computeConv3DInfo(i.shape,a.shape,o,c,s),l=new MN(u);return n.runWebGLProgram(l,[i,a],"float32")}};const QN={kernelName:Ko.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,filterShape:c}=r,u=Ko.backend_util.computeConv3DInfo(i.shape,c,o,1,s),l=new qN(u);return n.runWebGLProgram(l,[i,a],"float32")}};const JN={kernelName:Ko.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:o,strides:s,inputShape:c}=r,u=Ko.backend_util.computeConv3DInfo(c,a.shape,s,1,o),l=new WN(u);return n.runWebGLProgram(l,[i,a],"float32")}},ZN=qE({opSnippet:GE+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${RE}\n  return result;\n`}),eA={kernelName:Ko.Cos,backendName:"webgl",kernelFunc:ZN},tA=qE({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),nA={kernelName:Ko.Cosh,backendName:"webgl",kernelFunc:tA};class rA{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,s,c]=e,[u]=t,[l,d]=n;this.outputShape=[u,l,d,c];const p="bilinear"===r?1:0,[h,f]=[o-1+".0",s-1+".0"],[m,g,_]=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[v,y,b]=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${y};\n\n        float in_y = ${_};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${b};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${p} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const iA={kernelName:Ko.CropAndResize,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:o}=t,{cropSize:s,method:c,extrapolationValue:u}=r,l=new rA(i.shape,a.shape,s,c,u);return n.runWebGLProgram(l,[i,a,o],"float32")}};var aA;!function(e){e.Prod="*",e.Sum="+"}(aA||(aA={}));class oA{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===aA.Prod?"1.0":"0.0",o=n?a:`getX(${sA(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let c="",u="";n?(c=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(c=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${UT(i)} coords = getOutputCoords();\n        int end = ${cA(i,"coords",this.op)};\n        float val = ${o};\n        int pow2 = int(pow(2.0, index));\n        if (${c}) {\n          int idx = ${u};\n          ${cA(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${sA(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function sA(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function cA(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function uA(e,t,n,r,i,a){const o=t.shape.length,s=Ko.backend_util.getAxesPermutation([r],o);let c=t;null!=s&&(c=dI({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=Ko.backend_util.getInnerMostAxes(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const l=c.shape[u];let d=DE({inputs:{x:c},backend:n});for(let t=0;t<=Math.ceil(Math.log2(l))-1;t++){const r=new oA(e,c.shape,!1,a),i=[[t]],o=d;d=n.runWebGLProgram(r,[d],d.dtype,i),n.disposeIntermediateTensorInfo(o)}if(i){const t=new oA(e,c.shape,i,a),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=dI({inputs:{x:d},backend:n,attrs:{perm:Ko.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(c),e}return d}const lA={kernelName:Ko.Cumprod,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;return uA(aA.Prod,i,n,a,o,s)}};const dA={kernelName:Ko.Cumsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;return uA(aA.Sum,i,n,a,o,s)}};const pA={kernelName:Ko.DenseBincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o,binaryOutput:s}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(a.dataId),r=gC(e,t,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(a),r=_C(e,t,o,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};class hA{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const fA={kernelName:Ko.DepthToSpace,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:o}=r,s=i.shape[0],c=("NHWC"===o?i.shape[1]:i.shape[2])*a,u=("NHWC"===o?i.shape[2]:i.shape[3])*a,l=("NHWC"===o?i.shape[3]:i.shape[1])/(a*a),d=new hA("NHWC"===o?[s,c,u,l]:[s,l,c,u],a,o);return n.runWebGLProgram(d,[i],i.dtype)}};class mA{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=XT(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,s=e.outChannels/e.inChannels;let c="",u="";n&&(c=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const l=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${l}\n        ${u}\n        setOutput(result);\n      }\n    `}}class gA{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=XT(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,s=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,d=l;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<l;e++)p+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;p+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let e=0;e<l;e++)p+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(d+1)/2;e++){const t=2*e;if(p+=`\n          xC = xCCorner + ${t*c};\n          `,1===s){if(t<l&&(o%2==1?(p+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,p+=1===c&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):p+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<l)){const e=o%2==0?Ko.util.nearestLargerEven(c):c;c%2==0&&o%2==1||c%2!=0&&o%2!=1?(p+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,p+=c>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                    } else {\n                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                    }\n                    `:`\n                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                    `):p+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<l&&(o%2==1?(p+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<l&&(p+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(p+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<l&&(p+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<l&&(p+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<l&&(p+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}p+="\n    }\n  ",p+="\n      }\n    ";let h="",f="";n&&(h=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${h}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${p}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const _A={kernelName:Ko.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:c,dimRoundingMode:u}=r;let l=c;null==l&&(l=[1,1]),Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,l),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`));const d=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,o,l,s,u,!0);let p;p=(0,Ko.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new gA(d):new mA(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,a],"float32",h)}};class vA{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class yA{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const bA={kernelName:Ko.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=r,d=Ko.backend_util.computeConv2DInfo(i.shape,l,o,s,c,u,!0),p=new vA(d);return n.runWebGLProgram(p,[i,a],"float32")}};const wA={kernelName:Ko.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:o,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=r,d=Ko.backend_util.computeConv2DInfo(l,a.shape,o,s,c,u,!0),p=new yA(d);return n.runWebGLProgram(p,[i,a],"float32")}};class kA{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const xA={kernelName:Ko.Diag,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],a=Ko.util.sizeFromShape(r.shape),o=tI({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new kA(a),c=n.runWebGLProgram(s,[o],o.dtype),u=tI({inputs:{x:c},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),u}};class SA{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:s,dilationHeight:c,dilationWidth:u}=e,{top:l,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${a});\n      const ivec2 pads = ivec2(${l}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${o}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const TA={kernelName:Ko.Dilation2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:c}=r,u=Ko.backend_util.computeDilation2DInfo(i.shape,a.shape,o,s,"NHWC",c);let l;const d=new SA(u);l=n.runWebGLProgram(d,[i,a],"float32");const p=tI({inputs:{x:l},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(l),p}};const CA={kernelName:Ko.Einsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:o,summedDims:s,idDims:c}=Ko.backend_util.decodeEinsumEquation(i,a.length);Ko.backend_util.checkEinsumDimSizes(o.length,c,a);const{path:u,steps:l}=Ko.backend_util.getEinsumComputePath(s,c),d=l.length;let p=null,h=o.length;const f=[];for(let e=0;e<d;++e){for(const t of l[e]){const{permutationIndices:e,expandDims:r}=Ko.backend_util.getEinsumPermutation(h,c[t]);let i;Ko.backend_util.isIdentityPermutation(e)?i=a[t]:(i=dI({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),f.push(i));const o=i.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);Ko.util.arraysEqual(i.shape,o)||(i=tI({inputs:{x:i},backend:n,attrs:{shape:o}}),f.push(i)),null===p?p=i:(p=ZE({inputs:{a:i,b:p},backend:n}),f.push(p))}e<d-1&&(u[e]>=0&&(p=uI({inputs:{x:p},backend:n,attrs:{axis:u[e]-(o.length-h),keepDims:!1}}),f.push(p)),h--)}for(const e of f)e!==p&&n.disposeIntermediateTensorInfo(e);return p}},EA=qE({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),IA={kernelName:Ko.Elu,backendName:"webgl",kernelFunc:EA},NA={kernelName:Ko.EluGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,a=(0,Ko.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new PE("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new OE("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)}},AA=WE({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:kC}),OA={kernelName:Ko.Equal,backendName:"webgl",kernelFunc:AA},RA=qE({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Ko.backend_util.ERF_P};\n  float a1 = ${Ko.backend_util.ERF_A1};\n  float a2 = ${Ko.backend_util.ERF_A2};\n  float a3 = ${Ko.backend_util.ERF_A3};\n  float a4 = ${Ko.backend_util.ERF_A4};\n  float a5 = ${Ko.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),PA={kernelName:Ko.Erf,backendName:"webgl",kernelFunc:RA},DA=qE({opSnippet:GE+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:xC,dtype:"float32"}),LA={kernelName:Ko.Exp,backendName:"webgl",kernelFunc:DA};function MA(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:a}=t,o=a.shape.length,s=a.shape.slice();let c=i;return i<0&&(Ko.util.assert(-(o+1)<=i,(()=>`Axis must be in the interval [${-(o+1)}, ${o}]`)),c=o+i+1),s.splice(c,0,1),tI({inputs:{x:a},backend:r,attrs:{shape:s}})}const FA={kernelName:Ko.ExpandDims,backendName:"webgl",kernelFunc:MA},zA="return exp(x) - 1.0;",$A=qE({opSnippet:zA,packedOpSnippet:zA,cpuKernelImpl:SC}),jA={kernelName:Ko.Expm1,backendName:"webgl",kernelFunc:$A};class BA{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=n?`${r}.0`:"1.0";let o;if("real"===e)o="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);o="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${o}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function VA(e,t,n){const r=n.texData.get(e.dataId),i=Ko.util.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],o=tI({inputs:{x:e},backend:n,attrs:{shape:[i/a,a]}}),s=o.shape,c=new BA("real",s,t),u=new BA("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(c,l,"float32"),p=n.runWebGLProgram(u,l,"float32"),h=ME({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const f=tI({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),f}const UA={kernelName:Ko.FFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return VA(r,!1,n)}};class GA{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function qA(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||Ko.util.inferDtype(i),"string"===a){const e=Ko.util.getArrayFromDType(a,Ko.util.sizeFromShape(r));return e.fill(i),t.makeTensorInfo(r,a,e)}{const e=new GA(r,i),n=[[i]];return t.runWebGLProgram(e,[],a,n)}}const WA={kernelName:Ko.Fill,backendName:"webgl",kernelFunc:qA};class HA{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const YA={kernelName:Ko.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new HA(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}},KA="return floor(x);",XA=qE({opSnippet:KA,packedOpSnippet:KA,cpuKernelImpl:TC}),QA={kernelName:Ko.Floor,backendName:"webgl",kernelFunc:XA},JA=WE({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),ZA={kernelName:Ko.FloorDiv,backendName:"webgl",kernelFunc:JA};class eO{constructor(e){this.variableNames=["A"];const t=CT(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class tO{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=CT(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const nO={kernelName:Ko.FromPixels,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:a}=r,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,[c,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=[u,c],d=[u,c,a];if(s||o){const e=(0,Ko.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=rO&&e===iO||(iO=e,rO=document.createElement("canvas").getContext("2d",{willReadFrequently:iO})),rO.canvas.width=c,rO.canvas.height=u,rO.drawImage(i,0,0,c,u),i=rO.canvas}const p=n.makeTensorInfo(l,"int32");n.texData.get(p.dataId).usage=YS.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const h=(0,Ko.env)().getBool("WEBGL_PACK")?new tO(d):new eO(d),f=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),f}};let rO,iO=(0,Ko.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const aO={kernelName:Ko.FusedConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=Ko.backend_util.convertConv2DDataFormat(l),g=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,c,d,u,p,!1,m);let _;const v=[],y=null!=o,b=null!=s,w="leakyrelu"===h,k=()=>{const e=[i,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=tI({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(y&&e.push(t(o,l)),b&&e.push(t(s,l)),w){const t=n.makeTensorInfo([],"float32",Ko.util.createScalarValue(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&(0,Ko.env)().getBool("WEBGL_EXP_CONV")){const e=h?HE(h,!0):null,t=new FN(g,y,e,b,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],i=k();_=n.runWebGLProgram(t,i,"float32",r)}else if((0,Ko.env)().getBool("WEBGL_CONV_IM2COL"))_=BN({x:i,filter:a,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:s,leakyreluAlpha:f});else{const e=h?HE(h,!1):null,t=new LN(g,y,e,b,w),r=k();_=n.runWebGLProgram(t,r,"float32")}else _=jN({x:i,filter:a,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:s,leakyreluAlpha:f});const x=tI({inputs:{x:_},backend:n,attrs:{shape:g.outShape}});return v.push(_),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),x}};const oO={kernelName:Ko.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[];let m=l;null==m&&(m=[1,1]),Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(c,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${m}'`));const g=Ko.backend_util.computeConv2DInfo(i.shape,a.shape,c,m,u,d,!0),_=(0,Ko.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,v=p?HE(p,_):null,y=[i,a],b=null!=o,w=null!=s,k="leakyrelu"===p;if(b&&y.push(o),w&&y.push(s),k){const e=n.makeTensorInfo([],"float32",Ko.util.createScalarValue(h,"float32"));y.push(e),f.push(e)}let x;x=_?new gA(g,b,v,w,k):new mA(g,b,v,w,k);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(x,y,"float32",S);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),T}};class sO{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=UT(n.length);let a="\n    int index;";for(let e=0;e<this.sliceDim;e++)a+=`\n          index = round(getIndices(coords[0], ${e}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};\n          flattenIndex += index * ${this.strides[e]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${a}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const cO={kernelName:Ko.GatherNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=i.shape,o=a[a.length-1],s=Ko.util.sizeFromShape(r.shape),[c,u,l,d]=Ko.backend_util.prepareAndValidate(r,i),p=tI({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),h=tI({inputs:{x:r},backend:n,attrs:{shape:[Ko.util.sizeFromShape(r.shape)/l,l]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),a=CC(e,t,r.dtype,u,o,l,d,r.shape,s);return n.makeTensorInfo(c,r.dtype,a.values)}const f=new sO(o,d,[u,l],r.shape),m=n.runWebGLProgram(f,[h,p],h.dtype),g=tI({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};class uO{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=UT(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function lO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:o,batchDims:s}=r,c=Ko.util.parseAxisParam(o,i.shape)[0];if((0,Ko.env)().get("DEBUG")){const e=n.readSync(a.dataId),t=i.shape[c];for(let n=0;n<e.length;++n){const r=e[n];Ko.util.assert(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=Ko.backend_util.segment_util.collectGatherOpShapeInfo(i,a,c,s),l=Ko.util.sizeFromShape(a.shape),d=[],p=tI({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=tI({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,l/u.batchSize]}});d.push(p),d.push(h);const f=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,a])||"string"===i.dtype){const e=n.bufferSync(h),t=n.bufferSync(p),r=EC(t,e,f);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new uO(p.shape,f),g=n.runWebGLProgram(m,[p,h],p.dtype);d.push(g);const _=tI({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),_}const dO={kernelName:Ko.GatherV2,backendName:"webgl",kernelFunc:lO},pO=WE({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:IC,dtype:"bool"}),hO={kernelName:Ko.Greater,backendName:"webgl",kernelFunc:pO},fO=WE({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:NC}),mO={kernelName:Ko.GreaterEqual,backendName:"webgl",kernelFunc:fO};const gO={kernelName:Ko.IFFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return VA(r,!0,n)}},_O=qE({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),vO={kernelName:Ko.IsFinite,backendName:"webgl",kernelFunc:_O},yO=qE({opSnippet:"return float(isinf(x));",dtype:"bool"}),bO={kernelName:Ko.IsInf,backendName:"webgl",kernelFunc:yO},wO=qE({opSnippet:"return float(isnan(x));",dtype:"bool"}),kO={kernelName:Ko.IsNan,backendName:"webgl",kernelFunc:wO},xO=WE({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:AC,dtype:"bool"}),SO={kernelName:Ko.Less,backendName:"webgl",kernelFunc:xO},TO=WE({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:OC,dtype:"bool"}),CO={kernelName:Ko.LessEqual,backendName:"webgl",kernelFunc:TO};const EO={kernelName:Ko.LinSpace,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,o=RC(r,i,a);return t.makeTensorInfo([o.length],"float32",o)}},IO=qE({opSnippet:GE+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:PC}),NO={kernelName:Ko.Log,backendName:"webgl",kernelFunc:IO},AO=qE({opSnippet:GE+"\n  return log(1.0 + x);\n"}),OO={kernelName:Ko.Log1p,backendName:"webgl",kernelFunc:AO},RO=WE({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),PO={kernelName:Ko.LogicalAnd,backendName:"webgl",kernelFunc:RO},DO=qE({opSnippet:"return float(!(x >= 1.0));"}),LO={kernelName:Ko.LogicalNot,backendName:"webgl",kernelFunc:DO},MO=WE({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),FO={kernelName:Ko.LogicalOr,backendName:"webgl",kernelFunc:MO};class zO{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const a=t,o=e[3]-1;let s;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${c})`:1===i?`1.0/(${c})`:`exp(log(${c}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}class $O{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,o=e[3]-1;let s;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${c})`:1===i?`1.0/(${c})`:`exp(log(${c}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}const jO={kernelName:Ko.LRN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:o,alpha:s,beta:c}=r,u=(0,Ko.env)().getBool("WEBGL_PACK_NORMALIZATION")?new $O(i.shape,a,o,s,c):new zO(i.shape,a,o,s,c);return n.runWebGLProgram(u,[i],i.dtype)}};class BO{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const VO={kernelName:Ko.LRNGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:o}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=r,d=new BO(i.shape,s,c,u,l);return n.runWebGLProgram(d,[i,a,o],i.dtype)}};function UO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,c=Ko.util.parseAxisParam(a,i.shape);let u=c;const l=Ko.backend_util.getAxesPermutation(u,s),d=null!=l,p=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(p){const e=n.texData.get(h.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=i.shape[l[e]];const r=cE(e,i.shape,i.dtype,l,t);h=n.makeTensorInfo(t,i.dtype);n.texData.get(h.dataId).values=r}else h=cI(i,l,n);u=Ko.backend_util.getInnerMostAxes(u.length,s)}Ko.backend_util.assertAxesAreInnerMostDims("max",u,s);const[f,m]=Ko.backend_util.computeOutAndReduceShapes(h.shape,u);let g,_=f;if(o&&(_=Ko.backend_util.expandShapeToKeepDim(f,c)),p){const e=n.texData.get(h.dataId).values,t=DC(e,Ko.util.sizeFromShape(m),_,i.dtype);g=n.makeTensorInfo(_,i.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const i=Ko.util.sizeFromShape(t),a=tI({inputs:{x:e},attrs:{shape:[Ko.util.sizeFromShape(e.shape)/i,i]},backend:r}),o=aI(a,e.dtype,"max",r),s=tI({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}(h,m,_,n);return d&&n.disposeIntermediateTensorInfo(h),g}const GO={kernelName:Ko.Max,backendName:"webgl",kernelFunc:UO},qO=WE({opSnippet:AE+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+RE+"\n  return result;\n",cpuKernelImpl:LC}),WO={kernelName:Ko.Maximum,backendName:"webgl",kernelFunc:qO};const HO={kernelName:Ko.MaxPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ST(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:c}=r;Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(o,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=Ko.backend_util.computePool2DInfo(i.shape,a,o,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Ko.util.arraysEqual(u.inShape,u.outShape))return DE({inputs:{x:i},backend:n});const l=new WI(u,"max",!1);return n.runWebGLProgram(l,[i],i.dtype)}};const YO={kernelName:Ko.MaxPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dataFormat:c,dimRoundingMode:u}=r,l=Ko.backend_util.computePool3DInfo(i.shape,a,o,[1,1,1],s,u,c),d=new HI(l,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}};class KO{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,s=a-1-e.padInfo.left,c=i*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class XO{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,h=s*c*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${d}, ${p});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${o}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const QO={kernelName:Ko.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,o=a,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=r,d=Ko.backend_util.computePool3DInfo(o.shape,s,c,[1,1,1],u,l),p=new HI(d,"max",!0),h=n.runWebGLProgram(p,[o],o.dtype),f=new XO(d),m=n.runWebGLProgram(f,[i,h],o.dtype);return n.disposeIntermediateTensorInfo(h),m}};const JO={kernelName:Ko.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:o}=t,s=a;ST([a,o],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=Ko.backend_util.computePool2DInfo(s.shape,c,u,1,l,d),h=new WI(p,"max",!0),f=n.runWebGLProgram(h,[s],s.dtype),m=new KO(p),g=n.runWebGLProgram(m,[i,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const ZO={kernelName:Ko.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=t,c=n;Ko.util.assert(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const u=[1,1];Ko.util.assert(Ko.backend_util.eitherStridesOrDilationsAreOne(a,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const l=Ko.backend_util.computePool2DInfo(r.shape,i,a,u,o),[d,p]=function(e,t,n,r){let i=new WI(n,"max",!1);const a=r.runWebGLProgram(i,[e],"float32");return i=new WI(n,"max",!0,!0,t),[a,r.runWebGLProgram(i,[e],"float32")]}(r,s,l,c);return[d,p]}};const eR={kernelName:Ko.Mean,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:i,axis:a}=t,o=n,s=r.shape.length,c=Ko.util.parseAxisParam(a,r.shape);let u=c;const l=Ko.backend_util.getAxesPermutation(u,s),d=null!=l,p=o.shouldExecuteOnCPU([r]),h=[];let f=r;if(d){if(p){const e=o.texData.get(f.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=r.shape[l[e]];const n=cE(e,r.shape,r.dtype,l,t);f=o.makeTensorInfo(t,r.dtype);o.texData.get(f.dataId).values=n}else f=cI(r,l,o);h.push(f),u=Ko.backend_util.getInnerMostAxes(u.length,s)}Ko.backend_util.assertAxesAreInnerMostDims("sum",u,s);const[m,g]=Ko.backend_util.computeOutAndReduceShapes(f.shape,u);let _=m;i&&(_=Ko.backend_util.expandShapeToKeepDim(m,c));const v=function(e,t,n,r){const i=Ko.util.sizeFromShape(t),a=tI({inputs:{x:e},attrs:{shape:[Ko.util.sizeFromShape(e.shape)/i,i]},backend:r}),o=aI(a,"float32","mean",r),s=tI({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}(f,g,_,o);for(const e of h)o.disposeIntermediateTensorInfo(e);return v}};const tR={kernelName:Ko.Min,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=i.shape.length,c=Ko.util.parseAxisParam(a,i.shape);let u=c;const l=Ko.backend_util.getAxesPermutation(u,s);let d=i;null!=l&&(d=dI({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Ko.backend_util.getInnerMostAxes(u.length,i.shape.length)),Ko.backend_util.assertAxesAreInnerMostDims("min",u,s);const[p,h]=Ko.backend_util.computeOutAndReduceShapes(d.shape,u),f=tI({inputs:{x:d},backend:n,attrs:{shape:[-1,Ko.util.sizeFromShape(h)]}}),m=aI(f,f.dtype,"min",n);let g;if(o){g=tI({inputs:{x:m},backend:n,attrs:{shape:Ko.backend_util.expandShapeToKeepDim(p,c)}})}else g=tI({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}},nR=WE({opSnippet:AE+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+RE+"\n  return result;\n",cpuKernelImpl:MC}),rR={kernelName:Ko.Minimum,backendName:"webgl",kernelFunc:nR};class iR{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=UT(r),a=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class aR{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=UT(r),a=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),s=dE("rc",r),c=dE("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d="reflect"===n?0:1;let p="";if(1===r){const e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;p=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n      `}else{const e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;p=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${c.join()}), ${l});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${c.join()}), ${l});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const oR={kernelName:Ko.MirrorPad,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:a}=n,o=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aR(r.shape,i,a):new iR(r.shape,i,a);return t.runWebGLProgram(o,[r],r.dtype)}},sR=WE({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+RE+"\n  return result;\n"}),cR={kernelName:Ko.Mod,backendName:"webgl",kernelFunc:sR};class uR{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const lR=WE({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),dR={kernelName:Ko.RealDiv,backendName:"webgl",kernelFunc:lR},pR="return a - b;",hR=WE({opSnippet:pR,packedOpSnippet:pR,supportsComplex:!0,cpuKernelImpl:aE}),fR={kernelName:Ko.Sub,backendName:"webgl",kernelFunc:hR};function mR(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,o=Ko.util.parseAxisParam([a],i.shape),s=UO({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),c=Ko.backend_util.expandShapeToKeepDim(s.shape,o),u=tI({inputs:{x:s},backend:n,attrs:{shape:c}}),l=hR({inputs:{a:i,b:u},backend:n}),d=DA({inputs:{x:l},backend:n}),p=uI({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),h=tI({inputs:{x:p},backend:n,attrs:{shape:c}}),f=lR({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),f}const gR={kernelName:Ko.Softmax,backendName:"webgl",kernelFunc:mR};const _R={kernelName:Ko.Multinomial,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:o,normalized:s}=r,c=s?i:mR({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new uR(u,l,a),p=[[o]],h=n.runWebGLProgram(d,[c],"int32",p);return s||n.disposeIntermediateTensorInfo(c),h}},vR=yE+"\n  return -x;\n";const yR={kernelName:Ko.Neg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=zC(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=(0,Ko.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new SE(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new vE(r.shape,vR),n.runWebGLProgram(i,[r],r.dtype)}},bR=Ko.kernel_impls.nonMaxSuppressionV3Impl;const wR={kernelName:Ko.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){Ko.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c}=r,u=n.readSync(i.dataId),l=n.readSync(a.dataId),{selectedIndices:d}=bR(u,l,o,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},kR=Ko.kernel_impls.nonMaxSuppressionV4Impl;const xR={kernelName:Ko.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){Ko.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:u}=r,l=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:h}=kR(l,d,o,s,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},SR=Ko.kernel_impls.nonMaxSuppressionV5Impl;const TR={kernelName:Ko.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){Ko.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=r,l=n.readSync(i.dataId),d=n.readSync(a.dataId),p=o,h=s,f=c,m=u,{selectedIndices:g,selectedScores:_}=SR(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([_.length],"float32",new Float32Array(_))]}};class CR{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const ER={kernelName:Ko.OneHot,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:o,onValue:s,offValue:c}=r,u=Ko.util.sizeFromShape(i.shape),l=new CR(u,o,s,c),d=tI({inputs:{x:i},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(l,[d],a);n.disposeIntermediateTensorInfo(d);const h=tI({inputs:{x:p},backend:n,attrs:{shape:[...i.shape,o]}});return n.disposeIntermediateTensorInfo(p),h}};function IR(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=mN({inputs:{input:r},backend:n}),t=IR({inputs:{x:e},backend:n}),i=AN({inputs:{input:r},backend:n}),a=IR({inputs:{x:i},backend:n}),o=ME({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),o}return qA({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const NR={kernelName:Ko.ZerosLike,backendName:"webgl",kernelFunc:IR};const AR={kernelName:Ko.OnesLike,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const t=mN({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),a=AN({inputs:{input:i},backend:r}),o=IR({inputs:{x:a},backend:r}),s=ME({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}return qA({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const OR={kernelName:Ko.Pack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return MA({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const a=t[0].shape,o=t[0].dtype;t.forEach((e=>{Ko.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Ko.util.assert(o===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=t.map((e=>{const t=MA({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),u=PN({inputs:c,backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};class RR{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=UT(r),a=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class PR{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=UT(r),a=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),s=dE("rc",r),c=dE("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\n        ${d[e]}\n        if (${p}) {\n          result[${e}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${e}] = getChannel(getX(${c.join()}), ${l});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const DR=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:o}=r;if(0===Ko.util.sizeFromShape(i.shape)){const e=a.map(((e,t)=>e[0]+i.shape[t]+e[1]));return qA({backend:n,attrs:{shape:e,value:o,dtype:i.dtype}})}const s=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PR(i.shape,a,o):new RR(i.shape,a,o),c=[[o]];return n.runWebGLProgram(s,[i],i.dtype,c)},LR={kernelName:Ko.PadV2,backendName:"webgl",kernelFunc:DR},MR=WE({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+RE+"\n  return result;\n"}),FR={kernelName:Ko.Pow,backendName:"webgl",kernelFunc:MR};const zR={kernelName:Ko.Prod,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=i.shape.length,c=[],u=Ko.util.parseAxisParam(a,i.shape);let l=u;const d=Ko.backend_util.getAxesPermutation(l,s);let p,h=i;if(null!=d&&(h=dI({inputs:{x:i},backend:n,attrs:{perm:d}}),l=Ko.backend_util.getInnerMostAxes(l.length,s),c.push(h)),Ko.backend_util.assertAxesAreInnerMostDims("prod",l,s),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:r,outDtype:i}=jC(h.shape,h.dtype,e,l);p=n.makeTensorInfo(r,i,t)}else{const[e,t]=Ko.backend_util.computeOutAndReduceShapes(h.shape,l),r=Ko.util.sizeFromShape(t),a=tI({inputs:{x:h},backend:n,attrs:{shape:[-1,r]}}),o=aI(a,(0,Ko.sumOutType)(i.dtype),"prod",n);p=tI({inputs:{x:o},backend:n,attrs:{shape:e}}),c.push(a),c.push(o)}if(o){c.push(p);const e=Ko.backend_util.expandShapeToKeepDim(p.shape,u);p=tI({inputs:{x:p},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const $R={kernelName:Ko.RaggedGather,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=t,{outputRaggedRank:s}=r,c=i.map((e=>n.readSync(e.dataId))),u=i.map((e=>e.shape)),l=n.readSync(a.dataId),d=n.readSync(o.dataId),[p,h,f]=BC(c,u,l,a.shape,a.dtype,d,o.shape,s),m=p.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,a.dtype,h);return m.concat([g])}};const jR={kernelName:Ko.RaggedRange,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,o=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(a.dataId),[u,l]=VC(o,r.shape,r.dtype,s,i.shape,c,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([l.length],r.dtype,l)]}};const BR={kernelName:Ko.RaggedTensorToTensor,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:c}=r,u=n.readSync(i.dataId),l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=s.map((e=>n.readSync(e.dataId))),h=s.map((e=>e.shape)),[f,m]=UC(u,i.shape,l,a.shape,a.dtype,d,o.shape,p,h,c);return n.makeTensorInfo(f,a.dtype,m)}},VR=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:a,dtype:o}=n,s=GC(r,i,a,o);return t.makeTensorInfo([s.length],o,s)},UR={kernelName:Ko.Range,backendName:"webgl",kernelFunc:VR},GR=qE({opSnippet:"return 1.0 / x;"}),qR={kernelName:Ko.Reciprocal,backendName:"webgl",kernelFunc:GR},WR=qE({opSnippet:yE+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),HR={kernelName:Ko.Relu,backendName:"webgl",kernelFunc:WR},YR=qE({opSnippet:yE+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),KR={kernelName:Ko.Relu6,backendName:"webgl",kernelFunc:YR};class XR{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[a,o,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?o-1:o,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class QR{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?o-1:o,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const JR={kernelName:Ko.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r,[c,u]=s,l=(0,Ko.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new QR(i.shape,c,u,a,o):new XR(i.shape,c,u,a,o);return n.runWebGLProgram(l,[i],"float32")}};class ZR{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,a,o]=e,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],c=[n&&a>1?a-1:a,n&&o>1?o-1:o],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const eP={kernelName:Ko.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r,s=new ZR(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}};class tP{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[a,o,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?o-1:o,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class nP{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?o-1:o,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const rP={kernelName:Ko.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r,[c,u]=s,l=(0,Ko.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new nP(i.shape,c,u,a,o):new tP(i.shape,c,u,a,o);return n.runWebGLProgram(l,[i],i.dtype)}};class iP{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,a,o]=e,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],c=[n&&a>1?a-1:a,n&&o>1?o-1:o],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const aP={kernelName:Ko.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r,s=new iP(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}};class oP{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),i=UT(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class sP{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=dE("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=UT(n);function s(n){const r=e.map(((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(i,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(r.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const cP={kernelName:Ko.Reverse,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r,o=i.shape.length,s=Ko.util.parseAxisParam(a,i.shape);if(0===o)return DE({inputs:{x:i},backend:n});const c=(0,Ko.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sP(i.shape,s):new oP(i.shape,s);return n.runWebGLProgram(c,[i],i.dtype)}};class uP{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let i="";i="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const lP={kernelName:Ko.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:a,center:o}=t,s=n,c=new uP(r.shape,a),[u,l]=Ko.backend_util.getImageCenter(o,r.shape[1],r.shape[2]),d=[[u,l,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(c,[r],r.dtype,d)}},dP=qE({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),pP={kernelName:Ko.Round,backendName:"webgl",kernelFunc:dP},hP=qE({opSnippet:"return inversesqrt(x);",cpuKernelImpl:qC}),fP={kernelName:Ko.Rsqrt,backendName:"webgl",kernelFunc:hP};class mP{constructor(e,t,n,r,i,a,o=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=UT(i.length),u=UT(a.length);let l="";1===n?l="i":2===n&&(l="i, j");const d=`getIndices(${l})`;let p="";1===r?p="i":2===r&&(p="i, coords[1]");const h=`getUpdates(${p})`;let f="";s&&(f="coords[0], coords[1]");const m=`getDefaultValue(${f})`,g=t>1?"strides[j]":"strides";this.userCode=`\n        ${c} strides = ${c}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${d});\n              flattenedIndex += index * ${g};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${h};\n              found = true;\n            }\n          }\n          setOutput(mix(${m}, sum, float(found)));\n        }\n      `}}class gP{constructor(e,t,n,r,i,a,o=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=UT(i.length),u=UT(a.length);let l="";1===n?l="i":2===n&&(l="i, j");const d=`getIndices(${l})`;let p="";1===r?p="i":2===r&&(p="i, coords[1]");const h=`getUpdates(${p})`;let f="";s&&(f="coords[0], coords[1]");const m=`getDefaultValue(${f})`,g=t>1?"strides[j]":"strides",_=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${c} strides = ${c}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${d});\n              flattenedIndex += index.xz * ${g};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${_};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${h};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${m}, sum, found));\n        }\n      `}}const _P={kernelName:Ko.ScatterNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:o}=r,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=Ko.backend_util.calculateShapes(a,i,o),p=[d/u,u];if(0===d)return n.makeTensorInfo(o,i.dtype);const h=tI({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),f=tI({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=(0,Ko.env)().getBool("WEBGL_PACK")?new gP(c,s,h.shape.length,f.shape.length,l,p):new mP(c,s,h.shape.length,f.shape.length,l,p);const _=n.runWebGLProgram(g,[f,h,m],f.dtype),v=tI({inputs:{x:_},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(m),v}};class vP{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=2===(0,Ko.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":i,o="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${o} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const yP={kernelName:Ko.SearchSorted,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:o}=r,s=new vP(i.shape[0],i.shape[1],a.shape[1],o),c=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",c)}};class bP{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=[];for(let r=0;r<t.length;r++)o.push(`${n[r]}`),r<e&&a.push(`${n[r]}`);r=a.join(),i=o.join()}const a=UT(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}const wP={kernelName:Ko.Select,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t,o=new bP(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],(0,Ko.upcastType)(i.dtype,a.dtype))}},kP=qE({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Ko.backend_util.SELU_SCALEALPHA};\n  float scale = ${Ko.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),xP={kernelName:Ko.Selu,backendName:"webgl",kernelFunc:kP},SP=qE({opSnippet:GE+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:HC}),TP={kernelName:Ko.Sigmoid,backendName:"webgl",kernelFunc:SP},CP=qE({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),EP={kernelName:Ko.Sign,backendName:"webgl",kernelFunc:CP},IP=qE({opSnippet:GE+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${RE}\n  return result;\n`}),NP={kernelName:Ko.Sin,backendName:"webgl",kernelFunc:IP},AP=qE({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),OP={kernelName:Ko.Sinh,backendName:"webgl",kernelFunc:AP},RP=qE({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),PP={kernelName:Ko.Softplus,backendName:"webgl",kernelFunc:RP},DP={kernelName:Ko.SpaceToBatchND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:o}=r;Ko.util.assert(i.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...o);for(let e=1+a.length;e<i.shape.length;++e)c.push([0,0]);const u=[],l=DR({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),d=Ko.backend_util.getReshaped(l.shape,a,s,!1),p=Ko.backend_util.getPermuted(d.length,a.length,!1),h=Ko.backend_util.getReshapedPermuted(l.shape,a,s,!1),f=tI({inputs:{x:l},backend:n,attrs:{shape:d}}),m=dI({inputs:{x:f},backend:n,attrs:{perm:p}}),g=tI({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(l),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const LP={kernelName:Ko.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:o}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const s=n.readSync(r.dataId),c=n.readSync(i.dataId),u=n.readSync(a.dataId),l=n.readSync(o.dataId)[0],[d,p,h,f,m]=XC(s,r.shape,r.dtype,c,i.dtype,u,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const MP={kernelName:Ko.SparseReshape,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(a.dataId)),[u,l,d]=QC(s,r.shape,r.dtype,o,c);return[n.makeTensorInfo(l,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};const FP={kernelName:Ko.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(a.dataId),[u,l]=JC(o,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(l,r.dtype,u)}};const zP={kernelName:Ko.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(a.dataId),[u,l]=JC(o,r.shape,r.dtype,s,c);return n.makeTensorInfo(l,r.dtype,u)}};const $P={kernelName:Ko.SparseToDense,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=Ko.backend_util.calculateShapes(a,i,s),h=!1;if("string"===a.dtype){const e=n.bufferSync(i),t=n.bufferSync(a),r=Ko.util.decodeString(n.readSync(o.dataId)[0]),f=WC(e,t,s,p,l,u,c,d,r,h);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new mP(u,c,i.shape.length,a.shape.length,d,[p,1],h),m=n.runWebGLProgram(f,[a,i,o],a.dtype),g=tI({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const jP={kernelName:Ko.SplitV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:o}=r,s=Ko.util.parseAxisParam(o,i.shape)[0],c=Ko.backend_util.prepareSplitSize(i,a,s),u=i.shape.length,l=new Array(u).fill(0),d=i.shape.slice();return c.map((e=>{const t=[...d];t[s]=e;const r=sN({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},BP="return sqrt(x);",VP=qE({opSnippet:BP,packedOpSnippet:BP,cpuKernelImpl:ZC}),UP={kernelName:Ko.Sqrt,backendName:"webgl",kernelFunc:VP},GP=qE({opSnippet:"return x * x;"}),qP={kernelName:Ko.Square,backendName:"webgl",kernelFunc:GP},WP="return (a - b) * (a - b);",HP=WE({opSnippet:WP,packedOpSnippet:WP}),YP={kernelName:Ko.SquaredDifference,backendName:"webgl",kernelFunc:HP};const KP={kernelName:Ko.StaticRegexReplace,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),o=Ko.backend_util.fromUint8ToStringArray(a),s=eE(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}};const XP={kernelName:Ko.Step,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=yE+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,a=new vE(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}};class QP{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=UT(n.length),a=UT(n.length);let o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}const JP={kernelName:Ko.StridedSlice,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:o,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:_,begin:v,end:y,strides:b}=Ko.slice_util.sliceInfo(i.shape,a,o,s,c,u,l,d,p);let w;if(m)w=tI({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||_){Ko.util.assert(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=Ko.slice_util.computeOutShape(v,y,b),t=sN({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=tI({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([i])){const e=n.readSync(i.dataId),t=(0,Ko.buffer)(i.shape,i.dtype,e),r=tE(h,t,b,v);w=n.makeTensorInfo(f,i.dtype,r.values)}else{const e=new QP(v,b,h);w=n.runWebGLProgram(e,[i],i.dtype)}}const k=tI({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const ZP={kernelName:Ko.StringNGrams,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:c,preserveShortSequences:u}=r,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=nE(p,h,i,a,o,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const eD={kernelName:Ko.StringSplit,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:o}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(a.dataId),c=n.readSync(o.dataId)[0],[u,l,d]=rE(s,c,i),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const tD={kernelName:Ko.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(a.dataId),s=iE(o,i);return n.makeTensorInfo(a.shape,"int32",s)}},nD=qE({opSnippet:"return tan(x);"}),rD={kernelName:Ko.Tan,backendName:"webgl",kernelFunc:nD},iD=qE({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),aD={kernelName:Ko.Tanh,backendName:"webgl",kernelFunc:iD};const oD={kernelName:Ko.TensorScatterUpdate,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:a,updates:o}=t,{}=r,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=Ko.backend_util.calculateShapes(o,a,i.shape),p=[d/u,u];if(0===d)return n.makeTensorInfo(i.shape,a.dtype);const h=tI({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),f=tI({inputs:{x:o},backend:n,attrs:{shape:[c,u]}}),m=tI({inputs:{x:i},backend:n,attrs:{shape:p}}),g=new mP(c,s,h.shape.length,f.shape.length,l,p,!1,!0),_=n.runWebGLProgram(g,[f,h,m],m.dtype),v=tI({inputs:{x:_},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(_),v}};class sD{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=UT(this.rank),i=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function cD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map((e=>Ko.util.decodeString(e))):e,r=(0,Ko.buffer)(i.shape,i.dtype,t),o=oE(r,a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const o=new sD(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const uD={kernelName:Ko.Tile,backendName:"webgl",kernelFunc:cD};class lD{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class dD{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function pD(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function hD(e){let t=1;for(;t<e;)t*=2;return t}const fD={kernelName:Ko.TopK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:o}=r,s=(0,Ko.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=(0,Ko.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,l=u[u.length-1];if(n.shouldExecuteOnCPU([i])||l<s||a>c){const e=n.readSync(i.dataId),[t,r]=sE(e,u,i.dtype,a,o);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===l)return[i,qA({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=null!==d&&d.isPacked,h=p?n.unpackTensor(i):i,f=Ko.util.sizeFromShape(u)/l,m=tI({inputs:{x:h},attrs:{shape:[f,l]},backend:n});p&&pD(n,h);const g=hD(a),_=hD(l);let v=null;const y=()=>null===v?[m,m]:[m,v],b=(e,t,r)=>{const i=y(),a=new lD(r),o=[[l],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(a,i,"int32",o),pD(n,s)};for(let e=1;e<g;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)b(t,n,[f,_])}for(let e=_;e>g;e/=2){const t=y(),r=new dD([f,e/2]),i=[[l],[null===v?1:0],[g]],a=v;v=n.runWebGLProgram(r,t,"int32",i),pD(n,a);const o=g/2,s=2*o;for(let e=o;e>=1;e/=2)b(s,e,v.shape)}let w=v;v=sN({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,a]}}),pD(n,w);let k=lO({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});pD(n,m);const x=u.slice(0,-1);x.push(a),w=v,v=tI({inputs:{x:v},attrs:{shape:x},backend:n}),pD(n,w);const S=k;return k=tI({inputs:{x:k},attrs:{shape:x},backend:n}),pD(n,S),[k,v]}};class mD{constructor(e,t,n,r,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${o} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const gD={kernelName:Ko.Transform,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:a}=t,{interpolation:o,fillMode:s,fillValue:c,outputShape:u}=r,[l,d,p,h]=i.shape,[f,m]=null!=u?u:[d,p],g=new mD(d,p,o,s,c,[l,f,m,h]);return n.runWebGLProgram(g,[i,a],"float32")}};const _D={kernelName:Ko.Unique,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;ST(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:c,indices:u}=uE(o,i,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const vD={kernelName:Ko.Unpack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,c=i.shape[a],u=new Array(s-1);let l=0;for(let e=0;e<s;e++)e!==a&&(u[l++]=o.shape[e]);const d=[],p=new Array(s).fill(0),h=o.shape.slice();h[a]=1;const f=new Array(c);for(let e=0;e<f.length;e++){p[a]=e;const t=sN({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),r=tI({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=r,d.push(t)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class yD{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];const s=4*Math.floor(n/4),c=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let l="";i%n>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let d="";i%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${d}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const bD={kernelName:Ko.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:o}=r,s=i.shape.length,c=[];let u=0;const l=Ko.backend_util.getAxesPermutation([u],s);let d=i;null!=l&&(d=dI({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(d),u=Ko.backend_util.getInnerMostAxes(1,s)[0]);const p=Ko.backend_util.segment_util.computeOutShape(d.shape,u,o),h=Ko.util.sizeFromShape([d.shape[u]]),f=tI({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});c.push(f);const m=(0,Ko.sumOutType)(i.dtype),g=(e,t,r,i,a)=>{const o=e.shape[0],s=e.shape[1],u=Ko.backend_util.segment_util.segOpComputeOptimalWindowSize(s,a),l=new yD({windowSize:u,inSize:s,batchSize:o,numSegments:a},t),d=n.compileAndRun(l,[e,r],i);if(c.push(d),d.shape[1]===a)return d;const p=VR({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),h=cD({inputs:{x:p},backend:n,attrs:{reps:[s/u]}});c.push(p),c.push(h);return g(d,t,h,i,a)},_=tI({inputs:{x:g(f,"unsortedSegmentSum",a,m,o)},backend:n,attrs:{shape:p}});let v=_;if(null!=l){c.push(_);const e=Ko.backend_util.getUndoAxesPermutation(l);v=dI({inputs:{x:v},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},wD=[fI,gI,vI,bI,xI,CI,EI,II,DI,LI,FI,$I,BI,UI,qI,YI,KI,JI,ZI,eN,rN,uN,lN,dN,pN,_N,bN,xN,FE,CN,DN,VN,HN,KN,XN,QN,JN,eA,nA,iA,lA,dA,pA,fA,_A,bA,wA,xA,TA,CA,IA,NA,OA,PA,LA,FA,jA,UA,WA,YA,QA,ZA,nO,aO,oO,cO,dO,hO,mO,LE,gO,ON,vO,bO,kO,jE,SO,CO,EO,NO,OO,PO,LO,FO,jO,VO,GO,WO,HO,YO,QO,JO,ZO,eR,tR,rR,oR,cR,_R,eI,yR,wR,xR,TR,fN,ER,AR,OR,LR,FR,UE,zR,$R,jR,BR,UR,gN,dR,qR,HR,KR,nI,JR,eP,rP,aP,cP,lP,pP,fP,_P,yP,wP,xP,TP,EP,NP,OP,cN,gR,PP,DP,LP,MP,FP,zP,$P,jP,UP,qP,YP,KP,XP,JP,ZP,eD,tD,fR,lI,rD,aD,oD,uD,fD,gD,pI,_D,vD,bD,NR];for(const e of wD)(0,Ko.registerKernel)(e);Ko.version_core,O_.version_converter;function kD(e){return kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kD(e)}function xD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xD(Object(n),!0).forEach((function(t){TD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=kD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kD(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||ID(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ED(e){return function(e){if(Array.isArray(e))return ND(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ID(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ID(e,t){if(e){if("string"==typeof e)return ND(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ND(e,t):void 0}}function ND(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function AD(){AD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==kD(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(kD(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function OD(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RD(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){OD(a,r,i,o,s,"next",e)}function s(e){OD(a,r,i,o,s,"throw",e)}o(void 0)}))}}var PD=null,DD=[],LD=null,MD=null,FD=function(){var e=RD(AD().mark((function e(){var t,n,r,i,a,o,s,c,u,l,d,p,h,f,m,g,_,v,y,b,w,k,x,S,T,C,E,I;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,s=[],c=[],u=[],l=Tr(),d=br("session"),p=br("candidateAssessment"),window.addEventListener("beforeunload",Wr),window.addEventListener("popstate",Hr),h=function(){var e=RD(AD().mark((function e(){var t;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{if(Sr(["force_closure"],(null==l?void 0:l.entities)||[]).length){try{t=br("session"),Ir(t,p),fr({eventType:"success",notify:!1,eventName:"signaling_connection_disconnected",eventValue:Nr()})}catch(e){f()}f()}else window.roomInstance=null,window.recordingStart=!1,window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"internet_connection_lost_session_cant_resume",code:40006})}catch(e){Zr.error("Error in resetSession:",e)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"internet_connection_lost_force_close_your_session",code:40007}),localStorage.clear()},m=function(){if(!window.socket)return Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"mobile_connection_disconnected",code:40008}),void Zr.error("Socket not initialized");window.socket.onmessage=function(e){var t,n,r,i=JSON.parse(null==e?void 0:e.data);switch((null==i||null===(t=i.message)||void 0===t?void 0:t.event)||(null==i?void 0:i.event)){case"MobileRecordingStarted":Cn({room_name:null==d?void 0:d.mobileRoomSessionId,auto_record:!1}).then(function(){var e=RD(AD().mark((function e(t){var n,r;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya.connect(null==t||null===(n=t.data)||void 0===n?void 0:n.token,{audio:!1,video:!1});case 2:r=e.sent,(MD=r)&&UD(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"error_on_start_mobile_recording",code:40009}),window.recordingStart=!1,Zr.error("error",e)}));break;case"violation":"Violation"===(null==i||null===(n=i.message)||void 0===n?void 0:n.message)&&(Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),ti("error","mobile_phone_disconnected"),window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"mobile_phone_disconnected",code:40010})),fr({eventType:"error",notify:!1,eventName:null==i||null===(r=i.message)||void 0===r?void 0:r.message,eventValue:Nr()});break;default:Zr.success("Unknown event:",null==i?void 0:i.message)}},window.socket.onerror=function(e){Zr.error("WebSocket error:",e)}},Sr(["mobile_proctoring"],null==l?void 0:l.entities).length&&m(),null!==(t=window)&&void 0!==t&&t.newStream&&0!==(null===(n=window)||void 0===n||null===(n=n.newStream)||void 0===n||null===(n=n.getTracks())||void 0===n?void 0:n.length)||!((null===(r=Sr(["record_screen"],null==l?void 0:l.entities))||void 0===r?void 0:r.length)>0)){e.next=18;break}return window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"please_share_your_screen",code:40011}),window.recordingStart=!1,window.precheckCompleted=!1,e.abrupt("return");case 18:if(null==l||null===(i=l.entities)||void 0===i||null===(i=i.filter((function(e){return dn.LockDownOptions.includes(e.key)})))||void 0===i||!i.length){e.next=22;break}return e.next=21,Or((null==l?void 0:l.entities)||[]);case 21:fr({eventType:"success",notify:!1,eventName:"browser_locked_successfully",eventValue:Nr()});case 22:if(!((null==l||null===(a=l.entities.filter((function(e){return dn.recordingEvents.includes(e.key)})))||void 0===a?void 0:a.length)>0)){e.next=83;break}return g={preferredVideoCodecs:"auto",bandwidthProfile:{video:{contentPreferencesMode:"auto",clientTrackSwitchOffControl:"auto"}},networkQuality:{local:3,remote:3},audio:!!Sr(["record_audio"],null==l?void 0:l.entities).length&&(null===localStorage.getItem("microphoneID")||{deviceId:{exact:localStorage.getItem("microphoneID")}}),video:!!Sr(["record_video"],null==l?void 0:l.entities).length&&(null===localStorage.getItem("deviceId")||{deviceId:{exact:localStorage.getItem("deviceId")}})},e.prev=24,v=new Date,y=ua(),b=null!=d&&d.sessionId?null==d?void 0:d.sessionId:ua(),Er("session",{roomSessionId:y,sessionId:b,sessionStatus:"Attending"}),e.next=31,ya.connect(null==d?void 0:d.twilioToken,g);case 31:if(w=e.sent,window.roomInstance=w,Er("session",{room_id:null==w?void 0:w.sid}),null==l||null===(_=l.entities)||void 0===_||!_.find((function(e){return"record_video"===e.key}))){e.next=47;break}return e.next=37,navigator.mediaDevices.getUserMedia({video:!localStorage.getItem("deviceId")||{deviceId:{exact:localStorage.getItem("deviceId")}},audio:!localStorage.getItem("microphoneID")||{deviceId:{exact:localStorage.getItem("microphoneID")}}});case 37:if(LD=e.sent,null==l||null===(k=l.entities)||void 0===k||null===(k=k.filter((function(e){return dn.aiEventsFeatures.includes(e.key)})))||void 0===k||!k.length){e.next=43;break}return e.next=41,BD(LD);case 41:e.next=45;break;case 43:return e.next=45,$D(LD);case 45:s=[].concat(ED(d.user_video_name),ED(Array.from(null==w||null===(x=w.localParticipant)||void 0===x?void 0:x.videoTracks,(function(e){var t=CD(e,2);return{name:t[0],value:t[1]}})).map((function(e){return e.name})))),Er("session",{user_video_name:s||[]});case 47:if(Sr(["record_audio"],null==l?void 0:l.entities).length&&(c=[].concat(ED(d.user_audio_name),ED(Array.from(null==w||null===(S=w.localParticipant)||void 0===S?void 0:S.audioTracks,(function(e){var t=CD(e,2);return{name:t[0],value:t[1]}})).map((function(e){return e.name})))),Er("session",{user_audio_name:c,room_id:null==w?void 0:w.sid})),null==d||!d.screenRecordingStream||!Sr(["record_screen"],null==l?void 0:l.entities).length){e.next=62;break}if(null===(T=window)||void 0===T||null===(T=T.newStream)||void 0===T||!T.getTracks()[0]){e.next=58;break}return o=new ya.LocalVideoTrack(null===(C=window)||void 0===C||null===(C=C.newStream)||void 0===C?void 0:C.getTracks()[0]),e.next=53,w.localParticipant.publishTrack(o);case 53:E=e.sent,u=[].concat(ED(d.screen_sharing_video_name),[E.trackSid]),Er("session",{screen_sharing_video_name:u}),e.next=62;break;case 58:return window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"please_share_your_screen",code:40011}),window.precheckCompleted=!1,window.recordingStart=!1,e.abrupt("return");case 62:return window.socket&&window.socket.readyState===WebSocket.OPEN&&window.socket.send(JSON.stringify({event:"startRecording",data:"Web video recording started"})),w.localParticipant.on("networkQualityLevelChanged",(function(e){e<=2&&(window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"session_is_terminated_due_to_slow_internet_connection",code:40013}),ti("error","your_internet_is_very_slow_please_make_sure_you_have_stable_network_quality"))})),w.localParticipant.videoTracks.forEach((function(e){var t=e.track;t&&t.on("stopped",(function(){window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"camera_is_stopped",code:40019}),fr({eventType:"error",notify:!1,eventName:"camera_permission_disabled",eventValue:v})}))})),w.on("reconnecting",(function(){VD(),Sr(["mobile_proctoring"],null==l?void 0:l.entities).length?(Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),ti("error","mobile_phone_disconnected")):(Er("preChecksSteps",{screenSharing:!1}),ti("error","internet_connection_not_working")),window.startRecordingCallBack&&(window.startRecordingCallBack({type:"error",message:"web_internet_connection_disconnected",code:40014}),window.recordingStart=!1),setTimeout(RD(AD().mark((function e(){return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h();case 1:case"end":return e.stop()}}),e)}))),3e3)})),fr({eventType:"success",notify:!1,eventName:"recording_started_successfully",startAt:v}),window.startRecordingCallBack&&window.startRecordingCallBack({type:"success",message:"recording_started_successfully",code:5e4}),I=br("session"),e.next=72,Ir(I,p);case 72:e.sent&&fr({eventType:"success",notify:!1,eventName:"session_started",startAt:v}),e.next=81;break;case 76:e.prev=76,e.t0=e.catch(24),Zr.error("error in startRecording",e.t0),Er("session",{sessionStatus:"Terminated"}),window.recordingStart=!1;case 81:e.next=86;break;case 83:Er("session",{sessionStatus:"Attending"}),window.startRecordingCallBack&&window.startRecordingCallBack({type:"success",code:5e4,message:"recording_started_successfully"}),window.recordingStart=!0;case 86:case"end":return e.stop()}}),e,null,[[24,76]])})));return function(){return e.apply(this,arguments)}}(),zD=["cell phone","book"],$D=function(){var e=RD(AD().mark((function e(t){return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var r,i,a=Tr();U.isInitialized||ei();var o,s=document.getElementById("webcam-container");if(!s)(s=document.createElement("div")).id="webcam-container",s.className="user-videos-remote",null!==(o=Sr(["camera_view"],null==a?void 0:a.entities))&&void 0!==o&&o.length&&document.body.appendChild(s);var c=br("candidateAssessment"),u=document.createElement("div");u.className="user-video-header",u.id="user-video-header";var l=document.createElement("p");l.className="recording-heading",l.textContent="".concat(null==c||null===(r=c.candidate)||void 0===r?void 0:r.name);var d=document.createElement("div");d.className="recording-badge-container-header",d.innerHTML="\n\t\t\t\t<img\n\t\t\t\t\t\tclass='ivsf-recording-dot'\n\t\t\t\t\t\tsrc=\"".concat(dn.ASSET_URL,"/white-dot.svg\"\n\t\t\t\t\t\talt='white-dot'\n\t\t\t\t></img>\n\t\t\t\t<p class='recording-text'>").concat(U.t("recording"),"</p>\n\t\t\t"),u.appendChild(l),u.appendChild(d),document.createElement("div").classList.add("remote-video");var p=document.createElement("div");p.style.position="relative",p.style.marginLeft="auto",p.style.marginRight="auto",p.style.width="180px",p.style.height="142px",p.style.objectFit="cover";var h=document.createElement("video");h.autoplay=!0,h.muted=!0,h.srcObject=t,h.style.position="absolute",h.style.width="100%",h.style.objectFit="cover",h.style.height="100%";var f=document.createElement("canvas");f.id="canvas",f.style.position="absolute",f.style.left="0",f.style.width="100%",f.style.height="100%",s.appendChild(u),p.appendChild(h),null!=a&&null!==(i=a.entities)&&void 0!==i&&null!==(i=i.filter((function(e){return dn.aiEventsFeatures.includes(e.key)})))&&void 0!==i&&i.length&&p.appendChild(f),s.appendChild(p),h.addEventListener("loadedmetadata",(function(){f.width=h.videoWidth,f.height=h.videoHeight})),Wa()(s).draggable({listeners:{move:function(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.setAttribute("data-x",n),t.setAttribute("data-y",r)}}}),e({videoElement:h,canvas:f})}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jD=function(e,t){e.forEach((function(e){if(zD.includes(e.class)||"person"===e.class){var n=CD(e.bbox,4),r=n[0],i=n[1],a=n[2],o=n[3];t.beginPath(),t.rect(r,i,a,o),t.lineWidth=2,t.strokeStyle="red",t.fillStyle="red",t.stroke(),t.font="16px Arial",t.fillText("".concat(e.class),r,i>10?i-5:10)}}))},BD=function(){var e=RD(AD().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p,h;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Tr(),r=Sr(["multiple_people_detection"],null==n?void 0:n.entities).length>0,i=Sr(["person_missing"],null==n?void 0:n.entities).length>0,a=Sr(["object_detection"],null==n?void 0:n.entities).length>0,e.next=7,Ko.setBackend("webgl");case 7:return e.next=9,Ko.ready();case 9:return e.next=11,Yo.load();case 11:return o=e.sent,e.next=14,$D(t);case 14:return s=e.sent,c=s.videoElement,u=s.canvas,l=u.getContext("2d"),d=br("session"),p=null!=d&&d.quizStartTime?parseInt((ur({isUTC:!0})-(null==d?void 0:d.quizStartTime))/1e3):0,h={multiple_people:null,person_missing:null,object_detected:null},PD=setInterval(RD(AD().mark((function e(){var t,n,s,f,m,g;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p+=1,4===c.readyState){e.next=4;break}return e.abrupt("return");case 4:return t=Ko.browser.fromPixels(c),e.next=7,o.detect(t);case 7:n=e.sent,Ko.dispose(t),l.clearRect(0,0,u.width,u.height),(r||i||a)&&jD(n,l),s={},f={},m=!1,n.forEach((function(e){var t;"person"===e.class&&(i||r)?null!==(t=f)&&void 0!==t&&t.class&&r?m||(s=SD(SD({},s),{},{multiple_people:(s.multiple_people||0)+1}),m=!0):f=e:a&&zD.includes(e.class)&&(s=SD(SD({},s),{},TD({},"object_detected",(s[e.class]||0)+1)))})),i&&!f.class&&(s=SD(SD({},s),{},{person_missing:(s.person_missing||0)+1})),g=[],i&&g.push("person_missing"),a&&g.push("object_detected"),r&&g.push("multiple_people"),g.forEach((function(e){if(s[e]){if(h[e]?h[e].time_span+=1:(h[e]={start_time:p,time_span:1},DD.push(SD(SD({},h[e]),{},TD({},e,s[e])))),10===h[e].time_span){var t="";"person_missing"===e?t="no_person_detected_for_more_than_10_seconds":"object_detected"===e?t="unauthorized_object_detected_for_more_than_10_seconds":"multiple_people"===e&&(t="multiple_people_detected_for_more_than_10_seconds"),ti("error",t)}}else if(h[e]){var n=h[e],r={eventType:"success",notify:!0,eventName:e,startTime:n.start_time,endTime:n.start_time+n.time_span};Ar(r),Er("session",{aiEvents:[r].concat(ED(d.aiEvents))}),h[e]=null}})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),Zr.error("Error in AI processing:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),1e3),e.abrupt("return",{success:!0,message:"AI webcam started successfully"});case 25:return e.prev=25,e.t0=e.catch(0),Zr.error("Failed to start AI webcam:",e.t0),PD&&clearInterval(PD),e.abrupt("return",{success:!1,message:"Failed to start AI webcam",error:e.t0.message});case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),VD=function(){var e=document.getElementById("webcam-container"),t=document.getElementById("user-video-header"),n=document.getElementById("chat-icon");if(n&&n.remove(),t&&t.remove(),e){var r=e.querySelector("video");r&&(r.pause(),r.srcObject.getTracks().forEach((function(e){return e.stop()})),r.srcObject=null);var i=e.querySelector("canvas");i&&i.remove(),e.remove()}};function UD(e){var t,n=Tr(),r=br("session"),i=document.getElementById("webcam-container"),a=document.getElementById("user-video-header");i||((i=document.createElement("div")).id="webcam-container",i.className="user-videos-remote",null!==(t=Sr(["camera_view"],null==n?void 0:n.entities))&&void 0!==t&&t.length&&document.body.appendChild(i),Wa()(i).draggable({listeners:{move:function(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.setAttribute("data-x",n),t.setAttribute("data-y",r)}}}));if(!a){var o,s=br("candidateAssessment");(a=document.createElement("div")).className="user-video-header";var c=document.createElement("p");c.className="recording-heading",c.textContent="".concat(null==s||null===(o=s.candidate)||void 0===o?void 0:o.name);var u=document.createElement("div");u.className="recording-badge-container-header",u.innerHTML="\n\t\t\t<img\n\t\t\t\t\tclass='ivsf-recording-dot'\n\t\t\t\t\tsrc=\"".concat(dn.ASSET_URL,"/white-dot.svg\"\n\t\t\t\t\talt='white-dot'\n\t\t\t></img>\n\t\t\t<p class='recording-text'>").concat(U.t("recording"),"</p>\n\t\t"),a.appendChild(c),a.appendChild(u),i.appendChild(a)}var l=document.createElement("div"),d=document.createElement("div");function p(e,t){if(t&&e&&"video"===e.kind)try{var n=null==e?void 0:e.attach();n&&(n.classList.add("video-attached"),t.appendChild(n))}catch(e){Zr.error("Error attaching video track:",e)}else Zr.error("Track is not a video track or container is missing",{track:e,container:t})}function h(e){e&&e.detach&&e.detach().forEach((function(e){return e.remove()}))}function f(e){e.tracks.forEach((function(e){e.isSubscribed&&"video"===e.track.kind&&p(e.track,d)})),e.on("trackSubscribed",(function(e){"video"===e.kind&&(p(e,d),Er("session",{mobileRecordings:[].concat(ED(r.mobileRecordings||[]),[e.sid])})),"audio"===e.kind&&Er("session",{mobileAudios:[].concat(ED(r.mobileAudios||[]),[e.sid])})})),e.on("trackUnsubscribed",(function(e){h(e)}))}d.classList.add("remote-video"),i.appendChild(d),function(){try{e.localParticipant.videoTracks.forEach((function(e){e.track&&"video"===e.track.kind&&p(e.track,l)})),e.participants.forEach((function(e){f(e)})),e.on("participantReconnecting",(function(){Sr(["mobile_proctoring"],null==n?void 0:n.entities).length?(Er("preChecksSteps",{mobileConnection:!1,screenSharing:!1}),ti("error",U.t("mobile_phone_disconnected"))):(Er("preChecksSteps",{screenSharing:!1}),ti("error",U.t("internet_connection_not_working"))),setTimeout((function(){window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",code:40015,message:"mobile_internet_connection_disconnected"})}),4e3)})),e.on("participantConnected",(function(e){f(e)})),e.on("participantDisconnected",(function(e){e.tracks.forEach((function(e){e.track&&h(e.track)}))}))}catch(e){Zr.error("Error connecting to Twilio room:",e)}}()}var GD=function(){var e=RD(AD().mark((function e(){var t,n,r,i,a,o,s,c,u,l,d;return AD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Tr(),o=br("session"),window.socket&&window.socket.readyState===WebSocket.OPEN&&window.socket.send(JSON.stringify({event:"stopRecording",data:"Web video recording stopped"})),s=document.querySelectorAll('[id="chat-icon"]'),c=document.getElementById("talkjs-container"),s.length>0&&s.forEach((function(e){e.style.display="none",e.remove()})),c&&(c.style.display="none",c.remove()),Er("session",{recordingEnded:!0,sessionStatus:"Completed"}),_r(),VD(),LD&&(LD.getTracks().forEach((function(e){return e.stop()})),LD=null),null!==(t=window)&&void 0!==t&&t.newStream&&(null===(u=window)||void 0===u||u.newStream.getTracks().forEach((function(e){e.stop(),e.enabled=!1}))),window.recordingStart=!1,null!==(n=window)&&void 0!==n&&n.roomInstance&&(null===(l=window)||void 0===l||l.roomInstance.localParticipant.tracks.forEach((function(e){var t,n=e.track;n&&(n.stop(),n.detach().forEach((function(e){return e.remove()})),n.disable(),null===(t=window)||void 0===t||t.roomInstance.localParticipant.unpublishTrack(n))})),window.roomInstance.participants.forEach((function(e){e.removeAllListeners()})),window.roomInstance.removeAllListeners(),window.roomInstance.disconnect(),window.roomInstance=null),MD&&(MD.localParticipant.tracks.forEach((function(e){var t=e.track;t&&(t.stop(),t.detach().forEach((function(e){return e.remove()})),t.disable(),MD.localParticipant.unpublishTrack(t))})),MD.disconnect(),MD=null),PD&&(clearInterval(PD),PD=null),null!=a&&null!==(r=a.entities)&&void 0!==r&&null!==(r=r.filter((function(e){return dn.LockDownOptions.includes(e.key)})))&&void 0!==r&&r.length&&Kr(),d=new Date,e.next=21,Qa({status:"Completed",id:null==o?void 0:o.candidate_assessment});case 21:if(!((null==a||null===(i=a.entities.filter((function(e){return dn.recordingEvents.includes(e.key)})))||void 0===i?void 0:i.length)>0)){e.next=24;break}return e.next=24,fr({eventType:"success",notify:!1,eventName:"recording_stopped_successfully",startAt:d});case 24:return fr({eventType:"success",notify:!1,eventName:"session_completed",startAt:d}),ti("success","session_completed"),e.abrupt("return","stop_recording");case 29:e.prev=29,e.t0=e.catch(0),Zr.error("Error in stop recording:",e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}();function qD(e){return qD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qD(e)}function WD(){WD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==qD(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(qD(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function HD(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var YD=function(){var e,t=(e=WD().mark((function e(t){return WD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn.post("/auth/logon/",t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){HD(a,r,i,o,s,"next",e)}function s(e){HD(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();function KD(e){return KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KD(e)}function XD(){XD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==KD(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(KD(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function QD(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function JD(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){QD(a,r,i,o,s,"next",e)}function s(e){QD(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ZD=function(){var e=JD(XD().mark((function e(t){var n,r;return XD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),r={headers:{token:n}},e.abrupt("return",pn.post("/assessments/candidate_assessment/",t,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function eL(e){return eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eL(e)}function tL(){tL=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:C(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function _(){}function v(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(b=k);var x=y.prototype=_.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==eL(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=p;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(eL(t)+" is not iterable")}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function nL(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rL(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){nL(a,r,i,o,s,"next",e)}function s(e){nL(a,r,i,o,s,"throw",e)}o(void 0)}))}}function iL(e,t,n,r,i,a){return aL.apply(this,arguments)}function aL(){return(aL=rL(tL().mark((function e(t,n,r,i,a,o){var s,c,u,l,d,p,h,f,m,g,_,v,y,b,w,k,x,S;return tL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,YD(t);case 4:s=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",o({type:"error",message:"error_in_logon_school",code:40020,details:e.t0}));case 10:if(!s.data){e.next=58;break}return d=s.data.token,p=Date.now()+6048e5,localStorage.setItem("mereosToken",JSON.stringify({token:d,expiresAt:p})),e.prev=15,e.next=18,Ho(n);case 18:h=e.sent,e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(15),localStorage.removeItem("mereosToken"),e.abrupt("return",o({type:"error",message:"error_in_create_candidate",code:40021,details:e.t1}));case 25:return f={school:null===(c=s)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.school,candidate:null===(u=h)||void 0===u?void 0:u.data},localStorage.setItem("candidateAssessment",JSON.stringify(f)),localStorage.setItem("session",JSON.stringify(dn.initialSessionData)),localStorage.setItem("preChecksSteps",JSON.stringify(dn.preChecksSteps)),localStorage.setItem("socketGroupId",JSON.stringify({groupName:ua()})),localStorage.setItem("schoolTheme",a?JSON.stringify(a):"{}"),localStorage.setItem("conversationId",ua()),m={name:null==i?void 0:i.name,description:null==i?void 0:i.description,external_id:null==i?void 0:i.external_id,course_id:null==i?void 0:i.course_id,others:{test:"value"},branch:null==i?void 0:i.branch},e.prev=33,e.next=36,ZD(m);case 36:g=e.sent,e.next=43;break;case 39:return e.prev=39,e.t2=e.catch(33),localStorage.removeItem("mereosToken"),e.abrupt("return",o({type:"error",message:"error_in_create_candidate_assessment",code:40022,details:e.t2}));case 43:if(null===(l=g)||void 0===l||!l.data){e.next=57;break}return x={status:"Initiated",candidate:null===(_=h)||void 0===_||null===(_=_.data)||void 0===_?void 0:_.id,assessment:null===(v=g)||void 0===v||null===(v=v.data)||void 0===v?void 0:v.id,profile:r},e.prev=45,e.next=48,Ja(x);case 48:S=e.sent,e.next=55;break;case 51:return e.prev=51,e.t3=e.catch(45),localStorage.removeItem("mereosToken"),e.abrupt("return",o({type:"error",message:"error_in_custom_candidate_assessment_status",code:40023,details:e.t3}));case 55:Er("session",{candidate_assessment:null===(y=S)||void 0===y||null===(y=y.data)||void 0===y?void 0:y.id,assessment:null===(b=g)||void 0===b?void 0:b.data,candidate:null===(w=h)||void 0===w||null===(w=w.data)||void 0===w?void 0:w.id}),localStorage.setItem("secureFeatures",JSON.stringify(null===(k=S)||void 0===k||null===(k=k.data)||void 0===k?void 0:k.profile));case 57:return e.abrupt("return",s.data);case 58:e.next=63;break;case 60:return e.prev=60,e.t4=e.catch(0),e.abrupt("return",o({type:"error",message:"error_in_init_function",code:40024,details:e.t4}));case 63:case"end":return e.stop()}}),e,null,[[0,60],[1,7],[15,21],[33,39],[45,51]])})))).apply(this,arguments)}function oL(e,t){return sL.apply(this,arguments)}function sL(){return(sL=rL(tL().mark((function e(t,n){return tL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.globalCallback=t,localStorage.setItem("precheckSetting",n),window.precheckCompleted=!1,jo(),Fo(t)}catch(e){Zr.error("Error in start_prechecks:",e),t({type:"error",message:"error_in_prechecks_setup",code:4e4,details:e})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cL(e){return uL.apply(this,arguments)}function uL(){return uL=rL(tL().mark((function e(t){var n,r,i;return tL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.stopPrecheckCallBack=t,n=document.getElementById("precheck-modal"),r=document.querySelectorAll('[id="chat-icon"]'),i=document.getElementById("talkjs-container"),r.length>0&&r.forEach((function(e){e.style.display="none",e.remove()})),i&&(i.style.display="none",i.remove()),n&&(n.style.display="none",n.remove()),gr(),t({type:"success",message:"prechecks_stopped",code:50002})}catch(e){t({type:"error",message:"error_in_stop_prechecks",details:e,code:40001})}case 1:case"end":return e.stop()}}),e)}))),uL.apply(this,arguments)}function lL(e){return dL.apply(this,arguments)}function dL(){return(dL=rL(tL().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,p;return tL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.startRecordingCallBack=t,window.precheckCompleted){e.next=5;break}return window.startRecordingCallBack({type:"error",message:"please_complete_your_prechecks",code:40019}),e.abrupt("return");case 5:if(null!==window.roomInstance||window.recordingStart){e.next=49;break}if(window.recordingStart=!0,r=Tr(),i=new Date,Er("session",{quizStartTime:ur({isUTC:!0,inputDate:i})}),!((null==r||null===(n=r.entities)||void 0===n?void 0:n.length)>0)){e.next=48;break}if(a=ua(),o=ua(),!Sr(["mobile_proctoring"],null==r?void 0:r.entities).length){e.next=29;break}return e.prev=14,e.next=17,xn({session_id:a,auto_record:!0});case 17:return s=e.sent,e.next=20,Sn({room_sid:s.data.room_sid});case 20:c=e.sent,Er("session",{mobileRoomId:s.data.room_sid,mobileRoomSessionId:a}),window.socket&&window.socket.readyState===WebSocket.OPEN&&window.socket.send(JSON.stringify({event:"twilioToken",message:null==c||null===(u=c.data)||void 0===u?void 0:u.token})),e.next=29;break;case 25:return e.prev=25,e.t0=e.catch(14),window.startRecordingCallBack&&window.startRecordingCallBack({type:"error",message:"error_in_mobile_proctoring_setup",details:e.t0,code:40002}),e.abrupt("return");case 29:if(l=["record_screen","record_audio","record_video","mobile_proctoring"],!((null==r?void 0:r.entities.filter((function(e){return l.includes(e.key)})).length)>0)){e.next=45;break}return e.prev=31,e.next=34,xn({session_id:o,auto_record:!0});case 34:return d=e.sent,e.next=37,Sn({room_sid:d.data.room_sid});case 37:(p=e.sent)&&Er("session",{twilioToken:p.data.token,sessionId:o}),e.next=45;break;case 41:return e.prev=41,e.t1=e.catch(31),window.startRecordingCallBack({type:"error",message:"error_in_web_room_creation",details:e.t1,code:40003}),e.abrupt("return");case 45:FD(),e.next=49;break;case 48:window.startRecordingCallBack({type:"success",message:"recording_started_successfully",code:5e4});case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(0),Zr.error("there_was_an_error_in_starting_the_session",e.t2),t({type:"error",message:"error_in_starting_the_session",details:e.t2,code:40004});case 55:case"end":return e.stop()}}),e,null,[[0,51],[14,25],[31,41]])})))).apply(this,arguments)}function pL(e){return hL.apply(this,arguments)}function hL(){return(hL=rL(tL().mark((function e(t){var n,r;return tL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GD();case 3:if("stop_recording"!==e.sent){e.next=19;break}return n=br("candidateAssessment"),r=br("session"),e.next=9,Ir(r,n);case 9:if(!e.sent){e.next=16;break}["candidateAssessment","mereosToken","session","preChecksSteps","secureFeatures","schoolTheme","conversationId","precheckSetting","socketGroupId","navHistory","deviceId","microphoneID"].forEach((function(e){return localStorage.removeItem(e)})),t({type:"success",message:"session_finished_successfully",code:50003}),e.next=17;break;case 16:throw new Error("Session can't be added");case 17:e.next=20;break;case 19:throw"session can't add";case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),Zr.error(e.t0),t({type:"error",message:"error_in_stopping_the_session",code:40016});case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}window.openModal=Fo,window.globalCallback=null,window.stopPrecheckCallBack=null,window.startRecordingCallBack=null,window.recordingStart=!1,window.roomInstance=null})(),r})()));