{"version":3,"sources":["ExamPrepreation/examPrechecks.js","ExamPrepreation/examPreprationScreen.js","ExamPrepreation/IdentitySteps.js","ExamPrepreation/IdentityVerificationScreenFive.js","ExamPrepreation/identityVerificationScreenFour.js","ExamPrepreation/identityVerificationScreenOne.js","ExamPrepreation/identityVerificationScreenThree.js","ExamPrepreation/identityVerificationScreenTwo.js","ExamPrepreation/languageDropdown.js","ExamPrepreation/mobileProctoring.js","ExamPrepreation/PrevalidationInstructions.js","ExamPrepreation/Spinner.js","ExamPrepreation/systemdiagnostic.js","services/ai-event.servicer.js","services/assessment.services.js","services/auth.services.js","services/candidate-assessment.services.js","services/candidate-invite-assessment-section.services.js","services/candidate.services.js","services/event.service.js","services/profile.services.js","services/sessions.service.js","services/twilio.services.js","StartRecording/startRecording.js","utils/axios.js","utils/constant.js","utils/functions.js","utils/i18n.js","utils/socket.js","__mocks__/axios.js","__mocks__/fileMock.js"],"names":["i18next","runSystemDiagnostics","IdentityVerificationScreenOne","IdentityVerificationScreenTwo","IdentityVerificationScreenThree","IdentityVerificationScreenFour","IdentityVerificationScreenFive","ExamPreparation","addSectionSessionRecord","cleanupZendeskWidget","convertDataIntoParse","getSecureFeatures","handlePreChecksRedirection","loadZendeskWidget","registerEvent","updatePersistData","updateThemeColor","PrevalidationInstructions","ASSET_URL","languages","preChecksSteps","prevalidationSteps","systemDiagnosticSteps","MobileProctoring","modal","document","createElement","modalContent","className","tabsContainer","appendChild","tabContentsWrapper","ExamPreparationContainer","SystemDiagnosticsContainer","id","IdentityVerificationScreenOneContainer","IdentityVerificationScreenTwoConatiner","IdentityVerificationScreenThreeContainer","IdentityVerificationScreenFourContainer","IdentityVerificationScreenFiveContainer","PrevalidationinstructionContainer","identitySteps","mobileProctingConatiner","schoolTheme","undefined","localStorage","getItem","JSON","parse","navigate","showTab","newTabId","openModal","body","style","display","activeTab","callback","session","setItem","stringify","modalHeader","startSession","languageContainer","defaultLanguage","language","selectedLanguage","find","lang","keyword","selectContainer","onclick","languageDropdown","classList","toggle","flagImg","label","src","alt","textContent","t","value","dropdownIcon","forEach","index","optionDiv","optionFlag","key","onTrigger","selectedLang","changeLanguage","then","Array","from","children","option","trim","querySelector","catch","err","console","error","remove","optionText","insertBefore","firstChild","setLanguage","updateTranslations","closeModal","window","globalCallback","message","sharedMediaStream","getTracks","track","stop","async","tabId","tabs","querySelectorAll","tabContents","getSecureFeature","tab","dataset","add","content","secureFeatures","entities","entity","await","filter","includes","length","e","candidateInviteAssessmentSection","resp","data","sessionId","session_id","eventType","notify","eventName","sessionStatus","log","checkToken","init","lng","split","resources","en","translation","require","fr","it","pt","nl","es","de","addEventListener","checkInterval","setInterval","vectors","name","getDateTime","Date","toISOString","tabContent","innerHTML","mobileContainer","getElementById","container","examPreparationContainer","headerImg","title","msgLabel","continueButton","bgImagesContainer","marginTop","justifyContent","eventValue","examPreparation","vectorImg","vector","styleElement","head","on","UNVERIFIED","VERIFIED","VERIFING","renderStep","stepStatus","stepText","let","stepClass","span","renderIdentityVerificationSteps","currentStep","div","fifthStepStatus","findEntity","entityName","mainContainer","stepOrder","firstStepStatus","secondStepStatus","thirdStepStatus","fourthStepStatus","detectMultipleScreens","shareScreenFromContent","socket","newStream","multipleScreens","stream","mode","msg","type","text","shareScreen","screenRecordingStream","location","getVideoTracks","getSettings","displaySurface","updateUI","stepsContainer","wrapper","headerTitle","msgElement","reshareButton","queryMsg","color","btnContainer","prevButton","screenSharing","doneButton","disabled","onmessage","eventData","event","mobileConnection","onerror","onclose","candidateAssessment","uploadFileInS3Folder","userMediaStream","recordingMode","showPlayer","textMessage","loading","blob","mediaRecorder","recordedChunks","videoConstraints","width","height","facingMode","video","deviceId","exact","handleStartRecording","MediaRecorder","mimeType","ondataavailable","size","push","onstop","Blob","start","handleRestartRecording","handleStopRecording","nextStep","roomScanningVideo","prevStep","uploadUserRoomVideo","fileUrl","url","file","folderName","file_url","room_scan_video","stopButton","headerImgContainer","refVideo","controls","autoplay","URL","createObjectURL","recordingBadge","dot","webcam","muted","srcObject","createTextNode","mediaOptions","audio","navigator","mediaDevices","getUserMedia","createButton","recordButton","resetButton","uploadButton","nextButton","onClick","button","dataURIToBlob","userRekognitionInfo","state","isUploading","captureMode","imageSrc","webcamStream","videoElement","startWebcam","ivsoWebcamContainer","capturePhoto","canvas","videoWidth","videoHeight","getContext","drawImage","toDataURL","renderUI","handleImageProcessing","dataURLtoFile","dataurl","filename","fetch","File","img","Image","FormData","imageUrl","append","predictions","face","FaceDetails","onload","userPhoto","uploadUserCapturedPhoto","candidatePhoto","ivsoContainer","uploadPhotoBtn","ivsoWrapper","ivsHeaderTitle","ivssubHeading","ivsMsg","ivsoHeaderImgContainer","ivsoBtnContainer","ivsoQueryMsg","gridImg","retakePhotoBtn","nextBtn","takePhotoBtn","canvasRef","audioStream","audioContext","analyserNode","disabledBtn","animationFrameId","drawAudioSpikes","audioPermission","permissions","query","AudioContext","createAnalyser","fftSize","createMediaStreamSource","connect","canvasCtx","drawOnCanvas","barHeight","bufferLength","frequencyBinCount","frequencyData","Uint8Array","barWidth","getByteFrequencyData","clearRect","fillStyle","theming","x","i","fillRect","requestAnimationFrame","startRecording","counter","timer","profileSettings","settings","sumSquares","rms","Math","sqrt","audio_level","clearInterval","getAudioTracks","audioDetection","audioText","textAlign","messageElement","reRecordButton","cleanup","close","cancelAnimationFrame","acceptableLabels","acceptableText","srcToData","photo","inputFile","fileObj","currentState","imageFile","verifyImage","handleRestart","uploadImage","target","files","userImageData","identityCardPhoto","uploadCandidateIdentityCard","identityCard","retakeBtn","resultImg","uploadMsg","click","prevBtn","uploadBtn","accept","hidden","LanguageDropdown","dropdown","select","dropdownContent","element","getAttribute","Peer","QRCode","getAuthenticationToken","showToast","v4","mobileStream","mobileSteps","disabledNextBtn","checkedVideo","remoteVideoRef","currentUserVideoRef","peerInstance","socketGroupIds","newStep","readyState","WebSocket","OPEN","send","innerText","mobileConnectionBanner","bannerImage","bannerInfoBox","desc","bottomDesc","btnBack","btnDownload","qrCodeContainer","toCanvas","btnDownloaded","token","groupName","remoteMobileVideo","bannerVideoContainer","videoContainer","exampleText","bottomDescRemote","checkbox","checked","onchange","btnNext","btnPrevious","webStream","destroy","peer","webkitGetUserMedia","mozGetUserMedia","mediaStream","call","answer","remoteStream","sendResetSession","warn","onopen","remoteVideo","setAttribute","getMultipleCameraDevices","checkForMultipleMicrophones","currentCaptureMode","cameras","microphones","selectedMicrophoneId","selectedCameraId","audioConstraints","noiseSuppression","themeColor","iconData","svg","handleDeviceId","ideal","preValidation","setTextContent","headingContainer","subHeadingContainer","iconTextElements","isArray","icon","cameraDropdown","microphoneDropdown","camera","selected","microphone","alert","instructionsContainer","svgWrapper","circle","textElement","videoMainContainer","dropdownContainer","cameraContainer","microPhoneContainer","buttonContainer","continueBtn","marginLeft","padding","map","createSpinner","backgroundColor","spinnerContainer","Object","assign","colorStyles","createBounce","bounce","bounce1","bounce2","bounce3","checkCamera","checkMicrophone","checkNotification","getLocation","getNetworkUploadSpeed","cameraStream","videoGreen","microPhoneGreen","networkGreen","locationGreen","notificationGreen","multipleScreenGreen","videoRed","microPhoneRed","networkRed","locationRed","notificationRed","multipleScreenRed","createDiagnosticItem","diagnosticItem","greyBoxRight","statusIcon","labelElement","greyBoxLeft","loadingIcon","tab1Content","heading","diagnosticStatus","innerContainer","containerTop","description","containerPrompt","promptImage","containerMiddle","item","buttonSection","diagnosticStep","setElementStatus","status","isSuccess","statusLoading","success","failure","handleDiagnosticItemClick","checkFunction","result","successIconMap","failureIconMap","connection","notification","screen","recordVideo","recordAudio","checkNetwork","trackLocation","enableNotifications","multipleScreensCheck","promises","allDiagnosticsPassed","network","isNetworkGood","speedMbps","upload_speed","isDetected","Promise","all","keys","every","currentIconSrc","pathname","updateDiagnosticText","axios","getAllAiEvents","mereosToken","get","headers","Authorization","createAiEvent","post","editAiEvent","put","deleteEvent","delete","createCandidateAssessment","axiosInstance","logonSchool","changeCandidateAssessmentStatus","getCandidateInviteAssessmentSection","params","changeCandidateInviteAssessmentSectionStatus","createCandidate","getAllEvents","createEvent","editEvent","getProfile","createProfile","editProfile","deleteProfile","addSectionSession","editSectionSession","getRoomSid","getRecordings","getToken","getRecordingSid","getCreateRoom","TwilioVideo","findConfigs","findIncidentLevel","getTimeInSeconds","lockBrowserFromContent","registerAIEvent","unlockBrowserFromContent","cocoSsd","tf","LockDownOptions","interact","roomInstance","aiProcessingInterval","aiEvents","mobileRoomInstance","cameraTrack","screenTrack","cameraRecordings","audioRecordings","screenRecordings","startRecordingCallBack","room_name","mobileRoomSessionId","auto_record","twilioTokens","twilioRoom","VideoChat","twilioOptions","screenTrackPublished","dateTime","newRoomSessionId","getTime","newSessionId","room","roomSessionId","sessionStartTime","isUTC","inputDate","twilioToken","startAIWebcam","LocalVideoTrack","localParticipant","publishTrack","videoTracks","rt","audioTracks","user_video_name","user_audio_name","room_id","sid","trackSid","screen_sharing_video_name","startAt","cleanupLocalVideo","PREDICTION","setupWebcam","webcamContainer","zIndex","position","rowGap","flexDirection","mediaWrapper","top","left","draggable","listeners","move","parseFloat","dx","y","dy","transform","handleVideoResize","context","prediction","class","bbox","beginPath","rect","lineWidth","strokeStyle","stroke","font","fillText","setBackend","ready","net","load","seconds","quizStartTime","parseInt","image","browser","fromPixels","detect","person","multiplePersonFound","multiple_people","object_detected","person_missing","lastLogIndex","findIndex","lg","lastLog","splice","time_span","Number","end_time","start_time","startTime","endTime","newLog","pause","stopAllRecordings","findIncident","recordingEnded","incident_level","enabled","tracks","publication","detach","disable","unpublishTrack","disconnect","localVideoRef","attachTrack","kind","attachedElement","attach","detachTrack","handleParticipant","participant","isSubscribed","mobileRecordings","mobileAudios","participants","setTimeout","BASE_URL","CONTENT_TYPE","create","baseURL","content-type","process","env","NODE_ENV","SOCKET_URL","freeze","FORM_DATA","initialSessionData","submission_time","duration_taken","identity_card","identity_photo","school","assessment","candidate","roomscan_recordings","collected_details","video_codec","video_extension","archive_id","attempt_id","mobileRoomId","converationId","examIndication","examPrechecks","defaultTheme","Notyf","splitDataURI","dataURI","byteString","indexOf","atob","decodeURI","mimeString","ia","charCodeAt","currentDate","getTimezoneOffset","resolve","msGetUserMedia","_reject","geolocation","getCurrentPosition","latitude","longitude","coords","Notification","permission","showNotification","requestPermission","reject","enumerateDevices","devices","videoDevices","device","sort","a","b","isDefaultCamera","toLowerCase","icons","schoolLogo","isExtended","duration","myData","test","repeat","testUploadSpeed","toFixed","start_at","round","documentElement","setProperty","script","some","existingScript","parentNode","removeChild","zE","res","reader","FileReader","onloadend","replace","readAsDataURL","detectedLabels","acceptedValue","acceptedLabels","totalLabelConfidence","totalAcceptedLabels","Labels","Name","Confidence","detectedText","totalTextConfidence","totalAcceptedTexts","TextDetections","arr","mime","match","bstr","n","u8arr","getDisplayMedia","myHeaders","Headers","formData","config","now","configs","updates","storedItemJSON","prop","storedItem","hasOwnProperty","updatedItemJSON","recordings","sourceIds","source_id","sectionSessionDetails","submissionTime","recording","subrecording","source_sid","media_external_location","roomScanRecordings","mobile_audio_name","mobile_video_name","_dateBreaker_","_timeBreaker_","_differentiator_","getUTCFullYear","getUTCDate","substr","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","end_at","created_at","preventRightClick","disableCopyPasteCut","preventShortCuts","stopPrinting","detectUnfocusOfTab","preventPreClosure","detectWindowResize","detectDualDisplay","forceFullScreen","handleDefaultEvent","restoreRightClick","removeEventListener","visibilityChangeHandler","getMediaStream","stopMediaStream","removeUnfocusListener","allowedFunctionKeys","onkeydown","ctrlKey","metaKey","preventDefault","stopPropagation","shiftKey","blockedKeys","keyCode","css","getElementsByTagName","media","styleSheet","cssText","resizeTimeout","isResizing","handleResize","clearTimeout","exitFullScreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","whiteBackgroundElement","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","overflow","handleFullscreenChange","fullscreenElement","contains","getCPUInfo","hardwareConcurrency","getRAMInfo","deviceMemory","hasFeature","feature","featureName","ai_events","difference","notyf","options","ripple","warning","generatePeerId","getGroupId","storedId","newId","finalGroupName","jest","fn"],"mappings":"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","file":"mereos.min.js","sourcesContent":["import i18next from 'i18next';\r\nimport '../assets/css/modal.css';\r\nimport { runSystemDiagnostics } from './systemdiagnostic';\r\nimport { IdentityVerificationScreenOne } from './identityVerificationScreenOne';\r\nimport { IdentityVerificationScreenTwo } from './identityVerificationScreenTwo';\r\nimport { IdentityVerificationScreenThree } from './identityVerificationScreenThree';\r\nimport { IdentityVerificationScreenFour } from './identityVerificationScreenFour';\r\nimport { IdentityVerificationScreenFive } from './IdentityVerificationScreenFive';\r\nimport { ExamPreparation } from './examPreprationScreen';\r\nimport { addSectionSessionRecord, cleanupZendeskWidget, convertDataIntoParse, getSecureFeatures, handlePreChecksRedirection, loadZendeskWidget, registerEvent, updatePersistData, updateThemeColor } from '../utils/functions';\r\nimport { PrevalidationInstructions } from './PrevalidationInstructions';\r\nimport { ASSET_URL, languages, preChecksSteps, prevalidationSteps, systemDiagnosticSteps } from '../utils/constant';\r\nimport { MobileProctoring } from './mobileProctoring';\r\nimport 'notyf/notyf.min.css';\r\n// import Talk from 'talkjs';\r\n// import interact from 'interactjs';\r\n// import mereosLogo from '../assets/images/mereos.svg';\r\n// import schoolLogo from '../assets/images/profile-draft-circled-orange.svg';\r\n\r\nconst modal = document.createElement('div');\r\nmodal.className = 'modal';\r\n\r\nconst modalContent = document.createElement('div');\r\nmodalContent.className = 'modal-content';\r\n\r\nmodal.appendChild(modalContent);\r\n\r\nconst tabsContainer = document.createElement('div');\r\ntabsContainer.className = 'tabs-container';\r\n\r\nmodalContent.appendChild(tabsContainer);\r\n\r\nconst tabContentsWrapper = document.createElement('div');\r\ntabContentsWrapper.className = 'tab-contents-wrapper';\r\n\r\nconst ExamPreparationContainer = document.createElement('div');\r\nExamPreparationContainer.className = 'tab-content';\r\nExamPreparationContainer.id = 'ExamPreparation';\r\n\r\nconst SystemDiagnosticsContainer = document.createElement('div');\r\nSystemDiagnosticsContainer.className = 'tab-content';\r\nSystemDiagnosticsContainer.id = 'runSystemDiagnostics';\r\n\r\nconst IdentityVerificationScreenOneContainer = document.createElement('div');\r\nIdentityVerificationScreenOneContainer.className = 'tab-content';\r\nIdentityVerificationScreenOneContainer.id = 'IdentityVerificationScreenOne';\r\n\r\nconst IdentityVerificationScreenTwoConatiner = document.createElement('div');\r\nIdentityVerificationScreenTwoConatiner.className = 'tab-content';\r\nIdentityVerificationScreenTwoConatiner.id = 'IdentityVerificationScreenTwo';\r\n\r\nconst IdentityVerificationScreenThreeContainer = document.createElement('div');\r\nIdentityVerificationScreenThreeContainer.className = 'tab-content';\r\nIdentityVerificationScreenThreeContainer.id = 'IdentityVerificationScreenThree';\r\n\r\nconst IdentityVerificationScreenFourContainer = document.createElement('div');\r\nIdentityVerificationScreenFourContainer.className = 'tab-content';\r\nIdentityVerificationScreenFourContainer.id = 'IdentityVerificationScreenFour';\r\n\r\nconst IdentityVerificationScreenFiveContainer = document.createElement('div');\r\nIdentityVerificationScreenFiveContainer.className = 'tab-content';\r\nIdentityVerificationScreenFiveContainer.id = 'IdentityVerificationScreenFive';\r\n\r\nconst PrevalidationinstructionContainer = document.createElement('div');\r\nPrevalidationinstructionContainer.className = 'tab-content';\r\nPrevalidationinstructionContainer.id = 'Prevalidationinstruction';\r\n\r\nconst identitySteps = document.createElement('div');\r\nidentitySteps.className = 'steps-container';\r\nidentitySteps.id = 'modal-steps-container';\r\n\r\nconst mobileProctingConatiner = document.createElement('div');\r\nidentitySteps.className = 'mobile-procting-conatiner';\r\nidentitySteps.id = 'mobileProctingConatiner';\r\n\r\ntabContentsWrapper.appendChild(identitySteps);\r\ntabContentsWrapper.appendChild(ExamPreparationContainer);\r\ntabContentsWrapper.appendChild(SystemDiagnosticsContainer);\r\ntabContentsWrapper.appendChild(IdentityVerificationScreenOneContainer);\r\ntabContentsWrapper.appendChild(IdentityVerificationScreenTwoConatiner);\r\ntabContentsWrapper.appendChild(IdentityVerificationScreenThreeContainer);\r\ntabContentsWrapper.appendChild(IdentityVerificationScreenFourContainer);\r\ntabContentsWrapper.appendChild(IdentityVerificationScreenFiveContainer);\r\ntabContentsWrapper.appendChild(PrevalidationinstructionContainer);\r\ntabContentsWrapper.appendChild(mobileProctingConatiner);\r\n\r\n// const initializeLiveChat = () => {\r\n// \tconst isLoggedIn = !!localStorage.getItem('mereosToken');\r\n// \tconst getSecureFeature = getSecureFeatures();\r\n// \tconst secureFeatures = getSecureFeature?.entities || [];\r\n// \tconst hasChatBot = secureFeatures?.some(entity => entity.key === 'live_chat_bot');\r\n\r\n// \tif (!isLoggedIn || !hasChatBot) return;\r\n\r\n// \tconst chatIcon = document.createElement('img');\r\n// \tchatIcon.className = 'chat-icon';\r\n// \tchatIcon.id = 'chat-icon';\r\n// \tchatIcon.style.position = 'fixed';\r\n// \tchatIcon.style.bottom = '20px';\r\n// \tchatIcon.style.right = '20px';\r\n// \tchatIcon.style.zIndex = '99999999';\r\n// \tchatIcon.style.cursor = 'pointer';\r\n// \tchatIcon.src = mereosLogo;\r\n// \tchatIcon.alt = 'Chat Icon';\r\n// \tchatIcon.style.width = '50px';\r\n// \tchatIcon.style.height = '50px';\r\n\r\n// \tchatIcon.addEventListener('click', toggleChat);\r\n\r\n// \tdocument.body.appendChild(chatIcon);\r\n\r\n// \tfunction toggleChat() {\r\n// \t\tconst container = document.getElementById('talkjs-container');\r\n\r\n// \t\tif (container) {\r\n// \t\t\tif (container.style.display === 'none') {\r\n// \t\t\t\tcontainer.style.display = 'block';\r\n// \t\t\t} else {\r\n// \t\t\t\tcontainer.style.display = 'none';\r\n// \t\t\t}\r\n// \t\t} else {\r\n// \t\t\tconst chatContainer = document.createElement('div');\r\n// \t\t\tchatContainer.id = 'talkjs-container';\r\n// \t\t\tchatContainer.className = 'live-chat-container';\r\n// \t\t\tchatContainer.style.width = '400px';\r\n// \t\t\tchatContainer.style.height = '500px';\r\n// \t\t\tchatContainer.style.position = 'fixed';\r\n// \t\t\tchatContainer.style.bottom = '100px';\r\n// \t\t\tchatContainer.style.right = '20px';\r\n// \t\t\tchatContainer.style.zIndex = '9999';\r\n// \t\t\tchatContainer.style.backgroundColor = 'white';\r\n// \t\t\tchatContainer.style.border = '1px solid #ccc';\r\n// \t\t\tchatContainer.style.borderRadius = '8px';\r\n// \t\t\tchatContainer.style.boxShadow = '0px 4px 6px rgba(0, 0, 0, 0.1)';\r\n\r\n// \t\t\tconst loadingText = document.createElement('i');\r\n// \t\t\tchatContainer.appendChild(loadingText);\r\n\r\n// \t\t\tTalk.ready.then(() => {\r\n// \t\t\t\tconst candidateInviteAssessmentSection = convertDataIntoParse('candidateAssessment');\r\n\r\n// \t\t\t\tconst me = new Talk.User({\r\n// \t\t\t\t\tid: candidateInviteAssessmentSection?.id,\r\n// \t\t\t\t\tname: candidateInviteAssessmentSection?.name,\r\n// \t\t\t\t\temail: candidateInviteAssessmentSection?.email,\r\n// \t\t\t\t\tphotoUrl: candidateInviteAssessmentSection?.photo || schoolLogo,\r\n// \t\t\t\t});\r\n\r\n// \t\t\t\tconst session = new Talk.Session({\r\n// \t\t\t\t\tappId: 'tl1lE0Vo',\r\n// \t\t\t\t\tme: me,\r\n// \t\t\t\t});\r\n\r\n// \t\t\t\tconst other = new Talk.User({\r\n// \t\t\t\t\tid: candidateInviteAssessmentSection?.school?.id,\r\n// \t\t\t\t\tname: candidateInviteAssessmentSection?.school?.name,\r\n// \t\t\t\t\temail: candidateInviteAssessmentSection?.school?.email,\r\n// \t\t\t\t\tphotoUrl: schoolLogo,\r\n// \t\t\t\t});\r\n\r\n// \t\t\t\tconst conversationId = localStorage.getItem('conversationId');\r\n// \t\t\t\tconst conversation = session.getOrCreateConversation(conversationId);\r\n// \t\t\t\tconversation.setParticipant(me);\r\n// \t\t\t\tconversation.setParticipant(other);\r\n\r\n// \t\t\t\tconst chatbox = session.createChatbox();\r\n// \t\t\t\tchatbox.select(conversation);\r\n// \t\t\t\tchatbox.mount(chatContainer);\r\n// \t\t\t});\r\n\r\n// \t\t\tdocument.body.appendChild(chatContainer);\r\n\r\n// \t\t\tmakeDraggable(chatContainer);\r\n// \t\t}\r\n// \t}\r\n\r\n// \tfunction makeDraggable(element) {\r\n// \t\tinteract(element).draggable({\r\n// \t\t\tinertia: true,\r\n// \t\t\tlisteners: {\r\n// \t\t\t\tstart(event) {\r\n// \t\t\t\t\tconsole.log('Drag started', event);\r\n// \t\t\t\t},\r\n// \t\t\t\tmove(event) {\r\n// \t\t\t\t\tconst { target } = event;\r\n\r\n// \t\t\t\t\t// Calculate new position\r\n// \t\t\t\t\tconst x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;\r\n// \t\t\t\t\tconst y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n\r\n// \t\t\t\t\t// Apply translation\r\n// \t\t\t\t\ttarget.style.transform = `translate(${x}px, ${y}px)`;\r\n\r\n// \t\t\t\t\t// Save new position\r\n// \t\t\t\t\ttarget.setAttribute('data-x', x);\r\n// \t\t\t\t\ttarget.setAttribute('data-y', y);\r\n// \t\t\t\t},\r\n// \t\t\t\tend(event) {\r\n// \t\t\t\t\tconsole.log('Drag ended', event);\r\n// \t\t\t\t},\r\n// \t\t\t},\r\n// \t\t});\r\n// \t}\r\n// };\r\n\r\nmodalContent.appendChild(tabContentsWrapper);\r\nconst schoolTheme = localStorage.getItem('schoolTheme') !== undefined ? JSON.parse(localStorage.getItem('schoolTheme')) : {};\r\n\r\nconst navigate = (newTabId) => {\r\n\tshowTab(newTabId);\r\n};\r\n\r\nconst openModal = (callback) => {\r\n\t// console.log = function() {};\r\n\tdocument.body.appendChild(modal);\r\n\tmodal.style.display = 'block';\r\n\r\n\tconst activeTab = handlePreChecksRedirection(callback);\r\n\tconst preChecksStep = JSON.parse(localStorage.getItem('preChecksSteps'));\r\n\r\n\tif (preChecksStep === null) {\r\n\t\tlocalStorage.setItem('preChecksSteps', JSON.stringify(preChecksSteps));\r\n\t}\r\n\tshowTab(activeTab, callback);\r\n\tconst session = convertDataIntoParse('session');\r\n\tstartSession(session);\r\n\r\n\tconst modalHeader = document.createElement('div');\r\n\tmodalHeader.className = 'header';\r\n\r\n\tconst languageContainer = document.createElement('section');\r\n\tlanguageContainer.className = 'dropdown';\r\n\r\n\tconst defaultLanguage = schoolTheme?.language || 'en';\r\n\tlet selectedLanguage = languages.find(lang => lang.keyword === defaultLanguage);\r\n\r\n\tconst selectContainer = document.createElement('div');\r\n\tselectContainer.className = 'select';\r\n\tselectContainer.onclick = () => languageDropdown.classList.toggle('active');\r\n\r\n\tconst flagImg = document.createElement('img');\r\n\tflagImg.src = selectedLanguage.src;\r\n\tflagImg.alt = selectedLanguage.alt;\r\n\tselectContainer.appendChild(flagImg);\r\n\r\n\tconst label = document.createElement('label');\r\n\tlabel.className = 'language';\r\n\tlabel.textContent = i18next.t(selectedLanguage.value);\r\n\tselectContainer.appendChild(label);\r\n\r\n\tconst dropdownIcon = document.createElement('img');\r\n\tdropdownIcon.src = `${ASSET_URL}/dropdown-btn.svg`;\r\n\tselectContainer.appendChild(dropdownIcon);\r\n\r\n\tlanguageContainer.appendChild(selectContainer);\r\n\r\n\tconst languageDropdown = document.createElement('section');\r\n\tlanguageDropdown.className = 'dropdown-content';\r\n\r\n\tlanguages.forEach((lang, index) => {\r\n\t\tconst optionDiv = document.createElement('div');\r\n\t\toptionDiv.key = index;\r\n\t\toptionDiv.className = `dropdown-option ${lang.keyword === selectedLanguage.keyword ? 'selected' : ''}`;\r\n\t\toptionDiv.onclick = () => onTrigger(lang);\r\n\r\n\t\tconst optionFlag = document.createElement('img');\r\n\t\toptionFlag.src = lang.src;\r\n\t\toptionFlag.alt = lang.alt;\r\n\t\toptionDiv.appendChild(optionFlag);\r\n\r\n\t\tconst optionText = document.createElement('div');\r\n\t\toptionText.className = 'text';\r\n\t\toptionText.textContent = i18next.t(lang.value);\r\n\t\toptionDiv.appendChild(optionText);\r\n\r\n\t\tlanguageDropdown.appendChild(optionDiv);\r\n\t});\r\n\r\n\tlanguageContainer.appendChild(languageDropdown);\r\n\tmodalHeader.appendChild(languageContainer);\r\n\tmodalContent.insertBefore(modalHeader, modalContent.firstChild);\r\n\r\n\tfunction onTrigger(selectedLang) {\r\n\t\tselectedLanguage = selectedLang;\r\n\t\r\n\t\ti18next.changeLanguage(selectedLang.keyword)\r\n\t\t\t.then(() => {\r\n\t\t\t\tflagImg.src = selectedLang.src;\r\n\t\t\t\tlabel.textContent = i18next.t(selectedLang.value);\r\n\t\r\n\t\t\t\tlanguages.forEach(lang => {\r\n\t\t\t\t\tconst optionDiv = Array.from(languageDropdown.children).find(\r\n\t\t\t\t\t\toption => option.textContent.trim() === i18next.t(lang.value)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (optionDiv) {\r\n\t\t\t\t\t\tconst optionText = optionDiv.querySelector('.text');\r\n\t\t\t\t\t\toptionText.textContent = i18next.t(lang.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(err => console.error(err));\r\n\t\r\n\t\tlanguageDropdown.classList.remove('active');\r\n\t\tupdatePersistData('schoolTheme', { language: selectedLang.keyword });\r\n\t}\r\n};\r\n\r\nexport const setLanguage = (lang) => {\r\n\ti18next.changeLanguage(lang, (err) => {\r\n\t\tif (err) return console.error(err);\r\n\t\tupdateTranslations();\r\n\t});\r\n};\r\n\r\nfunction closeModal() {\r\n\tif (typeof window.globalCallback === 'function' && localStorage.getItem('mereosToken')) {\r\n\t\twindow.globalCallback({ message: 'precheck_completed' });\r\n\t}\r\n\r\n\tif(window.sharedMediaStream){\r\n\t\twindow.sharedMediaStream?.getTracks()?.forEach(track => track.stop());\r\n\t}\r\n\r\n\tcleanupZendeskWidget();\r\n\r\n\tmodal.style.display = 'none';\r\n\tmodal.remove();\r\n}\r\n\r\nconst showTab = async (tabId, callback) => {\r\n\ttry {\r\n\t\tloadZendeskWidget();\r\n\t\t// initializeLiveChat();\r\n\r\n\t\tupdateThemeColor();\r\n\t\tconst tabs = document.querySelectorAll('.tab');\r\n\t\tconst tabContents = document.querySelectorAll('.tab-content');\r\n\r\n\t\ttabs.forEach(tab => {\r\n\t\t\ttab.classList.remove('active');\r\n\t\t\tif (tab.dataset.tab === tabId) {\r\n\t\t\t\ttab.classList.add('active');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\ttabContents.forEach(content => {\r\n\t\t\tcontent.classList.remove('active');\r\n\t\t\tif (content.id === tabId) {\r\n\t\t\t\tcontent.classList.add('active');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst getSecureFeature = getSecureFeatures();\r\n\t\tconst secureFeatures = getSecureFeature?.entities || [];\r\n\r\n\t\tif (tabId === 'ExamPreparation') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'record_video')) {\r\n\t\t\t\tnavigate('runSystemDiagnostics');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait ExamPreparation(ExamPreparationContainer);\r\n\t\t} else if (tabId === 'runSystemDiagnostics') {\r\n\t\t\tif (!secureFeatures?.filter(entity => systemDiagnosticSteps.includes(entity.key))?.length) {\r\n\t\t\t\tnavigate('Prevalidationinstruction');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\trunSystemDiagnostics(SystemDiagnosticsContainer);\r\n\t\t} else if (tabId === 'Prevalidationinstruction') {\r\n\t\t\tif (!secureFeatures.filter(entity => prevalidationSteps.includes(entity.key))?.length) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenOne');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait PrevalidationInstructions(PrevalidationinstructionContainer);\r\n\t\t} else if (tabId === 'IdentityVerificationScreenOne') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'verify_candidate')) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenTwo',callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait IdentityVerificationScreenOne(IdentityVerificationScreenOneContainer,callback);\r\n\t\t} else if (tabId === 'IdentityVerificationScreenTwo') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'verify_id')) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenThree');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait IdentityVerificationScreenTwo(IdentityVerificationScreenTwoConatiner);\r\n\t\t} else if (tabId === 'IdentityVerificationScreenThree') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'record_audio')) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenFour');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait IdentityVerificationScreenThree(IdentityVerificationScreenThreeContainer);\r\n\t\t} else if (tabId === 'IdentityVerificationScreenFour') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'record_room')) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenFive');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait IdentityVerificationScreenFour(IdentityVerificationScreenFourContainer);\r\n\t\t} else if (tabId === 'MobileProctoring') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'mobile_proctoring')) {\r\n\t\t\t\tnavigate('IdentityVerificationScreenFive');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait MobileProctoring(mobileProctingConatiner);\r\n\t\t} else if (tabId === 'IdentityVerificationScreenFive') {\r\n\t\t\tif (!secureFeatures?.find(entity => entity.key === 'record_screen')) {\r\n\t\t\t\tcloseModal(callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tawait IdentityVerificationScreenFive(IdentityVerificationScreenFiveContainer,callback);\r\n\t\t} else {\r\n\t\t\tcloseModal(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.error('error in showTab', e);\r\n\t}\r\n};\r\n\r\nconst startSession = async (session) => {\r\n\tconst candidateInviteAssessmentSection = convertDataIntoParse('candidateAssessment');\r\n\r\n\ttry {\r\n\t\tconst resp = await addSectionSessionRecord(session, candidateInviteAssessmentSection);\r\n\t\tif (resp?.data) {\r\n\t\t\tupdatePersistData('session', { sessionId: resp?.data?.session_id, id: resp?.data?.id });\r\n\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'session_initiated' });\r\n\t\t}\r\n\t\tupdatePersistData('session',\r\n\t\t\t{\r\n\t\t\t\tid: resp.data.id,\r\n\t\t\t\tsessionStatus: 'Initiated'\r\n\t\t\t});\r\n\t} catch (e) {\r\n\t\tconsole.log('error', e);\r\n\t}\r\n};\r\n\r\nexport const updateTranslations = () => {\r\n\tconst activeTab = handlePreChecksRedirection(window.globalCallback);\r\n\tshowTab(activeTab,window.globalCallback);\r\n};\r\n\r\ni18next.init({\r\n\tlng: schoolTheme?.language.split('-')[0] || 'en',\r\n\tresources: {\r\n\t\ten: {\r\n\t\t\ttranslation: require('../assets/locales/en/translation.json')\r\n\t\t},\r\n       \r\n\t\tfr: {\r\n\t\t\ttranslation: require('../assets/locales/fr/translation.json')\r\n\t\t},\r\n\t\tit: {\r\n\t\t\ttranslation: require('../assets/locales/it/translation.json')\r\n\t\t},\r\n\t\tpt: {\r\n\t\t\ttranslation: require('../assets/locales/pt/translation.json')\r\n\t\t},\r\n\t\tnl: {\r\n\t\t\ttranslation: require('../assets/locales/nl/translation.json')\r\n\t\t},\r\n\t\tes: {\r\n\t\t\ttranslation: require('../assets/locales/es/translation.json')\r\n\t\t},\r\n\t\tde: {\r\n\t\t\ttranslation: require('../assets/locales/de/translation.json')\r\n\t\t},\r\n       \r\n\t}\r\n}, (err) => {\r\n\tif (err) return console.error(err);\r\n\tupdateTranslations();\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tupdateTranslations();\r\n});\r\n\r\nfunction checkToken() {\r\n\tif (!localStorage.getItem('mereosToken')) {\r\n\t\tcloseModal();\r\n\t}\r\n}\r\n\r\ncheckToken();\r\n\r\nwindow.addEventListener('unload', cleanupZendeskWidget);\r\n\r\nconst checkInterval = 2000;\r\nsetInterval(checkToken, checkInterval);\r\n\r\n\r\nexport { openModal, closeModal, modalContent, showTab };\r\n","import '../assets/css/exam-prepration.css';\r\nimport { showTab } from './examPrechecks';\r\nimport { registerEvent, updatePersistData } from '../utils/functions';\r\nimport i18next from 'i18next';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nconst vectors = [\r\n\t{ name: 'img1', src: `${ASSET_URL}/oc-address.svg`, alt: '' },\r\n\t{ name: 'img2', src: `${ASSET_URL}/oc-lightbulb.svg`, alt: '' },\r\n\t{ name: 'img3', src: `${ASSET_URL}/oc-megaphone.svg`, alt: '' },\r\n\t{ name: 'img4', src: `${ASSET_URL}/stacked-up-books.svg`, alt: '' },\r\n\t{ name: 'img5', src: `${ASSET_URL}/vector-2.png`, alt: '' },\r\n\t{ name: 'img6', src: `${ASSET_URL}/vector-1.png`, alt: '' },\r\n\t{ name: 'img7', src: `${ASSET_URL}/vector-3.png`, alt: '' },\r\n\t{ name: 'img8', src: `${ASSET_URL}/vector-1.png`, alt: '' }\r\n];\r\n\r\nconst getDateTime = () => new Date().toISOString();\r\n\r\nexport const ExamPreparation = async (tabContent,callback) => {\r\n\tif (!tabContent) {\r\n\t\tconsole.error('tabContent is not defined or is not a valid DOM element');\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst nextPage = () => {\r\n\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'terms_and_conditions_read', eventValue: getDateTime() });\r\n\t\tshowTab('runSystemDiagnostics',callback);\r\n\t\tupdatePersistData('preChecksSteps',{ examPreparation:true });\r\n\t};\r\n\t\r\n\ttabContent.innerHTML = '';\r\n\r\n\tlet mobileContainer = document?.getElementById('mobile-proctoring');\r\n\tif(mobileContainer){\r\n\t\tmobileContainer.innerHTML = '';\r\n\t}\r\n\r\n\tconst container = document.createElement('div');\r\n\tcontainer.className = 'exam-preparation';\r\n\r\n\tconst examPreparationContainer = document.createElement('div');\r\n\texamPreparationContainer.className = 'exam-preparation-container';\r\n\r\n\tconst headerImg = document.createElement('img');\r\n\theaderImg.className = 'header-img';\r\n\theaderImg.src = `${ASSET_URL}/oc-reading-book.png`;\r\n\theaderImg.alt = 'header-img';\r\n\texamPreparationContainer.appendChild(headerImg);\r\n\r\n\tconst title = document.createElement('h1');\r\n\ttitle.textContent = i18next.t('exam_preparation');\r\n\texamPreparationContainer.appendChild(title);\r\n\r\n\tconst msgLabel = document.createElement('label');\r\n\tmsgLabel.className = 'ep-msg';\r\n\tmsgLabel.textContent = i18next.t('icc_msg');\r\n\texamPreparationContainer.appendChild(msgLabel);\r\n\r\n\tconst continueButton = document.createElement('button');\r\n\tcontinueButton.className = 'orange-filled-btn';\r\n\tcontinueButton.textContent = i18next.t('continue');\r\n\tcontinueButton.style.marginTop = '10px';\r\n\tcontinueButton.style.justifyContent = 'center';\r\n\tcontinueButton.addEventListener('click', nextPage);\r\n\texamPreparationContainer.appendChild(continueButton);\r\n\r\n\tcontainer.appendChild(examPreparationContainer);\r\n\r\n\tconst bgImagesContainer = document.createElement('div');\r\n\tbgImagesContainer.className = 'bg-images';\r\n\r\n\tvectors.forEach((vector) => {\r\n\t\tconst vectorImg = document.createElement('img');\r\n\t\tvectorImg.className = vector.name;\r\n\t\tvectorImg.src = vector.src;\r\n\t\tvectorImg.alt = vector.alt;\r\n\t\tbgImagesContainer.appendChild(vectorImg);\r\n\t});\r\n\r\n\tcontainer.appendChild(bgImagesContainer);\r\n\r\n\ttabContent.appendChild(container);\r\n\r\n\tconst styleElement = document.createElement('style');\r\n\tstyleElement.textContent = `\r\n    .exam-preparation {\r\n        /* Define your CSS styles here */\r\n    }\r\n    .exam-preparation-container {\r\n        /* Define your CSS styles here */\r\n    }\r\n    /* Define other classes as needed */\r\n  `;\r\n\tdocument.head.appendChild(styleElement);\r\n\t\r\n\ti18next.on('languageChanged', () => {\r\n\t\ttitle.textContent = i18next.t('exam_preparation');\r\n\t\tmsgLabel.textContent = i18next.t('icc_msg');\r\n\t\tcontinueButton.textContent = i18next.t('continue');\r\n\t});\r\n};\r\n\r\ni18next.on('languageChanged', () => {\r\n\tconst activeTab = document.querySelector('.tab-content.active');\r\n\tif (activeTab && activeTab.id === 'ExamPreparation') {\r\n\t\tExamPreparation(activeTab);\r\n\t}\r\n});\r\n","import { t } from 'i18next';\r\nimport { getSecureFeatures } from '../utils/functions';\r\nimport '../assets/css/identityStep.css';\r\n\r\nconst UNVERIFIED = 'UNVERIFIED';\r\nconst VERIFIED = 'VERIFIED';\r\nconst VERIFING = 'VERIFING';\r\n\r\n// Function to render a single step\r\nconst renderStep = (stepStatus, stepText) => {\r\n\tconst container = document.createElement('div');\r\n\tcontainer.className = 'ivs-instruction-step-container';\r\n\r\n\tlet stepClass = 'ivs-instruction-txt';\r\n\tif (stepStatus === VERIFING) {\r\n\t\tstepClass = 'ivs-instruction-txt-orange'; \r\n\t} else if (stepStatus === VERIFIED) {\r\n\t\tstepClass = 'ivs-instruction-txt-orange'; \r\n\t}\r\n\r\n\tconst span = document.createElement('span');\r\n\tspan.className = stepClass;\r\n\tspan.textContent = t(stepText);\r\n\r\n\tcontainer.appendChild(span);\r\n\treturn container;\r\n};\r\n\r\n\r\nexport const renderIdentityVerificationSteps = (identitySteps, currentStep) => {\r\n\tconst container = identitySteps;\r\n\tconst getSecureFeature = getSecureFeatures();\r\n\tconst secureFeatures = getSecureFeature?.entities || [];\r\n\r\n\tconst findEntity = (entityName) => secureFeatures.find(entity => entity.key === entityName);\r\n\tconst mainContainer = document.createElement('div');\r\n\tmainContainer.className = 'steps-container';\r\n\r\n\tconst stepStatus = (stepOrder) => {\r\n\t\tif (stepOrder === currentStep) return VERIFING;\r\n\t\tif (stepOrder < currentStep) return VERIFIED;\r\n\t\treturn UNVERIFIED;\r\n\t};\r\n\r\n\tif (findEntity('verify_candidate')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst firstStepStatus = stepStatus(1); // 1st step\r\n\t\tdiv.appendChild(renderStep(firstStepStatus, 'take_a_photo', firstStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tif (findEntity('verify_id')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst secondStepStatus = stepStatus(2); // 2nd step\r\n\t\tdiv.appendChild(renderStep(secondStepStatus, 'photo_id', secondStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tif (findEntity('record_audio')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst thirdStepStatus = stepStatus(3); // 3rd step\r\n\t\tdiv.appendChild(renderStep(thirdStepStatus, 'sound_check', thirdStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tif (findEntity('record_room')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst fourthStepStatus = stepStatus(4); // 4th step\r\n\t\tdiv.appendChild(renderStep(fourthStepStatus, '360_video', fourthStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tif (findEntity('mobile_proctoring')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst fifthStepStatus = stepStatus(5);\r\n\t\tdiv.appendChild(renderStep(fifthStepStatus, 'synchronisation_mobile', fifthStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tif (findEntity('record_screen')) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.className = 'ivs-instruction';\r\n\t\tconst fifthStepStatus = stepStatus(6);\r\n\t\tdiv.appendChild(renderStep(fifthStepStatus, 'screen_record', fifthStepStatus === VERIFING));\r\n\t\tmainContainer.appendChild(div);\r\n\t}\r\n\r\n\tcontainer.appendChild(mainContainer);\r\n};\r\n","import { detectMultipleScreens, getDateTime, getSecureFeatures, registerEvent, shareScreenFromContent, updatePersistData } from '../utils/functions';\r\nimport '../assets/css/step5.css';\r\nimport { showTab } from './examPrechecks';\r\nimport i18next from 'i18next';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\nimport socket from '../utils/socket';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nexport let newStream;\r\n\r\nexport const IdentityVerificationScreenFive = async (tabContent) => {\r\n\tlet multipleScreens;\r\n\tif (!tabContent) {\r\n\t\tconsole.error('tabContent is not defined or is not a valid DOM element');\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet stream = null;\r\n\tlet mode = 'startScreenRecording';\r\n\tlet msg = {\r\n\t\ttype: 'successful',\r\n\t\ttext: i18next.t('please_share_entire_screen')\r\n\t};\r\n\r\n\tconst checkMultipleScreens = async () => {\r\n\t\tconst resp = detectMultipleScreens();\r\n\t\tif (resp) {\r\n\t\t\tmultipleScreens = true;\r\n\t\t} else {\r\n\t\t\tmultipleScreens = false;\r\n\t\t\tregisterEvent({ eventType: 'error', notify: false, eventName: 'multiple_screens_detected' });\r\n\t\t}\r\n\t};\r\n\r\n\tconst initSocketConnection = () => {\r\n\t\tif (!socket) {\r\n\t\t\tconsole.error('Socket not initialized');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsocket.onmessage = (event) => {\r\n\t\t\tconst eventData = JSON.parse(event?.data);\r\n\r\n\t\t\tswitch (eventData?.message?.event || eventData?.event) {\r\n\t\t\t\tcase 'violation':\r\n\t\t\t\t\tif(eventData?.message?.message === 'Violation'){\r\n\t\t\t\t\t\tupdatePersistData('preChecksSteps', { mobileConnection: false,screenSharing:false });\r\n\t\t\t\t\t\tif(newStream){\r\n\t\t\t\t\t\t\tnewStream?.getVideoTracks()[0].stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowTab('MobileProctoring');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregisterEvent({ eventType: 'error', notify: false, eventName:eventData?.message?.message , eventValue: getDateTime() });\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tsocket.onerror = (error) => {\r\n\t\t\tconsole.error('WebSocket error:', error);\r\n\t\t};\r\n\r\n\t\tsocket.onclose = () => {\r\n\t\t\tconsole.log('WebSocket connection closed');\r\n\t\t};\r\n\t};\r\n\r\n\tconst shareScreen = async () => {\r\n\t\ttry {\r\n\t\t\tnewStream = await shareScreenFromContent();\r\n\t\t\tupdatePersistData('session', { screenRecordingStream: location });\r\n\r\n\t\t\tif (newStream.getVideoTracks()[0].getSettings().displaySurface === 'monitor') {\r\n\t\t\t\tstream = newStream;\r\n\t\t\t\tmode = 'startScreenRecording';\r\n\t\t\t\tmsg = {\r\n\t\t\t\t\ttype: 'successful',\r\n\t\t\t\t\ttext: i18next.t('screen_shared_successfully')\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tnewStream.getVideoTracks()[0].stop();\r\n\t\t\t\tthrow i18next.t('please_share_entire_screen');\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Error during screen sharing:', err);\r\n\t\t\tmode = 'rerecordScreen';\r\n\t\t\tmsg = {\r\n\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\ttext: err\r\n\t\t\t};\r\n\t\t}\r\n\t\tupdateUI(); \r\n\t};\r\n\r\n\tconst nextStep = () => {\r\n\t\tupdatePersistData('preChecksSteps', { screenSharing: true });\r\n\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'screen_recording_window_shared', eventValue: getDateTime() });\r\n\t\tshowTab('IdentityVerificationScreenSix');\r\n\t};\r\n\r\n\tconst prevStep = () => {\r\n\t\tif (stream) {\r\n\t\t\tstream.getVideoTracks()[0].stop();\r\n\t\t}\r\n\t\tupdatePersistData('preChecksSteps',{ screenSharing:false });\r\n\t\tshowTab('IdentityVerificationScreenFour');\r\n\t};\r\n\r\n\tconst container = document.createElement('div');\r\n\tcontainer.classList.add('screen-share-container');\r\n\r\n\tconst stepsContainer = document.createElement('div');\r\n\trenderIdentityVerificationSteps(stepsContainer, 6);\r\n\r\n\tconst wrapper = document.createElement('div');\r\n\twrapper.classList.add('screen-wrapper');\r\n\r\n\tconst headerTitle = document.createElement('div');\r\n\theaderTitle.classList.add('ivsf-header-titles');\r\n\theaderTitle.textContent = i18next.t('verification_completed');\r\n\r\n\tconst msgElement = document.createElement('div');\r\n\tmsgElement.classList.add('screen-desc');\r\n\tmsgElement.textContent = i18next.t('verification_completed_msg');\r\n\r\n\twrapper.appendChild(headerTitle);\r\n\twrapper.appendChild(msgElement);\r\n\twrapper.appendChild(stepsContainer);\r\n\r\n\tconst reshareButton = document.createElement('button');\r\n\tconst headerImg = document.createElement('img');\r\n\theaderImg.classList.add('screen-share-dummy');\r\n\theaderImg.src = `${ASSET_URL}/screen-recorder-mock.svg`;\r\n\theaderImg.alt = 'camera-icon';\r\n\twrapper.appendChild(headerImg);\r\n\r\n\tlet queryMsg = document.createElement('div'); // Declare queryMsg here\r\n\tqueryMsg.classList.add('ivsf-query-msg');\r\n\tif (msg.text) {\r\n\t\tqueryMsg.textContent = i18next.t(msg.text);\r\n\t\tif (msg.type === 'unsuccessful') {\r\n\t\t\tqueryMsg.style.color = '#E95E5E';\r\n\t\t}\r\n\t\twrapper.appendChild(queryMsg);\r\n\t}\r\n\r\n\tconst btnContainer = document.createElement('div');\r\n\tbtnContainer.classList.add('ivsf-btn-container');\r\n\r\n\tconst prevButton = document.createElement('button');\r\n\tprevButton.className = 'orange-hollow-btn';\r\n\tprevButton.textContent = i18next.t('previous_step');\r\n\tprevButton.addEventListener('click', prevStep);\r\n\tbtnContainer.appendChild(prevButton);\r\n\r\n\tlet doneButton; // Declare doneButton outside the conditional block\r\n\r\n\tif (mode === 'startScreenRecording') {\r\n\t\tdoneButton = document.createElement('button'); \r\n\t\tdoneButton.className = 'orange-filled-btn';\r\n\t\tdoneButton.textContent = i18next.t('done');\r\n\t\tdoneButton.disabled = multipleScreens;\r\n\t\tdoneButton.addEventListener('click', nextStep);\r\n\t\tbtnContainer.appendChild(doneButton);\r\n\t} else if (mode === 'rerecordScreen') {\r\n\t\t\r\n\t\treshareButton.className = 'orange-filled-btn';\r\n\t\treshareButton.textContent = i18next.t('reshare_screen');\r\n\t\treshareButton.addEventListener('click', shareScreen);\r\n\t\tbtnContainer.appendChild(reshareButton);\r\n\t}\r\n\r\n\twrapper.appendChild(btnContainer);\r\n\tcontainer.appendChild(wrapper);\r\n\r\n\tconst styleElement = document.createElement('style');\r\n\tstyleElement.textContent = `\r\n        .screen-share-container {\r\n            /* Define your CSS styles here */\r\n        }\r\n        .screen-wrapper {\r\n            /* Define your CSS styles here */\r\n        }\r\n        /* Define other classes as needed */\r\n    `;\r\n\tcontainer.appendChild(styleElement);\r\n\r\n\ttabContent.innerHTML = '';\r\n\ttabContent.appendChild(container);\r\n\r\n\tshareScreen();\r\n\tinitSocketConnection();\r\n\t\r\n\tconst candidateAssessment = getSecureFeatures();\r\n\tconst secureFeatures = candidateAssessment?.entities || [];\r\n    \r\n\tlet multipleScreensCheck = secureFeatures.find(entity => entity.name === 'Verify Desktop');\r\n\r\n\tmultipleScreensCheck && checkMultipleScreens();\r\n\r\n\tconst updateUI = () => {\r\n\t\theaderTitle.textContent = i18next.t('verification_completed');\r\n\t\tmsgElement.textContent = i18next.t('verification_completed_msg');\r\n\t\tqueryMsg.textContent = i18next.t(msg.text);\r\n\t\tprevButton.textContent = i18next.t('previous_step');\r\n\t\tif (mode === 'startScreenRecording') {\r\n\t\t\tdoneButton.textContent = i18next.t('done');\r\n\t\t} else if (mode === 'rerecordScreen') {\r\n\t\t\treshareButton.textContent = i18next.t('reshare_screen');\r\n\t\t}\r\n\t};\r\n\r\n\t// Update UI when language changes\r\n\ti18next.on('languageChanged', updateUI);\r\n\r\n\treturn container;\r\n};\r\n","import '../assets/css/step4.css';\r\nimport { showTab } from './examPrechecks';\r\nimport { getDateTime, registerEvent, updatePersistData, uploadFileInS3Folder } from '../utils/functions';\r\nimport i18next from 'i18next';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nwindow.userMediaStream = null;\r\n\r\nexport const IdentityVerificationScreenFour = async (tabContent) => {\r\n\tif (tabContent.querySelector('.screen-four-container')) return; \r\n\tlet recordingMode = 'startRecording';\r\n\tlet showPlayer = false;\r\n\tlet textMessage = 'scan_your_room';\r\n\tlet loading = false;\r\n\tlet blob = null;\r\n\tlet mediaRecorder = null;\r\n\tlet recordedChunks = [];\r\n\r\n\tconst videoConstraints = {\r\n\t\twidth: 640,\r\n\t\theight: 480,\r\n\t\tfacingMode: 'user',\r\n\t\tvideo: localStorage.getItem('deviceId') ? { deviceId: { exact: localStorage.getItem('deviceId') } } : true\r\n\t};\r\n\r\n\tconst handleStartRecording = async (type) => {\r\n\t\ttry {\r\n\t\t\tif (type === 'startRecording') {\r\n\t\t\t\tmediaRecorder = new MediaRecorder(window.userMediaStream, {\r\n\t\t\t\t\tmimeType: 'video/webm; codecs=vp9'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmediaRecorder.ondataavailable = (event) => {\r\n\t\t\t\t\tif (event.data.size > 0) {\r\n\t\t\t\t\t\trecordedChunks.push(event.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tmediaRecorder.onstop = () => {\r\n\t\t\t\t\tblob = new Blob(recordedChunks, { type: 'video/webm' });\r\n\t\t\t\t\tshowPlayer = true;\r\n\t\t\t\t\trecordedChunks = [];\r\n\t\t\t\t\tupdateUI();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tmediaRecorder.start();\r\n\t\t\t\trecordingMode = 'beingRecorded';\r\n\t\t\t\tupdateUI();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error accessing media devices:', error);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tconst handleRestartRecording = async () => {\r\n\t\tshowPlayer = false;\r\n\t\tloading=false;\r\n\t\trecordingMode ='startRecording';\r\n\t\tupdateUI();\r\n\t};\r\n\r\n\r\n\tconst handleStopRecording = async () => {\r\n\t\tif (mediaRecorder) {\r\n\t\t\tmediaRecorder.stop();\r\n\t\t}\r\n\t\trecordingMode = 'stopRecording';\r\n\t\tupdateUI();\r\n\t};\r\n\r\n\tconst nextStep = async () => {\r\n\t\ttry {\r\n\t\t\tshowPlayer = false;\r\n\t\t\tloading=false;\r\n\t\t\tif (window.userMediaStream) {\r\n\t\t\t\twindow.userMediaStream.getTracks().forEach(track => track.stop());\r\n\t\t\t\twindow.userMediaStream = null;\r\n\t\t\t}\r\n\t\t\tupdatePersistData('preChecksSteps', { roomScanningVideo: true });\r\n\t\t\tregisterEvent({\r\n\t\t\t\teventType: 'success',\r\n\t\t\t\tnotify: false,\r\n\t\t\t\teventName: 'room_scan_completed',\r\n\t\t\t\teventValue: getDateTime(),\r\n\t\t\t});\r\n\r\n\t\t\tshowTab('MobileProctoring');\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error navigating to next step:', error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst prevStep = () => {\r\n\t\tupdatePersistData('preChecksSteps',{ roomScanningVideo:false });\r\n\t\tshowTab('IdentityVerificationScreenThree');\r\n\t};\r\n\r\n\tconst uploadUserRoomVideo = async () => {\r\n\t\ttry {\r\n\t\t\tloading = true;\r\n\t\t\ttextMessage = 'file_is_being_uploaded';\r\n\t\t\tupdateUI();\r\n\r\n\t\t\tlet url = await uploadFileInS3Folder({\r\n\t\t\t\tfile: blob,\r\n\t\t\t\tfolderName: 'videos'\r\n\t\t\t});\r\n\r\n\t\t\tif (url?.data?.file_url) {\r\n\t\t\t\tconst fileUrl = url.data.file_url;\r\n\t\t\t\tupdatePersistData('session', { room_scan_video: fileUrl });\r\n\t\t\t\trecordingMode = 'uploaded_file';\r\n\t\t\t\ttextMessage = 'candidate_video_is_uploaded_successfully';\r\n\t\t\t\tupdateUI();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tloading = false;\r\n\t\t\ttextMessage = 'something_went_wrong_please_upload_again';\r\n\t\t\trecordingMode = 'stopRecording';\r\n\t\t\tupdateUI();\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateUI = async () => {\r\n\t\tlet container = tabContent?.querySelector('.screen-four-container');\r\n\t\tif (!container) {\r\n\t\t\tcontainer = document.createElement('div');\r\n\t\t\tcontainer.className = 'screen-four-container'; \r\n\t\t\tcontainer.id = 'screen-four-main-container';\r\n\t\t\ttabContent.appendChild(container);\r\n\t\t}\r\n\t\tcontainer.innerHTML = '';\r\n\r\n\t\tconst stepsContainer = document.createElement('div');\r\n\t\trenderIdentityVerificationSteps(stepsContainer, 4);\r\n\r\n\t\tconst wrapper = document.createElement('div');\r\n\t\twrapper.className = 'ivsf-wrapper';\r\n\r\n\t\tconst headerTitle = document.createElement('div');\r\n\t\theaderTitle.className = 'ivsf-header-title';\r\n\t\theaderTitle.textContent = i18next.t('workspace_checking');\r\n\r\n\t\tconst message = document.createElement('div');\r\n\t\tmessage.className = 'ivsf-msg';\r\n\t\tmessage.textContent = i18next.t('workspace_checking_msg');\r\n\r\n\t\tconst headerImgContainer = document.createElement('div');\r\n\t\theaderImgContainer.className = 'ivsf-header-img-container';\r\n\r\n\t\tif (showPlayer && blob) {\r\n\t\t\tconst refVideo = document.createElement('video');\r\n\t\t\trefVideo.id = 'myVideo';\r\n\t\t\trefVideo.className = 'my-recorded-video2';\r\n\t\t\trefVideo.controls = true;\r\n\t\t\trefVideo.autoplay = true;\r\n\t\t\trefVideo.src = URL.createObjectURL(blob);\r\n\t\t\theaderImgContainer.appendChild(refVideo);\r\n\t\t} else {\r\n\t\t\tif (recordingMode === 'beingRecorded') {\r\n\t\t\t\tconst recordingBadge = document.createElement('div');\r\n\t\t\t\trecordingBadge.className = 'ivsf-recording-badge-container';\r\n\t\t\t\t\r\n\t\t\t\tconst dot = document.createElement('img');\r\n\t\t\t\tdot.className = 'ivsf-recording-dot';\r\n\t\t\t\tdot.src = `${ASSET_URL}/red-dot.svg`; \r\n\t\t\t\tdot.alt = 'red-dot';\r\n\t\t\t\tconst webcam = document.createElement('video');\r\n\t\t\t\twebcam.autoplay = true;\r\n\t\t\t\twebcam.muted = true;\r\n\t\t\t\twebcam.height = 250;\r\n\t\t\t\twebcam.id = 'webcam-recorded-media';\r\n\t\t\t\twebcam.srcObject = window.userMediaStream;\r\n\r\n\t\t\t\trecordingBadge.appendChild(dot);\r\n\t\t\t\trecordingBadge.appendChild(document.createTextNode(`${i18next.t('recording')}`));\r\n\t\t\t\theaderImgContainer.appendChild(recordingBadge);\r\n\t\t\t\theaderImgContainer.appendChild(webcam); \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twrapper.appendChild(headerTitle);\r\n\t\twrapper.appendChild(message);\r\n\t\twrapper.appendChild(stepsContainer);\r\n\t\twrapper.appendChild(headerImgContainer);\r\n\r\n\t\tconst queryMsg = document.createElement('div');\r\n\t\tqueryMsg.className = 'ivsf-query-msg';\r\n\t\tqueryMsg.textContent = i18next.t(textMessage);\r\n\t\tif (textMessage === 'something_went_wrong_please_upload_again') {\r\n\t\t\tqueryMsg.style.color = '#E95E5E';\r\n\t\t}\r\n\t\twrapper.appendChild(queryMsg);\r\n\r\n\t\tconst btnContainer = document.createElement('div');\r\n\t\tbtnContainer.className = 'ivsf-btn-container';\r\n\r\n\t\tif (recordingMode === 'startRecording') {\r\n\t\t\tconst mediaOptions = {\r\n\t\t\t\taudio: localStorage.getItem('microphoneID') !== null ? { deviceId: { exact: localStorage.getItem('microphoneID') }} : true,\r\n\t\t\t\tvideo: videoConstraints.video,\r\n\t\t\t};\r\n\r\n\t\t\twindow.userMediaStream = await navigator.mediaDevices.getUserMedia(mediaOptions);\r\n\t\t\tconst webcam = document.createElement('video');\r\n\t\t\t\r\n\t\t\twebcam.autoplay = true;\r\n\t\t\twebcam.muted = true;\r\n\t\t\twebcam.height = 250;\r\n\t\t\twebcam.id = 'webcam-recording-media';\r\n\t\t\twebcam.srcObject = window.userMediaStream;\r\n\t\t\theaderImgContainer.appendChild(webcam);\r\n\r\n\t\t\tconst prevButton = createButton(`${i18next.t('previous_step')}`, 'orange-hollow-btn', prevStep);\r\n\t\t\tconst recordButton = createButton(`${i18next.t('record_video')}`, 'orange-filled-btn', () => handleStartRecording('startRecording'));\r\n\t\t\tbtnContainer.appendChild(prevButton);\r\n\t\t\tbtnContainer.appendChild(recordButton);\r\n\t\t} else if (recordingMode === 'beingRecorded') {\r\n\t\t\tconst prevButton = createButton(`${i18next.t('previous_step')}`, 'orange-hollow-btn', prevStep);\r\n\t\t\tconst stopButton = createButton(`${i18next.t('stop_recording')}`, 'orange-filled-btn', handleStopRecording);\r\n\t\t\tbtnContainer.appendChild(prevButton);\r\n\t\t\tbtnContainer.appendChild(stopButton);\r\n\t\t} else if (recordingMode === 'stopRecording' || recordingMode === 'uploaded_file') {\r\n\t\t\tconst resetButton = createButton('Reset', 'orange-hollow-btn', handleRestartRecording);\r\n\t\t\tbtnContainer.appendChild(resetButton);\r\n\r\n\t\t\tif (recordingMode !== 'uploaded_file') {\r\n\t\t\t\tconst uploadButton = createButton(`${i18next.t('Upload')}`, 'orange-filled-btn', uploadUserRoomVideo);\r\n\t\t\t\tuploadButton.disabled = loading;\r\n\t\t\t\tbtnContainer.appendChild(uploadButton);\r\n\t\t\t} else {\r\n\t\t\t\tconst nextButton = createButton(`${i18next.t('next_step')}`, 'orange-filled-btn', nextStep);\r\n\t\t\t\tbtnContainer.appendChild(nextButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twrapper.appendChild(btnContainer);\r\n\t\tcontainer.appendChild(wrapper);\r\n\t};\r\n\r\n\tconst createButton = (text, className, onClick) => {\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.textContent = text;\r\n\t\tbutton.className = className;\r\n\t\tbutton.addEventListener('click', onClick);\r\n\t\treturn button;\r\n\t};\r\n\r\n\thandleStartRecording();\r\n\r\n\tupdateUI();\r\n\r\n\ti18next.on('languageChanged', () => {\r\n\t\tupdateUI();\r\n\t});\r\n};\r\n","import { dataURIToBlob, registerEvent, updatePersistData, uploadFileInS3Folder, userRekognitionInfo } from '../utils/functions';\r\nimport '../assets/css/step1.css';\r\nimport { showTab } from './examPrechecks';\r\nimport i18next from 'i18next';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nexport const IdentityVerificationScreenOne = async (tabContent) => {\r\n\tlet state = {\r\n\t\tisUploading: false,\r\n\t\tcaptureMode: 'take',\r\n\t\timageSrc: null,\r\n\t\tvideoConstraints: {\r\n\t\t\tvideo: localStorage.getItem('deviceId') ? { deviceId: { exact: localStorage.getItem('deviceId') } } : true,\r\n\t\t\twidth: 350,\r\n\t\t\theight: 280,\r\n\t\t\tfacingMode: 'user',\r\n\t\t},\r\n\t\tmsg: {\r\n\t\t\ttype: 'checking',\r\n\t\t\ttext: 'center_your_face',\r\n\t\t},\r\n\t};\r\n\r\n\tlet webcamStream = null;\r\n\tlet videoElement = null;\r\n\r\n\tconst startWebcam = async () => {\r\n\t\ttry {\r\n\t\t\tvideoElement = document.createElement('video');\r\n\t\t\tvideoElement.width = state.videoConstraints.width;\r\n\t\t\tvideoElement.height = state.videoConstraints.height;\r\n\t\t\tvideoElement.autoplay = true;\r\n\t\t\twebcamStream = await navigator.mediaDevices.getUserMedia(state.videoConstraints);\r\n\t\t\tvideoElement.srcObject = webcamStream;\r\n\t\t\tif (tabContent) {\r\n\t\t\t\tconst ivsoWebcamContainer = tabContent.querySelector('.ivso-webcam-container');\r\n\t\t\t\tif (ivsoWebcamContainer) {\r\n\t\t\t\t\tivsoWebcamContainer.innerHTML = '';\r\n\t\t\t\t\tivsoWebcamContainer.appendChild(videoElement);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Error accessing webcam:', err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst capturePhoto = async () => {\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tcanvas.width = videoElement.videoWidth;\r\n\t\tcanvas.height = videoElement.videoHeight;\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);\r\n\r\n\t\tconst imageSrc = canvas.toDataURL('image/jpeg');\r\n\t\tstate = {\r\n\t\t\t...state,\r\n\t\t\tcaptureMode: 'retake',\r\n\t\t\timageSrc: imageSrc,\r\n\t\t\tmsg: {\r\n\t\t\t\ttype: 'checking',\r\n\t\t\t\ttext: 'please_wait_we_processing',\r\n\t\t\t},\r\n\t\t};\r\n\t\trenderUI();\r\n\t\thandleImageProcessing();\r\n\t};\r\n\r\n\tconst dataURLtoFile = async (dataurl, filename = 'screenshot.png') => {\r\n\t\tconst res = await fetch(dataurl);\r\n\t\tconst blob = await res.blob();\r\n\t\treturn new File([blob], filename, { type: blob.type });\r\n\t};\r\n\r\n\tconst handleImageProcessing = async () => {\r\n\t\tif (state.imageSrc) {\r\n\t\t\tconst img = new Image();\r\n\t\t\tconst data = new FormData();\r\n\t\t\tconst imageUrl = await dataURLtoFile(state.imageSrc);\r\n\t\t\tdata.append('image', imageUrl);\r\n\t\t\tconst resp = await userRekognitionInfo(data);\r\n\t\t\tconst predictions = resp?.data?.face?.FaceDetails;\r\n\r\n\t\t\timg.onload = async function () {\r\n\t\t\t\tif (predictions?.length && predictions?.length === 1) {\r\n\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\timageSrc: state.imageSrc,\r\n\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\ttype: 'successful',\r\n\t\t\t\t\t\t\ttext: 'detected_face_successfully',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'detected_face_successfully' });\r\n\t\t\t\t} else if (predictions?.length > 1) {\r\n\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\timageSrc: null,\r\n\t\t\t\t\t\tcaptureMode: 'take',\r\n\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\t\t\t\ttext: 'multiple_face_detected',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstartWebcam();\r\n\t\t\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'multiple_face_detected' });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\timageSrc: null,\r\n\t\t\t\t\t\tcaptureMode: 'take',\r\n\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\t\t\t\ttext: 'face_not_detected',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstartWebcam();\r\n\t\t\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'face_not_detected' });\r\n\t\t\t\t}\r\n\t\t\t\trenderUI();\r\n\t\t\t};\r\n\t\t\timg.src = state.imageSrc;\r\n\t\t}\r\n\t};\r\n\r\n\tconst nextStep = () => {\r\n\t\tif(webcamStream){\r\n\t\t\twebcamStream?.getTracks()?.forEach((track) => track.stop());\r\n\t\t}\r\n\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'candidate_photo_captured_successfully' });\r\n\t\tupdatePersistData('preChecksSteps',{ userPhoto:true });\r\n\t\tshowTab('IdentityVerificationScreenTwo');\r\n\t};\r\n\r\n\tconst uploadUserCapturedPhoto = async () => {\r\n\t\ttry {\r\n\t\t\tstate.isUploading = true; \r\n\t\t\trenderUI();\r\n\t\t\tstate = {\r\n\t\t\t\t...state,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\ttype: 'loading',\r\n\t\t\t\t\ttext: 'file_is_being_uploaded',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tlet resp = await uploadFileInS3Folder({\r\n\t\t\t\tfolderName: 'candidate_images',\r\n\t\t\t\tfile: dataURIToBlob(state.imageSrc),\r\n\t\t\t});\r\n\t\t\tif (resp?.data?.file_url) {\r\n\t\t\t\tupdatePersistData('session', { candidatePhoto: resp.data.file_url });\r\n\t\t\t\tstate = {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcaptureMode: 'uploaded_photo',\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'waiting',\r\n\t\t\t\t\t\ttext: 'candidate_photo_uploaded_successfully',\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'candidate_photo_uploaded_successfully' });\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tstate = {\r\n\t\t\t\t...state,\r\n\t\t\t\tcaptureMode: 'take',\r\n\t\t\t\timageSrc: null,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\ttype: 'checking',\r\n\t\t\t\t\ttext: 'something_went_wrong_please_upload_again',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tregisterEvent({ eventType: 'error', notify: false, eventName: 'internet_connection_unstable' });\r\n\t\t}finally{\r\n\t\t\tstate.isUploading = true; \r\n\t\t}\r\n\t\trenderUI();\r\n\t};\r\n\r\n\tconst renderUI = () => {\r\n\t\tlet ivsoContainer = tabContent.querySelector('.ivso-container');\r\n\t\t\r\n\t\tif (!ivsoContainer) {\r\n\t\t\tivsoContainer = document.createElement('div');\r\n\t\t\tivsoContainer.className = 'ivso-container';\r\n\t\t\ttabContent.appendChild(ivsoContainer);\r\n\t\t} else {\r\n\t\t\tivsoContainer.innerHTML = '';\r\n\t\t}\r\n\t\r\n\t\tconst ivsoWrapper = document.createElement('div');\r\n\t\tivsoWrapper.className = 'ivso-wrapper';\r\n\t\r\n\t\tconst ivsHeaderTitle = document.createElement('div');\r\n\t\tivsHeaderTitle.className = 'ivso-header-title';\r\n\t\tivsHeaderTitle.textContent = i18next.t('webcam_diagnostics');\r\n\t\tconst ivssubHeading = document.createElement('div');\r\n\t\tivssubHeading.className = 'first-header-msg';\r\n\t\tivssubHeading.textContent = i18next.t('your_face_must_visible_on_screen');\r\n\t\tconst stepsContainer = document.createElement('div');\r\n\r\n\t\trenderIdentityVerificationSteps(stepsContainer, 1);\r\n\t\r\n\t\tconst ivsMsg = document.createElement('div');\r\n\t\tivsMsg.className = 'ivso-msg';\r\n\t\tivsMsg.textContent = i18next.t(state.msg.text);\r\n\t\r\n\t\tconst ivsoWebcamContainer = document.createElement('div');\r\n\t\tivsoWebcamContainer.className = 'ivso-webcam-container';\r\n\t\r\n\t\tconst ivsoHeaderImgContainer = document.createElement('div');\r\n\t\tivsoHeaderImgContainer.className = 'ivso-header-img-container';\r\n\t\r\n\t\tconst ivsoBtnContainer = document.createElement('div');\r\n\t\tivsoBtnContainer.className = 'ivso-btn-container';\r\n\t\r\n\t\tconst ivsoQueryMsg = document.createElement('div');\r\n\t\tivsoQueryMsg.className = 'ivso-query-msg';\r\n\t\r\n\t\tif (state.imageSrc) {\r\n\t\t\tconst img = document.createElement('img');\r\n\t\t\timg.src = state.imageSrc;\r\n\t\t\timg.className = 'ivso-captured-img';\r\n\t\t\tivsoHeaderImgContainer.appendChild(img);\r\n\t\t} else {\r\n\t\t\t// Check webcam stream\r\n\t\t\tif (!webcamStream) {\r\n\t\t\t\tstartWebcam();\r\n\t\t\t}\r\n\t\t\tivsoWebcamContainer.appendChild(videoElement);\r\n\t\r\n\t\t\tconst gridImg = document.createElement('img');\r\n\t\t\tgridImg.src = `${ASSET_URL}/screen-centered-grid.svg`;\r\n\t\t\tgridImg.className = 'ivso-screen-grid';\r\n\t\t\tivsoHeaderImgContainer.appendChild(gridImg);\r\n\t\t}\r\n\t\r\n\t\t// Handle buttons\r\n\t\tif (state.captureMode !== 'take') {\r\n\t\t\tconst retakePhotoBtn = document.createElement('button');\r\n\t\t\tretakePhotoBtn.textContent = i18next.t('retake_photo');\r\n\t\t\tretakePhotoBtn.className = 'orange-hollow-btn';\r\n\t\t\tretakePhotoBtn.addEventListener('click', () => {\r\n\t\t\t\tstate = {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\timageSrc: null,\r\n\t\t\t\t\tcaptureMode: 'take',\r\n\t\t\t\t\tvideoConstraints: {\r\n\t\t\t\t\t\t...state.videoConstraints,\r\n\t\t\t\t\t\tdeviceId: localStorage.getItem('deviceId') || undefined,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'checking',\r\n\t\t\t\t\t\ttext: 'center_your_face',\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\trenderUI();\r\n\t\t\t\tstartWebcam();\r\n\t\t\t});\r\n\t\t\tivsoBtnContainer.appendChild(retakePhotoBtn);\r\n\t\t}\r\n\t\r\n\t\tif (state.captureMode === 'uploaded_photo') {\r\n\t\t\tconst nextBtn = document.createElement('button');\r\n\t\t\tnextBtn.textContent = i18next.t('next_step');\r\n\t\t\tnextBtn.className = 'orange-filled-btn';\r\n\t\t\tnextBtn.addEventListener('click', nextStep);\r\n\t\t\tivsoBtnContainer.appendChild(nextBtn);\r\n\t\t}\r\n\t\r\n\t\tif (state.captureMode === 'take') {\r\n\t\t\tconst takePhotoBtn = document.createElement('button');\r\n\t\t\ttakePhotoBtn.textContent = i18next.t('take_photo');\r\n\t\t\ttakePhotoBtn.className = 'orange-filled-btn';\r\n\t\t\ttakePhotoBtn.addEventListener('click', capturePhoto);\r\n\t\t\tivsoBtnContainer.appendChild(takePhotoBtn);\r\n\t\t}\r\n\t\r\n\t\tif (state.captureMode === 'retake') {\r\n\t\t\tconst uploadPhotoBtn = document.createElement('button');\r\n\t\t\tuploadPhotoBtn.textContent = i18next.t('upload');\r\n\t\t\tuploadPhotoBtn.className = 'orange-filled-btn';\r\n\t\t\tuploadPhotoBtn.disabled = state.isUploading; \r\n\t\t\tuploadPhotoBtn.addEventListener('click', uploadUserCapturedPhoto);\r\n\t\t\tivsoBtnContainer.appendChild(uploadPhotoBtn);\r\n\t\t}\r\n\t\r\n\t\t// Append elements to wrapper\r\n\t\tivsoWrapper.appendChild(ivsHeaderTitle);\r\n\t\tivsoWrapper.appendChild(ivssubHeading);\r\n\t\tivsoWrapper.appendChild(stepsContainer);\r\n\t\tivsoWrapper.appendChild(ivsoHeaderImgContainer);\r\n\t\tivsoWrapper.appendChild(ivsoWebcamContainer);\r\n\t\tivsoWrapper.appendChild(ivsMsg);\r\n\t\tivsoWrapper.appendChild(ivsoBtnContainer);\r\n\t\tif (state.captureMode === 'retake') {\r\n\t\t\tivsoWrapper.appendChild(ivsoQueryMsg);\r\n\t\t}\r\n\t\r\n\t\t// Append the wrapper to the container\r\n\t\tivsoContainer.appendChild(ivsoWrapper);\r\n\t};\r\n\r\n\trenderUI();\r\n\r\n\ti18next.on('languageChanged', () => {\r\n\t\tstate.msg.text = i18next.t(state.msg.text);\r\n\t\trenderUI();\r\n\t});\r\n};\r\n","import { getDateTime, getSecureFeatures, registerEvent, updatePersistData } from '../utils/functions';\r\nimport { showTab } from './examPrechecks';\r\nimport '../assets/css/step3.css';\r\nimport i18next from 'i18next';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\n\r\nexport const IdentityVerificationScreenThree = async (tabContent) => {\r\n\tlet canvasRef;\r\n\tlet audioStream= null;\r\n\tlet audioContext;\r\n\tlet analyserNode;\r\n\tlet disabledBtn = false;\r\n\tlet msg = {\r\n\t\ttype: '',\r\n\t\ttext: 'be_loud_clear'\r\n\t};\r\n\tconst schoolTheme = JSON.parse(localStorage.getItem('schoolTheme'));\r\n\r\n\tlet animationFrameId = null;\r\n\r\n\tconst drawAudioSpikes = async () => {\r\n\t\ttry {\r\n\t\t\tconst audioPermission = await navigator.permissions.query({ name: 'microphone' });\r\n\t\t\tif (audioPermission.state === 'granted') {\r\n\t\t\t\taudioStream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\r\n\r\n\t\t\t\taudioContext = new AudioContext();\r\n\t\t\t\tanalyserNode = audioContext.createAnalyser();\r\n\t\t\t\tanalyserNode.fftSize = 2048;\r\n\t\t\t\tconst mediaStreamSource = audioContext.createMediaStreamSource(audioStream);\r\n\t\t\t\tmediaStreamSource.connect(analyserNode);\r\n\r\n\t\t\t\tconst canvas = canvasRef;\r\n\t\t\t\tconst canvasCtx = canvas?.getContext('2d');\r\n\r\n\t\t\t\tconst drawOnCanvas = () => {\r\n\t\t\t\t\tconst bufferLength = analyserNode.frequencyBinCount;\r\n\t\t\t\t\tconst frequencyData = new Uint8Array(bufferLength);\r\n\t\t\t\t\tanalyserNode.getByteFrequencyData(frequencyData);\r\n\r\n\t\t\t\t\tcanvasCtx?.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\tcanvasCtx.fillStyle = schoolTheme?.theming || '#FF961B';\r\n\t\t\t\t\tconst barWidth = (canvas.width / bufferLength) * 8.5;\r\n\t\t\t\t\tlet barHeight;\r\n\t\t\t\t\tlet x = 0;\r\n\r\n\t\t\t\t\tfor (let i = 0; i < bufferLength; i++) {\r\n\t\t\t\t\t\tbarHeight = frequencyData[i] / 2;\r\n\t\t\t\t\t\tcanvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\r\n\t\t\t\t\t\tx += barWidth + 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimationFrameId = requestAnimationFrame(drawOnCanvas);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tdrawOnCanvas();\r\n\t\t\t} else {\r\n\t\t\t\tthrow audioPermission.state;\r\n\t\t\t}\r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('no_mircophone_detected:', error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst startRecording = () => {\r\n\t\tif (!animationFrameId) {\r\n\t\t\tdrawAudioSpikes();\r\n\t\t}\r\n\r\n\t\tmsg.type = ''; \r\n\t\tmsg.text = 'recording'; \r\n\t\tdisabledBtn = true;\r\n\t\tupdateUI();\r\n\r\n\t\tlet counter = 0;\r\n\t\tconst timer = setInterval(() => {\r\n\t\t\ttry {\r\n\t\t\t\tcounter += 1;\r\n\t\t\t\tconst getSecureFeature = getSecureFeatures();\r\n\t\t\t\tconst profileSettings = getSecureFeature?.settings || [];\r\n\r\n\t\t\t\tconst bufferLength = analyserNode.frequencyBinCount;\r\n\t\t\t\tconst frequencyData = new Uint8Array(bufferLength);\r\n\t\t\t\tanalyserNode.getByteFrequencyData(frequencyData);\r\n\r\n\t\t\t\tlet sumSquares = 0;\r\n\t\t\t\tfor (let i = 0; i < bufferLength; i++) {\r\n\t\t\t\t\tsumSquares += (frequencyData[i] / 255) ** 2;\r\n\t\t\t\t}\r\n\t\t\t\tconst rms = Math.sqrt(sumSquares / bufferLength);\r\n\t\t\t\tconst requiredLevel = profileSettings?.audio_level || 0.15;\r\n\t\t\t\tif (rms > requiredLevel) {\r\n\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\tdisabledBtn = false;\r\n\t\t\t\t\tmsg.type = 'successful';\r\n\t\t\t\t\tmsg.text = 'audio_test_passed'; \r\n\t\t\t\t\tupdateUI();\r\n\t\t\t\t} else if (counter >= 15) {\r\n\t\t\t\t\tthrow 'error';\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\tdisabledBtn = false;\r\n\t\t\t\tmsg.type = 'unsuccessful';\r\n\t\t\t\tmsg.text = 'audio_test_failed';\r\n\t\t\t\tupdateUI();\r\n\t\t\t}\r\n\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\tconst stopRecording = () => {\r\n\t\tcancelAnimationFrame(animationFrameId);\r\n\t\tanimationFrameId = null;\r\n\t\tif (audioStream) {\r\n\t\t\taudioStream.getTracks().forEach(track => {\r\n\t\t\t\ttrack.stop();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst nextStep = async () => {\r\n\t\tif(audioStream){\r\n\t\t\taudioStream.getAudioTracks().forEach(track => track.stop());\r\n\t\t}\r\n\t\tupdatePersistData('preChecksSteps',{ audioDetection:true });\r\n\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'audio_check_completed', eventValue: getDateTime()});\r\n\t\tshowTab('IdentityVerificationScreenFour');\r\n\t};\r\n\r\n\tconst prevStep = () => {\r\n\t\tupdatePersistData('preChecksSteps',{ audioDetection:false });\r\n\t\tshowTab('IdentityVerificationScreenTwo');\r\n\t};\r\n\r\n\tconst updateUI = () => {\r\n\t\tlet container = tabContent.querySelector('.ivst-container');\r\n\t\tif (!container) {\r\n\t\t\tcontainer = document.createElement('div');\r\n\t\t\tcontainer.className = 'ivst-container';\r\n\t\t\ttabContent.appendChild(container);\r\n\t\t}\r\n\r\n\t\tconst stepsContainer = document.createElement('div');\r\n\t\trenderIdentityVerificationSteps(stepsContainer, 3);\r\n\t\tlet wrapper = container.querySelector('.ivst-wrapper');\r\n\t\t\r\n\t\tif (!wrapper) {\r\n\t\t\twrapper = document.createElement('div');\r\n\t\t\twrapper.className = 'ivst-wrapper';\r\n    \r\n\t\t\tconst headerTitle = document.createElement('div');\r\n\t\t\theaderTitle.className = 'ivst-header-title';\r\n\t\t\twrapper.appendChild(headerTitle);\r\n    \r\n\t\t\twrapper.appendChild(stepsContainer);\r\n\r\n\t\t\tconst message = document.createElement('div');\r\n\t\t\tmessage.className = 'ivst-msg';\r\n\t\t\t\r\n    \r\n\t\t\tconst audioText = document.createElement('div');\r\n\t\t\taudioText.className = 'ivst-audio-text';\r\n\t\t\taudioText.style.textAlign = 'center';\r\n\t\t\twrapper.appendChild(audioText);\r\n    \r\n\t\t\tcanvasRef = document.createElement('canvas');\r\n\t\t\tcanvasRef.width = 800;\r\n\t\t\tcanvasRef.height = 200;\r\n    \r\n\t\t\twrapper.appendChild(canvasRef);\r\n\t\t\twrapper.appendChild(message);\r\n\t\t\tcontainer.appendChild(wrapper);\r\n\t\t}\r\n    \r\n\t\tconst headerTitle = wrapper.querySelector('.ivst-header-title');\r\n\t\tif (headerTitle) {\r\n\t\t\theaderTitle.textContent = i18next.t('audio_check');\r\n\t\t}\r\n    \r\n\t\tconst audioText = wrapper.querySelector('.ivst-audio-text');\r\n\t\tif (audioText) {\r\n\t\t\taudioText.textContent = i18next.t('no_point_in_running_leave_in_time');\r\n\t\t}\r\n    \r\n\t\tconst messageElement = wrapper.querySelector('.ivst-msg');\r\n\t\tif (messageElement) {\r\n\t\t\tmessageElement.textContent = i18next.t(msg.text);\r\n\t\t\tif (msg.type === 'unsuccessful') {\r\n\t\t\t\tmessageElement.style.color = '#E95E5E';\r\n\t\t\t} else {\r\n\t\t\t\tmessageElement.style.color = '';\r\n\t\t\t}\r\n\t\t}\r\n    \r\n\t\tlet btnContainer = wrapper.querySelector('.ivst-btn-container');\r\n\t\tif (!btnContainer) {\r\n\t\t\tbtnContainer = document.createElement('div');\r\n\t\t\tbtnContainer.className = 'ivst-btn-container';\r\n\t\t\twrapper.appendChild(btnContainer);\r\n\t\t} else {\r\n\t\t\tbtnContainer.innerHTML = '';\r\n\t\t}\r\n    \r\n\t\tif (msg.type === '') {\r\n\t\t\tconst prevButton = createButton(`${i18next.t('previous_step')}`, 'orange-hollow-btn', prevStep);\r\n\t\t\tprevButton.disabled = disabledBtn;\r\n\t\t\tconst recordButton = createButton(`${i18next.t('record_audio')}`, 'orange-filled-btn', startRecording);\r\n\t\t\trecordButton.disabled = disabledBtn;\r\n\t\t\tbtnContainer.appendChild(prevButton);\r\n\t\t\tbtnContainer.appendChild(recordButton);\r\n\t\t} else if (msg.type === 'unsuccessful') {\r\n\t\t\tconst prevButton = createButton(`${i18next.t('previous_step')}`, 'orange-hollow-btn', prevStep);\r\n\t\t\tconst reRecordButton = createButton(`${i18next.t('re_record_audio')}`, 'orange-filled-btn', startRecording);\r\n\t\t\tbtnContainer.appendChild(prevButton);\r\n\t\t\tbtnContainer.appendChild(reRecordButton);\r\n\t\t} else {\r\n\t\t\tconst reRecordButton = createButton(`${i18next.t('re_record_audio')}`, 'orange-hollow-btn', startRecording);\r\n\t\t\tconst doneButton = createButton(`${i18next.t('done')}`, 'orange-filled-btn', nextStep);\r\n\t\t\tbtnContainer.appendChild(reRecordButton);\r\n\t\t\tbtnContainer.appendChild(doneButton);\r\n\t\t}\r\n\t};    \r\n\r\n\tconst createButton = (text, className, onClick) => {\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.textContent = text;\r\n\t\tbutton.className = className;\r\n\t\tbutton.addEventListener('click', onClick);\r\n\t\treturn button;\r\n\t};\r\n\r\n\t// renderIdentityVerificationSteps(tabContent.querySelector('.ivst-container'), 3);\r\n\tdrawAudioSpikes();\r\n\tupdateUI();\r\n\r\n\ti18next.on('languageChanged', () => {\r\n\t\tmsg.text = i18next.t(msg.text);\r\n\t\tupdateUI();\r\n\t});\r\n\r\n\tconst cleanup = () => {\r\n\t\tif (audioContext) {\r\n\t\t\taudioContext.close();\r\n\t\t}\r\n\t\tstopRecording();\r\n\t};\r\n\r\n\treturn {\r\n\t\tcleanup\r\n\t};\r\n};\r\n","import { acceptableLabels, acceptableText, dataURIToBlob, getDateTime, registerEvent, srcToData, updatePersistData, uploadFileInS3Folder, userRekognitionInfo } from '../utils/functions';\r\nimport '../assets/css/step2.css';\r\nimport { showTab } from './examPrechecks';\r\nimport i18next from 'i18next';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nexport const IdentityVerificationScreenTwo = async (tabContent) => {\r\n\tlet photo;\r\n\tlet inputFile;\r\n\tlet stream = null;\r\n\tlet disabledBtn = false;\r\n\tlet fileObj;\r\n\tlet currentState = {\r\n\t\tcaptureMode: 'take',\r\n\t\timageSrc: null,\r\n\t\tmsg: {\r\n\t\t\ttext: ''\r\n\t\t}\r\n\t};\r\n\r\n\tconst videoConstraints = {\r\n\t\twidth: 350,\r\n\t\theight: 280,\r\n\t\tfacingMode: 'user',\r\n\t\tdeviceId: localStorage.getItem('deviceId') || undefined,\r\n\t};\r\n\r\n\tconst capturePhoto = () => {\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tcanvas.width = videoConstraints.width;\r\n\t\tcanvas.height = videoConstraints.height;\r\n\t\tconst context = canvas.getContext('2d');\r\n\t\tcontext.drawImage(photo, 0, 0, canvas.width, canvas.height);\r\n\t\tconst imageSrc = canvas.toDataURL('image/png');\r\n\r\n\t\tdataURLtoFile(imageSrc).then(imageFile => {\r\n\t\t\tfileObj = imageFile;\r\n\t\t\tif (imageSrc) {\r\n\t\t\t\tcurrentState = {\r\n\t\t\t\t\t...currentState,\r\n\t\t\t\t\timageSrc: imageSrc,\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'checking',\r\n\t\t\t\t\t\ttext: 'id_being_verified'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\trenderUI();\r\n\t\t\t\tverifyImage();\r\n\t\t\t} else {\r\n\t\t\t\tcurrentState = {\r\n\t\t\t\t\t...currentState,\r\n\t\t\t\t\tcaptureMode: 'retake',\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\t\t\ttext: 'error_capturing_picture'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\trenderUI();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst dataURLtoFile = async (dataurl, filename = 'screenshot.png') => {\r\n\t\tconst res = await fetch(dataurl);\r\n\t\tconst blob = await res.blob();\r\n\t\treturn new File([blob], filename, { type: blob.type });\r\n\t};\r\n\r\n\tconst handleRestart = () => {\r\n\t\tcurrentState = {\r\n\t\t\t...currentState,\r\n\t\t\tcaptureMode: 'take',\r\n\t\t\timageSrc: null,\r\n\t\t\tmsg: {\r\n\t\t\t\ttext: ''\r\n\t\t\t}\r\n\t\t};\r\n\t\trenderUI();\r\n\t};\r\n\r\n\tconst uploadImage = async (event) => {\r\n\t\tif (event.target.files.length > 0) {\r\n\t\t\tfileObj = event.target.files[0];\r\n\t\t\tconst src = URL.createObjectURL(event.target.files[0]);\r\n\t\t\tlet imageSrc = await srcToData(src);\r\n\t\t\tif (imageSrc) {\r\n\t\t\t\tcurrentState = {\r\n\t\t\t\t\t...currentState,\r\n\t\t\t\t\timageSrc: imageSrc,\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'checking',\r\n\t\t\t\t\t\ttext: 'id_being_verified'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\trenderUI();\r\n\t\t\t\tverifyImage();\r\n\t\t\t} else {\r\n\t\t\t\tcurrentState = {\r\n\t\t\t\t\t...currentState,\r\n\t\t\t\t\tcaptureMode: 'retake',\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\t\t\ttext: 'error_with_uploading_file'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\trenderUI();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst verifyImage = async () => {\r\n\t\tif (currentState.imageSrc) {\r\n\t\t\tdisabledBtn = true;\r\n\t\t\tconst data = new FormData();\r\n\t\t\tdata.append('image', fileObj);\r\n\t\t\ttry {\r\n\t\t\t\tconst resp = await userRekognitionInfo(data);\r\n\t\t\t\tconst userImageData = resp.data;\r\n\t\t\t\tif (userImageData) {\r\n\t\t\t\t\tif (acceptableLabels(userImageData?.label, 80) && acceptableText(userImageData?.text, 59) && userImageData?.face?.FaceDetails.length > 0) {\r\n\t\t\t\t\t\tcurrentState = {\r\n\t\t\t\t\t\t\t...currentState,\r\n\t\t\t\t\t\t\tcaptureMode: 'retake',\r\n\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\ttype: 'successful',\r\n\t\t\t\t\t\t\t\ttext: 'id_successfully_verified'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tdisabledBtn = false;\r\n\t\t\t\t\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'id_successfully_verified'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurrentState = {\r\n\t\t\t\t\t\t\t...currentState,\r\n\t\t\t\t\t\t\tcaptureMode: 'retake',\r\n\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\ttype: 'unsuccessful',\r\n\t\t\t\t\t\t\t\ttext: 'id_not_verified'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tdisabledBtn = false;\r\n\t\t\t\t\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'id_not_verified'});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error verifying image:', error);\r\n\t\t\t}\r\n\t\t\trenderUI();\r\n\t\t}\r\n\t};\r\n\r\n\tconst nextStep = async () => {\r\n\t\tif(stream?.getTracks()){\r\n\t\t\tstream.getTracks().forEach(track => track.stop());\r\n\t\t}\r\n\t\tupdatePersistData('preChecksSteps',{ identityCardPhoto:true });\r\n\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'identity_card_verified_successfully', eventValue: getDateTime()});\r\n\t\tshowTab('IdentityVerificationScreenThree');\r\n\t};\r\n\r\n\tconst uploadCandidateIdentityCard = async () => {\r\n\t\ttry {\r\n\t\t\tcurrentState = {\r\n\t\t\t\t...currentState,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\ttype: 'loading',\r\n\t\t\t\t\ttext: 'file_is_being_uploaded'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\trenderUI();\r\n\r\n\t\t\tlet resp = await uploadFileInS3Folder({\r\n\t\t\t\tfolderName: 'candidate_ids/',\r\n\t\t\t\tfile: dataURIToBlob(currentState.imageSrc)\r\n\t\t\t});\r\n\r\n\t\t\tif (resp?.data?.file_url) {\r\n\t\t\t\tupdatePersistData('session',{ identityCard: resp.data.file_url });\r\n\t\t\t\tcurrentState = {\r\n\t\t\t\t\t...currentState,\r\n\t\t\t\t\tcaptureMode: 'uploaded_photo',\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'waiting',\r\n\t\t\t\t\t\ttext: 'candidate_id_is_uploaded_successfully'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'identity_card_uploaded_successfully'});\r\n\t\t\t} else {\r\n\t\t\t\tthrow 'something_went_wrong_please_upload_again';\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tcurrentState = {\r\n\t\t\t\t...currentState,\r\n\t\t\t\tcaptureMode: 'take',\r\n\t\t\t\timageSrc: null,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\ttext: 'something_went_wrong_please_upload_again'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'internet_connection_unstable'});\r\n\t\t}\r\n\t\trenderUI();\r\n\t};\r\n\r\n\tconst prevStep = () => {\r\n\t\tupdatePersistData('preChecksSteps',{ identityCardPhoto:false });\r\n\t\tshowTab('IdentityVerificationScreenOne');\r\n\t};\r\n\r\n\tconst renderUI = async () => {\r\n\t\tlet container = tabContent.querySelector('.ivso-container');\r\n\t\tif (!container) {\r\n\t\t\tcontainer = document.createElement('div');\r\n\t\t\tcontainer.className = 'ivso-container';\r\n\t\t\ttabContent.appendChild(container);\r\n\t\t}\r\n\t\tcontainer.innerHTML = '';\r\n\r\n\t\tlet stepsContainer = document.createElement('div');\r\n\r\n\t\trenderIdentityVerificationSteps(stepsContainer, 2);\r\n\r\n\t\tconst wrapper = document.createElement('div');\r\n\t\twrapper.className = 'ivst-wrapper';\r\n\r\n\t\tconst headerTitle = document.createElement('div');\r\n\t\theaderTitle.className = 'ivst-header-title';\r\n\t\theaderTitle.textContent = i18next.t('identity_validation');\r\n\r\n\t\tconst message = document.createElement('div');\r\n\t\tmessage.className = 'ivst-msg';\r\n\t\tmessage.textContent = i18next.t('initial_system_check_passed_get_ready_for_identity_validation');\r\n\r\n\t\tconst headerImgContainer = document.createElement('div');\r\n\t\theaderImgContainer.className = 'ivst-header-img-container';\r\n\r\n\t\tif (currentState.imageSrc) {\r\n\t\t\tconst img = document.createElement('img');\r\n\t\t\timg.src = currentState.imageSrc;\r\n\t\t\timg.className = 'ivst-header-img';\r\n\t\t\timg.alt = 'captured-image';\r\n\t\t\theaderImgContainer.appendChild(img);\r\n\r\n\t\t\tconst resultImg = document.createElement('img');\r\n\t\t\tresultImg.src = `${ASSET_URL}/checkmark-green.svg`;\r\n\t\t\tresultImg.className = 'ivst-header-img-result';\r\n\t\t\tresultImg.alt = 'tick-mark-green-bg';\r\n\t\t\theaderImgContainer.appendChild(resultImg);\r\n\t\t} else {\r\n\t\t\tphoto = document.createElement('video');\r\n\t\t\tphoto.width = videoConstraints.width;\r\n\t\t\tphoto.height = videoConstraints.height;\r\n\t\t\tphoto.autoplay = true;\r\n\t\t\theaderImgContainer.appendChild(photo);\r\n\r\n\t\t\tstream = await navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: false });\r\n\t\t\tif(stream !== null) {\r\n\t\t\t\tphoto.srcObject = stream;\r\n\t\t\t}\r\n\t\t\tconst gridImg = document.createElement('img');\r\n\t\t\tgridImg.src = `${ASSET_URL}/screen-centered-grid.svg`;\r\n\t\t\tgridImg.className = 'ivst-screen-grid';\r\n\t\t\tgridImg.alt = 'screen-centered-grid';\r\n\t\t\theaderImgContainer.appendChild(gridImg);\r\n\t\t}\r\n\r\n\t\twrapper.appendChild(headerTitle);\r\n\t\twrapper.appendChild(message);\r\n\t\twrapper.appendChild(stepsContainer);\r\n\t\twrapper.appendChild(headerImgContainer);\r\n\r\n\t\tif (currentState.msg.text) {\r\n\t\t\tconst queryMsg = document.createElement('div');\r\n\t\t\tqueryMsg.className = 'ivst-query-msg';\r\n\t\t\tqueryMsg.textContent = i18next.t(currentState.msg.text);\r\n\t\t\tif (currentState.msg.type === 'unsuccessful') {\r\n\t\t\t\tqueryMsg.style.color = '#E95E5E';\r\n\t\t\t}\r\n\t\t\twrapper.appendChild(queryMsg);\r\n\t\t}\r\n\r\n\t\tif (!currentState.imageSrc) {\r\n\t\t\tconst uploadMsg = document.createElement('div');\r\n\t\t\tuploadMsg.className = 'ivst-query-msg';\r\n\t\t\tuploadMsg.innerHTML = `${i18next.t('please_take_picture_or')} <span class=\"ivst-file\">${i18next.t('upload_your_identity_document')}</span>.`;\r\n\t\t\tuploadMsg.querySelector('.ivst-file').addEventListener('click', () => inputFile.click());\r\n\t\t\twrapper.appendChild(uploadMsg);\r\n\t\t}\r\n\r\n\t\tconst btnContainer = document.createElement('div');\r\n\t\tbtnContainer.className = 'ivst-btn-container';\r\n\r\n\t\tif (currentState.captureMode === 'take') {\r\n\t\t\tconst prevBtn = createButton(`${i18next.t('previous_step')}`, 'orange-hollow-btn', prevStep);\r\n\t\t\tconst takePhotoBtn = createButton(`${i18next.t('take_id_photo')}`, 'orange-filled-btn', capturePhoto);\r\n\t\t\ttakePhotoBtn.disabled = disabledBtn || !!currentState.imageSrc;\r\n\t\t\tbtnContainer.appendChild(prevBtn);\r\n\t\t\tbtnContainer.appendChild(takePhotoBtn);\r\n\t\t} else {\r\n\t\t\tconst retakeBtn = createButton(`${i18next.t('retake_id_photo')}`, 'orange-filled-btn', handleRestart);\r\n\t\t\tbtnContainer.appendChild(retakeBtn);\r\n\r\n\t\t\tif (currentState.captureMode !== 'uploaded_photo') {\r\n\t\t\t\tconst uploadBtn = createButton(`${i18next.t('upload')}`, 'orange-filled-btn', uploadCandidateIdentityCard);\r\n\t\t\t\tuploadBtn.disabled = currentState.msg.type === 'loading';\r\n\t\t\t\tbtnContainer.appendChild(uploadBtn);\r\n\t\t\t} else {\r\n\t\t\t\tconst nextBtn = createButton(`${i18next.t('next_step')}`, 'orange-filled-btn', nextStep);\r\n\t\t\t\tbtnContainer.appendChild(nextBtn);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twrapper.appendChild(btnContainer);\r\n\r\n\t\tcontainer.appendChild(wrapper);\r\n\r\n\t\tinputFile = document.createElement('input');\r\n\t\tinputFile.type = 'file';\r\n\t\tinputFile.name = 'idCard';\r\n\t\tinputFile.accept = 'image/*';\r\n\t\tinputFile.hidden = true;\r\n\t\tinputFile.addEventListener('change', uploadImage);\r\n\t\tcontainer.appendChild(inputFile);\r\n\t};\r\n\r\n\tconst createButton = (text, className, onClick) => {\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.className = className;\r\n\t\tbutton.textContent = text;\r\n\t\tbutton.addEventListener('click', onClick);\r\n\t\treturn button;\r\n\t};\r\n\r\n\trenderUI();\r\n\r\n\ti18next.on('languageChanged', () => {\r\n\t\tcurrentState.msg.text = i18next.t(currentState.msg.text);\r\n\t\trenderUI();\r\n\t});\r\n};\r\n","import i18next from 'i18next';\r\n\r\nexport const LanguageDropdown = (languages) => {\r\n\tconst dropdown = document.createElement('div');\r\n\tdropdown.className = 'dropdown';\r\n\r\n\tconst select = document.createElement('div');\r\n\tselect.className = 'select';\r\n\r\n\tconst selectedLanguage = document.createElement('div');\r\n\tselectedLanguage.textContent = 'Select Language';\r\n\tselect.appendChild(selectedLanguage);\r\n\r\n\tconst dropdownContent = document.createElement('div');\r\n\tdropdownContent.className = 'dropdown-content';\r\n\r\n\tlanguages.forEach((language) => {\r\n\t\tconst option = document.createElement('div');\r\n\t\toption.className = 'option';\r\n\t\toption.textContent = language.name;\r\n\r\n\t\toption.addEventListener('click', () => {\r\n\t\t\tselectedLanguage.textContent = language.name;\r\n\t\t\tdropdownContent.classList.remove('active');\r\n\t\t\tsetLanguage(language.keyword); // Change language\r\n\t\t});\r\n\r\n\t\tdropdownContent.appendChild(option);\r\n\t});\r\n\r\n\tselect.addEventListener('click', () => {\r\n\t\tdropdownContent.classList.toggle('active');\r\n\t});\r\n\r\n\tdropdown.appendChild(select);\r\n\tdropdown.appendChild(dropdownContent);\r\n\r\n\treturn dropdown;\r\n};\r\n\r\n// Function to set the language using i18next\r\nexport const setLanguage = (lang) => {\r\n\ti18next.changeLanguage(lang, (err) => {\r\n\t\tif (err) return console.error(err);\r\n\t\tupdateTranslations();\r\n\t});\r\n};\r\n\r\n// Function to update translations in the document\r\nexport const updateTranslations = () => {\r\n\tdocument.querySelectorAll('[data-i18n]').forEach((element) => {\r\n\t\tconst key = element.getAttribute('data-i18n');\r\n\t\telement.textContent = i18next.t(key);\r\n\t});\r\n};","\r\nimport Peer from 'peerjs';\r\nimport socket from '../utils/socket';\r\nimport '../assets/css/mobile-proctoring.css';\r\nimport { renderIdentityVerificationSteps } from './IdentitySteps';\r\nimport i18next, { t } from 'i18next';\r\nimport QRCode from 'qrcode';\r\nimport { getAuthenticationToken, getDateTime, registerEvent, showToast, updatePersistData } from '../utils/functions';\r\nimport { showTab } from './examPrechecks';\r\nimport { v4 } from 'uuid';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nwindow.mobileStream = null;\r\nexport const MobileProctoring = async (tabContent) => {\r\n\tlet mobileSteps = ''; \r\n\tlet disabledNextBtn = false; \r\n\tlet checkedVideo = false;\r\n\tconst remoteVideoRef = document.createElement('video');\r\n\tconst currentUserVideoRef = document.createElement('video');\r\n\tlet peerInstance = null;\r\n  \r\n\tconst socketGroupIds = JSON.parse(localStorage.getItem('socketGroupId'));\r\n\r\n\tconst initSocketConnection = () => {\r\n\t\tif (!socket) {\r\n\t\t\tconsole.error('Socket not initialized');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst sendResetSession = () => {\r\n\t\t\tif (socket.readyState === WebSocket.OPEN) {\r\n\t\t\t\tsocket.send(JSON.stringify({ event: 'resetSession' }));\r\n\t\t\t\tmobileSteps = '';\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn('Socket is not open, cannot send resetSession');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (!remoteVideoRef.srcObject?.getTracks()?.length) {\r\n\t\t\tsendResetSession();\r\n\t\t}\r\n\r\n\t\tsocket.onopen = () => {\r\n\t\t\tif (!remoteVideoRef.srcObject?.getTracks()?.length) {\r\n\t\t\t\tsendResetSession();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tsocket.onmessage = (event) => {\r\n\t\t\tconst eventData = JSON.parse(event.data);\r\n\r\n\t\t\tswitch (eventData?.message?.event || eventData?.event) {\r\n\t\t\t\tcase 'mobile_connection':\r\n\t\t\t\t\tconsole.log('mobile_connection', eventData.message);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mobilePreChecksCompleted':\r\n\t\t\t\t\tmobileSteps = 'precheckCompleted';\r\n\t\t\t\t\tsocket?.send(JSON.stringify({ event: 'requestMobileBroadcast' }));\r\n\t\t\t\t\tdisabledNextBtn = true;\r\n\t\t\t\t\trenderUI();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'MobileRecordingStarted':\r\n\t\t\t\t\tconsole.log('MobileRecordingStarted', eventData?.message?.message);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mobile-broadcast': {\r\n\t\t\t\t\trenderUI();\r\n\t\t\t\t\tconst getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n\t\t\t\t\tgetUserMedia({ video: true, audio: false }, (mediaStream) => {\r\n\t\t\t\t\t\twindow.mobileStream = mediaStream;\r\n\r\n\t\t\t\t\t\tif (peerInstance) { \r\n\t\t\t\t\t\t\tconst call = peerInstance.call(eventData?.message?.message, mediaStream);\r\n\t\t\t\t\t\t\tlet remoteVideo = document.getElementById('remote-mobile-video-container');\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tcall?.on('stream', (remoteStream) => {\r\n\t\t\t\t\t\t\t\tremoteVideo.srcObject = remoteStream;\r\n\t\t\t\t\t\t\t\tremoteVideo.setAttribute('autoplay', true);\r\n\t\t\t\t\t\t\t\tremoteVideo.setAttribute('playsinline', true);\r\n\t\t\t\t\t\t\t\tdisabledNextBtn = false;\r\n\t\t\t\t\t\t\t});\r\n\t\r\n\t\t\t\t\t\t\tcall?.on('close', () => {\r\n\t\t\t\t\t\t\t\tif(remoteVideo.srcObject){\r\n\t\t\t\t\t\t\t\t\tremoteVideo.srcObject = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdisabledNextBtn = false;\r\n\t\t\t\t\t\t\t});\r\n\t\r\n\t\t\t\t\t\t\tcall?.on('error', (error) => {\r\n\t\t\t\t\t\t\t\tconsole.error('Error during call:', error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('peerInstance is not initialized');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcase 'violation':\r\n\t\t\t\t\tif (eventData?.message?.message === 'Violation') {\r\n\t\t\t\t\t\tmobileSteps = 'tokenCode';\r\n\t\t\t\t\t\tcheckedVideo = false;\r\n\t\t\t\t\t\tshowToast('error',i18next.t('mobile_phone_disconneted'));\r\n\t\t\t\t\t\tif(window.mobileStream){\r\n\t\t\t\t\t\t\twindow.mobileStream.getTracks().forEach(track => track.stop());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trenderUI();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.error(eventData?.message?.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.log('Unknown event:', eventData?.message);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tsocket.onerror = (error) => {\r\n\t\t\tconsole.error('WebSocket error:', error);\r\n\t\t};\r\n\r\n\t\tsocket.onclose = () => {\r\n\t\t\tconsole.log('WebSocket connection closed');\r\n\t\t};\r\n\t};\r\n\r\n\tconst initPeerConnection = () => {\r\n\t\ttry {\r\n\t\t\tif (peerInstance) {\r\n\t\t\t\tpeerInstance.destroy();\r\n\t\t\t}\r\n\r\n\t\t\tconst groupName = v4();\r\n\r\n\t\t\tconst peer = new Peer(groupName);\r\n\r\n\t\t\tpeerInstance = peer;\r\n\r\n\t\t\tpeer.on('open', (id) => {\r\n\t\t\t\tconsole.log('Peer connection opened with ID:', id);\r\n\t\t\t});\r\n\t\t\r\n\t\t\tpeer.on('error', (error) => {\r\n\t\t\t\tconsole.error('Peer connection error:', error);\r\n\t\t\t});\r\n\r\n\t\t\tpeer.on('close', () => {\r\n\t\t\t\tconsole.log('Peer connection closed');\r\n\t\t\t});\r\n\r\n\t\t\tpeer.on('call', (call) => {\r\n\t\t\t\tconst getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n\t\t\t\tgetUserMedia({ video: true, audio: true }, (mediaStream) => {\r\n\t\t\t\t\tcurrentUserVideoRef.srcObject = mediaStream;\r\n\t\t\t\t\tcall.answer(mediaStream);\r\n\t\t\t\t\tcall.on('stream', (remoteStream) => {\r\n\t\t\t\t\t\tremoteVideoRef.srcObject = remoteStream;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Failed to create Peer instance:', error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst nextStep = (newStep) => {\r\n\t\tmobileSteps = newStep;\r\n\t\trenderUI(); \r\n\t\tif(newStep === 'step4'){\r\n\t\t\twindow.mobileStream?.getTracks()?.forEach((track) => track.stop());\r\n\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'mobile_connection_successfull', eventValue: getDateTime() });\r\n\t\t\tupdatePersistData('preChecksSteps', { mobileConnection: true });\r\n\t\t\tshowTab('IdentityVerificationScreenFive');\r\n\t\t\tlet container = document.getElementById('mobile-proctoring');\r\n\t\t\tif(container){\r\n\t\t\t\tcontainer.innerHTML = '';\r\n\t\t\t}\r\n\t\t\tif(remoteVideoRef){\r\n\t\t\t\tremoteVideoRef.srcObject = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst prevStep = () => {\r\n\t\tmobileSteps = 'tokenCode';\r\n\t\tcheckedVideo = false;\r\n\t\tif(window.mobileStream){\r\n\t\t\twindow.mobileStream?.getTracks()?.forEach(track => track.stop());\r\n\t\t}\r\n\t\tif (socket.readyState === WebSocket.OPEN) {\r\n\t\t\tsocket?.send(JSON.stringify({ event: 'resetSession' }));\r\n\t\t}\r\n\t\trenderUI(); \r\n\t};\r\n\r\n\tfunction renderUI() {\r\n\t\tlet container = tabContent?.querySelector('.ivsf-container');\r\n\t\tif (!container) {\r\n\t\t\tcontainer = document.createElement('div');\r\n\t\t\tcontainer.className = 'ivsf-container';\r\n\t\t\ttabContent.appendChild(container);\r\n\t\t\tcontainer.id = 'mobile-proctoring';\r\n\t\t}\r\n\t\tcontainer.innerHTML = '';\r\n\r\n\t\tconst wrapper = document.createElement('div');\r\n\t\twrapper.className = 'ivsf-wrapper';\r\n\r\n\t\tconst headerTitle = document.createElement('div');\r\n\t\theaderTitle.className = 'mobile-header-title';\r\n\t\theaderTitle.innerText = t('setting_up_your_phone_camera');\r\n\t\t\r\n\t\tconst stepsContainer = document.createElement('div');\r\n\t\trenderIdentityVerificationSteps(stepsContainer, 5);\r\n\r\n\t\twrapper.appendChild(headerTitle);\r\n\t\twrapper.appendChild(stepsContainer);\r\n\r\n\t\tif (mobileSteps === '') {\r\n\t\t\tconst mobileConnectionBanner = document.createElement('div');\r\n\t\t\tmobileConnectionBanner.className = 'mobile-connection-banner';\r\n\r\n\t\t\tconst bannerImage = document.createElement('img');\r\n\t\t\tbannerImage.className = 'banner-image';\r\n\t\t\tbannerImage.src = `${ASSET_URL}/mobile-connection-banner.png`;\r\n\t\t\tmobileConnectionBanner.appendChild(bannerImage);\r\n\r\n\t\t\tconst bannerInfoBox = document.createElement('div');\r\n\t\t\tbannerInfoBox.className = 'banner-info-box';\r\n\r\n\t\t\tconst title = document.createElement('div');\r\n\t\t\ttitle.className = 'title';\r\n\t\t\ttitle.innerHTML = `<img src=\"${ASSET_URL}/info-blue.svg\" /> <p>${t('during_your_assessment')}</p>`;\r\n\r\n\t\t\tconst desc = document.createElement('p');\r\n\t\t\tdesc.className = 'desc';\r\n\t\t\tdesc.innerHTML = `${t('notifications_on_your_phone_should_be_turned_off')}<br />${t('do_not_lock_your_phone')}`;\r\n\r\n\t\t\tbannerInfoBox.appendChild(title);\r\n\t\t\tbannerInfoBox.appendChild(desc);\r\n\t\t\tmobileConnectionBanner.appendChild(bannerInfoBox);\r\n\t\t\twrapper.appendChild(mobileConnectionBanner);\r\n\r\n\t\t\tconst bottomDesc = document.createElement('div');\r\n\t\t\tbottomDesc.className = 'bottom-desc';\r\n\t\t\tbottomDesc.innerText = t('in_order_to_carry_out_your_assessment');\r\n\t\t\twrapper.appendChild(bottomDesc);\r\n\r\n\t\t\tconst btnContainer = document.createElement('div');\r\n\t\t\tbtnContainer.className = 'ivsf-btn-container';\r\n\r\n\t\t\tconst btnBack = document.createElement('button');\r\n\t\t\tbtnBack.className = 'orange-hollow-btn';\r\n\t\t\tbtnBack.innerText = t('i_already_have_the_app');\r\n\t\t\tbtnBack.onclick = prevStep;\r\n\r\n\t\t\tconst btnDownload = document.createElement('button');\r\n\t\t\tbtnDownload.className = 'orange-filled-btn';\r\n\t\t\tbtnDownload.innerText = t('download_the_app');\r\n\t\t\tbtnDownload.onclick = () => nextStep('downloadApp');\r\n\r\n\t\t\tbtnContainer.appendChild(btnBack);\r\n\t\t\tbtnContainer.appendChild(btnDownload);\r\n\t\t\twrapper.appendChild(btnContainer);\r\n\r\n\t\t} else if (mobileSteps === 'downloadApp') {\r\n\t\t\tconst qrCodeContainer = document.createElement('div');\r\n\t\t\tqrCodeContainer.className = 'qr-code-container';\r\n\r\n\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\tqrCodeContainer.appendChild(canvas);\r\n\r\n\t\t\tQRCode.toCanvas(canvas, 'https://mobile.mereos.eu/', function (error) {\r\n\t\t\t\tif (error) console.error(error);\r\n\t\t\t});\r\n\r\n\t\t\tconst bottomDesc = document.createElement('p');\r\n\t\t\tbottomDesc.className = 'bottom-desc';\r\n\t\t\tbottomDesc.innerText = t('please_scan_this_qr_code');\r\n\r\n\t\t\tconst btnContainer = document.createElement('div');\r\n\t\t\tbtnContainer.className = 'ivsf-btn-container';\r\n\r\n\t\t\tconst btnDownloaded = document.createElement('button');\r\n\t\t\tbtnDownloaded.className = 'orange-filled-btn';\r\n\t\t\tbtnDownloaded.innerText = t('i_downloaded_the_app');\r\n\t\t\tbtnDownloaded.onclick = () => nextStep('tokenCode');\r\n\r\n\t\t\tbtnContainer.appendChild(btnDownloaded);\r\n\t\t\tqrCodeContainer.appendChild(bottomDesc);\r\n\t\t\tqrCodeContainer.appendChild(btnContainer);\r\n\t\t\twrapper.appendChild(qrCodeContainer);\r\n\r\n\t\t} else if (mobileSteps === 'tokenCode') {\r\n\t\t\tconst qrCodeContainer = document.createElement('div');\r\n\t\t\tqrCodeContainer.className = 'qr-code-container';\r\n\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\tqrCodeContainer.appendChild(canvas);\r\n      \r\n\t\t\tQRCode.toCanvas(canvas, JSON.stringify({\r\n\t\t\t\ttoken: getAuthenticationToken(),\r\n\t\t\t\tgroupName: socketGroupIds?.groupName\r\n\t\t\t}), function (error) {\r\n\t\t\t\tif (error) console.error(error);\r\n\t\t\t});\r\n\r\n\t\t\tconst bottomDesc = document.createElement('p');\r\n\t\t\tbottomDesc.className = 'bottom-desc';\r\n\t\t\tbottomDesc.innerText = t('open_the_mereos_mobile_application');\r\n\r\n\t\t\tconst btnContainer = document.createElement('div');\r\n\t\t\tbtnContainer.className = 'ivsf-btn-container';\r\n\r\n\t\t\tconst btnDownloaded = document.createElement('button');\r\n\t\t\tbtnDownloaded.className = 'orange-filled-btn';\r\n\t\t\tbtnDownloaded.innerText = t('i_dont_have_the_app');\r\n\t\t\tbtnDownloaded.onclick = () => nextStep('downloadApp');\r\n\r\n\t\t\tbtnContainer.appendChild(btnDownloaded);\r\n\t\t\tqrCodeContainer.appendChild(bottomDesc);\r\n\t\t\tqrCodeContainer.appendChild(btnContainer);\r\n\t\t\twrapper.appendChild(qrCodeContainer);\r\n\r\n\t\t} else {\r\n\t\t\tconst remoteMobileVideo = document.createElement('div');\r\n\t\t\tremoteMobileVideo.className = 'remote-mobile-video';\r\n\r\n\t\t\tconst bannerVideoContainer = document.createElement('div');\r\n\t\t\tbannerVideoContainer.className = 'mobile-broadcastin-container';\r\n\r\n\t\t\tconst bannerImage = document.createElement('img');\r\n\t\t\tbannerImage.className = 'banner-image';\r\n\t\t\tbannerImage.src = `${ASSET_URL}/user-video-tutorial.jpeg`;\r\n      \r\n\t\t\tconst remoteVideoRef = document.createElement('video');\r\n\t\t\tremoteVideoRef.id = 'remote-mobile-video-container';\r\n\t\t\t\r\n\t\t\tconst videoContainer = document.createElement('div');\r\n\t\t\tvideoContainer.appendChild(remoteVideoRef);\r\n\r\n\t\t\tbannerVideoContainer.appendChild(bannerImage);\r\n\t\t\tbannerVideoContainer.appendChild(videoContainer);\r\n\r\n\t\t\tconst exampleText = document.createElement('span');\r\n\t\t\texampleText.className = 'example-text';\r\n\t\t\texampleText.innerText = t('example_tutorial');\r\n\r\n\t\t\tconst bottomDescRemote = document.createElement('div');\r\n\t\t\tbottomDescRemote.className = 'bottom-desc-remote';\r\n\r\n\t\t\tconst checkbox = document.createElement('input');\r\n\t\t\tcheckbox.type = 'checkbox';\r\n\t\t\tcheckbox.checked = checkedVideo;\r\n\t\t\tcheckbox.onchange = (e) => {\r\n\t\t\t\tcheckedVideo = e.target.checked; \r\n\t\t\t\tbtnNext.disabled = !checkedVideo; \r\n\t\t\t};\r\n\r\n\t\t\tconst label = document.createElement('p');\r\n\t\t\tlabel.innerText = t('is_the_camera_feedback_good');\r\n\r\n\t\t\tbottomDescRemote.appendChild(checkbox);\r\n\t\t\tbottomDescRemote.appendChild(label);\r\n\t\t\tremoteMobileVideo.appendChild(bannerVideoContainer);\r\n\t\t\tremoteMobileVideo.appendChild(exampleText);\r\n\t\t\tremoteMobileVideo.appendChild(bottomDescRemote);\r\n\r\n\t\t\tconst btnContainer = document.createElement('div');\r\n\t\t\tbtnContainer.className = 'mobile-btn-container';\r\n\r\n\t\t\tconst btnPrevious = document.createElement('button');\r\n\t\t\tbtnPrevious.className = 'orange-hollow-btn';\r\n\t\t\tbtnPrevious.innerText = t('previous_step');\r\n\t\t\tbtnPrevious.onclick = prevStep;\r\n\r\n\t\t\tconst btnNext = document.createElement('button');\r\n\t\t\tbtnNext.className = 'orange-filled-btn';\r\n\t\t\tbtnNext.innerText = t('next');\r\n\t\t\tbtnNext.disabled = !checkedVideo || disabledNextBtn;\r\n\t\t\tbtnNext.onclick = () => nextStep('step4');\r\n\r\n\t\t\tbtnContainer.appendChild(btnPrevious);\r\n\t\t\tbtnContainer.appendChild(btnNext);\r\n\t\t\tremoteMobileVideo.appendChild(btnContainer);\r\n\t\t\twrapper.appendChild(remoteMobileVideo);\r\n\r\n\t\t}\r\n\r\n\t\tcontainer.appendChild(wrapper);\r\n\t\ttabContent.appendChild(container);\r\n\t}\r\n\r\n\tconst initProctoring = () => {\r\n\t\tif(window.webStream) {\r\n\t\t\twindow.webStream.getTracks().forEach(track => track.stop());\r\n\t\t}\r\n\t\t\r\n\t\tinitPeerConnection();\r\n\r\n\t\tinitSocketConnection();\r\n\r\n\t\trenderUI();\r\n\t};\r\n\r\n\tinitProctoring();\r\n};\r\n","import i18next from 'i18next';\r\nimport { getMultipleCameraDevices, checkForMultipleMicrophones, registerEvent, updatePersistData } from '../utils/functions';\r\nimport '../assets/css/prevalidation.css';\r\nimport { showTab } from './examPrechecks';\r\n\r\nexport const PrevalidationInstructions = async (tabContent) => {\r\n\ttry {\r\n\t\tlet currentCaptureMode = null;\r\n\t\tlet mediaStream = null;\r\n\t\tlet cameras = [];\r\n\t\tlet microphones = [];\r\n\t\tlet selectedMicrophoneId=null;\r\n\t\tlet selectedCameraId = null;\r\n\t\tlet videoConstraints = {\r\n\t\t\twidth: 640,\r\n\t\t\theight: 480,\r\n\t\t\tfacingMode: 'user'\r\n\t\t};\r\n\t\tlet audioConstraints = {\r\n\t\t\tnoiseSuppression: true\r\n\t\t};\r\n\t\tconst themeColor = JSON.parse(localStorage.getItem('schoolTheme'));\r\n\r\n\t\tconst iconData = [\r\n\t\t\t{\r\n\t\t\t\tsvg: `<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t<circle cx=\"24\" cy=\"24\" r=\"24\" fill=\"#FF961B\"/>\r\n\t\t\t\t<g clip-path=\"url(#clip0)\">\r\n\t\t\t\t<path d=\"M23.9409 11.0078C23.5205 11.0078 23.1797 11.3487 23.1797 11.769V36.2299C23.1797 36.6504 23.5205 36.9912 23.9409 36.9912C24.3613 36.9912 24.7021 36.6503 24.7021 36.2299V11.7691C24.7022 11.3487 24.3613 11.0078 23.9409 11.0078Z\" fill=\"white\"/>\r\n\t\t\t\t<path d=\"M36.8643 24.7484L35.1193 19.9013C34.8916 19.0308 34.3656 18.3025 33.6677 17.814C34.2407 17.2599 34.5981 16.4842 34.5981 15.626C34.5981 13.947 33.2322 12.5811 31.5532 12.5811C29.8742 12.5811 28.5082 13.947 28.5082 15.626C28.5082 16.4842 28.8657 17.2599 29.4387 17.814C28.7408 18.3025 28.2148 19.0309 27.9871 19.9013L26.2421 24.7484C25.7971 25.9844 26.4853 27.3415 27.747 27.7129V33.1344C27.747 34.3936 28.7714 35.418 30.0307 35.418C30.615 35.418 31.1488 35.1974 31.5531 34.8351C31.9574 35.1974 32.4912 35.418 33.0756 35.418C34.3348 35.418 35.3593 34.3936 35.3593 33.1344V27.7129C36.6195 27.342 37.3097 25.9858 36.8643 24.7484ZM31.5532 14.1035C32.3927 14.1035 33.0757 14.7865 33.0757 15.626C33.0757 16.4655 32.3927 17.1485 31.5532 17.1485C30.7137 17.1485 30.0308 16.4655 30.0308 15.626C30.0308 14.7865 30.7137 14.1035 31.5532 14.1035ZM34.7156 26.2832H34.5981C34.1777 26.2832 33.8369 26.6241 33.8369 27.0444V33.1343C33.8369 33.554 33.4954 33.8955 33.0757 33.8955C32.6559 33.8955 32.3145 33.554 32.3145 33.1343V28.5668C32.3145 28.1464 31.9736 27.8056 31.5533 27.8056C31.1329 27.8056 30.7921 28.1465 30.7921 28.5668V33.1343C30.7921 33.554 30.4506 33.8955 30.0309 33.8955C29.6111 33.8955 29.2696 33.554 29.2696 33.1343V27.0445C29.2696 26.6241 28.9288 26.2833 28.5084 26.2833H28.391C27.8644 26.2833 27.4963 25.7598 27.6748 25.2642C29.5568 20.0367 29.4405 20.365 29.4543 20.3098C29.6955 19.3449 30.5587 18.6709 31.5534 18.6709C32.5481 18.6709 33.4113 19.3449 33.6525 20.3098C33.6663 20.3649 33.5506 20.0381 35.4321 25.2642C35.6102 25.7596 35.2423 26.2832 34.7156 26.2832Z\" fill=\"white\"/>\r\n\t\t\t\t<path d=\"M18.596 17.6556C19.079 17.1165 19.3735 16.4051 19.3735 15.626C19.3735 13.947 18.0076 12.5811 16.3286 12.5811C14.6496 12.5811 13.2837 13.947 13.2837 15.6259C13.2837 16.4051 13.5782 17.1165 14.0612 17.6556C12.2538 18.509 11 20.3492 11 22.4771V25.522C11 26.5145 11.6363 27.361 12.5225 27.6752V33.1343C12.5225 34.3935 13.5469 35.4179 14.8062 35.4179C15.3905 35.4179 15.9243 35.1973 16.3286 34.835C16.7329 35.1973 17.2667 35.4179 17.8511 35.4179C19.1103 35.4179 20.1348 34.3935 20.1348 33.1343V27.6752C21.0209 27.361 21.6573 26.5145 21.6573 25.5219V22.477C21.6573 20.3492 20.4035 18.509 18.596 17.6556ZM16.3286 14.1035C17.1681 14.1035 17.8511 14.7865 17.8511 15.626C17.8511 16.4655 17.1681 17.1485 16.3286 17.1485C15.4891 17.1485 14.8062 16.4655 14.8062 15.626C14.8062 14.7865 15.4892 14.1035 16.3286 14.1035ZM20.1348 25.522C20.1348 25.9418 19.7933 26.2832 19.3736 26.2832C18.9532 26.2832 18.6124 26.6241 18.6124 27.0444V33.1343C18.6124 33.554 18.2709 33.8955 17.8512 33.8955C17.4314 33.8955 17.0899 33.554 17.0899 33.1343V28.5668C17.0899 28.1464 16.7491 27.8056 16.3287 27.8056C15.9084 27.8056 15.5675 28.1465 15.5675 28.5668V33.1343C15.5675 33.554 15.226 33.8955 14.8063 33.8955C14.3866 33.8955 14.0451 33.554 14.0451 33.1343V27.0445C14.0451 26.6241 13.7043 26.2833 13.2839 26.2833C12.8641 26.2833 12.5227 25.9418 12.5227 25.522V22.4771C12.5227 20.3784 14.2301 18.6709 16.3288 18.6709C18.4275 18.6709 20.135 20.3784 20.135 22.4771V25.522H20.1348Z\" fill=\"white\"/>\r\n\t\t\t\t</g>\r\n\t\t\t\t<defs>\r\n\t\t\t\t<clipPath id=\"clip0\">\r\n\t\t\t\t<rect width=\"26\" height=\"26\" fill=\"white\" transform=\"translate(11 11)\"/>\r\n\t\t\t\t</clipPath>\r\n\t\t\t\t</defs>\r\n\t\t\t\t</svg>\r\n\t\t\t\t`,\r\n\t\t\t\ttext: 'use_washroom',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tsvg: `<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t<circle cx=\"24\" cy=\"24\" r=\"24\" fill=\"#FF961B\"/>\r\n\t\t\t\t<path d=\"M33.6485 12.1421L33.6485 12.1421L33.647 12.1405C33.4633 11.9549 33.205 11.85 32.9375 11.85H15.0625C14.7949 11.85 14.5366 11.9549 14.353 12.1405L14.353 12.1405L14.3514 12.1421C14.1704 12.3305 14.0762 12.5821 14.1041 12.841L14.1041 12.8412L16.5416 35.3412L16.5416 35.3414C16.5933 35.8108 17.0156 36.15 17.5 36.15H30.5C30.9843 36.15 31.4067 35.8108 31.4583 35.3414L31.4583 35.3412L33.1774 19.4699C33.1774 19.4697 33.1775 19.4694 33.1775 19.4691C33.1789 19.4572 33.1804 19.4465 33.182 19.4346L33.182 19.4346L33.1825 19.4306L33.8958 12.8426L33.8959 12.8424C33.9237 12.5822 33.8297 12.3307 33.6485 12.1421ZM24.6056 18.0499C21.9428 16.0339 18.6956 16.3545 16.4846 16.9449L16.1282 13.65H31.8717L31.3219 18.7251C29.2739 19.3361 26.6527 19.6035 24.6058 18.05L24.6056 18.0499ZM31.1143 20.6461L29.6292 34.35H18.3707L16.6826 18.7675C18.5126 18.2227 21.2695 17.8384 23.3942 19.4485C24.9367 20.6179 26.6874 20.997 28.3111 20.997C29.3252 20.997 30.28 20.8443 31.1143 20.6461Z\" fill=\"white\" stroke=\"white\" stroke-width=\"0.3\"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t`,\r\n\t\t\t\ttext: 'get_water',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tsvg: `<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t<circle cx=\"24\" cy=\"24\" r=\"24\" fill=\"#FF961B\"/>\r\n\t\t\t\t<path d=\"M35.5879 23.875C34.607 22.4143 32.9612 22.5876 32.911 22.5762C32.6944 22.5762 32.4813 22.6007 32.2743 22.6469L33.4105 18.2496C33.9762 16.06 32.9529 13.7644 30.9451 12.7239C28.7376 11.5801 26.4016 11.0001 24.0003 11C21.6005 11.0001 19.2644 11.5801 17.057 12.7238C15.0491 13.7643 14.0259 16.06 14.5916 18.2495L15.7278 22.6468C15.3017 22.5518 15.0115 22.582 14.8521 22.5761C12.7668 22.5761 11.3468 24.6901 12.1346 26.6166C13.1602 29.1248 14.9393 31.2261 17.258 32.6566L15.2475 35.3812C14.9145 35.8326 15.0104 36.4684 15.4618 36.8015C15.9161 37.1367 16.5513 37.0356 16.8821 36.5872L19.0912 33.5933C20.6315 34.23 22.2861 34.5605 23.9775 34.5605H24.0246C25.716 34.5605 27.3706 34.23 28.9109 33.5933L31.1199 36.5872C31.452 37.0373 32.0877 37.1353 32.5402 36.8015C32.9916 36.4684 33.0876 35.8326 32.7545 35.3812L30.7441 32.6566C33.0596 31.2281 34.8405 29.1283 35.8675 26.6166C36.2375 25.7117 36.133 24.6868 35.5879 23.875ZM17.9916 14.5274C19.9074 13.5346 21.929 13.0313 24.0018 13.0313C26.073 13.0313 28.0946 13.5346 30.0104 14.5273C31.1859 15.1365 31.7753 16.4581 31.4437 17.7415L29.6801 24.5671C28.2954 25.5942 26.207 26.3438 24.001 26.3438C21.7927 26.3438 19.7038 25.5921 18.3219 24.5671L16.5583 17.7414C16.2268 16.4581 16.8161 15.1364 17.9916 14.5274ZM33.9873 25.8478C32.3364 29.8853 28.4035 32.5293 24.0246 32.5293H23.9775C19.5895 32.5293 15.662 29.8765 14.0148 25.8478C13.7727 25.2557 14.2076 24.6074 14.8521 24.6074C14.9629 24.6263 15.4486 24.5051 15.8198 24.9744C17.1152 26.6123 20.2279 28.375 24.0011 28.375C27.7742 28.375 30.8869 26.6122 32.1823 24.9744C32.3668 24.7412 32.6324 24.6074 32.9109 24.6074C33.0176 24.6263 33.5614 24.5009 33.9014 25.0073C34.0711 25.2599 34.1024 25.5663 33.9873 25.8478Z\" fill=\"white\"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t`,\r\n\t\t\t\ttext: 'get_comfy',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tsvg: `<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t<circle cx=\"24\" cy=\"24\" r=\"24\" fill=\"#FF961B\"/>\r\n\t\t\t\t\t<g clip-path=\"url(#clip0)\">\r\n\t\t\t\t\t<path d=\"M36.9693 12.941C36.913 11.9082 36.0916 11.0869 35.0588 11.0305C32.9748 10.9167 28.8969 11.0274 24.9975 13.0443C23.0097 14.0725 20.9073 15.8158 19.2296 17.8271C19.2089 17.8519 19.1888 17.8768 19.1683 17.9017L15.3607 18.1958C14.734 18.2442 14.1757 18.5727 13.8291 19.097L11.2314 23.0261C10.9685 23.4237 10.9267 23.9213 11.1196 24.3571C11.3124 24.793 11.7087 25.0968 12.1797 25.1698L15.3876 25.6666C15.3763 25.729 15.3649 25.7913 15.3545 25.8537C15.2477 26.4925 15.4594 27.1493 15.9208 27.6106L20.3891 32.079C20.7717 32.4616 21.2886 32.6725 21.8182 32.6725C21.9273 32.6725 22.037 32.6635 22.1462 32.6452C22.2085 32.6348 22.2708 32.6235 22.3332 32.6121L22.83 35.8201C22.903 36.2911 23.2068 36.6874 23.6426 36.8803C23.8239 36.9605 24.0158 37.0001 24.2069 37.0001C24.4751 37 24.7415 36.9219 24.9737 36.7684L28.9027 34.1707C29.4271 33.824 29.7555 33.2658 29.8039 32.6391L30.098 28.8316C30.1228 28.8111 30.1478 28.791 30.1726 28.7703C32.184 27.0925 33.9273 24.9902 34.9555 23.0023C36.9724 19.1028 37.083 15.0248 36.9693 12.941ZM28.0626 32.8999L24.3042 35.3847L23.82 32.2584C25.4084 31.7914 26.9797 31.0434 28.4767 30.0413L28.2851 32.5217C28.2732 32.6764 28.192 32.8143 28.0626 32.8999ZM21.4663 31.0018L16.9979 26.5334C16.8839 26.4194 16.8312 26.2592 16.8571 26.1048C16.9899 25.3105 17.1964 24.5543 17.4519 23.8419L24.1564 30.5465C23.3009 30.8529 22.5345 31.0357 21.8949 31.1427C21.7404 31.1684 21.5803 31.1158 21.4663 31.0018ZM15.4781 19.7147L17.9584 19.5231C16.9563 21.0201 16.2083 22.5914 15.7413 24.1799L12.615 23.6957L15.0999 19.9372C15.1855 19.8077 15.3234 19.7267 15.4781 19.7147ZM29.1969 27.6003C27.9663 28.6268 26.7718 29.3692 25.6707 29.9064L18.0931 22.3288C18.7968 20.8915 19.6557 19.6946 20.3994 18.803C21.9521 16.9416 23.8831 15.3358 25.6975 14.3974C29.2762 12.5463 33.0468 12.4466 34.9759 12.5516C35.2312 12.5655 35.4343 12.7686 35.4482 13.024C35.5534 14.9531 35.4535 18.7236 33.6024 22.3024C32.664 24.1167 31.0582 26.0477 29.1969 27.6003Z\" fill=\"white\"/>\r\n\t\t\t\t\t<path d=\"M28.81 22.9971C29.7851 22.997 30.7606 22.6258 31.5029 21.8835C32.2223 21.1641 32.6184 20.2077 32.6184 19.1905C32.6184 18.1732 32.2223 17.2168 31.5029 16.4975C30.018 15.0125 27.6018 15.0126 26.117 16.4975C25.3976 17.2168 25.0015 18.1732 25.0015 19.1905C25.0015 20.2077 25.3977 21.1641 26.117 21.8835C26.8595 22.626 27.8345 22.9972 28.81 22.9971ZM27.1941 17.5747C27.6396 17.1292 28.2247 16.9064 28.8099 16.9064C29.3951 16.9064 29.9802 17.1292 30.4257 17.5747C30.8573 18.0063 31.0949 18.5801 31.0949 19.1904C31.0949 19.8008 30.8573 20.3746 30.4257 20.8062C29.5348 21.6972 28.085 21.6971 27.194 20.8062C26.7625 20.3746 26.5248 19.8008 26.5248 19.1905C26.5248 18.5801 26.7625 18.0063 27.1941 17.5747Z\" fill=\"white\"/>\r\n\t\t\t\t\t<path d=\"M11.7771 32.4264C11.972 32.4264 12.167 32.3521 12.3157 32.2033L14.8026 29.7163C15.1 29.4189 15.1 28.9366 14.8026 28.6391C14.5051 28.3416 14.0228 28.3416 13.7253 28.6391L11.2385 31.126C10.941 31.4235 10.941 31.9058 11.2385 32.2033C11.3872 32.352 11.5821 32.4264 11.7771 32.4264Z\" fill=\"white\"/>\r\n\t\t\t\t\t<path d=\"M17.0816 30.9184C16.7842 30.6209 16.3018 30.6209 16.0044 30.9184L11.2231 35.6997C10.9256 35.9972 10.9256 36.4795 11.2231 36.777C11.3718 36.9257 11.5667 37 11.7617 37C11.9566 37 12.1516 36.9257 12.3003 36.7769L17.0815 31.9956C17.3791 31.6982 17.3791 31.2159 17.0816 30.9184Z\" fill=\"white\"/>\r\n\t\t\t\t\t<path d=\"M18.2835 33.1977L15.7966 35.6846C15.4991 35.9821 15.4991 36.4644 15.7966 36.7619C15.9453 36.9106 16.1403 36.985 16.3352 36.985C16.5301 36.985 16.7251 36.9106 16.8738 36.7619L19.3607 34.2749C19.6581 33.9775 19.6581 33.4952 19.3607 33.1977C19.0632 32.9002 18.5809 32.9002 18.2835 33.1977Z\" fill=\"white\"/>\r\n\t\t\t\t\t</g>\r\n\t\t\t\t\t<defs>\r\n\t\t\t\t\t<clipPath id=\"clip0\">\r\n\t\t\t\t\t<rect width=\"26\" height=\"26\" fill=\"white\" transform=\"translate(11 11)\"/>\r\n\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t</defs>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t`,\r\n\t\t\t\ttext: 'get_ready',\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconsole.log('currentCaptureMode',currentCaptureMode);\r\n\r\n\t\tconst handleDeviceId = async (id, type) => {\r\n\t\t\tif (type === 'camera') {\r\n\t\t\t\tvideoConstraints = {\r\n\t\t\t\t\t...videoConstraints,\r\n\t\t\t\t\tdeviceId: { ideal: id }\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tlocalStorage.setItem('deviceId',id);\r\n\t\t\t}\r\n\t\r\n\t\t\tif (type === 'microphone') {\r\n\t\t\t\taudioConstraints = {\r\n\t\t\t\t\t...audioConstraints,\r\n\t\t\t\t\tdeviceId: { ideal: id }\r\n\t\t\t\t};\r\n\t\t\t\tlocalStorage.setItem('microphoneID',id);\r\n\t\t\t}\r\n\t\t\tstartWebcam();\r\n\t\t};\r\n\t\r\n\t\tconst nextStep = () => {\r\n\t\t\tif (mediaStream) {\r\n\t\t\t\tmediaStream?.getTracks()?.forEach(track => track.stop());\r\n\t\t\t\tmediaStream = null;\r\n\t\t\t}\r\n\t\t\tregisterEvent({eventType: 'success', notify: false, eventName: 'prevalidation_passed'});\r\n\t\t\tupdatePersistData('preChecksSteps', { preValidation: true });\r\n\t\t\tshowTab('IdentityVerificationScreenOne');\r\n\t\t};\r\n\r\n\t\tconst createUIElements = () => {\r\n\t\t\tlet container = tabContent.querySelector('.ivso-container');\r\n\t\r\n\t\t\tif (!container) {\r\n\t\t\t\tcontainer = document.createElement('div');\r\n\t\t\t\tcontainer.className = 'ivso-container';\r\n\t\t\t\ttabContent.appendChild(container);\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.innerHTML = '';\r\n\t\t\t}\r\n\r\n\t\t\tconst headingContainer = document.createElement('div');\r\n\t\t\tconst subHeadingContainer = document.createElement('div');\r\n\t\t\t\r\n\t\t\theadingContainer.className = 'pvi-header-title';\r\n\t\t\tsubHeadingContainer.className = 'pvi-msg';\r\n\t\r\n\t\t\tcontainer.append(headingContainer);\r\n\t\t\tcontainer.append(subHeadingContainer);\r\n\t\r\n\t\t\tconst instructionsContainer = document.createElement('div');\r\n\t\t\tinstructionsContainer.className = 'pvi-instructions-container';\r\n\t\r\n\t\t\tconst iconTextElements = [];\r\n\t\r\n\t\t\ticonData.forEach(icon => {\r\n\t\t\t\tconst svgWrapper = document.createElement('div');\r\n\t\t\t\tsvgWrapper.className = 'pvi-instruction-svg';\r\n\t\t\t\tsvgWrapper.innerHTML = icon.svg;\r\n\t\t\t\tconst circles = svgWrapper.querySelectorAll('circle');\r\n\t\t\t\tcircles.forEach(circle => {\r\n\t\t\t\t\tcircle.setAttribute('fill', `${themeColor?.theming}`);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tinstructionsContainer.appendChild(svgWrapper);\r\n\r\n\t\t\t\tconst textElement = document.createElement('div');\r\n\t\t\t\ttextElement.className = 'pvi-instruction-txt';\r\n\t\t\t\ticonTextElements.push(textElement); \r\n\t\t\t\tinstructionsContainer.appendChild(textElement);\r\n\t\t\t});\r\n\t\r\n\t\t\tcontainer.appendChild(instructionsContainer);\r\n\t\r\n\t\t\tconst videoMainContainer = document.createElement('div');\r\n\t\t\tvideoMainContainer.id = 'videoMainContainer';\r\n\t\t\tvideoMainContainer.className = 'pvi-header-img';\r\n\t\r\n\t\t\tconst videoContainer = document.createElement('div');\r\n\t\t\tvideoContainer.id = 'videoContainer';\r\n\t\t\tvideoMainContainer.appendChild(videoContainer);\r\n\t\r\n\t\t\tcontainer.appendChild(videoMainContainer);\r\n\t\r\n\t\t\tconst dropdownContainer = document.createElement('div');\r\n\t\t\tdropdownContainer.id = 'dropdownContainer';\r\n\t\t\tdropdownContainer.className = 'multi-device-block';\r\n\t\r\n\t\t\tconst cameraContainer = document.createElement('div');\r\n\t\t\tcameraContainer.className = 'camera-container';\r\n\t\r\n\t\t\tconst cameraDropdown = document.createElement('select');\r\n\t\t\tcameraDropdown.id = 'cameraDropdown';\r\n\t\t\tcameraContainer.appendChild(cameraDropdown);\r\n\t\t\tdropdownContainer.appendChild(cameraContainer);\r\n\t\r\n\t\t\tconst microPhoneContainer = document.createElement('div');\r\n\t\t\tmicroPhoneContainer.className = 'microphone-container';\r\n\t\r\n\t\t\tconst microphoneDropdown = document.createElement('select');\r\n\t\t\tmicrophoneDropdown.id = 'microphoneDropdown';\r\n\t\t\tmicroPhoneContainer.appendChild(microphoneDropdown);\r\n\t\t\tdropdownContainer.appendChild(microPhoneContainer);\r\n\t\r\n\t\t\tconst messageElement = document.createElement('div');\r\n\t\t\tmessageElement.id = 'message';\r\n\t\t\tmessageElement.className = 'pvi-query-msg';\r\n\t\r\n\t\t\tconst buttonContainer = document.createElement('div');\r\n\t\t\tbuttonContainer.id = 'button-container';\r\n\t\t\tbuttonContainer.className = 'pvi-btn-container';\r\n\t\r\n\t\t\tconst continueBtn = document.createElement('button');\r\n\t\t\tcontinueBtn.id = 'continue-btn';\r\n\t\t\tcontinueBtn.textContent = i18next.t('continue'); \r\n\t\t\tcontinueBtn.className = 'orange-filled-btn';\r\n\t\t\tcontinueBtn.style.marginLeft = 'auto';\r\n\t\t\tcontinueBtn.style.padding = '9px 32px';\r\n\t\t\tcontinueBtn.addEventListener('click', nextStep);\r\n\t\r\n\t\t\tbuttonContainer.append(continueBtn);\r\n\t\r\n\t\t\tcontainer.appendChild(dropdownContainer);\r\n\t\t\tcontainer.appendChild(messageElement);\r\n\t\t\tcontainer.appendChild(buttonContainer);\r\n\t\r\n\t\t\ttabContent.appendChild(container);\r\n\t\r\n\t\t\tsetTextContent(headingContainer, subHeadingContainer, messageElement, iconTextElements, iconData);\r\n\t\t};\r\n\r\n\t\tconst setTextContent = (headingContainer, subHeadingContainer, messageElement, iconTextElements, iconData) => {\r\n\t\t\theadingContainer.textContent = i18next.t('system_diagnostic');\r\n\t\t\tsubHeadingContainer.textContent = i18next.t('initial_system_check_passed');\r\n\t\t\tmessageElement.textContent = i18next.t('select_preferred_camera_and_microphone'); \r\n\t\r\n\t\t\tif (Array.isArray(iconTextElements)) {\r\n\t\t\t\ticonData.forEach((icon, index) => {\r\n\t\t\t\t\tif (iconTextElements[index]) { \r\n\t\t\t\t\t\ticonTextElements[index].textContent = i18next.t(icon.text); \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\tconst init = async () => {\r\n\t\t\tcameras = await getMultipleCameraDevices();\r\n\t\t\tcameras = cameras?.map(camera => ({id: camera.deviceId, name: camera.label, ...camera }));\r\n\t\t\tlocalStorage.setItem('deviceId',cameras?.length ? cameras[0].id : null);\r\n\t\t\tselectedCameraId = cameras?.length ? cameras[0].id : null;\r\n\r\n\t\t\tmicrophones = await checkForMultipleMicrophones();\r\n\t\t\tmicrophones = microphones?.map(microphone => ({id: microphone.deviceId, name: microphone.label, ...microphone }));\r\n\t\t\tlocalStorage.setItem('microphoneID',microphones?.length ? microphones[0].id : null);\r\n\t\t\tselectedMicrophoneId = microphones?.length ? microphones[0].id : null;\r\n\r\n\t\t\tstartWebcam();\r\n\t\t\tupdateUI();\r\n\t\t};\r\n\r\n\t\tconst updateUI = () => {\r\n\t\t\tconst cameraDropdown = document.getElementById('cameraDropdown');\r\n\t\t\tconst microphoneDropdown = document.getElementById('microphoneDropdown');\r\n\t\t\tconst messageElement = document.getElementById('message');\r\n\t\t\r\n\t\t\tcameraDropdown.innerHTML = '';\r\n\t\t\tmicrophoneDropdown.innerHTML = '';\r\n\t\t\r\n\t\t\tcameras.forEach(camera => {\r\n\t\t\t\tconst option = document.createElement('option');\r\n\t\t\t\toption.value = camera.id;\r\n\t\t\t\toption.textContent = camera.name;\r\n\t\t\t\tif (camera.id === selectedCameraId) {\r\n\t\t\t\t\toption.selected = true;\r\n\t\t\t\t}\r\n\t\t\t\tcameraDropdown.appendChild(option);\r\n\t\t\t});\r\n\t\t\r\n\t\t\tmicrophones.forEach(microphone => {\r\n\t\t\t\tconst option = document.createElement('option');\r\n\t\t\t\toption.value = microphone.id;\r\n\t\t\t\toption.textContent = microphone.name;\r\n\t\t\t\tif (microphone.id === selectedMicrophoneId) {\r\n\t\t\t\t\toption.selected = true;\r\n\t\t\t\t}\r\n\t\t\t\tmicrophoneDropdown.appendChild(option);\r\n\t\t\t});\r\n\t\t\r\n\t\t\tmessageElement.textContent = i18next.t('select_preferred_camera_and_microphone');\r\n\t\t\r\n\t\t\tcameraDropdown.onchange = (event) => {\r\n\t\t\t\tselectedCameraId = event.target.value;\r\n\t\t\t\thandleDeviceId(selectedCameraId, 'camera');\r\n\t\t\t};\r\n\t\t\r\n\t\t\tmicrophoneDropdown.onchange = (event) => {\r\n\t\t\t\tselectedMicrophoneId = event.target.value;\r\n\t\t\t\thandleDeviceId(selectedMicrophoneId, 'microphone');\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\tconst startWebcam = async () => {\r\n\t\t\tconst videoContainer = document.getElementById('videoContainer');\r\n\t\t\tvideoContainer.innerHTML = '';\r\n\t\r\n\t\t\ttry {\r\n\t\t\t\tmediaStream = await navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: false });\r\n\t\r\n\t\t\t\tlet videoElement = document.getElementById('myVideo');\r\n\t\t\t\tif (!videoElement) {\r\n\t\t\t\t\tvideoElement = document.createElement('video');\r\n\t\t\t\t\tvideoElement.id = 'myVideo';\r\n\t\t\t\t\tvideoElement.className = 'my-recorded-video';\r\n\t\t\t\t\tvideoElement.controls = false; \r\n\t\t\t\t\tvideoElement.autoplay = true; \r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvideoElement.srcObject = mediaStream;\r\n\t\r\n\t\t\t\tvideoContainer.appendChild(videoElement);\r\n\t\t\t\tcurrentCaptureMode = 'done';\r\n\t\t\t\tupdateUI();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('Webcam error:', error);\r\n\t\t\t\talert('Error accessing webcam: ' + error.message);\r\n\t\t\t\tupdateUI();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcreateUIElements();\r\n\r\n\t\tinit();\r\n\r\n\t\ti18next.on('languageChanged', () => {\r\n\t\t\tconst headingContainer = document.querySelector('.pvi-header-title');\r\n\t\t\tconst subHeadingContainer = document.querySelector('.pvi-msg');\r\n\t\t\tconst messageElement = document.getElementById('message');\r\n\t\t\tconst iconTextElements = document.querySelectorAll('.pvi-instruction-txt');\r\n\t\r\n\t\t\tsetTextContent(headingContainer, subHeadingContainer, messageElement, Array.from(iconTextElements),iconData);\r\n\t\t});\r\n\t\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to initialize; error: ' + error);\r\n\t}\r\n};\r\n","export const createSpinner = ({ backgroundColor, style }) => {\r\n\tconst spinnerContainer = document.createElement('div');\r\n\tspinnerContainer.className = 'spinner';\r\n\r\n\tif (style) {\r\n\t\tObject.assign(spinnerContainer.style, style);\r\n\t}\r\n\r\n\tconst colorStyles = backgroundColor ? { backgroundColor } : {backgroundColor: '#3498db'};\r\n\r\n\tfunction createBounce(className) {\r\n\t\tconst bounce = document.createElement('div');\r\n\t\tbounce.className = className;\r\n\t\tObject.assign(bounce.style, colorStyles);\r\n\t\treturn bounce;\r\n\t}\r\n\r\n\tconst bounce1 = createBounce('bounce1');\r\n\tconst bounce2 = createBounce('bounce2');\r\n\tconst bounce3 = createBounce('bounce3');\r\n\r\n\tspinnerContainer.appendChild(bounce1);\r\n\tspinnerContainer.appendChild(bounce2);\r\n\tspinnerContainer.appendChild(bounce3);\r\n\r\n\treturn spinnerContainer;\r\n};\r\n\r\n","import { \r\n\tcheckCamera, \r\n\tcheckMicrophone, \r\n\tcheckNotification, \r\n\tdetectMultipleScreens, \r\n\tgetLocation, \r\n\tgetNetworkUploadSpeed, \r\n\tgetSecureFeatures, \r\n\tregisterEvent, \r\n\tupdatePersistData \r\n} from '../utils/functions';\r\nimport '../assets/css/systemDiagnostic.css';\r\nimport i18next from 'i18next';\r\nimport { showTab } from './examPrechecks';\r\nimport { ASSET_URL } from '../utils/constant';\r\n\r\nlet cameraStream = null;\r\nlet audioStream = null;\r\n\r\nconst videoGreen = `${ASSET_URL}/video-camera-green.svg`;\r\nconst microPhoneGreen = `${ASSET_URL}/microphone-green.svg`;\r\nconst networkGreen = `${ASSET_URL}/spinner-gap-green.svg`;\r\nconst locationGreen = `${ASSET_URL}/location-pin-green.svg`;\r\nconst notificationGreen = `${ASSET_URL}/bell-ringing-green.svg`;\r\nconst multipleScreenGreen = `${ASSET_URL}/multiple-screen-green.svg`;\r\nconst videoRed = `${ASSET_URL}/video-camera-red.svg`;\r\nconst microPhoneRed = `${ASSET_URL}/microphone-red.svg`;\r\nconst networkRed = `${ASSET_URL}/spinner-maroon.svg`;\r\nconst locationRed = `${ASSET_URL}/location-pin-red.svg`;\r\nconst notificationRed = `${ASSET_URL}/bell-ringing-maroon.svg`;\r\nconst multipleScreenRed = `${ASSET_URL}/multiple-screen-red.svg`;\r\n\r\nconst createDiagnosticItem = (id, label) => {\r\n\tconst diagnosticItem = document.createElement('div');\r\n\tdiagnosticItem.classList.add('diagnostic-item', 'grey-box');\r\n\tdiagnosticItem.id = `${id}DiagnosticItem`;\r\n\r\n\tconst greyBoxRight = document.createElement('div');\r\n\tgreyBoxRight.classList.add('grey-box-right');\r\n\r\n\tconst statusIcon = document.createElement('img');\r\n\tstatusIcon.id = `${id}StatusIcon`;\r\n\tstatusIcon.src = `${ASSET_URL}/video-camera-light-gray.svg`;\r\n\tstatusIcon.alt = '';\r\n\r\n\tconst labelElement = document.createElement('label');\r\n\tlabelElement.textContent = label;\r\n\r\n\tconst greyBoxLeft = document.createElement('div');\r\n\tgreyBoxLeft.classList.add('grey-box-left');\r\n\r\n\tconst loadingIcon = document.createElement('img');\r\n\tloadingIcon.id = `${id}StatusLoading`;\r\n\tloadingIcon.src = `${ASSET_URL}/loading-gray.svg`;\r\n\tloadingIcon.alt = '';\r\n\r\n\tgreyBoxRight.appendChild(statusIcon);\r\n\tgreyBoxRight.appendChild(labelElement);\r\n\tgreyBoxLeft.appendChild(loadingIcon);\r\n\tdiagnosticItem.appendChild(greyBoxRight);\r\n\tdiagnosticItem.appendChild(greyBoxLeft);\r\n\r\n\treturn diagnosticItem;\r\n};\r\n\r\nconst renderUI = (tab1Content) => {\r\n\ttab1Content.innerHTML = '';\r\n\r\n\tconst container = document.createElement('div');\r\n\tcontainer.classList.add('system-diagnostic-test-screen');\r\n\r\n\tconst heading = document.createElement('h1');\r\n\theading.classList.add('heading');\r\n\theading.textContent = i18next.t('system_diagnostic');\r\n\r\n\tconst diagnosticStatus = document.createElement('div');\r\n\tdiagnosticStatus.classList.add('diagnostic-status', 'container-box');\r\n\r\n\tconst innerContainer = document.createElement('div');\r\n\tinnerContainer.classList.add('container');\r\n\r\n\tconst containerTop = document.createElement('div');\r\n\tcontainerTop.classList.add('container-top');\r\n\r\n\tconst description = document.createElement('label');\r\n\tdescription.classList.add('description');\r\n\tdescription.textContent = i18next.t('system_diagnostic_msg');\r\n\r\n\tconst containerPrompt = document.createElement('div');\r\n\tcontainerPrompt.classList.add('container-prompt');\r\n\r\n\tconst promptImage = document.createElement('img');\r\n\tpromptImage.src = `${ASSET_URL}/user-permission-english.svg`;\r\n\tpromptImage.alt = '';\r\n\tpromptImage.width = 350;\r\n\tpromptImage.classList.add('prompt-image');\r\n\r\n\tconst containerMiddle = document.createElement('div');\r\n\tcontainerMiddle.classList.add('container-middle', 'box-section');\r\n\r\n\tconst diagnosticItems =  ['webcam', 'microphone', 'connection','notification', 'location', 'screen'];\r\n\tdiagnosticItems.forEach(item => {\r\n\t\tconst label = i18next.t(item);\r\n\t\tconst diagnosticItem = createDiagnosticItem(item, label);\r\n\t\tcontainerMiddle.appendChild(diagnosticItem);\r\n\t});\r\n\r\n\tconst buttonSection = document.createElement('div');\r\n\tbuttonSection.classList.add('button-section');\r\n\r\n\tconst continueBtn = document.createElement('button');\r\n\tcontinueBtn.classList.add('orange-filled-btn');\r\n\tcontinueBtn.id = 'diagnosticContinueBtn';\r\n\tcontinueBtn.disabled = true;\r\n\tcontinueBtn.textContent = 'Continue';\r\n\tcontinueBtn.addEventListener('click', () => {\r\n\t\tif (cameraStream) cameraStream.getTracks().forEach(track => track.stop());\r\n\t\tif (audioStream) audioStream.getTracks().forEach(track => track.stop());\r\n\t\t\r\n\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'system_diagnostic_passed' });\r\n\t\tupdatePersistData('preChecksSteps',{ diagnosticStep:true });\r\n\t\tshowTab('Prevalidationinstruction');\r\n\t});\r\n\tbuttonSection.appendChild(continueBtn);\r\n\tinnerContainer.append(containerTop, description, containerPrompt, promptImage, containerMiddle, buttonSection);\r\n\tdiagnosticStatus.appendChild(innerContainer);\r\n\tcontainer.append(heading, diagnosticStatus);\r\n\ttab1Content.appendChild(container);\r\n};\r\n\r\nexport const runSystemDiagnostics = async (tab1Content) => {\r\n\tif (!tab1Content) {\r\n\t\tconsole.error('Element with id \"runSystemDiagnostics\" not found.');\r\n\t\treturn;\r\n\t}\r\n\trenderUI(tab1Content);\r\n\r\n\tconst setElementStatus = (id, status, isSuccess) => {\r\n\t\tconst statusIcon = document.getElementById(`${id}StatusIcon`);\r\n\t\tconst statusLoading = document.getElementById(`${id}StatusLoading`);\r\n\t\tif (!statusIcon || !statusLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstatusIcon.src = isSuccess ? status.success : status.failure;\r\n\t\tstatusLoading.src = isSuccess ? `${ASSET_URL}/checkmark-rounded-green.png` : `${ASSET_URL}/x-circle.png`;\r\n\t};\r\n\r\n\tconst handleDiagnosticItemClick = (id, checkFunction) => {\r\n\t\tconst element = document.getElementById(`${id}DiagnosticItem`);\r\n\t\tif (!element) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telement.addEventListener('click', async () => {\r\n\t\t\tconst result = await checkFunction();\r\n\t\t\tsetElementStatus(id, { success: successIconMap[id], failure: failureIconMap[id] }, result);\r\n\t\t});\r\n\t};\r\n\r\n\tconst successIconMap = {\r\n\t\twebcam: videoGreen,\r\n\t\tmicrophone: microPhoneGreen,\r\n\t\tconnection: networkGreen,\r\n\t\tlocation: locationGreen,\r\n\t\tnotification: notificationGreen,\r\n\t\tscreen: multipleScreenGreen\r\n\t};\r\n\r\n\tconst failureIconMap = {\r\n\t\twebcam: videoRed,\r\n\t\tmicrophone: microPhoneRed,\r\n\t\tconnection: networkRed,\r\n\t\tlocation: locationRed,\r\n\t\tnotification: notificationRed,\r\n\t\tscreen: multipleScreenRed\r\n\t};\r\n\r\n\ttry {\r\n\t\tconst candidateAssessment = await getSecureFeatures();\r\n\t\tconst secureFeatures = candidateAssessment?.entities || [];\r\n\t\tconst profileSettings = candidateAssessment?.settings;\r\n\r\n\t\tlet recordVideo = secureFeatures.find(entity => entity.key === 'record_video');\r\n\t\tlet recordAudio = secureFeatures.find(entity => entity.key === 'record_audio');\r\n\t\tlet checkNetwork = secureFeatures.find(entity => entity.key === 'internet_speed');\r\n\t\tlet trackLocation = secureFeatures.find(entity => entity.key === 'track_location');\r\n\t\tlet enableNotifications = secureFeatures.find(entity => entity.key === 'enable_notifications');\r\n\t\tlet multipleScreensCheck = secureFeatures.find(entity => entity.key === 'verify_desktop');\r\n\t\t\r\n\t\tconst promises = [];\r\n\r\n\t\tif (recordVideo) {\r\n\t\t\tpromises.push(checkCamera().then(stream => {\r\n\t\t\t\tcameraStream = stream; // Save the camera stream\r\n\t\t\t\tsetElementStatus('webcam', { success: videoGreen, failure: videoRed }, stream);\r\n\t\t\t\thandleDiagnosticItemClick('webcam', checkCamera);\r\n\t\t\t\treturn stream;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('webcam', { success: videoGreen, failure: videoRed }, true);\r\n\t\t}\r\n\r\n\t\tif (recordAudio) {\r\n\t\t\tpromises.push(checkMicrophone().then(stream => {\r\n\t\t\t\taudioStream = stream; // Save the audio stream\r\n\t\t\t\tsetElementStatus('microphone', { success: microPhoneGreen, failure: microPhoneRed }, stream);\r\n\t\t\t\thandleDiagnosticItemClick('microphone', checkMicrophone);\r\n\t\t\t\treturn stream;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('microphone', { success: microPhoneGreen, failure: microPhoneRed }, true);\r\n\t\t}\r\n\r\n\t\tif (checkNetwork) {\r\n\t\t\tpromises.push(getNetworkUploadSpeed().then(network => {\r\n\t\t\t\tconst isNetworkGood = network.speedMbps > profileSettings?.upload_speed || 0.168;\r\n\t\t\t\tsetElementStatus('connection', { success: networkGreen, failure: networkRed }, isNetworkGood);\r\n\t\t\t\thandleDiagnosticItemClick('connection', getNetworkUploadSpeed);\r\n\t\t\t\treturn isNetworkGood;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('connection', { success: networkGreen, failure: networkRed }, true);\r\n\t\t}\r\n\r\n\t\tif (trackLocation) {\r\n\t\t\tpromises.push(getLocation().then(location => {\r\n\t\t\t\tupdatePersistData('session', { location });\r\n\t\t\t\tsetElementStatus('location', { success: locationGreen, failure: locationRed }, location);\r\n\t\t\t\thandleDiagnosticItemClick('location', getLocation);\r\n\t\t\t\treturn location;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('location', { success: locationGreen, failure: locationRed }, true);\r\n\t\t}\r\n\r\n\t\tif (enableNotifications) {\r\n\t\t\tpromises.push(checkNotification().then(notification => {\r\n\t\t\t\tsetElementStatus('notification', { success: notificationGreen, failure: notificationRed }, notification);\r\n\t\t\t\thandleDiagnosticItemClick('notification', checkNotification);\r\n\t\t\t\treturn notification;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('notification', { success: notificationGreen, failure: notificationRed }, true);\r\n\t\t}\r\n\r\n\t\tif (multipleScreensCheck) {\r\n\t\t\tpromises.push(detectMultipleScreens().then(isDetected => {\r\n\t\t\t\tsetElementStatus('screen', { success: multipleScreenGreen, failure: multipleScreenRed }, !isDetected ? true : false);\r\n\t\t\t\thandleDiagnosticItemClick('screen', detectMultipleScreens);\r\n\t\t\t\treturn isDetected;\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetElementStatus('screen', { success: multipleScreenGreen, failure: multipleScreenRed }, true);\r\n\t\t}\r\n\r\n\t\tawait Promise.all(promises);\r\n\r\n\t\tif (cameraStream) cameraStream.getTracks().forEach(track => track.stop());\r\n\t\tif (audioStream) audioStream.getTracks().forEach(track => track.stop());\r\n\r\n\t\tconst allDiagnosticsPassed = Object.keys(successIconMap).every(item => {\t\r\n\t\t\tconst currentIconSrc = document.getElementById(`${item}StatusIcon`)?.src;\r\n\t\t\tif (!currentIconSrc) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tconst currentIconPathname = new URL(currentIconSrc).pathname;\r\n\t\t\tconst expectedIconPathname = new URL(successIconMap[item]).pathname;\r\n\t\r\n\t\t\treturn currentIconPathname === expectedIconPathname;\r\n\t});\r\n\t\r\n\t\tdocument.getElementById('diagnosticContinueBtn').disabled = !allDiagnosticsPassed;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error running diagnostics:', error);\r\n\t} finally {\r\n\t\tif (cameraStream) cameraStream.getTracks().forEach(track => track.stop());\r\n\t\tif (audioStream) audioStream.getTracks().forEach(track => track.stop());\r\n\t}\r\n};\r\n\r\nconst updateDiagnosticText = () => {\r\n\tconst diagnosticItems = ['webcam', 'microphone', 'connection','notification', 'location', 'screen'];\r\n\r\n\tdiagnosticItems.forEach(item => {\r\n\t\tconst labelElement = document.querySelector(`#${item}DiagnosticItem label`);\r\n\t\tif (labelElement) {\r\n\t\t\tlabelElement.textContent = i18next.t(item);\r\n\t\t}\r\n\t});\r\n\r\n\tconst heading = document.querySelector('.heading');\r\n\tif (heading) {\r\n\t\theading.textContent = i18next.t('system_diagnostic');\r\n\t}\r\n\r\n\tconst description = document.querySelector('.description');\r\n\tif (description) {\r\n\t\tdescription.textContent = i18next.t('system_diagnostic_msg');\r\n\t}\r\n};\r\n\r\ni18next.on('languageChanged', () => {\r\n\tupdateDiagnosticText();\r\n});\r\n","import axios from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const getAllAiEvents = async () => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${mereosToken}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.get(`/sessions/ai_event/`, config);\r\n};\r\n\r\nexport const createAiEvent = async (data) => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: mereosToken,\r\n\t\t},\r\n\t};\r\n\treturn axios.post('/sessions/candidate_ai_event/', data, config);\r\n};\r\n\r\nexport const editAiEvent = async (data) => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${mereosToken}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.put('/sessions/ai_event/', data, config);\r\n};\r\n\r\nexport const deleteEvent = async (id) => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${mereosToken}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.delete(`/sessions/ai_event/?id=${id}`, config);\r\n};","import axios from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const createCandidateAssessment = async (data) => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: mereosToken,\r\n\t\t},\r\n\t};\r\n\treturn axios.post('/assessments/candidate_assessment/', data, config);\r\n};","import axiosInstance from '../utils/axios';\r\n\r\nexport const logonSchool = async (data) => {\r\n\treturn axiosInstance.post(`/auth/logon/`, data);\r\n};","import axiosInstance from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const changeCandidateAssessmentStatus = async (data) => {\r\n\tconst token =  getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axiosInstance.put('/candidate/change_candidate_assessment_status/', data, config);\r\n};","import axiosInstance from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const getCandidateInviteAssessmentSection = async (params) => {\r\n\tconst token =  getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken:token,\r\n\t\t},\r\n\t\tparams: params\r\n\t};\r\n\treturn axiosInstance.get(`assessment/public_candidate_invite_assessment_section/`, config);\r\n};\r\n\r\nexport const changeCandidateInviteAssessmentSectionStatus = async (data) => {\r\n\tconst token =  getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axiosInstance.put('/assessment/change_candidate_invite_assessment_section_status/', data, config);\r\n};\r\n","import { getAuthenticationToken } from '../utils/functions';\r\nimport axios from '../utils/axios.js';\r\n\r\nexport const createCandidate = async (data) => {\r\n\tconst mereosToken = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: mereosToken,\r\n\t\t},\r\n\t};\r\n\treturn axios.post('/candidates/candidate_candidate/', data, config);\r\n};","import axios from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const getAllEvents = async () => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${token}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.get(`/section_session/event/`, config);\r\n};\r\n\r\nexport const createEvent = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axios.post('/sessions/candidate_event/', data, config);\r\n};\r\n\r\nexport const editEvent = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${token}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.put('/section_session/event/', data, config);\r\n};\r\n\r\nexport const deleteEvent = async (id) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${token}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.delete(`/section_session/event/?id=${id}`, config);\r\n};","import axios from '../utils/axios.js';\r\nimport { getAuthenticationToken } from '../utils/functions.js';\r\n\r\nexport const getProfile = async (params) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t},\r\n\t\tparams: params\r\n\t};\r\n\treturn axios.get('/profiles/candidate_profile/', config);\r\n};\r\nexport const createProfile = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axios.post('/profiles/profile/', data, config);\r\n};\r\n\r\nexport const editProfile = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${token}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.put('/profiles/profile/', data, config);\r\n};\r\n\r\nexport const deleteProfile = async (id) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Basic ${token}`,\r\n\t\t},\r\n\t};\r\n\treturn axios.delete(`/profiles/profile/?id=${id}`, config);\r\n};","import axiosInstance from '../utils/axios';\r\nimport { getAuthenticationToken } from '../utils/functions';\r\n\r\nexport const addSectionSession = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axiosInstance.post('/sessions/candidate_session/', data, config);\r\n};\r\n\r\nexport const editSectionSession = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axiosInstance.put('/sessions/candidate_session/', data, config);\r\n};","import axiosInstance from '../utils/axios';\r\nimport { getAuthenticationToken } from '../utils/functions';\r\n\r\nexport const getRoomSid = async (params) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t},\r\n\t\tparams\r\n\t};\r\n\treturn axiosInstance.get(`/twilio/create_room/`, config);\r\n};\r\n\r\nexport const getRecordings = async (params) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t},\r\n\t\tparams\r\n\t};\r\n\treturn axiosInstance.get('/twilio/get_recordings_sid/', config);\r\n};\r\n\r\nexport const getToken = async (params) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t},\r\n\t\tparams\r\n\t};\r\n\treturn axiosInstance.get(`/twilio/get-token/`, config);\r\n};\r\n\r\nexport const getRecordingSid = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t}\r\n\t};\r\n\treturn axiosInstance.post(`/twilio/get_SID/`, data, config);\r\n};\r\n\r\nexport const getCreateRoom = async (data) => {\r\n\tconst token = getAuthenticationToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\ttoken: `${token}`,\r\n\t\t}\r\n\t};\r\n\treturn axiosInstance.post('/twilio/candidate_get_create_room/', data, config);\r\n};","import * as TwilioVideo from 'twilio-video';\r\nimport { newStream } from '../ExamPrepreation/IdentityVerificationScreenFive';\r\nimport { convertDataIntoParse, findConfigs, findIncidentLevel, getDateTime, getSecureFeatures, getTimeInSeconds, lockBrowserFromContent, registerAIEvent, registerEvent, showToast, unlockBrowserFromContent, updatePersistData } from '../utils/functions';\r\nimport * as cocoSsd from '@tensorflow-models/coco-ssd';\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport socket from '../utils/socket';\r\nimport { getCreateRoom } from '../services/twilio.services';\r\nimport { LockDownOptions } from '../utils/constant';\r\nimport '../assets/css/start-recording.css';\r\nimport interact from 'interactjs';\r\nimport i18next from 'i18next';\r\n\r\nlet roomInstance = null;\r\nlet aiProcessingInterval = null;\r\nlet aiEvents = [];\r\nlet mediaStream=null;\r\nlet mobileRoomInstance = null;\r\n\r\nexport const startRecording = async () => {\r\n\tlet cameraTrack = null;\r\n\tlet screenTrack = null;\r\n\tlet cameraRecordings = [];\r\n\tlet audioRecordings = [];\r\n\tlet screenRecordings = [];\r\n\tconst secureFeatures = getSecureFeatures();\r\n\tconst session = convertDataIntoParse('session');\r\n\t\r\n\twindow.addEventListener('popstate', () => {\r\n\t\twindow.startRecordingCallBack({ message: 'session_has_been_terminated_send_resume_to_restart_again' });\r\n\t});\r\n\r\n\tconst initSocketConnection = () => {\r\n\t\tif (!socket) {\r\n\t\t\tconsole.error('Socket not initialized');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsocket.onmessage = (event) => {\r\n\t\t\tconst eventData = JSON.parse(event?.data);\r\n\t\t\tswitch (eventData?.message?.event || eventData?.event) {\r\n\t\t\t\tcase 'MobileRecordingStarted': {\r\n\t\t\t\t\tgetCreateRoom({\r\n\t\t\t\t\t\troom_name: session?.mobileRoomSessionId,\r\n\t\t\t\t\t\tauto_record: false\r\n\t\t\t\t\t}).then(async (twilioTokens) => {\t\r\n\t\t\t\t\t\tconst twilioRoom = await TwilioVideo.connect(twilioTokens?.data?.token, {\r\n\t\t\t\t\t\t\taudio: false,\r\n\t\t\t\t\t\t\tvideo: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t\tmobileRoomInstance = twilioRoom;\r\n\t\t\t\t\t\tif(mobileRoomInstance){\r\n\t\t\t\t\t\t\tVideoChat(twilioRoom);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\t\tmobileConnection: false,\r\n\t\t\t\t\t\t\tscreenSharing: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\twindow.startRecordingCallBack({ message: 'session_has_been_terminated_send_resume_to_restart_again' });\r\n\t\t\t\t\t\tconsole.log('error', error);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'violation':\r\n\t\t\t\t\tif(eventData?.message?.message === 'Violation'){\r\n\t\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\t\tmobileConnection: false,\r\n\t\t\t\t\t\t\tscreenSharing: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tshowToast('error',i18next.t('mobile_phone_disconneted'));\r\n\t\t\t\t\t\twindow.startRecordingCallBack({ message: 'session_has_been_terminated_send_resume_to_restart_again' });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tregisterEvent({ eventType: 'error', notify: false, eventName:eventData?.message?.message , eventValue: getDateTime() });\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.log('Unknown event:', eventData?.message);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tsocket.onerror = (error) => {\r\n\t\t\tconsole.error('WebSocket error:', error);\r\n\t\t};\r\n\r\n\t\tsocket.onclose = () => {\r\n\t\t\tconsole.log('WebSocket connection closed');\r\n\t\t};\r\n\t};\r\n\t\r\n\tinitSocketConnection();\r\n\r\n\tif(!(newStream?.getTracks()?.length) && findConfigs(['record_screen'],secureFeatures?.entities)?.length){\r\n\t\twindow.startRecordingCallBack({ message: 'session_has_been_terminated_send_resume_to_restart_again' });\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (secureFeatures?.entities !== null) {\r\n\t\tif(secureFeatures?.entities?.filter(entity => LockDownOptions.includes(entity.key))?.length){\r\n\t\t\tawait lockBrowserFromContent(secureFeatures?.entities || []);\r\n\t\t}\r\n\r\n\t\tlet twilioOptions = {\r\n\t\t\taudio: findConfigs(['record_audio'], secureFeatures?.entities).length ?\r\n\t\t\t\t(localStorage.getItem('microphoneID') !== null ? {\r\n\t\t\t\t\tdeviceId: { exact: localStorage.getItem('microphoneID') },\r\n\t\t\t\t} : true)\r\n\t\t\t\t:\r\n\t\t\t\tfalse,\r\n\t\t\tvideo: findConfigs(['record_video'], secureFeatures?.entities).length ?\r\n\t\t\t\t(localStorage.getItem('deviceId') !== null ? {\r\n\t\t\t\t\tdeviceId: { exact: localStorage.getItem('deviceId') },\r\n\t\t\t\t} : true)\r\n\t\t\t\t:\r\n\t\t\t\tfalse\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst dateTime = new Date();\r\n\t\t\tconst newRoomSessionId = dateTime.getTime();\r\n\t\t\tconst newSessionId = session?.sessionId ? session?.sessionId : dateTime.getTime();\r\n\r\n\t\t\tupdatePersistData('session', {\r\n\t\t\t\troomSessionId: newRoomSessionId,\r\n\t\t\t\tsessionId: newSessionId,\r\n\t\t\t\tsessionStartTime: getTimeInSeconds({ isUTC: true, inputDate: dateTime }),\r\n\t\t\t\tsessionStatus:'Attending'\r\n\t\t\t});\r\n\r\n\t\t\tlet room = await TwilioVideo.connect(session?.twilioToken, twilioOptions);\r\n\t\t\troomInstance = room;\r\n\r\n\t\t\tmediaStream = await navigator.mediaDevices.getUserMedia({ video: localStorage.getItem('deviceId') ? { deviceId: { exact: localStorage.getItem('deviceId') } } : true, audio: (localStorage.getItem('microphoneID') ? {\r\n\t\t\t\tdeviceId: { exact: localStorage.getItem('microphoneID') },\r\n\t\t\t} : true) });\r\n\r\n\t\t\tif (secureFeatures?.entities?.find(entity => entity.key === 'record_video')) {\r\n\t\t\t\tstartAIWebcam(mediaStream);\r\n\t\t\t}\r\n\r\n\t\t\tcameraTrack = new TwilioVideo.LocalVideoTrack(mediaStream.getVideoTracks()[0]);\r\n\t\t\tawait room.localParticipant.publishTrack(cameraTrack);\r\n\t\t\t\r\n\t\t\tif (secureFeatures?.entities.find(entity => entity.key === 'record_video')) {\r\n\t\t\t\tcameraRecordings = [\r\n\t\t\t\t\t...cameraRecordings,\r\n\t\t\t\t\t...Array.from(room?.localParticipant?.videoTracks, ([name, value]) => ({ name, value })).map(rt => rt.name)\r\n\t\t\t\t];\r\n\t\t\t\taudioRecordings = [\r\n\t\t\t\t\t...audioRecordings,\r\n\t\t\t\t\t...Array.from(room?.localParticipant?.audioTracks, ([name, value]) => ({ name, value })).map(rt => rt.name)\r\n\t\t\t\t];\r\n\t\t\t\tupdatePersistData('session', { user_video_name: cameraRecordings || [], user_audio_name: audioRecordings, room_id: room?.sid });\r\n\t\t\t}\r\n\r\n\t\t\tif (session?.screenRecordingStream && findConfigs(['record_screen'], secureFeatures?.entities).length) {\r\n\t\t\t\tscreenTrack = new TwilioVideo.LocalVideoTrack(newStream?.getTracks()[0]);\r\n\t\t\t\tlet screenTrackPublished = await room.localParticipant.publishTrack(screenTrack);\r\n\t\t\t\tscreenRecordings = [...screenRecordings, screenTrackPublished.trackSid];\r\n\t\t\t\tupdatePersistData('session', { screen_sharing_video_name: screenRecordings });\r\n\t\t\t}\r\n\r\n\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'browser_locked_successfully', eventValue: getDateTime() });\r\n\t\t\t\r\n\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'recording_started_successfully', startAt: dateTime });\r\n\t\t\tif (socket && socket.readyState === WebSocket.OPEN) {\r\n\t\t\t\tsocket.send(JSON.stringify({ event: 'startRecording', data: 'Web video recording started' }));\r\n\t\t\t}\r\n\r\n\t\t\tif(window.startRecordingCallBack){\r\n\t\t\t\twindow.startRecordingCallBack({ message: 'recording_started_successfully' });\r\n\t\t\t}\r\n\r\n\t\t\troom.on('reconnecting', () => {\r\n\t\t\t\tcleanupLocalVideo(cameraTrack);\r\n\t\t\t\tif(findConfigs(['mobile_proctoring'], secureFeatures?.entities).length){\r\n\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\tmobileConnection: false,\r\n\t\t\t\t\t\tscreenSharing: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tshowToast('error',i18next.t('mobile_phone_disconneted'));\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\tscreenSharing: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tshowToast('error',i18next.t('internet_connection_not_working'));\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(window.startRecordingCallBack){\r\n\t\t\t\t\twindow.startRecordingCallBack({ message: 'web_internet_connection_disconnected' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tupdatePersistData('session', {\r\n\t\t\t\tsessionStatus:'Terminated'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst PREDICTION = ['cell phone', 'book'];\r\n\r\nconst setupWebcam = async (mediaStream) => {\r\n\tlet webcamContainer = document.getElementById('webcam-container');\r\n\tif (!webcamContainer) {\r\n\t\twebcamContainer = document.createElement('div');\r\n\t\twebcamContainer.id = 'webcam-container';\r\n\t\twebcamContainer.style.display = 'flex';\r\n\t\twebcamContainer.style.zIndex = '999';\r\n\t\twebcamContainer.style.position = 'absolute';\r\n\t\twebcamContainer.style.rowGap = '10px';\r\n\t\twebcamContainer.style.flexDirection = 'column';\r\n\t\twebcamContainer.style.justifyContent = 'start';\r\n\t\twebcamContainer.style.marginLeft = '10px';\r\n\t\tdocument.body.appendChild(webcamContainer);\r\n\t}\r\n\r\n\tconst mediaWrapper = document.createElement('div');\r\n\tmediaWrapper.style.position = 'relative';\r\n\tmediaWrapper.style.width = '200px'; \r\n\tmediaWrapper.style.height = '150px'; \r\n\r\n\tconst videoElement = document.createElement('video');\r\n\tvideoElement.autoplay = true;\r\n\tvideoElement.muted = true;\r\n\tvideoElement.srcObject = mediaStream;\r\n\tvideoElement.style.position = 'absolute';\r\n\tvideoElement.style.width = '100%';\r\n\tvideoElement.style.height = 'auto'; \r\n\r\n\tconst canvas = document.createElement('canvas');\r\n\tcanvas.id = 'canvas';\r\n\tcanvas.style.position = 'absolute'; \r\n\tcanvas.style.top = '0';\r\n\tcanvas.style.left = '0';\r\n\tcanvas.style.width = '100%'; \r\n\tcanvas.style.height = '100%'; \r\n\r\n\tmediaWrapper.appendChild(videoElement);\r\n\tmediaWrapper.appendChild(canvas);\r\n\twebcamContainer.appendChild(mediaWrapper); \r\n\r\n\tvideoElement.addEventListener('loadedmetadata', () => {\r\n\t\tcanvas.width = videoElement.videoWidth;\r\n\t\tcanvas.height = videoElement.videoHeight;\r\n\t});\r\n\r\n\tinteract(webcamContainer).draggable({\r\n\t\tlisteners: {\r\n\t\t\tmove(event) {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tconst x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;\r\n\t\t\t\tconst y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n\r\n\t\t\t\ttarget.style.transform = `translate(${x}px, ${y}px)`;\r\n\r\n\t\t\t\ttarget.setAttribute('data-x', x);\r\n\t\t\t\ttarget.setAttribute('data-y', y);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn { videoElement, canvas };\r\n};\r\n\r\nconst handleVideoResize = (predictions, context) => {\r\n\tpredictions.forEach(prediction => {\r\n\t\tif (PREDICTION.includes(prediction.class) || prediction.class === 'person') {\r\n\t\t\tconst [x, y, width, height] = prediction.bbox;\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.rect(x, y, width, height);\r\n\t\t\tcontext.lineWidth = 2;\r\n\t\t\tcontext.strokeStyle = 'red';\r\n\t\t\tcontext.fillStyle = 'red';\r\n\t\t\tcontext.stroke();\r\n\t\t\tcontext.font = '16px Arial';\r\n\t\t\tcontext.fillText(`${prediction.class}`, x, y > 10 ? y - 5 : 10);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nconst startAIWebcam = async (mediaStream) => {\r\n\tawait tf.setBackend('webgl');\r\n\tawait tf.ready();\r\n\tconst net = await cocoSsd.load();\r\n\tconst { videoElement, canvas } = await setupWebcam(mediaStream);\r\n\tconst context = canvas.getContext('2d');\r\n\r\n\tconst session = convertDataIntoParse('session');\r\n\r\n\tlet seconds = session?.quizStartTime ? parseInt((getTimeInSeconds({ isUTC: true }) - session?.quizStartTime) / 1000) : 0;\r\n\r\n\taiProcessingInterval = setInterval(async () => {\r\n\t\ttry {\r\n\t\t\tif (videoElement.readyState === 4) {\r\n\t\t\t\tconst image = tf.browser.fromPixels(videoElement);\r\n\t\t\t\tconst predictions = await net.detect(image);\r\n\r\n\t\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\thandleVideoResize(predictions, context, canvas);\r\n\r\n\t\t\t\tlet log = {}, person = {}, multiplePersonFound = false;\r\n\t\t\t\tpredictions.forEach(prediction => {\r\n\t\t\t\t\tif (prediction.class === 'person' && person?.class) {\r\n\t\t\t\t\t\tif (!multiplePersonFound) {\r\n\t\t\t\t\t\t\tlog = { ...log, 'multiple_people': (log['multiple_people'] || 0) + 1 };\r\n\t\t\t\t\t\t\tmultiplePersonFound = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (prediction.class === 'person') {\r\n\t\t\t\t\t\tperson = prediction;\r\n\t\t\t\t\t} else if (PREDICTION.includes(prediction.class)) {\r\n\t\t\t\t\t\tlog = { ...log, ['object_detected']: (log[prediction.class] || 0) + 1 };\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!person.class) {\r\n\t\t\t\t\tlog = { ...log, 'person_missing': (log['person_missing'] || 0) + 1 };\r\n\t\t\t\t}\r\n\r\n\t\t\t\t['person_missing', 'object_detected', 'multiple_people'].forEach(key => {\r\n\t\t\t\t\tlet lastLogIndex = aiEvents.findIndex(lg => lg[key]);\r\n\t\t\t\t\tlet lastLog = lastLogIndex > -1 ? aiEvents.splice(lastLogIndex, 1)[0] : undefined;\r\n\t\t\t\t\tif (log[key] && (!lastLog?.[key] || lastLog?.['end_time'])) {\r\n\t\t\t\t\t\tconst newLog = { start_time: seconds, time_span: 1, [key]: log[key] };\r\n\t\t\t\t\t\tlet message = '';\r\n\t\t\t\t\t\tconsole.log('key',key);\r\n\t\t\t\t\t\tif(key === 'person_missing'){\r\n\t\t\t\t\t\t\tmessage = 'no_person_detected_come_back_to_assessment';\r\n\t\t\t\t\t\t}else if(key === 'object_detected'){\r\n\t\t\t\t\t\t\tmessage = 'unauthorized_object_detected_please_put_it_away';\r\n\t\t\t\t\t\t}else if(key === 'multiple_people'){\r\n\t\t\t\t\t\t\tmessage = 'multiple_people_detected';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tmessage = 'ai_recorder_unknown_violation';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('message',message);\r\n\t\t\t\t\t\tshowToast('error', i18next.t(message));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taiEvents.push(newLog);\r\n\t\t\t\t\t} else if (log[key] && lastLog?.[key]) {\r\n\t\t\t\t\t\tlastLog = { ...lastLog, time_span: (Number(lastLog['time_span']) || 0) + 1 };\r\n\t\t\t\t\t\taiEvents.push(lastLog);\r\n\t\t\t\t\t} else if (!log[key] && lastLog?.[key]) {\r\n\t\t\t\t\t\tlastLog = { ...lastLog, end_time: Number(lastLog.start_time) + Number(lastLog.time_span) };\r\n\t\t\t\t\t\tconst data = { eventType: 'success', notify: true, eventName: key, startTime: lastLog.start_time, endTime: Number(lastLog.start_time) + Number(lastLog.time_span) };\r\n\t\t\t\t\t\tregisterAIEvent(data);\r\n\t\t\t\t\t\tupdatePersistData('session',{\r\n\t\t\t\t\t\t\taiEvents: [data,...session.aiEvents]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error in AI processing:', error);\r\n\t\t}\r\n\t}, 1000);\r\n};\r\n\r\nexport const cleanupLocalVideo = () => {\r\n\tconst webcamContainer = document.getElementById('webcam-container');\r\n\tif (webcamContainer) {\r\n\t\tconst videoElement = webcamContainer.querySelector('video');\r\n\t\tif (videoElement) {\r\n\t\t\tvideoElement.pause();\r\n\t\t\tvideoElement.srcObject.getTracks().forEach(track => track.stop());\r\n\t\t\tvideoElement.srcObject = null;\r\n\t\t}\r\n\r\n\t\tconst canvas = webcamContainer.querySelector('canvas');\r\n\t\tif (canvas) {\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\twebcamContainer.remove();\r\n\t}\r\n};\r\n\r\nexport const stopAllRecordings = async () => {\r\n\ttry {\r\n\t\tconst secureFeatures = getSecureFeatures();\r\n\t\tconst session = convertDataIntoParse('session');\r\n\r\n\t\tif (socket && socket.readyState === WebSocket.OPEN) {\r\n\t\t\tsocket.send(JSON.stringify({ event: 'stopRecording', data: 'Web video recording stopped' }));\r\n\t\t}\r\n\r\n\t\tconst findIncident = session?.aiEvents?.length > 0 ? findIncidentLevel(session?.aiEvents) : 'low';\r\n\t\tupdatePersistData('session', {\r\n\t\t\trecordingEnded: true,\r\n\t\t\tsessionStatus: 'Completed',\r\n\t\t\tincident_level:findIncident\r\n\t\t});\r\n\r\n\t\tcleanupLocalVideo();\r\n\r\n\t\tif(window.sharedMediaStream){\r\n\t\t\twindow.sharedMediaStream.getTracks().forEach(track => track.stop());\r\n\t\t\twindow.sharedMediaStream = null;\r\n\t\t}\r\n\r\n\t\tif(mediaStream){\r\n\t\t\tmediaStream.getTracks().forEach(track => track.stop());\r\n\t\t\tmediaStream=null;\r\n\t\t}\r\n\r\n\t\tif (newStream) {\r\n\t\t\tnewStream.getVideoTracks().forEach(track => {\r\n\t\t\t\ttrack.stop();\r\n\t\t\t\ttrack.enabled = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (newStream) {\r\n\t\t\tnewStream.getAudioTracks().forEach(track => {\r\n\t\t\t\ttrack.stop();\r\n\t\t\t\ttrack.enabled = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (mobileRoomInstance) {\r\n\t\t\tmobileRoomInstance.localParticipant.tracks.forEach(publication => {\r\n\t\t\t\tconst track = publication.track;\r\n\t\t\t\tif (track) {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t\ttrack.detach().forEach(element => element.remove());\r\n\t\t\t\t\ttrack.disable();\r\n\t\t\t\t\tmobileRoomInstance.localParticipant.unpublishTrack(track);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tmobileRoomInstance.disconnect();\r\n\t\t\tmobileRoomInstance = null;\r\n\t\t}\r\n\r\n\t\tif (roomInstance) {\r\n\t\t\troomInstance.localParticipant.tracks.forEach(publication => {\r\n\t\t\t\tconst track = publication.track;\r\n\t\t\t\tif (track) {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t\ttrack.detach().forEach(element => element.remove());\r\n\t\t\t\t\ttrack.disable();\r\n\t\t\t\t\troomInstance.localParticipant.unpublishTrack(track);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\troomInstance.disconnect();\r\n\t\t\troomInstance = null;\r\n\t\t}\r\n\r\n\t\tif (aiProcessingInterval) {\r\n\t\t\tclearInterval(aiProcessingInterval);\r\n\t\t\taiProcessingInterval = null;\r\n\t\t}\r\n\r\n\t\tif(secureFeatures?.entities?.filter(entity => LockDownOptions.includes(entity.key))?.length){\r\n\t\t\tunlockBrowserFromContent();\r\n\t\t}\r\n\t\t\r\n\t\tconst dateTime = new Date();\r\n\r\n\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'recording_stopped_successfully', startAt: dateTime });\r\n\t\r\n\r\n\t\tshowToast('success', 'Recording stopped successfully');\r\n\r\n\t\treturn 'stop_recording';\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t}\r\n};\r\n\r\nfunction VideoChat(room) {\r\n\tconst secureFeatures = getSecureFeatures();\r\n\tconst session = convertDataIntoParse('session');\r\n\tlet webcamContainer = document.getElementById('webcam-container');\r\n\tconst localVideoRef = document.createElement('div');\r\n\tconst remoteVideoRef = document.createElement('div');\r\n\tremoteVideoRef.classList.add('remote-video');\r\n\r\n\twebcamContainer.appendChild(remoteVideoRef); \r\n\r\n\tfunction attachTrack(track, container) {\r\n\t\tif (container && track && track.kind === 'video') {\r\n\t\t\ttry {\r\n\t\t\t\tconst attachedElement = track?.attach();\r\n\t\t\t\tif (attachedElement) {\r\n\t\t\t\t\tattachedElement.classList.add('video-attached');\r\n\t\t\t\t\tcontainer.appendChild(attachedElement);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error attaching video track:', error);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.error('Track is not a video track or container is missing', { track, container });\r\n\t\t}\r\n\t}\r\n\r\n\tfunction detachTrack(track) {\r\n\t\tif (track && track.detach) {\r\n\t\t\ttrack.detach().forEach(element => element.remove());\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleParticipant(participant) {\r\n\t\tparticipant.tracks.forEach(publication => {\r\n\t\t\tif (publication.isSubscribed && publication.track.kind === 'video') {\r\n\t\t\t\tattachTrack(publication.track, remoteVideoRef);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparticipant.on('trackSubscribed', (track) => {\r\n\t\t\tif (track.kind === 'video') {\r\n\t\t\t\tattachTrack(track, remoteVideoRef);\r\n\t\t\t\tupdatePersistData('session', {\r\n\t\t\t\t\tmobileRecordings: [\r\n\t\t\t\t\t\t...(session.mobileRecordings || []),\r\n\t\t\t\t\t\ttrack.sid\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (track.kind === 'audio') {\r\n\t\t\t\tupdatePersistData('session', {\r\n\t\t\t\t\tmobileAudios: [\r\n\t\t\t\t\t\t...(session.mobileAudios || []),\r\n\t\t\t\t\t\ttrack.sid\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparticipant.on('trackUnsubscribed', (track) => {\r\n\t\t\tdetachTrack(track);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction connectToRoom() {\r\n\t\ttry {\r\n\t\t\troom.localParticipant.videoTracks.forEach(publication => {\r\n\t\t\t\tif (publication.track && publication.track.kind === 'video') {\r\n\t\t\t\t\tattachTrack(publication.track, localVideoRef);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\troom.participants.forEach(participant => {\r\n\t\t\t\thandleParticipant(participant);\r\n\t\t\t});\r\n\r\n\t\t\troom.on('participantReconnecting', () => {\r\n\t\t\t\tif (findConfigs(['mobile_proctoring'], secureFeatures?.entities).length) {\r\n\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\tmobileConnection: false,\r\n\t\t\t\t\t\tscreenSharing: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tshowToast('error',i18next.t('mobile_phone_disconneted'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tupdatePersistData('preChecksSteps', { \r\n\t\t\t\t\t\tscreenSharing: false\r\n\t\t\t\t\t});\t\r\n\t\t\t\t\tshowToast('error',i18next.t('internet_connection_not_working'));\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif(window.startRecordingCallBack){\r\n\t\t\t\t\t\twindow.startRecordingCallBack({ message: 'mobile_internet_connection_disconnected' });\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 4000);\r\n\t\t\t});\r\n\r\n\t\t\troom.on('participantConnected', (participant) => {\r\n\t\t\t\thandleParticipant(participant);\r\n\t\t\t});\r\n\r\n\t\t\troom.on('participantDisconnected', participant => {\r\n\t\t\t\tparticipant.tracks.forEach(publication => {\r\n\t\t\t\t\tif (publication.track) {\r\n\t\t\t\t\t\tdetachTrack(publication.track);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error connecting to Twilio room:', error);\r\n\t\t}\r\n\t}\r\n\r\n\tconnectToRoom();\r\n}\r\n","import axios from 'axios';\r\n\r\nimport { BASE_URL, CONTENT_TYPE } from './constant';\r\n\r\nconst axiosInstance = axios.create({\r\n\tbaseURL: BASE_URL,\r\n\theaders: {\r\n\t\t'content-type': CONTENT_TYPE.JSON,\r\n\t},\r\n});\r\n\r\nexport default axiosInstance;\r\n","export const ASSET_URL = 'https://mereos-corder.s3.eu-west-3.amazonaws.com/library_icons';\r\n\r\nexport const BASE_URL = process.env.NODE_ENV === 'production'\r\n\t? 'https://corder-api.mereos.eu'\r\n\t: 'https://corder-api.mereos-datasafe.com/';\r\n\r\nexport const SOCKET_URL = 'wss://mobile-socket.mereos.eu/websocket/';\r\n\r\nexport const CONTENT_TYPE = Object.freeze({\r\n\tJSON: 'application/json',\r\n\tFORM_DATA: 'multipart/form-data'\r\n});\r\n\r\nexport const initialSessionData = {\r\n\taiEvents:[],\r\n\tstart_time: null,\r\n\tsubmission_time: null,\r\n\tduration_taken: 0,\r\n\tidentity_card: null,\r\n\tidentity_photo: null,\r\n\tschool: null,\r\n\tassessment: null,\r\n\tcandidate: null,\r\n\tuser_video_name:  [],\r\n\tuser_audio_name: [],\r\n\tscreen_sharing_video_name: [],\r\n\troomscan_recordings: [],\r\n\tsession_id: null,\r\n\tcollected_details: null,\r\n\tvideo_codec: null,\r\n\tvideo_extension: null,\r\n\tarchive_id:null,\r\n\tattempt_id:null,\r\n\tsessionStatus:'Initiated',\r\n\tmobileRoomId:null,\r\n\tmobileRecordings:[],\r\n\tmobileAudios:[],\r\n\tmobileRoomSessionId:null,\r\n\ttwilioToken:null,\r\n\tincident_level:null,\r\n\tconverationId:null\r\n};\r\n\r\nexport const preChecksSteps = {\r\n\texamPreparation:false,\r\n\tdiagnosticStep:false,\r\n\tpreValidation:false,\r\n\tuserPhoto:false,\r\n\tidentityCardPhoto:false,\r\n\taudioDetection:false,\r\n\troomScanningVideo:false,\r\n\tscreenSharing:false,\r\n\texamIndication:false,\r\n\texamPrechecks:false,\r\n\tmobileConnection:false,\r\n};\r\n\r\nexport const LockDownOptions = [\r\n\t'detect_unfocus',\r\n\t'disable_downloading',\r\n\t'disable_printing',\r\n\t'force_full_screen',\r\n\t'detect_resizing_of_window',\r\n\t'disable_right_click',\r\n\t'disable_function_keys',\r\n\t'block_browser_screenshot',\r\n\t'disable_clipboard'\r\n];\r\n\r\nexport const defaultTheme = {\r\n\tlanguage:'en',\r\n\ttheming:'#FF961B'\r\n};\r\n\r\nexport const systemDiagnosticSteps = [\r\n\t'verify_desktop', \r\n\t'record_video', \r\n\t'record_audio', \r\n\t'verify_connection', \r\n\t'track_location', \r\n\t'enable_notifications', \r\n\t'record_room',\r\n\t'record_audio'\r\n];\r\n\r\nexport const prevalidationSteps = [\r\n\t'record_video', \r\n\t'record_audio',\r\n\t'identity_card_requirement',\r\n\t'record_room'\r\n];\r\n\r\nexport const languages = [\r\n\t{name: 'English', value: 'english', src: `${ASSET_URL}/flag-of-uk.svg`, alt: '', keyword: 'en' },\r\n\t{name: 'Spanish', value: 'spanish', src: `${ASSET_URL}/flag-of-spain.svg`, alt: '', keyword: 'es' },\r\n\t{name: 'German', value: 'german', src: `${ASSET_URL}/flag-of-germany.svg`, alt: '', keyword: 'de' },\r\n\t{name: 'French', value: 'french', src: `${ASSET_URL}/flag-of-france.svg`, alt: '', keyword: 'fr' },\r\n\t{name: 'Portuguese (Brazil)', value: 'portuguese_brazil', src: `${ASSET_URL}/flag-of-brazil.svg`, alt: '', keyword: 'pt' },\r\n\t{name: 'Italian', value: 'italian', src: `${ASSET_URL}/flag-of-italy.svg`, alt: '', keyword: 'it' },\r\n];","import axios from 'axios';\r\nimport { ASSET_URL, BASE_URL, prevalidationSteps, systemDiagnosticSteps } from './constant';\r\nimport { addSectionSession, editSectionSession } from '../services/sessions.service';\r\nimport { getRecordingSid } from '../services/twilio.services';\r\nimport { createAiEvent } from '../services/ai-event.servicer';\r\nimport i18next from 'i18next';\r\nimport { createEvent } from '../services/event.service';\r\nimport { closeModal } from '../ExamPrepreation/examPrechecks';\r\nimport { Notyf } from 'notyf';\r\n\r\nexport const dataURIToBlob = (dataURI) => {\r\n\tconst splitDataURI = dataURI.split(',');\r\n\tconst byteString = splitDataURI[0].indexOf('base64') >= 0 ? atob(splitDataURI[1]) : decodeURI(splitDataURI[1]);\r\n\tconst mimeString = splitDataURI[0].split(':')[1].split(';')[0];\r\n\r\n\tconst ia = new Uint8Array(byteString.length);\r\n\tfor (let i = 0; i < byteString.length; i++)\r\n\t\tia[i] = byteString.charCodeAt(i);\r\n\r\n\treturn new Blob([ia], { type: mimeString });\r\n};\r\n\r\nexport const getTimeInSeconds = ({ isUTC = false, inputDate = new Date() }) => {\r\n\tconst currentDate = new Date(inputDate);\r\n\tif (isUTC) {\r\n\t\treturn currentDate.getTime() - currentDate.getTimezoneOffset() * 60 * 1000;\r\n\t} else {\r\n\t\treturn currentDate.getTime();\r\n\t}\r\n};\r\n\r\nexport const checkCamera = () => {\r\n\treturn new Promise((resolve) => {\r\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t.then((stream) => {\r\n\t\t\t\t\tresolve(stream);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tresolve(false);\r\n\t\t\t\t});\r\n\t\t} else if (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia) {\r\n\t\t\tconst getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n\t\t\tgetUserMedia({ video: true }, (stream) => {\r\n\t\t\t\tresolve(stream);\r\n\t\t\t}, () => {\r\n\t\t\t\tresolve(false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tresolve(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getLocation = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tlet startPos;\r\n\t\tconst geoSuccess = (position) => {\r\n\t\t\tstartPos = position;\r\n\t\t\tconst {latitude, longitude} = startPos.coords;\r\n\t\t\tresolve({latitude, longitude});\r\n\t\t};\r\n\t\tconst geoError = (_error) => {\r\n\t\t\tresolve(false);\r\n\t\t};\r\n\t\tnavigator.geolocation.getCurrentPosition(geoSuccess, geoError);\r\n\t});\r\n};\r\n\r\nexport const checkNotification = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tif (!('Notification' in window)) {\r\n\t\t\tresolve(false);\r\n\t\t} else if (Notification.permission === 'granted') {\r\n\t\t\tshowNotification({\r\n\t\t\t\ttitle: 'New notification message from mereos!',\r\n\t\t\t\tbody: 'Hey mate, Ready for the test ? It will be starting soon.',\r\n\t\t\t});\r\n\t\t\tresolve(true);\r\n\t\t} else if (Notification.permission === 'denied' || Notification.permission === 'default') {\r\n\t\t\tNotification.requestPermission()\r\n\t\t\t\t.then((permission) => {\r\n\t\t\t\t\tif (permission === 'granted') {\r\n\t\t\t\t\t\tshowNotification({\r\n\t\t\t\t\t\t\ttitle: 'New notification message from mereos!',\r\n\t\t\t\t\t\t\tbody: 'Hey mate, Ready for the test ? It will be starting soon.',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tresolve(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log('err', err);\r\n\t\t\t\t});\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getMultipleCameraDevices = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tnavigator.mediaDevices.enumerateDevices()\r\n\t\t\t.then(devices => {\r\n\t\t\t\tconst videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n\t\t\t\tvideoDevices.sort((a, b) => {\r\n\t\t\t\t\tconst isDefaultCamera = (device) => {\r\n\t\t\t\t\t\tconst label = device.label.toLowerCase();\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tlabel.includes('webcam') ||\r\n\t\t\t\t\t\t\tlabel.includes('camera') ||\r\n\t\t\t\t\t\t\tlabel.includes('integrated') ||\r\n\t\t\t\t\t\t\tlabel.includes('facetime') ||\r\n\t\t\t\t\t\t\tlabel.includes('isight')\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t\tif (isDefaultCamera(a)) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t} else if (isDefaultCamera(b)) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tresolve(videoDevices);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error('Error enumerating devices:', error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t});\r\n};\r\n\r\nexport const showNotification = ({ title, body }) => {\r\n\ttry{\r\n\t\tconst schoolTheme = JSON.parse(localStorage.getItem('schoolTheme'));\r\n\t\tlet icons  = schoolTheme?.schoolLogo || `${ASSET_URL}/mereos.png`;\r\n\t\tconst notification = new Notification(title, { body: body, icon: icons });\r\n\t\tconsole.log(notification);\r\n\t}catch(error) {\r\n\t\tconsole.error('Error in notification',error);\r\n\t}\r\n};\r\n\r\nexport const detectMultipleScreens = async () => {\r\n\tif (window.screen.isExtended) {\r\n\t\treturn true;\r\n\t}else {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport const checkMicrophone = () => {\r\n\treturn new Promise((resolve) => {\r\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true })\r\n\t\t\t\t.then((stream) => {\r\n\t\t\t\t\tresolve(stream);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tresolve(false);\r\n\t\t\t\t});\r\n\t\t} else if (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia) {\r\n\t\t\tconst getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n\t\t\tgetUserMedia({ audio: true }, (stream) => {\r\n\t\t\t\tresolve(stream);\r\n\t\t\t}, () => {\r\n\t\t\t\tresolve(false);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tresolve(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getNetworkUploadSpeed = async () => {\r\n\ttry {\r\n\t\tconst myData = { 'test': 'a'.repeat(1024 * 1024) };\r\n\t\tconst startTime = new Date().getTime();\r\n\r\n\t\tconst response = await testUploadSpeed({ 'test': 'a'.repeat(1024 * 1024) });\r\n\t\tif(response){\r\n\t\t\tconst endTime = new Date().getTime();\r\n\t\t\tconst duration = (endTime - startTime) / 1000;\r\n\t\t\tconst bitsLoaded = myData.test.length * 8;\r\n\t\t\tconst speedMbps = ((bitsLoaded / duration) / 1024 / 1024).toFixed(2);\r\n\t\t\t\r\n\t\t\treturn { speedMbps: speedMbps };\r\n\t\t}\r\n        \r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport const testUploadSpeed = async (text) => {\r\n\treturn axios.post(`https://dashboard-api.mereos-datasafe.com/general/test-upload-speed`, { 'test': text });\r\n};\r\n\r\nexport const registerEvent = ({ eventName }) => {\r\n\ttry{\r\n\t\tconst session = convertDataIntoParse('session');\r\n\t\tconsole.log('session',session);\r\n\r\n\t\tif(session?.id){\r\n\t\t\tconst event = {\r\n\t\t\t\tname: eventName,\r\n\t\t\t\tvalue: eventName,\r\n\t\t\t\tsession_id: session?.id,\r\n\t\t\t\tstart_at: session?.sessionStartTime !== 0 ? Math.round((getTimeInSeconds({isUTC: true}) - session?.sessionStartTime) / 1000) : 0\r\n\t\t\t};\r\n\t\t\t\t\r\n\t\t\treturn createEvent(event);\r\n\t\t}\r\n\t}catch(error){\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\nexport const updateThemeColor = () => {\r\n\tconst schoolTheme = JSON.parse(localStorage.getItem('schoolTheme')); \r\n\tdocument.documentElement.style.setProperty('--theme-color', schoolTheme?.theming || '#FF961B');\r\n};\r\n\r\nexport const loadZendeskWidget = () => {\r\n\tconst getSecureFeature = getSecureFeatures();\r\n\tconst secureFeatures = getSecureFeature?.entities || [];\r\n\tconst hasChatBot = secureFeatures?.some(entity => entity.key === 'chat_bot');\r\n\tlet script;\r\n\r\n\tif (hasChatBot) {\r\n\t\tscript = document.createElement('script');\r\n\t\tscript.src = 'https://static.zdassets.com/ekr/snippet.js?key=6542e7ef-41de-43ed-bc22-3d429a78ead3';\r\n\t\tscript.async = true;\r\n\t\tscript.id = 'ze-snippet';\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n};\r\n\r\nexport const cleanupZendeskWidget = () => {\r\n\tconst existingScript = document.getElementById('ze-snippet');\r\n\tif (existingScript && existingScript.parentNode) {\r\n\t\texistingScript.parentNode.removeChild(existingScript);\r\n\t}\r\n\r\n\tif (window.zE && typeof window.zE === 'function') {\r\n\t\ttry {\r\n\t\t\twindow.zE('messenger', 'hide');\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Error resetting the Zendesk widget:', e);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport const getAuthenticationToken = () => {\r\n\treturn localStorage.getItem('mereosToken');\r\n};\r\n\r\nexport const userRekognitionInfo = async (data) => {\r\n\treturn axios.post(`${BASE_URL}/general/rekognition/`, data);\r\n};\r\n\r\nexport const convertDataIntoParse = (key) => {\r\n\treturn JSON.parse(localStorage.getItem(key));\r\n};\r\n\r\nexport const srcToData = async (src) => {\r\n\tlet myPromise = await new Promise(resolve => {\r\n\t\tfetch(src)\r\n\t\t\t.then((res) => res.blob())\r\n\t\t\t.then((blob) => {\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\tresolve(reader.result);\r\n\t\t\t\t\t// getBase64StringFromDataURL\r\n\t\t\t\t\treader.result.replace('data:', '').replace(/^.+,/, '');\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsDataURL(blob);\r\n\t\t\t});\r\n\t});\r\n\r\n\treturn myPromise;\r\n};\r\n\r\nexport const acceptableLabels = (detectedLabels, acceptedValue = 80) => {\r\n\tconst acceptedLabels = ['cards', 'document', 'text', 'id cards', 'passport', 'driving license', 'license', 'id', 'identity', 'doc', 'cnic', 'nic'];\r\n\tlet totalLabelConfidence = 0;\r\n\tlet totalAcceptedLabels = 0;\r\n\tdetectedLabels?.Labels?.forEach(label => {\r\n\t\tif (acceptedLabels.includes(label.Name.toLowerCase())) {\r\n\t\t\ttotalLabelConfidence = totalLabelConfidence + label.Confidence;\r\n\t\t\ttotalAcceptedLabels = totalAcceptedLabels + 1;\r\n\t\t}\r\n\t});\r\n\r\n\treturn totalLabelConfidence / totalAcceptedLabels > acceptedValue;\r\n};\r\n\r\nexport const acceptableText = (detectedText, acceptedValue = 80) => {\r\n\tlet totalTextConfidence = 0;\r\n\tlet totalAcceptedTexts = 0;\r\n\tdetectedText.TextDetections.forEach(text => {\r\n\t\ttotalTextConfidence = totalTextConfidence + text.Confidence;\r\n\t\ttotalAcceptedTexts = totalAcceptedTexts + 1;\r\n\t});\r\n\r\n\tconsole.log('totalTextConfidence / totalAcceptedTexts', totalTextConfidence, totalAcceptedTexts);\r\n\r\n\treturn totalTextConfidence / totalAcceptedTexts >= acceptedValue;\r\n};\r\n\r\nexport const dataURLtoFile = (dataurl, filename) => {\r\n\tlet arr = dataurl?.split(','),\r\n\t\tmime = arr[0].match(/:(.*?);/)[1],\r\n\t\tbstr = atob(arr[arr.length - 1]), \r\n\t\tn = bstr.length, \r\n\t\tu8arr = new Uint8Array(n);\r\n\twhile (n--) {\r\n\t\tu8arr[n] = bstr.charCodeAt(n);\r\n\t}\r\n\treturn new File([u8arr], filename, {type: mime});\r\n};\r\n\r\nexport const shareScreenFromContent = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tnavigator.mediaDevices.getDisplayMedia({ video: { displaySurface: 'monitor' } })\r\n\t\t\t.then(stream => {\r\n\t\t\t\tresolve(stream);\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t});\r\n};\r\n\r\nexport const uploadFileInS3Folder = async (data) => {\r\n\tconst token = localStorage.getItem('mereosToken');\r\n\t\r\n\tconst myHeaders = new Headers();\r\n\tconst formData = new FormData();\r\n\tformData.append('files', data.file, `${Date.now()}`);\r\n\tformData.append('folder_name',data.folderName);\r\n\t\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\t...myHeaders, \r\n\t\t\ttoken: token,\r\n\t\t},\r\n\t};\r\n\treturn axios.post(`${BASE_URL}/general/candidate_upload_file/`, formData,config);\r\n};\r\n\r\nexport const findConfigs = (configs, entities) => {\r\n\tlet result = [];\r\n\tfor (const entity of entities) {\r\n\t\tfor (const config of configs) {\r\n\t\t\tif (config === entity.key) {\r\n\t\t\t\tresult.push(entity);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nexport const getSecureFeatures = () => {\r\n\tconst secureFeatures = JSON.parse(localStorage.getItem('secureFeatures'));\r\n\treturn secureFeatures;\r\n};\r\n\r\nexport const checkForMultipleMicrophones = async () => {\r\n\ttry {\r\n\t\tawait navigator.mediaDevices.getUserMedia({ audio: true });\r\n\r\n\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\r\n\r\n\t\tconst microphones = devices.filter(device => device.kind === 'audioinput');\r\n\t\tconsole.log('Microphones found:', microphones);\r\n\r\n\t\tif (microphones.length > 0) {\r\n\t\t\treturn microphones;\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t} catch (err) {\r\n\t\tif (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n\t\t\tconsole.error('Permission denied:', err);\r\n\t\t} else {\r\n\t\t\tconsole.error('Error:', err);\r\n\t\t}\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\nexport const updatePersistData = (key, updates) => {\r\n\tlet storedItemJSON = localStorage.getItem(key);\r\n\r\n\tif (storedItemJSON) {\r\n\t\tlet storedItem = JSON.parse(storedItemJSON);\r\n\r\n\t\tfor (let prop in updates) {\r\n\t\t\tif (updates.hasOwnProperty(prop)) {\r\n\t\t\t\tstoredItem[prop] = updates[prop];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet updatedItemJSON = JSON.stringify(storedItem);\r\n\r\n\t\tlocalStorage.setItem(key, updatedItemJSON);\r\n\t} else {\r\n\t\tconsole.warn(`No item found in localStorage with key \"${key}\"`);\r\n\t}\r\n};\r\n\r\nexport const addSectionSessionRecord = (session, candidateInviteAssessmentSection) => {\r\n\treturn new Promise(async (resolve, _reject) => {\r\n\t\tconsole.log('session',session,'candidateInviteAssessmentSection',candidateInviteAssessmentSection);\r\n\t\tlet recordings;\r\n\t\tif(session?.user_video_name?.length || session?.user_audio_name?.length || session?.screen_sharing_video_name?.length || session?.mobileRecordings?.length || session?.mobileAudios?.length){\r\n\t\t\tconst sourceIds = [...session?.user_video_name, ...session?.user_audio_name, ...session?.screen_sharing_video_name, ...session?.mobileRecordings , ...session?.mobileAudios];\r\n\t\t\trecordings = sourceIds?.length\r\n\t\t\t\t? await getRecordingSid({'source_id': [...session?.user_video_name, ...session?.user_audio_name, ...session?.screen_sharing_video_name, ...session?.mobileRecordings , ...session?.mobileAudios]})\r\n\t\t\t\t: [];\r\n\t\t}\r\n\t\t\r\n\t\tlet sectionSessionDetails = {\r\n\t\t\tstart_time: session?.sessionStartTime,\r\n\t\t\tsubmission_time: session?.submissionTime,\r\n\t\t\tduration_taken: session?.sessionStartTime ? getTimeInSeconds({isUTC: true}) - session.sessionStartTime : 0,\r\n\t\t\tidentity_card: session?.identityCard,\r\n\t\t\troom_scan_video:session?.room_scan_video,\r\n\t\t\tidentity_photo: session?.candidatePhoto,\r\n\t\t\tschool: candidateInviteAssessmentSection?.school?.id || '',\r\n\t\t\tassessment: session?.assessment?.id || 1,\r\n\t\t\tcandidate: candidateInviteAssessmentSection?.candidate?.id,\r\n\t\t\tuser_video_name: recordings?.data?.filter(recording => session.user_video_name.find(subrecording => subrecording === recording.source_sid))?.map(recording => recording.media_external_location) || [],\r\n\t\t\tuser_audio_name: recordings?.data?.filter(recording => session.user_audio_name.find(subrecording => subrecording === recording.source_sid))?.map(recording => recording.media_external_location) || [],\r\n\t\t\tscreen_sharing_video_name: recordings?.data?.filter(recording => session.screen_sharing_video_name.find(subrecording => subrecording === recording.source_sid))?.map(recording => recording.media_external_location) || [],\r\n\t\t\troomscan_recordings: session?.roomScanRecordings,\r\n\t\t\tsession_id: session?.sessionId,\r\n\t\t\tcollected_details: {\r\n\t\t\t\tlocation: session?.location,\r\n\t\t\t},\r\n\t\t\tstatus: session?.sessionStatus,\r\n\t\t\tvideo_codec: null,\r\n\t\t\tvideo_extension: null,\r\n\t\t\tarchive_id:null,\r\n\t\t\tattempt_id:null,\r\n\t\t\tincident_level: session?.incident_level,\r\n\t\t\tmobile_audio_name: recordings?.data?.filter(recording => session?.mobileAudios?.find(subrecording => subrecording === recording.source_sid))?.map(recording => recording.media_external_location) || [],\r\n\t\t\tmobile_video_name: recordings?.data?.filter(recording => session?.mobileRecordings?.find(subrecording => subrecording === recording.source_sid))?.map(recording => recording.media_external_location) || [],\r\n\t\t};\r\n\r\n\t\tif (session?.id) {\r\n\t\t\tsectionSessionDetails['id'] = session?.id;\r\n\t\t}\r\n\t\t\r\n\t\tconst resp = session?.id ? await editSectionSession(sectionSessionDetails) : await addSectionSession(sectionSessionDetails);\r\n\t\tresolve(resp);\r\n\t});\r\n};\r\n\r\nexport const getDateTime = (_dateBreaker_ = '/', _timeBreaker_ = ':', _differentiator_ = ' ', inputDate = new Date()) => {\r\n\tconst currentDate = new Date(inputDate);\r\n\tconst year = currentDate.getUTCFullYear();\r\n\tconst date = ('0' + currentDate.getUTCDate()).substr(-2);\r\n\tconst month = ('0' + (currentDate.getUTCMonth() + 1)).substr(-2);\r\n\tconst hours = ('0' + currentDate.getUTCHours()).substr(-2);\r\n\tconst minutes = ('0' + currentDate.getUTCMinutes()).substr(-2);\r\n\tconst seconds = ('0' + currentDate.getUTCSeconds()).substr(-2);\r\n\treturn `${year}${_dateBreaker_}${date}${_dateBreaker_}${month}${_differentiator_}${hours}${_timeBreaker_}${minutes}${_timeBreaker_}${seconds}`;\r\n};\r\n\r\nexport const registerAIEvent = async ({ eventType, eventName, startTime,endTime }) => {\r\n\ttry{\r\n\t\tconst session = convertDataIntoParse('session');\r\n\t\tconsole.log('eventType',eventType);\r\n\r\n\t\tconst event = {\r\n\t\t\tname: eventName,\r\n\t\t\tstart_at: startTime,\r\n\t\t\tend_at:endTime,\r\n\t\t\tvalue: eventName,\r\n\t\t\tcreated_at: getDateTime(),\r\n\t\t\tsession_id: session?.id\r\n\t\t};\r\n\t\t\t\t\r\n\t\tawait createAiEvent(event);\r\n\t}catch(e){\r\n\t\tconsole.log('error',e);\r\n\t}\r\n};\r\n\r\nexport const lockBrowserFromContent = (entities) => {\r\n\treturn new Promise(async (resolve, _reject) => {\r\n\t\tlet result = {};\r\n\t\tfor (const entity of entities) {\r\n\t\t\tswitch (entity.name) {\r\n\t\t\t\tcase 'Disable Right Click': {\r\n\t\t\t\t\tconst disableRightClick = await preventRightClick();\r\n\t\t\t\t\tif (disableRightClick) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Disable Clipboard': {\r\n\t\t\t\t\tconst copyPasteCutDisabled = await disableCopyPasteCut();\r\n\t\t\t\t\tif (copyPasteCutDisabled) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Disable function keys': {\r\n\t\t\t\t\tconst disableShortcuts = await preventShortCuts();\r\n\t\t\t\t\tif (disableShortcuts) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Disable Printing': {\r\n\t\t\t\t\tconst disablePrinting = await stopPrinting();\r\n\t\t\t\t\tif (disablePrinting) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Detect unfocus': {\r\n\t\t\t\t\tconst defocusDisabled = await detectUnfocusOfTab();\r\n\t\t\t\t\tif (defocusDisabled) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Disable switch to other Apps': {\r\n\t\t\t\t\tconst detectPageLeaving = await preventPreClosure();\r\n\t\t\t\t\tif (detectPageLeaving) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Detect resizing of window': {\r\n\t\t\t\t\tconst disableWindowResize = await detectWindowResize(null);\r\n\t\t\t\t\tif (disableWindowResize) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Verify Desktop': {\r\n\t\t\t\t\tconst dualDisplay = await detectDualDisplay();\r\n\t\t\t\t\tif (dualDisplay) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'Force Full Screen': {\r\n\t\t\t\t\tconst fullScreen = await forceFullScreen();\r\n\t\t\t\t\tif (fullScreen) {\r\n\t\t\t\t\t\tresult = {...result, [entity.name]: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnull;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresolve(result);\r\n\t});\r\n};\r\n\r\nexport const preventRightClick = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tdocument.addEventListener('contextmenu', handleDefaultEvent);\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const disableCopyPasteCut = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\t'cut copy paste'.split(' ').forEach((eventName) => {\r\n\t\t\twindow.addEventListener(eventName, handleDefaultEvent);\r\n\t\t});\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const restoreRightClick = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tdocument.removeEventListener('contextmenu', handleDefaultEvent, true);\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const preventPreClosure = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const detectDualDisplay = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tresolve(window.screen.isExtended);\r\n\t});\r\n};\r\n\r\n\r\nlet visibilityChangeHandler;\r\n\r\nexport const detectUnfocusOfTab = () => {\r\n\treturn new Promise(async (resolve, _reject) => {\r\n\t\ttry {\r\n\t\t\tvisibilityChangeHandler = () => {\r\n\t\t\t\tif (document.hidden) {\r\n\t\t\t\t\tshowToast('error', i18next.t('moved_away_from_page'));\r\n\t\t\t\t\tregisterEvent({ eventType: 'error', notify: false, eventName: 'moved_away_from_page' });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tregisterEvent({ eventType: 'success', notify: false, eventName: 'moved_back_to_page' });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tdocument.addEventListener('visibilitychange', visibilityChangeHandler);\r\n\r\n\t\t\tresolve(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Notification permission error:', error);\r\n\t\t\tresolve(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nwindow.sharedMediaStream = null;\r\n\r\nexport const getMediaStream = async ({ audio, video }) => {\r\n\tif (window.sharedMediaStream) {\r\n\t\treturn window.sharedMediaStream;\r\n\t}\r\n\ttry {\r\n\t\twindow.sharedMediaStream = await navigator.mediaDevices.getUserMedia({ audio: audio, video: video });\r\n\t\treturn window.sharedMediaStream;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error accessing media devices: ', error);\r\n\t\tthrow error;\r\n\t}\r\n};\r\n\r\nexport const stopMediaStream = () => {\r\n\tif (window.sharedMediaStream) {\r\n\t\twindow.sharedMediaStream.getTracks().forEach(track => track.stop());\r\n\t\twindow.sharedMediaStream = null;\r\n\t\tconsole.log('Media stream stopped.');\r\n\t} else {\r\n\t\tconsole.log('No media stream to stop.');\r\n\t}\r\n};\r\n\r\nexport const removeUnfocusListener = () => {\r\n\tif (visibilityChangeHandler) {\r\n\t\tdocument.removeEventListener('visibilitychange', visibilityChangeHandler);\r\n\t\tvisibilityChangeHandler = null; \r\n\t}\r\n};\r\n\r\nexport const preventShortCuts = (allowedFunctionKeys = []) => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tdocument.onkeydown = (event) => {\r\n\t\t\tconsole.log('preventShortCuts', event);\r\n\t\t\tevent = event || window.event;\r\n\r\n\t\t\t// List of key codes to be blocked\r\n\t\t\tconst blockedKeys = [\r\n\t\t\t\t27,  // Escape\r\n\t\t\t\t91,  // Meta (Windows key, Command key on Mac)\r\n\t\t\t\t112, // F1\r\n\t\t\t\t113, // F2\r\n\t\t\t\t114, // F3\r\n\t\t\t\t115, // F4\r\n\t\t\t\t116, // F5\r\n\t\t\t\t117, // F6\r\n\t\t\t\t118, // F7\r\n\t\t\t\t119, // F8\r\n\t\t\t\t120, // F9\r\n\t\t\t\t121, // F10\r\n\t\t\t\t122, // F11\r\n\t\t\t\t123, // F12\r\n\t\t\t\t91, // window btn\r\n\t\t\t\t44,   // Print Screen,\r\n\t\t\t\t173,\r\n\t\t\t\t174,\r\n\t\t\t\t114,\r\n\t\t\t\t145,\r\n\t\t\t\t91\r\n\t\t\t];\r\n\r\n\t\t\t// Check for Ctrl/Meta + any alphabet key\r\n\t\t\tif (\r\n\t\t\t\t(event.ctrlKey || event.metaKey) && \r\n\t\t\t\t\t\t\t'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.indexOf(event.key) !== -1\r\n\t\t\t) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\t// Check for Ctrl + Shift + any alphabet key\r\n\t\t\tif (\r\n\t\t\t\t(event.ctrlKey || event.metaKey) && event.shiftKey &&\r\n\t\t\t\t\t\t\t'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.indexOf(event.key) !== -1\r\n\t\t\t) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\t// Check for specific function keys and other special keys\r\n\t\t\tif (blockedKeys.includes(event.keyCode)) {\r\n\t\t\t\t// Allow specific function key combinations if they are in the allowed list\r\n\t\t\t\tif (event.keyCode >= 112 && event.keyCode <= 123 && allowedFunctionKeys.includes(event.keyCode)) {\r\n\t\t\t\t\treturn; // Allow the function key if it is in the allowed list\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t};\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const stopPrinting = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tlet css = `\r\n\t\t\tbody {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t\tvisibility: hidden;\r\n\t\t\t}\r\n\t\t`;\r\n\t\tlet head = document.head || document.getElementsByTagName('head')[0];\r\n\t\tlet style = document.createElement('style');\r\n\r\n\t\thead.appendChild(style);\r\n\r\n\t\tstyle.type = 'text/css';\r\n\t\tstyle.media = 'print';\r\n\t\tif (style.styleSheet) {\r\n\t\t\t// This is required for IE8 and below.\r\n\t\t\tstyle.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\tstyle.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nlet resizeTimeout;\r\nlet isResizing = false;\r\n\r\nconst handleResize = () => {\r\n\tif (!isResizing) {\r\n\t\tregisterEvent({ eventType: 'error', notify: false, eventName: 'candidate_resized_window' });\r\n\t\tconsole.log('Resize started');\r\n\t\tisResizing = true;\r\n\t}\r\n\r\n\tclearTimeout(resizeTimeout);\r\n\r\n\tresizeTimeout = setTimeout(() => {\r\n\t\tregisterEvent({ eventType: 'error', notify: false, eventName: 'candidate_resized_window' });\r\n\t\tconsole.log('Resize ended');\r\n\t\tisResizing = false;\r\n\t}, 500);\r\n};\r\n\r\nexport const detectWindowResize = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\twindow.addEventListener('resize', handleResize);\r\n\t\tresolve(true);\r\n\t});\r\n};\r\n\r\nexport const exitFullScreen = () => {\r\n\ttry {\r\n\t\t// Attempt to exit fullscreen based on the browser\r\n\t\tif (document.exitFullscreen) {\r\n\t\t\tdocument.exitFullscreen();\r\n\t\t} else if (document.webkitExitFullscreen) { /* Safari */\r\n\t\t\tdocument.webkitExitFullscreen();\r\n\t\t} else if (document.msExitFullscreen) { /* IE11 */\r\n\t\t\tdocument.msExitFullscreen();\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('An error occurred while attempting to exit fullscreen:', error);\r\n\t}\r\n};\r\n\r\nlet whiteBackgroundElement; // Declare outside to access in the event listener\r\n\r\nexport const forceFullScreen = (element = document.documentElement) => {\r\n\ttry {\r\n\t\t// Attempt to request fullscreen based on the browser\r\n\t\tif (typeof element.requestFullscreen === 'function') {\r\n\t\t\telement.requestFullscreen();\r\n\t\t} else if (typeof element.webkitRequestFullscreen === 'function') { /* Safari */\r\n\t\t\telement.webkitRequestFullscreen();\r\n\t\t} else if (typeof element.msRequestFullscreen === 'function') { /* IE11 */\r\n\t\t\telement.msRequestFullscreen();\r\n\t\t}\r\n\r\n\t\t// Create the white background element only if it doesn't exist\r\n\t\tif (!whiteBackgroundElement) {\r\n\t\t\twhiteBackgroundElement = document.createElement('div');\r\n\t\t\twhiteBackgroundElement.id = 'white-Background-Element';\r\n\t\t\twhiteBackgroundElement.style.backgroundColor = 'white';\r\n\t\t\twhiteBackgroundElement.style.top = '0';\r\n\t\t\twhiteBackgroundElement.style.left = '0';\r\n\t\t\twhiteBackgroundElement.style.width = '100%';\r\n\t\t\twhiteBackgroundElement.style.height = '100%';\r\n\t\t\twhiteBackgroundElement.style.overflow = 'auto'; // Enable scrolling\r\n\t\t\twhiteBackgroundElement.style.zIndex = '1000'; // Ensure it's on top\r\n\r\n\t\t\tdocument.body.appendChild(whiteBackgroundElement);\r\n\t\t}\r\n\r\n\t\tconst handleFullscreenChange = () => {\r\n\t\t\tif (!document.fullscreenElement) {\r\n\t\t\t\tif (whiteBackgroundElement && document.body.contains(whiteBackgroundElement)) {\r\n\t\t\t\t\tdocument.body.removeChild(whiteBackgroundElement);\r\n\t\t\t\t\twhiteBackgroundElement = null;\r\n\t\t\t\t}\r\n\t\t\t\tdocument.removeEventListener('fullscreenchange', handleFullscreenChange); \r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener('fullscreenchange', handleFullscreenChange);\r\n\t} catch (error) {\r\n\t\tconsole.error('An error occurred while attempting to enter fullscreen:', error);\r\n\t}\r\n};\r\n\r\nexport const getCPUInfo = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tresolve(navigator.hardwareConcurrency);\r\n\t});\r\n};\r\n\r\nexport const getRAMInfo = () => {\r\n\treturn new Promise((resolve, _reject) => {\r\n\t\tresolve(navigator.deviceMemory);\r\n\t});\r\n};\r\n\r\nconst handleDefaultEvent = e => {\r\n\te.preventDefault();\r\n\te.stopPropagation();\r\n};\r\n\r\nexport const unlockBrowserFromContent = () => {\r\n\tdocument.removeEventListener('contextmenu', handleDefaultEvent);\r\n\r\n\t'cut copy paste'.split(' ').forEach((eventName) => {\r\n\t\twindow.removeEventListener(eventName, handleDefaultEvent);\r\n\t});\r\n\r\n\tdocument.onkeydown = null;\r\n\r\n\tconst printStyles = document.querySelectorAll('style[media=\"print\"]');\r\n\tprintStyles.forEach((style) => {\r\n\t\tif (style.textContent.includes('display: none') && style.textContent.includes('visibility: hidden')) {\r\n\t\t\tstyle.remove();\r\n\t\t}\r\n\t});\r\n\r\n\tremoveUnfocusListener();\r\n\r\n\twindow.removeEventListener('resize', handleResize);\r\n\r\n\tif (document.fullscreenElement) {\r\n\t\tdocument.exitFullscreen();\r\n\t}\r\n\r\n\tconst whiteBackgroundElement = document.getElementById('white-Background-Element');\r\n\tif (whiteBackgroundElement) {\r\n\t\tdocument.body.removeChild(whiteBackgroundElement);\r\n\t}\r\n\r\n\twindow.alert = function(){};\r\n\r\n\t// Close notifications\r\n\tif (Notification.permission === 'granted') {\r\n\t\tconst notifications = document.querySelectorAll('.notification'); \r\n\t\tnotifications.forEach((notification) => {\r\n\t\t\tnotification.close();\r\n\t\t});\r\n\t}\r\n\r\n\tconsole.log('All functionalities removed, page is restored to previous state.');\r\n};\r\n\r\nexport const handlePreChecksRedirection = () => {\r\n\tconst sessionSetting = localStorage.getItem('precheckSetting');\r\n\r\n\tif(sessionSetting === 'session_resume'){\r\n\t\tconst preChecksSteps = convertDataIntoParse('preChecksSteps');\r\n\t\tconst getSecureFeature = getSecureFeatures();\r\n\t\tconst secureFeatures = getSecureFeature?.entities || [];\r\n\t\tconst hasFeature = (featureName) => secureFeatures.some(feature => feature.key === featureName);\r\n\r\n\t\tif (!preChecksSteps?.examPreparation && hasFeature('record_video')) {\r\n\t\t\treturn 'ExamPreparation';\r\n\t\t} else if(!preChecksSteps?.diagnosticStep && secureFeatures?.filter(entity => systemDiagnosticSteps.includes(entity.key))?.length){\r\n\t\t\treturn 'runSystemDiagnostics';\r\n\t\t}else if(!preChecksSteps?.preValidation && secureFeatures?.filter(entity => prevalidationSteps.includes(entity.key))?.length){\r\n\t\t\treturn 'Prevalidationinstruction';\r\n\t\t}\r\n\t\telse if(!preChecksSteps?.userPhoto && hasFeature('verify_candidate')){\r\n\t\t\treturn 'IdentityVerificationScreenOne';\r\n\t\t}else if(!preChecksSteps?.identityCardPhoto && hasFeature('identity_card_requirement')){\r\n\t\t\treturn 'IdentityVerificationScreenTwo';\r\n\t\t}else if(!preChecksSteps?.audioDetection && hasFeature('record_audio')){\r\n\t\t\treturn 'IdentityVerificationScreenThree';\r\n\t\t}else if(!preChecksSteps?.roomScanningVideo && hasFeature('record_room')){\r\n\t\t\treturn 'IdentityVerificationScreenFour';\r\n\t\t}else if(!preChecksSteps?.mobileConnection && hasFeature('mobile_proctoring')){\r\n\t\t\treturn 'MobileProctoring';\r\n\t\t}else if(!preChecksSteps?.screenSharing || hasFeature('record_screen')){\r\n\t\t\treturn 'IdentityVerificationScreenFive';\r\n\t\t} else{\r\n\t\t\tcloseModal();\r\n\t\t}\r\n\t}else{\r\n\t\treturn 'ExamPreparation';\r\n\t}\r\n};\r\n\r\nexport const findIncidentLevel = (ai_events) => {\r\n\tlet result = 'low';\r\n\tconsole.log('ai_events findIncidentLevel',ai_events);\r\n\r\n\tfor (const item of ai_events || []) {\r\n\t\tconst { endTime, startTime } = item;\r\n\t\tconst difference = endTime - startTime;\r\n\t\tconsole.log('difference',difference);\r\n\r\n\t\tif (difference > 10) {\r\n\t\t\treturn 'high';\r\n\t\t} else if (difference > 5) {\r\n\t\t\tresult = 'medium';\r\n\t\t}\r\n\t}\r\n\tconsole.log('result',result);\r\n\treturn result;\r\n};\r\n\r\nexport const showToast = (type, message) => {\r\n\tconst notyf = new Notyf();\r\n\tconst options = {\r\n\t\tmessage: message,\r\n\t\tduration: 3000, \r\n\t\tposition: { x: 'right', y: 'top' },\r\n\t\tripple: true \r\n\t};\r\n\r\n\tswitch (type) {\r\n\t\tcase 'error':\r\n\t\t\tnotyf.error(options);\r\n\t\t\tbreak;\r\n\t\tcase 'success':\r\n\t\t\tnotyf.success(options);\r\n\t\t\tbreak;\r\n\t\tcase 'warning':\r\n\t\t\tnotyf.warning(options);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.log('Invalid notification type');\r\n\t\t\tbreak;\r\n\t}\r\n};","import i18next from 'i18next';\r\n\r\ni18next.init({\r\n\tlng: 'en',\r\n\tresources: {\r\n\t\t// en: {\r\n\t\t// \ttranslation: require('./locales/en.json')\r\n\t\t// },\r\n\t\t// es: {\r\n\t\t// \ttranslation: require('./locales/es.json')\r\n\t\t// },\r\n\t\tit: {\r\n\t\t\ttranslation: require('./locales/it/translations.json')\r\n\t\t}\r\n\t}\r\n}, (err) => {\r\n\tif (err) return console.error(err);\r\n\tupdateTranslations();\r\n});\r\n\r\nconst updateTranslations = () => {\r\n\tdocument.querySelectorAll('[data-i18n]').forEach((element) => {\r\n\t\tconst key = element.getAttribute('data-i18n');\r\n\t\telement.textContent = i18next.t(key);\r\n\t});\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tupdateTranslations();\r\n});\r\n","import { SOCKET_URL } from './constant';\r\nimport { v4 } from 'uuid';\r\n\r\nconst generatePeerId = () => v4();\r\n\r\nconst getGroupId = () => {\r\n\tconst storedId = JSON.parse(localStorage.getItem('socketGroupId'));\r\n\tif (storedId?.groupName) {\r\n\t\treturn storedId.groupName;\r\n\t} else {\r\n\t\tconst newId = generatePeerId(); // Generate a new group ID here if none exists\r\n\t\tlocalStorage.setItem('socketGroupId', JSON.stringify({ groupName: newId }));\r\n\t\treturn newId;\r\n\t}\r\n};\r\n\r\nlet finalGroupName = getGroupId();\r\n\r\nconst socket = new WebSocket(`${SOCKET_URL}?groupName=${finalGroupName}`);\r\n\r\nexport default socket;","const axios = {\r\n\tpost: jest.fn(), // Mock the post method\r\n\tcreate: jest.fn(),\r\n};\r\n\r\nexport default axios;\r\n","// module.exports = 'test-file-stub';"]}